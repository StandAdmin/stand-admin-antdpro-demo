(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[91],{49933:function(ut,L,x){"use strict";x.r(L),x.d(L,{Area:function(){return WM},Bar:function(){return VM},BidirectionalBar:function(){return xA},Box:function(){return KM},Bullet:function(){return XM},Chord:function(){return iA},Column:function(){return YM},DagreFundFlowGraph:function(){return lk},DagreGraph:function(){return qN},DualAxes:function(){return lA},Facet:function(){return mA},Funnel:function(){return HM},G2:function(){return G},Gauge:function(){return qM},Heatmap:function(){return QM},Histogram:function(){return jM},IndentedTree:function(){return ik},IndentedTreeGraph:function(){return fk},Line:function(){return ZM},Liquid:function(){return $M},Mix:function(){return iy},MultiView:function(){return iy},OrganizationTreeGraph:function(){return $N},OrganizationalGraph:function(){return dk},Pie:function(){return JM},Progress:function(){return tA},Radar:function(){return eA},RadialBar:function(){return vA},RadialGraph:function(){return vk},RingProgress:function(){return rA},Rose:function(){return nA},Sankey:function(){return gA},Scatter:function(){return aA},Stock:function(){return dA},Sunburst:function(){return hA},TinyArea:function(){return oA},TinyColumn:function(){return sA},TinyLine:function(){return uA},Treemap:function(){return pA},Violin:function(){return yA},Waterfall:function(){return cA},WordCloud:function(){return fA},adaptors:function(){return GM},default:function(){return $at},flow:function(){return Xr},measureTextWidth:function(){return cC}});var y={};x.r(y),x.d(y,{assign:function(){return ko},default:function(){return zf},defaultI18n:function(){return sc},format:function(){return Bf},parse:function(){return Ff},setGlobalDateI18n:function(){return jl},setGlobalDateMasks:function(){return kf}});var P={};x.r(P),x.d(P,{Arc:function(){return vr},DataMarker:function(){return yr},DataRegion:function(){return xr},Html:function(){return an},Image:function(){return Oe},Line:function(){return qe},Region:function(){return lr},RegionFilter:function(){return fr},Shape:function(){return hr},Text:function(){return tr}});var N={};x.r(N),x.d(N,{ellipsisHead:function(){return hn},ellipsisMiddle:function(){return ni},ellipsisTail:function(){return Pi},getDefault:function(){return Hi}});var w={};x.r(w),x.d(w,{equidistance:function(){return Lr},equidistanceWithReverseBoth:function(){return un},getDefault:function(){return Mi},reserveBoth:function(){return Mn},reserveFirst:function(){return Qr},reserveLast:function(){return ia}});var E={};x.r(E),x.d(E,{fixedAngle:function(){return Fs},getDefault:function(){return Vo},unfixedAngle:function(){return Vt}});var A={};x.r(A),x.d(A,{autoEllipsis:function(){return N},autoHide:function(){return w},autoRotate:function(){return E}});var O={};x.r(O),x.d(O,{Base:function(){return Dt},Circle:function(){return re},Html:function(){return xe},Line:function(){return fe}});var I={};x.r(I),x.d(I,{CONTAINER_CLASS:function(){return wl},CROSSHAIR_X:function(){return zx},CROSSHAIR_Y:function(){return Ux},LIST_CLASS:function(){return Fv},LIST_ITEM_CLASS:function(){return Jp},MARKER_CLASS:function(){return qp},NAME_CLASS:function(){return ES},TITLE_CLASS:function(){return Sh},VALUE_CLASS:function(){return t0}});var C={};x.r(C),x.d(C,{Base:function(){return ps},Circle:function(){return WF},Ellipse:function(){return XF},Image:function(){return HF},Line:function(){return ZF},Marker:function(){return QF},Path:function(){return m1},Polygon:function(){return o3},Polyline:function(){return l3},Rect:function(){return h3},Text:function(){return v3}});var T={};x.r(T),x.d(T,{Canvas:function(){return Al},Group:function(){return p1},Shape:function(){return C},getArcParams:function(){return v0},version:function(){return y3}});var D={};x.r(D),x.d(D,{Base:function(){return Yo},Circle:function(){return E3},Dom:function(){return C3},Ellipse:function(){return A3},Image:function(){return I3},Line:function(){return P3},Marker:function(){return L3},Path:function(){return N3},Polygon:function(){return B3},Polyline:function(){return G3},Rect:function(){return X3},Text:function(){return K3}});var B={};x.r(B),x.d(B,{Canvas:function(){return Ph},Group:function(){return b1},Shape:function(){return D},version:function(){return p5}});var G={};x.r(G),x.d(G,{Action:function(){return Si},BRUSH_FILTER_EVENTS:function(){return jc},Chart:function(){return dE},ComponentController:function(){return zc},Coordinate:function(){return Qf},DIRECTION:function(){return et},Element:function(){return n1},Event:function(){return fa},Facet:function(){return Fc},Geometry:function(){return Ml},GeometryLabel:function(){return h0},Interaction:function(){return QS},InteractionAction:function(){return Si},LAYER:function(){return $},Scale:function(){return cl},TooltipController:function(){return t1},Util:function(){return vs},VERSION:function(){return xF},VIEW_LIFE_CIRCLE:function(){return _t},View:function(){return hE},getActionClass:function(){return sB},getAnimation:function(){return e1},getEngine:function(){return ft},getFacet:function(){return GS},getGeometryLabel:function(){return xE},getGeometryLabelLayout:function(){return bE},getInteraction:function(){return eE},getShapeFactory:function(){return a1},getTheme:function(){return Ah},registerAction:function(){return Kr},registerAnimation:function(){return ho},registerComponentController:function(){return _u},registerEngine:function(){return ht},registerFacet:function(){return Gc},registerGeometry:function(){return ds},registerGeometryLabel:function(){return Hv},registerGeometryLabelLayout:function(){return eo},registerInteraction:function(){return An},registerShape:function(){return Bn},registerShapeFactory:function(){return Cl},registerTheme:function(){return iE}});var k={};x.r(k),x.d(k,{cluster:function(){return h9},hierarchy:function(){return Wh},pack:function(){return q2},packEnclose:function(){return H2},packSiblings:function(){return m9},partition:function(){return W2},stratify:function(){return w9},tree:function(){return O9},treemap:function(){return oM},treemapBinary:function(){return P9},treemapDice:function(){return mg},treemapResquarify:function(){return L9},treemapSlice:function(){return q0},treemapSliceDice:function(){return D9},treemapSquarify:function(){return aM}});var U={};x.r(U),x.d(U,{GADDI:function(){return $A},Stack:function(){return hy},breadthFirstSearch:function(){return CA},connectedComponent:function(){return Ob},default:function(){return mj},depthFirstSearch:function(){return Pb},detectAllCycles:function(){return OA},detectAllDirectedCycle:function(){return Lb},detectAllUndirectedCycle:function(){return Db},detectCycle:function(){return Rb},detectDirectedCycle:function(){return QA},dijkstra:function(){return Sg},findAllPath:function(){return LA},findShortestPath:function(){return DA},floydWarshall:function(){return Eg},getAdjMatrix:function(){return ef},getDegree:function(){return oy},getInDegree:function(){return AA},getNeighbors:function(){return To},getOutDegree:function(){return TA},labelPropagation:function(){return RA},louvain:function(){return NA},minimumSpanningTree:function(){return BA},pageRank:function(){return FA}});var Y={};x.r(Y),x.d(Y,{Line:function(){return nf},applyMatrix:function(){return gy},compare:function(){return xj},distance:function(){return py},floydWarshall:function(){return _j},fractionToLine:function(){return Bb},getAdjMatrix:function(){return Sj},getBBoxBoundLine:function(){return kb},getCircleCenterByPoints:function(){return Nb},getCircleIntersectByPoint:function(){return tT},getDegree:function(){return Cj},getEllipseIntersectByPoint:function(){return eT},getLineIntersect:function(){return vy},getPointsCenter:function(){return lT},getRectIntersectByPoint:function(){return qA},intersectBBox:function(){return aT},invertMatrix:function(){return rT},isPointInPolygon:function(){return wg},isPointsOverlap:function(){return Fb},isPolygonsIntersect:function(){return oT},itemIntersectByLine:function(){return sT},move:function(){return iT},pointLineDistance:function(){return Ij},pointLineSquareDist:function(){return uT},pointRectSquareDist:function(){return cT},rotate:function(){return wj},scale:function(){return Ej},scaleMatrix:function(){return bj},squareDist:function(){return yy},translate:function(){return nT}});var K={};x.r(K),x.d(K,{cloneBesidesImg:function(){return Sy},getBBox:function(){return by},getComboBBox:function(){return Cg},getLabelPosition:function(){return _y},getLetterWidth:function(){return mT},getLoopCfgs:function(){return pT},getTextSize:function(){return xT},plainCombosToTrees:function(){return Wb},reconstructTree:function(){return Vb},shouldRefreshEdge:function(){return bT},traverseTree:function(){return Io},traverseTreeUp:function(){return Ru}});var J={};x.r(J),x.d(J,{calculationItemsBBox:function(){return ST},cloneEvent:function(){return zj},formatPadding:function(){return Yb},isNaN:function(){return Ey},isViewportChanged:function(){return Uj},processParallelEdges:function(){return Wj},uniqueId:function(){return Xb}});var q={};x.r(q),x.d(q,{getClosedSpline:function(){return t_},getControlPoint:function(){return Ty},getSpline:function(){return BT},paddedHull:function(){return UT},pathToPoints:function(){return qb},pointsToPolygon:function(){return sZ},roundedHull:function(){return e_}});var X={};x.r(X),x.d(X,{defaultSubjectColors:function(){return IZ}});var j={};x.r(j),x.d(j,{getColorSetsBySubjectColors:function(){return KZ},getColorsWithSubjectColor:function(){return s_},mixColor:function(){return da}});var Q={};x.r(Q),x.d(Q,{arrayToTextureData:function(){return srt},attributesToTextureData:function(){return ort},buildTextureData:function(){return nrt},buildTextureDataWithOneEdgeAttr:function(){return irt},buildTextureDataWithTwoEdgeAttr:function(){return art},proccessToFunc:function(){return rrt},radialLayout:function(){return lrt}});var lt={};x.r(lt),x.d(lt,{gpuDetector:function(){return rN}});var z=x(59301),b=x(50029),v=x(6802),$;(function(n){n.FORE="fore",n.MID="mid",n.BG="bg"})($||($={}));var et;(function(n){n.TOP="top",n.TOP_LEFT="top-left",n.TOP_RIGHT="top-right",n.RIGHT="right",n.RIGHT_TOP="right-top",n.RIGHT_BOTTOM="right-bottom",n.LEFT="left",n.LEFT_TOP="left-top",n.LEFT_BOTTOM="left-bottom",n.BOTTOM="bottom",n.BOTTOM_LEFT="bottom-left",n.BOTTOM_RIGHT="bottom-right",n.RADIUS="radius",n.CIRCLE="circle",n.NONE="none"})(et||(et={}));var Z;(function(n){n.AXIS="axis",n.GRID="grid",n.LEGEND="legend",n.TOOLTIP="tooltip",n.ANNOTATION="annotation",n.SLIDER="slider",n.SCROLLBAR="scrollbar",n.OTHER="other"})(Z||(Z={}));var pt={FORE:3,MID:2,BG:1},_t;(function(n){n.BEFORE_RENDER="beforerender",n.AFTER_RENDER="afterrender",n.BEFORE_PAINT="beforepaint",n.AFTER_PAINT="afterpaint",n.BEFORE_CHANGE_DATA="beforechangedata",n.AFTER_CHANGE_DATA="afterchangedata",n.BEFORE_CLEAR="beforeclear",n.AFTER_CLEAR="afterclear",n.BEFORE_DESTROY="beforedestroy",n.BEFORE_CHANGE_SIZE="beforechangesize",n.AFTER_CHANGE_SIZE="afterchangesize"})(_t||(_t={}));var It;(function(n){n.BEFORE_DRAW_ANIMATE="beforeanimate",n.AFTER_DRAW_ANIMATE="afteranimate"})(It||(It={}));var Rt;(function(n){n.MOUSE_ENTER="plot:mouseenter",n.MOUSE_DOWN="plot:mousedown",n.MOUSE_MOVE="plot:mousemove",n.MOUSE_UP="plot:mouseup",n.MOUSE_LEAVE="plot:mouseleave",n.TOUCH_START="plot:touchstart",n.TOUCH_MOVE="plot:touchmove",n.TOUCH_END="plot:touchend",n.TOUCH_CANCEL="plot:touchcancel",n.CLICK="plot:click",n.DBLCLICK="plot:dblclick",n.CONTEXTMENU="plot:contextmenu",n.LEAVE="plot:leave",n.ENTER="plot:enter"})(Rt||(Rt={}));var H;(function(n){n.ACTIVE="active",n.INACTIVE="inactive",n.SELECTED="selected",n.DEFAULT="default"})(H||(H={}));var ot=["color","shape","size"],St="_origin",Ut=1,ae=1,bt=.25,wt={};function ft(n){var e=wt[n];if(!e)throw new Error("G engine '"+n+"' is not exist, please register it at first.");return e}function ht(n,e){wt[n]=e}var Pt,Lt,jt,mt;function W(){Pt=document.createElement("table"),Lt=document.createElement("tr"),jt=/^\s*<(\w+|!)[^>]*>/,mt={tr:document.createElement("tbody"),tbody:Pt,thead:Pt,tfoot:Pt,td:Lt,th:Lt,"*":document.createElement("div")}}function rt(n){Pt||W();var e=jt.test(n)&&RegExp.$1;(!e||!(e in mt))&&(e="*");var t=mt[e];n=n.replace(/(^\s*)|(\s*$)/g,""),t.innerHTML=""+n;var r=t.childNodes[0];return t.removeChild(r),r}function ct(n,e){if(n)for(var t in e)e.hasOwnProperty(t)&&(n.style[t]=e[t]);return n}function At(n){var e=getComputedStyle(n);return{width:(n.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10),height:(n.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)}}function tt(n){return typeof n=="number"&&!isNaN(n)}function dt(n,e,t,r){var i=t,a=r;if(e){var o=At(n);i=o.width?o.width:i,a=o.height?o.height:a}return{width:Math.max(tt(i)?i:Ut,Ut),height:Math.max(tt(a)?a:ae,ae)}}function Et(n){var e=n.parentNode;e&&e.removeChild(n)}var Ot=x(95472),$t=function(n){(0,b.__extends)(e,n);function e(t){var r=n.call(this)||this;r.destroyed=!1;var i=t.visible,a=i===void 0?!0:i;return r.visible=a,r}return e.prototype.show=function(){var t=this.visible;t||this.changeVisible(!0)},e.prototype.hide=function(){var t=this.visible;t&&this.changeVisible(!1)},e.prototype.destroy=function(){this.off(),this.destroyed=!0},e.prototype.changeVisible=function(t){this.visible!==t&&(this.visible=t)},e}(Ot.Z),st=$t,Qt=x(26691),vt=0,yt=1/2,zt=1/2,oe=.05,Ie=function(){function n(e){var t=e.xField,r=e.yField,i=e.adjustNames,a=i===void 0?["x","y"]:i;this.adjustNames=a,this.xField=t,this.yField=r}return n.prototype.isAdjust=function(e){return this.adjustNames.indexOf(e)>=0},n.prototype.getAdjustRange=function(e,t,r){var i=this.yField,a=r.indexOf(t),o=r.length,s,l;return!i&&this.isAdjust("y")?(s=0,l=1):o>1?(s=r[a===0?0:a-1],l=r[a===o-1?o-1:a+1],a!==0?s+=(t-s)/2:s-=(l-t)/2,a!==o-1?l-=(l-t)/2:l+=(t-r[o-2])/2):(s=t===0?0:t-.5,l=t===0?1:t+.5),{pre:s,next:l}},n.prototype.adjustData=function(e,t){var r=this,i=this.getDimValues(t);v.each(e,function(a,o){v.each(i,function(s,l){r.adjustDim(l,s,a,o)})})},n.prototype.groupData=function(e,t){return v.each(e,function(r){r[t]===void 0&&(r[t]=vt)}),v.groupBy(e,t)},n.prototype.adjustDim=function(e,t,r,i){},n.prototype.getDimValues=function(e){var t=this,r=t.xField,i=t.yField,a={},o=[];if(r&&this.isAdjust("x")&&o.push(r),i&&this.isAdjust("y")&&o.push(i),o.forEach(function(l){a[l]=v.valuesOfKey(e,l).sort(function(u,c){return u-c})}),!i&&this.isAdjust("y")){var s="y";a[s]=[vt,1]}return a},n}(),Gt=Ie,Wt={},Ht=function(n){return Wt[n.toLowerCase()]},de=function(n,e){if(Ht(n))throw new Error("Adjust type '"+n+"' existed.");Wt[n.toLowerCase()]=e};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ge=function(e,t){return Ge=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},Ge(e,t)};function Re(n,e){Ge(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ke=function(){return Ke=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Ke.apply(this,arguments)};function ze(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Ce(n,e,t,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(o=n[s])&&(a=(i<3?o(a):i>3?o(e,t,a):o(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a}function dr(n,e){return function(t,r){e(t,r,n)}}function sr(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function Tr(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(n,e||[])).next())})}function qr(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){t.label=u[1];break}if(u[0]===6&&t.label<a[1]){t.label=a[1],a=u;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(u);break}a[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function fn(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}function Rn(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function Yr(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Nn(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return a}function Vr(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Nn(arguments[e]));return n}function ki(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}function vn(n){return this instanceof vn?(this.v=n,this):new vn(n)}function $r(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,a=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(d){return new Promise(function(g,p){a.push([h,d,g,p])>1||s(h,d)})})}function s(h,d){try{l(r[h](d))}catch(g){f(a[0][3],g)}}function l(h){h.value instanceof vn?Promise.resolve(h.value.v).then(u,c):f(a[0][2],h)}function u(h){s("next",h)}function c(h){s("throw",h)}function f(h,d){h(d),a.shift(),a.length&&s(a[0][0],a[0][1])}}function En(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,a){e[i]=n[i]?function(o){return(t=!t)?{value:vn(n[i](o)),done:i==="return"}:a?a(o):o}:a}}function In(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Yr=="function"?Yr(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(a){t[a]=n[a]&&function(o){return new Promise(function(s,l){o=n[a](o),i(s,l,o.done,o.value)})}}function i(a,o,s,l){Promise.resolve(l).then(function(u){a({value:u,done:s})},o)}}function On(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function ta(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function Wi(n){return n&&n.__esModule?n:{default:n}}function kn(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function Bi(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}var gn=function(n){Re(e,n);function e(t){var r=n.call(this,t)||this;r.cacheMap={},r.adjustDataArray=[],r.mergeData=[];var i=t.marginRatio,a=i===void 0?yt:i,o=t.dodgeRatio,s=o===void 0?zt:o,l=t.dodgeBy,u=t.intervalPadding,c=t.dodgePadding,f=t.xDimensionLength,h=t.groupNum,d=t.defaultSize,g=t.maxColumnWidth,p=t.minColumnWidth,m=t.columnWidthRatio;return r.marginRatio=a,r.dodgeRatio=s,r.dodgeBy=l,r.intervalPadding=u,r.dodgePadding=c,r.xDimensionLegenth=f,r.groupNum=h,r.defaultSize=d,r.maxColumnWidth=g,r.minColumnWidth=p,r.columnWidthRatio=m,r}return e.prototype.process=function(t){var r=v.clone(t),i=v.flatten(r),a=this.dodgeBy,o=a?v.group(i,a):r;return this.cacheMap={},this.adjustDataArray=o,this.mergeData=i,this.adjustData(o,i),this.adjustDataArray=[],this.mergeData=[],r},e.prototype.adjustDim=function(t,r,i,a){var o=this,s=this.getDistribution(t),l=this.groupData(i,t);return v.each(l,function(u,c){var f;r.length===1?f={pre:r[0]-1,next:r[0]+1}:f=o.getAdjustRange(t,parseFloat(c),r),v.each(u,function(h){var d=h[t],g=s[d],p=g.indexOf(a);h[t]=o.getDodgeOffset(f,p,g.length)})}),[]},e.prototype.getDodgeOffset=function(t,r,i){var a=this,o=a.dodgeRatio,s=a.marginRatio,l=a.intervalPadding,u=a.dodgePadding,c=t.pre,f=t.next,h=f-c,d;if(!v.isNil(l)&&v.isNil(u)&&l>=0){var g=this.getIntervalOnlyOffset(i,r);d=c+g}else if(!v.isNil(u)&&v.isNil(l)&&u>=0){var g=this.getDodgeOnlyOffset(i,r);d=c+g}else if(!v.isNil(l)&&!v.isNil(u)&&l>=0&&u>=0){var g=this.getIntervalAndDodgeOffset(i,r);d=c+g}else{var p=h*o/i,m=s*p,g=1/2*(h-i*p-(i-1)*m)+((r+1)*p+r*m)-1/2*p-1/2*h;d=(c+f)/2+g}return d},e.prototype.getIntervalOnlyOffset=function(t,r){var i=this,a=i.defaultSize,o=i.intervalPadding,s=i.xDimensionLegenth,l=i.groupNum,u=i.dodgeRatio,c=i.maxColumnWidth,f=i.minColumnWidth,h=i.columnWidthRatio,d=o/s,g=(1-(l-1)*d)/l*u/(t-1),p=((1-d*(l-1))/l-g*(t-1))/t;if(p=v.isNil(h)?p:1/l/t*h,!v.isNil(c)){var m=c/s;p=Math.min(p,m)}if(!v.isNil(f)){var _=f/s;p=Math.max(p,_)}p=a?a/s:p,g=((1-(l-1)*d)/l-t*p)/(t-1);var S=((1/2+r)*p+r*g+1/2*d)*l-d/2;return S},e.prototype.getDodgeOnlyOffset=function(t,r){var i=this,a=i.defaultSize,o=i.dodgePadding,s=i.xDimensionLegenth,l=i.groupNum,u=i.marginRatio,c=i.maxColumnWidth,f=i.minColumnWidth,h=i.columnWidthRatio,d=o/s,g=1*u/(l-1),p=((1-g*(l-1))/l-d*(t-1))/t;if(p=h?1/l/t*h:p,!v.isNil(c)){var m=c/s;p=Math.min(p,m)}if(!v.isNil(f)){var _=f/s;p=Math.max(p,_)}p=a?a/s:p,g=(1-(p*t+d*(t-1))*l)/(l-1);var S=((1/2+r)*p+r*d+1/2*g)*l-g/2;return S},e.prototype.getIntervalAndDodgeOffset=function(t,r){var i=this,a=i.intervalPadding,o=i.dodgePadding,s=i.xDimensionLegenth,l=i.groupNum,u=a/s,c=o/s,f=((1-u*(l-1))/l-c*(t-1))/t,h=((1/2+r)*f+r*c+1/2*u)*l-u/2;return h},e.prototype.getDistribution=function(t){var r=this.adjustDataArray,i=this.cacheMap,a=i[t];return a||(a={},v.each(r,function(o,s){var l=v.valuesOfKey(o,t);l.length||l.push(0),v.each(l,function(u){a[u]||(a[u]=[]),a[u].push(s)})}),i[t]=a),a},e}(Gt),ci=gn;function fi(n,e){return(e-n)*Math.random()+n}var pi=function(n){Re(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.process=function(t){var r=v.clone(t),i=v.flatten(r);return this.adjustData(r,i),r},e.prototype.adjustDim=function(t,r,i){var a=this,o=this.groupData(i,t);return v.each(o,function(s,l){return a.adjustGroup(s,t,parseFloat(l),r)})},e.prototype.getAdjustOffset=function(t){var r=t.pre,i=t.next,a=(i-r)*oe;return fi(r+a,i-a)},e.prototype.adjustGroup=function(t,r,i,a){var o=this,s=this.getAdjustRange(r,i,a);return v.each(t,function(l){l[r]=o.getAdjustOffset(s)}),t},e}(Gt),mo=pi,ka=v.Cache,lo=function(n){Re(e,n);function e(t){var r=n.call(this,t)||this,i=t.adjustNames,a=i===void 0?["y"]:i,o=t.height,s=o===void 0?NaN:o,l=t.size,u=l===void 0?10:l,c=t.reverseOrder,f=c===void 0?!1:c;return r.adjustNames=a,r.height=s,r.size=u,r.reverseOrder=f,r}return e.prototype.process=function(t){var r=this,i=r.yField,a=r.reverseOrder,o=i?this.processStack(t):this.processOneDimStack(t);return a?this.reverse(o):o},e.prototype.reverse=function(t){return t.slice(0).reverse()},e.prototype.processStack=function(t){var r=this,i=r.xField,a=r.yField,o=r.reverseOrder,s=o?this.reverse(t):t,l=new ka,u=new ka;return s.map(function(c){return c.map(function(f){var h,d=v.get(f,i,0),g=v.get(f,[a]),p=d.toString();if(g=v.isArray(g)?g[1]:g,!v.isNil(g)){var m=g>=0?l:u;m.has(p)||m.set(p,0);var _=m.get(p),S=g+_;return m.set(p,S),Ke(Ke({},f),(h={},h[a]=[_,S],h))}return f})})},e.prototype.processOneDimStack=function(t){var r=this,i=this,a=i.xField,o=i.height,s=i.reverseOrder,l="y",u=s?this.reverse(t):t,c=new ka;return u.map(function(f){return f.map(function(h){var d,g=r.size,p=h[a],m=g*2/o;c.has(p)||c.set(p,m/2);var _=c.get(p);return c.set(p,_+m),Ke(Ke({},h),(d={},d[l]=_,d))})})},e}(Gt),Ca=lo,Lo=function(n){Re(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.process=function(t){var r=v.flatten(t),i=this,a=i.xField,o=i.yField,s=this.getXValuesMaxMap(r),l=Math.max.apply(Math,Object.keys(s).map(function(u){return s[u]}));return v.map(t,function(u){return v.map(u,function(c){var f,h,d=c[o],g=c[a];if(v.isArray(d)){var p=(l-s[g])/2;return Ke(Ke({},c),(f={},f[o]=v.map(d,function(_){return p+_}),f))}var m=(l-d)/2;return Ke(Ke({},c),(h={},h[o]=[m,d+m],h))})})},e.prototype.getXValuesMaxMap=function(t){var r=this,i=this,a=i.xField,o=i.yField,s=v.groupBy(t,function(l){return l[a]});return v.mapValues(s,function(l){return r.getDimMaxValue(l,o)})},e.prototype.getDimMaxValue=function(t,r){var i=v.map(t,function(o){return v.get(o,r,[])}),a=v.flatten(i);return Math.max.apply(Math,a)},e}(Gt),$n=Lo;de("Dodge",ci),de("Jitter",mo),de("Stack",Ca),de("Symmetric",$n);var Vi=function(n,e){return(0,v.isString)(e)?e:n.invert(n.scale(e))},Fi=function(){function n(e){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(e)}return n.prototype.mapping=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=t.map(function(a,o){return e._toOriginParam(a,e.scales[o])});return this.callback.apply(this,i)},n.prototype.getLinearValue=function(e){var t=this.values.length-1,r=Math.floor(t*e),i=t*e-r,a=this.values[r],o=r===t?a:this.values[r+1];return a+(o-a)*i},n.prototype.getNames=function(){for(var e=this.scales,t=this.names,r=Math.min(e.length,t.length),i=[],a=0;a<r;a+=1)i.push(t[a]);return i},n.prototype.getFields=function(){return this.scales.map(function(e){return e.field})},n.prototype.getScale=function(e){return this.scales[this.names.indexOf(e)]},n.prototype.defaultCallback=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.length===0?this.values:t.map(function(i,a){var o=e.scales[a];return o.type==="identity"?o.values[0]:e._getAttributeValue(o,i)})},n.prototype._parseCfg=function(e){var t=this,r=e.type,i=r===void 0?"base":r,a=e.names,o=a===void 0?[]:a,s=e.scales,l=s===void 0?[]:s,u=e.values,c=u===void 0?[]:u,f=e.callback;this.type=i,this.scales=l,this.values=c,this.names=o,this.callback=function(){for(var h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];if(f){var g=f.apply(void 0,h);if(!(0,v.isNil)(g))return[g]}return t.defaultCallback.apply(t,h)}},n.prototype._getAttributeValue=function(e,t){if(e.isCategory&&!this.linear){var r=e.translate(t);return this.values[r%this.values.length]}var i=e.scale(t);return this.getLinearValue(i)},n.prototype._toOriginParam=function(e,t){return t.isLinear?e:(0,v.isArray)(e)?e.map(function(r){return Vi(t,r)}):Vi(t,e)},n}(),Xi=Fi,$a=/rgba?\(([\s.,0-9]+)\)/,Ss=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Es=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,sl=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,Vl=function(n){return/^[r,R,L,l]{1}[\s]*\(/.test(n)},Xl=function(){var n=document.createElement("i");return n.title="Web Colour Picker",n.style.display="none",document.body.appendChild(n),n},ws=function(n,e,t,r){return n[r]+(e[r]-n[r])*t};function Mf(n){return"#"+tc(n[0])+tc(n[1])+tc(n[2])}var Af=function(n){return[parseInt(n.substr(1,2),16),parseInt(n.substr(3,2),16),parseInt(n.substr(5,2),16)]},tc=function(n){var e=Math.round(n).toString(16);return e.length===1?"0"+e:e},Od=function(n,e){var t=isNaN(Number(e))||e<0?0:e>1?1:Number(e),r=n.length-1,i=Math.floor(r*t),a=r*t-i,o=n[i],s=i===r?o:n[i+1];return Mf([ws(o,s,a,0),ws(o,s,a,1),ws(o,s,a,2)])},Yl,ec=function(n){if(n[0]==="#"&&n.length===7)return n;Yl||(Yl=Xl()),Yl.style.color=n;var e=document.defaultView.getComputedStyle(Yl,"").getPropertyValue("color"),t=$a.exec(e),r=t[1].split(/\s*,\s*/).map(function(i){return Number(i)});return e=Mf(r),e},Pd=function(n){var e=(0,v.isString)(n)?n.split("-"):n,t=(0,v.map)(e,function(r){return Af(r.indexOf("#")===-1?ec(r):r)});return function(r){return Od(t,r)}},Dd=function(n){if(Vl(n)){var e,t=void 0;if(n[0]==="l"){var r=Ss.exec(n),i=+r[1]+90;t=r[2],e="linear-gradient("+i+"deg, "}else if(n[0]==="r"){e="radial-gradient(";var r=Es.exec(n);t=r[4]}var a=t.match(sl);return(0,v.each)(a,function(o,s){var l=o.split(":");e+=l[1]+" "+l[0]*100+"%",s!==a.length-1&&(e+=", ")}),e+=")",e}return n},xo={rgb2arr:Af,gradient:Pd,toRGB:(0,v.memoize)(ec),toCSSGradient:Dd},Tf=function(n){Re(e,n);function e(t){var r=n.call(this,t)||this;return r.type="color",r.names=["color"],(0,v.isString)(r.values)&&(r.linear=!0),r.gradient=xo.gradient(r.values),r}return e.prototype.getLinearValue=function(t){return this.gradient(t)},e}(Xi),ll=Tf,Ld=function(n){Re(e,n);function e(t){var r=n.call(this,t)||this;return r.type="opacity",r.names=["opacity"],r}return e}(Xi),ul=Ld,rc=function(n){Re(e,n);function e(t){var r=n.call(this,t)||this;return r.names=["x","y"],r.type="position",r}return e.prototype.mapping=function(t,r){var i=this.scales,a=i[0],o=i[1];return(0,v.isNil)(t)||(0,v.isNil)(r)?[]:[(0,v.isArray)(t)?t.map(function(s){return a.scale(s)}):a.scale(t),(0,v.isArray)(r)?r.map(function(s){return o.scale(s)}):o.scale(r)]},e}(Xi),If=rc,nc=function(n){Re(e,n);function e(t){var r=n.call(this,t)||this;return r.type="shape",r.names=["shape"],r}return e.prototype.getLinearValue=function(t){var r=Math.round((this.values.length-1)*t);return this.values[r]},e}(Xi),Rd=nc,Nd=function(n){Re(e,n);function e(t){var r=n.call(this,t)||this;return r.type="size",r.names=["size"],r}return e}(Xi),kd=Nd,Of={};function Qa(n){return Of[n]}function yi(n,e){Of[n]=e}var Hl=function(){function n(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return n.prototype.translate=function(e){return e},n.prototype.change=function(e){(0,v.assign)(this.__cfg__,e),this.init()},n.prototype.clone=function(){return this.constructor(this.__cfg__)},n.prototype.getTicks=function(){var e=this;return(0,v.map)(this.ticks,function(t,r){return(0,v.isObject)(t)?t:{text:e.getText(t,r),tickValue:t,value:e.scale(t)}})},n.prototype.getText=function(e,t){var r=this.formatter,i=r?r(e,t):e;return(0,v.isNil)(i)||!(0,v.isFunction)(i.toString)?"":i.toString()},n.prototype.getConfig=function(e){return this.__cfg__[e]},n.prototype.init=function(){(0,v.assign)(this,this.__cfg__),this.setDomain(),(0,v.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},n.prototype.initCfg=function(){},n.prototype.setDomain=function(){},n.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if((0,v.isString)(e)){var r=Qa(e);if(!r)throw new Error("There is no method to to calculate ticks!");t=r(this)}else(0,v.isFunction)(e)&&(t=e(this));return t},n.prototype.rangeMin=function(){return this.range[0]},n.prototype.rangeMax=function(){return this.range[1]},n.prototype.calcPercent=function(e,t,r){return(0,v.isNumber)(e)?(e-t)/(r-t):NaN},n.prototype.calcValue=function(e,t,r){return t+e*(r-t)},n}(),cl=Hl,Bd=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var r=this.translateIndexMap.get(t);return r===void 0&&(r=(0,v.isNumber)(t)?t:NaN),r},e.prototype.scale=function(t){var r=this.translate(t),i=this.calcPercent(r,this.min,this.max);return this.calcValue(i,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var r=this.max-this.min,i=this.calcPercent(t,this.rangeMin(),this.rangeMax()),a=Math.round(r*i)+this.min;return a<this.min||a>this.max?NaN:this.values[a]},e.prototype.getText=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=t;return(0,v.isNumber)(t)&&!this.values.includes(t)&&(a=this.values[a]),n.prototype.getText.apply(this,(0,b.__spreadArrays)([a],r))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if((0,v.isNil)(this.getConfig("min"))&&(this.min=0),(0,v.isNil)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(cl),ns=Bd,ic=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,Ro="[1-9]\\d?",No="\\d\\d",ac="\\d{3}",Fd="\\d{4}",fl="[^\\s]+",Pf=/\[([^]*?)\]/gm;function Df(n,e){for(var t=[],r=0,i=n.length;r<i;r++)t.push(n[r].substr(0,e));return t}var Lf=function(n){return function(e,t){var r=t[n].map(function(a){return a.toLowerCase()}),i=r.indexOf(e.toLowerCase());return i>-1?i:null}};function ko(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var r=0,i=e;r<i.length;r++){var a=i[r];for(var o in a)n[o]=a[o]}return n}var Rf=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],oc=["January","February","March","April","May","June","July","August","September","October","November","December"],is=Df(oc,3),Gd=Df(Rf,3),sc={dayNamesShort:Gd,dayNames:Rf,monthNamesShort:is,monthNames:oc,amPm:["am","pm"],DoFn:function(n){return n+["th","st","nd","rd"][n%10>3?0:(n-n%10!=10?1:0)*n%10]}},as=ko({},sc),jl=function(n){return as=ko(as,n)},lc=function(n){return n.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},la=function(n,e){for(e===void 0&&(e=2),n=String(n);n.length<e;)n="0"+n;return n},zd={D:function(n){return String(n.getDate())},DD:function(n){return la(n.getDate())},Do:function(n,e){return e.DoFn(n.getDate())},d:function(n){return String(n.getDay())},dd:function(n){return la(n.getDay())},ddd:function(n,e){return e.dayNamesShort[n.getDay()]},dddd:function(n,e){return e.dayNames[n.getDay()]},M:function(n){return String(n.getMonth()+1)},MM:function(n){return la(n.getMonth()+1)},MMM:function(n,e){return e.monthNamesShort[n.getMonth()]},MMMM:function(n,e){return e.monthNames[n.getMonth()]},YY:function(n){return la(String(n.getFullYear()),4).substr(2)},YYYY:function(n){return la(n.getFullYear(),4)},h:function(n){return String(n.getHours()%12||12)},hh:function(n){return la(n.getHours()%12||12)},H:function(n){return String(n.getHours())},HH:function(n){return la(n.getHours())},m:function(n){return String(n.getMinutes())},mm:function(n){return la(n.getMinutes())},s:function(n){return String(n.getSeconds())},ss:function(n){return la(n.getSeconds())},S:function(n){return String(Math.round(n.getMilliseconds()/100))},SS:function(n){return la(Math.round(n.getMilliseconds()/10),2)},SSS:function(n){return la(n.getMilliseconds(),3)},a:function(n,e){return n.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(n,e){return n.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(n){var e=n.getTimezoneOffset();return(e>0?"-":"+")+la(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(n){var e=n.getTimezoneOffset();return(e>0?"-":"+")+la(Math.floor(Math.abs(e)/60),2)+":"+la(Math.abs(e)%60,2)}},Cs=function(n){return+n-1},bo=[null,Ro],_o=[null,fl],hl=["isPm",fl,function(n,e){var t=n.toLowerCase();return t===e.amPm[0]?0:t===e.amPm[1]?1:null}],dl=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(n){var e=(n+"").match(/([+-]|\d\d)/gi);if(e){var t=+e[1]*60+parseInt(e[2],10);return e[0]==="+"?t:-t}return 0}],Nf={D:["day",Ro],DD:["day",No],Do:["day",Ro+fl,function(n){return parseInt(n,10)}],M:["month",Ro,Cs],MM:["month",No,Cs],YY:["year",No,function(n){var e=new Date,t=+(""+e.getFullYear()).substr(0,2);return+(""+(+n>68?t-1:t)+n)}],h:["hour",Ro,void 0,"isPm"],hh:["hour",No,void 0,"isPm"],H:["hour",Ro],HH:["hour",No],m:["minute",Ro],mm:["minute",No],s:["second",Ro],ss:["second",No],YYYY:["year",Fd],S:["millisecond","\\d",function(n){return+n*100}],SS:["millisecond",No,function(n){return+n*10}],SSS:["millisecond",ac],d:bo,dd:bo,ddd:_o,dddd:_o,MMM:["month",fl,Lf("monthNamesShort")],MMMM:["month",fl,Lf("monthNames")],a:hl,A:hl,ZZ:dl,Z:dl},Zl={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},kf=function(n){return ko(Zl,n)},Bf=function(n,e,t){if(e===void 0&&(e=Zl.default),t===void 0&&(t={}),typeof n=="number"&&(n=new Date(n)),Object.prototype.toString.call(n)!=="[object Date]"||isNaN(n.getTime()))throw new Error("Invalid Date pass to format");e=Zl[e]||e;var r=[];e=e.replace(Pf,function(a,o){return r.push(o),"@@@"});var i=ko(ko({},as),t);return e=e.replace(ic,function(a){return zd[a](n,i)}),e.replace(/@@@/g,function(){return r.shift()})};function Ff(n,e,t){if(t===void 0&&(t={}),typeof e!="string")throw new Error("Invalid format in fecha parse");if(e=Zl[e]||e,n.length>1e3)return null;var r=new Date,i={year:r.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},a=[],o=[],s=e.replace(Pf,function(R,F){return o.push(lc(F)),"@@@"}),l={},u={};s=lc(s).replace(ic,function(R){var F=Nf[R],V=F[0],nt=F[1],at=F[3];if(l[V])throw new Error("Invalid format. "+V+" specified twice in format");return l[V]=!0,at&&(u[at]=!0),a.push(F),"("+nt+")"}),Object.keys(u).forEach(function(R){if(!l[R])throw new Error("Invalid format. "+R+" is required in specified format")}),s=s.replace(/@@@/g,function(){return o.shift()});var c=n.match(new RegExp(s,"i"));if(!c)return null;for(var f=ko(ko({},as),t),h=1;h<c.length;h++){var d=a[h-1],g=d[0],p=d[2],m=p?p(c[h],f):+c[h];if(m==null)return null;i[g]=m}i.isPm===1&&i.hour!=null&&+i.hour!=12?i.hour=+i.hour+12:i.isPm===0&&+i.hour==12&&(i.hour=0);for(var _=new Date(i.year,i.month,i.day,i.hour,i.minute,i.second,i.millisecond),S=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],h=0,M=S.length;h<M;h++)if(l[S[h][0]]&&i[S[h][0]]!==_[S[h][1]]())return null;return i.timezoneOffset==null?_:new Date(Date.UTC(i.year,i.month,i.day,i.hour,i.minute-i.timezoneOffset,i.second,i.millisecond))}var Gf={format:Bf,parse:Ff,defaultI18n:sc,setGlobalDateI18n:jl,setGlobalDateMasks:kf},zf=Gf;function Ud(n){return function(e,t,r,i){for(var a=(0,v.isNil)(r)?0:r,o=(0,v.isNil)(i)?e.length:i;a<o;){var s=a+o>>>1;n(e[s])>t?o=s:a=s+1}return a}}var os="format";function Uf(n,e){var t=y[os]||zf[os];return t(n,e)}function Kl(n){return(0,v.isString)(n)&&(n.indexOf("T")>0?n=new Date(n).getTime():n=new Date(n.replace(/-/gi,"/")).getTime()),(0,v.isDate)(n)&&(n=n.getTime()),n}var ua=1e3,ss=60*ua,Ba=60*ss,uo=24*Ba,Fa=uo*31,$l=uo*365,Ja=[["HH:mm:ss",ua],["HH:mm:ss",ua*10],["HH:mm:ss",ua*30],["HH:mm",ss],["HH:mm",ss*10],["HH:mm",ss*30],["HH",Ba],["HH",Ba*6],["HH",Ba*12],["YYYY-MM-DD",uo],["YYYY-MM-DD",uo*4],["YYYY-WW",uo*7],["YYYY-MM",Fa],["YYYY-MM",Fa*4],["YYYY-MM",Fa*6],["YYYY",uo*380]];function uc(n,e,t){var r=(e-n)/t,i=Ud(function(o){return o[1]})(Ja,r)-1,a=Ja[i];return i<0?a=Ja[0]:i>=Ja.length&&(a=(0,v.last)(Ja)),a}var Wd=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="timeCat",t}return e.prototype.translate=function(t){t=Kl(t);var r=this.values.indexOf(t);return r===-1&&((0,v.isNumber)(t)&&t<this.values.length?r=t:r=NaN),r},e.prototype.getText=function(t,r){var i=this.translate(t);if(i>-1){var a=this.values[i],o=this.formatter;return a=o?o(a,r):Uf(a,this.mask),a}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var t=this.values;(0,v.each)(t,function(r,i){t[i]=Kl(r)}),t.sort(function(r,i){return r-i}),n.prototype.setDomain.call(this)},e}(ns),Vd=Wd,Xd=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.isContinuous=!0,t}return e.prototype.scale=function(t){if((0,v.isNil)(t))return NaN;var r=this.rangeMin(),i=this.rangeMax(),a=this.max,o=this.min;if(a===o)return r;var s=this.getScalePercent(t);return r+s*(i-r)},e.prototype.init=function(){n.prototype.init.call(this);var t=this.ticks,r=(0,v.head)(t),i=(0,v.last)(t);r<this.min&&(this.min=r),i>this.max&&(this.max=i),(0,v.isNil)(this.minLimit)||(this.min=r),(0,v.isNil)(this.maxLimit)||(this.max=i)},e.prototype.setDomain=function(){var t=(0,v.getRange)(this.values),r=t.min,i=t.max;(0,v.isNil)(this.min)&&(this.min=r),(0,v.isNil)(this.max)&&(this.max=i),this.min>this.max&&(this.min=r,this.max=i)},e.prototype.calculateTicks=function(){var t=this,r=n.prototype.calculateTicks.call(this);return this.nice||(r=(0,v.filter)(r,function(i){return i>=t.min&&i<=t.max})),r},e.prototype.getScalePercent=function(t){var r=this.max,i=this.min;return(t-i)/(r-i)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(cl),vl=Xd,Yd=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t);return this.min+r*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(vl),ls=Yd;function So(n,e){var t=Math.E,r;return e>=0?r=Math.pow(t,Math.log(e)/n):r=Math.pow(t,Math.log(-e)/n)*-1,r}function wn(n,e){return n===1?1:Math.log(e)/Math.log(n)}function cc(n,e,t){(0,v.isNil)(t)&&(t=Math.max.apply(null,n));var r=t;return(0,v.each)(n,function(i){i>0&&i<r&&(r=i)}),r===t&&(r=t/e),r>1&&(r=1),r}function Wf(n){var e=n.toString().split(/[eE]/),t=(e[0].split(".")[1]||"").length-+(e[1]||0);return t>0?t:0}function Ga(n,e){var t=Wf(n),r=Wf(e),i=Math.pow(10,Math.max(t,r));return(n*i+e*i)/i}var fc=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="log",t}return e.prototype.invert=function(t){var r=this.base,i=wn(r,this.max),a=this.rangeMin(),o=this.rangeMax()-a,s,l=this.positiveMin;if(l){if(t===0)return 0;s=wn(r,l/r);var u=1/(i-s)*o;if(t<u)return t/u*l}else s=wn(r,this.min);var c=(t-a)/o,f=c*(i-s)+s;return Math.pow(r,f)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){n.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");t===0&&(this.positiveMin=cc(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var r=this.max,i=this.min;if(r===i||t<=0)return 0;var a=this.base,o=this.positiveMin;o&&(i=o*1/a);var s;return t<o?s=t/o/(wn(a,r)-wn(a,i)):s=(wn(a,t)-wn(a,i))/(wn(a,r)-wn(a,i)),s},e}(vl),Ql=fc,us=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="pow",t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t),i=this.exponent,a=So(i,this.max),o=So(i,this.min),s=r*(a-o)+o,l=s>=0?1:-1;return Math.pow(s,i)*l},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var r=this.max,i=this.min;if(r===i)return 0;var a=this.exponent,o=(So(a,t)-So(a,i))/(So(a,r)-So(a,i));return o},e}(vl),hc=us,Jl=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="time",t}return e.prototype.getText=function(t,r){var i=this.translate(t),a=this.formatter;return a?a(i,r):Uf(i,this.mask)},e.prototype.scale=function(t){var r=t;return((0,v.isString)(r)||(0,v.isDate)(r))&&(r=this.translate(r)),n.prototype.scale.call(this,r)},e.prototype.translate=function(t){return Kl(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,r=this.getConfig("min"),i=this.getConfig("max");if((!(0,v.isNil)(r)||!(0,v.isNumber)(r))&&(this.min=this.translate(this.min)),(!(0,v.isNil)(i)||!(0,v.isNumber)(i))&&(this.max=this.translate(this.max)),t&&t.length){var a=[],o=Infinity,s=o,l=0;(0,v.each)(t,function(u){var c=Kl(u);if(isNaN(c))throw new TypeError("Invalid Time: "+u+" in time scale!");o>c?(s=o,o=c):s>c&&(s=c),l<c&&(l=c),a.push(c)}),t.length>1&&(this.minTickInterval=s-o),(0,v.isNil)(r)&&(this.min=o),(0,v.isNil)(i)&&(this.max=l)}},e}(ls),gl=Jl,Mt=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="quantize",t}return e.prototype.invert=function(t){var r=this.ticks,i=r.length,a=this.getInvertPercent(t),o=Math.floor(a*(i-1));if(o>=i-1)return(0,v.last)(r);if(o<0)return(0,v.head)(r);var s=r[o],l=r[o+1],u=o/(i-1),c=(o+1)/(i-1);return s+(a-u)/(c-u)*(l-s)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var t=n.prototype.calculateTicks.call(this);return this.nice||((0,v.last)(t)!==this.max&&t.push(this.max),(0,v.head)(t)!==this.min&&t.unshift(this.min)),t},e.prototype.getScalePercent=function(t){var r=this.ticks;if(t<(0,v.head)(r))return 0;if(t>(0,v.last)(r))return 1;var i=0;return(0,v.each)(r,function(a,o){if(t>=a)i=o;else return!1}),i/(r.length-1)},e}(vl),Xt=Mt,se=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="quantile",t}return e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(Xt),be=se,Ue={};function mr(n){return Ue[n]}function kr(n,e){if(mr(n))throw new Error("type '"+n+"' existed.");Ue[n]=e}var ri=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&(0,v.isNumber)(t)?t:this.range[0]},e.prototype.invert=function(t){var r=this.range;return t<r[0]||t>r[1]?NaN:this.values[0]},e}(cl),co=ri,Bo=[1,5,2,2.5,4,3],ql=null,Ms=Number.EPSILON*100;function tu(n,e){return(n%e+e)%e}function Hd(n,e,t,r,i,a){var o=(0,v.size)(e),s=(0,v.indexOf)(e,n),l=0,u=tu(r,a);return(u<Ms||a-u<Ms)&&r<=0&&i>=0&&(l=1),1-s/(o-1)-t+l}function jd(n,e,t){var r=(0,v.size)(e),i=(0,v.indexOf)(e,n),a=1;return 1-i/(r-1)-t+a}function Zd(n,e,t,r,i,a){var o=(n-1)/(a-i),s=(e-1)/(Math.max(a,r)-Math.min(t,i));return 2-Math.max(o/s,s/o)}function Kd(n,e){return n>=e?2-(n-1)/(e-1):1}function dp(n,e,t,r){var i=e-n;return 1-.5*(Math.pow(e-r,2)+Math.pow(n-t,2))/Math.pow(.1*i,2)}function vp(n,e,t){var r=e-n;if(t>r){var i=(t-r)/2;return 1-Math.pow(i,2)/Math.pow(.1*r,2)}return 1}function gp(){return 1}function pp(n){return n<1e-15?n:parseFloat(n.toFixed(15))}function $d(n,e,t,r,i,a){if(t===void 0&&(t=5),r===void 0&&(r=!0),i===void 0&&(i=Bo),a===void 0&&(a=[.25,.2,.5,.05]),Number.isNaN(n)||Number.isNaN(e)||typeof n!="number"||typeof e!="number"||!t)return{min:0,max:0,ticks:[]};if(e-n<1e-15||t===1)return{min:n,max:e,ticks:[n]};for(var o={score:-2,lmin:0,lmax:0,lstep:0},s=1;s<Infinity;){for(var l=0;l<i.length;l+=1){var u=i[l],c=jd(u,i,s);if(a[0]*c+a[1]+a[2]+a[3]<o.score){s=Infinity;break}for(var f=2;f<Infinity;){var h=Kd(f,t);if(a[0]*c+a[1]+a[2]*h+a[3]<o.score)break;for(var d=(e-n)/(f+1)/s/u,g=Math.ceil(Math.log10(d));g<Infinity;){var p=s*u*Math.pow(10,g),m=vp(n,e,p*(f-1));if(a[0]*c+a[1]*m+a[2]*h+a[3]<o.score)break;var _=Math.floor(e/p)*s-(f-1)*s,S=Math.ceil(n/p)*s;if(_<=S)for(var M=S-_,R=0;R<=M;R+=1){var F=_+R,V=F*(p/s),nt=V+p*(f-1),at=p,xt=Hd(u,i,s,V,nt,at),gt=dp(n,e,V,nt),Tt=Zd(f,t,n,e,V,nt),Ct=gp(),te=a[0]*xt+a[1]*gt+a[2]*Tt+a[3]*Ct;te>o.score&&(!r||V<=n&&nt>=e)&&(o.lmin=V,o.lmax=nt,o.lstep=at,o.score=te)}g+=1}f+=1}}s+=1}for(var Kt=o.lmax,ne=o.lmin,ee=o.lstep,ve=Math.floor((Kt-ne)/ee)+1,ie=new Array(ve),l=0;l<ve;l++)ie[l]=pp(ne+l*ee);return{min:Math.min(n,(0,v.head)(ie)),max:Math.max(e,(0,v.last)(ie)),ticks:ie}}function Qd(n){var e=n.values,t=n.tickInterval,r=n.tickCount,i=e;if((0,v.isNumber)(t))return(0,v.filter)(i,function(u,c){return c%t==0});var a=n.min,o=n.max;if((0,v.isNil)(a)&&(a=0),(0,v.isNil)(o)&&(o=e.length-1),(0,v.isNumber)(r)&&r<o-a){var s=$d(a,o,r,!1,[1,2,5,3,4,7,6,8,9]).ticks,l=(0,v.filter)(s,function(u){return u>=a&&u<=o});return l.map(function(u){return e[u]})}return e.slice(a,o+1)}function yp(n){var e=n.min,t=n.max,r=n.nice,i=n.tickCount,a=new dc;return a.domain([e,t]),r&&a.nice(i),a.ticks(i)}var Vf=5,pl=Math.sqrt(50),Xf=Math.sqrt(10),Yf=Math.sqrt(2),dc=function(){function n(){this._domain=[0,1]}return n.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},n.prototype.nice=function(e){var t,r;e===void 0&&(e=Vf);var i=this._domain.slice(),a=0,o=this._domain.length-1,s=this._domain[a],l=this._domain[o],u;return l<s&&(t=[l,s],s=t[0],l=t[1],r=[o,a],a=r[0],o=r[1]),u=Hf(s,l,e),u>0?(s=Math.floor(s/u)*u,l=Math.ceil(l/u)*u,u=Hf(s,l,e)):u<0&&(s=Math.ceil(s*u)/u,l=Math.floor(l*u)/u,u=Hf(s,l,e)),u>0?(i[a]=Math.floor(s/u)*u,i[o]=Math.ceil(l/u)*u,this.domain(i)):u<0&&(i[a]=Math.ceil(s*u)/u,i[o]=Math.floor(l*u)/u,this.domain(i)),this},n.prototype.ticks=function(e){return e===void 0&&(e=Vf),Gm(this._domain[0],this._domain[this._domain.length-1],e||Vf)},n}();function Gm(n,e,t){var r,i=-1,a,o,s;if(e=+e,n=+n,t=+t,n===e&&t>0)return[n];if((r=e<n)&&(a=n,n=e,e=a),(s=Hf(n,e,t))===0||!isFinite(s))return[];if(s>0)for(n=Math.ceil(n/s),e=Math.floor(e/s),o=new Array(a=Math.ceil(e-n+1));++i<a;)o[i]=(n+i)*s;else for(n=Math.floor(n*s),e=Math.ceil(e*s),o=new Array(a=Math.ceil(n-e+1));++i<a;)o[i]=(n-i)/s;return r&&o.reverse(),o}function Hf(n,e,t){var r=(e-n)/Math.max(0,t),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=pl?10:a>=Xf?5:a>=Yf?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=pl?10:a>=Xf?5:a>=Yf?2:1)}function mp(n,e,t){var r;return t==="ceil"?r=Math.ceil(n/e):t==="floor"?r=Math.floor(n/e):r=Math.round(n/e),r*e}function vc(n,e,t){var r=mp(n,t,"floor"),i=mp(e,t,"ceil");r=(0,v.fixedBase)(r,t),i=(0,v.fixedBase)(i,t);for(var a=[],o=r;o<=i;o=o+t){var s=(0,v.fixedBase)(o,t);a.push(s)}return{min:r,max:i,ticks:a}}function Jd(n,e,t){var r,i=n.minLimit,a=n.maxLimit,o=n.min,s=n.max,l=n.tickCount,u=l===void 0?5:l,c=(0,v.isNil)(i)?(0,v.isNil)(e)?o:e:i,f=(0,v.isNil)(a)?(0,v.isNil)(t)?s:t:a;if(c>f&&(r=[c,f],f=r[0],c=r[1]),u<=2)return[c,f];for(var h=(f-c)/(u-1),d=[],g=0;g<u;g++)d.push(c+h*g);return d}function zm(n){var e=n.min,t=n.max,r=n.tickInterval,i=n.minLimit,a=n.maxLimit,o=yp(n);return!(0,v.isNil)(i)||!(0,v.isNil)(a)?Jd(n,(0,v.head)(o),(0,v.last)(o)):r?vc(e,t,r).ticks:o}function Um(n){var e=n.min,t=n.max,r=n.tickCount,i=n.nice,a=n.tickInterval,o=n.minLimit,s=n.maxLimit,l=$d(e,t,r,i).ticks;return!(0,v.isNil)(o)||!(0,v.isNil)(s)?Jd(n,(0,v.head)(l),(0,v.last)(l)):a?vc(e,t,a).ticks:l}function qd(n){var e=n.base,t=n.tickCount,r=n.min,i=n.max,a=n.values,o,s=wn(e,i);if(r>0)o=Math.floor(wn(e,r));else{var l=cc(a,e,i);o=Math.floor(wn(e,l))}for(var u=s-o,c=Math.ceil(u/t),f=[],h=o;h<s+c;h=h+c)f.push(Math.pow(e,h));return r<=0&&f.unshift(0),f}function Wm(n){return n<1e-15?n:parseFloat(n.toFixed(15))}function jf(n,e,t){if(t===void 0&&(t=5),n===e)return{max:e,min:n,ticks:[n]};var r=1.5,i=.5+1.5*r,a=e-n,o=a/t,s=Math.pow(10,Math.floor(Math.log10(o))),l=s;2*s-o<r*(o-l)&&(l=2*s,5*s-o<i*(o-l)&&(l=5*s,10*s-o<r*(o-l)&&(l=10*s)));for(var u=Math.ceil(e/l),c=Math.floor(n/l),f=Math.max(u*l,e),h=Math.min(c*l,n),d=Math.floor((f-h)/l)+1,g=new Array(d),p=0;p<d;p++)g[p]=Wm(h+p*l);return{min:h,max:f,ticks:g}}function xp(n){var e=n.exponent,t=n.tickCount,r=Math.ceil(So(e,n.max)),i=Math.floor(So(e,n.min)),a=jf(i,r,t).ticks;return a.map(function(o){var s=o>=0?1:-1;return Math.pow(o,e)*s})}function bp(n,e){var t=n.length*e;return e===1?n[n.length-1]:e===0?n[0]:t%1!=0?n[Math.ceil(t)-1]:n.length%2==0?(n[t-1]+n[t])/2:n[t]}function tv(n){var e=n.tickCount,t=n.values;if(!t||!t.length)return[];for(var r=t.slice().sort(function(s,l){return s-l}),i=[],a=0;a<e;a++){var o=a/(e-1);i.push(bp(r,o))}return i}function Vm(n){var e=n.min,t=n.max,r=n.tickCount,i=n.tickInterval,a=n.minLimit,o=n.maxLimit,s=jf(e,t,r).ticks;return!(0,v.isNil)(a)||!(0,v.isNil)(o)?Jd(n,(0,v.head)(s),(0,v.last)(s)):i?vc(e,t,i).ticks:s}function Zf(n){var e=n.min,t=n.max,r=n.minTickInterval,i=n.tickInterval,a=n.tickCount;if(i)a=Math.ceil((t-e)/i);else{i=uc(e,t,a)[1];var o=(t-e)/i,s=o/a;s>1&&(i=i*Math.ceil(s)),r&&i<r&&(i=r)}for(var l=[],u=e;u<t+i;u+=i)l.push(u);return l}function Xm(n){var e=Qd(n),t=(0,v.last)(n.values);return t!==(0,v.last)(e)&&e.push(t),e}function Kf(n){return new Date(n).getFullYear()}function Ym(n){return new Date(n,0,1).getTime()}function ev(n){return new Date(n).getMonth()}function Hm(n,e){var t=Kf(n),r=Kf(e),i=ev(n),a=ev(e);return(r-t)*12+(a-i)%12}function jm(n,e){return new Date(n,e,1).getTime()}function Zm(n,e){return Math.ceil((e-n)/uo)}function _p(n,e){return Math.ceil((e-n)/Ba)}function gc(n,e){return Math.ceil((e-n)/(60*1e3))}function Km(n){var e=n.min,t=n.max,r=n.minTickInterval,i=n.tickCount,a=n.tickInterval,o=[];a||(a=(t-e)/i,r&&a<r&&(a=r));var s=Kf(e);if(a>$l)for(var l=Kf(t),u=Math.ceil(a/$l),c=s;c<=l+u;c=c+u)o.push(Ym(c));else if(a>Fa)for(var f=Math.ceil(a/Fa),h=ev(e),d=Hm(e,t),c=0;c<=d+f;c=c+f)o.push(jm(s,c+h));else if(a>uo)for(var g=new Date(e),p=g.getFullYear(),m=g.getMonth(),_=g.getDate(),S=Math.ceil(a/uo),M=Zm(e,t),c=0;c<M+S;c=c+S)o.push(new Date(p,m,_+c).getTime());else if(a>Ba)for(var g=new Date(e),p=g.getFullYear(),m=g.getMonth(),S=g.getDate(),R=g.getHours(),F=Math.ceil(a/Ba),V=_p(e,t),c=0;c<=V+F;c=c+F)o.push(new Date(p,m,S,R+c).getTime());else if(a>ss)for(var nt=gc(e,t),at=Math.ceil(a/ss),c=0;c<=nt+at;c=c+at)o.push(e+c*ss);else{var xt=a;xt<ua&&(xt=ua);for(var gt=Math.floor(e/ua)*ua,Tt=Math.ceil((t-e)/ua),Ct=Math.ceil(xt/ua),c=0;c<Tt+Ct;c=c+Ct)o.push(gt+c*ua)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),o}yi("cat",Qd),yi("time-cat",Xm),yi("wilkinson-extended",Um),yi("r-pretty",Vm),yi("time",Zf),yi("time-pretty",Km),yi("log",qd),yi("pow",xp),yi("quantile",tv),yi("d3-linear",zm),kr("cat",ns),kr("category",ns),kr("identity",co),kr("linear",ls),kr("log",Ql),kr("pow",hc),kr("time",gl),kr("timeCat",Vd),kr("quantize",Xt),kr("quantile",be);var pc={},qa=function(n){return pc[n.toLowerCase()]},Fo=function(n,e){if(qa(n))throw new Error("Attribute type '"+n+"' existed.");pc[n.toLowerCase()]=e};Fo("Color",ll),Fo("Opacity",ul),Fo("Position",If),Fo("Shape",Rd),Fo("Size",kd);var Ei=x(32933);function zn(){var n=new Ei.WT(3);return Ei.WT!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function Go(n){var e=new Ei.WT(3);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e}function yc(n){var e=n[0],t=n[1],r=n[2];return Math.hypot(e,t,r)}function nn(n,e,t){var r=new Ei.WT(3);return r[0]=n,r[1]=e,r[2]=t,r}function ea(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n}function eu(n,e,t,r){return n[0]=e,n[1]=t,n[2]=r,n}function za(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n}function Yi(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}function Sp(n,e,t){return n[0]=e[0]*t[0],n[1]=e[1]*t[1],n[2]=e[2]*t[2],n}function $m(n,e,t){return n[0]=e[0]/t[0],n[1]=e[1]/t[1],n[2]=e[2]/t[2],n}function ru(n,e){return n[0]=Math.ceil(e[0]),n[1]=Math.ceil(e[1]),n[2]=Math.ceil(e[2]),n}function Qm(n,e){return n[0]=Math.floor(e[0]),n[1]=Math.floor(e[1]),n[2]=Math.floor(e[2]),n}function Jm(n,e,t){return n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.min(e[2],t[2]),n}function cS(n,e,t){return n[0]=Math.max(e[0],t[0]),n[1]=Math.max(e[1],t[1]),n[2]=Math.max(e[2],t[2]),n}function fS(n,e){return n[0]=Math.round(e[0]),n[1]=Math.round(e[1]),n[2]=Math.round(e[2]),n}function mc(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n}function hS(n,e,t,r){return n[0]=e[0]+t[0]*r,n[1]=e[1]+t[1]*r,n[2]=e[2]+t[2]*r,n}function rv(n,e){var t=e[0]-n[0],r=e[1]-n[1],i=e[2]-n[2];return Math.hypot(t,r,i)}function qm(n,e){var t=e[0]-n[0],r=e[1]-n[1],i=e[2]-n[2];return t*t+r*r+i*i}function dS(n){var e=n[0],t=n[1],r=n[2];return e*e+t*t+r*r}function tx(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n}function ex(n,e){return n[0]=1/e[0],n[1]=1/e[1],n[2]=1/e[2],n}function xc(n,e){var t=e[0],r=e[1],i=e[2],a=t*t+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),n[0]=e[0]*a,n[1]=e[1]*a,n[2]=e[2]*a,n}function As(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function nv(n,e,t){var r=e[0],i=e[1],a=e[2],o=t[0],s=t[1],l=t[2];return n[0]=i*l-a*s,n[1]=a*o-r*l,n[2]=r*s-i*o,n}function Ua(n,e,t,r){var i=e[0],a=e[1],o=e[2];return n[0]=i+r*(t[0]-i),n[1]=a+r*(t[1]-a),n[2]=o+r*(t[2]-o),n}function iv(n,e,t,r,i,a){var o=a*a,s=o*(2*a-3)+1,l=o*(a-2)+a,u=o*(a-1),c=o*(3-2*a);return n[0]=e[0]*s+t[0]*l+r[0]*u+i[0]*c,n[1]=e[1]*s+t[1]*l+r[1]*u+i[1]*c,n[2]=e[2]*s+t[2]*l+r[2]*u+i[2]*c,n}function rx(n,e,t,r,i,a){var o=1-a,s=o*o,l=a*a,u=s*o,c=3*a*s,f=3*l*o,h=l*a;return n[0]=e[0]*u+t[0]*c+r[0]*f+i[0]*h,n[1]=e[1]*u+t[1]*c+r[1]*f+i[1]*h,n[2]=e[2]*u+t[2]*c+r[2]*f+i[2]*h,n}function nx(n,e){e=e||1;var t=glMatrix.RANDOM()*2*Math.PI,r=glMatrix.RANDOM()*2-1,i=Math.sqrt(1-r*r)*e;return n[0]=Math.cos(t)*i,n[1]=Math.sin(t)*i,n[2]=r*e,n}function $f(n,e,t){var r=e[0],i=e[1],a=e[2],o=t[3]*r+t[7]*i+t[11]*a+t[15];return o=o||1,n[0]=(t[0]*r+t[4]*i+t[8]*a+t[12])/o,n[1]=(t[1]*r+t[5]*i+t[9]*a+t[13])/o,n[2]=(t[2]*r+t[6]*i+t[10]*a+t[14])/o,n}function Eo(n,e,t){var r=e[0],i=e[1],a=e[2];return n[0]=r*t[0]+i*t[3]+a*t[6],n[1]=r*t[1]+i*t[4]+a*t[7],n[2]=r*t[2]+i*t[5]+a*t[8],n}function Ep(n,e,t){var r=t[0],i=t[1],a=t[2],o=t[3],s=e[0],l=e[1],u=e[2],c=i*u-a*l,f=a*s-r*u,h=r*l-i*s,d=i*h-a*f,g=a*c-r*h,p=r*f-i*c,m=o*2;return c*=m,f*=m,h*=m,d*=2,g*=2,p*=2,n[0]=s+c+d,n[1]=l+f+g,n[2]=u+h+p,n}function ix(n,e,t,r){var i=[],a=[];return i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2],a[0]=i[0],a[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),a[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),n[0]=a[0]+t[0],n[1]=a[1]+t[1],n[2]=a[2]+t[2],n}function ax(n,e,t,r){var i=[],a=[];return i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2],a[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),a[1]=i[1],a[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),n[0]=a[0]+t[0],n[1]=a[1]+t[1],n[2]=a[2]+t[2],n}function ox(n,e,t,r){var i=[],a=[];return i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2],a[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),a[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),a[2]=i[2],n[0]=a[0]+t[0],n[1]=a[1]+t[1],n[2]=a[2]+t[2],n}function sx(n,e){var t=n[0],r=n[1],i=n[2],a=e[0],o=e[1],s=e[2],l=Math.sqrt(t*t+r*r+i*i),u=Math.sqrt(a*a+o*o+s*s),c=l*u,f=c&&As(n,e)/c;return Math.acos(Math.min(Math.max(f,-1),1))}function zo(n){return n[0]=0,n[1]=0,n[2]=0,n}function lx(n){return"vec3("+n[0]+", "+n[1]+", "+n[2]+")"}function vS(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]}function Ts(n,e){var t=n[0],r=n[1],i=n[2],a=e[0],o=e[1],s=e[2];return Math.abs(t-a)<=glMatrix.EPSILON*Math.max(1,Math.abs(t),Math.abs(a))&&Math.abs(r-o)<=glMatrix.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-s)<=glMatrix.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))}var bc=Yi,nu=null,av=null,ov=rv,ux=null,sv=yc,cx=null,fx=function(){var n=zn();return function(e,t,r,i,a,o){var s,l;for(t||(t=3),r||(r=0),i?l=Math.min(i*t+r,e.length):l=e.length,s=r;s<l;s+=t)n[0]=e[s],n[1]=e[s+1],n[2]=e[s+2],a(n,n,o),e[s]=n[0],e[s+1]=n[1],e[s+2]=n[2];return e}}(),ra=x(31300),Cn=x(27881),hx=function(){function n(e){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var t=e.start,r=e.end,i=e.matrix,a=i===void 0?[1,0,0,0,1,0,0,0,1]:i,o=e.isTransposed,s=o===void 0?!1:o;this.start=t,this.end=r,this.matrix=a,this.originalMatrix=(0,b.__spreadArray)([],a),this.isTransposed=s}return n.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},n.prototype.update=function(e){(0,v.assign)(this,e),this.initial()},n.prototype.convertDim=function(e,t){var r,i=this[t],a=i.start,o=i.end;return this.isReflect(t)&&(r=[o,a],a=r[0],o=r[1]),a+e*(o-a)},n.prototype.invertDim=function(e,t){var r,i=this[t],a=i.start,o=i.end;return this.isReflect(t)&&(r=[o,a],a=r[0],o=r[1]),(e-a)/(o-a)},n.prototype.applyMatrix=function(e,t,r){r===void 0&&(r=0);var i=this.matrix,a=[e,t,r];return Eo(a,a,i),a},n.prototype.invertMatrix=function(e,t,r){r===void 0&&(r=0);var i=this.matrix,a=ra.invert([0,0,0,0,0,0,0,0,0],i),o=[e,t,r];return a&&Eo(o,o,a),o},n.prototype.convert=function(e){var t=this.convertPoint(e),r=t.x,i=t.y,a=this.applyMatrix(r,i,1);return{x:a[0],y:a[1]}},n.prototype.invert=function(e){var t=this.invertMatrix(e.x,e.y,1);return this.invertPoint({x:t[0],y:t[1]})},n.prototype.rotate=function(e){var t=this.matrix,r=this.center;return Cn.m$(t,t,[-r.x,-r.y]),Cn.zu(t,t,e),Cn.m$(t,t,[r.x,r.y]),this},n.prototype.reflect=function(e){return e==="x"?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},n.prototype.scale=function(e,t){var r=this.matrix,i=this.center;return Cn.m$(r,r,[-i.x,-i.y]),Cn.lh(r,r,[e,t]),Cn.m$(r,r,[i.x,i.y]),this},n.prototype.translate=function(e,t){var r=this.matrix;return Cn.m$(r,r,[e,t]),this},n.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},n.prototype.getCenter=function(){return this.center},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRadius=function(){return this.radius},n.prototype.isReflect=function(e){return e==="x"?this.isReflectX:this.isReflectY},n.prototype.resetMatrix=function(e){this.matrix=e||(0,b.__spreadArray)([],this.originalMatrix)},n}(),Qf=hx,dx=function(n){(0,b.__extends)(e,n);function e(t){var r=n.call(this,t)||this;return r.isRect=!0,r.type="cartesian",r.initial(),r}return e.prototype.initial=function(){n.prototype.initial.call(this);var t=this.start,r=this.end;this.x={start:t.x,end:r.x},this.y={start:t.y,end:r.y}},e.prototype.convertPoint=function(t){var r,i=t.x,a=t.y;return this.isTransposed&&(r=[a,i],i=r[0],a=r[1]),{x:this.convertDim(i,"x"),y:this.convertDim(a,"y")}},e.prototype.invertPoint=function(t){var r,i=this.invertDim(t.x,"x"),a=this.invertDim(t.y,"y");return this.isTransposed&&(r=[a,i],i=r[0],a=r[1]),{x:i,y:a}},e}(Qf),wp=dx,Ar=x(10714),Cp=function(n){(0,b.__extends)(e,n);function e(t){var r=n.call(this,t)||this;r.isHelix=!0,r.type="helix";var i=t.startAngle,a=i===void 0?1.25*Math.PI:i,o=t.endAngle,s=o===void 0?7.25*Math.PI:o,l=t.innerRadius,u=l===void 0?0:l,c=t.radius;return r.startAngle=a,r.endAngle=s,r.innerRadius=u,r.radius=c,r.initial(),r}return e.prototype.initial=function(){n.prototype.initial.call(this);var t=(this.endAngle-this.startAngle)/(2*Math.PI)+1,r=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(r=r*this.radius),this.d=Math.floor(r*(1-this.innerRadius)/t),this.a=this.d/(Math.PI*2),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*r,end:this.innerRadius*r+this.d*.99}},e.prototype.convertPoint=function(t){var r,i=t.x,a=t.y;this.isTransposed&&(r=[a,i],i=r[0],a=r[1]);var o=this.convertDim(i,"x"),s=this.a*o,l=this.convertDim(a,"y");return{x:this.center.x+Math.cos(o)*(s+l),y:this.center.y+Math.sin(o)*(s+l)}},e.prototype.invertPoint=function(t){var r,i=this.d+this.y.start,a=Ar.$X([0,0],[t.x,t.y],[this.center.x,this.center.y]),o=Cn.Dg(a,[1,0],!0),s=o*this.a;Ar.kE(a)<s&&(s=Ar.kE(a));var l=Math.floor((Ar.kE(a)-s)/i);o=2*l*Math.PI+o;var u=this.a*o,c=Ar.kE(a)-u;c=(0,v.isNumberEqual)(c,0)?0:c;var f=this.invertDim(o,"x"),h=this.invertDim(c,"y");return f=(0,v.isNumberEqual)(f,0)?0:f,h=(0,v.isNumberEqual)(h,0)?0:h,this.isTransposed&&(r=[h,f],f=r[0],h=r[1]),{x:f,y:h}},e}(Qf),Mp=Cp,vx=function(n){(0,b.__extends)(e,n);function e(t){var r=n.call(this,t)||this;r.isPolar=!0,r.type="polar";var i=t.startAngle,a=i===void 0?-Math.PI/2:i,o=t.endAngle,s=o===void 0?Math.PI*3/2:o,l=t.innerRadius,u=l===void 0?0:l,c=t.radius;return r.startAngle=a,r.endAngle=s,r.innerRadius=u,r.radius=c,r.initial(),r}return e.prototype.initial=function(){for(n.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=Math.PI*2;var t=this.getOneBox(),r=t.maxX-t.minX,i=t.maxY-t.minY,a=Math.abs(t.minX)/r,o=Math.abs(t.minY)/i,s;this.height/i>this.width/r?(s=this.width/r,this.circleCenter={x:this.center.x-(.5-a)*this.width,y:this.center.y-(.5-o)*s*i}):(s=this.height/i,this.circleCenter={x:this.center.x-(.5-a)*s*r,y:this.center.y-(.5-o)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=s*this.radius:(this.radius<=0||this.radius>s)&&(this.polarRadius=s):this.polarRadius=s,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},e.prototype.getRadius=function(){return this.polarRadius},e.prototype.convertPoint=function(t){var r,i=this.getCenter(),a=t.x,o=t.y;return this.isTransposed&&(r=[o,a],a=r[0],o=r[1]),a=this.convertDim(a,"x"),o=this.convertDim(o,"y"),{x:i.x+Math.cos(a)*o,y:i.y+Math.sin(a)*o}},e.prototype.invertPoint=function(t){var r,i=this.getCenter(),a=[t.x-i.x,t.y-i.y],o=this,s=o.startAngle,l=o.endAngle;this.isReflect("x")&&(r=[l,s],s=r[0],l=r[1]);var u=[1,0,0,0,1,0,0,0,1];Cn.zu(u,u,s);var c=[1,0,0];Eo(c,c,u);var f=[c[0],c[1]],h=Cn.Dg(f,a,l<s);(0,v.isNumberEqual)(h,Math.PI*2)&&(h=0);var d=Ar.kE(a),g=h/(l-s);g=l-s>0?g:-g;var p=this.invertDim(d,"y"),m={x:0,y:0};return m.x=this.isTransposed?p:g,m.y=this.isTransposed?g:p,m},e.prototype.getCenter=function(){return this.circleCenter},e.prototype.getOneBox=function(){var t=this.startAngle,r=this.endAngle;if(Math.abs(r-t)>=Math.PI*2)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var i=[0,Math.cos(t),Math.cos(r)],a=[0,Math.sin(t),Math.sin(r)],o=Math.min(t,r);o<Math.max(t,r);o+=Math.PI/18)i.push(Math.cos(o)),a.push(Math.sin(o));return{minX:Math.min.apply(Math,i),maxX:Math.max.apply(Math,i),minY:Math.min.apply(Math,a),maxY:Math.max.apply(Math,a)}},e}(Qf),gx=vx,Jf={},qf=function(n){return Jf[n.toLowerCase()]},th=function(n,e){Jf[n.toLowerCase()]=e};th("rect",wp),th("cartesian",wp),th("polar",gx),th("helix",Mp);var _c=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,px=new RegExp("([a-z])["+_c+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+_c+"]*,?["+_c+"]*)+)","ig"),yx=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+_c+"]*,?["+_c+"]*","ig"),Sc=function(n){if(!n)return null;if((0,v.isArray)(n))return n;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(n).replace(px,function(r,i,a){var o=[],s=i.toLowerCase();if(a.replace(yx,function(l,u){u&&o.push(+u)}),s==="m"&&o.length>2&&(t.push([i].concat(o.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([i,o[0]]),s==="r")t.push([i].concat(o));else for(;o.length>=e[s]&&(t.push([i].concat(o.splice(0,e[s]))),!!e[s]););return n}),t},lv=function(n,e){for(var t=[],r=0,i=n.length;i-2*!e>r;r+=2){var a=[{x:+n[r-2],y:+n[r-1]},{x:+n[r],y:+n[r+1]},{x:+n[r+2],y:+n[r+3]},{x:+n[r+4],y:+n[r+5]}];e?r?i-4===r?a[3]={x:+n[0],y:+n[1]}:i-2===r&&(a[2]={x:+n[0],y:+n[1]},a[3]={x:+n[2],y:+n[3]}):a[0]={x:+n[i-2],y:+n[i-1]}:i-4===r?a[3]=a[2]:r||(a[0]={x:+n[r],y:+n[r+1]}),t.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return t},eh=function(n,e,t,r,i){var a=[];if(i===null&&r===null&&(r=t),n=+n,e=+e,t=+t,r=+r,i!==null){var o=Math.PI/180,s=n+t*Math.cos(-r*o),l=n+t*Math.cos(-i*o),u=e+t*Math.sin(-r*o),c=e+t*Math.sin(-i*o);a=[["M",s,u],["A",t,t,0,+(i-r>180),0,l,c]]}else a=[["M",n,e],["m",0,-r],["a",t,r,0,1,1,0,2*r],["a",t,r,0,1,1,0,-2*r],["z"]];return a},Ap=function(n){if(n=Sc(n),!n||!n.length)return[["M",0,0]];var e=[],t=0,r=0,i=0,a=0,o=0,s,l;n[0][0]==="M"&&(t=+n[0][1],r=+n[0][2],i=t,a=r,o++,e[0]=["M",t,r]);for(var u=n.length===3&&n[0][0]==="M"&&n[1][0].toUpperCase()==="R"&&n[2][0].toUpperCase()==="Z",c=void 0,f=void 0,h=o,d=n.length;h<d;h++){if(e.push(c=[]),f=n[h],s=f[0],s!==s.toUpperCase())switch(c[0]=s.toUpperCase(),c[0]){case"A":c[1]=f[1],c[2]=f[2],c[3]=f[3],c[4]=f[4],c[5]=f[5],c[6]=+f[6]+t,c[7]=+f[7]+r;break;case"V":c[1]=+f[1]+r;break;case"H":c[1]=+f[1]+t;break;case"R":l=[t,r].concat(f.slice(1));for(var g=2,p=l.length;g<p;g++)l[g]=+l[g]+t,l[++g]=+l[g]+r;e.pop(),e=e.concat(lv(l,u));break;case"O":e.pop(),l=eh(t,r,f[1],f[2]),l.push(l[0]),e=e.concat(l);break;case"U":e.pop(),e=e.concat(eh(t,r,f[1],f[2],f[3])),c=["U"].concat(e[e.length-1].slice(-2));break;case"M":i=+f[1]+t,a=+f[2]+r;break;default:for(var g=1,p=f.length;g<p;g++)c[g]=+f[g]+(g%2?t:r)}else if(s==="R")l=[t,r].concat(f.slice(1)),e.pop(),e=e.concat(lv(l,u)),c=["R"].concat(f.slice(-2));else if(s==="O")e.pop(),l=eh(t,r,f[1],f[2]),l.push(l[0]),e=e.concat(l);else if(s==="U")e.pop(),e=e.concat(eh(t,r,f[1],f[2],f[3])),c=["U"].concat(e[e.length-1].slice(-2));else for(var m=0,_=f.length;m<_;m++)c[m]=f[m];if(s=s.toUpperCase(),s!=="O")switch(c[0]){case"Z":t=+i,r=+a;break;case"H":t=c[1];break;case"V":r=c[1];break;case"M":i=c[c.length-2],a=c[c.length-1];break;default:t=c[c.length-2],r=c[c.length-1]}}return e},rh=function(n,e,t,r){return[n,e,t,r,t,r]},Tp=function(n,e,t,r,i,a){var o=1/3,s=2/3;return[o*n+s*t,o*e+s*r,o*i+s*t,o*a+s*r,i,a]},Ip=function(n,e,t,r,i,a,o,s,l,u){t===r&&(t+=1);var c=Math.PI*120/180,f=Math.PI/180*(+i||0),h=[],d,g,p,m,_,S=function(Ze,ar,cr){var Dr=Ze*Math.cos(cr)-ar*Math.sin(cr),sn=Ze*Math.sin(cr)+ar*Math.cos(cr);return{x:Dr,y:sn}};if(u)g=u[0],p=u[1],m=u[2],_=u[3];else{d=S(n,e,-f),n=d.x,e=d.y,d=S(s,l,-f),s=d.x,l=d.y,n===s&&e===l&&(s+=1,l+=1);var M=(n-s)/2,R=(e-l)/2,F=M*M/(t*t)+R*R/(r*r);F>1&&(F=Math.sqrt(F),t=F*t,r=F*r);var V=t*t,nt=r*r,at=(a===o?-1:1)*Math.sqrt(Math.abs((V*nt-V*R*R-nt*M*M)/(V*R*R+nt*M*M)));m=at*t*R/r+(n+s)/2,_=at*-r*M/t+(e+l)/2,g=Math.asin(((e-_)/r).toFixed(9)),p=Math.asin(((l-_)/r).toFixed(9)),g=n<m?Math.PI-g:g,p=s<m?Math.PI-p:p,g<0&&(g=Math.PI*2+g),p<0&&(p=Math.PI*2+p),o&&g>p&&(g=g-Math.PI*2),!o&&p>g&&(p=p-Math.PI*2)}var xt=p-g;if(Math.abs(xt)>c){var gt=p,Tt=s,Ct=l;p=g+c*(o&&p>g?1:-1),s=m+t*Math.cos(p),l=_+r*Math.sin(p),h=Ip(s,l,t,r,i,0,o,Tt,Ct,[p,gt,m,_])}xt=p-g;var te=Math.cos(g),Kt=Math.sin(g),ne=Math.cos(p),ee=Math.sin(p),ve=Math.tan(xt/4),ie=4/3*t*ve,ye=4/3*r*ve,Ee=[n,e],we=[n+ie*Kt,e-ye*te],Pe=[s+ie*ee,l-ye*ne],Ve=[s,l];if(we[0]=2*Ee[0]-we[0],we[1]=2*Ee[1]-we[1],u)return[we,Pe,Ve].concat(h);h=[we,Pe,Ve].concat(h).join().split(",");for(var he=[],Te=0,Je=h.length;Te<Je;Te++)he[Te]=Te%2?S(h[Te-1],h[Te],f).y:S(h[Te],h[Te+1],f).x;return he},yl=function(n,e){var t=Ap(n),r=e&&Ap(e),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],l="",u="",c,f=function(M,R,F){var V,nt;if(!M)return["C",R.x,R.y,R.x,R.y,R.x,R.y];switch(!(M[0]in{T:1,Q:1})&&(R.qx=R.qy=null),M[0]){case"M":R.X=M[1],R.Y=M[2];break;case"A":M=["C"].concat(Ip.apply(0,[R.x,R.y].concat(M.slice(1))));break;case"S":F==="C"||F==="S"?(V=R.x*2-R.bx,nt=R.y*2-R.by):(V=R.x,nt=R.y),M=["C",V,nt].concat(M.slice(1));break;case"T":F==="Q"||F==="T"?(R.qx=R.x*2-R.qx,R.qy=R.y*2-R.qy):(R.qx=R.x,R.qy=R.y),M=["C"].concat(Tp(R.x,R.y,R.qx,R.qy,M[1],M[2]));break;case"Q":R.qx=M[1],R.qy=M[2],M=["C"].concat(Tp(R.x,R.y,M[1],M[2],M[3],M[4]));break;case"L":M=["C"].concat(rh(R.x,R.y,M[1],M[2]));break;case"H":M=["C"].concat(rh(R.x,R.y,M[1],R.y));break;case"V":M=["C"].concat(rh(R.x,R.y,R.x,M[1]));break;case"Z":M=["C"].concat(rh(R.x,R.y,R.X,R.Y));break;default:break}return M},h=function(M,R){if(M[R].length>7){M[R].shift();for(var F=M[R];F.length;)o[R]="A",r&&(s[R]="A"),M.splice(R++,0,["C"].concat(F.splice(0,6)));M.splice(R,1),c=Math.max(t.length,r&&r.length||0)}},d=function(M,R,F,V,nt){M&&R&&M[nt][0]==="M"&&R[nt][0]!=="M"&&(R.splice(nt,0,["M",V.x,V.y]),F.bx=0,F.by=0,F.x=M[nt][1],F.y=M[nt][2],c=Math.max(t.length,r&&r.length||0))};c=Math.max(t.length,r&&r.length||0);for(var g=0;g<c;g++){t[g]&&(l=t[g][0]),l!=="C"&&(o[g]=l,g&&(u=o[g-1])),t[g]=f(t[g],i,u),o[g]!=="A"&&l==="C"&&(o[g]="C"),h(t,g),r&&(r[g]&&(l=r[g][0]),l!=="C"&&(s[g]=l,g&&(u=s[g-1])),r[g]=f(r[g],a,u),s[g]!=="A"&&l==="C"&&(s[g]="C"),h(r,g)),d(t,r,i,a,g),d(r,t,a,i,g);var p=t[g],m=r&&r[g],_=p.length,S=r&&m.length;i.x=p[_-2],i.y=p[_-1],i.bx=parseFloat(p[_-4])||i.x,i.by=parseFloat(p[_-3])||i.y,a.bx=r&&(parseFloat(m[S-4])||a.x),a.by=r&&(parseFloat(m[S-3])||a.y),a.x=r&&m[S-2],a.y=r&&m[S-1]}return r?[t,r]:t},mx=/,?([a-z]),?/gi,xx=function(n){return n.join(",").replace(mx,"$1")},uv=function(n,e,t,r,i){var a=-3*e+9*t-9*r+3*i,o=n*a+6*e-12*t+6*r;return n*o-3*e+3*t},nh=function(n,e,t,r,i,a,o,s,l){l===null&&(l=1),l=l>1?1:l<0?0:l;for(var u=l/2,c=12,f=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,g=0;g<c;g++){var p=u*f[g]+u,m=uv(p,n,t,i,o),_=uv(p,e,r,a,s),S=m*m+_*_;d+=h[g]*Math.sqrt(S)}return u*d},bx=function(n,e,t,r,i,a,o,s){for(var l=[],u=[[],[]],c,f,h,d,g=0;g<2;++g){if(g===0?(f=6*n-12*t+6*i,c=-3*n+9*t-9*i+3*o,h=3*t-3*n):(f=6*e-12*r+6*a,c=-3*e+9*r-9*a+3*s,h=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(f)<1e-12)continue;d=-h/f,d>0&&d<1&&l.push(d);continue}var p=f*f-4*h*c,m=Math.sqrt(p);if(!(p<0)){var _=(-f+m)/(2*c);_>0&&_<1&&l.push(_);var S=(-f-m)/(2*c);S>0&&S<1&&l.push(S)}}for(var M=l.length,R=M,F;M--;)d=l[M],F=1-d,u[0][M]=F*F*F*n+3*F*F*d*t+3*F*d*d*i+d*d*d*o,u[1][M]=F*F*F*e+3*F*F*d*r+3*F*d*d*a+d*d*d*s;return u[0][R]=n,u[1][R]=e,u[0][R+1]=o,u[1][R+1]=s,u[0].length=u[1].length=R+2,{min:{x:Math.min.apply(0,u[0]),y:Math.min.apply(0,u[1])},max:{x:Math.max.apply(0,u[0]),y:Math.max.apply(0,u[1])}}},Op=function(n,e,t,r,i,a,o,s){if(!(Math.max(n,t)<Math.min(i,o)||Math.min(n,t)>Math.max(i,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var l=(n*r-e*t)*(i-o)-(n-t)*(i*s-a*o),u=(n*r-e*t)*(a-s)-(e-r)*(i*s-a*o),c=(n-t)*(a-s)-(e-r)*(i-o);if(!!c){var f=l/c,h=u/c,d=+f.toFixed(2),g=+h.toFixed(2);if(!(d<+Math.min(n,t).toFixed(2)||d>+Math.max(n,t).toFixed(2)||d<+Math.min(i,o).toFixed(2)||d>+Math.max(i,o).toFixed(2)||g<+Math.min(e,r).toFixed(2)||g>+Math.max(e,r).toFixed(2)||g<+Math.min(a,s).toFixed(2)||g>+Math.max(a,s).toFixed(2)))return{x:f,y:h}}}},Is=function(n,e,t){return e>=n.x&&e<=n.x+n.width&&t>=n.y&&t<=n.y+n.height},_x=function(n,e,t,r,i){if(i)return[["M",+n+ +i,e],["l",t-i*2,0],["a",i,i,0,0,1,i,i],["l",0,r-i*2],["a",i,i,0,0,1,-i,i],["l",i*2-t,0],["a",i,i,0,0,1,-i,-i],["l",0,i*2-r],["a",i,i,0,0,1,i,-i],["z"]];var a=[["M",n,e],["l",t,0],["l",0,r],["l",-t,0],["z"]];return a.parsePathArray=xx,a},cv=function(n,e,t,r){return n===null&&(n=e=t=r=0),e===null&&(e=n.y,t=n.width,r=n.height,n=n.x),{x:n,y:e,width:t,w:t,height:r,h:r,x2:n+t,y2:e+r,cx:n+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:_x(n,e,t,r),vb:[n,e,t,r].join(" ")}},Sx=function(n,e){return n=cv(n),e=cv(e),Is(e,n.x,n.y)||Is(e,n.x2,n.y)||Is(e,n.x,n.y2)||Is(e,n.x2,n.y2)||Is(n,e.x,e.y)||Is(n,e.x2,e.y)||Is(n,e.x,e.y2)||Is(n,e.x2,e.y2)||(n.x<e.x2&&n.x>e.x||e.x<n.x2&&e.x>n.x)&&(n.y<e.y2&&n.y>e.y||e.y<n.y2&&e.y>n.y)},Pp=function(n,e,t,r,i,a,o,s){isArray(n)||(n=[n,e,t,r,i,a,o,s]);var l=bx.apply(null,n);return cv(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)},iu=function(n,e,t,r,i,a,o,s,l){var u=1-l,c=Math.pow(u,3),f=Math.pow(u,2),h=l*l,d=h*l,g=c*n+f*3*l*t+u*3*l*l*i+d*o,p=c*e+f*3*l*r+u*3*l*l*a+d*s,m=n+2*l*(t-n)+h*(i-2*t+n),_=e+2*l*(r-e)+h*(a-2*r+e),S=t+2*l*(i-t)+h*(o-2*i+t),M=r+2*l*(a-r)+h*(s-2*a+r),R=u*n+l*t,F=u*e+l*r,V=u*i+l*o,nt=u*a+l*s,at=90-Math.atan2(m-S,_-M)*180/Math.PI;return{x:g,y:p,m:{x:m,y:_},n:{x:S,y:M},start:{x:R,y:F},end:{x:V,y:nt},alpha:at}},Ex=function(n,e,t){var r=Pp(n),i=Pp(e);if(!Sx(r,i))return t?0:[];for(var a=nh.apply(0,n),o=nh.apply(0,e),s=~~(a/8),l=~~(o/8),u=[],c=[],f={},h=t?0:[],d=0;d<s+1;d++){var g=iu.apply(0,n.concat(d/s));u.push({x:g.x,y:g.y,t:d/s})}for(var d=0;d<l+1;d++){var g=iu.apply(0,e.concat(d/l));c.push({x:g.x,y:g.y,t:d/l})}for(var d=0;d<s;d++)for(var p=0;p<l;p++){var m=u[d],_=u[d+1],S=c[p],M=c[p+1],R=Math.abs(_.x-m.x)<.001?"y":"x",F=Math.abs(M.x-S.x)<.001?"y":"x",V=Op(m.x,m.y,_.x,_.y,S.x,S.y,M.x,M.y);if(V){if(f[V.x.toFixed(4)]===V.y.toFixed(4))continue;f[V.x.toFixed(4)]=V.y.toFixed(4);var nt=m.t+Math.abs((V[R]-m[R])/(_[R]-m[R]))*(_.t-m.t),at=S.t+Math.abs((V[F]-S[F])/(M[F]-S[F]))*(M.t-S.t);nt>=0&&nt<=1&&at>=0&&at<=1&&(t?h+=1:h.push({x:V.x,y:V.y,t1:nt,t2:at}))}}return h},ih=function(n,e,t){n=yl(n),e=yl(e);for(var r,i,a,o,s,l,u,c,f,h,d=t?0:[],g=0,p=n.length;g<p;g++){var m=n[g];if(m[0]==="M")r=s=m[1],i=l=m[2];else{m[0]==="C"?(f=[r,i].concat(m.slice(1)),r=f[6],i=f[7]):(f=[r,i,r,i,s,l,s,l],r=s,i=l);for(var _=0,S=e.length;_<S;_++){var M=e[_];if(M[0]==="M")a=u=M[1],o=c=M[2];else{M[0]==="C"?(h=[a,o].concat(M.slice(1)),a=h[6],o=h[7]):(h=[a,o,a,o,u,c,u,c],a=u,o=c);var R=Ex(f,h,t);if(t)d+=R;else{for(var F=0,V=R.length;F<V;F++)R[F].segment1=g,R[F].segment2=_,R[F].bez1=f,R[F].bez2=h;d=d.concat(R)}}}}}return d},gS=function(n,e){return ih(n,e)};function au(n,e){var t=[],r=[];function i(a,o){if(a.length===1)t.push(a[0]),r.push(a[0]);else{for(var s=[],l=0;l<a.length-1;l++)l===0&&t.push(a[0]),l===a.length-2&&r.push(a[l+1]),s[l]=[(1-o)*a[l][0]+o*a[l+1][0],(1-o)*a[l][1]+o*a[l+1][1]];i(s,o)}}return n.length&&i(n,e),{left:t,right:r.reverse()}}function ou(n,e,t){var r=[[n[1],n[2]]];t=t||2;var i=[];e[0]==="A"?(r.push(e[6]),r.push(e[7])):e[0]==="C"?(r.push([e[1],e[2]]),r.push([e[3],e[4]]),r.push([e[5],e[6]])):e[0]==="S"||e[0]==="Q"?(r.push([e[1],e[2]]),r.push([e[3],e[4]])):r.push([e[1],e[2]]);for(var a=r,o=1/t,s=0;s<t-1;s++){var l=o/(1-o*s),u=au(a,l);i.push(u.left),a=u.right}i.push(a);var c=i.map(function(f){var h=[];return f.length===4&&(h.push("C"),h=h.concat(f[2])),f.length>=3&&(f.length===3&&h.push("Q"),h=h.concat(f[1])),f.length===2&&h.push("L"),h=h.concat(f[f.length-1]),h});return c}var wx=function(n,e,t){if(t===1)return[[].concat(n)];var r=[];if(e[0]==="L"||e[0]==="C"||e[0]==="Q")r=r.concat(ou(n,e,t));else{var i=[].concat(n);i[0]==="M"&&(i[0]="L");for(var a=0;a<=t-1;a++)r.push(i)}return r},Ec=function(n,e){if(n.length===1)return n;var t=n.length-1,r=e.length-1,i=t/r,a=[];if(n.length===1&&n[0][0]==="M"){for(var o=0;o<r-t;o++)n.push(n[0]);return n}for(var o=0;o<r;o++){var s=Math.floor(i*o);a[s]=(a[s]||0)+1}var l=a.reduce(function(u,c,f){return f===t?u.concat(n[t]):u.concat(wx(n[f],n[f+1],c))},[]);return l.unshift(n[0]),(e[r]==="Z"||e[r]==="z")&&l.push("Z"),l},Dp=function(n,e){if(n.length!==e.length)return!1;var t=!0;return(0,v.each)(n,function(r,i){if(r!==e[i])return t=!1,!1}),t};function su(n,e,t){var r=null,i=t;return e<i&&(i=e,r="add"),n<i&&(i=n,r="del"),{type:r,min:i}}var fv=function(n,e){var t=n.length,r=e.length,i,a,o=0;if(t===0||r===0)return null;for(var s=[],l=0;l<=t;l++)s[l]=[],s[l][0]={min:l};for(var u=0;u<=r;u++)s[0][u]={min:u};for(var l=1;l<=t;l++){i=n[l-1];for(var u=1;u<=r;u++){a=e[u-1],Dp(i,a)?o=0:o=1;var c=s[l-1][u].min+1,f=s[l][u-1].min+1,h=s[l-1][u-1].min+o;s[l][u]=su(c,f,h)}}return s},hv=function(n,e){var t=fv(n,e),r=n.length,i=e.length,a=[],o=1,s=1;if(t[r][i].min!==r){for(var l=1;l<=r;l++){var u=t[l][l].min;s=l;for(var c=o;c<=i;c++)t[l][c].min<u&&(u=t[l][c].min,s=c);o=s,t[l][o].type&&a.push({index:l-1,type:t[l][o].type})}for(var l=a.length-1;l>=0;l--)o=a[l].index,a[l].type==="add"?n.splice(o,0,[].concat(n[o])):n.splice(o,1)}r=n.length;var f=i-r;if(r<i)for(var l=0;l<f;l++)n[r-1][0]==="z"||n[r-1][0]==="Z"?n.splice(r-2,0,n[r-2]):n.push(n[r-1]),r+=1;return n};function wc(n,e,t){for(var r=[].concat(n),i,a=1/(t+1),o=ah(e)[0],s=1;s<=t;s++)a*=s,i=Math.floor(n.length*a),i===0?r.unshift([o[0]*a+n[i][0]*(1-a),o[1]*a+n[i][1]*(1-a)]):r.splice(i,0,[o[0]*a+n[i][0]*(1-a),o[1]*a+n[i][1]*(1-a)]);return r}function ah(n){var e=[];switch(n[0]){case"M":e.push([n[1],n[2]]);break;case"L":e.push([n[1],n[2]]);break;case"A":e.push([n[6],n[7]]);break;case"Q":e.push([n[3],n[4]]),e.push([n[1],n[2]]);break;case"T":e.push([n[1],n[2]]);break;case"C":e.push([n[5],n[6]]),e.push([n[1],n[2]]),e.push([n[3],n[4]]);break;case"S":e.push([n[3],n[4]]),e.push([n[1],n[2]]);break;case"H":e.push([n[1],n[1]]);break;case"V":e.push([n[1],n[1]]);break;default:}return e}var oh=function(n,e){if(n.length<=1)return n;for(var t,r=0;r<e.length;r++)if(n[r][0]!==e[r][0])switch(t=ah(n[r]),e[r][0]){case"M":n[r]=["M"].concat(t[0]);break;case"L":n[r]=["L"].concat(t[0]);break;case"A":n[r]=[].concat(e[r]),n[r][6]=t[0][0],n[r][7]=t[0][1];break;case"Q":if(t.length<2)if(r>0)t=wc(t,n[r-1],1);else{n[r]=e[r];break}n[r]=["Q"].concat(t.reduce(function(i,a){return i.concat(a)},[]));break;case"T":n[r]=["T"].concat(t[0]);break;case"C":if(t.length<3)if(r>0)t=wc(t,n[r-1],2);else{n[r]=e[r];break}n[r]=["C"].concat(t.reduce(function(i,a){return i.concat(a)},[]));break;case"S":if(t.length<2)if(r>0)t=wc(t,n[r-1],1);else{n[r]=e[r];break}n[r]=["S"].concat(t.reduce(function(i,a){return i.concat(a)},[]));break;default:n[r]=e[r]}return n},sh=function(){function n(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return n.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},n.prototype.stopPropagation=function(){this.propagationStopped=!0},n.prototype.toString=function(){var e=this.type;return"[Event (type="+e+")]"},n.prototype.save=function(){},n.prototype.restore=function(){},n}(),dv=sh;function vv(n,e){var t=n.indexOf(e);t!==-1&&n.splice(t,1)}var gv=typeof window!="undefined"&&typeof window.document!="undefined";function pv(n,e){if(n.isCanvas())return!0;for(var t=e.getParent(),r=!1;t;){if(t===n){r=!0;break}t=t.getParent()}return r}function yv(n){return n.cfg.visible&&n.cfg.capture}var mv=function(n){(0,b.__extends)(e,n);function e(t){var r=n.call(this)||this;r.destroyed=!1;var i=r.getDefaultCfg();return r.cfg=(0,v.mix)(i,t),r}return e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,r){this.cfg[t]=r},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(Ot.Z),lh=mv,xv=x(23752);function bv(n,e){var t=[],r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=n[5],u=n[6],c=n[7],f=n[8],h=e[0],d=e[1],g=e[2],p=e[3],m=e[4],_=e[5],S=e[6],M=e[7],R=e[8];return t[0]=h*r+d*o+g*u,t[1]=h*i+d*s+g*c,t[2]=h*a+d*l+g*f,t[3]=p*r+m*o+_*u,t[4]=p*i+m*s+_*c,t[5]=p*a+m*l+_*f,t[6]=S*r+M*o+R*u,t[7]=S*i+M*s+R*c,t[8]=S*a+M*l+R*f,t}function ml(n,e){var t=[],r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function Lp(n){var e=[],t=n[0],r=n[1],i=n[2],a=n[3],o=n[4],s=n[5],l=n[6],u=n[7],c=n[8],f=c*o-s*u,h=-c*a+s*l,d=u*a-o*l,g=t*f+r*h+i*d;return g?(g=1/g,e[0]=f*g,e[1]=(-c*r+i*u)*g,e[2]=(s*r-i*o)*g,e[3]=h*g,e[4]=(c*t-i*l)*g,e[5]=(-s*t+i*a)*g,e[6]=d*g,e[7]=(-u*t+r*l)*g,e[8]=(o*t-r*a)*g,e):null}var xl=Cn.vs,uh="matrix",Rp=["zIndex","capture","visible","type"],_v=["repeat"],Sv=":",Np="*";function Ev(n){for(var e=[],t=0;t<n.length;t++)(0,v.isArray)(n[t])?e.push([].concat(n[t])):e.push(n[t]);return e}function kp(n,e){var t={},r=e.attrs;for(var i in n)t[i]=r[i];return t}function Bp(n,e){var t={},r=e.attr();return(0,v.each)(n,function(i,a){_v.indexOf(a)===-1&&!(0,v.isEqual)(r[a],i)&&(t[a]=i)}),t}function wv(n,e){if(e.onFrame)return n;var t=e.startTime,r=e.delay,i=e.duration,a=Object.prototype.hasOwnProperty;return(0,v.each)(n,function(o){t+r<o.startTime+o.delay+o.duration&&i>o.delay&&(0,v.each)(e.toAttrs,function(s,l){a.call(o.toAttrs,l)&&(delete o.toAttrs[l],delete o.fromAttrs[l])})}),n}var Fp=function(n){(0,b.__extends)(e,n);function e(t){var r=n.call(this,t)||this;r.attrs={};var i=r.getDefaultAttrs();return(0,v.mix)(i,t.attrs),r.attrs=i,r.initAttrs(i),r.initAnimate(),r}return e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=r[0],o=r[1];if(!a)return this.attrs;if((0,v.isObject)(a)){for(var s in a)this.setAttr(s,a[s]);return this.afterAttrsChange(a),this}return r.length===2?(this.setAttr(a,o),this.afterAttrsChange((t={},t[a]=o,t)),this):this.attrs[a]},e.prototype.isClipped=function(t,r){var i=this.getClip();return i&&!i.isHit(t,r)},e.prototype.setAttr=function(t,r){var i=this.attrs[t];i!==r&&(this.attrs[t]=r,this.onAttrChange(t,r,i))},e.prototype.onAttrChange=function(t,r,i){t==="matrix"&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var r=this.cfg.applyTo;r&&r.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var r=this.getParent();return r&&r.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(!!t){var r=t.getChildren(),i=this.get("el"),a=r.indexOf(this);r.splice(a,1),r.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(!!t){var r=t.getChildren(),i=this.get("el"),a=r.indexOf(this);r.splice(a,1),r.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){t===void 0&&(t=!0);var r=this.getParent();r?(vv(r.getChildren(),this),r.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(uh,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(uh)},e.prototype.setMatrix=function(t){this.attr(uh,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var r=this.attr("matrix"),i=this.cfg.parentMatrix;i&&r?t=bv(i,r):t=r||i,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var r=this.attr("matrix"),i=null;t&&r?i=bv(t,r):i=r||t,this.set("totalMatrix",i),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var r=this.attr("matrix");return r?ml(r,t):t},e.prototype.invertFromMatrix=function(t){var r=this.attr("matrix");if(r){var i=Lp(r);if(i)return ml(i,t)}return t},e.prototype.setClip=function(t){var r=this.getCanvas(),i=null;if(t){var a=this.getShapeBase(),o=(0,v.upperFirst)(t.type),s=a[o];s&&(i=new s({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:r}))}return this.set("clipShape",i),this.onCanvasChange("clip"),i},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,r=this.attrs,i={};(0,v.each)(r,function(s,l){(0,v.isArray)(r[l])?i[l]=Ev(r[l]):i[l]=r[l]});var a=this.constructor,o=new a({attrs:i});return(0,v.each)(Rp,function(s){o.set(s,t.get(s))}),o},e.prototype.destroy=function(){var t=this.destroyed;t||(this.attrs={},n.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var i=this.get("timeline");i||(i=this.get("canvas").get("timeline"),this.set("timeline",i));var a=this.get("animations")||[];i.timer||i.initTimer();var o=t[0],s=t[1],l=t[2],u=l===void 0?"easeLinear":l,c=t[3],f=c===void 0?v.noop:c,h=t[4],d=h===void 0?0:h,g,p,m,_,S;(0,v.isFunction)(o)?(g=o,o={}):(0,v.isObject)(o)&&o.onFrame&&(g=o.onFrame,p=o.repeat),(0,v.isObject)(s)?(S=s,s=S.duration,u=S.easing||"easeLinear",d=S.delay||0,p=S.repeat||p||!1,f=S.callback||v.noop,m=S.pauseCallback||v.noop,_=S.resumeCallback||v.noop):((0,v.isNumber)(f)&&(d=f,f=null),(0,v.isFunction)(u)?(f=u,u="easeLinear"):u=u||"easeLinear");var M=Bp(o,this),R={fromAttrs:kp(M,this),toAttrs:M,duration:s,easing:u,repeat:p,callback:f,pauseCallback:m,resumeCallback:_,delay:d,startTime:i.getTime(),id:(0,v.uniqueId)(),onFrame:g,pathFormatted:!1};a.length>0?a=wv(a,R):i.addAnimator(this),a.push(R),this.set("animations",a),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var r=this;t===void 0&&(t=!0);var i=this.get("animations");(0,v.each)(i,function(a){t&&(a.onFrame?r.attr(a.onFrame(1)):r.attr(a.toAttrs)),a.callback&&a.callback()}),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),r=this.get("animations"),i=t.getTime();return(0,v.each)(r,function(a){a._paused=!0,a._pauseTime=i,a.pauseCallback&&a.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:i}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline"),r=t.getTime(),i=this.get("animations"),a=this.get("_pause").pauseTime;return(0,v.each)(i,function(o){o.startTime=o.startTime+(r-a),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",i),this},e.prototype.emitDelegation=function(t,r){var i=this,a=r.propagationPath,o=this.getEvents(),s;t==="mouseenter"?s=r.fromShape:t==="mouseleave"&&(s=r.toShape);for(var l=function(h){var d=a[h],g=d.get("name");if(g){if((d.isGroup()||d.isCanvas&&d.isCanvas())&&s&&pv(d,s))return"break";(0,v.isArray)(g)?(0,v.each)(g,function(p){i.emitDelegateEvent(d,p,r)}):u.emitDelegateEvent(d,g,r)}},u=this,c=0;c<a.length;c++){var f=l(c);if(f==="break")break}},e.prototype.emitDelegateEvent=function(t,r,i){var a=this.getEvents(),o=r+Sv+i.type;(a[o]||a[Np])&&(i.name=o,i.currentTarget=t,i.delegateTarget=this,i.delegateObject=t.get("delegateObject"),this.emit(o,i))},e.prototype.translate=function(t,r){t===void 0&&(t=0),r===void 0&&(r=0);var i=this.getMatrix(),a=xl(i,[["t",t,r]]);return this.setMatrix(a),this},e.prototype.move=function(t,r){var i=this.attr("x")||0,a=this.attr("y")||0;return this.translate(t-i,r-a),this},e.prototype.moveTo=function(t,r){return this.move(t,r)},e.prototype.scale=function(t,r){var i=this.getMatrix(),a=xl(i,[["s",t,r||t]]);return this.setMatrix(a),this},e.prototype.rotate=function(t){var r=this.getMatrix(),i=xl(r,[["r",t]]);return this.setMatrix(i),this},e.prototype.rotateAtStart=function(t){var r=this.attr(),i=r.x,a=r.y,o=this.getMatrix(),s=xl(o,[["t",-i,-a],["r",t],["t",i,a]]);return this.setMatrix(s),this},e.prototype.rotateAtPoint=function(t,r,i){var a=this.getMatrix(),o=xl(a,[["t",-t,-r],["r",i],["t",t,r]]);return this.setMatrix(o),this},e}(lh),Cv=Fp,ch={},Cc="_INDEX";function lu(n,e){if(n.set("canvas",e),n.isGroup()){var t=n.get("children");t.length&&t.forEach(function(r){lu(r,e)})}}function Mv(n,e){if(n.set("timeline",e),n.isGroup()){var t=n.get("children");t.length&&t.forEach(function(r){Mv(r,e)})}}function Av(n,e){var t=n.getChildren();return t.indexOf(e)>=0}function cs(n,e,t){t===void 0&&(t=!0),t?e.destroy():(e.set("parent",null),e.set("canvas",null)),vv(n.getChildren(),e)}function Mc(n){return function(e,t){var r=n(e,t);return r===0?e[Cc]-t[Cc]:r}}var bl=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=Infinity,r=-Infinity,i=Infinity,a=-Infinity,o=[],s=[],l=this.getChildren().filter(function(c){return c.get("visible")&&(!c.isGroup()||c.isGroup()&&c.getChildren().length>0)});l.length>0?((0,v.each)(l,function(c){var f=c.getBBox();o.push(f.minX,f.maxX),s.push(f.minY,f.maxY)}),t=(0,v.min)(o),r=(0,v.max)(o),i=(0,v.min)(s),a=(0,v.max)(s)):(t=0,r=0,i=0,a=0);var u={x:t,y:i,minX:t,minY:i,maxX:r,maxY:a,width:r-t,height:a-i};return u},e.prototype.getCanvasBBox=function(){var t=Infinity,r=-Infinity,i=Infinity,a=-Infinity,o=[],s=[],l=this.getChildren().filter(function(c){return c.get("visible")&&(!c.isGroup()||c.isGroup()&&c.getChildren().length>0)});l.length>0?((0,v.each)(l,function(c){var f=c.getCanvasBBox();o.push(f.minX,f.maxX),s.push(f.minY,f.maxY)}),t=(0,v.min)(o),r=(0,v.max)(o),i=(0,v.min)(s),a=(0,v.max)(s)):(t=0,r=0,i=0,a=0);var u={x:t,y:i,minX:t,minY:i,maxX:r,maxY:a,width:r-t,height:a-i};return u},e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return t.children=[],t},e.prototype.onAttrChange=function(t,r,i){if(n.prototype.onAttrChange.call(this,t,r,i),t==="matrix"){var a=this.getTotalMatrix();this._applyChildrenMarix(a)}},e.prototype.applyMatrix=function(t){var r=this.getTotalMatrix();n.prototype.applyMatrix.call(this,t);var i=this.getTotalMatrix();i!==r&&this._applyChildrenMarix(i)},e.prototype._applyChildrenMarix=function(t){var r=this.getChildren();(0,v.each)(r,function(i){i.applyMatrix(t)})},e.prototype.addShape=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=t[0],a=t[1];(0,v.isObject)(i)?a=i:a.type=i;var o=ch[a.type];o||(o=(0,v.upperFirst)(a.type),ch[a.type]=o);var s=this.getShapeBase(),l=new s[o](a);return this.add(l),l},e.prototype.addGroup=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=t[0],a=t[1],o;if((0,v.isFunction)(i))a?o=new i(a):o=new i({parent:this});else{var s=i||{},l=this.getGroupBase();o=new l(s)}return this.add(o),o},e.prototype.getCanvas=function(){var t;return this.isCanvas()?t=this:t=this.get("canvas"),t},e.prototype.getShape=function(t,r,i){if(!yv(this))return null;var a=this.getChildren(),o;if(this.isCanvas())o=this._findShape(a,t,r,i);else{var s=[t,r,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(a,s[0],s[1],i))}return o},e.prototype._findShape=function(t,r,i,a){for(var o=null,s=t.length-1;s>=0;s--){var l=t[s];if(yv(l)&&(l.isGroup()?o=l.getShape(r,i,a):l.isHit(r,i)&&(o=l)),o)break}return o},e.prototype.add=function(t){var r=this.getCanvas(),i=this.getChildren(),a=this.get("timeline"),o=t.getParent();o&&cs(o,t,!1),t.set("parent",this),r&&lu(t,r),a&&Mv(t,a),i.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var r=this.getTotalMatrix();r&&t.applyMatrix(r)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t=this.getChildren();(0,v.each)(t,function(r,i){return r[Cc]=i,r}),t.sort(Mc(function(r,i){return r.get("zIndex")-i.get("zIndex")})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),r=t.length-1;r>=0;r--)t[r].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),n.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){var r=this.getChildren();return r[t]},e.prototype.getCount=function(){var t=this.getChildren();return t.length},e.prototype.contain=function(t){var r=this.getChildren();return r.indexOf(t)>-1},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0),this.contain(t)&&t.remove(r)},e.prototype.findAll=function(t){var r=[],i=this.getChildren();return(0,v.each)(i,function(a){t(a)&&r.push(a),a.isGroup()&&(r=r.concat(a.findAll(t)))}),r},e.prototype.find=function(t){var r=null,i=this.getChildren();return(0,v.each)(i,function(a){if(t(a)?r=a:a.isGroup()&&(r=a.find(t)),r)return!1}),r},e.prototype.findById=function(t){return this.find(function(r){return r.get("id")===t})},e.prototype.findByClassName=function(t){return this.find(function(r){return r.get("className")===t})},e.prototype.findAllByName=function(t){return this.findAll(function(r){return r.get("name")===t})},e}(Cv),uu=bl,Ac=x(7802),Os=x(65650),Ps=x(50710),_l=x(39751),fh=function(n){return["fill","stroke","fillStyle","strokeStyle"].includes(n)},hh=function(n){return/^[r,R,L,l]{1}[\s]*\(/.test(n)},cu=[1,0,0,0,1,0,0,0,1];function Tv(n,e,t){var r={},i=e.fromAttrs,a=e.toAttrs;if(!n.destroyed){var o;for(var s in a)if(!(0,v.isEqual)(i[s],a[s]))if(s==="path"){var l=a[s],u=i[s];l.length>u.length?(l=Sc(a[s]),u=Sc(i[s]),u=hv(u,l),u=oh(u,l),e.fromAttrs.path=u,e.toAttrs.path=l):e.pathFormatted||(l=Sc(a[s]),u=Sc(i[s]),u=oh(u,l),e.fromAttrs.path=u,e.toAttrs.path=l,e.pathFormatted=!0),r[s]=[];for(var c=0;c<l.length;c++){for(var f=l[c],h=u[c],d=[],g=0;g<f.length;g++)(0,v.isNumber)(f[g])&&h&&(0,v.isNumber)(h[g])?(o=(0,Ps.Z)(h[g],f[g]),d.push(o(t))):d.push(f[g]);r[s].push(d)}}else if(s==="matrix"){var p=(0,_l.Z)(i[s]||cu,a[s]||cu),m=p(t);r[s]=m}else fh(s)&&hh(a[s])?r[s]=a[s]:(0,v.isFunction)(a[s])||(o=(0,Ps.Z)(i[s],a[s]),r[s]=o(t));n.attr(r)}}function Iv(n,e,t){var r=e.startTime,i=e.delay;if(t<r+i||e._paused)return!1;var a,o=e.duration,s=e.easing;if(t=t-r-e.delay,e.repeat)a=t%o/o,a=Os[s](a);else if(a=t/o,a<1)a=Os[s](a);else return e.onFrame?n.attr(e.onFrame(1)):n.attr(e.toAttrs),!0;if(e.onFrame){var l=e.onFrame(a);n.attr(l)}else Tv(n,e,a);return!1}var fu=function(){function n(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return n.prototype.initTimer=function(){var e=this,t=!1,r,i,a;this.timer=Ac.HT(function(o){if(e.current=o,e.animators.length>0){for(var s=e.animators.length-1;s>=0;s--){if(r=e.animators[s],r.destroyed){e.removeAnimator(s);continue}if(!r.isAnimatePaused()){i=r.get("animations");for(var l=i.length-1;l>=0;l--)a=i[l],t=Iv(r,a,o),t&&(i.splice(l,1),t=!1,a.callback&&a.callback())}i.length===0&&e.removeAnimator(s)}var u=e.canvas.get("autoDraw");u||e.canvas.draw()}})},n.prototype.addAnimator=function(e){this.animators.push(e)},n.prototype.removeAnimator=function(e){this.animators.splice(e,1)},n.prototype.isAnimating=function(){return!!this.animators.length},n.prototype.stop=function(){this.timer&&this.timer.stop()},n.prototype.stopAllAnimations=function(e){e===void 0&&(e=!0),this.animators.forEach(function(t){t.stopAnimate(e)}),this.animators=[],this.canvas.draw()},n.prototype.getTime=function(){return this.current},n}(),hu=fu,Cx=40,Gp=0,zp=":",Ov=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Mx(n,e){for(var t in n)if(n.hasOwnProperty(t)&&t.indexOf(zp+e)>=0)return!0;return!1}function Up(n,e,t){t.name=e,t.target=n,t.currentTarget=n,t.delegateTarget=n,n.emit(e,t)}function du(n,e,t){if(t.bubbles){var r=void 0,i=!1;if(e==="mouseenter"?(r=t.fromShape,i=!0):e==="mouseleave"&&(i=!0,r=t.toShape),n.isCanvas()&&i)return;if(r&&pv(n,r)){t.bubbles=!1;return}t.name=e,t.currentTarget=n,t.delegateTarget=n,n.emit(e,t)}}var Ax=function(){function n(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(r){var i=r.type;t._triggerEvent(i,r)},this._onDocumentMove=function(r){var i=t.canvas,a=i.get("el");if(a!==r.target&&(t.dragging||t.currentShape)){var o=t._getPointInfo(r);t.dragging&&t._emitEvent("drag",r,o,t.draggingShape)}},this._onDocumentMouseUp=function(r){var i=t.canvas,a=i.get("el");if(a!==r.target&&t.dragging){var o=t._getPointInfo(r);t.draggingShape&&t._emitEvent("drop",r,o,null),t._emitEvent("dragend",r,o,t.draggingShape),t._afterDrag(t.draggingShape,o,r)}},this.canvas=e.canvas}return n.prototype.init=function(){this._bindEvents()},n.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");(0,v.each)(Ov,function(r){t.addEventListener(r,e._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},n.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");(0,v.each)(Ov,function(r){t.removeEventListener(r,e._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},n.prototype._getEventObj=function(e,t,r,i,a,o){var s=new dv(e,t);return s.fromShape=a,s.toShape=o,s.x=r.x,s.y=r.y,s.clientX=r.clientX,s.clientY=r.clientY,s.propagationPath.push(i),s},n.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},n.prototype._getPointInfo=function(e){var t=this.canvas,r=t.getClientByEvent(e),i=t.getPointByEvent(e);return{x:i.x,y:i.y,clientX:r.x,clientY:r.y}},n.prototype._triggerEvent=function(e,t){var r=this._getPointInfo(t),i=this._getShape(r,t),a=this["_on"+e],o=!1;if(a)a.call(this,r,i,t);else{var s=this.currentShape;e==="mouseenter"||e==="dragenter"||e==="mouseover"?(this._emitEvent(e,t,r,null,null,i),i&&this._emitEvent(e,t,r,i,null,i),e==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",t,r,null)):e==="mouseleave"||e==="dragleave"||e==="mouseout"?(o=!0,s&&this._emitEvent(e,t,r,s,s,null),this._emitEvent(e,t,r,null,s,null),e==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",t,r,null)):this._emitEvent(e,t,r,i,null,null)}if(o||(this.currentShape=i),i&&!i.get("destroyed")){var l=this.canvas,u=l.get("el");u.style.cursor=i.attr("cursor")||l.get("cursor")}},n.prototype._onmousedown=function(e,t,r){r.button===Gp&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=r.timeStamp),this._emitEvent("mousedown",r,e,t,null,null)},n.prototype._emitMouseoverEvents=function(e,t,r,i){var a=this.canvas.get("el");r!==i&&(r&&(this._emitEvent("mouseout",e,t,r,r,i),this._emitEvent("mouseleave",e,t,r,r,i),(!i||i.get("destroyed"))&&(a.style.cursor=this.canvas.get("cursor"))),i&&(this._emitEvent("mouseover",e,t,i,r,i),this._emitEvent("mouseenter",e,t,i,r,i)))},n.prototype._emitDragoverEvents=function(e,t,r,i,a){i?(i!==r&&(r&&this._emitEvent("dragleave",e,t,r,r,i),this._emitEvent("dragenter",e,t,i,r,i)),a||this._emitEvent("dragover",e,t,i)):r&&this._emitEvent("dragleave",e,t,r,r,i),a&&this._emitEvent("dragover",e,t,i)},n.prototype._afterDrag=function(e,t,r){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var i=this._getShape(t,r);i!==e&&this._emitMouseoverEvents(r,t,e,i),this.currentShape=i},n.prototype._onmouseup=function(e,t,r){if(r.button===Gp){var i=this.draggingShape;this.dragging?(i&&this._emitEvent("drop",r,e,t),this._emitEvent("dragend",r,e,i),this._afterDrag(i,e,r)):(this._emitEvent("mouseup",r,e,t),t===this.mousedownShape&&this._emitEvent("click",r,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},n.prototype._ondragover=function(e,t,r){r.preventDefault();var i=this.currentShape;this._emitDragoverEvents(r,e,i,t,!0)},n.prototype._onmousemove=function(e,t,r){var i=this.canvas,a=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(r,e,a,t,!1),this._emitEvent("drag",r,e,o);else{var s=this.mousedownPoint;if(s){var l=this.mousedownShape,u=r.timeStamp,c=u-this.mousedownTimeStamp,f=s.clientX-e.clientX,h=s.clientY-e.clientY,d=f*f+h*h;c>120||d>Cx?l&&l.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",r,e,o),this.mousedownShape=null,this.mousedownPoint=null):!l&&i.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",r,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t)):(this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t))}else this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t)}},n.prototype._emitEvent=function(e,t,r,i,a,o){var s=this._getEventObj(e,t,r,i,a,o);if(i){s.shape=i,Up(i,e,s);for(var l=i.getParent();l;)l.emitDelegation(e,s),s.propagationStopped||du(l,e,s),s.propagationPath.push(l),l=l.getParent()}else{var u=this.canvas;Up(u,e,s)}},n.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},n}(),Tx=Ax,Wp="px",Pv=(0,xv.qY)(),Ix=Pv&&Pv.name==="firefox",pS=function(n){(0,b.__extends)(e,n);function e(t){var r=n.call(this,t)||this;return r.initContainer(),r.initDom(),r.initEvents(),r.initTimeline(),r}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},e.prototype.initContainer=function(){var t=this.get("container");(0,v.isString)(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t);var r=this.get("container");r.appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new Tx({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new hu(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,r){var i=this.get("el");gv&&(i.style.width=t+Wp,i.style.height=r+Wp)},e.prototype.changeSize=function(t,r){this.setDOMSize(t,r),this.set("width",t),this.set("height",r),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var r=this.get("el");gv&&r&&(r.style.cursor=t)},e.prototype.getPointByEvent=function(t){var r=this.get("supportCSSTransform");if(r){if(Ix&&!(0,v.isNil)(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!(0,v.isNil)(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var i=this.getClientByEvent(t),a=i.x,o=i.y;return this.getPointByClient(a,o)},e.prototype.getClientByEvent=function(t){var r=t;return t.touches&&(t.type==="touchend"?r=t.changedTouches[0]:r=t.touches[0]),{x:r.clientX,y:r.clientY}},e.prototype.getPointByClient=function(t,r){var i=this.get("el"),a=i.getBoundingClientRect();return{x:t-a.left,y:r-a.top}},e.prototype.getClientByPoint=function(t,r){var i=this.get("el"),a=i.getBoundingClientRect();return{x:t+a.left,y:r+a.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){var t=this.get("eventController");t.destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),n.prototype.destroy.call(this))},e}(uu),yS=null,mS=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var t=n.prototype.clone.call(this),r=this.getChildren(),i=0;i<r.length;i++){var a=r[i];t.add(a.clone())}return t},e}(uu),xS=null,bS=function(n){(0,b.__extends)(e,n);function e(t){return n.call(this,t)||this}return e.prototype._isInBBox=function(t,r){var i=this.getBBox();return i.minX<=t&&i.maxX>=t&&i.minY<=r&&i.maxY>=r},e.prototype.afterAttrsChange=function(t){n.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(t){n.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),r=this.getTotalMatrix(),i=t.minX,a=t.minY,o=t.maxX,s=t.maxY;if(r){var l=ml(r,[t.minX,t.minY]),u=ml(r,[t.maxX,t.minY]),c=ml(r,[t.minX,t.maxY]),f=ml(r,[t.maxX,t.maxY]);i=Math.min(l[0],u[0],c[0],f[0]),o=Math.max(l[0],u[0],c[0],f[0]),a=Math.min(l[1],u[1],c[1],f[1]),s=Math.max(l[1],u[1],c[1],f[1])}var h=this.attrs;if(h.shadowColor){var d=h.shadowBlur,g=d===void 0?0:d,p=h.shadowOffsetX,m=p===void 0?0:p,_=h.shadowOffsetY,S=_===void 0?0:_,M=i-g+m,R=o+g+m,F=a-g+S,V=s+g+S;i=Math.min(i,M),o=Math.max(o,R),a=Math.min(a,F),s=Math.max(s,V)}return{x:i,y:a,minX:i,minY:a,maxX:o,maxY:s,width:o-i,height:s-a}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,r){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,r){var i=this.get("startArrowShape"),a=this.get("endArrowShape"),o=[t,r,1];o=this.invertFromMatrix(o);var s=o[0],l=o[1],u=this._isInBBox(s,l);return this.isOnlyHitBox()?u:!!(u&&!this.isClipped(s,l)&&(this.isInShape(s,l)||i&&i.isHit(s,l)||a&&a.isHit(s,l)))},e}(Cv),_S=null,Vp=new Map;function Uo(n,e){Vp.set(n,e)}function SS(n){return Vp.get(n)}function dh(n){var e=n.attr(),t=e.x,r=e.y,i=e.width,a=e.height;return{x:t,y:r,width:i,height:a}}function Tc(n){var e=n.attr(),t=e.x,r=e.y,i=e.r;return{x:t-i,y:r-i,width:i*2,height:i*2}}var mi=x(51824);function Ic(n,e){return!n||!e?n||e:{minX:Math.min(n.minX,e.minX),minY:Math.min(n.minY,e.minY),maxX:Math.max(n.maxX,e.maxX),maxY:Math.max(n.maxY,e.maxY)}}function Oc(n,e){var t=n.get("startArrowShape"),r=n.get("endArrowShape"),i=null,a=null;return t&&(i=t.getCanvasBBox(),e=Ic(e,i)),r&&(a=r.getCanvasBBox(),e=Ic(e,a)),e}function vh(n){for(var e=n.attr(),t=e.points,r=[],i=[],a=0;a<t.length;a++){var o=t[a];r.push(o[0]),i.push(o[1])}var s=mi.Zr.getBBoxByArray(r,i),l=s.x,u=s.y,c=s.width,f=s.height,h={minX:l,minY:u,maxX:l+c,maxY:u+f};return h=Oc(n,h),{x:h.minX,y:h.minY,width:h.maxX-h.minX,height:h.maxY-h.minY}}function gh(n){for(var e=n.attr(),t=e.points,r=[],i=[],a=0;a<t.length;a++){var o=t[a];r.push(o[0]),i.push(o[1])}return mi.Zr.getBBoxByArray(r,i)}var vu=null;function Dv(){if(!vu){var n=document.createElement("canvas");n.width=1,n.height=1,vu=n.getContext("2d")}return vu}function ph(n,e,t){var r=1;if((0,v.isString)(n)&&(r=n.split(`
`).length),r>1){var i=yh(e,t);return e*r+i*(r-1)}return e}function yh(n,e){return e?e-n:n*.14}function mh(n,e){var t=Dv(),r=0;if((0,v.isNil)(n)||n==="")return r;if(t.save(),t.font=e,(0,v.isString)(n)&&n.includes(`
`)){var i=n.split(`
`);(0,v.each)(i,function(a){var o=t.measureText(a).width;r<o&&(r=o)})}else r=t.measureText(n).width;return t.restore(),r}function Pc(n){var e=n.fontSize,t=n.fontFamily,r=n.fontWeight,i=n.fontStyle,a=n.fontVariant;return[i,a,r,e+"px",t].join(" ").trim()}function Dc(n){var e=n.attr(),t=e.x,r=e.y,i=e.text,a=e.fontSize,o=e.lineHeight,s=e.font;s||(s=Pc(e));var l=mh(i,s),u;if(!l)u={x:t,y:r,width:0,height:0};else{var c=e.textAlign,f=e.textBaseline,h=ph(i,a,o),d={x:t,y:r-h};c&&(c==="end"||c==="right"?d.x-=l:c==="center"&&(d.x-=l/2)),f&&(f==="top"?d.y+=h:f==="middle"&&(d.y+=h/2)),u={x:d.x,y:d.y,width:l,height:h}}return u}var Ma=x(99291);function Lc(n,e){for(var t=[],r=[],i=[],a=0;a<n.length;a++){var o=n[a],s=o.currentPoint,l=o.params,u=o.prePoint,c=void 0;switch(o.command){case"Q":c=mi.lD.box(u[0],u[1],l[1],l[2],l[3],l[4]);break;case"C":c=mi.Ll.box(u[0],u[1],l[1],l[2],l[3],l[4],l[5],l[6]);break;case"A":var f=o.arcParams;c=mi.wN.box(f.cx,f.cy,f.rx,f.ry,f.xRotation,f.startAngle,f.endAngle);break;default:t.push(s[0]),r.push(s[1]);break}c&&(o.box=c,t.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),e&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&i.push(o)}t=t.filter(function(_){return!Number.isNaN(_)}),r=r.filter(function(_){return!Number.isNaN(_)});var h=(0,v.min)(t),d=(0,v.min)(r),g=(0,v.max)(t),p=(0,v.max)(r);if(i.length===0)return{x:h,y:d,width:g-h,height:p-d};for(var a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,m=void 0;s[0]===h?(m=Ds(o,e),h=h-m.xExtra):s[0]===g&&(m=Ds(o,e),g=g+m.xExtra),s[1]===d?(m=Ds(o,e),d=d-m.yExtra):s[1]===p&&(m=Ds(o,e),p=p+m.yExtra)}return{x:h,y:d,width:g-h,height:p-d}}function Ds(n,e){var t=n.prePoint,r=n.currentPoint,i=n.nextPoint,a=Math.pow(r[0]-t[0],2)+Math.pow(r[1]-t[1],2),o=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(t[0]-i[0],2)+Math.pow(t[1]-i[1],2),l=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!l||Math.sin(l)===0||(0,v.isNumberEqual)(l,0))return{xExtra:0,yExtra:0};var u=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),c=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));u=u>Math.PI/2?Math.PI-u:u,c=c>Math.PI/2?Math.PI-c:c;var f={xExtra:Math.cos(l/2-u)*(e/2*(1/Math.sin(l/2)))-e/2||0,yExtra:Math.cos(c-l/2)*(e/2*(1/Math.sin(l/2)))-e/2||0};return f}function Xp(n){var e=n.attr(),t=e.path,r=e.stroke,i=r?e.lineWidth:0,a=n.get("segments")||(0,Ma.zx)(t),o=Lc(a,i),s=o.x,l=o.y,u=o.width,c=o.height,f={minX:s,minY:l,maxX:s+u,maxY:l+c};return f=Oc(n,f),{x:f.minX,y:f.minY,width:f.maxX-f.minX,height:f.maxY-f.minY}}function Rc(n){var e=n.attr(),t=e.x1,r=e.y1,i=e.x2,a=e.y2,o=Math.min(t,i),s=Math.max(t,i),l=Math.min(r,a),u=Math.max(r,a),c={minX:o,maxX:s,minY:l,maxY:u};return c=Oc(n,c),{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}function Sl(n){var e=n.attr(),t=e.x,r=e.y,i=e.rx,a=e.ry;return{x:t-i,y:r-a,width:i*2,height:a*2}}Uo("rect",dh),Uo("image",dh),Uo("circle",Tc),Uo("marker",Tc),Uo("polyline",vh),Uo("polygon",gh),Uo("text",Dc),Uo("path",Xp),Uo("line",Rc),Uo("ellipse",Sl);var Ox="0.5.6";function xh(n,e,t){var r=new dv(e,t);r.target=n,r.propagationPath.push(n),n.emitDelegation(e,r);for(var i=n.getParent();i;)i.emitDelegation(e,r),r.propagationPath.push(i),i=i.getParent()}var Yp=[1,0,0,0,1,0,0,0,1];function gu(n,e,t){if(t===void 0&&(t=Yp),!e)return null;var r=Cn.vs(t,[["t",-n.x,-n.y],["r",e],["t",n.x,n.y]]);return r}function Lv(n,e){return!n.x&&!n.y?null:Cn.vs(e||Yp,[["t",n.x,n.y]])}function Ls(n){var e=[1,0,0],t=[0,0,0];return Eo(t,e,n),Math.atan2(t[1],t[0])}function Nc(n,e){var t=[0,0];return Ar.kK(t,e,n),t}function Hp(n,e){var t=Nc(n,[e.minX,e.minY]),r=Nc(n,[e.maxX,e.minY]),i=Nc(n,[e.minX,e.maxY]),a=Nc(n,[e.maxX,e.maxY]),o=Math.min(t[0],r[0],i[0],a[0]),s=Math.max(t[0],r[0],i[0],a[0]),l=Math.min(t[1],r[1],i[1],a[1]),u=Math.max(t[1],r[1],i[1],a[1]);return{x:o,y:l,minX:o,minY:l,maxX:s,maxY:u,width:s-o,height:u-l}}function Rv(n,e,t,r){if(e){var i=gu({x:t,y:r},e,n.getMatrix());n.setMatrix(i)}}function kc(n,e,t){var r=Lv({x:e,y:t});n.attr("matrix",r)}function Bc(n){var e=0,t=0,r=0,i=0;return(0,v.isNumber)(n)?e=t=r=i=n:(0,v.isArray)(n)&&(e=n[0],r=(0,v.isNil)(n[1])?n[0]:n[1],i=(0,v.isNil)(n[2])?n[0]:n[2],t=(0,v.isNil)(n[3])?r:n[3]),[e,r,i,t]}function Nv(n){for(var e=n.childNodes,t=e.length,r=t-1;r>=0;r--)n.removeChild(e[r])}function Wo(n,e){return!!n.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function pu(n){var e=n.start,t=n.end,r=Math.min(e.x,t.x),i=Math.min(e.y,t.y),a=Math.max(e.x,t.x),o=Math.max(e.y,t.y);return{x:r,y:i,minX:r,minY:i,maxX:a,maxY:o,width:a-r,height:o-i}}function yu(n){var e=n.map(function(s){return s.x}),t=n.map(function(s){return s.y}),r=Math.min.apply(Math,e),i=Math.min.apply(Math,t),a=Math.max.apply(Math,e),o=Math.max.apply(Math,t);return{x:r,y:i,minX:r,minY:i,maxX:a,maxY:o,width:a-r,height:o-i}}function fo(n,e,t,r){var i=n+t,a=e+r;return{x:n,y:e,width:t,height:r,minX:n,minY:e,maxX:isNaN(i)?0:i,maxY:isNaN(a)?0:a}}function Rs(n,e,t){return(1-t)*n+e*t}function Ns(n,e,t){return{x:n.x+Math.cos(t)*e,y:n.y+Math.sin(t)*e}}function bh(n,e){var t=e.x-n.x,r=e.y-n.y;return Math.sqrt(t*t+r*r)}var Px=function(n){return new Promise(function(e){setTimeout(e,n)})},na=function(n,e,t){return t===void 0&&(t=Math.pow(Number.EPSILON,.5)),[n,e].includes(Infinity)?Math.abs(n)===Math.abs(e):Math.abs(n-e)<t};function ks(n,e){var t=Math.max(n.minX,e.minX),r=Math.max(n.minY,e.minY),i=Math.min(n.maxX,e.maxX),a=Math.min(n.maxY,e.maxY);return fo(t,r,i-t,a-r)}function Gi(n,e){var t=Math.min(n.minX,e.minX),r=Math.min(n.minY,e.minY),i=Math.max(n.maxX,e.maxX),a=Math.max(n.maxY,e.maxY);return fo(t,r,i-t,a-r)}function Aa(n){var e=n.getClip(),t=e&&e.getBBox(),r;if(!n.isGroup())r=n.getBBox();else{var i=Infinity,a=-Infinity,o=Infinity,s=-Infinity,l=n.getChildren();l.length>0?(0,v.each)(l,function(u){if(u.get("visible")){if(u.isGroup()&&u.get("children").length===0)return!0;var c=Aa(u),f=u.applyToMatrix([c.minX,c.minY,1]),h=u.applyToMatrix([c.minX,c.maxY,1]),d=u.applyToMatrix([c.maxX,c.minY,1]),g=u.applyToMatrix([c.maxX,c.maxY,1]),p=Math.min(f[0],h[0],d[0],g[0]),m=Math.max(f[0],h[0],d[0],g[0]),_=Math.min(f[1],h[1],d[1],g[1]),S=Math.max(f[1],h[1],d[1],g[1]);p<i&&(i=p),m>a&&(a=m),_<o&&(o=_),S>s&&(s=S)}}):(i=0,a=0,o=0,s=0),r=fo(i,o,a-i,s-o)}return t?ks(r,t):r}function jp(n,e){if(!(!n.getClip()&&!e.getClip())){var t=e.getClip();if(!t){n.setClip(null);return}var r={type:t.get("type"),attrs:t.attr()};n.setClip(r)}}function Wa(n){return n+"px"}function Zp(n,e,t,r){var i=bh(n,e),a=r/i,o=0;return t==="start"?o=0-a:t==="end"&&(o=1+a),{x:Rs(n.x,e.x,o),y:Rs(n.y,e.y,o)}}var Dx={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},Lx=function(n){(0,b.__extends)(e,n);function e(t){var r=n.call(this,t)||this;return r.initCfg(),r}return e.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},e.prototype.clear=function(){},e.prototype.update=function(t){var r=this,i=this.get("defaultCfg");(0,v.each)(t,function(a,o){var s=r.get(o),l=a;s!==a&&((0,v.isObject)(a)&&i[o]&&(l=(0,v.deepMix)({},i[o],a)),r.set(o,l))}),this.updateInner(t),this.afterUpdate(t)},e.prototype.updateInner=function(t){},e.prototype.afterUpdate=function(t){(0,v.hasKey)(t,"visible")&&(t.visible?this.show():this.hide()),(0,v.hasKey)(t,"capture")&&this.setCapture(t.capture)},e.prototype.getLayoutBBox=function(){return this.getBBox()},e.prototype.getLocationType=function(){return this.get("locationType")},e.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},e.prototype.setOffset=function(t,r){this.update({offsetX:t,offsetY:r})},e.prototype.setLocation=function(t){var r=(0,b.__assign)({},t);this.update(r)},e.prototype.getLocation=function(){var t=this,r={},i=this.get("locationType"),a=Dx[i];return(0,v.each)(a,function(o){r[o]=t.get(o)}),r},e.prototype.isList=function(){return!1},e.prototype.isSlider=function(){return!1},e.prototype.init=function(){},e.prototype.initCfg=function(){var t=this,r=this.get("defaultCfg");(0,v.each)(r,function(i,a){var o=t.get(a);if((0,v.isObject)(o)){var s=(0,v.deepMix)({},i,o);t.set(a,s)}})},e}(lh),kv=Lx,El="update_status",Rx=["visible","tip","delegateObject"],Nx=["container","group","shapesMap","isRegister","isUpdating","destroyed"],kx=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},e.prototype.remove=function(){this.clear();var t=this.get("group");t.remove()},e.prototype.clear=function(){var t=this.get("group");t.clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},e.prototype.getChildComponentById=function(t){var r=this.getElementById(t),i=r&&r.get("component");return i},e.prototype.getElementById=function(t){return this.get("shapesMap")[t]},e.prototype.getElementByLocalId=function(t){var r=this.getElementId(t);return this.getElementById(r)},e.prototype.getElementsByName=function(t){var r=[];return(0,v.each)(this.get("shapesMap"),function(i){i.get("name")===t&&r.push(i)}),r},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateInner=function(t){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},e.prototype.render=function(){var t=this.get("offScreenGroup");t||(t=this.offScreenRender());var r=this.get("group");this.updateElements(t,r),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},e.prototype.show=function(){var t=this.get("group");t.show(),this.set("visible",!0)},e.prototype.hide=function(){var t=this.get("group");t.hide(),this.set("visible",!1)},e.prototype.setCapture=function(t){var r=this.get("group");r.set("capture",t),this.set("capture",t)},e.prototype.destroy=function(){this.removeEvent(),this.remove(),n.prototype.destroy.call(this)},e.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},e.prototype.getLayoutBBox=function(){var t=this.get("group"),r=this.getInnerLayoutBBox(),i=t.getTotalMatrix();return i&&(r=Hp(i,r)),r},e.prototype.on=function(t,r,i){var a=this.get("group");return a.on(t,r,i),this},e.prototype.off=function(t,r){var i=this.get("group");return i&&i.off(t,r),this},e.prototype.emit=function(t,r){var i=this.get("group");i.emit(t,r)},e.prototype.init=function(){n.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},e.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},e.prototype.delegateEmit=function(t,r){var i=this.get("group");r.target=i,i.emit(t,r),xh(i,t,r)},e.prototype.createOffScreenGroup=function(){var t=this.get("group"),r=t.getGroupBase(),i=new r({delegateObject:this.getDelegateObject()});return i},e.prototype.applyOffset=function(){var t=this.get("offsetX"),r=this.get("offsetY");this.moveElementTo(this.get("group"),{x:t,y:r})},e.prototype.initGroup=function(){var t=this.get("container");this.set("group",t.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},e.prototype.offScreenRender=function(){this.clearOffScreenCache();var t=this.createOffScreenGroup();return this.renderInner(t),this.set("offScreenGroup",t),this.set("offScreenBBox",Aa(t)),t},e.prototype.addGroup=function(t,r){this.appendDelegateObject(t,r);var i=t.addGroup(r);return this.get("isRegister")&&this.registerElement(i),i},e.prototype.addShape=function(t,r){this.appendDelegateObject(t,r);var i=t.addShape(r);return this.get("isRegister")&&this.registerElement(i),i},e.prototype.addComponent=function(t,r){var i=r.id,a=r.component,o=(0,b.__rest)(r,["id","component"]),s=new a((0,b.__assign)((0,b.__assign)({},o),{id:i,container:t,updateAutoRender:this.get("updateAutoRender")}));return s.init(),s.render(),this.get("isRegister")&&this.registerElement(s.get("group")),s},e.prototype.initEvent=function(){},e.prototype.removeEvent=function(){var t=this.get("group");t.off()},e.prototype.getElementId=function(t){var r=this.get("id"),i=this.get("name");return r+"-"+i+"-"+t},e.prototype.registerElement=function(t){var r=t.get("id");this.get("shapesMap")[r]=t},e.prototype.unregisterElement=function(t){var r=t.get("id");delete this.get("shapesMap")[r]},e.prototype.moveElementTo=function(t,r){var i=Lv(r);t.attr("matrix",i)},e.prototype.addAnimation=function(t,r,i){var a=r.attr("opacity");(0,v.isNil)(a)&&(a=1),r.attr("opacity",0),r.animate({opacity:a},i)},e.prototype.removeAnimation=function(t,r,i){r.animate({opacity:0},i)},e.prototype.updateAnimation=function(t,r,i,a){r.animate(i,a)},e.prototype.updateElements=function(t,r){var i=this,a=this.get("animate"),o=this.get("animateOption"),s=t.getChildren().slice(0),l;(0,v.each)(s,function(u){var c=u.get("id"),f=i.getElementById(c),h=u.get("name");if(f)if(u.get("isComponent")){var d=u.get("component"),g=f.get("component"),p=(0,v.pick)(d.cfg,(0,v.difference)((0,v.keys)(d.cfg),Nx));g.update(p),f.set(El,"update")}else{var m=i.getReplaceAttrs(f,u);a&&o.update?i.updateAnimation(h,f,m,o.update):f.attr(m),u.isGroup()&&i.updateElements(u,f),(0,v.each)(Rx,function(R){f.set(R,u.get(R))}),jp(f,u),l=f,f.set(El,"update")}else{r.add(u);var _=r.getChildren();if(_.splice(_.length-1,1),l){var S=_.indexOf(l);_.splice(S+1,0,u)}else _.unshift(u);if(i.registerElement(u),u.set(El,"add"),u.get("isComponent")){var d=u.get("component");d.set("container",r)}else u.isGroup()&&i.registerNewGroup(u);if(l=u,a){var M=i.get("isInit")?o.appear:o.enter;M&&i.addAnimation(h,u,M)}}})},e.prototype.clearUpdateStatus=function(t){var r=t.getChildren();(0,v.each)(r,function(i){i.set(El,null)})},e.prototype.clearOffScreenCache=function(){var t=this.get("offScreenGroup");t&&t.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},e.prototype.getDelegateObject=function(){var t,r=this.get("name"),i=(t={},t[r]=this,t.component=this,t);return i},e.prototype.appendDelegateObject=function(t,r){var i=t.get("delegateObject");r.delegateObject||(r.delegateObject={}),(0,v.mix)(r.delegateObject,i)},e.prototype.getReplaceAttrs=function(t,r){var i=t.attr(),a=r.attr();return(0,v.each)(i,function(o,s){a[s]===void 0&&(a[s]=void 0)}),a},e.prototype.registerNewGroup=function(t){var r=this,i=t.getChildren();(0,v.each)(i,function(a){r.registerElement(a),a.set(El,"add"),a.isGroup()&&r.registerNewGroup(a)})},e.prototype.deleteElements=function(){var t=this,r=this.get("shapesMap"),i=[];(0,v.each)(r,function(s,l){!s.get(El)||s.destroyed?i.push([l,s]):s.set(El,null)});var a=this.get("animate"),o=this.get("animateOption");(0,v.each)(i,function(s){var l=s[0],u=s[1];if(!u.destroyed){var c=u.get("name");if(a&&o.leave){var f=(0,v.mix)({callback:function(){t.removeElement(u)}},o.leave);t.removeAnimation(c,u,f)}else t.removeElement(u)}delete r[l]})},e.prototype.removeElement=function(t){if(t.get("isGroup")){var r=t.get("component");r&&r.destroy()}t.remove()},e}(kv),ca=kx,_h="\u2026";function Kp(n){for(var e=0,t=0;t<n.length;t++)e+=Bs(n,t);return e}function Bs(n,e){return n.charCodeAt(e)>0&&n.charCodeAt(e)<128?1:2}function Bx(n,e,t){t===void 0&&(t="tail");var r=n.length,i="";if(t==="tail"){for(var a=0,o=0;a<e;){var s=Bs(n,o);if(a+s<=e)i+=n[o],a+=Bs(n,o),o++;else break}i+=_h}else if(t==="head"){for(var a=0,o=r-1;a<e;){var s=Bs(n,o);if(a+s<=e)i+=n[o],a+=Bs(n,o),o--;else break}i=_h+i}else{for(var l="",u="",a=0,c=0,f=r-1;a<e;){var h=Bs(n,c),d=!1;h+a<=e&&(l+=n[c],c++,a+=h,d=!0);var g=Bs(n,f);if(g+a<=e&&(u=n[f]+u,a+=g,f--,d=!0),!d)break}i=l+_h+u}return i}var Fx="\u2026",$p=2,Gx=400;function it(n){for(var e=n.map(function(l){var u=l.attr("text");return(0,v.isNil)(u)?"":""+u}),t=0,r=0,i=0;i<e.length;i+=1){for(var a=0,o=0;o<=e[i].length;o+=1){var s=e[i].charCodeAt(o);s>=19968&&s<=40869?a+=2:a+=1}a>t&&(t=a,r=i)}return n[r].getBBox().width}function Nt(n){if(n.length>Gx)return it(n);var e=0;return(0,v.each)(n,function(t){var r=t.getBBox(),i=r.width;e<i&&(e=i)}),e}function Yt(n,e){var t=e.getCanvasBBox();return n?t.width:t.height}function Me(n,e){return n.getBBox().width<e}function Ne(n,e,t,r){r===void 0&&(r="tail");var i=e.attr("text"),a=Yt(n,e),o=Kp(i),s=!1;if(t<a){var l=Math.floor(t/a*o)-$p,u=void 0;l>=0?u=Bx(i,l,r):u=Fx,u&&(e.attr("text",u),s=!0)}return s?e.set("tip",i):e.set("tip",null),s}function Se(n,e){var t=e.x,r=e.y,i=e.content,a=e.style,o=e.id,s=e.name,l=e.rotate,u=e.maxLength,c=e.autoEllipsis,f=e.isVertical,h=e.ellipsisPosition,d=e.background,g=n.addGroup({id:o+"-group",name:s+"-group",attrs:{x:t,y:r}}),p=g.addShape({type:"text",id:o,name:s,attrs:(0,b.__assign)({x:0,y:0,text:i},a)}),m=Bc((0,v.get)(d,"padding",0));if(u&&c){var _=u-(m[1]+m[3]);Ne(!f,p,_,h)}if(d){var S=(0,v.get)(d,"style",{}),M=p.getCanvasBBox(),R=M.minX,F=M.minY,V=M.width,nt=M.height,at=g.addShape("rect",{id:o+"-bg",name:o+"-bg",attrs:(0,b.__assign)({x:R-m[3],y:F-m[0],width:V+m[1]+m[3],height:nt+m[0]+m[2]},S)});at.toBack()}kc(g,t,r),Rv(g,l,t,r)}var ce={fontFamily:`
  "-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`,textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4},$e=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:ce.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:ce.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:ce.lineColor,lineWidth:1}}}})},e.prototype.renderInner=function(t){this.renderLine(t),this.get("text")&&this.renderLabel(t)},e.prototype.renderLine=function(t){var r=this.get("start"),i=this.get("end"),a=this.get("style");this.addShape(t,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:(0,b.__assign)({x1:r.x,y1:r.y,x2:i.x,y2:i.y},a)})},e.prototype.getLabelPoint=function(t,r,i){var a;return i==="start"?a=0:i==="center"?a=.5:(0,v.isString)(i)&&i.indexOf("%")!==-1?a=parseInt(i,10)/100:(0,v.isNumber)(i)?a=i:a=1,(a>1||a<0)&&(a=1),{x:Rs(t.x,r.x,a),y:Rs(t.y,r.y,a)}},e.prototype.renderLabel=function(t){var r=this.get("text"),i=this.get("start"),a=this.get("end"),o=r.position,s=r.content,l=r.style,u=r.offsetX,c=r.offsetY,f=r.autoRotate,h=r.maxLength,d=r.autoEllipsis,g=r.ellipsisPosition,p=r.background,m=r.isVertical,_=m===void 0?!1:m,S=this.getLabelPoint(i,a,o),M=S.x+u,R=S.y+c,F={id:this.getElementId("line-text"),name:"annotation-line-text",x:M,y:R,content:s,style:l,maxLength:h,autoEllipsis:d,ellipsisPosition:g,background:p,isVertical:_};if(f){var V=[a.x-i.x,a.y-i.y];F.rotate=Math.atan2(V[1],V[0])}Se(t,F)},e}(ca),qe=$e,nr=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:ce.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:ce.fontFamily}}})},e.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetLocation()},e.prototype.renderInner=function(t){var r=this.getLocation(),i=r.x,a=r.y,o=this.get("content"),s=this.get("style"),l=this.getElementId("text"),u=this.get("name")+"-text",c=this.get("maxLength"),f=this.get("autoEllipsis"),h=this.get("isVertical"),d=this.get("ellipsisPosition"),g=this.get("background"),p=this.get("rotate"),m={id:l,name:u,x:i,y:a,content:o,style:s,maxLength:c,autoEllipsis:f,isVertical:h,ellipsisPosition:d,background:g,rotate:p};Se(t,m)},e.prototype.resetLocation=function(){var t=this.getElementByLocalId("text-group");if(t){var r=this.getLocation(),i=r.x,a=r.y,o=this.get("rotate");kc(t,i,a),Rv(t,o,i,a)}},e}(ca),tr=nr,or=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2,style:{stroke:"#999",lineWidth:1}})},e.prototype.renderInner=function(t){this.renderArc(t)},e.prototype.getArcPath=function(){var t=this.getLocation(),r=t.center,i=t.radius,a=t.startAngle,o=t.endAngle,s=Ns(r,i,a),l=Ns(r,i,o),u=o-a>Math.PI?1:0,c=[["M",s.x,s.y]];if(o-a==Math.PI*2){var f=Ns(r,i,a+Math.PI);c.push(["A",i,i,0,u,1,f.x,f.y]),c.push(["A",i,i,0,u,1,l.x,l.y])}else c.push(["A",i,i,0,u,1,l.x,l.y]);return c},e.prototype.renderArc=function(t){var r=this.getArcPath(),i=this.get("style");this.addShape(t,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:(0,b.__assign)({path:r},i)})},e}(ca),vr=or,Qe=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:ce.regionColor,opacity:.4}}})},e.prototype.renderInner=function(t){this.renderRegion(t)},e.prototype.renderRegion=function(t){var r=this.get("start"),i=this.get("end"),a=this.get("style"),o=pu({start:r,end:i});this.addShape(t,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:(0,b.__assign)({x:o.x,y:o.y,width:o.width,height:o.height},a)})},e}(ca),lr=Qe,ge=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},e.prototype.renderInner=function(t){this.renderImage(t)},e.prototype.getImageAttrs=function(){var t=this.get("start"),r=this.get("end"),i=this.get("style"),a=pu({start:t,end:r}),o=this.get("src");return(0,b.__assign)({x:a.x,y:a.y,img:o,width:a.width,height:a.height},i)},e.prototype.renderImage=function(t){this.addShape(t,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},e}(ca),Oe=ge,rr=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:ce.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:ce.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:ce.fontFamily}}}})},e.prototype.renderInner=function(t){(0,v.get)(this.get("line"),"display")&&this.renderLine(t),(0,v.get)(this.get("text"),"display")&&this.renderText(t),(0,v.get)(this.get("point"),"display")&&this.renderPoint(t),this.get("autoAdjust")&&this.autoAdjust(t)},e.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},e.prototype.renderPoint=function(t){var r=this.getShapeAttrs().point;this.addShape(t,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:r})},e.prototype.renderLine=function(t){var r=this.getShapeAttrs().line;this.addShape(t,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:r})},e.prototype.renderText=function(t){var r=this.getShapeAttrs().text,i=r.x,a=r.y,o=r.text,s=(0,b.__rest)(r,["x","y","text"]),l=this.get("text"),u=l.background,c=l.maxLength,f=l.autoEllipsis,h=l.isVertival,d=l.ellipsisPosition,g={x:i,y:a,id:this.getElementId("text"),name:"annotation-text",content:o,style:s,background:u,maxLength:c,autoEllipsis:f,isVertival:h,ellipsisPosition:d};Se(t,g)},e.prototype.autoAdjust=function(t){var r=this.get("direction"),i=this.get("x"),a=this.get("y"),o=(0,v.get)(this.get("line"),"length",0),s=this.get("coordinateBBox"),l=t.getBBox(),u=l.minX,c=l.maxX,f=l.minY,h=l.maxY,d=t.findById(this.getElementId("text-group")),g=t.findById(this.getElementId("text")),p=t.findById(this.getElementId("line"));if(!!s){if(d){if(i+u<=s.minX){var m=s.minX-(i+u);kc(d,d.attr("x")+m,d.attr("y"))}if(i+c>=s.maxX){var m=i+c-s.maxX;kc(d,d.attr("x")-m,d.attr("y"))}}if(r==="upward"&&a+f<=s.minY||r!=="upward"&&a+h>=s.maxY){var _=void 0,S=void 0;r==="upward"&&a+f<=s.minY?(_="top",S=1):(_="bottom",S=-1),g.attr("textBaseline",_),p&&p.attr("path",[["M",0,0],["L",0,o*S]]),kc(d,d.attr("x"),(o+2)*S)}}},e.prototype.getShapeAttrs=function(){var t=(0,v.get)(this.get("line"),"display"),r=(0,v.get)(this.get("point"),"style",{}),i=(0,v.get)(this.get("line"),"style",{}),a=(0,v.get)(this.get("text"),"style",{}),o=this.get("direction"),s=t?(0,v.get)(this.get("line"),"length",0):0,l=o==="upward"?-1:1;return{point:(0,b.__assign)({x:0,y:0},r),line:(0,b.__assign)({path:[["M",0,0],["L",0,s*l]]},i),text:(0,b.__assign)({x:0,y:(s+2)*l,text:(0,v.get)(this.get("text"),"content",""),textBaseline:o==="upward"?"bottom":"top"},a)}},e}(ca),yr=rr,Xe=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:ce.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:ce.textColor,fontFamily:ce.fontFamily}}}})},e.prototype.renderInner=function(t){var r=(0,v.get)(this.get("region"),"style",{}),i=(0,v.get)(this.get("text"),"style",{}),a=this.get("lineLength")||0,o=this.get("points");if(!!o.length){var s=yu(o),l=[];l.push(["M",o[0].x,s.minY-a]),o.forEach(function(c){l.push(["L",c.x,c.y])}),l.push(["L",o[o.length-1].x,o[o.length-1].y-a]),this.addShape(t,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:(0,b.__assign)({path:l},r)});var u=(0,b.__assign)({id:this.getElementId("text"),name:"annotation-text",x:(s.minX+s.maxX)/2,y:s.minY-a},this.get("text"));Se(t,u)}},e}(ca),xr=Xe,He=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},e.prototype.renderInner=function(t){var r=this,i=this.get("start"),a=this.get("end"),o=this.addGroup(t,{id:this.getElementId("region-filter"),capture:!1});(0,v.each)(this.get("shapes"),function(l,u){var c=l.get("type"),f=(0,v.clone)(l.attr());r.adjustShapeAttrs(f),r.addShape(o,{id:r.getElementId("shape-"+c+"-"+u),capture:!1,type:c,attrs:f})});var s=pu({start:i,end:a});o.setClip({type:"rect",attrs:{x:s.minX,y:s.minY,width:s.width,height:s.height}})},e.prototype.adjustShapeAttrs=function(t){var r=this.get("color");t.fill&&(t.fill=t.fillStyle=r),t.stroke=t.strokeStyle=r},e}(ca),fr=He,Ye=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{name:"annotation",type:"shape",draw:v.noop})},e.prototype.renderInner=function(t){var r=this.get("render");(0,v.isFunction)(r)&&r(t)},e}(ca),hr=Ye;function _r(n,e,t){var r;try{r=window.getComputedStyle?window.getComputedStyle(n,null)[e]:n.style[e]}catch(i){}finally{r=r===void 0?t:r}return r}function Hr(n,e){var t=_r(n,"width",e);return t==="auto"&&(t=n.offsetWidth),parseFloat(t)}function gr(n,e){var t=Hr(n,e),r=parseFloat(_r(n,"borderLeftWidth"))||0,i=parseFloat(_r(n,"paddingLeft"))||0,a=parseFloat(_r(n,"paddingRight"))||0,o=parseFloat(_r(n,"borderRightWidth"))||0,s=parseFloat(_r(n,"marginRight"))||0,l=parseFloat(_r(n,"marginLeft"))||0;return t+r+o+i+a+l+s}function ir(n,e){var t=_r(n,"height",e);return t==="auto"&&(t=n.offsetHeight),parseFloat(t)}function We(n,e){var t=ir(n,e),r=parseFloat(_r(n,"borderTopWidth"))||0,i=parseFloat(_r(n,"paddingTop"))||0,a=parseFloat(_r(n,"paddingBottom"))||0,o=parseFloat(_r(n,"borderBottomWidth"))||0,s=parseFloat(_r(n,"marginTop"))||0,l=parseFloat(_r(n,"marginBottom"))||0;return t+r+o+i+a+s+l}var Br=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.show=function(){var t=this.get("container");t.style.display="",this.set("visible",!0)},e.prototype.hide=function(){var t=this.get("container");t.style.display="none",this.set("visible",!1)},e.prototype.setCapture=function(t){var r=this.getContainer(),i=t?"auto":"none";r.style.pointerEvents=i,this.set("capture",t)},e.prototype.getBBox=function(){var t=this.getContainer(),r=parseFloat(t.style.left)||0,i=parseFloat(t.style.top)||0;return fo(r,i,t.clientWidth,t.clientHeight)},e.prototype.clear=function(){var t=this.get("container");Nv(t)},e.prototype.destroy=function(){this.removeEvent(),this.removeDom(),n.prototype.destroy.call(this)},e.prototype.init=function(){n.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},e.prototype.initCapture=function(){this.setCapture(this.get("capture"))},e.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},e.prototype.initDom=function(){},e.prototype.initContainer=function(){var t=this.get("container");if((0,v.isNil)(t)){t=this.createDom();var r=this.get("parent");(0,v.isString)(r)&&(r=document.getElementById(r),this.set("parent",r)),r.appendChild(t),this.set("container",t)}else(0,v.isString)(t)&&(t=document.getElementById(t),this.set("container",t));this.get("parent")||this.set("parent",t.parentNode)},e.prototype.resetStyles=function(){var t=this.get("domStyles"),r=this.get("defaultStyles");t?t=(0,v.deepMix)({},r,t):t=r,this.set("domStyles",t)},e.prototype.applyStyles=function(){var t=this.get("domStyles");if(!!t){var r=this.getContainer();this.applyChildrenStyles(r,t);var i=this.get("containerClassName");if(i&&Wo(r,i)){var a=t[i];ct(r,a)}}},e.prototype.applyChildrenStyles=function(t,r){(0,v.each)(r,function(i,a){var o=t.getElementsByClassName(a);(0,v.each)(o,function(s){ct(s,i)})})},e.prototype.applyStyle=function(t,r){var i=this.get("domStyles");ct(r,i[t])},e.prototype.createDom=function(){var t=this.get("containerTpl");return rt(t)},e.prototype.initEvent=function(){},e.prototype.removeDom=function(){var t=this.get("container");t&&t.parentNode&&t.parentNode.removeChild(t)},e.prototype.removeEvent=function(){},e.prototype.updateInner=function(t){(0,v.hasKey)(t,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},e.prototype.resetPosition=function(){},e}(kv),Zr=Br,Er=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{name:"annotation",type:"html",locationType:"point",x:0,y:0,containerTpl:'<div class="g2-html-annotation"></div>',alignX:"left",alignY:"top",html:"",zIndex:7})},e.prototype.render=function(){var t=this.getContainer(),r=this.get("html");Nv(t);var i=(0,v.isFunction)(r)?r(t):r;(0,v.isElement)(i)?t.appendChild(i):(0,v.isString)(i)&&t.appendChild(rt(i)),this.resetPosition()},e.prototype.resetPosition=function(){var t=this.getContainer(),r=this.getLocation(),i=r.x,a=r.y,o=this.get("alignX"),s=this.get("alignY"),l=this.get("offsetX"),u=this.get("offsetY"),c=gr(t),f=We(t),h={x:i,y:a};o==="middle"?h.x-=Math.round(c/2):o==="right"&&(h.x-=Math.round(c)),s==="middle"?h.y-=Math.round(f/2):s==="bottom"&&(h.y-=Math.round(f)),l&&(h.x+=l),u&&(h.y+=u),ct(t,{position:"absolute",left:h.x+"px",top:h.y+"px",zIndex:this.get("zIndex")})},e}(Zr),an=Er;function Ur(n,e,t){var r=e+"Style",i=null;return(0,v.each)(t,function(a,o){n[o]&&a[r]&&(i||(i={}),(0,v.mix)(i,a[r]))}),i}var en=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},optimize:{},defaultCfg:{line:{style:{lineWidth:1,stroke:ce.lineColor}},tickLine:{style:{lineWidth:1,stroke:ce.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:ce.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:ce.textColor,fontFamily:ce.fontFamily,fontWeight:"normal"},offset:10},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:ce.textColor,textBaseline:"middle",fontFamily:ce.fontFamily,textAlign:"center"}},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:ce.uncheckedColor}}},optimize:{enable:!0,threshold:400}},theme:{}})},e.prototype.renderInner=function(t){this.get("line")&&this.drawLine(t),this.drawTicks(t),this.get("title")&&this.drawTitle(t)},e.prototype.isList=function(){return!0},e.prototype.getItems=function(){return this.get("ticks")},e.prototype.setItems=function(t){this.update({ticks:t})},e.prototype.updateItem=function(t,r){(0,v.mix)(t,r),this.clear(),this.render()},e.prototype.clearItems=function(){var t=this.getElementByLocalId("label-group");t&&t.clear()},e.prototype.setItemState=function(t,r,i){t[r]=i,this.updateTickStates(t)},e.prototype.hasState=function(t,r){return!!t[r]},e.prototype.getItemStates=function(t){var r=this.get("tickStates"),i=[];return(0,v.each)(r,function(a,o){t[o]&&i.push(o)}),i},e.prototype.clearItemsState=function(t){var r=this,i=this.getItemsByState(t);(0,v.each)(i,function(a){r.setItemState(a,t,!1)})},e.prototype.getItemsByState=function(t){var r=this,i=this.getItems();return(0,v.filter)(i,function(a){return r.hasState(a,t)})},e.prototype.getSidePoint=function(t,r){var i=this,a=i.getSideVector(r,t);return{x:t.x+a[0],y:t.y+a[1]}},e.prototype.getTextAnchor=function(t){var r;return(0,v.isNumberEqual)(t[0],0)?r="center":t[0]>0?r="start":t[0]<0&&(r="end"),r},e.prototype.getTextBaseline=function(t){var r;return(0,v.isNumberEqual)(t[1],0)?r="middle":t[1]>0?r="top":t[1]<0&&(r="bottom"),r},e.prototype.processOverlap=function(t){},e.prototype.drawLine=function(t){var r=this.getLinePath(),i=this.get("line");this.addShape(t,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:(0,v.mix)({path:r},i.style)})},e.prototype.getTickLineItems=function(t){var r=this,i=[],a=this.get("tickLine"),o=a.alignTick,s=a.length,l=1,u=t.length;return u>=2&&(l=t[1].value-t[0].value),(0,v.each)(t,function(c){var f=c.point;o||(f=r.getTickPoint(c.value-l/2));var h=r.getSidePoint(f,s);i.push({startPoint:f,tickValue:c.value,endPoint:h,tickId:c.id,id:"tickline-"+c.id})}),i},e.prototype.getSubTickLineItems=function(t){var r=[],i=this.get("subTickLine"),a=i.count,o=t.length;if(o>=2)for(var s=0;s<o-1;s++)for(var l=t[s],u=t[s+1],c=0;c<a;c++){var f=(c+1)/(a+1),h=(1-f)*l.tickValue+f*u.tickValue,d=this.getTickPoint(h),g=this.getSidePoint(d,i.length);r.push({startPoint:d,endPoint:g,tickValue:h,id:"sub-"+l.id+"-"+c})}return r},e.prototype.getTickLineAttrs=function(t,r,i,a){var o=this.get(r).style,s={points:[t.startPoint,t.endPoint]},l=(0,v.get)(this.get("theme"),["tickLine","style"],{});o=(0,v.isFunction)(o)?(0,v.mix)({},l,o(s,i,a)):o;var u=t.startPoint,c=t.endPoint;return(0,b.__assign)({x1:u.x,y1:u.y,x2:c.x,y2:c.y},o)},e.prototype.drawTick=function(t,r,i,a,o){this.addShape(r,{type:"line",id:this.getElementId(t.id),name:"axis-"+i,attrs:this.getTickLineAttrs(t,i,a,o)})},e.prototype.drawTickLines=function(t){var r=this,i=this.get("ticks"),a=this.get("subTickLine"),o=this.getTickLineItems(i),s=this.addGroup(t,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),l=this.get("tickLine");if((0,v.each)(o,function(c,f){if(l.displayWithLabel){var h=r.getElementId("label-"+c.tickId);t.findById(h)&&r.drawTick(c,s,"tickLine",f,o)}else r.drawTick(c,s,"tickLine",f,o)}),a){var u=this.getSubTickLineItems(o);(0,v.each)(u,function(c,f){r.drawTick(c,s,"subTickLine",f,u)})}},e.prototype.processTicks=function(){var t=this,r=this.get("ticks");(0,v.each)(r,function(i){i.point=t.getTickPoint(i.value),(0,v.isNil)(i.id)&&(i.id=i.name)})},e.prototype.drawTicks=function(t){var r=this;this.optimizeTicks(),this.processTicks(),this.get("label")&&this.drawLabels(t),this.get("tickLine")&&this.drawTickLines(t);var i=this.get("ticks");(0,v.each)(i,function(a){r.applyTickStates(a,t)})},e.prototype.optimizeTicks=function(){var t=this.get("optimize"),r=this.get("ticks");if(t&&t.enable&&t.threshold>0){var i=(0,v.size)(r);if(i>t.threshold){var a=Math.ceil(i/t.threshold),o=r.filter(function(s,l){return l%a==0});this.set("ticks",o),this.set("originalTicks",r)}}},e.prototype.getLabelAttrs=function(t,r,i){var a=this.get("label"),o=a.offset,s=a.rotate,l=a.formatter,u=this.getSidePoint(t.point,o),c=this.getSideVector(o,u),f=l?l(t.name,t,r):t.name,h=a.style;h=(0,v.isFunction)(h)?(0,v.get)(this.get("theme"),["label","style"],{}):h;var d=(0,v.mix)({x:u.x,y:u.y,text:f,textAlign:this.getTextAnchor(c),textBaseline:this.getTextBaseline(c)},h);return s&&(d.matrix=gu(u,s)),d},e.prototype.drawLabels=function(t){var r=this,i=this.get("ticks"),a=this.addGroup(t,{name:"axis-label-group",id:this.getElementId("label-group")});(0,v.each)(i,function(h,d){r.addShape(a,{type:"text",name:"axis-label",id:r.getElementId("label-"+h.id),attrs:r.getLabelAttrs(h,d,i),delegateObject:{tick:h,item:h,index:d}})}),this.processOverlap(a);var o=a.getChildren(),s=(0,v.get)(this.get("theme"),["label","style"],{}),l=this.get("label"),u=l.style,c=l.formatter;if((0,v.isFunction)(u)){var f=o.map(function(h){return(0,v.get)(h.get("delegateObject"),"tick")});(0,v.each)(o,function(h,d){var g=h.get("delegateObject").tick,p=c?c(g.name,g,d):g.name,m=(0,v.mix)({},s,u(p,d,f));h.attr(m)})}},e.prototype.getTitleAttrs=function(){var t=this.get("title"),r=t.style,i=t.position,a=t.offset,o=t.spacing,s=o===void 0?0:o,l=t.autoRotate,u=r.fontSize,c=.5;i==="start"?c=0:i==="end"&&(c=1);var f=this.getTickPoint(c),h=this.getSidePoint(f,a||s+u/2),d=(0,v.mix)({x:h.x,y:h.y,text:t.text},r),g=t.rotate,p=g;if((0,v.isNil)(g)&&l){var m=this.getAxisVector(f),_=[1,0];p=Cn.Dg(m,_,!0)}if(p){var S=gu(h,p);d.matrix=S}return d},e.prototype.drawTitle=function(t){this.addShape(t,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:this.getTitleAttrs()})},e.prototype.applyTickStates=function(t,r){var i=this.getItemStates(t);if(i.length){var a=this.get("tickStates"),o=this.getElementId("label-"+t.id),s=r.findById(o);if(s){var l=Ur(t,"label",a);l&&s.attr(l)}var u=this.getElementId("tickline-"+t.id),c=r.findById(u);if(c){var f=Ur(t,"tickLine",a);f&&c.attr(f)}}},e.prototype.updateTickStates=function(t){var r=this.getItemStates(t),i=this.get("tickStates"),a=this.get("label"),o=this.getElementByLocalId("label-"+t.id),s=this.get("tickLine"),l=this.getElementByLocalId("tickline-"+t.id);if(r.length){if(o){var u=Ur(t,"label",i);u&&o.attr(u)}if(l){var c=Ur(t,"tickLine",i);c&&l.attr(c)}}else o&&o.attr(a.style),l&&l.attr(s.style)},e}(ca),mn=en;function xi(n,e,t,r){var i=e.getChildren(),a=!1;return(0,v.each)(i,function(o){var s=Ne(n,o,t,r);a=a||s}),a}function Hi(){return Pi}function hn(n,e,t){return xi(n,e,t,"head")}function Pi(n,e,t){return xi(n,e,t,"tail")}function ni(n,e,t){return xi(n,e,t,"middle")}function Di(n){var e=n.attr("matrix");return e&&e[0]!==1}function Li(n){var e=Di(n)?Ls(n.attr("matrix")):0;return e%360}function wi(n,e,t,r){var i=!1,a=Li(e),o=Math.abs(n?t.attr("y")-e.attr("y"):t.attr("x")-e.attr("x")),s=(n?t.attr("y")>e.attr("y"):t.attr("x")>e.attr("x"))?e.getBBox():t.getBBox();if(n){var l=Math.abs(Math.cos(a));na(l,0,Math.PI/180)?i=s.width+r>o:i=s.height/l+r>o}else{var l=Math.abs(Math.sin(a));na(l,0,Math.PI/180)?i=s.width+r>o:i=s.height/l+r>o}return i}function Ci(n,e,t,r){var i=(r==null?void 0:r.minGap)||0,a=e.getChildren().slice().filter(function(g){return g.get("visible")});if(!a.length)return!1;var o=!1;t&&a.reverse();for(var s=a.length,l=a[0],u=l,c=1;c<s;c++){var f=a[c],h=f.getBBox(),d=wi(n,u,f,i);d?(f.hide(),o=!0):u=f}return o}function Qi(n,e,t){var r=(t==null?void 0:t.minGap)||0,i=e.getChildren().slice();if(i.length<2)return!1;var a=!1,o=i[0],s=o.getBBox(),l=i[1],u=i.length,c=Li(o),f=Math.abs(n?l.attr("y")-o.attr("y"):l.attr("x")-o.attr("x")),h=0;if(n){var d=Math.abs(Math.cos(c));if(na(d,0,Math.PI/180)){var g=Nt(i);h=(g+r)/f}else h=(s.height/d+r)/f}else{var d=Math.abs(Math.sin(c));if(na(d,0,Math.PI/180)){var g=Nt(i);h=(g+r)/f}else h=(s.height/d+r)/f}if(h>1){h=Math.ceil(h);for(var p=0;p<u;p++)p%h!=0&&(i[p].hide(),a=!0)}return a}function Mi(){return Lr}function Qr(n,e,t,r){return Ci(n,e,!1,r)}function ia(n,e,t,r){return Ci(n,e,!0,r)}function Mn(n,e,t,r){var i=(r==null?void 0:r.minGap)||0,a=e.getChildren().slice();if(a.length<=2)return!1;for(var o=!1,s=a.length,l=a[0],u=a[s-1],c=l,f=1;f<s-1;f++){var h=a[f],d=h.getBBox(),g=wi(n,c,h,i);g?(h.hide(),o=!0):c=h}var p=wi(n,c,u,i);return p&&(c.hide(),o=!0),o}function Lr(n,e,t,r){var i=Qi(n,e,r);return Ci(n,e,!1)&&(i=!0),i}function un(n,e,t,r){var i=e.getChildren().slice(),a=Qi(n,e,r);if(i.length>2){var o=i[0],s=i[i.length-1];o.get("visible")||(o.show(),Ci(n,e,!1,r)&&(a=!0)),s.get("visible")||(s.show(),Ci(n,e,!0,r)&&(a=!0))}return a}function pn(n,e){(0,v.each)(n,function(t){var r=t.attr("x"),i=t.attr("y"),a=gu({x:r,y:i},e);t.attr("matrix",a)})}function bi(n,e,t,r){var i=e.getChildren();if(!i.length||!n&&i.length<2)return!1;var a=Nt(i),o=!1;if(n)o=!!t&&a>t;else{var s=Math.abs(i[1].attr("x")-i[0].attr("x"));o=a>s}if(o){var l=r(t,a);pn(i,l)}return o}function Vo(){return Fs}function Fs(n,e,t,r){return bi(n,e,t,function(){return(0,v.isNumber)(r)?r:n?ce.verticalAxisRotate:ce.horizontalAxisRotate})}function Vt(n,e,t){return bi(n,e,t,function(r,i){if(!r)return n?ce.verticalAxisRotate:ce.horizontalAxisRotate;if(n)return-Math.acos(r/i);var a=0;return r>i?a=Math.PI/4:(a=Math.asin(r/i),a>Math.PI/4&&(a=Math.PI/4)),a})}var Ae=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{type:"line",locationType:"region",start:null,end:null})},e.prototype.getLinePath=function(){var t=this.get("start"),r=this.get("end"),i=[];return i.push(["M",t.x,t.y]),i.push(["L",r.x,r.y]),i},e.prototype.getInnerLayoutBBox=function(){var t=this.get("start"),r=this.get("end"),i=n.prototype.getInnerLayoutBBox.call(this),a=Math.min(t.x,r.x,i.x),o=Math.min(t.y,r.y,i.y),s=Math.max(t.x,r.x,i.maxX),l=Math.max(t.y,r.y,i.maxY);return{x:a,y:o,minX:a,minY:o,maxX:s,maxY:l,width:s-a,height:l-o}},e.prototype.isVertical=function(){var t=this.get("start"),r=this.get("end");return(0,v.isNumberEqual)(t.x,r.x)},e.prototype.isHorizontal=function(){var t=this.get("start"),r=this.get("end");return(0,v.isNumberEqual)(t.y,r.y)},e.prototype.getTickPoint=function(t){var r=this,i=r.get("start"),a=r.get("end"),o=a.x-i.x,s=a.y-i.y;return{x:i.x+o*t,y:i.y+s*t}},e.prototype.getSideVector=function(t){var r=this.getAxisVector(),i=Ar.Fv([0,0],r),a=this.get("verticalFactor"),o=[i[1],i[0]*-1];return Ar.bA([0,0],o,t*a)},e.prototype.getAxisVector=function(){var t=this.get("start"),r=this.get("end");return[r.x-t.x,r.y-t.y]},e.prototype.processOverlap=function(t){var r=this,i=this.isVertical(),a=this.isHorizontal();if(!(!i&&!a)){var o=this.get("label"),s=this.get("title"),l=this.get("verticalLimitLength"),u=o.offset,c=l,f=0,h=0;s&&(f=s.style.fontSize,h=s.spacing),c&&(c=c-u-h-f);var d=this.get("overlapOrder");if((0,v.each)(d,function(m){o[m]&&r.canProcessOverlap(m)&&r.autoProcessOverlap(m,o[m],t,c)}),s&&(0,v.isNil)(s.offset)){var g=t.getCanvasBBox(),p=i?g.width:g.height;s.offset=u+p+h+f/2}}},e.prototype.canProcessOverlap=function(t){var r=this.get("label");return t==="autoRotate"?(0,v.isNil)(r.rotate):!0},e.prototype.autoProcessOverlap=function(t,r,i,a){var o=this,s=this.isVertical(),l=!1,u=A[t];if(r===!0){var c=this.get("label");l=u.getDefault()(s,i,a)}else if((0,v.isFunction)(r))l=r(s,i,a);else if((0,v.isObject)(r)){var f=r;u[f.type]&&(l=u[f.type](s,i,a,f.cfg))}else u[r]&&(l=u[r](s,i,a));if(t==="autoRotate"){if(l){var h=i.getChildren(),d=this.get("verticalFactor");(0,v.each)(h,function(p){var m=p.attr("textAlign");if(m==="center"){var _=d>0?"end":"start";p.attr("textAlign",_)}})}}else if(t==="autoHide"){var g=i.getChildren().slice(0);(0,v.each)(g,function(p){p.get("visible")||(o.get("isRegister")&&o.unregisterElement(p),p.remove())})}},e}(mn),_e=Ae,br=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},e.prototype.getLinePath=function(){var t=this.get("center"),r=t.x,i=t.y,a=this.get("radius"),o=a,s=this.get("startAngle"),l=this.get("endAngle"),u=[];if(Math.abs(l-s)===Math.PI*2)u=[["M",r,i-o],["A",a,o,0,1,1,r,i+o],["A",a,o,0,1,1,r,i-o],["Z"]];else{var c=this.getCirclePoint(s),f=this.getCirclePoint(l),h=Math.abs(l-s)>Math.PI?1:0,d=s>l?0:1;u=[["M",r,i],["L",c.x,c.y],["A",a,o,0,h,d,f.x,f.y],["L",r,i]]}return u},e.prototype.getTickPoint=function(t){var r=this.get("startAngle"),i=this.get("endAngle"),a=r+(i-r)*t;return this.getCirclePoint(a)},e.prototype.getSideVector=function(t,r){var i=this.get("center"),a=[r.x-i.x,r.y-i.y],o=this.get("verticalFactor"),s=Ar.kE(a);return Ar.bA(a,a,o*t/s),a},e.prototype.getAxisVector=function(t){var r=this.get("center"),i=[t.x-r.x,t.y-r.y];return[i[1],-1*i[0]]},e.prototype.getCirclePoint=function(t,r){var i=this.get("center");return r=r||this.get("radius"),{x:i.x+Math.cos(t)*r,y:i.y+Math.sin(t)*r}},e}(mn),on=br,Ft=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:ce.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:ce.textColor,textAlign:"center",textBaseline:"middle",fontFamily:ce.fontFamily}},textBackground:{padding:5,style:{stroke:ce.lineColor}}}})},e.prototype.renderInner=function(t){this.get("line")&&this.renderLine(t),this.get("text")&&(this.renderText(t),this.renderBackground(t))},e.prototype.renderText=function(t){var r=this.get("text"),i=r.style,a=r.autoRotate,o=r.content;if(!(0,v.isNil)(o)){var s=this.getTextPoint(),l=null;if(a){var u=this.getRotateAngle();l=gu(s,u)}this.addShape(t,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:(0,b.__assign)((0,b.__assign)((0,b.__assign)({},s),{text:o,matrix:l}),i)})}},e.prototype.renderLine=function(t){var r=this.getLinePath(),i=this.get("line"),a=i.style;this.addShape(t,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:(0,b.__assign)({path:r},a)})},e.prototype.renderBackground=function(t){var r=this.getElementId("text"),i=t.findById(r),a=this.get("textBackground");if(a&&i){var o=i.getBBox(),s=Bc(a.padding),l=a.style,u=this.addShape(t,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:(0,b.__assign)({x:o.x-s[3],y:o.y-s[0],width:o.width+s[1]+s[3],height:o.height+s[0]+s[2],matrix:i.attr("matrix")},l)});u.toBack()}},e}(ca),Dt=Ft,qt=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{type:"line",locationType:"region",start:null,end:null})},e.prototype.getRotateAngle=function(){var t=this.getLocation(),r=t.start,i=t.end,a=this.get("text").position,o=Math.atan2(i.y-r.y,i.x-r.x),s=a==="start"?o-Math.PI/2:o+Math.PI/2;return s},e.prototype.getTextPoint=function(){var t=this.getLocation(),r=t.start,i=t.end,a=this.get("text"),o=a.position,s=a.offset;return Zp(r,i,o,s)},e.prototype.getLinePath=function(){var t=this.getLocation(),r=t.start,i=t.end;return[["M",r.x,r.y],["L",i.x,i.y]]},e}(Dt),fe=qt,pe=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},e.prototype.getRotateAngle=function(){var t=this.getLocation(),r=t.startAngle,i=t.endAngle,a=this.get("text").position,o=a==="start"?r+Math.PI/2:i-Math.PI/2;return o},e.prototype.getTextPoint=function(){var t=this.get("text"),r=t.position,i=t.offset,a=this.getLocation(),o=a.center,s=a.radius,l=a.startAngle,u=a.endAngle,c=r==="start"?l:u,f=this.getRotateAngle()-Math.PI,h=Ns(o,s,c),d=Math.cos(f)*i,g=Math.sin(f)*i;return{x:h.x+d,y:h.y+g}},e.prototype.getLinePath=function(){var t=this.getLocation(),r=t.center,i=t.radius,a=t.startAngle,o=t.endAngle,s=null;if(o-a==Math.PI*2){var l=r.x,u=r.y;s=[["M",l,u-i],["A",i,i,0,1,1,l,u+i],["A",i,i,0,1,1,l,u-i],["Z"]]}else{var c=Ns(r,i,a),f=Ns(r,i,o),h=Math.abs(o-a)>Math.PI?1:0,d=a>o?0:1;s=[["M",c.x,c.y],["A",i,i,0,h,d,f.x,f.y]]}return s},e}(Dt),re=pe,Jt="g2-crosshair",le=Jt+"-line",Bt=Jt+"-text",Zt,kt=(Zt={},Zt[""+Jt]={position:"relative"},Zt[""+le]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},Zt[""+Bt]={position:"absolute",color:ce.textColor,fontFamily:ce.fontFamily},Zt),ue=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="'+Jt+'"></div>',crosshairTpl:'<div class="'+le+'"></div>',textTpl:'<span class="'+Bt+'">{content}</span>',domStyles:null,containerClassName:Jt,defaultStyles:kt,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},e.prototype.render=function(){this.resetText(),this.resetPosition()},e.prototype.initCrossHair=function(){var t=this.getContainer(),r=this.get("crosshairTpl"),i=rt(r);t.appendChild(i),this.applyStyle(le,i),this.set("crosshairEl",i)},e.prototype.getTextPoint=function(){var t=this.getLocation(),r=t.start,i=t.end,a=this.get("text"),o=a.position,s=a.offset;return Zp(r,i,o,s)},e.prototype.resetText=function(){var t=this.get("text"),r=this.get("textEl");if(t){var i=t.content;if(!r){var a=this.getContainer(),o=(0,v.substitute)(this.get("textTpl"),t);r=rt(o),a.appendChild(r),this.applyStyle(Bt,r),this.set("textEl",r)}r.innerHTML=i}else r&&r.remove()},e.prototype.isVertical=function(t,r){return t.x===r.x},e.prototype.resetPosition=function(){var t=this.get("crosshairEl");t||(this.initCrossHair(),t=this.get("crosshairEl"));var r=this.get("start"),i=this.get("end"),a=Math.min(r.x,i.x),o=Math.min(r.y,i.y);this.isVertical(r,i)?ct(t,{width:"1px",height:Wa(Math.abs(i.y-r.y))}):ct(t,{height:"1px",width:Wa(Math.abs(i.x-r.x))}),ct(t,{top:Wa(o),left:Wa(a)}),this.alignText()},e.prototype.alignText=function(){var t=this.get("textEl");if(t){var r=this.get("text").align,i=t.clientWidth,a=this.getTextPoint();switch(r){case"center":a.x=a.x-i/2;break;case"right":a.x=a.x-i;case"left":break}ct(t,{top:Wa(a.y),left:Wa(a.x)})}},e.prototype.updateInner=function(t){(0,v.hasKey)(t,"text")&&this.resetText(),n.prototype.updateInner.call(this,t)},e}(Zr),xe=ue,ke=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:ce.lineColor}}}})},e.prototype.getLineType=function(){var t=this.get("line")||this.get("defaultCfg").line;return t.type},e.prototype.renderInner=function(t){this.drawGrid(t)},e.prototype.getAlternatePath=function(t,r){var i=this.getGridPath(t),a=r.slice(0).reverse(),o=this.getGridPath(a,!0),s=this.get("closed");return s?i=i.concat(o):(o[0][0]="L",i=i.concat(o),i.push(["Z"])),i},e.prototype.getPathStyle=function(){return this.get("line").style},e.prototype.drawGrid=function(t){var r=this,i=this.get("line"),a=this.get("items"),o=this.get("alternateColor"),s=null;(0,v.each)(a,function(l,u){var c=l.id||u;if(i){var f=r.getPathStyle();f=(0,v.isFunction)(f)?f(l,u,a):f;var h=r.getElementId("line-"+c),d=r.getGridPath(l.points);r.addShape(t,{type:"path",name:"grid-line",id:h,attrs:(0,v.mix)({path:d},f)})}if(o&&u>0){var g=r.getElementId("region-"+c),p=u%2==0;if((0,v.isString)(o))p&&r.drawAlternateRegion(g,t,s.points,l.points,o);else{var m=p?o[1]:o[0];r.drawAlternateRegion(g,t,s.points,l.points,m)}}s=l})},e.prototype.drawAlternateRegion=function(t,r,i,a,o){var s=this.getAlternatePath(i,a);this.addShape(r,{type:"path",id:t,name:"grid-region",attrs:{path:s,fill:o}})},e}(ca),Be=ke;function De(n,e,t,r){var i=t-n,a=r-e;return Math.sqrt(i*i+a*a)}var er=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{type:"circle",center:null,closed:!0})},e.prototype.getGridPath=function(t,r){var i=this.getLineType(),a=this.get("closed"),o=[];if(t.length)if(i==="circle"){var s=this.get("center"),l=t[0],u=De(s.x,s.y,l.x,l.y),c=r?0:1;a?(o.push(["M",s.x,s.y-u]),o.push(["A",u,u,0,0,c,s.x,s.y+u]),o.push(["A",u,u,0,0,c,s.x,s.y-u]),o.push(["Z"])):(0,v.each)(t,function(f,h){h===0?o.push(["M",f.x,f.y]):o.push(["A",u,u,0,0,c,f.x,f.y])})}else(0,v.each)(t,function(f,h){h===0?o.push(["M",f.x,f.y]):o.push(["L",f.x,f.y])}),a&&o.push(["Z"]);return o},e}(Be),Or=er,Jr=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{type:"line"})},e.prototype.getGridPath=function(t){var r=[];return(0,v.each)(t,function(i,a){a===0?r.push(["M",i.x,i.y]):r.push(["L",i.x,i.y])}),r},e}(Be),wr=Jr,Nr=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},e.prototype.getLayoutBBox=function(){var t=n.prototype.getLayoutBBox.call(this),r=this.get("maxWidth"),i=this.get("maxHeight"),a=t.width,o=t.height;return r&&(a=Math.min(a,r)),i&&(o=Math.min(o,i)),fo(t.minX,t.minY,a,o)},e.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetLocation()},e.prototype.resetLocation=function(){var t=this.get("x"),r=this.get("y"),i=this.get("offsetX"),a=this.get("offsetY");this.moveElementTo(this.get("group"),{x:t+i,y:r+a})},e.prototype.applyOffset=function(){this.resetLocation()},e.prototype.getDrawPoint=function(){return this.get("currentPoint")},e.prototype.setDrawPoint=function(t){return this.set("currentPoint",t)},e.prototype.renderInner=function(t){this.resetDraw(),this.get("title")&&this.drawTitle(t),this.drawLegendContent(t),this.get("background")&&this.drawBackground(t)},e.prototype.drawBackground=function(t){var r=this.get("background"),i=t.getBBox(),a=Bc(r.padding),o=(0,b.__assign)({x:0,y:0,width:i.width+a[1]+a[3],height:i.height+a[0]+a[2]},r.style),s=this.addShape(t,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:o});s.toBack()},e.prototype.drawTitle=function(t){var r=this.get("currentPoint"),i=this.get("title"),a=i.spacing,o=i.style,s=i.text,l=this.addShape(t,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:(0,b.__assign)({text:s,x:r.x,y:r.y},o)}),u=l.getBBox();this.set("currentPoint",{x:r.x,y:u.maxY+a})},e.prototype.resetDraw=function(){var t=this.get("background"),r={x:0,y:0};if(t){var i=Bc(t.padding);r.x=i[3],r.y=i[0]}this.set("currentPoint",r)},e}(ca),jr=Nr,yn={marker:{style:{inactiveFill:"#000",inactiveOpacity:.45,fill:"#000",opacity:1,size:12}},text:{style:{fill:"#ccc",fontSize:12}}},_i=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.currentPageIndex=1,t.totalPagesCnt=1,t.pageWidth=0,t.pageHeight=0,t.startX=0,t.startY=0,t.onNavigationBack=function(){var r=t.getElementByLocalId("item-group");if(t.currentPageIndex>1){t.currentPageIndex-=1,t.updateNavigation();var i=t.getCurrentNavigationMatrix();t.get("animate")?r.animate({matrix:i},100):r.attr({matrix:i})}},t.onNavigationAfter=function(){var r=t.getElementByLocalId("item-group");if(t.currentPageIndex<t.totalPagesCnt){t.currentPageIndex+=1,t.updateNavigation();var i=t.getCurrentNavigationMatrix();t.get("animate")?r.animate({matrix:i},100):r.attr({matrix:i})}},t}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{name:"legend",type:"category",itemSpacing:24,itemMarginBottom:8,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},items:[],itemStates:{},itemBackground:{},pageNavigator:{},defaultCfg:{title:{spacing:5,style:{fill:ce.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:ce.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},pageNavigator:yn,itemName:{spacing:16,style:{fill:ce.textColor,fontSize:12,textAlign:"start",textBaseline:"middle"}},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:{fill:ce.textColor,fontSize:12,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:ce.uncheckedColor},markerStyle:{fill:ce.uncheckedColor,stroke:ce.uncheckedColor}},inactive:{nameStyle:{fill:ce.uncheckedColor},markerStyle:{opacity:.2}}}}})},e.prototype.isList=function(){return!0},e.prototype.getItems=function(){return this.get("items")},e.prototype.setItems=function(t){this.update({items:t})},e.prototype.updateItem=function(t,r){(0,v.mix)(t,r),this.clear(),this.render()},e.prototype.clearItems=function(){var t=this.getElementByLocalId("item-group");t&&t.clear()},e.prototype.setItemState=function(t,r,i){t[r]=i;var a=this.getElementByLocalId("item-"+t.id);if(a){var o=this.getItems(),s=o.indexOf(t),l=this.createOffScreenGroup(),u=this.drawItem(t,s,this.getItemHeight(),l);this.updateElements(u,a),this.clearUpdateStatus(a)}},e.prototype.hasState=function(t,r){return!!t[r]},e.prototype.getItemStates=function(t){var r=this.get("itemStates"),i=[];return(0,v.each)(r,function(a,o){t[o]&&i.push(o)}),i},e.prototype.clearItemsState=function(t){var r=this,i=this.getItemsByState(t);(0,v.each)(i,function(a){r.setItemState(a,t,!1)})},e.prototype.getItemsByState=function(t){var r=this,i=this.getItems();return(0,v.filter)(i,function(a){return r.hasState(a,t)})},e.prototype.drawLegendContent=function(t){this.processItems(),this.drawItems(t)},e.prototype.processItems=function(){var t=this.get("items");(0,v.each)(t,function(r){r.id||(r.id=r.name)})},e.prototype.drawItems=function(t){var r=this,i=this.addGroup(t,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),a=this.addGroup(i,{id:this.getElementId("item-group"),name:"legend-item-group"}),o=this.getItemHeight(),s=this.get("itemWidth"),l=this.get("itemSpacing"),u=this.get("itemMarginBottom"),c=this.get("currentPoint"),f=c.x,h=c.y,d=this.get("layout"),g=this.get("items"),p=!1,m=0,_=this.get("maxWidth"),S=this.get("maxHeight");(0,v.each)(g,function(M,R){var F=r.drawItem(M,R,o,a),V=F.getBBox(),nt=s||V.width;nt>m&&(m=nt),d==="horizontal"?(_&&_<c.x+nt-f&&(p=!0,c.x=f,c.y+=o+u),r.moveElementTo(F,c),c.x+=nt+l):(S&&S<c.y+o+u-h&&(p=!0,c.x+=m+l,c.y=h,m=0),r.moveElementTo(F,c),c.y+=o+u)}),p&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=f,this.startY=h,this.adjustNavigation(t,a))},e.prototype.getItemHeight=function(){var t=this.get("itemHeight");if(!t){var r=this.get("itemName");r&&(t=r.style.fontSize)}return t},e.prototype.drawMarker=function(t,r,i,a){var o=(0,b.__assign)((0,b.__assign)((0,b.__assign)({x:0,y:a/2},r.style),{symbol:(0,v.get)(i.marker,"symbol","circle")}),(0,v.get)(i.marker,"style",{})),s=this.addShape(t,{type:"marker",id:this.getElementId("item-"+i.id+"-marker"),name:"legend-item-marker",attrs:o}),l=s.getBBox();s.attr("x",l.width/2);var u=s.attr(),c=u.stroke,f=u.fill;return c&&s.set("isStroke",!0),f&&s.set("isFill",!0),s},e.prototype.drawItemText=function(t,r,i,a,o,s,l){var u=i.formatter,c=(0,b.__assign)({x:s,y:o/2,text:u?u(a[r],a,l):a[r]},i.style);return this.addShape(t,{type:"text",id:this.getElementId("item-"+a.id+"-"+r),name:"legend-item-"+r,attrs:c})},e.prototype.drawItem=function(t,r,i,a){var o="item-"+t.id,s=this.addGroup(a,{name:"legend-item-container",id:this.getElementId("item-container-"+o),delegateObject:{item:t,index:r}}),l=this.addGroup(s,{name:"legend-item",id:this.getElementId(o),delegateObject:{item:t,index:r}}),u=this.get("marker"),c=this.get("itemName"),f=this.get("itemValue"),h=this.get("itemBackground"),d=this.getLimitItemWidth(),g=0;if(u){var p=this.drawMarker(l,u,t,i);g=p.getBBox().maxX+u.spacing}if(c){var m=this.drawItemText(l,"name",c,t,i,g,r);d&&Ne(!0,m,(0,v.clamp)(d-g,0,d)),g=m.getBBox().maxX+c.spacing}if(f){var _=this.drawItemText(l,"value",f,t,i,g,r);d&&(f.alignRight?(_.attr({textAlign:"right",x:d}),Ne(!0,_,(0,v.clamp)(d-g,0,d),"head")):Ne(!0,_,(0,v.clamp)(d-g,0,d)))}if(h){var S=l.getBBox(),M=this.addShape(l,{type:"rect",name:"legend-item-background",id:this.getElementId(o+"-background"),attrs:(0,b.__assign)({x:0,y:0,width:S.width,height:i},h.style)});M.toBack()}return this.applyItemStates(t,l),l},e.prototype.adjustNavigation=function(t,r){var i=this,a=this.startX,o=this.startY,s=this.get("layout"),l=r.findAll(function(at){return at.get("name")==="legend-item"}),u=this.get("maxWidth"),c=this.get("maxHeight"),f=this.get("itemWidth"),h=this.get("itemSpacing"),d=this.getItemHeight(),g=(0,v.deepMix)({},yn,this.get("pageNavigator")),p=this.drawNavigation(t,s,"00/00",g),m=p.getBBox(),_={x:a,y:o},S=1,M=0,R=0,F=0;if(s==="horizontal")this.pageHeight=d,(0,v.each)(l,function(at){var xt=at.getBBox(),gt=f||xt.width;(M&&M<_.x+gt+h||u<_.x+gt+h+m.width)&&(S===1&&(M=_.x+h,i.pageWidth=M,i.moveElementTo(p,{x:u-h-m.width-m.minX,y:_.y+d/2-m.height/2-m.minY})),S+=1,_.x=a,_.y+=d),i.moveElementTo(at,_),at.getParent().setClip({type:"rect",attrs:{x:_.x,y:_.y,width:gt+h,height:d}}),_.x+=gt+h});else{var V=this.get("itemMarginBottom");(0,v.each)(l,function(at){var xt=at.getBBox();xt.width>R&&(R=xt.width)}),F=R,R+=h,u&&(R=Math.min(u,R),F=Math.min(u,F)),this.pageWidth=R,this.pageHeight=c-Math.max(m.height,d+V);var nt=Math.floor(this.pageHeight/(d+V));(0,v.each)(l,function(at,xt){xt!==0&&xt%nt==0&&(S+=1,_.x+=R,_.y=o),i.moveElementTo(at,_),at.getParent().setClip({type:"rect",attrs:{x:_.x,y:_.y,width:R,height:d}}),_.y+=d+V}),this.totalPagesCnt=S,this.moveElementTo(p,{x:a+F/2-m.width/2-m.minX,y:c-m.height-m.minY})}this.pageHeight&&this.pageWidth&&r.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),this.totalPagesCnt=S,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(p),r.attr("matrix",this.getCurrentNavigationMatrix())},e.prototype.drawNavigation=function(t,r,i,a){var o={x:0,y:0},s=this.addGroup(t,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),l=(0,v.get)(a.marker,"style",{}),u=l.size,c=u===void 0?12:u,f=(0,b.__rest)(l,["size"]),h=this.drawArrow(s,o,"navigation-arrow-left",r==="horizontal"?"up":"left",c,f);h.on("click",this.onNavigationBack);var d=h.getBBox();o.x+=d.width+2;var g=this.addShape(s,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:(0,b.__assign)({x:o.x,y:o.y+c/2,text:i,textBaseline:"middle"},(0,v.get)(a.text,"style"))}),p=g.getBBox();o.x+=p.width+2;var m=this.drawArrow(s,o,"navigation-arrow-right",r==="horizontal"?"down":"right",c,f);return m.on("click",this.onNavigationAfter),s},e.prototype.updateNavigation=function(t){var r=(0,v.deepMix)({},yn,this.get("pageNavigator")),i=r.marker.style,a=i.fill,o=i.opacity,s=i.inactiveFill,l=i.inactiveOpacity,u=this.currentPageIndex+"/"+this.totalPagesCnt,c=t?t.getChildren()[1]:this.getElementByLocalId("navigation-text"),f=t?t.findById(this.getElementId("navigation-arrow-left")):this.getElementByLocalId("navigation-arrow-left"),h=t?t.findById(this.getElementId("navigation-arrow-right")):this.getElementByLocalId("navigation-arrow-right"),d=c.getBBox();c.attr("text",u);var g=c.getBBox();c.attr("x",c.attr("x")-(g.width-d.width)/2),f.attr("opacity",this.currentPageIndex===1?l:o),f.attr("fill",this.currentPageIndex===1?s:a),f.attr("cursor",this.currentPageIndex===1?"not-allowed":"pointer"),h.attr("opacity",this.currentPageIndex===this.totalPagesCnt?l:o),h.attr("fill",this.currentPageIndex===this.totalPagesCnt?s:a),h.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer")},e.prototype.drawArrow=function(t,r,i,a,o,s){var l=r.x,u=r.y,c={right:90*Math.PI/180,left:(360-90)*Math.PI/180,up:0,down:180*Math.PI/180},f=this.addShape(t,{type:"path",id:this.getElementId(i),name:i,attrs:(0,b.__assign)({path:[["M",l+o/2,u],["L",l,u+o],["L",l+o,u+o],["Z"]],cursor:"pointer"},s)});return f.attr("matrix",gu({x:l+o/2,y:u+o/2},c[a])),f},e.prototype.getCurrentNavigationMatrix=function(){var t=this,r=t.currentPageIndex,i=t.pageWidth,a=t.pageHeight,o=this.get("layout"),s=o==="horizontal"?{x:0,y:a*(1-r)}:{x:i*(1-r),y:0};return Lv(s)},e.prototype.applyItemStates=function(t,r){var i=this.getItemStates(t),a=i.length>0;if(a){var o=r.getChildren(),s=this.get("itemStates");(0,v.each)(o,function(l){var u=l.get("name"),c=u.split("-")[2],f=Ur(t,c,s);f&&(l.attr(f),c==="marker"&&!(l.get("isStroke")&&l.get("isFill"))&&(l.get("isStroke")&&l.attr("fill",null),l.get("isFill")&&l.attr("stroke",null)))})}},e.prototype.getLimitItemWidth=function(){var t=this.get("itemWidth"),r=this.get("maxItemWidth");return r?t&&(r=t<=r?t:r):t&&(r=t),r},e}(jr),Ta=_i,Bv=1.4,to=.4,Qp=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:ce.textColor,textBaseline:"middle",fontFamily:ce.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:ce.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},e.prototype.isSlider=function(){return!0},e.prototype.getValue=function(){return this.getCurrentValue()},e.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},e.prototype.setRange=function(t,r){this.update({min:t,max:r})},e.prototype.setValue=function(t){var r=this.getValue();this.set("value",t);var i=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(i),this.delegateEmit("valuechanged",{originValue:r,value:t})},e.prototype.initEvent=function(){var t=this.get("group");this.bindSliderEvent(t),this.bindRailEvent(t),this.bindTrackEvent(t)},e.prototype.drawLegendContent=function(t){this.drawRail(t),this.drawLabels(t),this.fixedElements(t),this.resetTrack(t),this.resetTrackClip(t),this.get("slidable")&&this.resetHandlers(t)},e.prototype.bindSliderEvent=function(t){this.bindHandlersEvent(t)},e.prototype.bindHandlersEvent=function(t){var r=this;t.on("legend-handler-min:drag",function(i){var a=r.getValueByCanvasPoint(i.x,i.y),o=r.getCurrentValue(),s=o[1];s<a&&(s=a),r.setValue([a,s])}),t.on("legend-handler-max:drag",function(i){var a=r.getValueByCanvasPoint(i.x,i.y),o=r.getCurrentValue(),s=o[0];s>a&&(s=a),r.setValue([s,a])})},e.prototype.bindRailEvent=function(t){},e.prototype.bindTrackEvent=function(t){var r=this,i=null;t.on("legend-track:dragstart",function(a){i={x:a.x,y:a.y}}),t.on("legend-track:drag",function(a){if(!!i){var o=r.getValueByCanvasPoint(i.x,i.y),s=r.getValueByCanvasPoint(a.x,a.y),l=r.getCurrentValue(),u=l[1]-l[0],c=r.getRange(),f=s-o;f<0?l[0]+f>c.min?r.setValue([l[0]+f,l[1]+f]):r.setValue([c.min,c.min+u]):f>0&&(f>0&&l[1]+f<c.max?r.setValue([l[0]+f,l[1]+f]):r.setValue([c.max-u,c.max])),i={x:a.x,y:a.y}}}),t.on("legend-track:dragend",function(a){i=null})},e.prototype.drawLabels=function(t){this.drawLabel("min",t),this.drawLabel("max",t)},e.prototype.drawLabel=function(t,r){var i=this.get("label"),a=i.style,o=i.align,s=i.formatter,l=this.get(t),u=this.getLabelAlignAttrs(t,o),c="label-"+t;this.addShape(r,{type:"text",id:this.getElementId(c),name:"legend-label-"+t,attrs:(0,b.__assign)((0,b.__assign)({x:0,y:0,text:(0,v.isFunction)(s)?s(l):l},a),u)})},e.prototype.getLabelAlignAttrs=function(t,r){var i=this.isVertical(),a="center",o="middle";return i?(a="start",r!=="rail"?t==="min"?o="top":o="bottom":o="top"):r!=="rail"?(o="top",t==="min"?a="start":a="end"):(a="start",o="middle"),{textAlign:a,textBaseline:o}},e.prototype.getRailPath=function(t,r,i,a){var o=this.get("rail"),s=o.size,l=o.defaultLength,u=o.type,c=this.isVertical(),f=l,h=i,d=a;h||(h=c?s:f),d||(d=c?f:s);var g=[];return u==="color"?(g.push(["M",t,r]),g.push(["L",t+h,r]),g.push(["L",t+h,r+d]),g.push(["L",t,r+d]),g.push(["Z"])):(g.push(["M",t+h,r]),g.push(["L",t+h,r+d]),g.push(["L",t,r+d]),g.push(["Z"])),g},e.prototype.drawRail=function(t){var r=this.get("rail"),i=r.style;this.addShape(t,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:(0,b.__assign)({path:this.getRailPath(0,0)},i)})},e.prototype.getTrackColor=function(t){var r=t.length;if(!r)return null;if(r===1)return t[0];var i;this.isVertical()?i="l(90)":i="l(0)";for(var a=0;a<r;a++){var o=a/(r-1);i+=" "+o+":"+t[a]}return i},e.prototype.getTrackPath=function(t){var r=this.getRailShape(t),i=r.attr("path");return(0,v.clone)(i)},e.prototype.getClipTrackAttrs=function(t){var r=this.getCurrentValue(),i=r[0],a=r[1],o=this.getRailBBox(t),s=this.getPointByValue(i,t),l=this.getPointByValue(a,t),u=this.isVertical(),c,f,h,d;return u?(c=o.minX,f=s.y,h=o.width,d=l.y-s.y):(c=s.x,f=o.minY,h=l.x-s.x,d=o.height),{x:c,y:f,width:h,height:d}},e.prototype.getTrackAttrs=function(t){var r=this.get("track"),i=this.get("colors"),a=this.getTrackPath(t);return(0,v.mix)({path:a,fill:this.getTrackColor(i)},r.style)},e.prototype.resetTrackClip=function(t){var r=t||this.get("group"),i=this.getElementId("track"),a=r.findById(i),o=a.getClip(),s=this.getClipTrackAttrs(t);o?o.attr(s):a.setClip({type:"rect",attrs:s})},e.prototype.resetTrack=function(t){var r=this.getElementId("track"),i=t.findById(r),a=this.getTrackAttrs(t);i?i.attr(a):this.addShape(t,{type:"path",id:r,draggable:this.get("slidable"),name:"legend-track",attrs:a})},e.prototype.getPointByValue=function(t,r){var i=this.getRange(),a=i.min,o=i.max,s=(t-a)/(o-a),l=this.getRailBBox(r),u=this.isVertical(),c={x:0,y:0};return u?(c.x=l.minX+l.width/2,c.y=Rs(l.minY,l.maxY,s)):(c.x=Rs(l.minX,l.maxX,s),c.y=l.minY+l.height/2),c},e.prototype.getRailShape=function(t){var r=t||this.get("group");return r.findById(this.getElementId("rail"))},e.prototype.getRailBBox=function(t){var r=this.getRailShape(t),i=r.getBBox();return i},e.prototype.getRailCanvasBBox=function(){var t=this.get("group"),r=t.findById(this.getElementId("rail")),i=r.getCanvasBBox();return i},e.prototype.isVertical=function(){return this.get("layout")==="vertical"},e.prototype.getValueByCanvasPoint=function(t,r){var i=this.getRange(),a=i.min,o=i.max,s=this.getRailCanvasBBox(),l=this.isVertical(),u=this.get("step"),c;l?c=(r-s.minY)/s.height:c=(t-s.minX)/s.width;var f=Rs(a,o,c);if(u){var h=Math.round((f-a)/u);f=a+h*u}return f>o&&(f=o),f<a&&(f=a),f},e.prototype.getCurrentValue=function(){var t=this.get("value");return t||(t=[this.get("min"),this.get("max")]),t},e.prototype.resetHandlers=function(t){var r=this.getCurrentValue(),i=r[0],a=r[1];this.resetHandler(t,"min",i),this.resetHandler(t,"max",a)},e.prototype.getHandlerPath=function(t,r){var i=this.isVertical(),a=[],o=t.size,s=r.x,l=r.y,u=o*Bv,c=o/2,f=o/6;if(i){var h=s+u*to;a.push(["M",s,l]),a.push(["L",h,l+c]),a.push(["L",s+u,l+c]),a.push(["L",s+u,l-c]),a.push(["L",h,l-c]),a.push(["Z"]),a.push(["M",h,l+f]),a.push(["L",s+u-2,l+f]),a.push(["M",h,l-f]),a.push(["L",s+u-2,l-f])}else{var d=l+u*to;a.push(["M",s,l]),a.push(["L",s-c,d]),a.push(["L",s-c,l+u]),a.push(["L",s+c,l+u]),a.push(["L",s+c,d]),a.push(["Z"]),a.push(["M",s-f,d]),a.push(["L",s-f,l+u-2]),a.push(["M",s+f,d]),a.push(["L",s+f,l+u-2])}return a},e.prototype.resetHandler=function(t,r,i){var a=this.getPointByValue(i,t),o=this.get("handler"),s=this.getHandlerPath(o,a),l=this.getElementId("handler-"+r),u=t.findById(l),c=this.isVertical();u?u.attr("path",s):this.addShape(t,{type:"path",name:"legend-handler-"+r,draggable:!0,id:l,attrs:(0,b.__assign)((0,b.__assign)({path:s},o.style),{cursor:c?"ns-resize":"ew-resize"})})},e.prototype.fixedElements=function(t){var r=t.findById(this.getElementId("rail")),i=t.findById(this.getElementId("label-min")),a=t.findById(this.getElementId("label-max")),o=this.getDrawPoint();this.isVertical()?this.fixedVertail(i,a,r,o):this.fixedHorizontal(i,a,r,o)},e.prototype.fitRailLength=function(t,r,i,a){var o=this.isVertical(),s=o?"height":"width",l=this.get("label"),u=l.align,c=l.spacing,f=this.get("max"+(0,v.upperFirst)(s));if(f){var h=u==="rail"?i[s]+t[s]+r[s]+c*2:i[s],d=h-f;d>0&&this.changeRailLength(a,s,i[s]-d)}},e.prototype.changeRailLength=function(t,r,i){var a=t.getBBox(),o;r==="height"?o=this.getRailPath(a.x,a.y,a.width,i):o=this.getRailPath(a.x,a.y,i,a.height),t.attr("path",o)},e.prototype.changeRailPosition=function(t,r,i){var a=t.getBBox(),o=this.getRailPath(r,i,a.width,a.height);t.attr("path",o)},e.prototype.fixedHorizontal=function(t,r,i,a){var o=this.get("label"),s=o.align,l=o.spacing,u=i.getBBox(),c=t.getBBox(),f=r.getBBox(),h=u.height;this.fitRailLength(c,f,u,i),u=i.getBBox(),s==="rail"?(t.attr({x:a.x,y:a.y+h/2}),this.changeRailPosition(i,a.x+c.width+l,a.y),r.attr({x:a.x+c.width+u.width+l*2,y:a.y+h/2})):s==="top"?(t.attr({x:a.x,y:a.y}),r.attr({x:a.x+u.width,y:a.y}),this.changeRailPosition(i,a.x,a.y+c.height+l)):(this.changeRailPosition(i,a.x,a.y),t.attr({x:a.x,y:a.y+u.height+l}),r.attr({x:a.x+u.width,y:a.y+u.height+l}))},e.prototype.fixedVertail=function(t,r,i,a){var o=this.get("label"),s=o.align,l=o.spacing,u=i.getBBox(),c=t.getBBox(),f=r.getBBox();if(this.fitRailLength(c,f,u,i),u=i.getBBox(),s==="rail")t.attr({x:a.x,y:a.y}),this.changeRailPosition(i,a.x,a.y+c.height+l),r.attr({x:a.x,y:a.y+c.height+u.height+l*2});else if(s==="right")t.attr({x:a.x+u.width+l,y:a.y}),this.changeRailPosition(i,a.x,a.y),r.attr({x:a.x+u.width+l,y:a.y+u.height});else{var h=Math.max(c.width,f.width);t.attr({x:a.x,y:a.y}),this.changeRailPosition(i,a.x+h+l,a.y),r.attr({x:a.x,y:a.y+u.height})}},e}(jr),wo=Qp,wl="g2-tooltip",Sh="g2-tooltip-title",Fv="g2-tooltip-list",Jp="g2-tooltip-list-item",qp="g2-tooltip-marker",t0="g2-tooltip-value",ES="g2-tooltip-name",zx="g2-tooltip-crosshair-x",Ux="g2-tooltip-crosshair-y",Gs,gk=(Gs={},Gs[""+wl]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:ce.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},Gs[""+Sh]={marginBottom:"4px"},Gs[""+Fv]={margin:"0px",listStyleType:"none",padding:"0px"},Gs[""+Jp]={listStyleType:"none",marginBottom:"4px"},Gs[""+qp]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},Gs[""+t0]={display:"inline-block",float:"right",marginLeft:"30px"},Gs[""+zx]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},Gs[""+Ux]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},Gs);function pk(n,e,t,r,i){var a={left:n<i.x,right:n+t>i.x+i.width,top:e<i.y,bottom:e+r>i.y+i.height};return a}function yk(n,e,t,r,i,a){var o=n,s=e;switch(a){case"left":o=n-r-t,s=e-i/2;break;case"right":o=n+t,s=e-i/2;break;case"top":o=n-r/2,s=e-i-t;break;case"bottom":o=n-r/2,s=e+t;break;default:o=n+t,s=e-i-t;break}return{x:o,y:s}}function mk(n,e,t,r,i,a,o){var s=yk(n,e,t,r,i,a);if(o){var l=pk(s.x,s.y,r,i,o);a==="auto"?(l.right&&(s.x=Math.max(0,n-r-t)),l.top&&(s.y=Math.max(0,e-i-t))):a==="top"||a==="bottom"?(l.left&&(s.x=o.x),l.right&&(s.x=o.x+o.width-r),a==="top"&&l.top&&(s.y=e+t),a==="bottom"&&l.bottom&&(s.y=e-i-t)):(l.top&&(s.y=o.y),l.bottom&&(s.y=o.y+o.height-i),a==="left"&&l.left&&(s.x=n+t),a==="right"&&l.right&&(s.x=n-r-t))}return s}function xk(n,e){var t=!1;return(0,v.each)(e,function(r){if((0,v.hasKey)(n,r))return t=!0,!1}),t}var bk=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="'+wl+'"><div class="'+Sh+'"></div><ul class="'+Fv+'"></ul></div>',itemTpl:'<li class="'+Jp+`" data-index={index}>
          <span class="`+qp+`" style="background:{color}"></span>
          <span class="`+ES+`">{name}</span>:
          <span class="`+t0+`">{value}</span>
        </li>`,xCrosshairTpl:'<div class="'+zx+'"></div>',yCrosshairTpl:'<div class="'+Ux+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:wl,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:gk})},e.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},e.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},e.prototype.show=function(){var t=this.getContainer();!t||this.destroyed||(this.set("visible",!0),ct(t,{visibility:"visible"}),this.setCrossHairsVisible(!0))},e.prototype.hide=function(){var t=this.getContainer();!t||this.destroyed||(this.set("visible",!1),ct(t,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},e.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},e.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetPosition()},e.prototype.setCrossHairsVisible=function(t){var r=t?"":"none",i=this.get("xCrosshairDom"),a=this.get("yCrosshairDom");i&&ct(i,{display:r}),a&&ct(a,{display:r})},e.prototype.initContainer=function(){if(n.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var t=this.getHtmlContentNode();this.get("parent").appendChild(t),this.set("container",t),this.resetStyles(),this.applyStyles()}},e.prototype.updateInner=function(t){this.get("customContent")?this.renderCustomContent():(xk(t,["title","showTitle"])&&this.resetTitle(),(0,v.hasKey)(t,"items")&&this.renderItems()),n.prototype.updateInner.call(this,t)},e.prototype.initDom=function(){this.cacheDoms()},e.prototype.removeDom=function(){n.prototype.removeDom.call(this),this.clearCrosshairs()},e.prototype.resetPosition=function(){var t=this.get("x"),r=this.get("y"),i=this.get("offset"),a=this.getOffset(),o=a.offsetX,s=a.offsetY,l=this.get("position"),u=this.get("region"),c=this.getContainer(),f=this.getBBox(),h=f.width,d=f.height,g;u&&(g=pu(u));var p=mk(t,r,i,h,d,l,g);ct(c,{left:Wa(p.x+o),top:Wa(p.y+s)}),this.resetCrosshairs()},e.prototype.renderCustomContent=function(){var t=this.getHtmlContentNode(),r=this.get("parent"),i=this.get("container");i&&i.parentNode===r?r.replaceChild(t,i):r.appendChild(t),this.set("container",t),this.resetStyles(),this.applyStyles()},e.prototype.getHtmlContentNode=function(){var t,r=this.get("customContent");if(r){var i=r(this.get("title"),this.get("items"));(0,v.isElement)(i)?t=i:t=rt(i)}return t},e.prototype.cacheDoms=function(){var t=this.getContainer(),r=t.getElementsByClassName(Sh)[0],i=t.getElementsByClassName(Fv)[0];this.set("titleDom",r),this.set("listDom",i)},e.prototype.resetTitle=function(){var t=this.get("title"),r=this.get("showTitle");r&&t?this.setTitle(t):this.setTitle("")},e.prototype.setTitle=function(t){var r=this.get("titleDom");r&&(r.innerText=t)},e.prototype.resetCrosshairs=function(){var t=this.get("crosshairsRegion"),r=this.get("crosshairs");if(!t||!r)this.clearCrosshairs();else{var i=pu(t),a=this.get("xCrosshairDom"),o=this.get("yCrosshairDom");r==="x"?(this.resetCrosshair("x",i),o&&(o.remove(),this.set("yCrosshairDom",null))):r==="y"?(this.resetCrosshair("y",i),a&&(a.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",i),this.resetCrosshair("y",i)),this.setCrossHairsVisible(this.get("visible"))}},e.prototype.resetCrosshair=function(t,r){var i=this.checkCrosshair(t),a=this.get(t);t==="x"?ct(i,{left:Wa(a),top:Wa(r.y),height:Wa(r.height)}):ct(i,{top:Wa(a),left:Wa(r.x),width:Wa(r.width)})},e.prototype.checkCrosshair=function(t){var r=t+"CrosshairDom",i=t+"CrosshairTpl",a="CROSSHAIR_"+t.toUpperCase(),o=I[a],s=this.get(r),l=this.get("parent");return s||(s=rt(this.get(i)),this.applyStyle(o,s),l.appendChild(s),this.set(r,s)),s},e.prototype.renderItems=function(){this.clearItemDoms();var t=this.get("items"),r=this.get("itemTpl"),i=this.get("listDom");i&&((0,v.each)(t,function(a){var o=xo.toCSSGradient(a.color),s=(0,b.__assign)((0,b.__assign)({},a),{color:o}),l=(0,v.substitute)(r,s),u=rt(l);i.appendChild(u)}),this.applyChildrenStyles(i,this.get("domStyles")))},e.prototype.clearItemDoms=function(){this.get("listDom")&&Nv(this.get("listDom"))},e.prototype.clearCrosshairs=function(){var t=this.get("xCrosshairDom"),r=this.get("yCrosshairDom");t&&t.remove(),r&&r.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},e}(Zr),_k=bk,Sk={opacity:0},Ek={stroke:"#C5C5C5",strokeOpacity:.85},wk={fill:"#CACED4",opacity:.85};function Ck(n){return(0,v.map)(n,function(e,t){var r=t===0?"M":"L",i=e[0],a=e[1];return[r,i,a]})}function wS(n){return Ck(n)}function Mk(n){if(n.length<=2)return wS(n);var e=[];(0,v.each)(n,function(o){(0,v.isEqual)(o,e.slice(e.length-2))||e.push(o[0],o[1])});var t=(0,Ma.e9)(e,!1),r=(0,v.head)(n),i=r[0],a=r[1];return t.unshift(["M",i,a]),t}function Ak(n,e,t,r){r===void 0&&(r=!0);var i=new ls({values:n}),a=new ns({values:(0,v.map)(n,function(s,l){return l})}),o=(0,v.map)(n,function(s,l){return[a.scale(l)*e,t-i.scale(s)*t]});return r?Mk(o):wS(o)}function Tk(n,e){var t=new ls({values:n}),r=Math.max(0,t.min);return e-t.scale(r)*e}function Ik(n,e,t,r){var i=(0,b.__spreadArrays)(n),a=Tk(r,t);return i.push(["L",e,a]),i.push(["L",0,a]),i.push(["Z"]),i}var Ok=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:Sk,lineStyle:Ek,areaStyle:wk})},e.prototype.renderInner=function(t){var r=this.cfg,i=r.width,a=r.height,o=r.data,s=r.smooth,l=r.isArea,u=r.backgroundStyle,c=r.lineStyle,f=r.areaStyle;this.addShape(t,{id:this.getElementId("background"),type:"rect",attrs:(0,b.__assign)({x:0,y:0,width:i,height:a},u)});var h=Ak(o,i,a,s);if(this.addShape(t,{id:this.getElementId("line"),type:"path",attrs:(0,b.__assign)({path:h},c)}),l){var d=Ik(h,i,a,o);this.addShape(t,{id:this.getElementId("area"),type:"path",attrs:(0,b.__assign)({path:d},f)})}},e.prototype.applyOffset=function(){var t=this.cfg,r=t.x,i=t.y;this.moveElementTo(this.get("group"),{x:r,y:i})},e}(ca),Jat=null,CS={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},MS=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{name:"handler",x:0,y:0,width:10,height:24,style:CS})},e.prototype.renderInner=function(t){var r=this.cfg,i=r.width,a=r.height,o=r.style,s=o.fill,l=o.stroke,u=o.radius,c=o.opacity,f=o.cursor;this.addShape(t,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:i,height:a,fill:s,stroke:l,radius:u,opacity:c,cursor:f}});var h=1/3*i,d=2/3*i,g=1/4*a,p=3/4*a;this.addShape(t,{id:this.getElementId("line-left"),type:"line",attrs:{x1:h,y1:g,x2:h,y2:p,stroke:l,cursor:f}}),this.addShape(t,{id:this.getElementId("line-right"),type:"line",attrs:{x1:d,y1:g,x2:d,y2:p,stroke:l,cursor:f}})},e.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},e.prototype.initEvent=function(){this.bindEvents()},e.prototype.bindEvents=function(){var t=this;this.get("group").on("mouseenter",function(){var r=t.get("style").highLightFill;t.getElementByLocalId("background").attr("fill",r),t.draw()}),this.get("group").on("mouseleave",function(){var r=t.get("style").fill;t.getElementByLocalId("background").attr("fill",r),t.draw()})},e.prototype.draw=function(){var t=this.get("container").get("canvas");t&&t.draw()},e}(ca),qat=null,Pk={fill:"#416180",opacity:.05},Dk={fill:"#5B8FF9",opacity:.15,cursor:"move"},e0=10,Lk={width:e0,height:24},Rk={textBaseline:"middle",fill:"#000",opacity:.45},Nk="sliderchange",kk=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.onMouseDown=function(r){return function(i){t.currentTarget=r;var a=i.originalEvent;a.stopPropagation(),a.preventDefault(),t.prevX=(0,v.get)(a,"touches.0.pageX",a.pageX),t.prevY=(0,v.get)(a,"touches.0.pageY",a.pageY);var o=t.getContainerDOM();o.addEventListener("mousemove",t.onMouseMove),o.addEventListener("mouseup",t.onMouseUp),o.addEventListener("mouseleave",t.onMouseUp),o.addEventListener("touchmove",t.onMouseMove),o.addEventListener("touchend",t.onMouseUp),o.addEventListener("touchcancel",t.onMouseUp)}},t.onMouseMove=function(r){var i=t.cfg.width,a=[t.get("start"),t.get("end")];r.stopPropagation(),r.preventDefault();var o=(0,v.get)(r,"touches.0.pageX",r.pageX),s=(0,v.get)(r,"touches.0.pageY",r.pageY),l=o-t.prevX,u=t.adjustOffsetRange(l/i);t.updateStartEnd(u),t.updateUI(t.getElementByLocalId("foreground"),t.getElementByLocalId("minText"),t.getElementByLocalId("maxText")),t.prevX=o,t.prevY=s,t.draw(),t.emit(Nk,[t.get("start"),t.get("end")].sort()),t.delegateEmit("valuechanged",{originValue:a,value:[t.get("start"),t.get("end")]})},t.onMouseUp=function(){t.currentTarget&&(t.currentTarget=void 0);var r=t.getContainerDOM();r&&(r.removeEventListener("mousemove",t.onMouseMove),r.removeEventListener("mouseup",t.onMouseUp),r.removeEventListener("mouseleave",t.onMouseUp),r.removeEventListener("touchmove",t.onMouseMove),r.removeEventListener("touchend",t.onMouseUp),r.removeEventListener("touchcancel",t.onMouseUp))},t}return e.prototype.setRange=function(t,r){this.set("minLimit",t),this.set("maxLimit",r);var i=this.get("start"),a=this.get("end"),o=(0,v.clamp)(i,t,r),s=(0,v.clamp)(a,t,r);!this.get("isInit")&&(i!==o||a!==s)&&this.setValue([o,s])},e.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},e.prototype.setValue=function(t){var r=this.getRange();if((0,v.isArray)(t)&&t.length===2){var i=[this.get("start"),this.get("end")];this.update({start:(0,v.clamp)(t[0],r.min,r.max),end:(0,v.clamp)(t[1],r.min,r.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:i,value:t})}},e.prototype.getValue=function(){return[this.get("start"),this.get("end")]},e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:Pk,foregroundStyle:Dk,handlerStyle:Lk,textStyle:Rk}})},e.prototype.update=function(t){var r=t.start,i=t.end,a=(0,b.__assign)({},t);(0,v.isNil)(r)||(a.start=(0,v.clamp)(r,0,1)),(0,v.isNil)(i)||(a.end=(0,v.clamp)(i,0,1)),n.prototype.update.call(this,a),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler")),this.trend=this.getChildComponentById(this.getElementId("trend"))},e.prototype.init=function(){this.set("start",(0,v.clamp)(this.get("start"),0,1)),this.set("end",(0,v.clamp)(this.get("end"),0,1)),n.prototype.init.call(this)},e.prototype.render=function(){n.prototype.render.call(this),this.updateUI(this.getElementByLocalId("foreground"),this.getElementByLocalId("minText"),this.getElementByLocalId("maxText"))},e.prototype.renderInner=function(t){var r=this.cfg,i=r.start,a=r.end,o=r.width,s=r.height,l=r.trendCfg,u=l===void 0?{}:l,c=r.minText,f=r.maxText,h=r.backgroundStyle,d=h===void 0?{}:h,g=r.foregroundStyle,p=g===void 0?{}:g,m=r.textStyle,_=m===void 0?{}:m,S=(0,v.deepMix)({},CS,this.cfg.handlerStyle),M=i*o,R=a*o;(0,v.size)((0,v.get)(u,"data"))&&(this.trend=this.addComponent(t,(0,b.__assign)({component:Ok,id:this.getElementId("trend"),x:0,y:0,width:o,height:s},u))),this.addShape(t,{id:this.getElementId("background"),type:"rect",attrs:(0,b.__assign)({x:0,y:0,width:o,height:s},d)});var F=this.addShape(t,{id:this.getElementId("minText"),type:"text",attrs:(0,b.__assign)({y:s/2,textAlign:"right",text:c,silent:!1},_)}),V=this.addShape(t,{id:this.getElementId("maxText"),type:"text",attrs:(0,b.__assign)({y:s/2,textAlign:"left",text:f,silent:!1},_)}),nt=this.addShape(t,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:(0,b.__assign)({y:0,height:s},p)}),at=(0,v.get)(S,"width",e0),xt=(0,v.get)(S,"height",24);this.minHandler=this.addComponent(t,{component:MS,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(s-xt)/2,width:at,height:xt,cursor:"ew-resize",style:S}),this.maxHandler=this.addComponent(t,{component:MS,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(s-xt)/2,width:at,height:xt,cursor:"ew-resize",style:S})},e.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},e.prototype.initEvent=function(){this.bindEvents()},e.prototype.updateUI=function(t,r,i){var a=this.cfg,o=a.start,s=a.end,l=a.width,u=a.minText,c=a.maxText,f=a.handlerStyle,h=a.height,d=o*l,g=s*l;this.trend&&(this.trend.update({width:l,height:h}),this.get("updateAutoRender")||this.trend.render()),t.attr("x",d),t.attr("width",g-d);var p=(0,v.get)(f,"width",e0);r.attr("text",u),i.attr("text",c);var m=this._dodgeText([d,g],r,i),_=m[0],S=m[1];this.minHandler&&(this.minHandler.update({x:d-p/2}),this.get("updateAutoRender")||this.minHandler.render()),(0,v.each)(_,function(M,R){return r.attr(R,M)}),this.maxHandler&&(this.maxHandler.update({x:g-p/2}),this.get("updateAutoRender")||this.maxHandler.render()),(0,v.each)(S,function(M,R){return i.attr(R,M)})},e.prototype.bindEvents=function(){var t=this.get("group");t.on("handler-min:mousedown",this.onMouseDown("minHandler")),t.on("handler-min:touchstart",this.onMouseDown("minHandler")),t.on("handler-max:mousedown",this.onMouseDown("maxHandler")),t.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var r=t.findById(this.getElementId("foreground"));r.on("mousedown",this.onMouseDown("foreground")),r.on("touchstart",this.onMouseDown("foreground"))},e.prototype.adjustOffsetRange=function(t){var r=this.cfg,i=r.start,a=r.end;switch(this.currentTarget){case"minHandler":{var o=0-i,s=1-i;return Math.min(s,Math.max(o,t))}case"maxHandler":{var o=0-a,s=1-a;return Math.min(s,Math.max(o,t))}case"foreground":{var o=0-i,s=1-a;return Math.min(s,Math.max(o,t))}}},e.prototype.updateStartEnd=function(t){var r=this.cfg,i=r.start,a=r.end;switch(this.currentTarget){case"minHandler":i+=t;break;case"maxHandler":a+=t;break;case"foreground":i+=t,a+=t;break}this.set("start",i),this.set("end",a)},e.prototype._dodgeText=function(t,r,i){var a,o,s=this.cfg,l=s.handlerStyle,u=s.width,c=2,f=(0,v.get)(l,"width",e0),h=t[0],d=t[1],g=!1;h>d&&(a=[d,h],h=a[0],d=a[1],o=[i,r],r=o[0],i=o[1],g=!0);var p=r.getBBox(),m=i.getBBox(),_=p.width>h-c?{x:h+f/2+c,textAlign:"left"}:{x:h-f/2-c,textAlign:"right"},S=m.width>u-d-c?{x:d-f/2-c,textAlign:"right"}:{x:d+f/2+c,textAlign:"left"};return g?[S,_]:[_,S]},e.prototype.draw=function(){var t=this.get("container"),r=t&&t.get("canvas");r&&r.draw()},e.prototype.getContainerDOM=function(){var t=this.get("container"),r=t&&t.get("canvas");return r&&r.get("container")},e}(ca),tot=null;function fs(n,e,t){if(n){if(typeof n.addEventListener=="function")return n.addEventListener(e,t,!1),{remove:function(){n.removeEventListener(e,t,!1)}};if(typeof n.attachEvent=="function")return n.attachEvent("on"+e,t),{remove:function(){n.detachEvent("on"+e,t)}}}}var Bk={trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},Wx={default:Bk,hover:{thumbColor:"rgba(0,0,0,0.2)"}},Fk=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.clearEvents=v.noop,t.onStartEvent=function(r){return function(i){t.isMobile=r,i.originalEvent.preventDefault();var a=r?(0,v.get)(i.originalEvent,"touches.0.clientX"):i.clientX,o=r?(0,v.get)(i.originalEvent,"touches.0.clientY"):i.clientY;t.startPos=t.cfg.isHorizontal?a:o,t.bindLaterEvent()}},t.bindLaterEvent=function(){var r=t.getContainerDOM(),i=[];t.isMobile?i=[fs(r,"touchmove",t.onMouseMove),fs(r,"touchend",t.onMouseUp),fs(r,"touchcancel",t.onMouseUp)]:i=[fs(r,"mousemove",t.onMouseMove),fs(r,"mouseup",t.onMouseUp),fs(r,"mouseleave",t.onMouseUp)],t.clearEvents=function(){i.forEach(function(a){a.remove()})}},t.onMouseMove=function(r){var i=t.cfg,a=i.isHorizontal,o=i.thumbOffset;r.preventDefault();var s=t.isMobile?(0,v.get)(r,"touches.0.clientX"):r.clientX,l=t.isMobile?(0,v.get)(r,"touches.0.clientY"):r.clientY,u=a?s:l,c=u-t.startPos;t.startPos=u,t.updateThumbOffset(o+c)},t.onMouseUp=function(r){r.preventDefault(),t.clearEvents()},t.onTrackClick=function(r){var i=t.cfg,a=i.isHorizontal,o=i.x,s=i.y,l=i.thumbLen,u=t.getContainerDOM(),c=u.getBoundingClientRect(),f=r.clientX,h=r.clientY,d=a?f-c.left-o-l/2:h-c.top-s-l/2,g=t.validateRange(d);t.updateThumbOffset(g)},t.onThumbMouseOver=function(){var r=t.cfg.theme.hover.thumbColor;t.getElementByLocalId("thumb").attr("stroke",r),t.draw()},t.onThumbMouseOut=function(){var r=t.cfg.theme.default.thumbColor;t.getElementByLocalId("thumb").attr("stroke",r),t.draw()},t}return e.prototype.setRange=function(t,r){this.set("minLimit",t),this.set("maxLimit",r);var i=this.getValue(),a=(0,v.clamp)(i,t,r);i!==a&&!this.get("isInit")&&this.setValue(a)},e.prototype.getRange=function(){var t=this.get("minLimit")||0,r=this.get("maxLimit")||1;return{min:t,max:r}},e.prototype.setValue=function(t){var r=this.getRange(),i=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*(0,v.clamp)(t,r.min,r.max)}),this.delegateEmit("valuechange",{originalValue:i,value:this.getValue()})},e.prototype.getValue=function(){return(0,v.clamp)(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},t),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:Wx})},e.prototype.renderInner=function(t){this.renderTrackShape(t),this.renderThumbShape(t)},e.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},e.prototype.initEvent=function(){this.bindEvents()},e.prototype.renderTrackShape=function(t){var r=this.cfg,i=r.trackLen,a=r.theme,o=a===void 0?{default:{}}:a,s=(0,v.deepMix)({},Wx,o).default,l=s.lineCap,u=s.trackColor,c=s.size,f=(0,v.get)(this.cfg,"size",c),h=this.get("isHorizontal")?{x1:0+f/2,y1:f/2,x2:i-f/2,y2:f/2,lineWidth:f,stroke:u,lineCap:l}:{x1:f/2,y1:0+f/2,x2:f/2,y2:i-f/2,lineWidth:f,stroke:u,lineCap:l};return this.addShape(t,{id:this.getElementId("track"),name:"track",type:"line",attrs:h})},e.prototype.renderThumbShape=function(t){var r=this.cfg,i=r.thumbOffset,a=r.thumbLen,o=r.theme,s=(0,v.deepMix)({},Wx,o).default,l=s.size,u=s.lineCap,c=s.thumbColor,f=(0,v.get)(this.cfg,"size",l),h=this.get("isHorizontal")?{x1:i+f/2,y1:f/2,x2:i+a-f/2,y2:f/2,lineWidth:f,stroke:c,lineCap:u,cursor:"default"}:{x1:f/2,y1:i+f/2,x2:f/2,y2:i+a-f/2,lineWidth:f,stroke:c,lineCap:u,cursor:"default"};return this.addShape(t,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:h})},e.prototype.bindEvents=function(){var t=this.get("group");t.on("mousedown",this.onStartEvent(!1)),t.on("mouseup",this.onMouseUp),t.on("touchstart",this.onStartEvent(!0)),t.on("touchend",this.onMouseUp);var r=t.findById(this.getElementId("track"));r.on("click",this.onTrackClick);var i=t.findById(this.getElementId("thumb"));i.on("mouseover",this.onThumbMouseOver),i.on("mouseout",this.onThumbMouseOut)},e.prototype.getContainerDOM=function(){var t=this.get("container"),r=t&&t.get("canvas");return r&&r.get("container")},e.prototype.validateRange=function(t){var r=this.cfg,i=r.thumbLen,a=r.trackLen,o=t;return t+i>a?o=a-i:t+i<i&&(o=0),o},e.prototype.draw=function(){var t=this.get("container"),r=t&&t.get("canvas");r&&r.draw()},e.prototype.updateThumbOffset=function(t){var r=this.cfg,i=r.thumbOffset,a=r.isHorizontal,o=r.thumbLen,s=r.size,l=this.validateRange(t);if(l!==i){var u=this.getElementByLocalId("thumb");a?u.attr({x1:l+s/2,x2:l+o-s/2}):u.attr({y1:l+s/2,y2:l+o-s/2}),this.emitOffsetChange(l)}},e.prototype.emitOffsetChange=function(t){var r=this.cfg,i=r.thumbOffset,a=r.trackLen,o=r.thumbLen;this.cfg.thumbOffset=t,this.emit("scrollchange",{thumbOffset:t,ratio:(0,v.clamp)(t/(a-o),0,1)}),this.delegateEmit("valuechange",{originalValue:i,value:t})},e}(ca),Gk=_e,zk=on,Uk=wr,Wk=Or,AS=Ta,Vk=wo,TS=_k;function Xk(n){if((0,v.isEmpty)(n))return null;var e=n[0].x,t=n[0].x,r=n[0].y,i=n[0].y;return(0,v.each)(n,function(a){e=e>a.x?a.x:e,t=t<a.x?a.x:t,r=r>a.y?a.y:r,i=i<a.y?a.y:i}),{minX:e,maxX:t,minY:r,maxY:i,centerX:(e+t)/2,centerY:(r+i)/2}}function ji(n,e,t,r){return{x:n+t*Math.cos(r),y:e+t*Math.sin(r)}}function mu(n,e,t,r,i,a){a===void 0&&(a=0);var o=ji(n,e,t,r),s=ji(n,e,t,i),l=ji(n,e,a,r),u=ji(n,e,a,i);if(i-r==Math.PI*2){var c=ji(n,e,t,r+Math.PI),f=ji(n,e,a,r+Math.PI),h=[["M",o.x,o.y],["A",t,t,0,1,1,c.x,c.y],["A",t,t,0,1,1,s.x,s.y],["M",l.x,l.y]];return a&&(h.push(["A",a,a,0,1,0,f.x,f.y]),h.push(["A",a,a,0,1,0,u.x,u.y])),h.push(["M",o.x,o.y]),h.push(["Z"]),h}var d=i-r<=Math.PI?0:1,g=[["M",o.x,o.y],["A",t,t,0,d,1,s.x,s.y],["L",u.x,u.y]];return a&&g.push(["A",a,a,0,d,0,l.x,l.y]),g.push(["L",o.x,o.y]),g.push(["Z"]),g}function IS(n,e,t,r,i){var a=ji(n,e,t,r),o=ji(n,e,t,i);if((0,v.isNumberEqual)(i-r,Math.PI*2)){var s=ji(n,e,t,r+Math.PI);return[["M",a.x,a.y],["A",t,t,0,1,1,s.x,s.y],["A",t,t,0,1,1,a.x,a.y],["A",t,t,0,1,0,s.x,s.y],["A",t,t,0,1,0,a.x,a.y],["Z"]]}var l=i-r<=Math.PI?0:1;return[["M",a.x,a.y],["A",t,t,0,l,1,o.x,o.y]]}function Gv(n,e){var t=n.points,r=Xk(t),i,a,o=e.startAngle,s=e.endAngle,l=s-o;return e.isTransposed?(i=r.maxY*l,a=r.minY*l):(i=r.maxX*l,a=r.minX*l),i+=o,a+=o,{startAngle:a,endAngle:i}}function Yk(n,e){if((0,v.isNumber)(n)&&(0,v.isNumber)(e))return[n,e];for(var t=-1,r=0,i=0,a,o=n.length-1,s,l=0;++t<n.length;)a=o,o=t,l+=s=n[a]*e[o]-n[o]*e[a],r+=(n[a]+n[o])*s,i+=(e[a]+e[o])*s;return l*=3,[r/l,i/l]}function OS(n,e){var t=n.attr(),r=e.attr();return(0,v.each)(t,function(i,a){r[a]===void 0&&(r[a]=void 0)}),r}function Eh(n,e,t){var r=Math.min(e,t),i=Math.max(e,t);return n>=r&&n<=i}function Hk(n,e,t){if((0,v.isString)(n))return n.padEnd(e,t);if((0,v.isArray)(n)){var r=n.length;if(r<e)for(var i=e-r,a=0;a<i;a++)n.push(t)}return n}function Co(n,e){return e.forEach(function(t){delete n[t]}),n}function xu(n,e,t){e===void 0&&(e=[]),t===void 0&&(t={});for(var r=0,i=n;r<i.length;r++){var a=i[r];t[a]||(e.push(a),t[a]=!0)}return e}var Va=function(){function n(e,t,r,i){e===void 0&&(e=0),t===void 0&&(t=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=e,this.y=t,this.height=i,this.width=r}return n.fromRange=function(e,t,r,i){return new n(e,t,r-e,i-t)},n.fromObject=function(e){return new n(e.minX,e.minY,e.width,e.height)},Object.defineProperty(n.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),n.prototype.isEqual=function(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height},n.prototype.contains=function(e){return e.minX>=this.minX&&e.maxX<=this.maxX&&e.minY>=this.minY&&e.maxY<=this.maxY},n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.add=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.clone();return(0,v.each)(e,function(i){r.x=Math.min(i.x,r.x),r.y=Math.min(i.y,r.y),r.width=Math.max(i.maxX,r.maxX)-r.x,r.height=Math.max(i.maxY,r.maxY)-r.y}),r},n.prototype.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.clone();return(0,v.each)(e,function(i){r.x=Math.max(i.x,r.x),r.y=Math.max(i.y,r.y),r.width=Math.min(i.maxX,r.maxX)-r.x,r.height=Math.min(i.maxY,r.maxY)-r.y}),r},n.prototype.cut=function(e,t){var r=e.width,i=e.height;switch(t){case et.TOP:case et.TOP_LEFT:case et.TOP_RIGHT:return n.fromRange(this.minX,this.minY+i,this.maxX,this.maxY);case et.RIGHT:case et.RIGHT_TOP:case et.RIGHT_BOTTOM:return n.fromRange(this.minX,this.minY,this.maxX-r,this.maxY);case et.BOTTOM:case et.BOTTOM_LEFT:case et.BOTTOM_RIGHT:return n.fromRange(this.minX,this.minY,this.maxX,this.maxY-i);case et.LEFT:case et.LEFT_TOP:case et.LEFT_BOTTOM:return n.fromRange(this.minX+r,this.minY,this.maxX,this.maxY);default:return this}},n.prototype.shrink=function(e){var t=e[0],r=e[1],i=e[2],a=e[3];return new n(this.x+a,this.y+t,this.width-a-r,this.height-t-i)},n.prototype.expand=function(e){var t=e[0],r=e[1],i=e[2],a=e[3];return new n(this.x-a,this.y-t,this.width+a+r,this.height+t+i)},n.prototype.exceed=function(e){return[Math.max(-this.minY+e.minY,0),Math.max(this.maxX-e.maxX,0),Math.max(this.maxY-e.maxY,0),Math.max(-this.minX+e.minX,0)]},n.prototype.collide=function(e){return this.minX<e.maxX&&this.maxX>e.minX&&this.minY<e.maxY&&this.maxY>e.minY},n.prototype.size=function(){return this.width*this.height},n.prototype.isPointIn=function(e){return e.x>=this.minX&&e.x<=this.maxX&&e.y>=this.minY&&e.y<=this.maxY},n}(),eot=function(n,e){var t=e.start,r=e.end;return new Va(n.x+n.width*t.x,n.y+n.height*t.y,n.width*Math.abs(r.x-t.x),n.height*Math.abs(r.y-t.y))};function jk(n){return[[n.minX,n.minY],[n.maxX,n.minY],[n.maxX,n.maxY],[n.minX,n.maxY]]}function zv(n){if(n.isPolar&&!n.isTransposed)return(n.endAngle-n.startAngle)*n.getRadius();var e=n.convert({x:0,y:0}),t=n.convert({x:1,y:0});return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Zk(n){if(n.isPolar){var e=n.startAngle,t=n.endAngle;return t-e==Math.PI*2}return!1}function r0(n,e){var t=n.getCenter();return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Vx(n,e){var t=!1;if(n)if(n.type==="theta"){var r=n.start,i=n.end;t=Eh(e.x,r.x,i.x)&&Eh(e.y,r.y,i.y)}else{var a=n.invert(e);t=Eh(a.x,0,1)&&Eh(a.y,0,1)}return t}function wh(n,e){var t=n.getCenter();return Math.atan2(e.y-t.y,e.x-t.x)}function PS(n,e){e===void 0&&(e=0);var t=n.start,r=n.end,i=n.getWidth(),a=n.getHeight();if(n.isPolar){var o=n.startAngle,s=n.endAngle,l=n.getCenter(),u=n.getRadius();return{type:"path",startState:{path:mu(l.x,l.y,u+e,o,o)},endState:function(f){var h=(s-o)*f+o,d=mu(l.x,l.y,u+e,o,h);return{path:d}},attrs:{path:mu(l.x,l.y,u+e,o,s)}}}var c;return n.isTransposed?c={height:a+e*2}:c={width:i+e*2},{type:"rect",startState:{x:t.x-e,y:r.y-e,width:n.isTransposed?i+e*2:0,height:n.isTransposed?0:a+e*2},endState:c,attrs:{x:t.x-e,y:r.y-e,width:i+e*2,height:a+e*2}}}function Kk(n,e){e===void 0&&(e=0);var t=n.start,r=n.end,i=n.getWidth(),a=n.getHeight(),o=Math.min(t.x,r.x),s=Math.min(t.y,r.y);return Va.fromRange(o-e,s-e,o+i+e,s+a+e)}var $k=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function Qk(n){var e="linear";return $k.test(n)?e="timeCat":(0,v.isString)(n)&&(e="cat"),e}function Jk(n,e,t){var r=e||[];if((0,v.isNumber)(n)||(0,v.isNil)((0,v.firstValue)(r,n))&&(0,v.isEmpty)(t)){var i=mr("identity");return new i({field:n.toString(),values:[n]})}var a=(0,v.valuesOfKey)(r,n),o=(0,v.get)(t,"type",Qk(a[0])),s=mr(o);return new s((0,b.__assign)({field:n,values:a},t))}function qk(n,e){if(n.type!=="identity"&&e.type!=="identity"){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);n.change(t)}}function Uv(n){return n.alias||n.field}function DS(n,e,t){var r=n.values,i=r.length,a;if(i===1)a=[.5,1];else{var o=1,s=0;Zk(e)?e.isTransposed?(o=(0,v.get)(t,"widthRatio.multiplePie",1/1.3),s=1/i*o,a=[s/2,1-s/2]):a=[0,1-1/i]:(s=1/i/2,a=[s,1-s])}return a}function tB(n){var e=n.values.filter(function(t){return!(0,v.isNil)(t)&&!isNaN(t)});return Math.max.apply(Math,(0,b.__spreadArrays)(e,[(0,v.isNil)(n.max)?-Infinity:n.max]))}function eB(n){var e,t;switch(n){case et.TOP:e={x:0,y:1},t={x:1,y:1};break;case et.RIGHT:e={x:1,y:0},t={x:1,y:1};break;case et.BOTTOM:e={x:0,y:0},t={x:1,y:0};break;case et.LEFT:e={x:0,y:0},t={x:0,y:1};break;default:e=t={x:0,y:0}}return{start:e,end:t}}function rB(n){var e,t;return n.isTransposed?(e={x:0,y:0},t={x:1,y:0}):(e={x:0,y:0},t={x:0,y:1}),{start:e,end:t}}function n0(n,e){var t={start:{x:0,y:0},end:{x:0,y:0}};n.isRect?t=eB(e):n.isPolar&&(t=rB(n));var r=t.start,i=t.end;return{start:n.convert(r),end:n.convert(i)}}function rot(n,e){if(n.isRect)return n.isTransposed?[DIRECTION.RIGHT,DIRECTION.BOTTOM].includes(e)?1:-1:[DIRECTION.BOTTOM,DIRECTION.RIGHT].includes(e)?-1:1;if(n.isPolar){var t=n.x.start;return t<0?-1:1}return 1}function LS(n){var e=n.start,t=n.end;return e.x===t.x}function RS(n,e){var t=n.start,r=n.end,i=LS(n);return i?(t.y-r.y)*(e.x-t.x)>0?1:-1:(r.x-t.x)*(t.y-e.y)>0?-1:1}function i0(n,e){var t=(0,v.get)(n,["components","axis"],{});return(0,v.deepMix)({},(0,v.get)(t,["common"],{}),(0,v.deepMix)({},(0,v.get)(t,[e],{})))}function NS(n,e,t){var r=(0,v.get)(n,["components","axis"],{});return(0,v.deepMix)({},(0,v.get)(r,["common","title"],{}),(0,v.deepMix)({},(0,v.get)(r,[e,"title"],{})),t)}function Xx(n){var e=n.x,t=n.y,r=n.circleCenter,i=t.start>t.end,a=n.isTransposed?n.convert({x:i?0:1,y:0}):n.convert({x:0,y:i?0:1}),o=[a.x-r.x,a.y-r.y],s=[1,0],l=a.y>r.y?Ar.EU(o,s):Ar.EU(o,s)*-1,u=l+(e.end-e.start),c=Math.sqrt(Math.pow(a.x-r.x,2)+Math.pow(a.y-r.y,2));return{center:r,radius:c,startAngle:l,endAngle:u}}function a0(n,e){return(0,v.isBoolean)(n)?n===!1?!1:{}:(0,v.get)(n,[e])}function kS(n,e){return(0,v.get)(n,"position",e)}function BS(n,e){return(0,v.get)(e,["title","text"],Uv(n))}var Fc=function(){function n(e,t){this.destroyed=!1,this.facets=[],this.view=e,this.cfg=(0,v.deepMix)({},this.getDefaultCfg(),t)}return n.prototype.init=function(){this.container||(this.container=this.createContainer());var e=this.view.getData();this.facets=this.generateFacets(e)},n.prototype.render=function(){this.renderViews()},n.prototype.update=function(){},n.prototype.clear=function(){this.clearFacetViews()},n.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},n.prototype.facetToView=function(e){var t=e.region,r=e.data,i=e.padding,a=i===void 0?this.cfg.padding:i,o=this.view.createView({region:t,padding:a});o.data(r||[]),e.view=o,this.beforeEachView(o,e);var s=this.cfg.eachView;return s&&s(o,e),this.afterEachView(o,e),o},n.prototype.createContainer=function(){var e=this.view.getLayer($.FORE);return e.addGroup()},n.prototype.renderViews=function(){this.createFacetViews()},n.prototype.createFacetViews=function(){var e=this;return this.facets.map(function(t){return e.facetToView(t)})},n.prototype.clearFacetViews=function(){var e=this;(0,v.each)(this.facets,function(t){t.view&&(e.view.removeView(t.view),t.view=void 0)})},n.prototype.getFieldValues=function(e,t){var r=[],i={};return(0,v.each)(e,function(a){var o=a[t];!(0,v.isNil)(o)&&!i[o]&&(r.push(o),i[o]=!0)}),r},n.prototype.getRegion=function(e,t,r,i){var a=1/(t===0?1:t),o=1/(e===0?1:e),s={x:a*r,y:o*i},l={x:a*(r+1),y:o*(i+1)};return{start:s,end:l}},n.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,padding:10,fields:[]}},n.prototype.getDefaultTitleCfg=function(){var e=this.view.getTheme().fontFamily;return{style:{fontSize:14,fill:"#666",fontFamily:e}}},n.prototype.processAxis=function(e,t){var r=e.getOptions(),i=r.coordinate,a=e.geometries,o=(0,v.get)(i,"type","rect");if(o==="rect"&&a.length){(0,v.isNil)(r.axes)&&(r.axes={});var s=r.axes,l=a[0].getXYFields(),u=l[0],c=l[1],f=a0(s,u),h=a0(s,c);f!==!1&&(r.axes[u]=this.getXAxisOption(u,s,f,t)),h!==!1&&(r.axes[c]=this.getYAxisOption(c,s,h,t))}},n.prototype.getFacetDataFilter=function(e){return function(t){return(0,v.every)(e,function(r){var i=r.field,a=r.value;return!(0,v.isNil)(a)&&i?t[i]===a:!0})}},n}(),FS={},GS=function(n){return FS[(0,v.lowerCase)(n)]},Gc=function(n,e){FS[(0,v.lowerCase)(n)]=e},nB=function(){function n(e,t){this.context=e,this.cfg=t,e.addAction(this)}return n.prototype.applyCfg=function(e){(0,v.assign)(this,e)},n.prototype.init=function(){this.applyCfg(this.cfg)},n.prototype.destroy=function(){this.context.removeAction(this),this.context=null},n}(),Si=nB,iB=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.execute=function(){this.callback&&this.callback(this.context)},e.prototype.destroy=function(){n.prototype.destroy.call(this),this.callback=null},e}(Si),aB=iB,o0={};function oB(n,e){var t=o0[n],r=null;if(t){var i=t.ActionClass,a=t.cfg;r=new i(e,a),r.name=n,r.init()}return r}function sB(n){var e=o0[n];return(0,v.get)(e,"ActionClass")}function Kr(n,e,t){o0[n]={ActionClass:e,cfg:t}}function not(n){delete o0[n]}function lB(n,e){var t=new aB(e);return t.callback=n,t.name="callback",t}function uB(n,e){var t=[];if(n.length){t.push(["M",n[0].x,n[0].y]);for(var r=1,i=n.length;r<i;r+=1){var a=n[r];t.push(["L",a.x,a.y])}e&&t.push(["Z"])}return t}function Yx(n,e){for(var t=[n[0]],r=1,i=n.length;r<i;r=r+2){var a=e.convert({x:n[r],y:n[r+1]});t.push(a.x,a.y)}return t}function zS(n,e){var t=e.isTransposed,r=n[1],i=n[6],a=n[7],o=e.convert({x:i,y:a}),s=t?0:1;return["A",r,r,0,0,s,o.x,o.y]}function cB(n,e,t){var r=t.isTransposed,i=t.startAngle,a=t.endAngle,o=n[0].toLowerCase()==="a"?{x:n[6],y:n[7]}:{x:n[1],y:n[2]},s={x:e[1],y:e[2]},l=[],u=r?"y":"x",c=Math.abs(s[u]-o[u])*(a-i),f=s[u]>=o[u]?1:0,h=c>Math.PI?1:0,d=t.convert(s),g=r0(t,d);if(g>=.5)if(c===Math.PI*2){var p={x:(s.x+o.x)/2,y:(s.y+o.y)/2},m=t.convert(p);l.push(["A",g,g,0,h,f,m.x,m.y]),l.push(["A",g,g,0,h,f,d.x,d.y])}else l.push(["A",g,g,0,h,f,d.x,d.y]);return l}function fB(n){(0,v.each)(n,function(e,t){var r=e;if(r[0].toLowerCase()==="a"){var i=n[t-1],a=n[t+1];a&&a[0].toLowerCase()==="a"?i&&i[0].toLowerCase()==="l"&&(i[0]="M"):i&&i[0].toLowerCase()==="a"&&a&&a[0].toLowerCase()==="l"&&(a[0]="M")}})}var hB=function(n,e,t,r){var i=[],a,o,s=!!r,l,u;if(s){l=[Infinity,Infinity],u=[-Infinity,-Infinity];for(var c=0,f=n.length;c<f;c++){var h=n[c];l=Ar.VV([0,0],l,h),u=Ar.Fp([0,0],u,h)}l=Ar.VV([0,0],l,r[0]),u=Ar.Fp([0,0],u,r[1])}for(var c=0,d=n.length;c<d;c++){var h=n[c];if(t)a=n[c?c-1:d-1],o=n[(c+1)%d];else if(c===0||c===d-1){i.push(h);continue}else a=n[c-1],o=n[c+1];var g=[0,0];g=Ar.lu(g,o,a),g=Ar.bA(g,g,e);var p=Ar.TE(h,a),m=Ar.TE(h,o),_=p+m;_!==0&&(p/=_,m/=_);var S=Ar.bA([0,0],g,-p),M=Ar.bA([0,0],g,m),R=Ar.IH([0,0],h,S),F=Ar.IH([0,0],h,M);s&&(R=Ar.Fp([0,0],R,l),R=Ar.VV([0,0],R,u),F=Ar.Fp([0,0],F,l),F=Ar.VV([0,0],F,u)),i.push(R),i.push(F)}return t&&i.push(i.shift()),i};function US(n,e,t){for(var r=!!e,i=[],a=0,o=n.length;a<o;a+=2)i.push([n[a],n[a+1]]);for(var s=hB(i,.4,r,t),l=i.length,u=[],c,f,h,a=0;a<l-1;a++)c=s[a*2],f=s[a*2+1],h=i[a+1],u.push(["C",c[0],c[1],f[0],f[1],h[0],h[1]]);return r&&(c=s[l],f=s[l+1],h=i[0],u.push(["C",c[0],c[1],f[0],f[1],h[0],h[1]])),u}function Wv(n,e){return uB(n,e)}function s0(n,e,t){var r=[],i=n[0],a=null;if(n.length<=2)return Wv(n,e);for(var o=0,s=n.length;o<s;o++){var l=n[o];(!a||!(a.x===l.x&&a.y===l.y))&&(r.push(l.x),r.push(l.y),a=l)}var u=t||[[0,0],[1,1]],c=US(r,e,u);return c.unshift(["M",i.x,i.y]),c}function dB(n,e){var t=[];return(0,v.each)(e,function(r){var i=r[0];switch(i.toLowerCase()){case"m":case"l":case"c":t.push(Yx(r,n));break;case"a":t.push(zS(r,n));break;case"z":default:t.push(r);break}}),t}function vB(n,e){var t=[],r,i,a,o;return(0,v.each)(e,function(s,l){var u=s[0];switch(u.toLowerCase()){case"m":case"c":case"q":t.push(Yx(s,n));break;case"l":r=e[l-1],i=s,a=n.isTransposed,o=a?r[r.length-2]===i[1]:r[r.length-1]===i[2],o?t=t.concat(cB(r,i,n)):t.push(Yx(s,n));break;case"a":t.push(zS(s,n));break;case"z":default:t.push(s);break}}),fB(t),t}function WS(n,e){var t=n.event,r=t.target,i=r.getCanvasBBox();return i.width>=e||i.height>=e?i:null}function gB(n,e){var t=n.event,r=t.target,i=r.getCanvasBBox();return i.width>=e||i.height>=e?r.attr("path"):null}function bu(n){var e=n.event,t,r=e.target;return r&&(t=r.get("element")),t}function Ch(n){var e=n.event,t=e.target,r;return t&&(r=t.get("delegateObject")),r}function VS(n){var e=n.event.gEvent;return!(e&&e.fromShape&&e.toShape&&e.fromShape.get("element")===e.toShape.get("element"))}function Vv(n){return n&&n.component&&n.component.isList()}function XS(n){return n&&n.component&&n.component.isSlider()}function Xv(n){var e=n.event,t=e.target;return t&&t.get("name")==="mask"}function Hx(n,e){var t=n.event.target;if(t.get("type")==="path"){var r=gB(n,e);return r?mB(n.view,r):void 0}var i=WS(n,e);return i?jx(n.view,i):null}function YS(n,e,t){var r=WS(n,t);if(!r)return null;var i=n.view,a=Kx(i,e,{x:r.x,y:r.y}),o=Kx(i,e,{x:r.maxX,y:r.maxY}),s={minX:a.x,minY:a.y,maxX:o.x,maxY:o.y};return jx(e,s)}function ma(n){var e=n.geometries,t=[];return(0,v.each)(e,function(r){var i=r.elements;t=t.concat(i)}),n.views&&n.views.length&&(0,v.each)(n.views,function(r){t=t.concat(ma(r))}),t}function pB(n,e,t){var r=ma(n);return r.filter(function(i){return hs(i,e)===t})}function HS(n,e){var t=n.geometries,r=[];return(0,v.each)(t,function(i){var a=i.getElementsBy(function(o){return o.hasState(e)});r=r.concat(a)}),r}function hs(n,e){var t=n.getModel(),r=t.data,i;return(0,v.isArray)(r)?i=r[0][e]:i=r[e],i}function yB(n,e){return!(e.minX>n.maxX||e.maxX<n.minX||e.minY>n.maxY||e.maxY<n.minY)}function jx(n,e){var t=ma(n),r=[];return(0,v.each)(t,function(i){var a=i.shape,o=a.getCanvasBBox();yB(e,o)&&r.push(i)}),r}function jS(n){var e=[];return(0,v.each)(n,function(t){var r=t[0];if(r!=="A")for(var i=1;i<t.length;i=i+2)e.push([t[i],t[i+1]]);else{var a=t.length;e.push([t[a-2],t[a-1]])}}),e}function mB(n,e){var t=ma(n),r=jS(e),i=t.filter(function(a){var o=a.shape,s;if(o.get("type")==="path")s=jS(o.attr("path"));else{var l=o.getCanvasBBox();s=jk(l)}return(0,Ma.Wq)(r,s)});return i}function ZS(n){return n.getComponents().map(function(e){return e.component})}function Zx(n,e){var t=e.x-n.x,r=e.y-n.y;return Math.sqrt(t*t+r*r)}function xB(n,e){if(n.length<=2)return Wv(n,!1);var t=n[0],r=[];(0,v.each)(n,function(a){r.push(a.x),r.push(a.y)});var i=US(r,e,null);return i.unshift(["M",t.x,t.y]),i}function KS(n,e){return n.x<=e.x&&n.maxX>=e.x&&n.y<=e.y&&n.maxY>e.y}function zs(n){var e=n.parent,t=null;return e&&(t=e.views.filter(function(r){return r!==n})),t}function bB(n,e){var t=n.getCoordinate();return t.invert(e)}function Kx(n,e,t){var r=bB(n,t);return e.getCoordinate().convert(r)}function $S(n,e,t,r){var i=!1;return(0,v.each)(n,function(a){if(a[t]===e[t]&&a[r]===e[r])return i=!0,!1}),i}function Mh(n,e){var t=n.getScaleByField(e);return!t&&n.views&&(0,v.each)(n.views,function(r){if(t=Mh(r,e),t)return!1}),t}var _B=function(){function n(e){this.actions=[],this.event=null,this.cacheMap={},this.view=e}return n.prototype.cache=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length===1)return this.cacheMap[e[0]];e.length===2&&(this.cacheMap[e[0]]=e[1])},n.prototype.getAction=function(e){return this.actions.find(function(t){return t.name===e})},n.prototype.addAction=function(e){this.actions.push(e)},n.prototype.removeAction=function(e){var t=this.actions,r=this.actions.indexOf(e);r>=0&&t.splice(r,1)},n.prototype.getCurrentPoint=function(){var e=this.event;if(e)if(e.target instanceof HTMLElement){var t=this.view.getCanvas(),r=t.getPointByClient(e.clientX,e.clientY);return r}else return{x:e.x,y:e.y};return null},n.prototype.getCurrentShape=function(){return(0,v.get)(this.event,["gEvent","shape"])},n.prototype.isInPlot=function(){var e=this.getCurrentPoint();return e?this.view.isPointInPlot(e):!1},n.prototype.isInShape=function(e){var t=this.getCurrentShape();return t?t.get("name")===e:!1},n.prototype.isInComponent=function(e){var t=ZS(this.view),r=this.getCurrentPoint();return r?!!t.find(function(i){var a=i.getBBox();return e?i.get("name")===e&&KS(a,r):KS(a,r)}):!1},n.prototype.destroy=function(){this.view=null,this.event=null,(0,v.each)(this.actions.slice(),function(e){e.destroy()}),this.actions=null,this.cacheMap=null},n}(),SB=_B,EB=function(){function n(e,t){this.view=e,this.cfg=t}return n.prototype.init=function(){this.initEvents()},n.prototype.initEvents=function(){},n.prototype.clearEvents=function(){},n.prototype.destroy=function(){this.clearEvents()},n}(),QS=EB;function JS(n,e,t){var r=n.split(":"),i=r[0],a=e.getAction(i)||oB(i,e);if(!a)throw new Error("There is no action named "+i);var o=r[1];return{action:a,methodName:o,arg:t}}function qS(n){var e=n.action,t=n.methodName,r=n.arg;if(e[t])e[t](r);else throw new Error("Action("+e.name+") doesn't have a method called "+t)}var Mo={START:"start",SHOW_ENABLE:"showEnable",END:"end",ROLLBACK:"rollback",PROCESSING:"processing"},wB=function(n){(0,b.__extends)(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.callbackCaches={},i.emitCaches={},i.steps=r,i}return e.prototype.init=function(){this.initContext(),n.prototype.init.call(this)},e.prototype.destroy=function(){n.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},e.prototype.initEvents=function(){var t=this;(0,v.each)(this.steps,function(r,i){(0,v.each)(r,function(a){var o=t.getActionCallback(i,a);o&&t.bindEvent(a.trigger,o)})})},e.prototype.clearEvents=function(){var t=this;(0,v.each)(this.steps,function(r,i){(0,v.each)(r,function(a){var o=t.getActionCallback(i,a);o&&t.offEvent(a.trigger,o)})})},e.prototype.initContext=function(){var t=this.view,r=new SB(t);this.context=r;var i=this.steps;(0,v.each)(i,function(a){(0,v.each)(a,function(o){if((0,v.isFunction)(o.action))o.actionObject={action:lB(o.action,r),methodName:"execute"};else if((0,v.isString)(o.action))o.actionObject=JS(o.action,r,o.arg);else if((0,v.isArray)(o.action)){var s=o.action,l=(0,v.isArray)(o.arg)?o.arg:[o.arg];o.actionObject=[],(0,v.each)(s,function(u,c){o.actionObject.push(JS(u,r,l[c]))})}})})},e.prototype.isAllowStep=function(t){var r=this.currentStepName,i=this.steps;if(r===t||t===Mo.SHOW_ENABLE)return!0;if(t===Mo.PROCESSING)return r===Mo.START;if(t===Mo.START)return r!==Mo.PROCESSING;if(t===Mo.END)return r===Mo.PROCESSING||r===Mo.START;if(t===Mo.ROLLBACK){if(i[Mo.END])return r===Mo.END;if(r===Mo.START)return!0}return!1},e.prototype.isAllowExecute=function(t,r){if(this.isAllowStep(t)){var i=this.getKey(t,r);return r.once&&this.emitCaches[i]?!1:r.isEnable?r.isEnable(this.context):!0}return!1},e.prototype.enterStep=function(t){this.currentStepName=t,this.emitCaches={}},e.prototype.afterExecute=function(t,r){t!==Mo.SHOW_ENABLE&&this.currentStepName!==t&&this.enterStep(t);var i=this.getKey(t,r);this.emitCaches[i]=!0},e.prototype.getKey=function(t,r){return t+r.trigger+r.action},e.prototype.getActionCallback=function(t,r){var i=this,a=this.context,o=this.callbackCaches,s=r.actionObject;if(r.action&&s){var l=this.getKey(t,r);if(!o[l]){var u=function(c){a.event=c,i.isAllowExecute(t,r)?((0,v.isArray)(s)?(0,v.each)(s,function(f){a.event=c,qS(f)}):(a.event=c,qS(s)),i.afterExecute(t,r),r.callback&&(a.event=c,r.callback(a))):a.event=null};r.debounce?o[l]=(0,v.debounce)(u,r.debounce.wait,r.debounce.immediate):r.throttle?o[l]=(0,v.throttle)(u,r.throttle.wait,{leading:r.throttle.leading,trailing:r.throttle.trailing}):o[l]=u}return o[l]}return null},e.prototype.bindEvent=function(t,r){var i=t.split(":");i[0]==="window"?window.addEventListener(i[1],r):i[0]==="document"?document.addEventListener(i[1],r):this.view.on(t,r)},e.prototype.offEvent=function(t,r){var i=t.split(":");i[0]==="window"?window.removeEventListener(i[1],r):i[0]==="document"?document.removeEventListener(i[1],r):this.view.off(t,r)},e}(QS),CB=wB,tE={};function eE(n){return tE[(0,v.lowerCase)(n)]}function An(n,e){tE[(0,v.lowerCase)(n)]=e}function MB(n,e,t){var r=eE(n);if(!r)return null;if((0,v.isPlainObject)(r)){var i=(0,v.mix)((0,v.clone)(r),t);return new CB(e,i)}else{var a=r;return new a(e,t)}}function AB(n){return{title:{autoRotate:!0,position:"center",spacing:n.axisTitleSpacing,style:{fill:n.axisTitleTextFillColor,fontSize:n.axisTitleTextFontSize,lineHeight:n.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:n.fontFamily}},label:{autoRotate:!1,autoEllipsis:!1,autoHide:{type:"equidistance",cfg:{minGap:6}},offset:n.axisLabelOffset,style:{fill:n.axisLabelFillColor,fontSize:n.axisLabelFontSize,lineHeight:n.axisLabelLineHeight,fontFamily:n.fontFamily}},line:{style:{lineWidth:n.axisLineBorder,stroke:n.axisLineBorderColor}},grid:{line:{type:"line",style:{stroke:n.axisGridBorderColor,lineWidth:n.axisGridBorder,lineDash:n.axisGridLineDash}},alignTick:!0,animate:!0},tickLine:{style:{lineWidth:n.axisTickLineBorder,stroke:n.axisTickLineBorderColor},alignTick:!0,length:n.axisTickLineLength},subTickLine:null,animate:!0}}function TB(n){return{title:null,marker:{symbol:"circle",spacing:n.legendMarkerSpacing,style:{r:n.legendCircleMarkerSize,fill:n.legendMarkerColor}},itemName:{spacing:5,style:{fill:n.legendItemNameFillColor,fontFamily:n.fontFamily,fontSize:n.legendItemNameFontSize,lineHeight:n.legendItemNameLineHeight,fontWeight:n.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:"#D8D8D8"},markerStyle:{fill:"#D8D8D8",stroke:"#D8D8D8"}},inactive:{nameStyle:{fill:"#D8D8D8"},markerStyle:{opacity:.2}}},flipPage:!0,pageNavigator:{marker:{style:{size:n.legendPageNavigatorMarkerSize,inactiveFill:n.legendPageNavigatorMarkerInactiveFillColor,inactiveOpacity:n.legendPageNavigatorMarkerInactiveFillOpacity,fill:n.legendPageNavigatorMarkerFillColor,opacity:n.legendPageNavigatorMarkerFillOpacity}},text:{style:{fill:n.legendPageNavigatorTextFillColor,fontSize:n.legendPageNavigatorTextFontSize}}},animate:!1,maxItemWidth:200,itemSpacing:n.legendItemSpacing,itemMarginBottom:n.legendItemMarginBottom,padding:n.legendPadding}}function rE(n){var e,t={point:{default:{fill:n.pointFillColor,r:n.pointSize,stroke:n.pointBorderColor,lineWidth:n.pointBorder,fillOpacity:n.pointFillOpacity},active:{stroke:n.pointActiveBorderColor,lineWidth:n.pointActiveBorder},selected:{stroke:n.pointSelectedBorderColor,lineWidth:n.pointSelectedBorder},inactive:{fillOpacity:n.pointInactiveFillOpacity,strokeOpacity:n.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:n.hollowPointFillColor,lineWidth:n.hollowPointBorder,stroke:n.hollowPointBorderColor,strokeOpacity:n.hollowPointBorderOpacity,r:n.hollowPointSize},active:{stroke:n.hollowPointActiveBorderColor,strokeOpacity:n.hollowPointActiveBorderOpacity},selected:{lineWidth:n.hollowPointSelectedBorder,stroke:n.hollowPointSelectedBorderColor,strokeOpacity:n.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:n.hollowPointInactiveBorderOpacity}},area:{default:{fill:n.areaFillColor,fillOpacity:n.areaFillOpacity,stroke:null},active:{fillOpacity:n.areaActiveFillOpacity},selected:{fillOpacity:n.areaSelectedFillOpacity},inactive:{fillOpacity:n.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:n.hollowAreaBorderColor,lineWidth:n.hollowAreaBorder,strokeOpacity:n.hollowAreaBorderOpacity},active:{fill:null,lineWidth:n.hollowAreaActiveBorder},selected:{fill:null,lineWidth:n.hollowAreaSelectedBorder},inactive:{strokeOpacity:n.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:n.intervalFillColor,fillOpacity:n.intervalFillOpacity},active:{stroke:n.intervalActiveBorderColor,lineWidth:n.intervalActiveBorder},selected:{stroke:n.intervalSelectedBorderColor,lineWidth:n.intervalSelectedBorder},inactive:{fillOpacity:n.intervalInactiveFillOpacity,strokeOpacity:n.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:n.hollowIntervalFillColor,stroke:n.hollowIntervalBorderColor,lineWidth:n.hollowIntervalBorder,strokeOpacity:n.hollowIntervalBorderOpacity},active:{stroke:n.hollowIntervalActiveBorderColor,lineWidth:n.hollowIntervalActiveBorder,strokeOpacity:n.hollowIntervalActiveBorderOpacity},selected:{stroke:n.hollowIntervalSelectedBorderColor,lineWidth:n.hollowIntervalSelectedBorder,strokeOpacity:n.hollowIntervalSelectedBorderOpacity},inactive:{stroke:n.hollowIntervalInactiveBorderColor,lineWidth:n.hollowIntervalInactiveBorder,strokeOpacity:n.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:n.lineBorderColor,lineWidth:n.lineBorder,strokeOpacity:n.lineBorderOpacity,fill:null,lineAppendWidth:10,lineCap:"round",lineJoin:"round"},active:{lineWidth:n.lineActiveBorder},selected:{lineWidth:n.lineSelectedBorder},inactive:{strokeOpacity:n.lineInactiveBorderOpacity}}},r=AB(n),i=TB(n);return{background:n.backgroundColor,defaultColor:n.brandColor,subColor:n.subColor,semanticRed:n.paletteSemanticRed,semanticGreen:n.paletteSemanticGreen,padding:"auto",fontFamily:n.fontFamily,columnWidthRatio:1/2,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:n.paletteQualitative10,colors20:n.paletteQualitative20,sequenceColors:n.paletteSequence,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:function(a){var o=a.geometry.coordinate;if(o.isPolar&&o.isTransposed){var s=Gv(a.getModel(),o),l=s.startAngle,u=s.endAngle,c=(l+u)/2,f=7.5,h=f*Math.cos(c),d=f*Math.sin(c);return{matrix:Cn.vs(null,[["t",h,d]])}}return t.interval.selected}}},"hollow-rect":{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},line:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},tick:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},funnel:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}},pyramid:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},line:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},dot:{default:{style:(0,b.__assign)((0,b.__assign)({},t.line.default),{lineCap:null,lineDash:[1,1]})},active:{style:(0,b.__assign)((0,b.__assign)({},t.line.active),{lineCap:null,lineDash:[1,1]})},inactive:{style:(0,b.__assign)((0,b.__assign)({},t.line.inactive),{lineCap:null,lineDash:[1,1]})},selected:{style:(0,b.__assign)((0,b.__assign)({},t.line.selected),{lineCap:null,lineDash:[1,1]})}},dash:{default:{style:(0,b.__assign)((0,b.__assign)({},t.line.default),{lineCap:null,lineDash:[5.5,1]})},active:{style:(0,b.__assign)((0,b.__assign)({},t.line.active),{lineCap:null,lineDash:[5.5,1]})},inactive:{style:(0,b.__assign)((0,b.__assign)({},t.line.inactive),{lineCap:null,lineDash:[5.5,1]})},selected:{style:(0,b.__assign)((0,b.__assign)({},t.line.selected),{lineCap:null,lineDash:[5.5,1]})}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hvh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}},polygon:{polygon:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},point:{circle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},square:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},bowtie:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},diamond:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},hexagon:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},triangle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"triangle-down":{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"hollow-circle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-square":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-bowtie":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-diamond":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-hexagon":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle-down":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},cross:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},tick:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},plus:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},hyphen:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},line:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}}},area:{area:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},smooth:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},line:{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}},"smooth-line":{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}}},schema:{candle:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},box:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}}},edge:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},arc:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}},violin:{violin:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hollow:{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}},"hollow-smooth":{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}}}},components:{axis:{common:r,top:{position:"top",grid:null,title:null,verticalLimitLength:1/2},bottom:{position:"bottom",grid:null,title:null,verticalLimitLength:1/2},left:{position:"left",title:null,line:null,tickLine:null,verticalLimitLength:1/3},right:{position:"right",title:null,line:null,tickLine:null,verticalLimitLength:1/3},circle:{title:null,grid:(0,v.deepMix)({},r.grid,{line:{type:"line"}})},radius:{title:null,grid:(0,v.deepMix)({},r.grid,{line:{type:"circle"}})}},legend:{common:i,right:{layout:"vertical",padding:n.legendVerticalPadding},left:{layout:"vertical",padding:n.legendVerticalPadding},top:{layout:"horizontal",padding:n.legendHorizontalPadding},bottom:{layout:"horizontal",padding:n.legendHorizontalPadding},continuous:{title:null,background:null,track:{},rail:{type:"color",size:n.sliderRailHeight,defaultLength:n.sliderRailWidth,style:{fill:n.sliderRailFillColor,stroke:n.sliderRailBorderColor,lineWidth:n.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:n.sliderLabelTextFillColor,fontSize:n.sliderLabelTextFontSize,lineHeight:n.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:n.fontFamily}},handler:{size:n.sliderHandlerWidth,style:{fill:n.sliderHandlerFillColor,stroke:n.sliderHandlerBorderColor}},slidable:!0,padding:i.padding}},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:n.tooltipCrosshairsBorderColor,lineWidth:n.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(e={},e[""+wl]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:n.tooltipContainerFillColor,opacity:n.tooltipContainerFillOpacity,boxShadow:n.tooltipContainerShadow,borderRadius:n.tooltipContainerBorderRadius+"px",color:n.tooltipTextFillColor,fontSize:n.tooltipTextFontSize+"px",fontFamily:n.fontFamily,lineHeight:n.tooltipTextLineHeight+"px",padding:"0 12px 0 12px"},e[""+Sh]={marginBottom:"12px",marginTop:"12px"},e[""+Fv]={margin:0,listStyleType:"none",padding:0},e[""+Jp]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},e[""+qp]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},e[""+t0]={display:"inline-block",float:"right",marginLeft:"30px"},e)},annotation:{arc:{style:{stroke:n.annotationArcBorderColor,lineWidth:n.annotationArcBorder},animate:!0},line:{style:{stroke:n.annotationLineBorderColor,lineDash:n.annotationLineDash,lineWidth:n.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:n.annotationTextFillColor,stroke:n.annotationTextBorderColor,lineWidth:n.annotationTextBorder,fontSize:n.annotationTextFontSize,textAlign:"start",fontFamily:n.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:n.annotationTextFillColor,stroke:n.annotationTextBorderColor,lineWidth:n.annotationTextBorder,fontSize:n.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:n.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:n.annotationRegionBorder,stroke:n.annotationRegionBorderColor,fill:n.annotationRegionFillColor,fillOpacity:n.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:n.brandColor,lineWidth:2}},line:{style:{stroke:n.annotationLineBorderColor,lineWidth:n.annotationLineBorder},length:n.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:n.annotationTextFillColor,stroke:n.annotationTextBorderColor,lineWidth:n.annotationTextBorder,fontSize:n.annotationTextFontSize,fontFamily:n.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:n.annotationRegionFillColor,fillOpacity:n.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:n.annotationTextFillColor,stroke:n.annotationTextBorderColor,lineWidth:n.annotationTextBorder,fontSize:n.annotationTextFontSize,fontFamily:n.fontFamily}},animate:!0}},slider:{common:{padding:[8,8,8,8],backgroundStyle:{fill:n.cSliderBackgroundFillColor,opacity:n.cSliderBackgroundFillOpacity},foregroundStyle:{fill:n.cSliderForegroundFillColor,opacity:n.cSliderForegroundFillOpacity},handlerStyle:{width:n.cSliderHandlerWidth,height:n.cSliderHandlerHeight,fill:n.cSliderHandlerFillColor,opacity:n.cSliderHandlerFillOpacity,stroke:n.cSliderHandlerBorderColor,lineWidth:n.cSliderHandlerBorder,radius:n.cSliderHandlerBorderRadius,highLightFill:n.cSliderHandlerHighlightFillColor},textStyle:{fill:n.cSliderTextFillColor,opacity:n.cSliderTextFillOpacity,fontSize:n.cSliderTextFontSize,lineHeight:n.cSliderTextLineHeight,fontWeight:n.cSliderTextFontWeight,stroke:n.cSliderTextBorderColor,lineWidth:n.cSliderTextBorder}}},scrollbar:{common:{padding:[8,8,8,8]},default:{style:{trackColor:n.scrollbarTrackFillColor,thumbColor:n.scrollbarThumbFillColor}},hover:{style:{thumbColor:n.scrollbarThumbHighlightFillColor}}}},labels:{offset:12,style:{fill:n.labelFillColor,fontSize:n.labelFontSize,fontFamily:n.fontFamily,stroke:n.labelBorderColor,lineWidth:n.labelBorder},fillColorDark:n.labelFillColorDark,fillColorLight:n.labelFillColorLight,autoRotate:!0},innerLabels:{style:{fill:n.innerLabelFillColor,fontSize:n.innerLabelFontSize,fontFamily:n.fontFamily,stroke:n.innerLabelBorderColor,lineWidth:n.innerLabelBorder},autoRotate:!0},overflowLabels:{style:{fill:n.overflowLabelFillColor,fontSize:n.overflowLabelFontSize,fontFamily:n.fontFamily,stroke:n.overflowLabelBorderColor,lineWidth:n.overflowLabelBorder}},pieLabels:{labelHeight:14,offset:10,labelLine:{style:{lineWidth:n.labelLineBorder}},autoRotate:!0}}}var Un={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},Yv={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},IB=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],OB=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],PB=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],nE=function(n){n===void 0&&(n={});var e=n.backgroundColor,t=e===void 0?"transparent":e,r=n.subColor,i=r===void 0?"rgba(0,0,0,0.05)":r,a=n.paletteQualitative10,o=a===void 0?IB:a,s=n.paletteQualitative20,l=s===void 0?OB:s,u=n.paletteSemanticRed,c=u===void 0?"#F4664A":u,f=n.paletteSemanticGreen,h=f===void 0?"#30BF78":f,d=n.paletteSemanticYellow,g=d===void 0?"#FAAD14":d,p=n.paletteSequence,m=p===void 0?PB:p,_=n.fontFamily,S=_===void 0?`"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`:_,M=n.brandColor,R=M===void 0?o[0]:M;return{backgroundColor:t,brandColor:R,subColor:i,paletteQualitative10:o,paletteQualitative20:l,paletteSemanticRed:c,paletteSemanticGreen:h,paletteSemanticYellow:g,paletteSequence:m,fontFamily:S,axisLineBorderColor:Un[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:Un[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisTickLineBorderColor:Un[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:Un[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:Un[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:Un[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:Un[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:R,legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:Un[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:Un[100],legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:Un[100],legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:Un[45],legendPageNavigatorTextFontSize:12,sliderRailFillColor:Un[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:Un[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:Un[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:Un[25],annotationArcBorderColor:Un[15],annotationArcBorder:1,annotationLineBorderColor:Un[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:Un[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:Un[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:Un[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:Un[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:Un[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Yv[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:Un[65],overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:Yv[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:Un[25],cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#000",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(0,0,0,0)",scrollbarThumbFillColor:"rgba(0,0,0,0.15)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.2)",pointFillColor:R,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Yv[100],pointBorderOpacity:1,pointActiveBorderColor:Un[100],pointSelectedBorder:2,pointSelectedBorderColor:Un[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:R,hollowPointBorderOpacity:.95,hollowPointFillColor:Yv[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:Un[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:Un[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:R,lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:R,areaFillOpacity:.25,areaActiveFillColor:R,areaActiveFillOpacity:.5,areaSelectedFillColor:R,areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:R,hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:Un[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:Un[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:R,intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:Un[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:Un[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:R,hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Yv[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:Un[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:Un[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}},iot=nE();function l0(n){var e=n.styleSheet,t=e===void 0?{}:e,r=(0,b.__rest)(n,["styleSheet"]),i=nE(t);return(0,v.deepMix)({},rE(i),r)}var DB=l0({}),$x={default:DB};function Ah(n){return(0,v.get)($x,(0,v.lowerCase)(n),$x.default)}function iE(n,e){$x[(0,v.lowerCase)(n)]=l0(e)}function aE(n,e,t){var r=t.translate(n),i=t.translate(e);return(0,v.isNumberEqual)(r,i)}function LB(n,e){var t=e.coordinate,r=e.getXScale(),i=r.range,a=i[i.length-1],o=i[0],s=t.invert(n),l=s.x;return t.isPolar&&l>(1+a)/2&&(l=o),r.translate(r.invert(l))}function oE(n,e,t){var r=t.coordinate,i=t.getYScale(),a=i.field,o=r.invert(e),s=i.invert(o.y),l=(0,v.find)(n,function(u){var c=u[St];return c[a][0]<=s&&c[a][1]>=s});return l||n[n.length-1]}var RB=(0,v.memoize)(function(n){if(n.isCategory)return 1;for(var e=n.values,t=e.length,r=n.translate(e[0]),i=r,a=0;a<t;a++){var o=e[a],s=n.translate(o);s<r&&(r=s),s>i&&(i=s)}return(i-r)/(t-1)});function NB(n,e,t){var r=e.getAttribute("position"),i=r.getFields(),a=e.scales,o=(0,v.isFunction)(t)||!t?i[0]:t,s=a[o],l=s?s.getText(n[o]):n[o]||o;return(0,v.isFunction)(t)?t(l,n):l}function kB(n){var e=(0,v.values)(n.attributes);return(0,v.filter)(e,function(t){return(0,v.contains)(ot,t.type)})}function sE(n){for(var e=kB(n),t,r=0,i=e;r<i.length;r++){var a=i[r],o=a.getScale(a.type);if(o&&o.isLinear){t=o;break}}var s=n.getXScale(),l=n.getYScale();return t||l||s}function BB(n,e){var t=e.field,r=n[t];if((0,v.isArray)(r)){var i=r.map(function(a){return e.getText(a)});return i.join("-")}return e.getText(r)}function FB(n,e){var t,r=e.getGroupScales();if(r.length&&(t=r[0]),t){var i=t.field;return t.getText(n[i])}var a=sE(e);return Uv(a)}function lE(n,e,t){if(e.length===0)return null;var r=t.type,i=t.getXScale(),a=t.getYScale(),o=i.field,s=a.field,l=null;if(r==="heatmap"||r==="point"){for(var u=t.coordinate,c=u.invert(n),f=i.invert(c.x),h=a.invert(c.y),d=Infinity,g=0;g<e.length;g++){var p=e[g],m=p[St],_=Math.pow(m[o]-f,2)+Math.pow(m[s]-h,2);_<d&&(d=_,l=p)}return l}var S=e[0],M=e[e.length-1],R=LB(n,t),F=S[St][o],V=S[St][s],nt=M[St][o],at=a.isLinear&&(0,v.isArray)(V);if((0,v.isArray)(F)){for(var g=0;g<e.length;g++){var xt=e[g],m=xt[St];if(i.translate(m[o][0])<=R&&i.translate(m[o][1])>=R)if(at)(0,v.isArray)(l)||(l=[]),l.push(xt);else{l=xt;break}}(0,v.isArray)(l)&&(l=oE(l,n,t))}else{var gt=void 0;if(!i.isLinear&&i.type!=="timeCat"){for(var g=0;g<e.length;g++){var xt=e[g],m=xt[St];if(aE(m[o],R,i))if(at)(0,v.isArray)(l)||(l=[]),l.push(xt);else{l=xt;break}else i.translate(m[o])<=R&&(M=xt,gt=e[g+1])}(0,v.isArray)(l)&&(l=oE(l,n,t))}else{if((R>i.translate(nt)||R<i.translate(F))&&(R>i.max||R<i.min))return null;for(var Tt=0,Ct=e.length-1,te=void 0;Tt<=Ct;){te=Math.floor((Tt+Ct)/2);var Kt=e[te][St][o];if(aE(Kt,R,i))return e[te];i.translate(Kt)<=i.translate(R)?(Tt=te+1,M=e[te],gt=e[te+1]):(Ct===0&&(M=e[0]),Ct=te-1)}}M&&gt&&Math.abs(i.translate(M[St][o])-R)>Math.abs(i.translate(gt[St][o])-R)&&(M=gt)}var ne=RB(t.getXScale());return!l&&Math.abs(i.translate(M[St][o])-R)<=ne/2&&(l=M),l}function Qx(n,e,t,r){t===void 0&&(t=""),r===void 0&&(r=!1);var i=n[St],a=NB(i,e,t),o=e.tooltipOption,s=e.theme.defaultColor,l=[],u,c;function f(nt,at){if(r||!(0,v.isNil)(at)&&at!==""){var xt={title:a,data:i,mappingData:n,name:nt,value:at,color:n.color||s,marker:!0};l.push(xt)}}if((0,v.isObject)(o)){var h=o.fields,d=o.callback;if(d){var g=h.map(function(nt){return n[St][nt]}),p=d.apply(void 0,g),m=(0,b.__assign)({data:n[St],mappingData:n,title:a,color:n.color||s,marker:!0},p);l.push(m)}else for(var _=e.scales,S=0,M=h;S<M.length;S++){var R=M[S];if(!(0,v.isNil)(i[R])){var F=_[R];u=Uv(F),c=F.getText(i[R]),f(u,c)}}}else{var V=sE(e);c=BB(i,V),u=FB(i,e),f(u,c)}return l}function uE(n,e,t,r){var i=r.showNil,a=[],o=n.dataArray;if(!(0,v.isEmpty)(o)){n.sort(o);for(var s=0,l=o;s<l.length;s++){var u=l[s],c=lE(e,u,n);if(c){var f=n.getElementId(c),h=n.elementsMap[f];if(n.type==="heatmap"||h.visible){var d=Qx(c,n,t,i);d.length&&a.push(d)}}}}return a}function cE(n,e,t,r){var i=r.showNil,a=[],o=n.container,s=o.getShape(e.x,e.y);if(s&&s.get("visible")&&s.get("origin")){var l=s.get("origin").mappingData,u=Qx(l,n,t,i);u.length&&a.push(u)}return a}function Jx(n,e,t){for(var r=[],i=n.geometries,a=t.shared,o=t.title,s=t.reversed,l=0,u=i;l<u.length;l++){var c=u[l];if(c.visible&&c.tooltipOption!==!1){var f=c.type,h=void 0;["point","edge","polygon"].includes(f)?h=cE(c,e,o,t):["area","line","path","heatmap"].includes(f)||a!==!1?h=uE(c,e,o,t):h=cE(c,e,o,t),h.length&&(s&&h.reverse(),r.push(h))}}return r}function GB(n,e,t){for(var r=Jx(n,e,t),i=0,a=n.views;i<a.length;i++){var o=a[i];r=r.concat(Jx(o,e,t))}return r}function zB(n){return!(0,v.isNumber)(n)&&!(0,v.isArray)(n)}function qx(n){n===void 0&&(n=0);var e=(0,v.isArray)(n)?n:[n];switch(e.length){case 0:e=[0,0,0,0];break;case 1:e=new Array(4).fill(e[0]);break;case 2:e=(0,b.__spreadArrays)(e,e);break;case 3:e=(0,b.__spreadArrays)(e,[e[1]]);break;default:e=e.slice(0,4);break}return e}var u0={};function _u(n,e){u0[n]=e}function aot(n){delete u0[n]}function UB(){return Object.keys(u0)}function WB(n){return u0[n]}var VB=function(){function n(e){this.option=this.wrapperOption(e)}return n.prototype.update=function(e){return this.option=this.wrapperOption(e),this},n.prototype.hasAction=function(e){var t=this.option.actions;return(0,v.some)(t,function(r){return r[0]===e})},n.prototype.create=function(e,t){var r=this.option,i=r.type,a=r.cfg,o=i==="theta",s=(0,b.__assign)({start:e,end:t},a),l=qf(o?"polar":i);return this.coordinate=new l(s),this.coordinate.type=i,o&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},n.prototype.adjust=function(e,t){return this.coordinate.update({start:e,end:t}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},n.prototype.rotate=function(e){return this.option.actions.push(["rotate",e]),this},n.prototype.reflect=function(e){return this.option.actions.push(["reflect",e]),this},n.prototype.scale=function(e,t){return this.option.actions.push(["scale",e,t]),this},n.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},n.prototype.getOption=function(){return this.option},n.prototype.getCoordinate=function(){return this.coordinate},n.prototype.wrapperOption=function(e){return(0,b.__assign)({type:"rect",actions:[],cfg:{}},e)},n.prototype.execActions=function(e){var t=this,r=this.option.actions;(0,v.each)(r,function(i){var a,o=i[0],s=i.slice(1),l=(0,v.isNil)(e)?!0:e.includes(o);l&&(a=t.coordinate)[o].apply(a,s)})},n}(),XB=VB,YB=function(){function n(e,t,r){this.view=e,this.gEvent=t,this.data=r,this.type=t.type}return n.fromData=function(e,t,r){return new n(e,new Qt.Event(t,{}),r)},Object.defineProperty(n.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),n.prototype.toString=function(){return"[Event (type="+this.type+")]"},n.prototype.clone=function(){return new n(this.view,this.gEvent,this.data)},n}(),fa=YB;function HB(n){var e=n.getController("axis"),t=n.getController("legend"),r=n.getController("annotation"),i=n.getController("slider"),a=n.getController("scrollbar");[e,i,a,t,r].forEach(function(o){o&&o.layout()})}var jB=function(){function n(){this.scales=new Map,this.syncScales=new Map}return n.prototype.createScale=function(e,t,r,i){var a=r,o=this.getScaleMeta(i);if(t.length===0&&o){var s=o.scale,l={type:s.type};s.isCategory&&(l.values=s.values),a=(0,v.deepMix)(l,o.scaleDef,r)}var u=Jk(e,t,a);return this.cacheScale(u,r,i),u},n.prototype.sync=function(e,t){var r=this;this.syncScales.forEach(function(i,a){var o=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,l=[];(0,v.each)(i,function(u){var c=r.getScale(u);s=(0,v.isNumber)(c.max)?Math.max(s,c.max):s,o=(0,v.isNumber)(c.min)?Math.min(o,c.min):o,(0,v.each)(c.values,function(f){l.includes(f)||l.push(f)})}),(0,v.each)(i,function(u){var c=r.getScale(u);if(c.isContinuous)c.change({min:o,max:s,values:l});else if(c.isCategory){var f=c.range,h=r.getScaleMeta(u);l&&!(0,v.get)(h,["scaleDef","range"])&&(f=DS((0,v.deepMix)({},c,{values:l}),e,t)),c.change({values:l,range:f})}})})},n.prototype.cacheScale=function(e,t,r){var i=this.getScaleMeta(r);i&&i.scale.type===e.type?(qk(i.scale,e),i.scaleDef=t):(i={key:r,scale:e,scaleDef:t},this.scales.set(r,i));var a=this.getSyncKey(i);if(i.syncKey=a,this.removeFromSyncScales(r),a){var o=this.syncScales.get(a);o||(o=[],this.syncScales.set(a,o)),o.push(r)}},n.prototype.getScale=function(e){var t=this.getScaleMeta(e);if(!t){var r=(0,v.last)(e.split("-")),i=this.syncScales.get(r);i&&i.length&&(t=this.getScaleMeta(i[0]))}return t&&t.scale},n.prototype.deleteScale=function(e){var t=this.getScaleMeta(e);if(t){var r=t.syncKey,i=this.syncScales.get(r);if(i&&i.length){var a=i.indexOf(e);a!==-1&&i.splice(a,1)}}this.scales.delete(e)},n.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},n.prototype.removeFromSyncScales=function(e){var t=this;this.syncScales.forEach(function(r,i){var a=r.indexOf(e);if(a!==-1)return r.splice(a,1),r.length===0&&t.syncScales.delete(i),!1})},n.prototype.getSyncKey=function(e){var t=e.scale,r=e.scaleDef,i=t.field,a=(0,v.get)(r,["sync"]);return a===!0?i:a===!1?void 0:a},n.prototype.getScaleMeta=function(e){return this.scales.get(e)},n}(),c0=function(){function n(e,t,r,i){e===void 0&&(e=0),t===void 0&&(t=0),r===void 0&&(r=0),i===void 0&&(i=0),this.top=e,this.right=t,this.bottom=r,this.left=i}return n.instance=function(e,t,r,i){return e===void 0&&(e=0),t===void 0&&(t=0),r===void 0&&(r=0),i===void 0&&(i=0),new n(e,t,r,i)},n.prototype.max=function(e){var t=e[0],r=e[1],i=e[2],a=e[3];return this.top=Math.max(this.top,t),this.right=Math.max(this.right,r),this.bottom=Math.max(this.bottom,i),this.left=Math.max(this.left,a),this},n.prototype.shrink=function(e){var t=e[0],r=e[1],i=e[2],a=e[3];return this.top+=t,this.right+=r,this.bottom+=i,this.left+=a,this},n.prototype.inc=function(e,t){var r=e.width,i=e.height;switch(t){case et.TOP:case et.TOP_LEFT:case et.TOP_RIGHT:this.top+=i;break;case et.RIGHT:case et.RIGHT_TOP:case et.RIGHT_BOTTOM:this.right+=r;break;case et.BOTTOM:case et.BOTTOM_LEFT:case et.BOTTOM_RIGHT:this.bottom+=i;break;case et.LEFT:case et.LEFT_TOP:case et.LEFT_BOTTOM:this.left+=r;break;default:break}return this},n.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},n.prototype.clone=function(){return new(n.bind.apply(n,(0,b.__spreadArrays)([void 0],this.getPadding())))},n}();function ZB(n){var e=n.padding;if(!zB(e))return new(c0.bind.apply(c0,(0,b.__spreadArrays)([void 0],qx(e))));var t=n.viewBBox,r=new c0,i=[],a=[],o=[];return(0,v.each)(n.getComponents(),function(s){var l=s.type;l===Z.AXIS?i.push(s):[Z.LEGEND,Z.SLIDER,Z.SCROLLBAR].includes(l)?a.push(s):l!==Z.GRID&&l!==Z.TOOLTIP&&o.push(s)}),(0,v.each)(i,function(s){var l=s.component,u=l.getLayoutBBox(),c=new Va(u.x,u.y,u.width,u.height),f=c.exceed(t);r.max(f)}),(0,v.each)(a,function(s){var l=s.component,u=s.direction,c=l.getLayoutBBox(),f=l.get("padding"),h=new Va(c.x,c.y,c.width,c.height).expand(f);r.inc(h,u)}),(0,v.each)(o,function(s){var l=s.component,u=s.direction,c=l.getLayoutBBox(),f=new Va(c.x,c.y,c.width,c.height);r.inc(f,u)}),r}function KB(n,e,t){var r=t.instance();e.forEach(function(i){i.autoPadding=r.max(i.autoPadding.getPadding())})}var fE=function(n){(0,b.__extends)(e,n);function e(t){var r=n.call(this,{visible:t.visible})||this;r.views=[],r.geometries=[],r.controllers=[],r.interactions={},r.limitInPlot=!1,r.options={data:[],animate:!0},r.usedControllers=UB(),r.scalePool=new jB,r.layoutFunc=HB,r.isPreMouseInPlot=!1,r.isDataChanged=!1,r.isCoordinateChanged=!1,r.createdScaleKeys=new Map,r.onCanvasEvent=function(M){var R=M.name;if(!R.includes(":")){var F=r.createViewEvent(M);r.doPlotEvent(F),r.emit(R,F)}},r.onDelegateEvents=function(M){var R=M.name;if(!!R.includes(":")){var F=r.createViewEvent(M);r.emit(R,F)}};var i=t.id,a=i===void 0?(0,v.uniqueId)("view"):i,o=t.parent,s=t.canvas,l=t.backgroundGroup,u=t.middleGroup,c=t.foregroundGroup,f=t.region,h=f===void 0?{start:{x:0,y:0},end:{x:1,y:1}}:f,d=t.padding,g=t.appendPadding,p=t.theme,m=t.options,_=t.limitInPlot,S=t.syncViewPadding;return r.parent=o,r.canvas=s,r.backgroundGroup=l,r.middleGroup=u,r.foregroundGroup=c,r.region=h,r.padding=d,r.appendPadding=g,r.options=(0,b.__assign)((0,b.__assign)({},r.options),m),r.limitInPlot=_,r.id=a,r.syncViewPadding=S,r.themeObject=(0,v.isObject)(p)?(0,v.deepMix)({},Ah("default"),l0(p)):Ah(p),r.init(),r}return e.prototype.setLayout=function(t){this.layoutFunc=t},e.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.initOptions()},e.prototype.render=function(t,r){t===void 0&&(t=!1),this.emit(_t.BEFORE_RENDER,fa.fromData(this,_t.BEFORE_RENDER,r)),this.paint(t),this.emit(_t.AFTER_RENDER,fa.fromData(this,_t.AFTER_RENDER,r)),this.visible===!1&&this.changeVisible(!1)},e.prototype.clear=function(){var t=this;this.emit(_t.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var r=this.geometries,i=0;i<r.length;i++)r[i].clear(),r[i].container.remove(!0);this.geometries=[];for(var a=this.controllers,i=0;i<a.length;i++)a[i].name==="annotation"?a[i].clear(!0):a[i].clear();this.createdScaleKeys.forEach(function(s,l){t.getRootView().scalePool.deleteScale(l)}),this.createdScaleKeys.clear();for(var o=this.views,i=0;i<o.length;i++)o[i].clear();this.emit(_t.AFTER_CLEAR)},e.prototype.destroy=function(){this.emit(_t.BEFORE_DESTROY);var t=this.interactions;(0,v.each)(t,function(s){s&&s.destroy()}),this.clear();for(var r=this.controllers,i=0,a=r.length;i<a;i++){var o=r[i];o.destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),n.prototype.destroy.call(this)},e.prototype.changeVisible=function(t){n.prototype.changeVisible.call(this,t);for(var r=this.geometries,i=0,a=r.length;i<a;i++){var o=r[i];o.changeVisible(t)}for(var s=this.controllers,i=0,a=s.length;i<a;i++){var l=s[i];l.changeVisible(t)}return this.foregroundGroup.set("visible",t),this.middleGroup.set("visible",t),this.backgroundGroup.set("visible",t),this.getCanvas().draw(),this},e.prototype.data=function(t){return(0,v.set)(this.options,"data",t),this.isDataChanged=!0,this},e.prototype.source=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(t)},e.prototype.filter=function(t,r){return(0,v.isFunction)(r)?((0,v.set)(this.options,["filters",t],r),this):(!r&&(0,v.get)(this.options,["filters",t])&&delete this.options.filters[t],this)},e.prototype.axis=function(t,r){return(0,v.isBoolean)(t)?(0,v.set)(this.options,["axes"],t):(0,v.set)(this.options,["axes",t],r),this},e.prototype.legend=function(t,r){return(0,v.isBoolean)(t)?(0,v.set)(this.options,["legends"],t):(0,v.isString)(t)?((0,v.set)(this.options,["legends",t],r),(0,v.isPlainObject)(r)&&(r==null?void 0:r.selected)&&(0,v.set)(this.options,["filters",t],function(i){var a;return(a=r==null?void 0:r.selected[i])!==null&&a!==void 0?a:!0})):(0,v.set)(this.options,["legends"],t),this},e.prototype.scale=function(t,r){var i=this;return(0,v.isString)(t)?(0,v.set)(this.options,["scales",t],r):(0,v.isObject)(t)&&(0,v.each)(t,function(a,o){(0,v.set)(i.options,["scales",o],a)}),this},e.prototype.tooltip=function(t){return(0,v.set)(this.options,"tooltip",t),this},e.prototype.annotation=function(){return this.getController("annotation")},e.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},e.prototype.coordinate=function(t,r){return(0,v.isString)(t)?(0,v.set)(this.options,"coordinate",{type:t,cfg:r}):(0,v.set)(this.options,"coordinate",t),this.coordinateController.update(this.options.coordinate),this.coordinateController},e.prototype.coord=function(t,r){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(t,r)},e.prototype.facet=function(t,r){this.facetInstance&&this.facetInstance.destroy();var i=GS(t);if(!i)throw new Error("facet '"+t+"' is not exist!");return this.facetInstance=new i(this,(0,b.__assign)((0,b.__assign)({},r),{type:t})),this},e.prototype.animate=function(t){return(0,v.set)(this.options,"animate",t),this},e.prototype.updateOptions=function(t){return this.clear(),(0,v.mix)(this.options,t),this.views.forEach(function(r){return r.destroy()}),this.views=[],this.initOptions(),this.coordinateBBox=this.viewBBox,this},e.prototype.option=function(t,r){if(e.prototype[t])throw new Error(`Can't use built in variable name "`+t+'", please change another one.');return(0,v.set)(this.options,t,r),this},e.prototype.theme=function(t){return this.themeObject=(0,v.isObject)(t)?(0,v.deepMix)({},this.themeObject,l0(t)):Ah(t),this},e.prototype.interaction=function(t,r){var i=this.interactions[t];i&&i.destroy();var a=MB(t,this,r);return a&&(a.init(),this.interactions[t]=a),this},e.prototype.removeInteraction=function(t){var r=this.interactions[t];r&&(r.destroy(),this.interactions[t]=void 0)},e.prototype.changeData=function(t){this.isDataChanged=!0,this.emit(_t.BEFORE_CHANGE_DATA,fa.fromData(this,_t.BEFORE_CHANGE_DATA,null)),this.data(t),this.paint(!0);for(var r=this.views,i=0,a=r.length;i<a;i++){var o=r[i];o.changeData(t)}this.emit(_t.AFTER_CHANGE_DATA,fa.fromData(this,_t.AFTER_CHANGE_DATA,null))},e.prototype.createView=function(t){this.parent&&this.parent.parent&&console.warn("The view nesting recursive feature will be removed at G2 V4.1. Please avoid to use it.");var r={data:this.options.data,scales:(0,v.clone)(this.options.scales),axes:(0,v.clone)(this.options.axes),coordinate:(0,v.clone)(this.coordinateController.getOption()),tooltip:(0,v.clone)(this.options.tooltip),legends:(0,v.clone)(this.options.legends),animate:this.options.animate,visible:this.visible},i=new e((0,b.__assign)((0,b.__assign)({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:pt.BG}),middleGroup:this.middleGroup.addGroup({zIndex:pt.MID}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:pt.FORE}),theme:this.themeObject,padding:this.padding},t),{options:(0,b.__assign)((0,b.__assign)({},r),(0,v.get)(t,"options",{}))}));return this.views.push(i),i},e.prototype.view=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(t)},e.prototype.removeView=function(t){var r=(0,v.remove)(this.views,function(i){return i===t})[0];return r&&r.destroy(),r},e.prototype.getCoordinate=function(){return this.coordinateInstance},e.prototype.getTheme=function(){return this.themeObject},e.prototype.getXScale=function(){var t=this.geometries[0];return t?t.getXScale():null},e.prototype.getYScales=function(){var t={};return this.geometries.map(function(r){var i=r.getYScale(),a=i.field;if(!t[a])return t[a]=!0,i})},e.prototype.getScalesByDim=function(t){for(var r=this.geometries,i={},a=0,o=r.length;a<o;a++){var s=r[a],l=t==="x"?s.getXScale():s.getYScale();l&&!i[l.field]&&(i[l.field]=l)}return i},e.prototype.getScaleByField=function(t,r){var i=r||this.getScaleKey(t);return this.getRootView().scalePool.getScale(i)},e.prototype.getOptions=function(){return this.options},e.prototype.getData=function(){return this.filteredData},e.prototype.getLayer=function(t){return t===$.BG?this.backgroundGroup:t===$.MID?this.middleGroup:t===$.FORE?this.foregroundGroup:this.foregroundGroup},e.prototype.isPointInPlot=function(t){return Vx(this.getCoordinate(),t)},e.prototype.getLegendAttributes=function(){return(0,v.flatten)(this.geometries.map(function(t){return t.getGroupAttributes()}))},e.prototype.getGroupScales=function(){var t=this.geometries.map(function(r){return r.getGroupScales()});return xu((0,v.flatten)(t))},e.prototype.getCanvas=function(){return this.getRootView().canvas},e.prototype.getRootView=function(){for(var t=this;;){if(t.parent){t=t.parent;continue}break}return t},e.prototype.getXY=function(t){var r=this.getCoordinate(),i=this.getScalesByDim("x"),a=this.getScalesByDim("y"),o,s;if((0,v.each)(t,function(l,u){i[u]&&(o=i[u].scale(l)),a[u]&&(s=a[u].scale(l))}),!(0,v.isNil)(o)&&!(0,v.isNil)(s))return r.convert({x:o,y:s})},e.prototype.getController=function(t){return(0,v.find)(this.controllers,function(r){return r.name===t})},e.prototype.showTooltip=function(t){var r=this.getController("tooltip");return r&&r.showTooltip(t),this},e.prototype.hideTooltip=function(){var t=this.getController("tooltip");return t&&t.hideTooltip(),this},e.prototype.lockTooltip=function(){var t=this.getController("tooltip");return t&&t.lockTooltip(),this},e.prototype.unlockTooltip=function(){var t=this.getController("tooltip");return t&&t.unlockTooltip(),this},e.prototype.isTooltipLocked=function(){var t=this.getController("tooltip");return t&&t.isTooltipLocked()},e.prototype.getTooltipItems=function(t){var r=this.getController("tooltip");return r?r.getTooltipItems(t):[]},e.prototype.getSnapRecords=function(t){for(var r=this.geometries,i=[],a=0,o=r.length;a<o;a++){var s=r[a],l=s.dataArray;s.sort(l);for(var u=void 0,c=0,f=l.length;c<f;c++){var h=l[c];u=lE(t,h,s),u&&i.push(u)}}for(var d=this.views,a=0,o=d.length;a<o;a++){var g=d[a],p=g.getSnapRecords(t);i=i.concat(p)}return i},e.prototype.getComponents=function(){for(var t=[],r=this.controllers,i=0,a=r.length;i<a;i++){var o=r[i];t=t.concat(o.getComponents())}return t},e.prototype.filterData=function(t){var r=this.options.filters;return(0,v.size)(r)===0?t:(0,v.filter)(t,function(i,a){var o=Object.keys(r);return o.every(function(s){var l=r[s];return l(i[s],i,a)})})},e.prototype.filterFieldData=function(t,r){var i=this.options.filters,a=(0,v.get)(i,t);return(0,v.isUndefined)(a)?r:r.filter(function(o,s){return a(o[t],o,s)})},e.prototype.adjustCoordinate=function(){var t=this.getCoordinate(),r=t.start,i=t.end,a=this.coordinateBBox.bl,o=this.coordinateBBox.tr;if((0,v.isEqual)(r,a)&&(0,v.isEqual)(i,o)){this.isCoordinateChanged=!1;return}this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(a,o)},e.prototype.paint=function(t){this.renderDataRecursive(t),this.syncScale(),this.emit(_t.BEFORE_PAINT),this.renderPaddingRecursive(t),this.renderLayoutRecursive(t),this.renderBackgroundStyleShape(),this.renderPaintRecursive(t),this.emit(_t.AFTER_PAINT),this.isDataChanged=!1},e.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var t=(0,v.get)(this.themeObject,"background");if(t){this.backgroundStyleRectShape||(this.backgroundStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{},zIndex:-1,capture:!1}),this.backgroundStyleRectShape.toBack());var r=this.viewBBox,i=r.x,a=r.y,o=r.width,s=r.height;this.backgroundStyleRectShape.attr({fill:t,x:i,y:a,width:o,height:s})}else this.backgroundStyleRectShape&&(this.backgroundStyleRectShape.remove(!0),this.backgroundStyleRectShape=void 0)}},e.prototype.renderPaddingRecursive=function(t){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(t),this.autoPadding=ZB(this).shrink(qx(this.appendPadding)),this.coordinateBBox=this.viewBBox.shrink(this.autoPadding.getPadding()),this.adjustCoordinate();for(var r=this.views,i=0,a=r.length;i<a;i++){var o=r[i];o.renderPaddingRecursive(t)}},e.prototype.renderLayoutRecursive=function(t){var r=this.syncViewPadding===!0?KB:(0,v.isFunction)(this.syncViewPadding)?this.syncViewPadding:void 0;r&&(r(this,this.views,c0),this.views.forEach(function(l){l.coordinateBBox=l.viewBBox.shrink(l.autoPadding.getPadding()),l.adjustCoordinate()})),this.doLayout();for(var i=this.views,a=0,o=i.length;a<o;a++){var s=i[a];s.renderLayoutRecursive(t)}},e.prototype.renderPaintRecursive=function(t){var r=this.middleGroup;if(this.limitInPlot){var i=PS(this.coordinateInstance),a=i.type,o=i.attrs;r.setClip({type:a,attrs:o})}else r.setClip(void 0);this.paintGeometries(t),this.renderComponents(t);for(var s=this.views,l=0,u=s.length;l<u;l++){var c=s[l];c.renderPaintRecursive(t)}},e.prototype.createScale=function(t,r,i,a){var o=(0,v.get)(this.options.scales,[t]),s=(0,b.__assign)((0,b.__assign)({},o),i);return this.parent?this.parent.createScale(t,r,s,a):this.scalePool.createScale(t,r,s,a)},e.prototype.renderDataRecursive=function(t){this.doFilterData(),this.createCoordinate(),this.initGeometries(t),this.renderFacet(t);for(var r=this.views,i=0,a=r.length;i<a;i++){var o=r[i];o.renderDataRecursive(t)}},e.prototype.calculateViewBBox=function(){var t,r,i,a;if(this.parent){var o=this.parent.coordinateBBox;t=o.x,r=o.y,i=o.width,a=o.height}else t=0,r=0,i=this.canvas.get("width"),a=this.canvas.get("height");var s=this.region,l=s.start,u=s.end,c=new Va(t+i*l.x,r+a*l.y,i*(u.x-l.x),a*(u.y-l.y));(!this.viewBBox||!this.viewBBox.isEqual(c))&&(this.viewBBox=new Va(t+i*l.x,r+a*l.y,i*(u.x-l.x),a*(u.y-l.y))),this.coordinateBBox=this.viewBBox},e.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},e.prototype.initComponentController=function(){for(var t=this.usedControllers,r=0,i=t.length;r<i;r++){var a=t[r],o=WB(a);o&&this.controllers.push(new o(this))}},e.prototype.createViewEvent=function(t){var r=t.shape,i=t.name,a=r?r.get("origin"):null,o=new fa(this,t,a);return o.type=i,o},e.prototype.doPlotEvent=function(t){var r=t.type,i=t.x,a=t.y,o={x:i,y:a},s=["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"];if(s.includes(r)){var l=this.isPointInPlot(o),u=t.clone();if(l){var c="plot:"+r;u.type=c,this.emit(c,u),(r==="mouseleave"||r==="touchend")&&(this.isPreMouseInPlot=!1)}r==="mousemove"||r==="touchmove"?(this.isPreMouseInPlot&&!l?(r==="mousemove"&&(u.type=Rt.MOUSE_LEAVE,this.emit(Rt.MOUSE_LEAVE,u)),u.type=Rt.LEAVE,this.emit(Rt.LEAVE,u)):!this.isPreMouseInPlot&&l&&(r==="mousemove"&&(u.type=Rt.MOUSE_ENTER,this.emit(Rt.MOUSE_ENTER,u)),u.type=Rt.ENTER,this.emit(Rt.ENTER,u)),this.isPreMouseInPlot=l):(r==="mouseleave"||r==="touchend")&&this.isPreMouseInPlot&&(r==="mouseleave"&&(u.type=Rt.MOUSE_LEAVE,this.emit(Rt.MOUSE_LEAVE,u)),u.type=Rt.LEAVE,this.emit(Rt.LEAVE,u),this.isPreMouseInPlot=!1)}},e.prototype.doFilterData=function(){var t=this.options.data;this.filteredData=this.filterData(t)},e.prototype.initGeometries=function(t){this.createOrUpdateScales();for(var r=this.getCoordinate(),i=(0,v.get)(this.options,"scales",{}),a=this.geometries,o=0,s=a.length;o<s;o++){var l=a[o];l.scales=this.getGeometryScales();var u={coordinate:r,scaleDefs:i,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};t?l.update(u):l.init(u)}this.adjustScales()},e.prototype.createOrUpdateScales=function(){for(var t=this.getScaleFields(),r=this.getGroupedFields(),i=this.getOptions(),a=i.data,o=i.scales,s=o===void 0?{}:o,l=this.filteredData,u=0,c=t.length;u<c;u++){var f=t[u],h=s[f],d=this.getScaleKey(f);this.createScale(f,r.includes(f)?a:l,h,d),this.createdScaleKeys.set(d,!0)}},e.prototype.syncScale=function(){this.getRootView().scalePool.sync(this.getCoordinate(),this.theme)},e.prototype.getGeometryScales=function(){for(var t=this.getScaleFields(),r={},i=0;i<t.length;i++){var a=t[i];r[a]=this.getScaleByField(a)}return r},e.prototype.getScaleFields=function(){for(var t=[],r={},i=this.geometries,a=0;a<i.length;a++){var o=i[a],s=o.getScaleFields();xu(s,t,r)}return t},e.prototype.getGroupedFields=function(){for(var t=[],r={},i=this.geometries,a=0;a<i.length;a++){var o=i[a],s=o.getGroupFields();xu(s,t,r)}return t},e.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},e.prototype.adjustCategoryScaleRange=function(){var t=this,r=(0,b.__spreadArrays)([this.getXScale()],this.getYScales()).filter(function(o){return!!o}),i=this.getCoordinate(),a=this.options.scales;(0,v.each)(r,function(o){var s=o.field,l=o.values,u=o.isCategory,c=o.isIdentity;(u||c)&&l&&!(0,v.get)(a,[s,"range"])&&(o.range=DS(o,i,t.theme))})},e.prototype.initComponents=function(t){for(var r=this.controllers,i=0;i<r.length;i++){var a=r[i];t?a.update():(a.clear(),a.render())}},e.prototype.doLayout=function(){this.layoutFunc(this)},e.prototype.createCoordinate=function(){var t=this.coordinateBBox.bl,r=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(t,r)},e.prototype.paintGeometries=function(t){for(var r=this.options.animate,i=this.getCoordinate(),a={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},o=this.geometries,s=0;s<o.length;s++){var l=o[s];l.coordinate=i,l.canvasRegion=a,r||l.animate(!1),l.paint(t)}},e.prototype.renderComponents=function(t){for(var r=0;r<this.getComponents().length;r++){var i=this.getComponents()[r];i.component.render()}},e.prototype.renderFacet=function(t){this.facetInstance&&(t?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},e.prototype.initOptions=function(){var t=this,r=this.options,i=r.geometries,a=i===void 0?[]:i,o=r.interactions,s=o===void 0?[]:o,l=r.views,u=l===void 0?[]:l,c=r.annotations,f=c===void 0?[]:c,h=r.coordinate,d=r.events,g=r.facets;this.coordinateController?h&&this.coordinateController.update(h):this.coordinateController=new XB(h);for(var p=0;p<a.length;p++){var m=a[p];this.createGeometry(m)}for(var _=0;_<s.length;_++){var S=s[_],M=S.type,R=S.cfg;this.interaction(M,R)}for(var F=0;F<u.length;F++){var V=u[F];this.createView(V)}for(var nt=this.getController("annotation"),at=0;at<f.length;at++){var xt=f[at];nt.annotation(xt)}d&&(0,v.each)(d,function(gt,Tt){t.on(Tt,gt)}),g&&(0,v.each)(g,function(gt){var Tt=gt.type,Ct=(0,b.__rest)(gt,["type"]);t.facet(Tt,Ct)})},e.prototype.createGeometry=function(t){var r=t.type,i=t.cfg,a=i===void 0?{}:i;if(this[r]){var o=this[r](a);(0,v.each)(t,function(s,l){(0,v.isFunction)(o[l])&&o[l](s)})}},e.prototype.getScaleKey=function(t){return this.id+"-"+t},e}(st);function ds(n,e){fE.prototype[n.toLowerCase()]=function(t){t===void 0&&(t={});var r=(0,b.__assign)({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},t),i=new e(r);return this.geometries.push(i),i}}var hE=fE,$B=function(n){(0,b.__extends)(e,n);function e(t){var r=this,i=t.container,a=t.width,o=t.height,s=t.autoFit,l=s===void 0?!1:s,u=t.padding,c=t.appendPadding,f=t.renderer,h=f===void 0?"canvas":f,d=t.pixelRatio,g=t.localRefresh,p=g===void 0?!0:g,m=t.visible,_=m===void 0?!0:m,S=t.supportCSSTransform,M=S===void 0?!1:S,R=t.defaultInteractions,F=R===void 0?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text"]:R,V=t.options,nt=t.limitInPlot,at=t.theme,xt=t.syncViewPadding,gt=(0,v.isString)(i)?document.getElementById(i):i,Tt=rt('<div style="position:relative;"></div>');gt.appendChild(Tt);var Ct=dt(gt,l,a,o),te=ft(h),Kt=new te.Canvas((0,b.__assign)({container:Tt,pixelRatio:d,localRefresh:p,supportCSSTransform:M},Ct));return r=n.call(this,{parent:null,canvas:Kt,backgroundGroup:Kt.addGroup({zIndex:pt.BG}),middleGroup:Kt.addGroup({zIndex:pt.MID}),foregroundGroup:Kt.addGroup({zIndex:pt.FORE}),padding:u,appendPadding:c,visible:_,options:V,limitInPlot:nt,theme:at,syncViewPadding:xt})||this,r.onResize=(0,v.debounce)(function(){r.forceFit()},300),r.ele=gt,r.canvas=Kt,r.width=Ct.width,r.height=Ct.height,r.autoFit=l,r.localRefresh=p,r.renderer=h,r.wrapperElement=Tt,r.updateCanvasStyle(),r.bindAutoFit(),r.initDefaultInteractions(F),r}return e.prototype.initDefaultInteractions=function(t){var r=this;(0,v.each)(t,function(i){r.interaction(i)})},e.prototype.changeSize=function(t,r){return this.width===t&&this.height===r?this:(this.emit(_t.BEFORE_CHANGE_SIZE),this.width=t,this.height=r,this.canvas.changeSize(t,r),this.render(!0),this.emit(_t.AFTER_CHANGE_SIZE),this)},e.prototype.destroy=function(){n.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),Et(this.wrapperElement),this.wrapperElement=null},e.prototype.changeVisible=function(t){return n.prototype.changeVisible.call(this,t),this.wrapperElement.style.display=t?"":"none",this},e.prototype.forceFit=function(){if(!this.destroyed){var t=dt(this.ele,!0,this.width,this.height),r=t.width,i=t.height;this.changeSize(r,i)}},e.prototype.updateCanvasStyle=function(){ct(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},e.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},e.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},e}(hE),dE=$B,zc=function(){function n(e){this.visible=!0,this.components=[],this.view=e}return n.prototype.clear=function(e){(0,v.each)(this.components,function(t){t.component.destroy()}),this.components=[]},n.prototype.destroy=function(){this.clear()},n.prototype.getComponents=function(){return this.components},n.prototype.changeVisible=function(e){this.visible!==e&&(this.components.forEach(function(t){e?t.component.show():t.component.hide()}),this.visible=e)},n}();function QB(n){for(var e=[],t=function(i){var a=n[i],o=(0,v.find)(e,function(s){return s.color===a.color&&s.name===a.name&&s.value===a.value&&s.title===a.title});o||e.push(a)},r=0;r<n.length;r++)t(r);return e}var JB=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.isLocked=!1,t}return Object.defineProperty(e.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.isVisible=function(){var t=this.view.getOptions().tooltip;return t!==!1},e.prototype.render=function(){},e.prototype.showTooltip=function(t){if(this.point=t,!!this.isVisible()){var r=this.view,i=this.getTooltipItems(t);if(!i.length){this.hideTooltip();return}var a=this.getTitle(i),o={x:i[0].x,y:i[0].y};r.emit("tooltip:show",fa.fromData(r,"tooltip:show",(0,b.__assign)({items:i,title:a},t)));var s=this.getTooltipCfg(),l=s.follow,u=s.showMarkers,c=s.showCrosshairs,f=s.showContent,h=s.marker,d=this.items,g=this.title;if(!(0,v.isEqual)(g,a)||!(0,v.isEqual)(d,i)?(r.emit("tooltip:change",fa.fromData(r,"tooltip:change",(0,b.__assign)({items:i,title:a},t))),((0,v.isFunction)(f)?f(i):f)&&(this.tooltip||this.renderTooltip(),this.tooltip.update((0,v.mix)({},s,{items:this.getItemsAfterProcess(i),title:a},l?t:{})),this.tooltip.show()),u&&this.renderTooltipMarkers(i,h)):(this.tooltip&&l&&(this.tooltip.update(t),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()),this.items=i,this.title=a,c){var p=(0,v.get)(s,["crosshairs","follow"],!1);this.renderCrosshairs(p?t:o,s)}}},e.prototype.hideTooltip=function(){var t=this.getTooltipCfg().follow;if(!t){this.point=null;return}var r=this.tooltipMarkersGroup;r&&r.hide();var i=this.xCrosshair,a=this.yCrosshair;i&&i.hide(),a&&a.hide();var o=this.tooltip;o&&o.hide(),this.view.emit("tooltip:hide",fa.fromData(this.view,"tooltip:hide",{})),this.point=null},e.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},e.prototype.unlockTooltip=function(){this.isLocked=!1;var t=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(t.capture)},e.prototype.isTooltipLocked=function(){return this.isLocked},e.prototype.clear=function(){var t=this,r=t.tooltip,i=t.xCrosshair,a=t.yCrosshair,o=t.tooltipMarkersGroup;r&&(r.hide(),r.clear()),i&&i.clear(),a&&a.clear(),o&&o.clear(),this.reset()},e.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.reset()},e.prototype.reset=function(){this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},e.prototype.changeVisible=function(t){if(this.visible!==t){var r=this,i=r.tooltip,a=r.tooltipMarkersGroup,o=r.xCrosshair,s=r.yCrosshair;t?(i&&i.show(),a&&a.show(),o&&o.show(),s&&s.show()):(i&&i.hide(),a&&a.hide(),o&&o.hide(),s&&s.hide()),this.visible=t}},e.prototype.getTooltipItems=function(t){var r=this.findItemsFromView(this.view,t);if(r.length){r=(0,v.flatten)(r);for(var i=0,a=r;i<a.length;i++)for(var o=a[i],s=0,l=o;s<l.length;s++){var u=l[s],c=u.mappingData,f=c.x,h=c.y;u.x=(0,v.isArray)(f)?f[f.length-1]:f,u.y=(0,v.isArray)(h)?h[h.length-1]:h}var d=this.getTooltipCfg().shared;if(d===!1&&r.length>1){for(var g=r[0],p=Math.abs(t.y-g[0].y),m=0,_=r;m<_.length;m++){var S=_[m],M=Math.abs(t.y-S[0].y);M<=p&&(g=S,p=M)}r=[g]}return QB((0,v.flatten)(r))}return[]},e.prototype.layout=function(){},e.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var t=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}})}},e.prototype.isCursorEntered=function(t){if(this.tooltip){var r=this.tooltip.getContainer(),i=this.tooltip.get("capture");if(r&&i){var a=r.getBoundingClientRect(),o=a.x,s=a.y,l=a.width,u=a.height;return new Va(o,s,l,u).isPointIn(t)}}return!1},e.prototype.getTooltipCfg=function(){var t=this.view,r=t.getOptions().tooltip,i=this.processCustomContent(r),a=t.getTheme(),o=(0,v.get)(a,["components","tooltip"],{}),s=(0,v.get)(i,"enterable",o.enterable);return(0,v.deepMix)({},o,i,{capture:!!(s||this.isLocked)})},e.prototype.processCustomContent=function(t){if((0,v.isBoolean)(t)||!(0,v.get)(t,"customContent"))return t;var r=t.customContent,i=function(a,o){var s=r(a,o)||"";return(0,v.isString)(s)?'<div class="g2-tooltip">'+s+"</div>":s};return(0,b.__assign)((0,b.__assign)({},t),{customContent:i})},e.prototype.getTitle=function(t){var r=t[0].title||t[0].name;return this.title=r,r},e.prototype.renderTooltip=function(){var t=this.view.getCanvas(),r={start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}},i=this.getTooltipCfg(),a=new TS((0,b.__assign)((0,b.__assign)({parent:t.get("el").parentNode,region:r},i),{visible:!1,crosshairs:null}));a.init(),this.tooltip=a},e.prototype.renderTooltipMarkers=function(t,r){for(var i=this.getTooltipMarkersGroup(),a=0,o=t;a<o.length;a++){var s=o[a],l=s.x,u=s.y,c=(0,b.__assign)((0,b.__assign)({fill:s.color,symbol:"circle",shadowColor:s.color},r),{x:l,y:u});i.addShape("marker",{attrs:c})}},e.prototype.renderCrosshairs=function(t,r){var i=(0,v.get)(r,["crosshairs","type"],"x");i==="x"?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(t,r)):i==="y"?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(t,r)):i==="xy"&&(this.renderXCrosshairs(t,r),this.renderYCrosshairs(t,r))},e.prototype.renderXCrosshairs=function(t,r){var i=this.getViewWithGeometry(this.view).getCoordinate();if(!!Vx(i,t)){var a,o;if(i.isRect)i.isTransposed?(a={x:i.start.x,y:t.y},o={x:i.end.x,y:t.y}):(a={x:t.x,y:i.end.y},o={x:t.x,y:i.start.y});else{var s=wh(i,t),l=i.getCenter(),u=i.getRadius();o=ji(l.x,l.y,u,s),a=l}var c=(0,v.deepMix)({start:a,end:o,container:this.getTooltipCrosshairsGroup()},(0,v.get)(r,"crosshairs",{}),this.getCrosshairsText("x",t,r));delete c.type;var f=this.xCrosshair;f?f.update(c):(f=new fe(c),f.init()),f.render(),f.show(),this.xCrosshair=f}},e.prototype.renderYCrosshairs=function(t,r){var i=this.getViewWithGeometry(this.view).getCoordinate();if(!!Vx(i,t)){var a,o;if(i.isRect){var s=void 0,l=void 0;i.isTransposed?(s={x:t.x,y:i.end.y},l={x:t.x,y:i.start.y}):(s={x:i.start.x,y:t.y},l={x:i.end.x,y:t.y}),a={start:s,end:l},o="Line"}else a={center:i.getCenter(),radius:r0(i,t),startAngle:i.startAngle,endAngle:i.endAngle},o="Circle";a=(0,v.deepMix)({container:this.getTooltipCrosshairsGroup()},a,(0,v.get)(r,"crosshairs",{}),this.getCrosshairsText("y",t,r)),delete a.type;var u=this.yCrosshair;u?i.isRect&&u.get("type")==="circle"||!i.isRect&&u.get("type")==="line"?(u=new O[o](a),u.init()):u.update(a):(u=new O[o](a),u.init()),u.render(),u.show(),this.yCrosshair=u}},e.prototype.getCrosshairsText=function(t,r,i){var a=(0,v.get)(i,["crosshairs","text"]),o=(0,v.get)(i,["crosshairs","follow"]),s=this.items;if(a){var l=this.getViewWithGeometry(this.view),u=s[0],c=l.getXScale(),f=l.getYScales()[0],h=void 0,d=void 0;if(o){var g=this.view.getCoordinate().invert(r);h=c.invert(g.x),d=f.invert(g.y)}else h=u.data[c.field],d=u.data[f.field];var p=t==="x"?h:d;return(0,v.isFunction)(a)?a=a(t,p,s,r):a.content=p,{text:a}}},e.prototype.getGuideGroup=function(){if(!this.guideGroup){var t=this.view.foregroundGroup;this.guideGroup=t.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},e.prototype.getTooltipMarkersGroup=function(){var t=this.tooltipMarkersGroup;return t&&!t.destroyed?(t.clear(),t.show()):(t=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"}),t.toFront(),this.tooltipMarkersGroup=t),t},e.prototype.getTooltipCrosshairsGroup=function(){var t=this.tooltipCrosshairsGroup;return t||(t=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1}),t.toBack(),this.tooltipCrosshairsGroup=t),t},e.prototype.findItemsFromView=function(t,r){if(t.getOptions().tooltip===!1)return[];for(var i=this.getTooltipCfg(),a=Jx(t,r,i),o=0,s=t.views;o<s.length;o++){var l=s[o];a=a.concat(this.findItemsFromView(l,r))}return a},e.prototype.getViewWithGeometry=function(t){var r=this;return t.geometries.length?t:(0,v.find)(t.views,function(i){return r.getViewWithGeometry(i)})},e.prototype.getItemsAfterProcess=function(t){var r=this.getTooltipCfg().customItems,i=r||function(a){return a};return i(t)},e}(zc),t1=JB,vE={};function e1(n){return vE[n.toLowerCase()]}function ho(n,e){vE[n.toLowerCase()]=e}var Th={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},qB={interval:function(n){return{enter:{animation:n.isRect?n.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:n.isPolar&&n.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},gE={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(n){var e;return n.isRect?e=n.isTransposed?"grow-in-x":"grow-in-y":(e="grow-in-xy",n.isPolar&&n.isTransposed&&(e="wave-in")),{animation:e}},schema:function(n){var e;return n.isRect?e=n.isTransposed?"grow-in-x":"grow-in-y":e="grow-in-xy",{animation:e}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function tF(n,e){return{delay:(0,v.isFunction)(n.delay)?n.delay(e):n.delay,easing:(0,v.isFunction)(n.easing)?n.easing(e):n.easing,duration:(0,v.isFunction)(n.duration)?n.duration(e):n.duration,callback:n.callback,repeat:n.repeat}}function pE(n,e,t){var r=qB[n];return r&&((0,v.isFunction)(r)&&(r=r(e)),r=(0,v.deepMix)({},Th,r),t)?r[t]:r}function Ih(n,e,t){var r=(0,v.get)(n.get("origin"),"data",St),i=e.animation,a=tF(e,r);if(i){var o=e1(i);o&&o(n,a,t)}else n.animate(t.toAttrs,a)}function eF(n,e,t,r,i){if(gE[t]){var a=gE[t](r),o=e1((0,v.get)(a,"animation",""));if(o){var s=(0,b.__assign)((0,b.__assign)((0,b.__assign)({},Th.appear),a),e);n.stopAnimate(),o(n,s,{coordinate:r,minYPoint:i,toAttrs:null})}}}var r1="element-background",rF=function(n){(0,b.__extends)(e,n);function e(t){var r=n.call(this,t)||this;r.states=[];var i=t.shapeFactory,a=t.container,o=t.offscreenGroup,s=t.visible,l=s===void 0?!0:s;return r.shapeFactory=i,r.container=a,r.offscreenGroup=o,r.visible=l,r}return e.prototype.draw=function(t,r){r===void 0&&(r=!1),this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.drawShape(t,r),this.visible===!1&&this.changeVisible(!1)},e.prototype.update=function(t){var r=this,i=r.shapeFactory,a=r.shape;if(!!a){this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.setShapeInfo(a,t);var o=this.getOffscreenGroup(),s=i.drawShape(this.shapeType,t,o);s.cfg.data=this.data,s.cfg.origin=t,s.cfg.element=this,this.syncShapeStyle(a,s,this.getStates(),this.getAnimateCfg("update"))}},e.prototype.destroy=function(){var t=this,r=t.shapeFactory,i=t.shape;if(i){var a=this.getAnimateCfg("leave");a?Ih(i,a,{coordinate:r.coordinate,toAttrs:(0,b.__assign)({},i.attr())}):i.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=void 0,this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,n.prototype.destroy.call(this)},e.prototype.changeVisible=function(t){n.prototype.changeVisible.call(this,t),t?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach(function(r){r.show()})):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach(function(r){r.hide()}))},e.prototype.setState=function(t,r){var i=this,a=i.states,o=i.shapeFactory,s=i.model,l=i.shape,u=i.shapeType,c=a.indexOf(t);if(r){if(c>-1)return;a.push(t),(t==="active"||t==="selected")&&(l==null||l.toFront())}else{if(c===-1)return;a.splice(c,1),(t==="active"||t==="selected")&&(l==null||l.toBack())}var f=o.drawShape(u,s,this.getOffscreenGroup());a.length?this.syncShapeStyle(l,f,a,null):this.syncShapeStyle(l,f,["reset"],null),f.remove(!0);var h={state:t,stateStatus:r,element:this,target:this.container};this.container.emit("statechange",h),xh(this.shape,"statechange",h)},e.prototype.clearStates=function(){var t=this,r=this.states;(0,v.each)(r,function(i){t.setState(i,!1)}),this.states=[]},e.prototype.hasState=function(t){return this.states.includes(t)},e.prototype.getStates=function(){return this.states},e.prototype.getData=function(){return this.data},e.prototype.getModel=function(){return this.model},e.prototype.getBBox=function(){var t=this,r=t.shape,i=t.labelShape,a={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return r&&(a=r.getCanvasBBox()),i&&i.forEach(function(o){var s=o.getCanvasBBox();a.x=Math.min(s.x,a.x),a.y=Math.min(s.y,a.y),a.minX=Math.min(s.minX,a.minX),a.minY=Math.min(s.minY,a.minY),a.maxX=Math.max(s.maxX,a.maxX),a.maxY=Math.max(s.maxY,a.maxY)}),a.width=a.maxX-a.minX,a.height=a.maxY-a.minY,a},e.prototype.getStatesStyle=function(){if(!this.statesStyle){var t=this,r=t.shapeType,i=t.geometry,a=t.shapeFactory,o=i.stateOption,s=a.defaultShapeType,l=a.theme[r]||a.theme[s];this.statesStyle=(0,v.deepMix)({},l,o)}return this.statesStyle},e.prototype.getStateStyle=function(t,r){var i=this.getStatesStyle(),a=(0,v.get)(i,[t,"style"],{}),o=a[r]||a;return(0,v.isFunction)(o)?o(this):o},e.prototype.getAnimateCfg=function(t){var r=this,i=this.animate;if(i){var a=i[t];return a&&(0,b.__assign)((0,b.__assign)({},a),{callback:function(){var o;(0,v.isFunction)(a.callback)&&a.callback(),(o=r.geometry)===null||o===void 0||o.emit(It.AFTER_DRAW_ANIMATE)}})}return null},e.prototype.drawShape=function(t,r){var i;r===void 0&&(r=!1);var a=this,o=a.shapeFactory,s=a.container,l=a.shapeType;if(this.shape=o.drawShape(l,t,s),this.shape){this.setShapeInfo(this.shape,t);var u=this.shape.cfg.name;u?(0,v.isString)(u)&&(this.shape.cfg.name=["element",u]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var c=r?"enter":"appear",f=this.getAnimateCfg(c);f&&((i=this.geometry)===null||i===void 0||i.emit(It.BEFORE_DRAW_ANIMATE),Ih(this.shape,f,{coordinate:o.coordinate,toAttrs:(0,b.__assign)({},this.shape.attr())}))}},e.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},e.prototype.setShapeInfo=function(t,r){var i=this;if(t.cfg.origin=r,t.cfg.element=this,t.isGroup()){var a=t.get("children");a.forEach(function(o){i.setShapeInfo(o,r)})}},e.prototype.syncShapeStyle=function(t,r,i,a,o){var s=this,l;if(i===void 0&&(i=[]),o===void 0&&(o=0),!(!t||!r)){var u=t.get("clipShape"),c=r.get("clipShape");if(this.syncShapeStyle(u,c,i,a),t.isGroup())for(var f=t.get("children"),h=r.get("children"),d=0;d<f.length;d++)this.syncShapeStyle(f[d],h[d],i,a,o+d);else{if(!(0,v.isEmpty)(i)&&!(0,v.isEqual)(i,["reset"])){var g=t.get("name");(0,v.isArray)(g)&&(g=g[1]),(0,v.each)(i,function(m){if(r.get("name")!==r1){var _=s.getStateStyle(m,g||o);r.attr(_)}})}var p=OS(t,r);this.animate?a?((l=this.geometry)===null||l===void 0||l.emit(It.BEFORE_DRAW_ANIMATE),Ih(t,a,{coordinate:this.shapeFactory.coordinate,toAttrs:p,shapeModel:this.model})):(0,v.isEmpty)(i)?(t.stopAnimate(),t.animate(p,{duration:300})):t.attr(p):t.attr(p)}}},e.prototype.getShapeType=function(t){var r=(0,v.get)(t,"shape");return(0,v.isArray)(r)?r[0]:r},e}(st),n1=rF,yE={},mE={};function xE(n){return yE[n.toLowerCase()]}function Hv(n,e){yE[n.toLowerCase()]=e}function bE(n){return mE[n.toLowerCase()]}function eo(n,e){mE[n.toLowerCase()]=e}var nF={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(n,e){var t=this.getShape(n);return t.getPoints?t.getPoints(e):this.getDefaultPoints(e)},getShape:function(n){var e=this[n]||this[this.defaultShapeType];return e.coordinate=this.coordinate,e},getDefaultPoints:function(){return[]},getDefaultStyle:function(n){return(0,v.get)(n,[this.defaultShapeType,"default","style"],{})},getMarker:function(n,e){var t=this.getShape(n);if(!t.getMarker){var r=this.defaultShapeType;t=this.getShape(r)}var i=this.theme,a=(0,v.get)(i,[n,"default"],{}),o=t.getMarker(e);return(0,v.deepMix)({},a,o)},drawShape:function(n,e,t){var r=this.getShape(n);return r.draw(e,t)}},iF={coordinate:null,parsePath:function(n){var e=this.coordinate,t=(0,Ma.tr)(n);return e.isPolar?t=vB(e,t):t=dB(e,t),t},parsePoint:function(n){var e=this.coordinate;return e.convert(n)},parsePoints:function(n){var e=this.coordinate;return n.map(function(t){return e.convert(t)})},draw:function(n,e){}},i1={};function Cl(n,e){var t=(0,v.upperFirst)(n),r=(0,b.__assign)((0,b.__assign)((0,b.__assign)({},nF),e),{geometryType:n});return i1[t]=r,r}function Bn(n,e,t){var r=(0,v.upperFirst)(n),i=i1[r],a=(0,b.__assign)((0,b.__assign)({},iF),t);return i[e]=a,a}function a1(n){var e=(0,v.upperFirst)(n);return i1[e]}function aF(n,e,t){if(t===void 0&&(t={}),!e)return[n];var r=(0,v.groupToMap)(n,e),i=[];if(e.length===1&&t[e[0]])for(var a=t[e[0]],o=0,s=a;o<s.length;o++){var l=s[o],u=r["_"+l];u&&i.push(u)}else for(var c in r)if(r.hasOwnProperty(c)){var f=r[c];i.push(f)}return i}function _E(n,e){return(0,v.some)(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],function(t){return!(0,v.isEqual)(n[t],e[t])})}function jv(n){return(0,v.isArray)(n)?n:n.split("*")}function oF(n,e){var t=[];return(0,v.each)(e,function(r,i){var a=i.split(" ")[0];a===n&&t.push(r)}),t}var sF=function(n){(0,b.__extends)(e,n);function e(t){var r=n.call(this,t)||this;r.type="base",r.attributes={},r.elements=[],r.elementsMap={},r.animateOption=!0,r.attributeOption={},r.lastElementsMap={},r.generatePoints=!1,r.beforeMappingData=null,r.adjusts={},r.idFields=[],r.hasSorted=!1,r.isCoordinateChanged=!1;var i=t.container,a=t.labelsContainer,o=t.coordinate,s=t.data,l=t.sortable,u=l===void 0?!1:l,c=t.visible,f=c===void 0?!0:c,h=t.theme,d=t.scales,g=d===void 0?{}:d,p=t.scaleDefs,m=p===void 0?{}:p,_=t.intervalPadding,S=t.dodgePadding,M=t.maxColumnWidth,R=t.minColumnWidth,F=t.columnWidthRatio,V=t.roseWidthRatio,nt=t.multiplePieWidthRatio,at=t.zIndexReversed;return r.container=i,r.labelsContainer=a,r.coordinate=o,r.data=s,r.sortable=u,r.visible=f,r.userTheme=h,r.scales=g,r.scaleDefs=m,r.intervalPadding=_,r.dodgePadding=S,r.maxColumnWidth=M,r.minColumnWidth=R,r.columnWidthRatio=F,r.roseWidthRatio=V,r.multiplePieWidthRatio=nt,r.zIndexReversed=at,r}return e.prototype.position=function(t){var r=t;(0,v.isPlainObject)(t)||(r={fields:jv(t)});var i=(0,v.get)(r,"fields");return i.length===1&&(i.unshift("1"),(0,v.set)(r,"fields",i)),(0,v.set)(this.attributeOption,"position",r),this},e.prototype.color=function(t,r){return this.createAttrOption("color",t,r),this},e.prototype.shape=function(t,r){return this.createAttrOption("shape",t,r),this},e.prototype.size=function(t,r){return this.createAttrOption("size",t,r),this},e.prototype.adjust=function(t){var r=t;return((0,v.isString)(t)||(0,v.isPlainObject)(t))&&(r=[t]),(0,v.each)(r,function(i,a){(0,v.isObject)(i)||(r[a]={type:i})}),this.adjustOption=r,this},e.prototype.style=function(t,r){if((0,v.isString)(t)){var i=jv(t);this.styleOption={fields:i,callback:r}}else{var a=t,i=a.fields,o=a.callback,s=a.cfg;i||o||s?this.styleOption=t:this.styleOption={cfg:t}}return this},e.prototype.tooltip=function(t,r){if((0,v.isString)(t)){var i=jv(t);this.tooltipOption={fields:i,callback:r}}else this.tooltipOption=t;return this},e.prototype.animate=function(t){return this.animateOption=t,this},e.prototype.label=function(t,r,i){if((0,v.isString)(t)){var a={},o=jv(t);a.fields=o,(0,v.isFunction)(r)?a.callback=r:(0,v.isPlainObject)(r)&&(a.cfg=r),i&&(a.cfg=i),this.labelOption=a}else this.labelOption=t;return this},e.prototype.state=function(t){return this.stateOption=t,this},e.prototype.customInfo=function(t){return this.customOption=t,this},e.prototype.init=function(t){t===void 0&&(t={}),this.setCfg(t),this.initAttributes(),this.processData(this.data),this.adjustScale()},e.prototype.update=function(t){t===void 0&&(t={});var r=t.data,i=t.isDataChanged,a=t.isCoordinateChanged,o=this,s=o.attributeOption,l=o.lastAttributeOption;(0,v.isEqual)(s,l)?r&&(i||!(0,v.isEqual)(r,this.data))?(this.setCfg(t),this.initAttributes(),this.processData(r)):this.setCfg(t):this.init(t),this.adjustScale(),this.isCoordinateChanged=a},e.prototype.paint=function(t){var r=this;t===void 0&&(t=!1),this.animateOption&&(this.animateOption=(0,v.deepMix)({},pE(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elements=[],this.elementsMap={};var i=this.getOffscreenGroup();i.clear();for(var a=this.beforeMappingData,o=this.beforeMapping(a),s=[],l=0,u=o.length;l<u;l++){var c=o[l],f=this.mapping(c);s.push(f),this.createElements(f,l,t)}if(this.canDoGroupAnimation(t)){var h=this.container,d=this.type,g=this.coordinate,p=(0,v.get)(this.animateOption,"appear"),m=this.getYScale(),_=g.convert({x:0,y:m.scale(this.getYMinValue())});eF(h,p,d,g,_)}this.labelOption&&this.renderLabels((0,v.flatten)(s),t),this.dataArray=s,(0,v.each)(this.lastElementsMap,function(S){S.animate=r.animateOption,S.destroy()}),this.lastElementsMap=this.elementsMap,this.lastAttributeOption=(0,b.__assign)({},this.attributeOption),this.visible===!1&&this.changeVisible(!1)},e.prototype.clear=function(){var t=this,r=t.container,i=t.geometryLabel,a=t.offscreenGroup;r&&r.clear(),i&&i.clear(),a&&a.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},e.prototype.destroy=function(){this.clear();var t=this.container;t.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,n.prototype.destroy.call(this)},e.prototype.getGroupScales=function(){return this.groupScales},e.prototype.getAttribute=function(t){return this.attributes[t]},e.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},e.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},e.prototype.getGroupAttributes=function(){var t=[];return(0,v.each)(this.attributes,function(r){ot.includes(r.type)&&t.push(r)}),t},e.prototype.getDefaultValue=function(t){var r,i=this.getAttribute(t);return i&&(0,v.isEmpty)(i.scales)&&(r=i.values[0]),r},e.prototype.getAttributeValues=function(t,r){for(var i=[],a=t.scales,o=0,s=a.length;o<s;o++){var l=a[o],u=l.field;l.isIdentity?i.push(l.values):i.push(r[u])}return t.mapping.apply(t,i)},e.prototype.getAdjust=function(t){return this.adjusts[t]},e.prototype.getShapeMarker=function(t,r){var i=this.getShapeFactory();return i.getMarker(t,r)},e.prototype.getElementsBy=function(t){return this.elements.filter(function(r){return t(r)})},e.prototype.getElementId=function(t){t=(0,v.isArray)(t)?t[0]:t;var r=t[St];if(this.idFields.length){for(var i=r[this.idFields[0]],a=1;a<this.idFields.length;a++)i+="-"+r[this.idFields[a]];return i}var o=this.type,s=this.getXScale(),l=this.getYScale(),u=s.field||"x",c=l.field||"y",f=r[c],h;s.type==="identity"?h=s.values[0]:h=r[u];var d;o==="interval"||o==="schema"?d=""+h:o==="line"||o==="area"||o==="path"?d=o:d=h+"-"+f;var g=this.groupScales;(0,v.isEmpty)(g)&&(g=(0,v.get)(this.getAttribute("color"),"scales",[]));for(var a=0,p=g.length;a<p;a++){var m=g[a],_=m.field;d=d+"-"+r[_]}var S=this.getAdjust("dodge");if(S){var M=S.dodgeBy;M&&(d=d+"-"+r[M])}return this.getAdjust("jitter")&&(d=d+"-"+t.x+"-"+t.y),d},e.prototype.getScaleFields=function(){var t=[],r={},i=this,a=i.attributeOption,o=i.labelOption,s=i.tooltipOption;for(var l in a)if(a.hasOwnProperty(l)){var u=a[l];u.fields?xu(u.fields,t,r):u.values&&xu(u.values,t,r)}return o&&o.fields&&xu(o.fields,t,r),(0,v.isObject)(s)&&s.fields&&xu(s.fields,t,r),t},e.prototype.changeVisible=function(t){n.prototype.changeVisible.call(this,t);for(var r=this.elements,i=0,a=r.length;i<a;i++){var o=r[i];o.changeVisible(t)}t?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},e.prototype.getGroupFields=function(){for(var t=[],r={},i=0,a=ot.length;i<a;i++){var o=ot[i],s=this.attributeOption[o];s&&s.fields&&xu(s.fields,t,r)}return t},e.prototype.getXYFields=function(){var t=this.attributeOption.position.fields,r=t[0],i=t[1];return[r,i]},e.prototype.getShapes=function(){return this.elements.map(function(t){return t.shape})},e.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},e.prototype.sort=function(t){if(!this.hasSorted)for(var r=this.getXScale(),i=r.field,a=0;a<t.length;a++){var o=t[a];o.sort(function(s,l){return r.translate(s[St][i])-r.translate(l[St][i])})}this.hasSorted=!0},e.prototype.adjustScale=function(){var t=this.getYScale();t&&this.getAdjust("stack")&&this.updateStackRange(t,this.beforeMappingData)},e.prototype.getShapeFactory=function(){var t=this.shapeType;if(!!a1(t))return this.shapeFactory||(this.shapeFactory=(0,v.clone)(a1(t))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[t]||{},this.shapeFactory},e.prototype.createShapePointsCfg=function(t){var r=this.getXScale(),i=this.getYScale(),a=this.normalizeValues(t[r.field],r),o;return i?o=this.normalizeValues(t[i.field],i):o=t.y?t.y:.1,{x:a,y:o,y0:i?i.scale(this.getYMinValue()):void 0}},e.prototype.createElement=function(t,r){r===void 0&&(r=!1);var i=this.container,a=this.getDrawCfg(t),o=this.getShapeFactory(),s=new n1({shapeFactory:o,container:i,offscreenGroup:this.getOffscreenGroup()});return s.animate=this.animateOption,s.geometry=this,s.draw(a,r),s},e.prototype.getDrawCfg=function(t){var r=t[St],i={mappingData:t,data:r,x:t.x,y:t.y,color:t.color,size:t.size,isInCircle:this.coordinate.isPolar,customInfo:this.customOption},a=t.shape;!a&&this.getShapeFactory()&&(a=this.getShapeFactory().defaultShapeType),i.shape=a;var o=this.theme.geometries[this.shapeType];i.defaultStyle=(0,v.get)(o,[a,"default"],{}).style,!i.defaultStyle&&this.getShapeFactory()&&(i.defaultStyle=this.getShapeFactory().getDefaultStyle(o));var s=this.styleOption;return s&&(i.style=this.getStyleCfg(s,r)),this.generatePoints&&(i.points=t.points,i.nextPoints=t.nextPoints),i},e.prototype.createElements=function(t,r,i){i===void 0&&(i=!1);for(var a=this,o=a.lastElementsMap,s=a.elementsMap,l=a.elements,u=0,c=t.length;u<c;u++){var f=t[u],h=this.getElementId(f);s[h]&&(h=h+"-"+r+"-"+u);var d=o[h];if(!d)d=this.createElement(f,i);else{var g=this.getDrawCfg(f),p=d.getModel();(this.isCoordinateChanged||_E(g,p))&&(d.animate=this.animateOption,d.update(g)),delete o[h]}l.push(d),s[h]=d}if(this.zIndexReversed){var m=l.length;l.forEach(function(_,S){_.shape.setZIndex(m-S)})}return l},e.prototype.getLabelType=function(){var t=this,r=t.labelOption,i=t.coordinate,a=t.type,o=i.type,s=i.isTransposed,l=(0,v.get)(r,["cfg","type"]);return l||(o==="polar"?l=s?"pie":"polar":o==="theta"?l="pie":a==="interval"||a==="polygon"?l="interval":l="base"),l},e.prototype.getYMinValue=function(){var t=this.getYScale(),r=t.min,i=t.max,a;return r>=0?a=r:i<=0?a=i:a=0,a},e.prototype.createAttrOption=function(t,r,i){if((0,v.isNil)(r)||(0,v.isObject)(r))(0,v.isObject)(r)&&(0,v.isEqual)(Object.keys(r),["values"])?(0,v.set)(this.attributeOption,t,{fields:r.values}):(0,v.set)(this.attributeOption,t,r);else{var a={};(0,v.isNumber)(r)?a.values=[r]:a.fields=jv(r),i&&((0,v.isFunction)(i)?a.callback=i:a.values=i),(0,v.set)(this.attributeOption,t,a)}},e.prototype.initAttributes=function(){var t=this,r=this,i=r.attributes,a=r.attributeOption,o=r.theme,s=r.shapeType;this.groupScales=[];var l={},u=function(h){if(a.hasOwnProperty(h)){var d=a[h];if(!d)return{value:void 0};var g=(0,b.__assign)({},d),p=g.callback,m=g.values,_=g.fields,S=_===void 0?[]:_,M=S.map(function(F){var V=t.scales[F];return V.isCategory&&!l[F]&&ot.includes(h)&&(t.groupScales.push(V),l[F]=!0),V});g.scales=M,h!=="position"&&M.length===1&&M[0].type==="identity"?g.values=M[0].values:!p&&!m&&(h==="size"?g.values=o.sizes:h==="shape"?g.values=o.shapes[s]||[]:h==="color"&&(M.length?g.values=M[0].values.length<=10?o.colors10:o.colors20:g.values=o.colors10));var R=qa(h);i[h]=new R(g)}};for(var c in a){var f=u(c);if(typeof f=="object")return f.value}},e.prototype.processData=function(t){this.hasSorted=!1;for(var r=this.getAttribute("position").scales,i=r.filter(function(F){return F.isCategory}),a=this.groupData(t),o=[],s=0,l=a.length;s<l;s++){for(var u=a[s],c=[],f=0,h=u.length;f<h;f++){var d=u[f],g={};for(var p in d)g[p]=d[p];g[St]=d;for(var m=0,_=i;m<_.length;m++){var S=_[m],M=S.field;g[M]=S.translate(g[M])}c.push(g)}o.push(c)}var R=this.adjustData(o);return this.beforeMappingData=R,R},e.prototype.adjustData=function(t){var r=this.adjustOption,i=this,a=i.intervalPadding,o=i.dodgePadding,s=i.theme,l=this.maxColumnWidth||s.maxColumnWidth,u=this.minColumnWidth||s.minColumnWidth,c=this.columnWidthRatio||s.columnWidthRatio,f=t;if(r){var h=this.getXScale(),d=this.getYScale(),g=h.field,p=d?d.field:null,m=zv(this.coordinate),_=h.values.length,S=this.getAttribute("size"),M=void 0;S&&(M=S.values[0]);for(var R=0,F=r.length;R<F;R++){var V=r[R],nt=(0,b.__assign)({xField:g,yField:p,intervalPadding:a,dodgePadding:o,xDimensionLength:m,groupNum:_,defaultSize:M,maxColumnWidth:l,minColumnWidth:u,columnWidthRatio:c},V),at=V.type;if(at==="dodge"){var xt=[];if(h.isCategory||h.type==="identity")xt.push("x");else if(!d)xt.push("y");else throw new Error("dodge is not support linear attribute, please use category attribute!");nt.adjustNames=xt,nt.dodgeRatio=c}else if(at==="stack"){var gt=this.coordinate;if(!d){nt.height=gt.getHeight();var Tt=this.getDefaultValue("size")||3;nt.size=Tt}!gt.isTransposed&&(0,v.isNil)(nt.reverseOrder)&&(nt.reverseOrder=!0)}var Ct=Ht(at),te=new Ct(nt);f=te.process(f),this.adjusts[at]=te}}return f},e.prototype.groupData=function(t){for(var r=this.getGroupScales(),i=this.scaleDefs,a={},o=[],s=0;s<r.length;s++){var l=r[s],u=l.field;o.push(u),(0,v.get)(i,[u,"values"])&&(a[u]=i[u].values)}return aF(t,o,a)},e.prototype.updateStackRange=function(t,r){for(var i=(0,v.flatten)(r),a=t.field,o=t.min,s=t.max,l=0;l<i.length;l++){var u=i[l],c=Math.min.apply(null,u[a]),f=Math.max.apply(null,u[a]);c<o&&(o=c),f>s&&(s=f)}var h=this.scaleDefs,d={};o<t.min&&!(0,v.get)(h,[a,"min"])&&(d.min=o),s>t.max&&!(0,v.get)(h,[a,"max"])&&(d.max=s),t.change(d)},e.prototype.beforeMapping=function(t){var r=t;if(this.sortable&&this.sort(r),this.generatePoints)for(var i=0,a=r.length;i<a;i++){var o=r[i];this.generateShapePoints(o);var s=r[i+1];s&&(this.generateShapePoints(s),o[0].nextPoints=s[0].points)}return r},e.prototype.generateShapePoints=function(t){for(var r=this.getShapeFactory(),i=this.getAttribute("shape"),a=0;a<t.length;a++){var o=t[a],s=this.createShapePointsCfg(o),l=i?this.getAttributeValues(i,o):null,u=r.getShapePoints(l,s);o.points=u}},e.prototype.normalizeValues=function(t,r){var i=[];if((0,v.isArray)(t))for(var a=0;a<t.length;a++){var o=t[a];i.push(r.scale(o))}else i=r.scale(t);return i},e.prototype.mapping=function(t){for(var r=this.attributes,i=[],a=0;a<t.length;a++){var o=t[a],s={_origin:o[St],points:o.points,nextPoints:o.nextPoints};for(var l in r)if(r.hasOwnProperty(l)){var u=r[l],c=u.names,f=this.getAttributeValues(u,o);if(c.length>1)for(var h=0;h<f.length;h+=1){var d=f[h],g=c[h];s[g]=(0,v.isArray)(d)&&d.length===1?d[0]:d}else s[c[0]]=f.length===1?f[0]:f}this.convertPoint(s),i.push(s)}return i},e.prototype.convertPoint=function(t){var r=t.x,i=t.y,a,o,s,l=this.coordinate;if((0,v.isArray)(r)&&(0,v.isArray)(i)){a=[],o=[];for(var u=0,c=0,f=r.length,h=i.length;u<f&&c<h;u+=1,c+=1)s=l.convert({x:r[u],y:i[c]}),a.push(s.x),o.push(s.y)}else if((0,v.isArray)(i)){o=[];for(var d=0;d<i.length;d++){var g=i[d];s=l.convert({x:r,y:g}),a&&a!==s.x?((0,v.isArray)(a)||(a=[a]),a.push(s.x)):a=s.x,o.push(s.y)}}else if((0,v.isArray)(r)){a=[];for(var d=0;d<r.length;d++){var p=r[d];s=l.convert({x:p,y:i}),o&&o!==s.y?((0,v.isArray)(o)||(o=[o]),o.push(s.y)):o=s.y,a.push(s.x)}}else{var m=l.convert({x:r,y:i});a=m.x,o=m.y}t.x=a,t.y=o},e.prototype.getStyleCfg=function(t,r){var i=t.fields,a=i===void 0?[]:i,o=t.callback,s=t.cfg;if(s)return s;var l=a.map(function(u){return r[u]});return o.apply(void 0,l)},e.prototype.setCfg=function(t){var r=this,i=t.coordinate,a=t.data,o=t.theme,s=t.scaleDefs;i&&(this.coordinate=i),a&&(this.data=a),s&&(this.scaleDefs=s,this.idFields=[],(0,v.each)(s,function(l,u){l&&l.key&&r.idFields.push(u)})),o&&(this.theme=this.userTheme?(0,v.deepMix)({},o,this.userTheme):o)},e.prototype.renderLabels=function(t,r){r===void 0&&(r=!1);var i=this.geometryLabel;if(!i){var a=this.getLabelType(),o=xE(a);i=new o(this),this.geometryLabel=i}i.render(t,r);var s=i.labelsRenderer.shapesMap;(0,v.each)(this.elementsMap,function(l,u){var c=oF(u,s);if(c.length){l.labelShape=c;for(var f=0;f<c.length;f++)for(var h=c[f],d=h.getChildren(),g=0;g<d.length;g++){var p=d[g];p.cfg.name=["element","label"],p.cfg.element=l}}})},e.prototype.canDoGroupAnimation=function(t){return!t&&this.animateOption&&((0,v.get)(this.animateOption,"appear")===void 0||(0,v.get)(this.animateOption,"appear")&&(0,v.get)(this.animateOption,["appear","animation"])===void 0)},e}(st),Ml=sF,f0=Cn.vs;function Zv(n,e,t){var r=f0(n.getMatrix(),[["t",e,t]]);n.setMatrix(r)}function lF(n,e){var t=n.attr(),r=t.x,i=t.y,a=f0(n.getMatrix(),[["t",-r,-i],["r",e],["t",r,i]]);return a}function o1(n,e){var t=lF(n,e);n.setMatrix(t)}function oot(){return[1,0,0,0,1,0,0,0,1]}function uF(n,e){var t=n.getBBox(),r=(t.minX+t.maxX)/2,i=(t.minY+t.maxY)/2;n.applyToMatrix([r,i,1]);var a=f0(n.getMatrix(),[["t",-r,-i],["s",e,e],["t",r,i]]);n.setMatrix(a)}function Su(n){return n.find(function(e){return e.get("type")==="text"})}function s1(n,e,t){t===void 0&&(t=[0,0,0,0]);var r=n.getChildren()[0];if(r){var i=r.clone();(e==null?void 0:e.rotate)&&o1(i,-e.rotate);var a=i.getCanvasBBox(),o=a.x,s=a.y,l=a.width,u=a.height;i.destroy();var c=t;return(0,v.isNil)(c)?c=[2,2,2,2]:(0,v.isNumber)(c)&&(c=new Array(4).fill(c)),{x:o-c[3],y:s-c[0],width:l+c[1]+c[3],height:u+c[0]+c[2],rotation:(e==null?void 0:e.rotate)||0}}}function cF(n,e,t){t===void 0&&(t=0);var r=Math.max(0,Math.min(n.x+n.width+t,e.x+e.width+t)-Math.max(n.x-t,e.x-t)),i=Math.max(0,Math.min(n.y+n.height+t,e.y+e.height+t)-Math.max(n.y-t,e.y-t));return r*i}function fF(n,e){var t=n.getBBox();return(0,v.some)(e,function(r){var i=r.getBBox();return cF(t,i,2)>0})}function SE(n,e,t){var r=t.data,i=t.origin,a=t.animateCfg,o=t.coordinate,s=(0,v.get)(a,"update");n.set("data",r),n.set("origin",i),n.set("animateCfg",a),n.set("coordinate",o),n.set("visible",e.get("visible")),n.getChildren().forEach(function(l,u){var c=e.getChildByIndex(u);if(!c)n.removeChild(l),l.remove(!0);else{l.set("data",r),l.set("origin",i),l.set("animateCfg",a),l.set("coordinate",o);var f=OS(l,c);s?Ih(l,s,{toAttrs:f,coordinate:o}):l.attr(f),c.isGroup()&&SE(l,c,t)}}),(0,v.each)(e.getChildren(),function(l,u){u>=n.getCount()&&(l.destroyed||n.add(l))})}var hF=function(){function n(e){this.shapesMap={},this.lastShapesMap={};var t=e.layout,r=e.container;this.layout=t,this.container=r}return n.prototype.render=function(e,t,r){var i=this;r===void 0&&(r=!1),this.shapesMap={};var a=this.container,o=this.createOffscreenGroup();if(e.length){for(var s=0,l=e;s<l.length;s++){var u=l[s];u&&this.renderLabel(u,o)}this.doLayout(e,t),this.renderLabelLine(e),this.renderLabelBackground(e),this.adjustLabel(e)}var c=this.lastShapesMap,f=this.shapesMap;(0,v.each)(f,function(h,d){if(h.destroyed)delete f[d];else{if(c[d]){var g=h.get("data"),p=h.get("origin"),m=h.get("coordinate"),_=h.get("animateCfg"),S=c[d];SE(S,f[d],{data:g,origin:p,animateCfg:_,coordinate:m}),i.shapesMap[d]=S}else{a.add(h);var M=(0,v.get)(h.get("animateCfg"),r?"enter":"appear");M&&Ih(h,M,{toAttrs:(0,b.__assign)({},h.attr()),coordinate:h.get("coordinate")})}delete c[d]}}),(0,v.each)(c,function(h){var d=(0,v.get)(h.get("animateCfg"),"leave");d?Ih(h,d,{toAttrs:null,coordinate:h.get("coordinate")}):h.remove(!0)}),this.lastShapesMap=f,o.destroy()},n.prototype.clear=function(){this.container.clear(),this.shapesMap={},this.lastShapesMap={}},n.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null,this.lastShapesMap=null},n.prototype.renderLabel=function(e,t){var r=e.id,i=e.elementId,a=e.data,o=e.mappingData,s=e.coordinate,l=e.animate,u=e.content,c={id:r,elementId:i,data:a,origin:(0,b.__assign)((0,b.__assign)({},o),{data:o[St]}),coordinate:s},f=t.addGroup((0,b.__assign)({name:"label",animateCfg:this.animate===!1||l===null||l===!1?!1:(0,v.deepMix)({},this.animate,l)},c)),h;if(u.isGroup&&u.isGroup()||u.isShape&&u.isShape()){var d=u.getCanvasBBox(),g=d.width,p=d.height,m=(0,v.get)(e,"textAlign","left"),_=e.x,S=e.y-p/2;m==="center"?_=_-g/2:(m==="right"||m==="end")&&(_=_-g),Zv(u,_,S),h=u,f.add(u)}else{var M=(0,v.get)(e,["style","fill"]);h=f.addShape("text",(0,b.__assign)({attrs:(0,b.__assign)((0,b.__assign)({x:e.x,y:e.y,textAlign:e.textAlign,textBaseline:(0,v.get)(e,"textBaseline","middle"),text:e.content},e.style),{fill:(0,v.isNull)(M)?e.color:M})},c))}e.rotate&&o1(h,e.rotate),this.shapesMap[r]=f},n.prototype.doLayout=function(e,t){var r=this;if(this.layout){var i=(0,v.isArray)(this.layout)?this.layout:[this.layout];(0,v.each)(i,function(a){var o=bE((0,v.get)(a,"type",""));if(o){var s=[],l=[];(0,v.each)(r.shapesMap,function(u,c){s.push(u),l.push(t[u.get("elementId")])}),o(e,s,l,r.region,a.cfg)}})}},n.prototype.renderLabelLine=function(e){var t=this;(0,v.each)(e,function(r){var i=(0,v.get)(r,"coordinate");if(!(!r||!i)){var a=i.getCenter(),o=i.getRadius();if(!!r.labelLine){var s=(0,v.get)(r,"labelLine",{}),l=r.id,u=s.path;if(!u){var c=ji(a.x,a.y,o,r.angle);u=[["M",c.x,c.y],["L",r.x,r.y]]}var f=t.shapesMap[l];f.destroyed||f.addShape("path",{capture:!1,attrs:(0,b.__assign)({path:u,stroke:r.color?r.color:(0,v.get)(r,["style","fill"],"#000"),fill:null},s.style),id:l,origin:r.mappingData,data:r.data,coordinate:r.coordinate})}}})},n.prototype.renderLabelBackground=function(e){var t=this;(0,v.each)(e,function(r){var i=(0,v.get)(r,"coordinate"),a=(0,v.get)(r,"background");if(!(!a||!i)){var o=r.id,s=t.shapesMap[o];if(!s.destroyed){var l=s.getChildren()[0];if(l){var u=s1(s,r,a.padding),c=u.rotation,f=(0,b.__rest)(u,["rotation"]),h=s.addShape("rect",{attrs:(0,b.__assign)((0,b.__assign)({},f),a.style||{}),id:o,origin:r.mappingData,data:r.data,coordinate:r.coordinate});if(h.setZIndex(-1),c){var d=l.getMatrix();h.setMatrix(d)}}}}})},n.prototype.createOffscreenGroup=function(){var e=this.container,t=e.getGroupBase(),r=new t({});return r},n.prototype.adjustLabel=function(e){var t=this;(0,v.each)(e,function(r){if(r){var i=r.id,a=t.shapesMap[i];if(!a.destroyed){var o=a.findAll(function(s){return s.get("type")!=="path"});(0,v.each)(o,function(s){s&&(r.offsetX&&s.attr("x",s.attr("x")+r.offsetX),r.offsetY&&s.attr("y",s.attr("y")+r.offsetY))})}}})},n}(),dF=hF;function EE(n){var e=0;return(0,v.each)(n,function(t){e+=t}),e/n.length}var vF=function(){function n(e){this.geometry=e}return n.prototype.getLabelItems=function(e){var t=this,r=[],i=this.getLabelCfgs(e);return(0,v.each)(e,function(a,o){var s=i[o];if(!s||(0,v.isNil)(a.x)||(0,v.isNil)(a.y)){r.push(null);return}var l=(0,v.isArray)(s.content)?s.content:[s.content];s.content=l;var u=l.length;(0,v.each)(l,function(c,f){if((0,v.isNil)(c)||c===""){r.push(null);return}var h=(0,b.__assign)((0,b.__assign)({},s),t.getLabelPoint(s,a,f));h.textAlign||(h.textAlign=t.getLabelAlign(h,f,u)),h.offset<=0&&(h.labelLine=null),r.push(h)})}),r},n.prototype.render=function(e,t){t===void 0&&(t=!1);var r=this.getLabelItems(e),i=this.getLabelsRenderer(),a=this.getGeometryShapes();i.render(r,a,t)},n.prototype.clear=function(){var e=this.labelsRenderer;e&&e.clear()},n.prototype.destroy=function(){var e=this.labelsRenderer;e&&e.destroy(),this.labelsRenderer=null},n.prototype.getCoordinate=function(){return this.geometry.coordinate},n.prototype.getDefaultLabelCfg=function(e,t){var r=this.geometry,i=r.type,a=r.theme;return i==="polygon"||i==="interval"&&t==="middle"||e<0&&!["line","point","path"].includes(i)?(0,v.get)(a,"innerLabels",{}):(0,v.get)(a,"labels",{})},n.prototype.getThemedLabelCfg=function(e){var t=this.geometry,r=this.getDefaultLabelCfg(),i=t.type,a=t.theme,o;return i==="polygon"||e.offset<0&&!["line","point","path"].includes(i)?o=(0,v.deepMix)({},r,a.innerLabels,e):o=(0,v.deepMix)({},r,a.labels,e),o},n.prototype.setLabelPosition=function(e,t,r,i){},n.prototype.getLabelOffset=function(e){var t=this.getCoordinate(),r=this.getOffsetVector(e);return t.isTransposed?r[0]:r[1]},n.prototype.getLabelOffsetPoint=function(e,t,r){var i=e.offset,a=this.getCoordinate(),o=a.isTransposed,s=o?"x":"y",l=o?1:-1,u={x:0,y:0};return t>0||r===1?u[s]=i*l:u[s]=i*l*-1,u},n.prototype.getLabelPoint=function(e,t,r){var i=this.getCoordinate(),a=e.content.length;function o(m,_,S){S===void 0&&(S=!1);var M=m;return(0,v.isArray)(M)&&(e.content.length===1?S?M=EE(M):M.length<=2?M=M[m.length-1]:M=EE(M):M=M[_]),M}var s={content:e.content[r],x:0,y:0,start:{x:0,y:0},color:"#fff"},l=(0,v.isArray)(t.shape)?t.shape[0]:t.shape,u=l==="funnel"||l==="pyramid";if(this.geometry.type==="polygon"){var c=Yk(t.x,t.y);s.x=c[0],s.y=c[1]}else this.geometry.type==="interval"&&!u?(s.x=o(t.x,r,!0),s.y=o(t.y,r)):(s.x=o(t.x,r),s.y=o(t.y,r));if(u){var f=(0,v.get)(t,"nextPoints"),h=(0,v.get)(t,"points");if(f){var d=i.convert(h[1]),g=i.convert(f[1]);s.x=(d.x+g.x)/2,s.y=(d.y+g.y)/2}else if(l==="pyramid"){var d=i.convert(h[1]),g=i.convert(h[2]);s.x=(d.x+g.x)/2,s.y=(d.y+g.y)/2}}e.position&&this.setLabelPosition(s,t,r,e.position);var p=this.getLabelOffsetPoint(e,r,a);return s.start={x:s.x,y:s.y},s.x+=p.x,s.y+=p.y,s.color=t.color,s},n.prototype.getLabelAlign=function(e,t,r){var i="center",a=this.getCoordinate();if(a.isTransposed){var o=e.offset;o<0?i="right":o===0?i="center":i="left",r>1&&t===0&&(i==="right"?i="left":i==="left"&&(i="right"))}return i},n.prototype.getLabelId=function(e){var t=this.geometry,r=t.type,i=t.getXScale(),a=t.getYScale(),o=e[St],s=t.getElementId(e);return r==="line"||r==="area"?s+=" "+o[i.field]:r==="path"&&(s+=" "+o[i.field]+"-"+o[a.field]),s},n.prototype.getLabelsRenderer=function(){var e=this.geometry,t=e.labelsContainer,r=e.labelOption,i=e.canvasRegion,a=e.animateOption,o=this.geometry.coordinate,s=this.labelsRenderer;return s||(s=new dF({container:t,layout:(0,v.get)(r,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=s),s.region=i,s.animate=a?pE("label",o):!1,s},n.prototype.getLabelCfgs=function(e){var t=this,r=this.geometry,i=r.labelOption,a=r.scales,o=r.coordinate,s=i,l=s.fields,u=s.callback,c=s.cfg,f=l.map(function(d){return a[d]}),h=[];return(0,v.each)(e,function(d,g){var p=d[St],m=t.getLabelText(p,f),_;if(u){var S=l.map(function(nt){return p[nt]});if(_=u.apply(void 0,S),(0,v.isNil)(_)){h.push(null);return}}var M=(0,b.__assign)((0,b.__assign)({id:t.getLabelId(d),elementId:t.geometry.getElementId(d),data:p,mappingData:d,coordinate:o},c),_);(0,v.isFunction)(M.position)&&(M.position=M.position(p,d,g));var R=t.getLabelOffset(M.offset||0),F=t.getDefaultLabelCfg(R,M.position);M=(0,v.deepMix)({},F,M),M.offset=t.getLabelOffset(M.offset||0);var V=M.content;(0,v.isFunction)(V)?M.content=V(p,d,g):(0,v.isUndefined)(V)&&(M.content=m[0]),h.push(M)}),h},n.prototype.getLabelText=function(e,t){var r=[];return(0,v.each)(t,function(i){var a=e[i.field];(0,v.isArray)(a)?a=a.map(function(o){return i.getText(o)}):a=i.getText(a),(0,v.isNil)(a)||a===""?r.push(null):r.push(a)}),r},n.prototype.getOffsetVector=function(e){e===void 0&&(e=0);var t=this.getCoordinate(),r=0;return(0,v.isNumber)(e)&&(r=e),t.isTransposed?t.applyMatrix(r,0):t.applyMatrix(0,r)},n.prototype.getGeometryShapes=function(){var e=this.geometry,t={};return(0,v.each)(e.elementsMap,function(r,i){t[i]=r.shape}),(0,v.each)(e.getOffscreenGroup().getChildren(),function(r){var i=e.getElementId(r.get("origin").mappingData);t[i]=r}),t},n}(),h0=vF;function wE(n,e,t){if(!n)return t;var r;if(n.callback&&n.callback.length>1){var i=Array(n.callback.length-1).fill("");r=n.mapping.apply(n,(0,b.__spreadArrays)([e],i)).join("")}else r=n.mapping(e).join("");return r||t}var Uc={hexagon:function(n,e,t){var r=t/2*Math.sqrt(3);return[["M",n,e-t],["L",n+r,e-t/2],["L",n+r,e+t/2],["L",n,e+t],["L",n-r,e+t/2],["L",n-r,e-t/2],["Z"]]},bowtie:function(n,e,t){var r=t-1.5;return[["M",n-t,e-r],["L",n+t,e+r],["L",n+t,e-r],["L",n-t,e+r],["Z"]]},cross:function(n,e,t){return[["M",n-t,e-t],["L",n+t,e+t],["M",n+t,e-t],["L",n-t,e+t]]},tick:function(n,e,t){return[["M",n-t/2,e-t],["L",n+t/2,e-t],["M",n,e-t],["L",n,e+t],["M",n-t/2,e+t],["L",n+t/2,e+t]]},plus:function(n,e,t){return[["M",n-t,e],["L",n+t,e],["M",n,e-t],["L",n,e+t]]},hyphen:function(n,e,t){return[["M",n-t,e],["L",n+t,e]]},line:function(n,e,t){return[["M",n,e-t],["L",n,e+t]]}},gF=["line","cross","tick","plus","hyphen"];function pF(n,e){return(0,v.isFunction)(e)?e(n):(0,v.deepMix)({},n,e)}function yF(n,e){var t=n.symbol;if((0,v.isString)(t)&&gF.indexOf(t)!==-1){var r=(0,v.get)(n,"style",{}),i=(0,v.get)(r,"lineWidth",1),a=r.stroke||r.fill||e;n.style=(0,v.deepMix)({},n.style,{lineWidth:i,stroke:a,fill:null})}}function CE(n){var e=n.symbol;(0,v.isString)(e)&&Uc[e]&&(n.symbol=Uc[e])}function l1(n){return n.startsWith(et.LEFT)||n.startsWith(et.RIGHT)?"vertical":"horizontal"}function ME(n,e,t,r,i){var a=t.getScale(t.type);if(a.isCategory){var o=a.field,s=e.getAttribute("color"),l=e.getAttribute("shape"),u=n.getTheme().defaultColor,c=e.coordinate.isPolar;return a.getTicks().map(function(f,h){var d,g=f.text,p=f.value,m=g,_=a.invert(p),S=n.filterFieldData(o,[(d={},d[o]=_,d)]).length===0;(0,v.each)(n.views,function(nt){var at;nt.filterFieldData(o,[(at={},at[o]=_,at)]).length||(S=!0)});var M=wE(s,_,u),R=wE(l,_,"point"),F=e.getShapeMarker(R,{color:M,isInPolar:c}),V=i;return(0,v.isFunction)(V)&&(V=V(m,h,(0,b.__assign)({name:m,value:_},(0,v.deepMix)({},r,F)))),F=(0,v.deepMix)({},r,F,Co((0,b.__assign)({},V),["style"])),yF(F,M),V&&V.style&&(F.style=pF(F.style,V.style)),CE(F),{id:_,name:m,value:_,marker:F,unchecked:S}})}return[]}function mF(n,e,t){return t.map(function(r,i){var a=e;(0,v.isFunction)(a)&&(a=a(r.name,i,(0,v.deepMix)({},n,r)));var o=(0,v.deepMix)({},n,a,r.marker);return CE(o),r.marker=o,r})}function AE(n,e){var t=(0,v.get)(n,["components","legend"],{});return(0,v.deepMix)({},(0,v.get)(t,["common"],{}),(0,v.deepMix)({},(0,v.get)(t,[e],{})))}var xF="4.1.19",vs={getLegendItems:ME,translate:Zv,rotate:o1,zoom:uF,transform:f0,getAngle:Gv,getSectorPath:mu,polarToCartesian:ji,getDelegationObject:Ch,getTooltipItems:Qx},Wc={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},Qn={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},gs=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],bF=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],_F=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],SF=function(n){n===void 0&&(n={});var e=n.backgroundColor,t=e===void 0?"#141414":e,r=n.subColor,i=r===void 0?"rgba(255,255,255,0.05)":r,a=n.paletteQualitative10,o=a===void 0?gs:a,s=n.paletteQualitative20,l=s===void 0?bF:s,u=n.paletteSemanticRed,c=u===void 0?"#F4664A":u,f=n.paletteSemanticGreen,h=f===void 0?"#30BF78":f,d=n.paletteSemanticYellow,g=d===void 0?"#FAAD14":d,p=n.paletteSequence,m=p===void 0?_F:p,_=n.fontFamily,S=_===void 0?`"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`:_,M=n.brandColor,R=M===void 0?o[0]:M;return{backgroundColor:t,brandColor:R,subColor:i,paletteQualitative10:o,paletteQualitative20:l,paletteSemanticRed:c,paletteSemanticGreen:h,paletteSemanticYellow:g,paletteSequence:m,fontFamily:S,axisLineBorderColor:Qn[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:Qn[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisTickLineBorderColor:Qn[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:Qn[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:Qn[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:Qn[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:Qn[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:gs[0],legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:Qn[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendSpacing:16,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:Qn[45],legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:Qn[45],legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:Qn[65],legendPageNavigatorTextFontSize:12,sliderRailFillColor:Qn[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:Qn[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:Wc[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:Wc[25],annotationArcBorderColor:Qn[15],annotationArcBorder:1,annotationLineBorderColor:Qn[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:Qn[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:Qn[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:Qn[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:Qn[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:Qn[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Wc[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:Qn[65],overflowLabelFillColorDark:"#2c3542",overflowLabelFillColorLight:"#ffffff",overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:Wc[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:Qn[25],cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#fff",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(255,255,255,0.65)",scrollbarThumbFillColor:"rgba(0,0,0,0.35)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.45)",pointFillColor:gs[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Wc[100],pointBorderOpacity:1,pointActiveBorderColor:Qn[100],pointSelectedBorder:2,pointSelectedBorderColor:Qn[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:gs[0],hollowPointBorderOpacity:.95,hollowPointFillColor:Wc[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:Qn[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:Qn[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:gs[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:gs[0],areaFillOpacity:.25,areaActiveFillColor:gs[0],areaActiveFillOpacity:.5,areaSelectedFillColor:gs[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:gs[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:Qn[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:Qn[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:gs[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:Qn[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:Qn[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:gs[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Wc[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:Qn[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:Qn[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}},EF=SF();function wF(){return window?window.devicePixelRatio:1}function TE(n,e,t,r){var i=n-t,a=e-r;return Math.sqrt(i*i+a*a)}function Vc(n,e,t,r,i,a){return i>=n&&i<=n+t&&a>=e&&a<=e+r}function Kv(n,e){return!(e.minX>n.maxX||e.maxX<n.minX||e.minY>n.maxY||e.maxY<n.minY)}function CF(n,e){return!n||!e?n||e:{minX:Math.min(n.minX,e.minX),minY:Math.min(n.minY,e.minY),maxX:Math.max(n.maxX,e.maxX),maxY:Math.max(n.maxY,e.maxY)}}function IE(n,e){return n[0]===e[0]&&n[1]===e[1]}var MF=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,AF=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,TF=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,OE=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function PE(n,e){var t=n.match(OE);(0,v.each)(t,function(r){var i=r.split(":");e.addColorStop(i[0],i[1])})}function IF(n,e,t){var r=MF.exec(t),i=parseFloat(r[1])%360*(Math.PI/180),a=r[2],o=e.getBBox(),s,l;i>=0&&i<1/2*Math.PI?(s={x:o.minX,y:o.minY},l={x:o.maxX,y:o.maxY}):1/2*Math.PI<=i&&i<Math.PI?(s={x:o.maxX,y:o.minY},l={x:o.minX,y:o.maxY}):Math.PI<=i&&i<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},l={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},l={x:o.maxX,y:o.minY});var u=Math.tan(i),c=u*u,f=(l.x-s.x+u*(l.y-s.y))/(c+1)+s.x,h=u*(l.x-s.x+u*(l.y-s.y))/(c+1)+s.y,d=n.createLinearGradient(s.x,s.y,f,h);return PE(a,d),d}function OF(n,e,t){var r=AF.exec(t),i=parseFloat(r[1]),a=parseFloat(r[2]),o=parseFloat(r[3]),s=r[4];if(o===0){var l=s.match(OE);return l[l.length-1].split(":")[1]}var u=e.getBBox(),c=u.maxX-u.minX,f=u.maxY-u.minY,h=Math.sqrt(c*c+f*f)/2,d=n.createRadialGradient(u.minX+c*i,u.minY+f*a,0,u.minX+c/2,u.minY+f/2,o*h);return PE(s,d),d}function PF(n,e,t){if(e.get("patternSource")&&e.get("patternSource")===t)return e.get("pattern");var r,i,a=TF.exec(t),o=a[1],s=a[2];function l(){r=n.createPattern(i,o),e.set("pattern",r),e.set("patternSource",t)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return i=new Image,s.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=s,i.complete?l():(i.onload=l,i.src=i.src),r}function DF(n,e,t){if((0,v.isString)(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return IF(n,e,t);if(t[0]==="r")return OF(n,e,t);if(t[0]==="p")return PF(n,e,t)}return t}}function LF(n){var e=0,t=0,r=0,i=0;return(0,v.isArray)(n)?n.length===1?e=t=r=i=n[0]:n.length===2?(e=r=n[0],t=i=n[1]):n.length===3?(e=n[0],t=i=n[1],r=n[2]):(e=n[0],t=n[1],r=n[2],i=n[3]):e=t=r=i=n,[e,t,r,i]}function d0(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function u1(n,e){return d0(n)*d0(e)?(n[0]*e[0]+n[1]*e[1])/(d0(n)*d0(e)):1}function DE(n,e){return(n[0]*e[1]<n[1]*e[0]?-1:1)*Math.acos(u1(n,e))}function v0(n,e){var t=e[1],r=e[2],i=(0,v.mod)((0,v.toRadian)(e[3]),Math.PI*2),a=e[4],o=e[5],s=n[0],l=n[1],u=e[6],c=e[7],f=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-c)/2,h=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-c)/2,d=f*f/(t*t)+h*h/(r*r);d>1&&(t*=Math.sqrt(d),r*=Math.sqrt(d));var g=t*t*(h*h)+r*r*(f*f),p=g?Math.sqrt((t*t*(r*r)-g)/g):1;a===o&&(p*=-1),isNaN(p)&&(p=0);var m=r?p*t*h/r:0,_=t?p*-r*f/t:0,S=(s+u)/2+Math.cos(i)*m-Math.sin(i)*_,M=(l+c)/2+Math.sin(i)*m+Math.cos(i)*_,R=[(f-m)/t,(h-_)/r],F=[(-1*f-m)/t,(-1*h-_)/r],V=DE([1,0],R),nt=DE(R,F);return u1(R,F)<=-1&&(nt=Math.PI),u1(R,F)>=1&&(nt=0),o===0&&nt>0&&(nt=nt-2*Math.PI),o===1&&nt<0&&(nt=nt+2*Math.PI),{cx:S,cy:M,rx:IE(n,[u,c])?0:t,ry:IE(n,[u,c])?0:r,startAngle:V,endAngle:V+nt,xRotation:i,arcFlag:a,sweepFlag:o}}var g0=Math.sin,p0=Math.cos,c1=Math.atan2,y0=Math.PI;function LE(n,e,t,r,i,a,o){var s=e.stroke,l=e.lineWidth,u=t-i,c=r-a,f=c1(c,u),h=new m1({type:"path",canvas:n.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*p0(y0/6)+","+10*g0(y0/6)+" L0,0 L"+10*p0(y0/6)+",-"+10*g0(y0/6),stroke:s,lineWidth:l}});h.translate(i,a),h.rotateAtPoint(i,a,f),n.set(o?"startArrowShape":"endArrowShape",h)}function RE(n,e,t,r,i,a,o){var s=e.startArrow,l=e.endArrow,u=e.stroke,c=e.lineWidth,f=o?s:l,h=f.d,d=f.fill,g=f.stroke,p=f.lineWidth,m=(0,b.__rest)(f,["d","fill","stroke","lineWidth"]),_=t-i,S=r-a,M=c1(S,_);h&&(i=i-p0(M)*h,a=a-g0(M)*h);var R=new m1({type:"path",canvas:n.get("canvas"),isArrowShape:!0,attrs:(0,b.__assign)((0,b.__assign)({},m),{stroke:g||u,lineWidth:p||c,fill:d})});R.translate(i,a),R.rotateAtPoint(i,a,M),n.set(o?"startArrowShape":"endArrowShape",R)}function Xc(n,e,t,r,i){var a=c1(r-e,t-n);return{dx:p0(a)*i,dy:g0(a)*i}}function f1(n,e,t,r,i,a){typeof e.startArrow=="object"?RE(n,e,t,r,i,a,!0):e.startArrow?LE(n,e,t,r,i,a,!0):n.set("startArrowShape",null)}function h1(n,e,t,r,i,a){typeof e.endArrow=="object"?RE(n,e,t,r,i,a,!1):e.endArrow?LE(n,e,t,r,i,a,!1):n.set("startArrowShape",null)}var NE={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function Oh(n,e){var t=e.attr();for(var r in t){var i=t[r],a=NE[r]?NE[r]:r;a==="matrix"&&i?n.transform(i[0],i[1],i[3],i[4],i[6],i[7]):a==="lineDash"&&n.setLineDash?(0,v.isArray)(i)&&n.setLineDash(i):(a==="strokeStyle"||a==="fillStyle"?i=DF(n,e,i):a==="globalAlpha"&&(i=i*n.globalAlpha),n[a]=i)}}function d1(n,e,t){for(var r=0;r<e.length;r++){var i=e[r];i.cfg.visible?i.draw(n,t):i.skipDraw()}}function RF(n,e,t){var r=n.get("refreshElements");(0,v.each)(r,function(i){if(i!==n)for(var a=i.cfg.parent;a&&a!==n&&!a.cfg.refresh;)a.cfg.refresh=!0,a=a.cfg.parent}),r[0]===n?g1(e,t):v1(e,t)}function v1(n,e){for(var t=0;t<n.length;t++){var r=n[t];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&g1(r.cfg.children,e);else if(r.cfg.refresh)r.isGroup()&&v1(r.cfg.children,e);else{var i=NF(r,e);r.cfg.refresh=i,i&&r.isGroup()&&v1(r.cfg.children,e)}}}function kE(n){for(var e=0;e<n.length;e++){var t=n[e];t.cfg.hasChanged=!1,t.isGroup()&&!t.destroyed&&kE(t.cfg.children)}}function g1(n,e){for(var t=0;t<n.length;t++){var r=n[t];r.cfg.refresh=!0,r.isGroup()&&g1(r.get("children"),e)}}function NF(n,e){var t=n.cfg.cacheCanvasBBox,r=n.cfg.isInView&&t&&Kv(t,e);return r}function BE(n,e,t,r){var i=t.path,a=t.startArrow,o=t.endArrow;if(!!i){var s=[0,0],l=[0,0],u={dx:0,dy:0};e.beginPath();for(var c=0;c<i.length;c++){var f=i[c],h=f[0];if(c===0&&a&&a.d){var d=n.getStartTangent();u=Xc(d[0][0],d[0][1],d[1][0],d[1][1],a.d)}else if(c===i.length-2&&i[c+1][0]==="Z"&&o&&o.d){var g=i[c+1];if(g[0]==="Z"){var d=n.getEndTangent();u=Xc(d[0][0],d[0][1],d[1][0],d[1][1],o.d)}}else if(c===i.length-1&&o&&o.d&&i[0]!=="Z"){var d=n.getEndTangent();u=Xc(d[0][0],d[0][1],d[1][0],d[1][1],o.d)}var p=u.dx,m=u.dy;switch(h){case"M":e.moveTo(f[1]-p,f[2]-m),l=[f[1],f[2]];break;case"L":e.lineTo(f[1]-p,f[2]-m);break;case"Q":e.quadraticCurveTo(f[1],f[2],f[3]-p,f[4]-m);break;case"C":e.bezierCurveTo(f[1],f[2],f[3],f[4],f[5]-p,f[6]-m);break;case"A":{var _=void 0;r?(_=r[c],_||(_=v0(s,f),r[c]=_)):_=v0(s,f);var S=_.cx,M=_.cy,R=_.rx,F=_.ry,V=_.startAngle,nt=_.endAngle,at=_.xRotation,xt=_.sweepFlag;if(e.ellipse)e.ellipse(S,M,R,F,at,V,nt,1-xt);else{var gt=R>F?R:F,Tt=R>F?1:R/F,Ct=R>F?F/R:1;e.translate(S,M),e.rotate(at),e.scale(Tt,Ct),e.arc(0,0,gt,V,nt,1-xt),e.scale(1/Tt,1/Ct),e.rotate(-at),e.translate(-S,-M)}break}case"Z":e.closePath();break;default:break}if(h==="Z")s=l;else{var te=f.length;s=[f[te-2],f[te-1]]}}}}function FE(n,e){var t=n.get("canvas");t&&(e==="remove"&&(n._cacheCanvasBBox=n.get("cacheCanvasBBox")),n.get("hasChanged")||(n.set("hasChanged",!0),n.cfg.parent&&n.cfg.parent.get("hasChanged")||(t.refreshElement(n,e,t),t.get("autoDraw")&&t.draw())))}function kF(n){var e;if(n.destroyed)e=n._cacheCanvasBBox;else{var t=n.get("cacheCanvasBBox"),r=t&&!!(t.width&&t.height),i=n.getCanvasBBox(),a=i&&!!(i.width&&i.height);r&&a?e=CF(t,i):r?e=t:a&&(e=i)}return e}function BF(n){if(!n.length)return null;var e=[],t=[],r=[],i=[];return(0,v.each)(n,function(a){var o=kF(a);o&&(e.push(o.minX),t.push(o.minY),r.push(o.maxX),i.push(o.maxY))}),{minX:(0,v.min)(e),minY:(0,v.min)(t),maxX:(0,v.max)(r),maxY:(0,v.max)(i)}}function FF(n,e){return!n||!e||!Kv(n,e)?null:{minX:Math.max(n.minX,e.minX),minY:Math.max(n.minY,e.minY),maxX:Math.min(n.maxX,e.maxX),maxY:Math.min(n.maxY,e.maxY)}}var GF=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onCanvasChange=function(t){FE(this,t)},e.prototype.getShapeBase=function(){return C},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,r){r&&(t.save(),Oh(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,r=[],i=[];(0,v.each)(t,function(h){var d=h.cfg.cacheCanvasBBox;d&&h.cfg.isInView&&(r.push(d.minX,d.maxX),i.push(d.minY,d.maxY))});var a=null;if(r.length){var o=(0,v.min)(r),s=(0,v.max)(r),l=(0,v.min)(i),u=(0,v.max)(i);a={minX:o,minY:l,x:o,y:l,maxX:s,maxY:u,width:s-o,height:u-l};var c=this.cfg.canvas;if(c){var f=c.getViewRange();this.set("isInView",Kv(a,f))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",a)},e.prototype.draw=function(t,r){var i=this.cfg.children,a=r?this.cfg.refresh:!0;i.length&&a&&(t.save(),Oh(t,this),this._applyClip(t,this.getClip()),d1(t,i,r),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(Qt.AbstractGroup),p1=GF,zF=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return C},e.prototype.getGroupBase=function(){return p1},e.prototype.onCanvasChange=function(t){FE(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),r=this.getHitLineWidth(),i=(0,Qt.getBBoxMethod)(t),a=i(this),o=r/2,s=a.x-o,l=a.y-o,u=a.x+a.width+o,c=a.y+a.height+o;return{x:s,minX:s,y:l,minY:l,width:a.width+r,height:a.height+r,maxX:u,maxY:c}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,r){r&&(t.save(),Oh(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.draw=function(t,r){var i=this.cfg.clipShape;if(r){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var a=this.getCanvasBBox();if(!Kv(r,a)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}t.save(),Oh(t,this),this._applyClip(t,i),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var r=this.getCanvasBBox(),i=Kv(r,t);this.set("isInView",i),i?this.set("cacheCanvasBBox",r):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var r=this.attrs,i=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isFill()&&(!(0,v.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.isStroke()&&i>0&&(!(0,v.isNil)(o)&&o!==1&&(t.globalAlpha=o),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,r){var i=this.isStroke(),a=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(t,r,i,a,o)},e.prototype.isInStrokeOrPath=function(t,r,i,a,o){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(Qt.AbstractShape),ps=zF,UF=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,r,i,a,o){var s=this.attr(),l=s.x,u=s.y,c=s.r,f=o/2,h=TE(l,u,t,r);return a&&i?h<=c+f:a?h<=c:i?h>=c-f&&h<=c+f:!1},e.prototype.createPath=function(t){var r=this.attr(),i=r.x,a=r.y,o=r.r;t.beginPath(),t.arc(i,a,o,0,Math.PI*2,!1),t.closePath()},e}(ps),WF=UF;function m0(n,e,t,r){return n/(t*t)+e/(r*r)}var VF=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,r,i,a,o){var s=this.attr(),l=o/2,u=s.x,c=s.y,f=s.rx,h=s.ry,d=(t-u)*(t-u),g=(r-c)*(r-c);return a&&i?m0(d,g,f+l,h+l)<=1:a?m0(d,g,f,h)<=1:i?m0(d,g,f-l,h-l)>=1&&m0(d,g,f+l,h+l)<=1:!1},e.prototype.createPath=function(t){var r=this.attr(),i=r.x,a=r.y,o=r.rx,s=r.ry;if(t.beginPath(),t.ellipse)t.ellipse(i,a,o,s,0,0,Math.PI*2,!1);else{var l=o>s?o:s,u=o>s?1:o/s,c=o>s?s/o:1;t.save(),t.translate(i,a),t.scale(u,c),t.arc(0,0,l,0,Math.PI*2),t.restore(),t.closePath()}},e}(ps),XF=VF;function GE(n){return n instanceof HTMLElement&&(0,v.isString)(n.nodeName)&&n.nodeName.toUpperCase()==="CANVAS"}var YF=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var r=this,i=this.attrs;if((0,v.isString)(t)){var a=new Image;a.onload=function(){if(r.destroyed)return!1;r.attr("img",a),r.set("loading",!1),r._afterLoading();var o=r.get("callback");o&&o.call(r)},a.crossOrigin="Anonymous",a.src=t,this.set("loading",!0)}else t instanceof Image?(i.width||(i.width=t.width),i.height||(i.height=t.height)):GE(t)&&(i.width||(i.width=Number(t.getAttribute("width"))),i.height||(i.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(t,r,i){n.prototype.onAttrChange.call(this,t,r,i),t==="img"&&this._setImage(r)},e.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var r=this.attr(),i=r.x,a=r.y,o=r.width,s=r.height,l=r.sx,u=r.sy,c=r.swidth,f=r.sheight,h=r.img;(h instanceof Image||GE(h))&&(!(0,v.isNil)(l)&&!(0,v.isNil)(u)&&!(0,v.isNil)(c)&&!(0,v.isNil)(f)?t.drawImage(h,l,u,c,f,i,a,o,s):t.drawImage(h,i,a,o,s))},e}(ps),HF=YF;function Eu(n,e,t,r,i,a,o){var s=Math.min(n,t),l=Math.max(n,t),u=Math.min(e,r),c=Math.max(e,r),f=i/2;return a>=s-f&&a<=l+f&&o>=u-f&&o<=c+f?mi.x1.pointToLine(n,e,t,r,a,o)<=i/2:!1}var jF=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,i){n.prototype.onAttrChange.call(this,t,r,i),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),r=t.x1,i=t.y1,a=t.x2,o=t.y2,s=t.startArrow,l=t.endArrow;s&&f1(this,t,a,o,r,i),l&&h1(this,t,r,i,a,o)},e.prototype.isInStrokeOrPath=function(t,r,i,a,o){if(!i||!o)return!1;var s=this.attr(),l=s.x1,u=s.y1,c=s.x2,f=s.y2;return Eu(l,u,c,f,o,t,r)},e.prototype.createPath=function(t){var r=this.attr(),i=r.x1,a=r.y1,o=r.x2,s=r.y2,l=r.startArrow,u=r.endArrow,c={dx:0,dy:0},f={dx:0,dy:0};l&&l.d&&(c=Xc(i,a,o,s,r.startArrow.d)),u&&u.d&&(f=Xc(i,a,o,s,r.endArrow.d)),t.beginPath(),t.moveTo(i+c.dx,a+c.dy),t.lineTo(o-f.dx,s-f.dy)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),i=this.get("endArrowShape");r&&r.draw(t),i&&i.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,i=t.y1,a=t.x2,o=t.y2;return mi.x1.length(r,i,a,o)},e.prototype.getPoint=function(t){var r=this.attr(),i=r.x1,a=r.y1,o=r.x2,s=r.y2;return mi.x1.pointAt(i,a,o,s,t)},e}(ps),ZF=jF,KF={circle:function(n,e,t){return[["M",n-t,e],["A",t,t,0,1,0,n+t,e],["A",t,t,0,1,0,n-t,e]]},square:function(n,e,t){return[["M",n-t,e-t],["L",n+t,e-t],["L",n+t,e+t],["L",n-t,e+t],["Z"]]},diamond:function(n,e,t){return[["M",n-t,e],["L",n,e-t],["L",n+t,e],["L",n,e+t],["Z"]]},triangle:function(n,e,t){var r=t*Math.sin(1/3*Math.PI);return[["M",n-t,e+r],["L",n,e-r],["L",n+t,e+r],["Z"]]},"triangle-down":function(n,e,t){var r=t*Math.sin(1/3*Math.PI);return[["M",n-t,e-r],["L",n+t,e-r],["L",n,e+r],["Z"]]}},$F=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(t,r,i){n.prototype.onAttrChange.call(this,t,r,i),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return(0,v.isNil)(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t=this.attr(),r=t.x,i=t.y,a=t.symbol||"circle",o=this._getR(t),s,l;if((0,v.isFunction)(a))s=a,l=s(r,i,o),l=(0,Ma.wb)(l);else{if(s=e.Symbols[a],!s)return console.warn(a+" marker is not supported."),null;l=s(r,i,o)}return l},e.prototype.createPath=function(t){var r=this._getPath(),i=this.get("paramsCache");BE(this,t,{path:r},i)},e.Symbols=KF,e}(ps),QF=$F;function zE(n,e,t){var r=(0,Qt.getOffScreenContext)();return n.createPath(r),r.isPointInPath(e,t)}var JF=1e-6;function y1(n){return Math.abs(n)<JF?0:n<0?-1:1}function qF(n,e,t){return(t[0]-n[0])*(e[1]-n[1])==(e[0]-n[0])*(t[1]-n[1])&&Math.min(n[0],e[0])<=t[0]&&t[0]<=Math.max(n[0],e[0])&&Math.min(n[1],e[1])<=t[1]&&t[1]<=Math.max(n[1],e[1])}function UE(n,e,t){var r=!1,i=n.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=n[a],s=n[(a+1)%i];if(qF(o,s,[e,t]))return!0;y1(o[1]-t)>0!=y1(s[1]-t)>0&&y1(e-(t-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function $v(n,e,t,r,i,a,o,s){var l=(Math.atan2(s-e,o-n)+Math.PI*2)%(Math.PI*2);if(l<r||l>i)return!1;var u={x:n+t*Math.cos(l),y:e+t*Math.sin(l)};return TE(u.x,u.y,o,s)<=a/2}var t3=Cn.vs;function e3(n){for(var e=!1,t=n.length,r=0;r<t;r++){var i=n[r],a=i[0];if(a==="C"||a==="A"||a==="Q"){e=!0;break}}return e}function r3(n,e,t,r,i){for(var a=!1,o=e/2,s=0;s<n.length;s++){var l=n[s],u=l.currentPoint,c=l.params,f=l.prePoint,h=l.box;if(!(h&&!Vc(h.x-o,h.y-o,h.width+e,h.height+e,t,r))){switch(l.command){case"L":case"Z":a=Eu(f[0],f[1],u[0],u[1],e,t,r);break;case"Q":var d=mi.lD.pointDistance(f[0],f[1],c[1],c[2],c[3],c[4],t,r);a=d<=e/2;break;case"C":var g=mi.Ll.pointDistance(f[0],f[1],c[1],c[2],c[3],c[4],c[5],c[6],t,r,i);a=g<=e/2;break;case"A":var p=l.arcParams,m=p.cx,_=p.cy,S=p.rx,M=p.ry,R=p.startAngle,F=p.endAngle,V=p.xRotation,nt=[t,r,1],at=S>M?S:M,xt=S>M?1:S/M,gt=S>M?M/S:1,Tt=t3(null,[["t",-m,-_],["r",-V],["s",1/xt,1/gt]]);Eo(nt,nt,Tt),a=$v(0,0,at,R,F,e,nt[0],nt[1]);break;default:break}if(a)break}}return a}function n3(n){for(var e=n.length,t=[],r=[],i=[],a=0;a<e;a++){var o=n[a],s=o[0];s==="M"?(i.length&&(r.push(i),i=[]),i.push([o[1],o[2]])):s==="Z"?i.length&&(t.push(i),i=[]):i.push([o[1],o[2]])}return i.length>0&&r.push(i),{polygons:t,polylines:r}}var x0=(0,b.__assign)({hasArc:e3,extractPolygons:n3,isPointInStroke:r3},Qt.PathUtil);function WE(n,e,t){for(var r=!1,i=0;i<n.length;i++){var a=n[i];if(r=UE(a,e,t),r)break}return r}var i3=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(t,r,i){n.prototype.onAttrChange.call(this,t,r,i),t==="path"&&this._setPathArr(r),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=(0,Ma.wb)(t);var r=x0.hasArc(t);this.set("hasArc",r),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=(0,Ma.zx)(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t=this.attr(),r=t.startArrow,i=t.endArrow;if(r){var a=this.getStartTangent();f1(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}if(i){var a=this.getEndTangent();h1(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}},e.prototype.isInStrokeOrPath=function(t,r,i,a,o){var s=this.getSegments(),l=this.get("hasArc"),u=!1;if(i){var c=this.getTotalLength();u=x0.isPointInStroke(s,o,t,r,c)}if(!u&&a)if(l)u=zE(this,t,r);else{var f=this.attr("path"),h=x0.extractPolygons(f);u=WE(h.polygons,t,r)||WE(h.polylines,t,r)}return u},e.prototype.createPath=function(t){var r=this.attr(),i=this.get("paramsCache");BE(this,t,r,i)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),i=this.get("endArrowShape");r&&r.draw(t),i&&i.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,v.isNil)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var i,a,o=this.get("curve");if(!r||r.length===0)return o?{x:o[0][1],y:o[0][2]}:null;(0,v.each)(r,function(c,f){t>=c[0]&&t<=c[1]&&(i=(t-c[0])/(c[1]-c[0]),a=f)});var s=o[a];if((0,v.isNil)(s)||(0,v.isNil)(a))return null;var l=s.length,u=o[a+1];return mi.Ll.pointAt(s[l-2],s[l-1],u[1],u[2],u[3],u[4],u[5],u[6],i)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",x0.pathToCurve(t))},e.prototype._setTcache=function(){var t=0,r=0,i=[],a,o,s,l,u=this.get("curve");if(!!u){if((0,v.each)(u,function(c,f){s=u[f+1],l=c.length,s&&(t+=mi.Ll.length(c[l-2],c[l-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}(0,v.each)(u,function(c,f){s=u[f+1],l=c.length,s&&(a=[],a[0]=r/t,o=mi.Ll.length(c[l-2],c[l-1],s[1],s[2],s[3],s[4],s[5],s[6]),r+=o||0,a[1]=r/t,i.push(a))}),this.set("tCache",i)}},e.prototype.getStartTangent=function(){var t=this.getSegments(),r;if(t.length>1){var i=t[0].currentPoint,a=t[1].currentPoint,o=t[1].startTangent;r=[],o?(r.push([i[0]-o[0],i[1]-o[1]]),r.push([i[0],i[1]])):(r.push([a[0],a[1]]),r.push([i[0],i[1]]))}return r},e.prototype.getEndTangent=function(){var t=this.getSegments(),r=t.length,i;if(r>1){var a=t[r-2].currentPoint,o=t[r-1].currentPoint,s=t[r-1].endTangent;i=[],s?(i.push([o[0]-s[0],o[1]-s[1]]),i.push([o[0],o[1]])):(i.push([a[0],a[1]]),i.push([o[0],o[1]]))}return i},e}(ps),m1=i3;function VE(n,e,t,r,i){var a=n.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=n[o][0],l=n[o][1],u=n[o+1][0],c=n[o+1][1];if(Eu(s,l,u,c,e,t,r))return!0}if(i){var f=n[0],h=n[a-1];if(Eu(f[0],f[1],h[0],h[1],e,t,r))return!0}return!1}var a3=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.isInStrokeOrPath=function(t,r,i,a,o){var s=this.attr().points,l=!1;return i&&(l=VE(s,o,t,r,!0)),!l&&a&&(l=UE(s,t,r)),l},e.prototype.createPath=function(t){var r=this.attr(),i=r.points;if(!(i.length<2)){t.beginPath();for(var a=0;a<i.length;a++){var o=i[a];a===0?t.moveTo(o[0],o[1]):t.lineTo(o[0],o[1])}t.closePath()}},e}(ps),o3=a3,s3=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,i){n.prototype.onAttrChange.call(this,t,r,i),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),r=this.attrs,i=r.points,a=r.startArrow,o=r.endArrow,s=i.length,l=i[0][0],u=i[0][1],c=i[s-1][0],f=i[s-1][1];a&&f1(this,t,i[1][0],i[1][1],l,u),o&&h1(this,t,i[s-2][0],i[s-2][1],c,f)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,r,i,a,o){if(!i||!o)return!1;var s=this.attr().points;return VE(s,o,t,r,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var r=this.attr(),i=r.points,a=r.startArrow,o=r.endArrow,s=i.length;if(!(i.length<2)){var l=i[0][0],u=i[0][1],c=i[s-1][0],f=i[s-1][1];if(a&&a.d){var h=Xc(l,u,i[1][0],i[1][1],a.d);l+=h.dx,u+=h.dy}if(o&&o.d){var h=Xc(i[s-2][0],i[s-2][1],c,f,o.d);c-=h.dx,f-=h.dy}t.beginPath(),t.moveTo(l,u);for(var d=0;d<s-1;d++){var g=i[d];t.lineTo(g[0],g[1])}t.lineTo(c,f)}},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),i=this.get("endArrowShape");r&&r.draw(t),i&&i.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,v.isNil)(r)?(this.set("totalLength",mi.aH.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,i=this.get("tCache");i||(this._setTcache(),i=this.get("tCache"));var a,o;return(0,v.each)(i,function(s,l){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=l)}),mi.x1.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var i=0,a=[],o,s;(0,v.each)(t,function(l,u){t[u+1]&&(o=[],o[0]=i/r,s=mi.x1.length(l[0],l[1],t[u+1][0],t[u+1][1]),i+=s,o[1]=i/r,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,i=[];return i.push([t[r-1][0],t[r-1][1]]),i.push([t[r][0],t[r][1]]),i},e}(ps),l3=s3;function u3(n,e,t,r,i,a,o){var s=i/2;return Vc(n-s,e-s,t,i,a,o)||Vc(n+t-s,e-s,i,r,a,o)||Vc(n+s,e+r-s,t,i,a,o)||Vc(n-s,e+s,i,r,a,o)}function c3(n,e,t,r,i,a,o,s){var l=a/2;return Eu(n+i,e,n+t-i,e,a,o,s)||Eu(n+t,e+i,n+t,e+r-i,a,o,s)||Eu(n+t-i,e+r,n+i,e+r,a,o,s)||Eu(n,e+r-i,n,e+i,a,o,s)||$v(n+t-i,e+i,i,1.5*Math.PI,2*Math.PI,a,o,s)||$v(n+t-i,e+r-i,i,0,.5*Math.PI,a,o,s)||$v(n+i,e+r-i,i,.5*Math.PI,Math.PI,a,o,s)||$v(n+i,e+i,i,Math.PI,1.5*Math.PI,a,o,s)}var f3=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,r,i,a,o){var s=this.attr(),l=s.x,u=s.y,c=s.width,f=s.height,h=s.radius;if(h){var g=!1;return i&&(g=c3(l,u,c,f,h,o,t,r)),!g&&a&&(g=zE(this,t,r)),g}else{var d=o/2;if(a&&i)return Vc(l-d,u-d,c+d,f+d,t,r);if(a)return Vc(l,u,c,f,t,r);if(i)return u3(l,u,c,f,o,t,r)}},e.prototype.createPath=function(t){var r=this.attr(),i=r.x,a=r.y,o=r.width,s=r.height,l=r.radius;if(t.beginPath(),l===0)t.rect(i,a,o,s);else{var u=LF(l),c=u[0],f=u[1],h=u[2],d=u[3];t.moveTo(i+c,a),t.lineTo(i+o-f,a),f!==0&&t.arc(i+o-f,a+f,f,-Math.PI/2,0),t.lineTo(i+o,a+s-h),h!==0&&t.arc(i+o-h,a+s-h,h,0,Math.PI/2),t.lineTo(i+d,a+s),d!==0&&t.arc(i+d,a+s-d,d,Math.PI/2,Math.PI),t.lineTo(i,a+c),c!==0&&t.arc(i+c,a+c,c,Math.PI,Math.PI*1.5),t.closePath()}},e}(ps),h3=f3,d3=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=(0,Qt.assembleFont)(t)},e.prototype._setText=function(t){var r=null;(0,v.isString)(t)&&t.indexOf(`
`)!==-1&&(r=t.split(`
`)),this.set("textArr",r)},e.prototype.onAttrChange=function(t,r,i){n.prototype.onAttrChange.call(this,t,r,i),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(r)},e.prototype._getSpaceingY=function(){var t=this.attrs,r=t.lineHeight,i=t.fontSize*1;return r?r-i:i*.14},e.prototype._drawTextArr=function(t,r,i){var a=this.attrs,o=a.textBaseline,s=a.x,l=a.y,u=a.fontSize*1,c=this._getSpaceingY(),f=(0,Qt.getTextHeight)(a.text,a.fontSize,a.lineHeight),h;(0,v.each)(r,function(d,g){h=l+g*(c+u)-f+u,o==="middle"&&(h+=f-u-(f-u)/2),o==="top"&&(h+=f-u),d&&(i?t.fillText(d,s,h):t.strokeText(d,s,h))})},e.prototype._drawText=function(t,r){var i=this.attr(),a=i.x,o=i.y,s=this.get("textArr");if(s)this._drawTextArr(t,s,r);else{var l=i.text;l&&(r?t.fillText(l,a,o):t.strokeText(l,a,o))}},e.prototype.strokeAndFill=function(t){var r=this.attrs,i=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isStroke()&&i>0&&(!(0,v.isNil)(o)&&o!==1&&(t.globalAlpha=a),this.stroke(t)),this.isFill()&&(!(0,v.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(ps),v3=d3;function g3(n,e){if(e){var t=(0,Qt.invert)(e);return(0,Qt.multiplyVec2)(t,n)}return n}function XE(n,e,t){var r=n.getTotalMatrix();if(r){var i=g3([e,t,1],r),a=i[0],o=i[1];return[a,o]}return[e,t]}function YE(n,e,t){if(n.isCanvas&&n.isCanvas())return!0;if(!(0,Qt.isAllowCapture)(n)||n.cfg.isInView===!1)return!1;if(n.cfg.clipShape){var r=XE(n,e,t),i=r[0],a=r[1];if(n.isClipped(i,a))return!1}var o=n.cfg.cacheCanvasBBox||n.getCanvasBBox();return e>=o.minX&&e<=o.maxX&&t>=o.minY&&t<=o.maxY}function HE(n,e,t){if(!YE(n,e,t))return null;for(var r=null,i=n.getChildren(),a=i.length,o=a-1;o>=0;o--){var s=i[o];if(s.isGroup())r=HE(s,e,t);else if(YE(s,e,t)){var l=s,u=XE(s,e,t),c=u[0],f=u[1];l.isInShape(c,f)&&(r=s)}if(r)break}return r}var p3=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},e.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return C},e.prototype.getGroupBase=function(){return p1},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||wF();return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),r=t.getContext("2d");return this.set("context",r),t},e.prototype.setDOMSize=function(t,r){n.prototype.setDOMSize.call(this,t,r);var i=this.get("context"),a=this.get("el"),o=this.getPixelRatio();a.width=o*t,a.height=o*r,o>1&&i.scale(o,o)},e.prototype.clear=function(){n.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),r=this.get("el");t.clearRect(0,0,r.width,r.height)},e.prototype.getShape=function(t,r){var i;return this.get("quickHit")?i=HE(this,t,r):i=n.prototype.getShape.call(this,t,r,null),i},e.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),r=this.getViewRange(),i;if(t.length&&t[0]===this)i=r;else if(i=BF(t),i){i.minX=Math.floor(i.minX),i.minY=Math.floor(i.minY),i.maxX=Math.ceil(i.maxX),i.maxY=Math.ceil(i.maxY),i.maxY+=1;var a=this.get("clipView");a&&(i=FF(i,r))}return i},e.prototype.refreshElement=function(t){var r=this.get("refreshElements");r.push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,v.clearAnimationFrame)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),r=this.get("el"),i=this.getChildren();t.clearRect(0,0,r.width,r.height),Oh(t,this),d1(t,i),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),r=this.get("refreshElements"),i=this.getChildren(),a=this._getRefreshRegion();a?(t.clearRect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.save(),t.beginPath(),t.rect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.clip(),Oh(t,this),RF(this,i,a),d1(t,i,a),t.restore()):r.length&&kE(r),(0,v.each)(r,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,r=this.get("drawFrame");r||(r=(0,v.requestAnimationFrame)(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",r))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(Qt.AbstractCanvas),Al=p3,y3="0.5.10",x1={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},Pn={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},sot=null;function Xo(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function jE(n){var e=x1[n.type],t=n.getParent();if(!e)throw new Error("the type "+n.type+" is not supported by svg");var r=Xo(e);if(n.get("id")&&(r.id=n.get("id")),n.set("el",r),n.set("attrs",{}),t){var i=t.get("el");i||(i=t.createDom(),t.set("el",i)),i.appendChild(r)}return r}function ZE(n,e){var t=n.get("el"),r=(0,v.toArray)(t.children).sort(e),i=document.createDocumentFragment();r.forEach(function(a){i.appendChild(a)}),t.appendChild(i)}function m3(n,e){var t=n.parentNode,r=Array.from(t.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),i=r[e],a=r.indexOf(n);if(i){if(a>e)t.insertBefore(n,i);else if(a<e){var o=r[e+1];o?t.insertBefore(n,o):t.appendChild(n)}}else t.appendChild(n)}function x3(n,e){var t=n.cfg.el,r=n.attr(),i={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(!i.dx&&!i.dy&&!i.blur&&!i.color)t.removeAttribute("filter");else{var a=e.find("filter",i);a||(a=e.addShadow(i)),t.setAttribute("filter","url(#"+a+")")}}function Qv(n){var e=n.attr().matrix;if(e){for(var t=n.cfg.el,r=[],i=0;i<9;i+=3)r.push(e[i]+","+e[i+1]);r=r.join(","),r.indexOf("NaN")===-1?t.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",e)}}function Jv(n,e){var t=n.getClip(),r=n.get("el");if(!t)r.removeAttribute("clip-path");else if(t&&!r.hasAttribute("clip-path")){jE(t),t.createPath(e);var i=e.addClip(t);r.setAttribute("clip-path","url(#"+i+")")}}function KE(n,e){e.forEach(function(t){t.draw(n)})}function $E(n,e){var t=n.get("canvas");if(t&&t.get("autoDraw")){var r=t.get("context"),i=n.getParent(),a=i?i.getChildren():[t],o=n.get("el");if(e==="remove"){var s=n.get("isClipShape");if(s){var l=o&&o.parentNode,u=l&&l.parentNode;l&&u&&u.removeChild(l)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(e==="show")o.setAttribute("visibility","visible");else if(e==="hide")o.setAttribute("visibility","hidden");else if(e==="zIndex")m3(o,a.indexOf(n));else if(e==="sort"){var c=n.get("children");c&&c.length&&ZE(n,function(f,h){return c.indexOf(f)-c.indexOf(h)?1:0})}else e==="clear"?o&&(o.innerHTML=""):e==="matrix"?Qv(n):e==="clip"?Jv(n,r):e==="attr"||e==="add"&&n.draw(r)}}var b3=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=Xo("g");this.set("el",t);var r=this.getParent();if(r){var i=r.get("el");i||(i=r.createDom(),r.set("el",i)),i.appendChild(t)}return t},e.prototype.afterAttrsChange=function(t){n.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var i=r.get("context");this.createPath(i,t)}},e.prototype.onCanvasChange=function(t){$E(this,t)},e.prototype.getShapeBase=function(){return D},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var r=this.getChildren(),i=this.get("el");this.get("destroyed")?i&&i.parentNode.removeChild(i):(i||this.createDom(),Jv(this,t),this.createPath(t),r.length&&KE(t,r))},e.prototype.createPath=function(t,r){var i=this.attr(),a=this.get("el");(0,v.each)(r||i,function(o,s){Pn[s]&&a.setAttribute(Pn[s],o)}),Qv(this)},e}(Qt.AbstractGroup),b1=b3,_3=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(t){n.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var i=r.get("context");this.draw(i,t)}},e.prototype.getShapeBase=function(){return D},e.prototype.getGroupBase=function(){return b1},e.prototype.onCanvasChange=function(t){$E(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),r=null;if(t)r=t.getBBox();else{var i=(0,Qt.getBBoxMethod)(this.get("type"));i&&(r=i(this))}if(r){var a=r.x,o=r.y,s=r.width,l=r.height,u=this.getHitLineWidth(),c=u/2,f=a-c,h=o-c,d=a+s+c,g=o+l+c;return{x:f,y:h,minX:f,minY:h,maxX:d,maxY:g,width:s+u,height:l+u}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),r=t.fill,i=t.fillStyle;return(r||i||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),r=t.stroke,i=t.strokeStyle;return(r||i)&&this.canStroke},e.prototype.draw=function(t,r){var i=this.get("el");this.get("destroyed")?i&&i.parentNode.removeChild(i):(i||jE(this),Jv(this,t),this.createPath(t,r),this.shadow(t,r),this.strokeAndFill(t,r),this.transform(r))},e.prototype.createPath=function(t,r){},e.prototype.strokeAndFill=function(t,r){var i=r||this.attr(),a=i.fill,o=i.fillStyle,s=i.stroke,l=i.strokeStyle,u=i.fillOpacity,c=i.strokeOpacity,f=i.lineWidth,h=this.get("el");this.canFill&&(r?"fill"in i?this._setColor(t,"fill",a):"fillStyle"in i&&this._setColor(t,"fill",o):this._setColor(t,"fill",a||o),u&&h.setAttribute(Pn.fillOpacity,u)),this.canStroke&&f>0&&(r?"stroke"in i?this._setColor(t,"stroke",s):"strokeStyle"in i&&this._setColor(t,"stroke",l):this._setColor(t,"stroke",s||l),c&&h.setAttribute(Pn.strokeOpacity,c),f&&h.setAttribute(Pn.lineWidth,f))},e.prototype._setColor=function(t,r,i){var a=this.get("el");if(!i){a.setAttribute(Pn[r],"none");return}if(i=i.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(i)){var o=t.find("gradient",i);o||(o=t.addGradient(i)),a.setAttribute(Pn[r],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(i)){var o=t.find("pattern",i);o||(o=t.addPattern(i)),a.setAttribute(Pn[r],"url(#"+o+")")}else a.setAttribute(Pn[r],i)},e.prototype.shadow=function(t,r){var i=this.attr(),a=r||i,o=a.shadowOffsetX,s=a.shadowOffsetY,l=a.shadowBlur,u=a.shadowColor;(o||s||l||u)&&x3(this,t)},e.prototype.transform=function(t){var r=this.attr(),i=(t||r).matrix;i&&Qv(this)},e.prototype.isInShape=function(t,r){return this.isPointInPath(t,r)},e.prototype.isPointInPath=function(t,r){var i=this.get("el"),a=this.get("canvas"),o=a.get("el").getBoundingClientRect(),s=t+o.left,l=r+o.top,u=document.elementFromPoint(s,l);return!!(u&&u.isEqualNode(i))},e.prototype.getHitLineWidth=function(){var t=this.attrs,r=t.lineWidth,i=t.lineAppendWidth;return this.isStroke()?r+i:0},e}(Qt.AbstractShape),Yo=_3,S3=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,r:0})},e.prototype.createPath=function(t,r){var i=this.attr(),a=this.get("el");(0,v.each)(r||i,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):Pn[s]&&a.setAttribute(Pn[s],o)})},e}(Yo),E3=S3,w3=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return e.prototype.createPath=function(t,r){var i=this.attr(),a=this.get("el");if((0,v.each)(r||i,function(u,c){Pn[c]&&a.setAttribute(Pn[c],u)}),typeof i.html=="function"){var o=i.html.call(this,i);if(o instanceof Element||o instanceof HTMLDocument){for(var s=a.childNodes,l=s.length-1;l>=0;l--)a.removeChild(s[l]);a.appendChild(o)}else a.innerHTML=o}else a.innerHTML=i.html},e}(Yo),C3=w3,M3=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,r){var i=this.attr(),a=this.get("el");(0,v.each)(r||i,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):Pn[s]&&a.setAttribute(Pn[s],o)})},e}(Yo),A3=M3,T3=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,r){var i=this,a=this.attr(),o=this.get("el");(0,v.each)(r||a,function(s,l){l==="img"?i._setImage(a.img):Pn[l]&&o.setAttribute(Pn[l],s)})},e.prototype.setAttr=function(t,r){this.attrs[t]=r,t==="img"&&this._setImage(r)},e.prototype._setImage=function(t){var r=this.attr(),i=this.get("el");if((0,v.isString)(t))i.setAttribute("href",t);else if(t instanceof window.Image)r.width||(i.setAttribute("width",t.width),this.attr("width",t.width)),r.height||(i.setAttribute("height",t.height),this.attr("height",t.height)),i.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,v.isString)(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")i.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var a=document.createElement("canvas");a.setAttribute("width",""+t.width),a.setAttribute("height",""+t.height),a.getContext("2d").putImageData(t,0,0),r.width||(i.setAttribute("width",""+t.width),this.attr("width",t.width)),r.height||(i.setAttribute("height",""+t.height),this.attr("height",t.height)),i.setAttribute("href",a.toDataURL())}},e}(Yo),I3=T3,O3=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var i=this.attr(),a=this.get("el");(0,v.each)(r||i,function(o,s){if(s==="startArrow"||s==="endArrow")if(o){var l=(0,v.isObject)(o)?t.addArrow(i,Pn[s]):t.getDefaultArrow(i,Pn[s]);a.setAttribute(Pn[s],"url(#"+l+")")}else a.removeAttribute(Pn[s]);else Pn[s]&&a.setAttribute(Pn[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,i=t.y1,a=t.x2,o=t.y2;return mi.x1.length(r,i,a,o)},e.prototype.getPoint=function(t){var r=this.attr(),i=r.x1,a=r.y1,o=r.x2,s=r.y2;return mi.x1.pointAt(i,a,o,s,t)},e}(Yo),P3=O3,b0={circle:function(n,e,t){return[["M",n,e],["m",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-t*2,0]]},square:function(n,e,t){return[["M",n-t,e-t],["L",n+t,e-t],["L",n+t,e+t],["L",n-t,e+t],["Z"]]},diamond:function(n,e,t){return[["M",n-t,e],["L",n,e-t],["L",n+t,e],["L",n,e+t],["Z"]]},triangle:function(n,e,t){var r=t*Math.sin(1/3*Math.PI);return[["M",n-t,e+r],["L",n,e-r],["L",n+t,e+r],["z"]]},triangleDown:function(n,e,t){var r=t*Math.sin(1/3*Math.PI);return[["M",n-t,e-r],["L",n+t,e-r],["L",n,e+r],["Z"]]}},QE={get:function(n){return b0[n]},register:function(n,e){b0[n]=e},remove:function(n){delete b0[n]},getAll:function(){return b0}},D3=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t){var r=this.get("el");r.setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return(0,v.isArray)(t)?t.map(function(r){return r.join(" ")}).join(""):t},e.prototype._getPath=function(){var t=this.attr(),r=t.x,i=t.y,a=t.r||t.radius,o=t.symbol||"circle",s;return(0,v.isFunction)(o)?s=o:s=QE.get(o),s?s(r,i,a):(console.warn(s+" symbol is not exist."),null)},e.symbolsFactory=QE,e}(Yo),L3=D3,R3=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var i=this,a=this.attr(),o=this.get("el");(0,v.each)(r||a,function(s,l){if(l==="path"&&(0,v.isArray)(s))o.setAttribute("d",i._formatPath(s));else if(l==="startArrow"||l==="endArrow")if(s){var u=(0,v.isObject)(s)?t.addArrow(a,Pn[l]):t.getDefaultArrow(a,Pn[l]);o.setAttribute(Pn[l],"url(#"+u+")")}else o.removeAttribute(Pn[l]);else Pn[l]&&o.setAttribute(Pn[l],s)})},e.prototype._formatPath=function(t){var r=t.map(function(i){return i.join(" ")}).join("");return~r.indexOf("NaN")?"":r},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var r=this.get("el"),i=this.getTotalLength();if(i===0)return null;var a=r?r.getPointAtLength(t*i):null;return a?{x:a.x,y:a.y}:null},e}(Yo),N3=R3,k3=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t,r){var i=this.attr(),a=this.get("el");(0,v.each)(r||i,function(o,s){s==="points"&&(0,v.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(l){return l[0]+","+l[1]}).join(" ")):Pn[s]&&a.setAttribute(Pn[s],o)})},e}(Yo),B3=k3,F3=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(t,r,i){n.prototype.onAttrChange.call(this,t,r,i),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,r){var i=this.attr(),a=this.get("el");(0,v.each)(r||i,function(o,s){s==="points"&&(0,v.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(l){return l[0]+","+l[1]}).join(" ")):Pn[s]&&a.setAttribute(Pn[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,v.isNil)(r)?(this.set("totalLength",mi.aH.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,i=this.get("tCache");i||(this._setTcache(),i=this.get("tCache"));var a,o;return(0,v.each)(i,function(s,l){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=l)}),mi.x1.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var i=0,a=[],o,s;(0,v.each)(t,function(l,u){t[u+1]&&(o=[],o[0]=i/r,s=mi.x1.length(l[0],l[1],t[u+1][0],t[u+1][1]),i+=s,o[1]=i/r,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,i=[];return i.push([t[r-1][0],t[r-1][1]]),i.push([t[r][0],t[r][1]]),i},e}(Yo),G3=F3,z3=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,U3=/[^\s,]+/gi;function W3(n){var e=0,t=0,r=0,i=0;return(0,v.isArray)(n)?n.length===1?e=t=r=i=n[0]:n.length===2?(e=r=n[0],t=i=n[1]):n.length===3?(e=n[0],t=i=n[1],r=n[2]):(e=n[0],t=n[1],r=n[2],i=n[3]):e=t=r=i=n,{r1:e,r2:t,r3:r,r4:i}}function lot(n){if(n=n||[],isArray(n))return n;if(isString(n))return n=n.match(z3),each(n,function(e,t){if(e=e.match(U3),e[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}each(e,function(i,a){isNaN(i)||(e[a]=+i)}),n[t]=e}),n}var V3=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,r){var i=this,a=this.attr(),o=this.get("el"),s=!1,l=["x","y","width","height","radius"];(0,v.each)(r||a,function(u,c){l.indexOf(c)!==-1&&!s?(o.setAttribute("d",i._assembleRect(a)),s=!0):l.indexOf(c)===-1&&Pn[c]&&o.setAttribute(Pn[c],u)})},e.prototype._assembleRect=function(t){var r=t.x,i=t.y,a=t.width,o=t.height,s=t.radius;if(!s)return"M "+r+","+i+" l "+a+",0 l 0,"+o+" l"+-a+" 0 z";var l=W3(s);(0,v.isArray)(s)?s.length===1?l.r1=l.r2=l.r3=l.r4=s[0]:s.length===2?(l.r1=l.r3=s[0],l.r2=l.r4=s[1]):s.length===3?(l.r1=s[0],l.r2=l.r4=s[1],l.r3=s[2]):(l.r1=s[0],l.r2=s[1],l.r3=s[2],l.r4=s[3]):l.r1=l.r2=l.r3=l.r4=s;var u=[["M "+(r+l.r1)+","+i],["l "+(a-l.r1-l.r2)+",0"],["a "+l.r2+","+l.r2+",0,0,1,"+l.r2+","+l.r2],["l 0,"+(o-l.r2-l.r3)],["a "+l.r3+","+l.r3+",0,0,1,"+-l.r3+","+l.r3],["l "+(l.r3+l.r4-a)+",0"],["a "+l.r4+","+l.r4+",0,0,1,"+-l.r4+","+-l.r4],["l 0,"+(l.r4+l.r1-o)],["a "+l.r1+","+l.r1+",0,0,1,"+l.r1+","+-l.r1],["z"]];return u.join(" ")},e}(Yo),X3=V3,JE=.3,Y3={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},H3={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},j3={left:"left",start:"left",center:"middle",right:"end",end:"end"},Z3=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,r){var i=this,a=this.attr(),o=this.get("el");this._setFont(),(0,v.each)(r||a,function(s,l){l==="text"?i._setText(""+s):l==="matrix"&&s?Qv(i):Pn[l]&&o.setAttribute(Pn[l],s)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),r=this.attr(),i=r.textBaseline,a=r.textAlign,o=(0,xv.qY)();o&&o.name==="firefox"?t.setAttribute("dominant-baseline",H3[i]||"alphabetic"):t.setAttribute("alignment-baseline",Y3[i]||"baseline"),t.setAttribute("text-anchor",j3[a]||"left")},e.prototype._setText=function(t){var r=this.get("el"),i=this.attr(),a=i.x,o=i.textBaseline,s=o===void 0?"bottom":o;if(!t)r.innerHTML="";else if(~t.indexOf(`
`)){var l=t.split(`
`),u=l.length-1,c="";(0,v.each)(l,function(f,h){h===0?s==="alphabetic"?c+='<tspan x="'+a+'" dy="'+-u+'em">'+f+"</tspan>":s==="top"?c+='<tspan x="'+a+'" dy="0.9em">'+f+"</tspan>":s==="middle"?c+='<tspan x="'+a+'" dy="'+-(u-1)/2+'em">'+f+"</tspan>":s==="bottom"?c+='<tspan x="'+a+'" dy="-'+(u+JE)+'em">'+f+"</tspan>":s==="hanging"&&(c+='<tspan x="'+a+'" dy="'+(-(u-1)-JE)+'em">'+f+"</tspan>"):c+='<tspan x="'+a+'" dy="1em">'+f+"</tspan>"}),r.innerHTML=c}else r.innerHTML=t},e}(Yo),K3=Z3,$3=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Q3=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,J3=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function qE(n){var e=n.match(J3);if(!e)return"";var t="";return e.sort(function(r,i){return r=r.split(":"),i=i.split(":"),Number(r[0])-Number(i[0])}),(0,v.each)(e,function(r){r=r.split(":"),t+='<stop offset="'+r[0]+'" stop-color="'+r[1]+'"></stop>'}),t}function q3(n,e){var t=$3.exec(n),r=(0,v.mod)((0,v.toRadian)(parseFloat(t[1])),Math.PI*2),i=t[2],a,o;r>=0&&r<.5*Math.PI?(a={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=r&&r<Math.PI?(a={x:1,y:0},o={x:0,y:1}):Math.PI<=r&&r<1.5*Math.PI?(a={x:1,y:1},o={x:0,y:0}):(a={x:0,y:1},o={x:1,y:0});var s=Math.tan(r),l=s*s,u=(o.x-a.x+s*(o.y-a.y))/(l+1)+a.x,c=s*(o.x-a.x+s*(o.y-a.y))/(l+1)+a.y;e.setAttribute("x1",a.x),e.setAttribute("y1",a.y),e.setAttribute("x2",u),e.setAttribute("y2",c),e.innerHTML=qE(i)}function t5(n,e){var t=Q3.exec(n),r=parseFloat(t[1]),i=parseFloat(t[2]),a=parseFloat(t[3]),o=t[4];e.setAttribute("cx",r),e.setAttribute("cy",i),e.setAttribute("r",a),e.innerHTML=qE(o)}var e5=function(){function n(e){this.cfg={};var t=null,r=(0,v.uniqueId)("gradient_");return e.toLowerCase()[0]==="l"?(t=Xo("linearGradient"),q3(e,t)):(t=Xo("radialGradient"),t5(e,t)),t.setAttribute("id",r),this.el=t,this.id=r,this.cfg=e,this}return n.prototype.match=function(e,t){return this.cfg===t},n}(),r5=e5,n5={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},i5={x:"-40%",y:"-40%",width:"200%",height:"200%"},a5=function(){function n(e){this.type="filter",this.cfg={},this.type="filter";var t=Xo("filter");return(0,v.each)(i5,function(r,i){t.setAttribute(i,r)}),this.el=t,this.id=(0,v.uniqueId)("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return n.prototype.match=function(e,t){if(this.type!==e)return!1;var r=!0,i=this.cfg;return(0,v.each)(Object.keys(i),function(a){if(i[a]!==t[a])return r=!1,!1}),r},n.prototype.update=function(e,t){var r=this.cfg;return r[n5[e]]=t,this._parseShadow(r,this.el),this},n.prototype._parseShadow=function(e,t){var r=`<feDropShadow
      dx="`+(e.dx||0)+`"
      dy="`+(e.dy||0)+`"
      stdDeviation="`+(e.blur?e.blur/10:0)+`"
      flood-color="`+(e.color?e.color:"#000")+`"
      flood-opacity="`+(e.opacity?e.opacity:1)+`"
      />`;t.innerHTML=r},n}(),o5=a5,s5=function(){function n(e,t){this.cfg={};var r=Xo("marker"),i=(0,v.uniqueId)("marker_");r.setAttribute("id",i);var a=Xo("path");a.setAttribute("stroke",e.stroke||"none"),a.setAttribute("fill",e.fill||"none"),r.appendChild(a),r.setAttribute("overflow","visible"),r.setAttribute("orient","auto-start-reverse"),this.el=r,this.child=a,this.id=i;var o=e[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",o===!0?this._setDefaultPath(t,a):(this.cfg=o,this._setMarker(e.lineWidth,a)),this}return n.prototype.match=function(){return!1},n.prototype._setDefaultPath=function(e,t){var r=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),r.setAttribute("refX",""+10*Math.cos(Math.PI/6)),r.setAttribute("refY",""+5)},n.prototype._setMarker=function(e,t){var r=this.el,i=this.cfg.path,a=this.cfg.d;(0,v.isArray)(i)&&(i=i.map(function(o){return o.join(" ")}).join("")),t.setAttribute("d",i),r.appendChild(t),a&&r.setAttribute("refX",""+a/e)},n.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},n}(),tw=s5,l5=function(){function n(e){this.type="clip",this.cfg={};var t=Xo("clipPath");this.el=t,this.id=(0,v.uniqueId)("clip_"),t.id=this.id;var r=e.cfg.el;return t.appendChild(r),this.cfg=e,this}return n.prototype.match=function(){return!1},n.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},n}(),u5=l5,c5=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,f5=function(){function n(e){this.cfg={};var t=Xo("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var r=Xo("image");t.appendChild(r);var i=(0,v.uniqueId)("pattern_");t.id=i,this.el=t,this.id=i,this.cfg=e;var a=c5.exec(e),o=a[2];r.setAttribute("href",o);var s=new Image;o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o;function l(){t.setAttribute("width",""+s.width),t.setAttribute("height",""+s.height)}return s.complete?l():(s.onload=l,s.src=s.src),this}return n.prototype.match=function(e,t){return this.cfg===t},n}(),h5=f5,d5=function(){function n(e){var t=Xo("defs"),r=(0,v.uniqueId)("defs_");t.id=r,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return n.prototype.find=function(e,t){for(var r=this.children,i=null,a=0;a<r.length;a++)if(r[a].match(e,t)){i=r[a].id;break}return i},n.prototype.findById=function(e){for(var t=this.children,r=null,i=0;i<t.length;i++)if(t[i].id===e){r=t[i];break}return r},n.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},n.prototype.getDefaultArrow=function(e,t){var r=e.stroke||e.strokeStyle;if(this.defaultArrow[r])return this.defaultArrow[r].id;var i=new tw(e,t);return this.defaultArrow[r]=i,this.el.appendChild(i.el),this.add(i),i.id},n.prototype.addGradient=function(e){var t=new r5(e);return this.el.appendChild(t.el),this.add(t),t.id},n.prototype.addArrow=function(e,t){var r=new tw(e,t);return this.el.appendChild(r.el),this.add(r),r.id},n.prototype.addShadow=function(e){var t=new o5(e);return this.el.appendChild(t.el),this.add(t),t.id},n.prototype.addPattern=function(e){var t=new h5(e);return this.el.appendChild(t.el),this.add(t),t.id},n.prototype.addClip=function(e){var t=new u5(e);return this.el.appendChild(t.el),this.add(t),t.id},n}(),v5=d5,g5=function(n){(0,b.__extends)(e,n);function e(t){return n.call(this,(0,b.__assign)((0,b.__assign)({},t),{autoDraw:!0,renderer:"svg"}))||this}return e.prototype.getShapeBase=function(){return D},e.prototype.getGroupBase=function(){return b1},e.prototype.getShape=function(t,r,i){var a=i.target||i.srcElement;if(!x1[a.tagName]){for(var o=a.parentNode;o&&!x1[o.tagName];)o=o.parentNode;a=o}return this.find(function(s){return s.get("el")===a})},e.prototype.createDom=function(){var t=Xo("svg"),r=new v5(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",r),t},e.prototype.onCanvasChange=function(t){var r=this.get("context"),i=this.get("el");if(t==="sort"){var a=this.get("children");a&&a.length&&ZE(this,function(s,l){return a.indexOf(s)-a.indexOf(l)?1:0})}else if(t==="clear"){if(i){i.innerHTML="";var o=r.el;o.innerHTML="",i.appendChild(o)}}else t==="matrix"?Qv(this):t==="clip"?Jv(this,r):t==="changeSize"&&(i.setAttribute("width",""+this.get("width")),i.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),r=this.getChildren();Jv(this,t),r.length&&KE(t,r)},e}(Qt.AbstractCanvas),Ph=g5,p5="0.5.6";function _1(n){return n?!1:n==null||isNaN(n)}function ew(n){if((0,v.isArray)(n))return _1(n[1].y);var e=n.y;return(0,v.isArray)(e)?_1(e[0]):_1(e)}function S1(n,e,t){if(e===void 0&&(e=!1),t===void 0&&(t=!0),!n.length||n.length===1&&!t)return[];if(e){for(var r=[],i=0,a=n.length;i<a;i++){var o=n[i];ew(o)||r.push(o)}return[r]}for(var s=[],l=[],i=0,a=n.length;i<a;i++){var o=n[i];ew(o)?l.length&&(l.length===1&&!t||s.push(l),l=[]):l.push(o)}return l.length&&s.push(l),s}function rw(n){for(var e=[],t=0;t<n.length;t++){var r=n[t];if(r){var i=t===0?"M":"L";e.push([i,r.x,r.y])}}var a=n[0];return a&&(e.push(["L",a.x,a.y]),e.push(["z"])),e}function nw(n){for(var e=n.length/2,t=[],r=[],i=0;i<n.length;i++)i<e?t.push(n[i]):r.push(n[i]);var a=s0(t,!1),o=s0(r,!1);r.length&&a.push(["L",r[0].x,r[0].y]),o.shift();var s=a.concat(o);return t.length&&s.push(["L",t[0].x,t[0].y]),s.push(["z"]),s}function zi(n,e,t,r){r===void 0&&(r="");var i=n.style,a=i===void 0?{}:i,o=n.defaultStyle,s=n.color,l=n.size,u=(0,b.__assign)((0,b.__assign)({},o),a);return s&&(e&&(a.stroke||(u.stroke=s)),t&&(a.fill||(u.fill=s))),r&&(0,v.isNil)(a[r])&&!(0,v.isNil)(l)&&(u[r]=l),u}function iw(n){return(0,v.deepMix)({},{fill:"#CCD6EC",fillOpacity:.3},(0,v.get)(n,["background","style"]))}function E1(n){var e=n.x,t=(0,v.isArray)(n.y)?n.y:[n.y];return t.map(function(r,i){return{x:(0,v.isArray)(e)?e[i]:e,y:r}})}var y5={line:function(n,e,t){return[["M",n-t,e],["L",n+t,e]]},dot:function(n,e,t){return[["M",n-t,e],["L",n+t,e]]},dash:function(n,e,t){return[["M",n-t,e],["L",n+t,e]]},smooth:function(n,e,t){return[["M",n-t,e],["A",t/2,t/2,0,1,1,n,e],["A",t/2,t/2,0,1,0,n+t,e]]},hv:function(n,e,t){return[["M",n-t-1,e-2.5],["L",n,e-2.5],["L",n,e+2.5],["L",n+t+1,e+2.5]]},vh:function(n,e,t){return[["M",n-t-1,e+2.5],["L",n,e+2.5],["L",n,e-2.5],["L",n+t+1,e-2.5]]},hvh:function(n,e,t){return[["M",n-(t+1),e+2.5],["L",n-t/2,e+2.5],["L",n-t/2,e-2.5],["L",n+t/2,e-2.5],["L",n+t/2,e+2.5],["L",n+t+1,e+2.5]]},vhv:function(n,e){return[["M",n-5,e+2.5],["L",n-5,e],["L",n,e],["L",n,e-3],["L",n,e+3],["L",n+6.5,e+3]]}};function aw(n,e){var t=n.color;return{symbol:y5[e],style:{lineWidth:2,r:6,stroke:t}}}function m5(n,e,t){for(var r=n.isStack,i=n.connectNulls,a=n.isInCircle,o=n.showSinglePoint,s=zi(n,!0,!1,"lineWidth"),l=S1(n.points,i,o),u=[],c=0,f=l.length;c<f;c++){var h=l[c];u=u.concat(b5(h,a,r,e,t,s))}return s.path=u,s}function w1(n,e,t,r,i){if(n.length===1)return[["M",n[0].x,n[0].y-i.lineWidth/2],["L",n[0].x,n[0].y],["L",n[0].x,n[0].y+i.lineWidth/2]];var a;return t?(e&&n.length&&n.push({x:n[0].x,y:n[0].y}),a=s0(n,!1,r)):(a=Wv(n,!1),e&&a.push(["Z"])),a}function x5(n,e,t,r,i,a){var o=[],s=[];(0,v.each)(n,function(c){var f=E1(c);o.push(f[1]),s.push(f[0])});var l=w1(o,e,r,i,a),u=w1(s,e,r,i,a);return t?l:l.concat(u)}function b5(n,e,t,r,i,a){if(n.length){var o=n[0];return(0,v.isArray)(o.y)?x5(n,e,t,r,i,a):w1(n,e,r,i,a)}return[]}var uot=Cl("line",{defaultShapeType:"line"});(0,v.each)(["line","dot","dash","smooth"],function(n){Bn("line",n,{draw:function(e,t){var r=n==="smooth",i;if(r){var a=this.coordinate,o=a.start,s=a.end;i=[[o.x,s.y],[s.x,o.y]]}var l=m5(e,r,i),u=t.addShape({type:"path",attrs:l,name:"line",capture:!r});return u},getMarker:function(e){return aw(e,n)}})});var cot=null,_5=function(n){(0,b.__extends)(e,n);function e(t){var r=n.call(this,t)||this;r.type="path",r.shapeType="line";var i=t.connectNulls,a=i===void 0?!1:i,o=t.showSinglePoint,s=o===void 0?!0:o;return r.connectNulls=a,r.showSinglePoint=s,r}return e.prototype.createElements=function(t,r,i){i===void 0&&(i=!1);var a=this,o=a.lastElementsMap,s=a.elementsMap,l=a.elements,u=a.container,c=this.getElementId(t),f=this.getShapeInfo(t),h=o[c];if(h){var g=h.getModel();(this.isCoordinateChanged||_E(g,f))&&(h.animate=this.animateOption,h.update(f)),delete o[c]}else{var d=this.getShapeFactory();h=new n1({shapeFactory:d,container:u,offscreenGroup:this.getOffscreenGroup()}),h.geometry=this,h.animate=this.animateOption,h.draw(f,i)}return l.push(h),s[c]=h,l},e.prototype.getPointsAndData=function(t){for(var r=[],i=[],a=0,o=t.length;a<o;a++){var s=t[a];r.push({x:s.x,y:s.y}),i.push(s[St])}return{points:r,data:i}},e.prototype.getShapeInfo=function(t){var r=this.getDrawCfg(t[0]),i=this.getPointsAndData(t),a=i.points,o=i.data;return r.mappingData=t,r.data=o,r.isStack=!!this.getAdjust("stack"),r.points=a,r.connectNulls=this.connectNulls,r.showSinglePoint=this.showSinglePoint,r},e}(Ml),C1=_5;function S5(n,e,t,r,i){var a=[];if(n.length){for(var o=[],s=[],l=0,u=n.length;l<u;l++){var c=n[l];o.push(c[1]),s.push(c[0])}s=s.reverse(),(0,v.each)([o,s],function(f,h){var d=[],g=r.parsePoints(f),p=g[0];o.length===1&&s.length===1?d=h===0?[["M",p.x-.5,p.y],["L",p.x+.5,p.y]]:[["L",p.x+.5,p.y],["L",p.x-.5,p.y]]:(e&&g.push({x:p.x,y:p.y}),t?d=s0(g,!1,i):d=Wv(g,!1),h>0&&(d[0][0]="L")),a=a.concat(d)}),a.push(["Z"])}return a}function _0(n,e,t,r,i){for(var a=zi(n,e,!e,"lineWidth"),o=n.connectNulls,s=n.isInCircle,l=n.points,u=n.showSinglePoint,c=S1(l,o,u),f=[],h=0,d=c.length;h<d;h++){var g=c[h];f=f.concat(S5(g,s,t,r,i))}return a.path=f,a}function ow(n){var e=n.start,t=n.end;return[[e.x,t.y],[t.x,e.y]]}var fot=Cl("area",{defaultShapeType:"area",getDefaultPoints:function(n){var e=n.x,t=n.y0,r=(0,v.isArray)(n.y)?n.y:[t,n.y];return r.map(function(i){return{x:e,y:i}})}});Bn("area","area",{draw:function(n,e){var t=_0(n,!1,!1,this),r=e.addShape({type:"path",attrs:t,name:"area"});return r},getMarker:function(n){var e=n.color;return{symbol:function(t,r,i){return i===void 0&&(i=5.5),[["M",t-i,r-4],["L",t+i,r-4],["L",t+i,r+4],["L",t-i,r+4],["Z"]]},style:{r:5,fill:e}}}});var hot=null,E5=function(n){(0,b.__extends)(e,n);function e(t){var r=n.call(this,t)||this;r.type="area",r.shapeType="area",r.generatePoints=!0,r.startOnZero=!0;var i=t.startOnZero,a=i===void 0?!0:i,o=t.sortable,s=o===void 0?!1:o,l=t.showSinglePoint,u=l===void 0?!1:l;return r.startOnZero=a,r.sortable=s,r.showSinglePoint=u,r}return e.prototype.getPointsAndData=function(t){for(var r=[],i=[],a=0,o=t.length;a<o;a++){var s=t[a];r.push(s.points),i.push(s[St])}return{points:r,data:i}},e.prototype.getYMinValue=function(){if(this.startOnZero)return n.prototype.getYMinValue.call(this);var t=this.getYScale();return t.min},e}(C1),w5=E5,dot=Cl("edge",{defaultShapeType:"line",getDefaultPoints:function(n){return E1(n)}});Bn("edge","line",{draw:function(n,e){var t=zi(n,!0,!1,"lineWidth"),r=Wv(this.parsePoints(n.points),this.coordinate.isPolar);return e.addShape("path",{attrs:(0,b.__assign)((0,b.__assign)({},t),{path:r})})},getMarker:function(n){return{symbol:"circle",style:{r:4.5,fill:n.color}}}});var vot=null,C5=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="edge",t.shapeType="edge",t.generatePoints=!0,t}return e}(Ml),M5=C5,A5=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="heatmap",t.paletteCache={},t}return e.prototype.createElements=function(t,r,i){i===void 0&&(i=!1);var a=this.prepareRange(t),o=this.prepareSize(),s=(0,v.get)(this.styleOption,["style","shadowBlur"]);return(0,v.isNumber)(s)||(s=o/2),this.prepareGreyScaleBlurredCircle(o,s),this.drawWithRange(t,a,o,s),null},e.prototype.clear=function(){n.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},e.prototype.prepareRange=function(t){var r=this.getAttribute("color"),i=r.getFields()[0],a=Infinity,o=-Infinity;return t.forEach(function(s){var l=s[St][i];l>o&&(o=l),l<a&&(a=l)}),a===o&&(a=o-1),[a,o]},e.prototype.prepareSize=function(){var t=this.getDefaultValue("size");return(0,v.isNumber)(t)||(t=this.getDefaultSize()),t},e.prototype.prepareGreyScaleBlurredCircle=function(t,r){var i=this.getGrayScaleBlurredCanvas(),a=t+r,o=i.getContext("2d");i.width=i.height=a*2,o.clearRect(0,0,i.width,i.height),o.shadowOffsetX=o.shadowOffsetY=a*2,o.shadowBlur=r,o.shadowColor="black",o.beginPath(),o.arc(-a,-a,t,0,Math.PI*2,!0),o.closePath(),o.fill()},e.prototype.drawWithRange=function(t,r,i,a){var o=this.coordinate,s=o.start,l=o.end,u=this.coordinate.getWidth(),c=this.coordinate.getHeight(),f=this.getAttribute("color"),h=f.getFields()[0];this.clearShadowCanvasCtx();var d=this.getShadowCanvasCtx();r&&(t=t.filter(function(at){return at[St][h]<=r[1]&&at[St][h]>=r[0]}));for(var g=this.scales[h],p=0,m=t;p<m.length;p++){var _=m[p],S=this.getDrawCfg(_),M=S.x,R=S.y,F=g.scale(_[St][h]);this.drawGrayScaleBlurredCircle(M-s.x,R-l.y,i+a,F,d)}var V=d.getImageData(0,0,u,c);this.clearShadowCanvasCtx(),this.colorize(V),d.putImageData(V,0,0);var nt=this.getImageShape();nt.attr("x",s.x),nt.attr("y",l.y),nt.attr("width",u),nt.attr("height",c),nt.attr("img",d.canvas),nt.set("origin",this.getShapeInfo(t))},e.prototype.getDefaultSize=function(){var t=this.getAttribute("position"),r=this.coordinate;return Math.min(r.getWidth()/(t.scales[0].ticks.length*4),r.getHeight()/(t.scales[1].ticks.length*4))},e.prototype.clearShadowCanvasCtx=function(){var t=this.getShadowCanvasCtx();t.clearRect(0,0,t.canvas.width,t.canvas.height)},e.prototype.getShadowCanvasCtx=function(){var t=this.shadowCanvas;return t||(t=document.createElement("canvas"),this.shadowCanvas=t),t.width=this.coordinate.getWidth(),t.height=this.coordinate.getHeight(),t.getContext("2d")},e.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},e.prototype.drawGrayScaleBlurredCircle=function(t,r,i,a,o){var s=this.getGrayScaleBlurredCanvas();o.globalAlpha=a,o.drawImage(s,t-i,r-i)},e.prototype.colorize=function(t){for(var r=this.getAttribute("color"),i=t.data,a=this.paletteCache,o=3;o<i.length;o+=4){var s=i[o];if((0,v.isNumber)(s)){var l=a[s]?a[s]:xo.rgb2arr(r.gradient(s/256));i[o-3]=l[0],i[o-2]=l[1],i[o-1]=l[2],i[o]=s}}},e.prototype.getImageShape=function(){var t=this.imageShape;if(t)return t;var r=this.container;return t=r.addShape({type:"image",attrs:{}}),this.imageShape=t,t},e.prototype.getShapeInfo=function(t){var r=this.getDrawCfg(t[0]);return(0,b.__assign)((0,b.__assign)({},r),{mappingData:t,data:this.getData(t)})},e.prototype.getData=function(t){return t.map(function(r){return r[St]})},e}(Ml),T5=A5;function M1(n,e){e===void 0&&(e=!1);var t=n.x,r=n.y,i=n.y0,a=n.size,o,s;(0,v.isArray)(r)?(o=r[0],s=r[1]):(o=i,s=r);var l,u;(0,v.isArray)(t)?(l=t[0],u=t[1]):(l=t-a/2,u=t+a/2);var c=[{x:l,y:o},{x:l,y:s}];return e?c.push({x:u,y:(s+o)/2}):c.push({x:u,y:s},{x:u,y:o}),c}function A1(n,e){e===void 0&&(e=!0);var t=[],r=n[0];t.push(["M",r.x,r.y]);for(var i=1,a=n.length;i<a;i++)t.push(["L",n[i].x,n[i].y]);return e&&(t.push(["L",r.x,r.y]),t.push(["z"])),t}function qv(n,e){var t=0,r=0,i=0,a=0;return(0,v.isArray)(n)?n.length===1?t=r=i=a=n[0]:n.length===2?(t=i=n[0],r=a=n[1]):n.length===3?(t=n[0],r=a=n[1],i=n[2]):(t=n[0],r=n[1],i=n[2],a=n[3]):t=r=i=a=n,t+r>e&&(t=t?e/(1+r/t):0,r=e-t),i+a>e&&(i=i?e/(1+a/i):0,a=e-i),[t||0,r||0,i||0,a||0]}function sw(n,e,t){var r=[];if(t.isRect){var i=t.isTransposed?{x:t.start.x,y:e[0].y}:{x:e[0].x,y:t.start.y},a=t.isTransposed?{x:t.end.x,y:e[2].y}:{x:e[3].x,y:t.end.y},o=(0,v.get)(n,["background","style","radius"]);if(o){var s=t.isTransposed?Math.abs(e[0].y-e[2].y):e[2].x-e[1].x,l=t.isTransposed?t.getWidth():t.getHeight(),u=qv(o,Math.min(s,l)),c=u[0],f=u[1],h=u[2],d=u[3];r.push(["M",i.x,a.y+c]),c!==0&&r.push(["A",c,c,0,0,1,i.x+c,a.y]),r.push(["L",a.x-f,a.y]),f!==0&&r.push(["A",f,f,0,0,1,a.x,a.y+f]),r.push(["L",a.x,i.y-h]),h!==0&&r.push(["A",h,h,0,0,1,a.x-h,i.y]),r.push(["L",i.x+d,i.y]),d!==0&&r.push(["A",d,d,0,0,1,i.x,i.y-d])}else r.push(["M",i.x,i.y]),r.push(["L",a.x,i.y]),r.push(["L",a.x,a.y]),r.push(["L",i.x,a.y]),r.push(["L",i.x,i.y]);r.push(["z"])}if(t.isPolar){var g=t.getCenter(),p=Gv(n,t),m=p.startAngle,_=p.endAngle;if(t.type!=="theta"&&!t.isTransposed)r=mu(g.x,g.y,t.getRadius(),m,_);else{var S=function(F){return Math.pow(F,2)},c=Math.sqrt(S(g.x-e[0].x)+S(g.y-e[0].y)),f=Math.sqrt(S(g.x-e[2].x)+S(g.y-e[2].y));r=mu(g.x,g.y,c,t.startAngle,t.endAngle,f)}}return r}function I5(n,e,t){var r=t.getWidth(),i=t.getHeight(),a=t.type==="rect",o=[],s=(n[2].x-n[1].x)/2,l=t.isTransposed?s*i/r:s*r/i;return e==="round"?(a?(o.push(["M",n[0].x,n[0].y+l]),o.push(["L",n[1].x,n[1].y-l]),o.push(["A",s,s,0,0,1,n[2].x,n[2].y-l]),o.push(["L",n[3].x,n[3].y+l]),o.push(["A",s,s,0,0,1,n[0].x,n[0].y+l])):(o.push(["M",n[0].x,n[0].y]),o.push(["L",n[1].x,n[1].y]),o.push(["A",s,s,0,0,1,n[2].x,n[2].y]),o.push(["L",n[3].x,n[3].y]),o.push(["A",s,s,0,0,1,n[0].x,n[0].y])),o.push(["z"])):o=A1(n),o}function lw(n,e,t){var r=[];return(0,v.isNil)(e)?t?r.push(["M",n[0].x,n[0].y],["L",n[1].x,n[1].y],["L",n[2].x,n[2].y],["L",n[2].x,n[2].y],["Z"]):r.push(["M",n[0].x,n[0].y],["L",n[1].x,n[1].y],["L",n[2].x,n[2].y],["L",n[3].x,n[3].y],["Z"]):r.push(["M",n[0].x,n[0].y],["L",n[1].x,n[1].y],["L",e[1].x,e[1].y],["L",e[0].x,e[0].y],["Z"]),r}function O5(n,e,t){var r,i,a,o,s=n[0],l=n[1],u=n[2],c=n[3],f=[0,0,0,0],h=f[0],d=f[1],g=f[2],p=f[3];s.y<l.y?(l=n[0],s=n[1],c=n[2],u=n[3],r=qv(t,Math.min(c.x-s.x,s.y-l.y)),p=r[0],g=r[1],d=r[2],h=r[3]):(i=qv(t,Math.min(c.x-s.x,s.y-l.y)),h=i[0],d=i[1],g=i[2],p=i[3]),e.isTransposed&&(s=n[0],c=n[1],u=n[2],l=n[3],n[0].x>n[1].x?(c=n[0],s=n[1],l=n[2],u=n[3],a=qv(t,Math.min(c.x-s.x,s.y-l.y)),h=a[0],p=a[1],g=a[2],d=a[3]):(o=qv(t,Math.min(c.x-s.x,s.y-l.y)),d=o[0],g=o[1],p=o[2],h=o[3]));var m=[];return m.push(["M",l.x,l.y+h]),h!==0&&m.push(["A",h,h,0,0,1,l.x+h,l.y]),m.push(["L",u.x-d,u.y]),d!==0&&m.push(["A",d,d,0,0,1,u.x,u.y+d]),m.push(["L",c.x,c.y-g]),g!==0&&m.push(["A",g,g,0,0,1,c.x-g,c.y]),m.push(["L",s.x+p,s.y]),p!==0&&m.push(["A",p,p,0,0,1,s.x,s.y-p]),m.push(["L",l.x,l.y+h]),m.push(["z"]),m}var got=Cl("interval",{defaultShapeType:"rect",getDefaultPoints:function(n){return M1(n)}});Bn("interval","rect",{draw:function(n,e){var t=zi(n,!1,!0),r=e,i=n==null?void 0:n.background;if(i){r=e.addGroup();var a=iw(n),o=sw(n,this.parsePoints(n.points),this.coordinate);r.addShape("path",{attrs:(0,b.__assign)((0,b.__assign)({},a),{path:o}),zIndex:-1,name:r1})}var s;t.radius&&this.coordinate.isRect?s=O5(this.parsePoints(n.points),this.coordinate,t.radius):s=this.parsePath(I5(n.points,t.lineCap,this.coordinate));var l=r.addShape("path",{attrs:(0,b.__assign)((0,b.__assign)({},t),{path:s}),name:"interval"});return i?r:l},getMarker:function(n){var e=n.color,t=n.isInPolar;return t?{symbol:"circle",style:{r:4.5,fill:e}}:{symbol:"square",style:{r:4,fill:e}}}});var pot=null;function P5(n,e){var t=n.length,r=n;(0,v.isString)(r[0])&&(r=n.map(function(s){return e.translate(s)}));for(var i=r[1]-r[0],a=2;a<t;a++){var o=r[a]-r[a-1];i>o&&(i=o)}return i}function D5(n,e){if(e){var t=(0,v.flatten)(n),r=(0,v.valuesOfKey)(t,e);return r.length}return n.length}function T1(n){var e=n.theme,t=n.coordinate,r=n.getXScale(),i=r.values,a=n.beforeMappingData,o=i.length,s=zv(n.coordinate),l=n.intervalPadding,u=n.dodgePadding,c=n.maxColumnWidth||e.maxColumnWidth,f=n.minColumnWidth||e.minColumnWidth,h=n.columnWidthRatio||e.columnWidthRatio,d=n.multiplePieWidthRatio||e.multiplePieWidthRatio,g=n.roseWidthRatio||e.roseWidthRatio;if(r.isLinear&&i.length>1){i.sort();var p=P5(i,r);o=(r.max-r.min)/p,i.length>o&&(o=i.length)}var m=r.range,_=1/o,S=1;if(t.isPolar?t.isTransposed&&o>1?S=d:S=g:(r.isLinear&&(_*=m[1]-m[0]),S=h),!(0,v.isNil)(l)&&l>=0){var M=l/s;_=(1-(o-1)*M)/o}else _*=S;if(n.getAdjust("dodge")){var R=n.getAdjust("dodge"),F=R.dodgeBy,V=D5(a,F);if(!(0,v.isNil)(u)&&u>=0){var nt=u/s;_=(_-nt*(V-1))/V}else!(0,v.isNil)(l)&&l>=0&&(_*=S),_=_/V;_=_>=0?_:0}if(!(0,v.isNil)(c)&&c>=0){var at=c/s;_>at&&(_=at)}if(!(0,v.isNil)(f)&&f>=0){var xt=f/s;_<xt&&(_=xt)}return _}var L5=function(n){(0,b.__extends)(e,n);function e(t){var r=n.call(this,t)||this;r.type="interval",r.shapeType="interval",r.generatePoints=!0;var i=t.background;return r.background=i,r}return e.prototype.createShapePointsCfg=function(t){var r=n.prototype.createShapePointsCfg.call(this,t),i,a=this.getAttribute("size");if(a){i=this.getAttributeValues(a,t)[0];var o=this.coordinate,s=zv(o);i=i/s}else this.defaultSize||(this.defaultSize=T1(this)),i=this.defaultSize;return r.size=i,r},e.prototype.adjustScale=function(){n.prototype.adjustScale.call(this);var t=this.getYScale();if(this.coordinate.type==="theta")t.change({nice:!1,min:0,max:tB(t)});else{var r=this.scaleDefs,i=t.field,a=t.min,o=t.max,s=t.type;s!=="time"&&(a>0&&!(0,v.get)(r,[i,"min"])&&t.change({min:0}),o<=0&&!(0,v.get)(r,[i,"max"])&&t.change({max:0}))}},e.prototype.getDrawCfg=function(t){var r=n.prototype.getDrawCfg.call(this,t);return r.background=this.background,r},e}(Ml),R5=L5,N5=function(n){(0,b.__extends)(e,n);function e(t){var r=n.call(this,t)||this;r.type="line";var i=t.sortable,a=i===void 0?!1:i;return r.sortable=a,r}return e}(C1),k5=N5,uw=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],B5=["cross","tick","plus","hyphen","line"];function I1(n,e,t,r,i){var a=zi(e,i,!i,"r"),o=n.parsePoints(e.points),s=o[0];if(e.isStack)s=o[1];else if(o.length>1){for(var l=t.addGroup(),u=0,c=o;u<c.length;u++){var f=c[u];l.addShape({type:"marker",attrs:(0,b.__assign)((0,b.__assign)((0,b.__assign)({},a),{symbol:Uc[r]||r}),f)})}return l}return t.addShape({type:"marker",attrs:(0,b.__assign)((0,b.__assign)((0,b.__assign)({},a),{symbol:Uc[r]||r}),s)})}var yot=Cl("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(n){return E1(n)}});(0,v.each)(uw,function(n){Bn("point","hollow-"+n,{draw:function(e,t){return I1(this,e,t,n,!0)},getMarker:function(e){var t=e.color;return{symbol:Uc[n]||n,style:{r:4.5,stroke:t,fill:null}}}})});var mot=null,F5=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="point",t.shapeType="point",t.generatePoints=!0,t}return e.prototype.getDrawCfg=function(t){var r=n.prototype.getDrawCfg.call(this,t);return(0,b.__assign)((0,b.__assign)({},r),{isStack:!!this.getAdjust("stack")})},e}(Ml),G5=F5;function z5(n){for(var e=n[0],t=1,r=[["M",e.x,e.y]];t<n.length;){var i=n[t];(i.x!==n[t-1].x||i.y!==n[t-1].y)&&(r.push(["L",i.x,i.y]),i.x===e.x&&i.y===e.y&&t<n.length-1&&(e=n[t+1],r.push(["Z"]),r.push(["M",e.x,e.y]),t++)),t++}return(0,v.isEqual)((0,v.last)(r),e)||r.push(["L",e.x,e.y]),r.push(["Z"]),r}var xot=Cl("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(n){var e=[];return(0,v.each)(n.x,function(t,r){var i=n.y[r];e.push({x:t,y:i})}),e}});Bn("polygon","polygon",{draw:function(n,e){if(!(0,v.isEmpty)(n.points)){var t=zi(n,!0,!0),r=this.parsePath(z5(n.points));return e.addShape("path",{attrs:(0,b.__assign)((0,b.__assign)({},t),{path:r}),name:"polygon"})}},getMarker:function(n){var e=n.color;return{symbol:"square",style:{r:4,fill:e}}}});var bot=null,U5=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="polygon",t.shapeType="polygon",t.generatePoints=!0,t}return e.prototype.createShapePointsCfg=function(t){var r=n.prototype.createShapePointsCfg.call(this,t),i=r.x,a=r.y,o;if(!((0,v.isArray)(i)&&(0,v.isArray)(a))){var s=this.getXScale(),l=this.getYScale(),u=s.values.length,c=l.values.length,f=.5*1/u,h=.5*1/c;s.isCategory&&l.isCategory?(i=[i-f,i-f,i+f,i+f],a=[a-h,a+h,a+h,a-h]):(0,v.isArray)(i)?(o=i,i=[o[0],o[0],o[1],o[1]],a=[a-h/2,a+h/2,a+h/2,a-h/2]):(0,v.isArray)(a)&&(o=a,a=[o[0],o[1],o[1],o[0]],i=[i-f/2,i-f/2,i+f/2,i+f/2]),r.x=i,r.y=a}return r},e}(Ml),W5=U5,_ot=Cl("schema",{defaultShapeType:""}),Sot=null,V5=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="schema",t.shapeType="schema",t.generatePoints=!0,t}return e.prototype.createShapePointsCfg=function(t){var r=n.prototype.createShapePointsCfg.call(this,t),i,a=this.getAttribute("size");if(a){i=this.getAttributeValues(a,t)[0];var o=this.coordinate,s=zv(o);i=i/s}else this.defaultSize||(this.defaultSize=T1(this)),i=this.defaultSize;return r.size=i,r},e}(Ml),X5=V5;function Y5(n){if(!(0,v.isArray)(n))return[];var e=(0,v.max)(n);return(0,v.map)(n,function(t){return t/e})}var Eot=Cl("violin",{defaultShapeType:"violin",getDefaultPoints:function(n){var e=n.size/2,t=[],r=Y5(n._size);return(0,v.each)(n.y,function(i,a){var o=r[a]*e,s=a===0,l=a===n.y.length-1;t.push({isMin:s,isMax:l,x:n.x-o,y:i}),t.unshift({isMin:s,isMax:l,x:n.x+o,y:i})}),t}});Bn("violin","violin",{draw:function(n,e){var t=zi(n,!0,!0),r=this.parsePath(rw(n.points));return e.addShape("path",{attrs:(0,b.__assign)((0,b.__assign)({},t),{path:r}),name:"violin"})},getMarker:function(n){var e=n.color;return{symbol:"circle",style:{r:4,fill:e}}}});var wot=null,H5=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="violin",t.shapeType="violin",t.generatePoints=!0,t}return e.prototype.createShapePointsCfg=function(t){var r=n.prototype.createShapePointsCfg.call(this,t),i,a=this.getAttribute("size");if(a){i=this.getAttributeValues(a,t)[0];var o=this.coordinate,s=zv(o);i=i/s}else this.defaultSize||(this.defaultSize=T1(this)),i=this.defaultSize;return r.size=i,r._size=(0,v.get)(t[St],[this._sizeField]),r},e.prototype.initAttributes=function(){var t=this.attributeOption,r=t.size?t.size.fields[0]:this._sizeField?this._sizeField:"size";this._sizeField=r,delete t.size,n.prototype.initAttributes.call(this)},e}(Ml),j5=H5;Bn("area","line",{draw:function(n,e){var t=_0(n,!0,!1,this),r=e.addShape({type:"path",attrs:t,name:"area"});return r},getMarker:function(n){var e=n.color;return{symbol:function(t,r,i){return i===void 0&&(i=5.5),[["M",t-i,r-4],["L",t+i,r-4],["L",t+i,r+4],["L",t-i,r+4],["Z"]]},style:{r:5,stroke:e,fill:null}}}}),Bn("area","smooth",{draw:function(n,e){var t=this.coordinate,r=_0(n,!1,!0,this,ow(t)),i=e.addShape({type:"path",attrs:r,name:"area"});return i},getMarker:function(n){var e=n.color;return{symbol:function(t,r,i){return i===void 0&&(i=5.5),[["M",t-i,r-4],["L",t+i,r-4],["L",t+i,r+4],["L",t-i,r+4],["Z"]]},style:{r:5,fill:e}}}}),Bn("area","smooth-line",{draw:function(n,e){var t=this.coordinate,r=_0(n,!0,!0,this,ow(t)),i=e.addShape({type:"path",attrs:r,name:"area"});return i},getMarker:function(n){var e=n.color;return{symbol:function(t,r,i){return i===void 0&&(i=5.5),[["M",t-i,r-4],["L",t+i,r-4],["L",t+i,r+4],["L",t-i,r+4],["Z"]]},style:{r:5,stroke:e,fill:null}}}});function O1(n,e){return["C",n.x*1/2+e.x*1/2,n.y,n.x*1/2+e.x*1/2,e.y,e.x,e.y]}function P1(n,e){var t=[];t.push({x:e.x,y:e.y}),t.push(n);var r=["Q"];return(0,v.each)(t,function(i){r.push(i.x,i.y)}),r}function Z5(n,e,t){var r=P1(e,t),i=[["M",n.x,n.y]];return i.push(r),i}function K5(n,e){var t=P1(n[1],e),r=P1(n[3],e),i=[["M",n[0].x,n[0].y]];return i.push(r),i.push(["L",n[3].x,n[3].y]),i.push(["L",n[2].x,n[2].y]),i.push(t),i.push(["L",n[1].x,n[1].y]),i.push(["L",n[0].x,n[0].y]),i.push(["Z"]),i}Bn("edge","arc",{draw:function(n,e){var t=zi(n,!0,!1,"lineWidth"),r=n.points,i=r.length>2?"weight":"normal",a;if(n.isInCircle){var o={x:0,y:1};return i==="normal"?a=Z5(r[0],r[1],o):(t.fill=t.stroke,a=K5(r,o)),a=this.parsePath(a),e.addShape("path",{attrs:(0,b.__assign)((0,b.__assign)({},t),{path:a})})}else{if(i==="normal")return r=this.parsePoints(r),a=IS((r[1].x+r[0].x)/2,r[0].y,Math.abs(r[1].x-r[0].x)/2,Math.PI,Math.PI*2),e.addShape("path",{attrs:(0,b.__assign)((0,b.__assign)({},t),{path:a})});var s=O1(r[1],r[3]),l=O1(r[2],r[0]);return a=[["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],s,["L",r[3].x,r[3].y],["L",r[2].x,r[2].y],l,["Z"]],a=this.parsePath(a),t.fill=t.stroke,e.addShape("path",{attrs:(0,b.__assign)((0,b.__assign)({},t),{path:a})})}},getMarker:function(n){return{symbol:"circle",style:{r:4.5,fill:n.color}}}});function $5(n,e){var t=O1(n,e),r=[["M",n.x,n.y]];return r.push(t),r}Bn("edge","smooth",{draw:function(n,e){var t=zi(n,!0,!1,"lineWidth"),r=n.points,i=this.parsePath($5(r[0],r[1]));return e.addShape("path",{attrs:(0,b.__assign)((0,b.__assign)({},t),{path:i})})},getMarker:function(n){return{symbol:"circle",style:{r:4.5,fill:n.color}}}});var S0=1/3;function Q5(n,e){var t=[];t.push({x:n.x,y:n.y*(1-S0)+e.y*S0}),t.push({x:e.x,y:n.y*(1-S0)+e.y*S0}),t.push(e);var r=[["M",n.x,n.y]];return(0,v.each)(t,function(i){r.push(["L",i.x,i.y])}),r}Bn("edge","vhv",{draw:function(n,e){var t=zi(n,!0,!1,"lineWidth"),r=n.points,i=this.parsePath(Q5(r[0],r[1]));return e.addShape("path",{attrs:(0,b.__assign)((0,b.__assign)({},t),{path:i})})},getMarker:function(n){return{symbol:"circle",style:{r:4.5,fill:n.color}}}}),Bn("interval","funnel",{getPoints:function(n){return n.size=n.size*2,M1(n)},draw:function(n,e){var t=zi(n,!1,!0),r=this.parsePath(lw(n.points,n.nextPoints,!1)),i=e.addShape("path",{attrs:(0,b.__assign)((0,b.__assign)({},t),{path:r}),name:"interval"});return i},getMarker:function(n){var e=n.color;return{symbol:"square",style:{r:4,fill:e}}}}),Bn("interval","hollow-rect",{draw:function(n,e){var t=zi(n,!0,!1),r=e,i=n==null?void 0:n.background;if(i){r=e.addGroup();var a=iw(n),o=sw(n,this.parsePoints(n.points),this.coordinate);r.addShape("path",{attrs:(0,b.__assign)((0,b.__assign)({},a),{path:o}),zIndex:-1,name:r1})}var s=this.parsePath(A1(n.points)),l=r.addShape("path",{attrs:(0,b.__assign)((0,b.__assign)({},t),{path:s}),name:"interval"});return i?r:l},getMarker:function(n){var e=n.color,t=n.isInPolar;return t?{symbol:"circle",style:{r:4.5,stroke:e,fill:null}}:{symbol:"square",style:{r:4,stroke:e,fill:null}}}});function J5(n){var e=n.x,t=n.y,r=n.y0;return(0,v.isArray)(t)?t.map(function(i,a){return{x:(0,v.isArray)(e)?e[a]:e,y:i}}):[{x:e,y:r},{x:e,y:t}]}Bn("interval","line",{getPoints:function(n){return J5(n)},draw:function(n,e){var t=zi(n,!0,!1,"lineWidth"),r=Co((0,b.__assign)({},t),["fill"]),i=this.parsePath(A1(n.points,!1)),a=e.addShape("path",{attrs:(0,b.__assign)((0,b.__assign)({},r),{path:i}),name:"interval"});return a},getMarker:function(n){var e=n.color;return{symbol:function(t,r,i){return[["M",t,r-i],["L",t,r+i]]},style:{r:5,stroke:e}}}}),Bn("interval","pyramid",{getPoints:function(n){return n.size=n.size*2,M1(n,!0)},draw:function(n,e){var t=zi(n,!1,!0),r=this.parsePath(lw(n.points,n.nextPoints,!0)),i=e.addShape("path",{attrs:(0,b.__assign)((0,b.__assign)({},t),{path:r}),name:"interval"});return i},getMarker:function(n){var e=n.color;return{symbol:"square",style:{r:4,fill:e}}}});function q5(n){var e=n.x,t=n.y,r=n.y0,i=n.size,a,o;(0,v.isArray)(t)?(a=t[0],o=t[1]):(a=r,o=t);var s=e+i/2,l=e-i/2;return[{x:e,y:a},{x:e,y:o},{x:l,y:a},{x:s,y:a},{x:l,y:o},{x:s,y:o}]}function tG(n){return[["M",n[0].x,n[0].y],["L",n[1].x,n[1].y],["M",n[2].x,n[2].y],["L",n[3].x,n[3].y],["M",n[4].x,n[4].y],["L",n[5].x,n[5].y]]}Bn("interval","tick",{getPoints:function(n){return q5(n)},draw:function(n,e){var t=zi(n,!0,!1),r=this.parsePath(tG(n.points)),i=e.addShape("path",{attrs:(0,b.__assign)((0,b.__assign)({},t),{path:r}),name:"interval"});return i},getMarker:function(n){var e=n.color;return{symbol:function(t,r,i){return[["M",t-i/2,r-i],["L",t+i/2,r-i],["M",t,r-i],["L",t,r+i],["M",t-i/2,r+i],["L",t+i/2,r+i]]},style:{r:5,stroke:e}}}});var eG=function(n,e,t){var r=n.x,i=n.y,a=e.x,o=e.y,s;switch(t){case"hv":s=[{x:a,y:i}];break;case"vh":s=[{x:r,y:o}];break;case"hvh":var l=(a+r)/2;s=[{x:l,y:i},{x:l,y:o}];break;case"vhv":var u=(i+o)/2;s=[{x:r,y:u},{x:a,y:u}];break;default:break}return s};function rG(n,e){var t=[];return(0,v.each)(n,function(r,i){var a=n[i+1];if(t.push(r),a){var o=eG(r,a,e);t=t.concat(o)}}),t}function nG(n){return n.map(function(e,t){return t===0?["M",e.x,e.y]:["L",e.x,e.y]})}function iG(n,e){var t=S1(n.points,n.connectNulls,n.showSinglePoint),r=[];return(0,v.each)(t,function(i){var a=rG(i,e);r=r.concat(nG(a))}),(0,b.__assign)((0,b.__assign)({},zi(n,!0,!1,"lineWidth")),{path:r})}(0,v.each)(["hv","vh","hvh","vhv"],function(n){Bn("line",n,{draw:function(e,t){var r=iG(e,n),i=t.addShape({type:"path",attrs:r,name:"line"});return i},getMarker:function(e){return aw(e,n)}})}),(0,v.each)(B5,function(n){Bn("point",n,{draw:function(e,t){return I1(this,e,t,n,!0)},getMarker:function(e){var t=e.color;return{symbol:Uc[n],style:{r:4.5,stroke:t,fill:null}}}})}),Bn("point","image",{draw:function(n,e){var t=zi(n,!1,!1,"r").r,r=this.parsePoints(n.points),i=r[0];if(n.isStack)i=r[1];else if(r.length>1){for(var a=e.addGroup(),o=0,s=r;o<s.length;o++){var l=s[o];a.addShape("image",{attrs:{x:l.x-t/2,y:l.y-t,width:t,height:t,img:n.shape[1]}})}return a}return e.addShape("image",{attrs:{x:i.x-t/2,y:i.y-t,width:t,height:t,img:n.shape[1]}})},getMarker:function(n){var e=n.color;return{symbol:"circle",style:{r:4.5,fill:e}}}}),(0,v.each)(uw,function(n){Bn("point",n,{draw:function(e,t){return I1(this,e,t,n,!1)},getMarker:function(e){var t=e.color;return{symbol:Uc[n]||n,style:{r:4.5,fill:t}}}})});function cw(n){var e=(0,v.isArray)(n)?n:[n],t=e[0],r=e[e.length-1],i=e.length>1?e[1]:t,a=e.length>3?e[3]:r,o=e.length>2?e[2]:i;return{min:t,max:r,min1:i,max1:a,median:o}}function fw(n,e,t){var r=t/2,i;if((0,v.isArray)(e)){var a=cw(e),o=a.min,s=a.max,l=a.median,u=a.min1,c=a.max1,f=n-r,h=n+r;i=[[f,s],[h,s],[n,s],[n,c],[f,u],[f,c],[h,c],[h,u],[n,u],[n,o],[f,o],[h,o],[f,l],[h,l]]}else{e=(0,v.isNil)(e)?.5:e;var d=cw(n),o=d.min,s=d.max,l=d.median,u=d.min1,c=d.max1,g=e-r,p=e+r;i=[[o,g],[o,p],[o,e],[u,e],[u,g],[u,p],[c,p],[c,g],[c,e],[s,e],[s,g],[s,p],[l,g],[l,p]]}return i.map(function(m){return{x:m[0],y:m[1]}})}function aG(n){return[["M",n[0].x,n[0].y],["L",n[1].x,n[1].y],["M",n[2].x,n[2].y],["L",n[3].x,n[3].y],["M",n[4].x,n[4].y],["L",n[5].x,n[5].y],["L",n[6].x,n[6].y],["L",n[7].x,n[7].y],["L",n[4].x,n[4].y],["Z"],["M",n[8].x,n[8].y],["L",n[9].x,n[9].y],["M",n[10].x,n[10].y],["L",n[11].x,n[11].y],["M",n[12].x,n[12].y],["L",n[13].x,n[13].y]]}Bn("schema","box",{getPoints:function(n){var e=n.x,t=n.y,r=n.size;return fw(e,t,r)},draw:function(n,e){var t=zi(n,!0,!1),r=this.parsePath(aG(n.points)),i=e.addShape("path",{attrs:(0,b.__assign)((0,b.__assign)({},t),{path:r,name:"schema"})});return i},getMarker:function(n){var e=n.color;return{symbol:function(t,r,i){var a=[r-6,r-3,r,r+3,r+6],o=fw(t,a,i);return[["M",o[0].x+1,o[0].y],["L",o[1].x-1,o[1].y],["M",o[2].x,o[2].y],["L",o[3].x,o[3].y],["M",o[4].x,o[4].y],["L",o[5].x,o[5].y],["L",o[6].x,o[6].y],["L",o[7].x,o[7].y],["L",o[4].x,o[4].y],["Z"],["M",o[8].x,o[8].y],["L",o[9].x,o[9].y],["M",o[10].x+1,o[10].y],["L",o[11].x-1,o[11].y],["M",o[12].x,o[12].y],["L",o[13].x,o[13].y]]},style:{r:6,lineWidth:1,stroke:e}}}});function oG(n){var e=(0,v.isArray)(n)?n:[n],t=e.sort(function(r,i){return i-r});return Hk(t,4,t[t.length-1])}function hw(n,e,t){var r=oG(e);return[{x:n,y:r[0]},{x:n,y:r[1]},{x:n-t/2,y:r[2]},{x:n-t/2,y:r[1]},{x:n+t/2,y:r[1]},{x:n+t/2,y:r[2]},{x:n,y:r[2]},{x:n,y:r[3]}]}function sG(n){return[["M",n[0].x,n[0].y],["L",n[1].x,n[1].y],["M",n[2].x,n[2].y],["L",n[3].x,n[3].y],["L",n[4].x,n[4].y],["L",n[5].x,n[5].y],["Z"],["M",n[6].x,n[6].y],["L",n[7].x,n[7].y]]}Bn("schema","candle",{getPoints:function(n){var e=n.x,t=n.y,r=n.size;return hw(e,t,r)},draw:function(n,e){var t=zi(n,!0,!0),r=this.parsePath(sG(n.points)),i=e.addShape("path",{attrs:(0,b.__assign)((0,b.__assign)({},t),{path:r,name:"schema"})});return i},getMarker:function(n){var e=n.color;return{symbol:function(t,r,i){var a=[r+7.5,r+3,r-3,r-7.5],o=hw(t,a,i);return[["M",o[0].x,o[0].y],["L",o[1].x,o[1].y],["M",o[2].x,o[2].y],["L",o[3].x,o[3].y],["L",o[4].x,o[4].y],["L",o[5].x,o[5].y],["Z"],["M",o[6].x,o[6].y],["L",o[7].x,o[7].y]]},style:{lineWidth:1,stroke:e,fill:e,r:6}}}});function lG(n,e){var t=Math.abs(n[0].x-n[2].x),r=Math.abs(n[0].y-n[2].y),i=Math.min(t,r);e&&(i=(0,v.clamp)(e,0,Math.min(t,r))),i=i/2;var a=(n[0].x+n[2].x)/2,o=(n[0].y+n[2].y)/2;return{x:a-i,y:o-i,width:i*2,height:i*2}}Bn("polygon","square",{draw:function(n,e){if(!(0,v.isEmpty)(n.points)){var t=zi(n,!0,!0),r=this.parsePoints(n.points);return e.addShape("rect",{attrs:(0,b.__assign)((0,b.__assign)({},t),lG(r,n.size)),name:"polygon"})}},getMarker:function(n){var e=n.color;return{symbol:"square",style:{r:4,fill:e}}}}),Bn("violin","smooth",{draw:function(n,e){var t=zi(n,!0,!0),r=this.parsePath(nw(n.points));return e.addShape("path",{attrs:(0,b.__assign)((0,b.__assign)({},t),{path:r})})},getMarker:function(n){var e=n.color;return{symbol:"circle",style:{stroke:null,r:4,fill:e}}}}),Bn("violin","hollow",{draw:function(n,e){var t=zi(n,!0,!1),r=this.parsePath(rw(n.points));return e.addShape("path",{attrs:(0,b.__assign)((0,b.__assign)({},t),{path:r})})},getMarker:function(n){var e=n.color;return{symbol:"circle",style:{r:4,fill:null,stroke:e}}}}),Bn("violin","hollow-smooth",{draw:function(n,e){var t=zi(n,!0,!1),r=this.parsePath(nw(n.points));return e.addShape("path",{attrs:(0,b.__assign)((0,b.__assign)({},t),{path:r})})},getMarker:function(n){var e=n.color;return{symbol:"circle",style:{r:4,fill:null,stroke:e}}}});var uG=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getLabelValueDir=function(t){var r="y",i=t.points;return i[0][r]<=i[2][r]?1:-1},e.prototype.getLabelOffsetPoint=function(t,r,i){var a,o=n.prototype.getLabelOffsetPoint.call(this,t,r,i),s=this.getCoordinate().isTransposed,l=s?"x":"y",u=this.getLabelValueDir(t.mappingData);return(0,b.__assign)((0,b.__assign)({},o),(a={},a[l]=o[l]*u,a))},e.prototype.getThemedLabelCfg=function(t){var r=this.geometry,i=this.getDefaultLabelCfg(),a=r.theme;return(0,v.deepMix)({},i,a.labels,t.position==="middle"?{offset:0}:{},t)},e.prototype.setLabelPosition=function(t,r,i,a){var o=this.getCoordinate(),s=o.isTransposed,l=r.points,u=o.convert(l[0]),c=o.convert(l[2]),f=this.getLabelValueDir(r),h,d,g,p,m=(0,v.isArray)(r.shape)?r.shape[0]:r.shape;if(m==="funnel"||m==="pyramid"){var _=(0,v.get)(r,"nextPoints"),S=(0,v.get)(r,"points");if(_){var M=o.convert(S[0]),R=o.convert(S[1]),F=o.convert(_[0]),V=o.convert(_[1]);s?(h=Math.min(F.y,M.y),g=Math.max(F.y,M.y),d=(R.x+V.x)/2,p=(M.x+F.x)/2):(h=Math.min((R.y+V.y)/2,(M.y+F.y)/2),g=Math.max((R.y+V.y)/2,(M.y+F.y)/2),d=V.x,p=M.x)}else h=Math.min(c.y,u.y),g=Math.max(c.y,u.y),d=c.x,p=u.x}else h=Math.min(c.y,u.y),g=Math.max(c.y,u.y),d=c.x,p=u.x;switch(a){case"right":t.x=d,t.y=(h+g)/2,t.textAlign=(0,v.get)(t,"textAlign",f>0?"left":"right");break;case"left":t.x=p,t.y=(h+g)/2,t.textAlign=(0,v.get)(t,"textAlign",f>0?"left":"right");break;case"bottom":s&&(t.x=(d+p)/2),t.y=g,t.textAlign=(0,v.get)(t,"textAlign","center"),t.textBaseline=(0,v.get)(t,"textBaseline",f>0?"bottom":"top");break;case"middle":s&&(t.x=(d+p)/2),t.y=(h+g)/2,t.textAlign=(0,v.get)(t,"textAlign","center"),t.textBaseline=(0,v.get)(t,"textBaseline","middle");break;case"top":s&&(t.x=(d+p)/2),t.y=h,t.textAlign=(0,v.get)(t,"textAlign","center"),t.textBaseline=(0,v.get)(t,"textBaseline",f>0?"bottom":"top");break;default:break}},e}(h0),cG=uG,E0=Math.PI/2,fG=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getLabelOffset=function(t){var r=this.getCoordinate(),i=0;if((0,v.isNumber)(t))i=t;else if((0,v.isString)(t)&&t.indexOf("%")!==-1){var a=r.getRadius();r.innerRadius>0&&(a=a*(1-r.innerRadius)),i=parseFloat(t)*.01*a}return i},e.prototype.getLabelItems=function(t){var r=n.prototype.getLabelItems.call(this,t),i=this.geometry.getYScale();return(0,v.map)(r,function(a){if(a&&i){var o=i.scale((0,v.get)(a.data,i.field));return(0,b.__assign)((0,b.__assign)({},a),{percent:o})}return a})},e.prototype.getLabelAlign=function(t){var r=this.getCoordinate(),i;if(t.labelEmit)i=t.angle<=Math.PI/2&&t.angle>=-Math.PI/2?"left":"right";else if(!r.isTransposed)i="center";else{var a=r.getCenter(),o=t.offset;Math.abs(t.x-a.x)<1?i="center":t.angle>Math.PI||t.angle<=0?i=o>0?"left":"right":i=o>0?"right":"left"}return i},e.prototype.getLabelPoint=function(t,r,i){var a=1,o,s=t.content[i];this.isToMiddle(r)?o=this.getMiddlePoint(r.points):(t.content.length===1&&i===0?i=1:i===0&&(a=-1),o=this.getArcPoint(r,i));var l=t.offset*a,u=this.getPointAngle(o),c=t.labelEmit,f=this.getCirclePoint(u,l,o,c);return f.r===0?f.content="":(f.content=s,f.angle=u,f.color=r.color),f.rotate=t.autoRotate?this.getLabelRotate(u,l,c):t.rotate,f.start={x:o.x,y:o.y},f},e.prototype.getArcPoint=function(t,r){return r===void 0&&(r=0),!(0,v.isArray)(t.x)&&!(0,v.isArray)(t.y)?{x:t.x,y:t.y}:{x:(0,v.isArray)(t.x)?t.x[r]:t.x,y:(0,v.isArray)(t.y)?t.y[r]:t.y}},e.prototype.getPointAngle=function(t){return wh(this.getCoordinate(),t)},e.prototype.getCirclePoint=function(t,r,i,a){var o=this.getCoordinate(),s=o.getCenter(),l=r0(o,i);if(l===0)return(0,b.__assign)((0,b.__assign)({},s),{r:l});var u=t;if(o.isTransposed&&l>r&&!a){var c=Math.asin(r/(2*l));u=t+c*2}else l=l+r;return{x:s.x+l*Math.cos(u),y:s.y+l*Math.sin(u),r:l}},e.prototype.getLabelRotate=function(t,r,i){var a=t+E0;return i&&(a-=E0),a&&(a>E0?a=a-Math.PI:a<-E0&&(a=a+Math.PI)),a},e.prototype.getMiddlePoint=function(t){var r=this.getCoordinate(),i=t.length,a={x:0,y:0};return(0,v.each)(t,function(o){a.x+=o.x,a.y+=o.y}),a.x/=i,a.y/=i,a=r.convert(a),a},e.prototype.isToMiddle=function(t){return t.x.length>2},e}(h0),dw=fG,hG=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.defaultLayout="distribute",t}return e.prototype.getDefaultLabelCfg=function(t,r){var i=n.prototype.getDefaultLabelCfg.call(this,t,r);return(0,v.deepMix)({},i,(0,v.get)(this.geometry.theme,"pieLabels",{}))},e.prototype.getLabelOffset=function(t){return n.prototype.getLabelOffset.call(this,t)||0},e.prototype.getLabelRotate=function(t,r,i){var a;return r<0&&(a=t,a>Math.PI/2&&(a=a-Math.PI),a<-Math.PI/2&&(a=a+Math.PI)),a},e.prototype.getLabelAlign=function(t){var r=this.getCoordinate(),i=r.getCenter(),a;return t.angle<=Math.PI/2&&t.x>=i.x?a="left":a="right",t.offset<=0&&(a==="right"?a="left":a="right"),a},e.prototype.getArcPoint=function(t){return t},e.prototype.getPointAngle=function(t){var r=this.getCoordinate(),i={x:(0,v.isArray)(t.x)?t.x[0]:t.x,y:t.y[0]},a={x:(0,v.isArray)(t.x)?t.x[1]:t.x,y:t.y[1]},o,s=wh(r,i);if(t.points&&t.points[0].y===t.points[1].y)o=s;else{var l=wh(r,a);s>=l&&(l=l+Math.PI*2),o=s+(l-s)/2}return o},e.prototype.getCirclePoint=function(t,r){var i=this.getCoordinate(),a=i.getCenter(),o=i.getRadius()+r;return(0,b.__assign)((0,b.__assign)({},ji(a.x,a.y,o,t)),{angle:t,r:o})},e}(dw),dG=hG,vw=4;function vG(n,e,t,r,i,a){var o=!0,s=r.start,l=r.end,u=Math.min(s.y,l.y),c=Math.abs(s.y-l.y),f,h=0,d=Number.MIN_VALUE,g=e.map(function(F){return F.y>h&&(h=F.y),F.y<d&&(d=F.y),{size:t,targets:[F.y-u]}});for(d-=u,h-u>c&&(c=h-u);o;)for(g.forEach(function(F){var V=(Math.min.apply(d,F.targets)+Math.max.apply(d,F.targets))/2;F.pos=Math.min(Math.max(d,V-F.size/2),c-F.size)}),o=!1,f=g.length;f--;)if(f>0){var p=g[f-1],m=g[f];p.pos+p.size>m.pos&&(p.size+=m.size,p.targets=p.targets.concat(m.targets),p.pos+p.size>c&&(p.pos=c-p.size),g.splice(f,1),o=!0)}f=0,g.forEach(function(F){var V=u+t/2;F.targets.forEach(function(){e[f].y=F.pos+V,V+=t,f++})});for(var _={},S=0,M=n;S<M.length;S++){var R=M[S];_[R.get("id")]=R}e.forEach(function(F){var V=F.r*F.r,nt=Math.pow(Math.abs(F.y-i.y),2);if(V<nt)F.x=i.x;else{var at=Math.sqrt(V-nt);a?F.x=i.x+at:F.x=i.x-at}var xt=_[F.id];xt.attr("x",F.x),xt.attr("y",F.y);var gt=(0,v.find)(xt.getChildren(),function(Tt){return Tt.get("type")==="text"});gt&&(gt.attr("y",F.y),gt.attr("x",F.x))})}function gG(n,e,t,r){if(!(!n.length||!e.length)){var i=n[0]?n[0].offset:0,a=e[0].get("coordinate"),o=a.getRadius(),s=a.getCenter();if(i>0){var l=14,u=o+i,c=u*2+l*2,f={start:a.start,end:a.end},h=[[],[]];n.forEach(function(d){!d||(d.textAlign==="right"?h[0].push(d):h[1].push(d))}),h.forEach(function(d,g){var p=c/l;d.length>p&&(d.sort(function(m,_){return _["..percent"]-m["..percent"]}),d.splice(p,d.length-p)),d.sort(function(m,_){return m.y-_.y}),vG(e,d,l,f,s,g)})}(0,v.each)(n,function(d){if(d&&d.labelLine){var g=d.offset,p=d.angle,m=ji(s.x,s.y,o,p),_=ji(s.x,s.y,o+g/2,p),S=d.x+(0,v.get)(d,"offsetX",0),M=d.y+(0,v.get)(d,"offsetY",0),R={x:S-Math.cos(p)*vw,y:M-Math.sin(p)*vw};(0,v.isObject)(d.labelLine)||(d.labelLine={}),d.labelLine.path=["M "+m.x,m.y+" Q"+_.x,_.y+" "+R.x,R.y].join(",")}})}}function gw(n,e,t){var r=n.filter(function(g){return!g.invisible});r.sort(function(g,p){return g.y-p.y});var i=!0,a=t.minY,o=t.maxY,s=Math.abs(a-o),l,u=0,c=Number.MIN_VALUE,f=r.map(function(g){return g.y>u&&(u=g.y),g.y<c&&(c=g.y),{content:g.content,size:e,targets:[g.y-a],pos:null}});for(c-=a,u-a>s&&(s=u-a);i;)for(f.forEach(function(g){var p=(Math.min.apply(c,g.targets)+Math.max.apply(c,g.targets))/2;g.pos=Math.min(Math.max(c,p-g.size/2),s-g.size),g.pos=Math.max(0,g.pos)}),i=!1,l=f.length;l--;)if(l>0){var h=f[l-1],d=f[l];h.pos+h.size>d.pos&&(h.size+=d.size,h.targets=h.targets.concat(d.targets),h.pos+h.size>s&&(h.pos=s-h.size),f.splice(l,1),i=!0)}l=0,f.forEach(function(g){var p=a+e/2;g.targets.forEach(function(){r[l].y=g.pos+p,p+=e,l++})})}var pw=4;function pG(n,e){var t=e.getCenter(),r=e.getRadius();if(n&&n.labelLine){var i=n.angle,a=n.offset,o=ji(t.x,t.y,r,i),s=n.x+(0,v.get)(n,"offsetX",0)*(Math.cos(i)>0?1:-1),l=n.y+(0,v.get)(n,"offsetY",0)*(Math.sin(i)>0?1:-1),u={x:s-Math.cos(i)*pw,y:l-Math.sin(i)*pw},c=n.labelLine.smooth,f=[],h=u.x-t.x,d=u.y-t.y,g=Math.atan(d/h);if(h<0&&(g+=Math.PI),c===!1){(0,v.isObject)(n.labelLine)||(n.labelLine={});var p=0;(i<0&&i>-Math.PI/2||i>Math.PI*1.5)&&u.y>o.y&&(p=1),i>=0&&i<Math.PI/2&&u.y>o.y&&(p=1),i>=Math.PI/2&&i<Math.PI&&o.y>u.y&&(p=1),(i<-Math.PI/2||i>=Math.PI&&i<Math.PI*1.5)&&o.y>u.y&&(p=1);var m=a/2>4?4:Math.max(a/2-1,0),_=ji(t.x,t.y,r+m,i),S=ji(t.x,t.y,r+a/2,g),M=0;f.push("M "+o.x+" "+o.y),f.push("L "+_.x+" "+_.y),f.push("A "+t.x+" "+t.y+" 0 "+M+" "+p+" "+S.x+" "+S.y),f.push("L "+u.x+" "+u.y)}else{var _=ji(t.x,t.y,r+(a/2>4?4:Math.max(a/2-1,0)),i),R=o.x<t.x?1:-1;f.push("M "+u.x+" "+u.y);var F=(o.y-t.y)/(o.x-t.x),V=(u.y-t.y)/(u.x-t.x);Math.abs(F-V)>Math.pow(Math.E,-16)&&f.push.apply(f,["C",u.x+R*4,u.y,2*_.x-o.x,2*_.y-o.y,o.x,o.y]),f.push("L "+o.x+" "+o.y)}n.labelLine.path=f.join(" ")}}function yG(n,e,t,r){var i=(0,v.filter)(n,function(V){return!(0,v.isNil)(V)}),a=e[0]&&e[0].get("coordinate");if(!!a){for(var o=a.getCenter(),s=a.getRadius(),l={},u=0,c=e;u<c.length;u++){var f=c[u];l[f.get("id")]=f}var h=(0,v.get)(i[0],"labelHeight",14),d=(0,v.get)(i[0],"offset",0);if(!(d<=0)){var g="left",p="right",m=(0,v.groupBy)(i,function(V){return V.x<o.x?g:p}),_=a.start,S=a.end,M=Math.min((s+d+h)*2,a.getHeight()),R=M/2,F={minX:_.x,maxX:S.x,minY:o.y-R,maxY:o.y+R};(0,v.each)(m,function(V,nt){var at=Math.floor(M/h);V.length>at&&(V.sort(function(xt,gt){return gt.percent-xt.percent}),(0,v.each)(V,function(xt,gt){gt+1>at&&(l[xt.id].set("visible",!1),xt.invisible=!0)})),gw(V,h,F)}),(0,v.each)(m,function(V,nt){(0,v.each)(V,function(at){var xt=nt===p,gt=l[at.id],Tt=gt.getChildByIndex(0);if(Tt){var Ct=s+d,te=at.y-o.y,Kt=Math.pow(Ct,2),ne=Math.pow(te,2),ee=Kt-ne>0?Kt-ne:0,ve=Math.sqrt(ee),ie=Math.abs(Math.cos(at.angle)*Ct);xt?at.x=o.x+Math.max(ve,ie):at.x=o.x-Math.max(ve,ie)}Tt&&(Tt.attr("y",at.y),Tt.attr("x",at.x)),pG(at,a)})})}}}var D1=4,mG=4,yw=4;function xG(n,e,t){var r=e.getCenter(),i=e.getRadius(),a={x:n.x-(t?yw:-yw),y:n.y},o=ji(r.x,r.y,i+D1,n.angle),s={x:a.x,y:a.y},l={x:o.x,y:o.y},u=ji(r.x,r.y,i,n.angle),c="";if(a.y!==o.y){var f=t?4:-4;s.y=a.y,n.angle<0&&n.angle>=-Math.PI/2&&(s.x=Math.max(o.x,a.x-f),a.y<o.y?l.y=s.y:(l.y=o.y,l.x=Math.max(l.x,s.x-f))),n.angle>0&&n.angle<Math.PI/2&&(s.x=Math.max(o.x,a.x-f),a.y>o.y?l.y=s.y:(l.y=o.y,l.x=Math.max(l.x,s.x-f))),n.angle>Math.PI/2&&(s.x=Math.min(o.x,a.x-f),a.y>o.y?l.y=s.y:(l.y=o.y,l.x=Math.min(l.x,s.x-f))),n.angle<-Math.PI/2&&(s.x=Math.min(o.x,a.x-f),a.y<o.y?l.y=s.y:(l.y=o.y,l.x=Math.min(l.x,s.x-f)))}c=["M "+a.x+","+a.y,"L "+s.x+","+s.y,"L "+l.x+","+l.y,"L "+o.x+","+o.y,"L "+u.x+","+u.y].join(" "),n.labelLine=(0,v.deepMix)({},n.labelLine,{path:c})}function bG(n,e,t,r){var i=e[0]&&e[0].get("coordinate");if(!!i){for(var a=i.getCenter(),o=i.getRadius(),s={},l=0,u=e;l<u.length;l++){var c=u[l];s[c.get("id")]=c}var f=(0,v.get)(n[0],"labelHeight",14),h=Math.max((0,v.get)(n[0],"offset",0),D1);(0,v.each)(n,function(V){var nt=(0,v.get)(s,[V.id]);if(!!nt){var at=V.x>a.x||V.x===a.x&&V.y>a.y,xt=(0,v.isNil)(V.offsetX)?mG:V.offsetX,gt=ji(a.x,a.y,o+D1,V.angle),Tt=h+xt;V.x=a.x+(at?1:-1)*(o+Tt),V.y=gt.y}});var d=i.start,g=i.end,p="left",m="right",_=(0,v.groupBy)(n,function(V){return V.x<a.x?p:m}),S=(o+h)*2+f;(0,v.each)(_,function(V){var nt=V.length*f;nt>S&&(S=Math.min(nt,Math.abs(d.y-g.y)))});var M={minX:d.x,maxX:g.x,minY:a.y-S/2,maxY:a.y+S/2};(0,v.each)(_,function(V,nt){var at=S/f;V.length>at&&(V.sort(function(xt,gt){return gt.percent-xt.percent}),(0,v.each)(V,function(xt,gt){gt>at&&(s[xt.id].set("visible",!1),xt.invisible=!0)})),gw(V,f,M)});var R=M.minY,F=M.maxY;(0,v.each)(_,function(V,nt){var at=nt===m;(0,v.each)(V,function(xt){var gt=(0,v.get)(s,xt&&[xt.id]);if(!!gt){if(xt.y<R||xt.y>F){gt.set("visible",!1);return}var Tt=gt.getChildByIndex(0),Ct=Tt.getCanvasBBox(),te={x:at?Ct.x:Ct.maxX,y:Ct.y+Ct.height/2};Zv(Tt,xt.x-te.x,xt.y-te.y),xt.labelLine&&xG(xt,i,at)}})})}}function _G(n,e,t,r){(0,v.each)(e,function(i){var a=r.minX,o=r.minY,s=r.maxX,l=r.maxY,u=i.getCanvasBBox(),c=u.minX,f=u.minY,h=u.maxX,d=u.maxY,g=u.x,p=u.y,m=u.width,_=u.height,S=g,M=p;(c<a||h<a)&&(S=a),(f<o||d<o)&&(M=o),c>s?S=s-m:h>s&&(S=S-(h-s)),f>l?M=l-_:d>l&&(M=M-(d-l)),(S!==g||M!==p)&&Zv(i,S-g,M-p)})}function SG(n,e,t,r){(0,v.each)(e,function(i,a){var o=i.getCanvasBBox(),s=t[a].getBBox();(o.minX<s.minX||o.minY<s.minY||o.maxX>s.maxX||o.maxY>s.maxY)&&i.remove(!0)})}var EG=100,mw=function(){function n(e){e===void 0&&(e={}),this.bitmap={};var t=e.xGap,r=t===void 0?1:t,i=e.yGap,a=i===void 0?8:i;this.xGap=r,this.yGap=a}return n.prototype.hasGap=function(e){for(var t=!0,r=this.bitmap,i=Math.round(e.minX),a=Math.round(e.maxX),o=Math.round(e.minY),s=Math.round(e.maxY),l=i;l<=a;l+=1){if(!r[l]){r[l]={};continue}if(l===i||l===a){for(var u=o;u<=s;u++)if(r[l][u]){t=!1;break}}else if(r[l][o]||r[l][s]){t=!1;break}}return t},n.prototype.fillGap=function(e){for(var t=this.bitmap,r=Math.round(e.minX),i=Math.round(e.maxX),a=Math.round(e.minY),o=Math.round(e.maxY),s=r;s<=i;s+=1)t[s]||(t[s]={});for(var s=r;s<=i;s+=this.xGap){for(var l=a;l<=o;l+=this.yGap)t[s][l]=!0;t[s][o]=!0}if(this.yGap!==1)for(var s=a;s<=o;s+=1)t[r][s]=!0,t[i][s]=!0;if(this.xGap!==1)for(var s=r;s<=i;s+=1)t[s][a]=!0,t[s][o]=!0},n.prototype.destroy=function(){this.bitmap={}},n}();function wG(n,e,t){t===void 0&&(t=EG);var r=-1,i=n.attr(),a=i.x,o=i.y,s=n.getCanvasBBox(),l=Math.sqrt(s.width*s.width+s.height*s.height),u,c=-r,f=0,h=0,d=function(_){var S=_*.1;return[S*Math.cos(S),S*Math.sin(S)]};if(e.hasGap(s))return e.fillGap(s),!0;for(var g=!1,p=0,m={};Math.min(Math.abs(f),Math.abs(h))<l&&p<t;)if(u=d(c+=r),f=~~u[0],h=~~u[1],!(!f&&!h||m[f+"-"+h])&&(n.attr({x:a+f,y:o+h}),f+h<0&&n.attr("textAlign","right"),p++,e.hasGap(n.getCanvasBBox()))){e.fillGap(n.getCanvasBBox()),g=!0,m[f+"-"+h]=!0;break}return g}function CG(n,e,t,r){var i=n.getCanvasBBox(),a=i.width,o=i.height,s={x:e,y:t,textAlign:"center"};switch(r){case 0:s.y-=o+1,s.x+=1,s.textAlign="left";break;case 1:s.y-=o+1,s.x-=1,s.textAlign="right";break;case 2:s.y+=o+1,s.x-=1,s.textAlign="right";break;case 3:s.y+=o+1,s.x+=1,s.textAlign="left";break;case 5:s.y-=o*2+2;break;case 6:s.y+=o*2+2;break;case 7:s.x+=a+1,s.textAlign="left";break;case 8:s.x-=a+1,s.textAlign="right";break;default:break}return n.attr(s),n.getCanvasBBox()}function MG(n,e,t,r){var i=new mw;(0,v.each)(e,function(a){var o=a.find(function(s){return s.get("type")==="text"});wG(o,i)||a.remove(!0)}),i.destroy()}function AG(n,e,t,r){var i=new mw;(0,v.each)(e,function(a){for(var o=a.find(function(d){return d.get("type")==="text"}),s=o.attr(),l=s.x,u=s.y,c=!1,f=0;f<=8;f++){var h=CG(o,l,u,f);if(i.hasGap(h)){i.fillGap(h),c=!0;break}}c||a.remove(!0)}),i.destroy()}var TG=Ar.AK;function xw(n){if(n.length>4)return[];var e=function(i,a){return[a.x-i.x,a.y-i.y]},t=e(n[0],n[1]),r=e(n[1],n[2]);return[t,r]}function w0(n,e,t){e===void 0&&(e=0),t===void 0&&(t={x:0,y:0});var r=n.x,i=n.y;return{x:(r-t.x)*Math.cos(-e)+(i-t.y)*Math.sin(-e)+t.x,y:(t.x-r)*Math.sin(-e)+(i-t.y)*Math.cos(-e)+t.y}}function bw(n){var e=[{x:n.x,y:n.y},{x:n.x+n.width,y:n.y},{x:n.x+n.width,y:n.y+n.height},{x:n.x,y:n.y+n.height}],t=n.rotation;return t?[w0(e[0],t,e[0]),w0(e[1],t,e[0]),w0(e[2],t,e[0]),w0(e[3],t,e[0])]:e}function _w(n,e){if(n.length>4)return{min:0,max:0};var t=[];return n.forEach(function(r){t.push(TG([r.x,r.y],e))}),{min:Math.min.apply(Math,t),max:Math.max.apply(Math,t)}}function IG(n,e){return n.max>e.min&&n.min<e.max}function OG(n,e,t){return t===void 0&&(t=0),!(e.x>n.x+n.width+t||e.x+e.width<n.x-t||e.y>n.y+n.height+t||e.y+e.height<n.y-t)}function PG(n,e){if(!n.rotation&&!e.rotation)return OG(n,e);for(var t=bw(n),r=bw(e),i=(0,b.__spreadArrays)(xw(t),xw(r)),a=0;a<i.length;a++){var o=i[a],s=_w(t,o),l=_w(r,o);if(!IG(s,l))return!1}return!0}function DG(n,e,t,r){for(var i=0;i<e.length;i++){var a=e[i];if(e[i].get("visible"))for(var o=i+1;o<e.length;o++){var s=e[o];if(a&&s&&a!==s&&s.get("visible")){var l=s1(a,n[i],(0,v.get)(n[i],"background.padding")),u=s1(s,n[o],(0,v.get)(n[o],"background.padding"));PG(l,u)&&e[o].set("visible",!1)}}}}var Sw={"#5B8FF9":!0},LG=function(n){var e=xo.toRGB(n).toUpperCase();if(Sw[e])return Sw[e];var t=xo.rgb2arr(e),r=t[0],i=t[1],a=t[2],o=(r*299+i*587+a*114)/1e3<128;return o};function RG(n,e,t){if(t.length!==0){var r=t[0].get("element"),i=r.geometry.theme,a=i.labels||{},o=a.fillColorLight,s=a.fillColorDark;t.forEach(function(l,u){var c=e[u],f=c.find(function(_){return _.get("type")==="text"}),h=Va.fromObject(l.getBBox()),d=Va.fromObject(f.getCanvasBBox()),g=!h.contains(d),p=l.attr("fill"),m=LG(p);g?f.attr(i.overflowLabels.style):m?o&&f.attr("fill",o):s&&f.attr("fill",s)})}}function NG(n,e,t){var r=n.coordinate,i=Su(e),a=Va.fromObject(i.getCanvasBBox()),o=Va.fromObject(t.getBBox());return r.isTransposed?o.height>=a.height:o.width>=a.width}function kG(n,e,t){var r=!!n.getAdjust("stack");return r||e.every(function(i,a){var o=t[a];return NG(n,i,o)})}function BG(n,e,t){var r=n.coordinate,i=Va.fromObject(t.getBBox()),a=Su(e);r.isTransposed?a.attr({x:i.minX+i.width/2,textAlign:"center"}):a.attr({y:i.minY+i.height/2,textBaseline:"middle"})}function FG(n,e,t){var r;if(t.length!==0){var i=(r=t[0])===null||r===void 0?void 0:r.get("element"),a=i==null?void 0:i.geometry;if(!(!a||a.type!=="interval")){var o=kG(a,e,t);o&&t.forEach(function(s,l){var u=e[l];BG(a,u,s)})}}}function GG(n){var e=500,t=[],r=Math.max(Math.floor(n.length/e),1);return(0,v.each)(n,function(i,a){a%r==0?t.push(i):i.set("visible",!1)}),t}function zG(n,e,t){var r;if(t.length!==0){var i=(r=t[0])===null||r===void 0?void 0:r.get("element"),a=i==null?void 0:i.geometry;if(!(!a||a.type!=="interval")){var o=GG(e),s=a.getXYFields()[0],l=[],u=[],c=(0,v.groupBy)(o,function(p){return p.get("data")[s]}),f=(0,v.uniq)((0,v.map)(o,function(p){return p.get("data")[s]})),h;o.forEach(function(p){p.set("visible",!0)});var d=function(p){p&&(p.length&&u.push(p.pop()),u.push.apply(u,p))};for((0,v.size)(f)>0&&(h=f.shift(),d(c[h])),(0,v.size)(f)>0&&(h=f.pop(),d(c[h])),(0,v.each)(f.reverse(),function(p){d(c[p])});u.length>0;){var g=u.shift();g.get("visible")&&(fF(g,l)?g.set("visible",!1):l.push(g))}}}}function UG(n,e){var t=n.getXYFields()[1],r=[],i=e.sort(function(a,o){return a.get("data")[t]-a.get("data")[t]});return i.length>0&&r.push(i.shift()),i.length>0&&r.push(i.pop()),r.push.apply(r,i),r}function Ew(n,e,t){return n.some(function(r){return t(r,e)})}function WG(n,e,t){t===void 0&&(t=0);var r=Math.max(0,Math.min(n.x+n.width+t,e.x+e.width+t)-Math.max(n.x-t,e.x-t)),i=Math.max(0,Math.min(n.y+n.height+t,e.y+e.height+t)-Math.max(n.y-t,e.y-t));return r*i}function ww(n,e){return Ew(n,e,function(t,r){var i=Su(t),a=Su(r);return WG(i.getCanvasBBox(),a.getCanvasBBox(),2)>0})}function VG(n,e,t,r,i){var a,o;if(t.length!==0){var s=(a=t[0])===null||a===void 0?void 0:a.get("element"),l=s==null?void 0:s.geometry;if(!(!l||l.type!=="point")){var u=l.getXYFields(),c=u[0],f=u[1],h=(0,v.groupBy)(e,function(p){return p.get("data")[c]}),d=[],g=i&&i.offset||((o=n[0])===null||o===void 0?void 0:o.offset)||12;(0,v.map)((0,v.keys)(h).reverse(),function(p){for(var m=UG(l,h[p]);m.length;){var _=m.shift(),S=Su(_);if(Ew(d,_,function(F,V){return F.get("data")[c]===V.get("data")[c]&&F.get("data")[f]===V.get("data")[f]})){S.set("visible",!1);continue}var M=ww(d,_),R=!1;if(M&&(S.attr("y",S.attr("y")+2*g),R=ww(d,_)),R){S.set("visible",!1);continue}d.push(_)}})}}}function XG(n,e){var t=n.getXYFields()[1],r=[],i=e.sort(function(a,o){return a.get("data")[t]-a.get("data")[t]});return i.length>0&&r.push(i.shift()),i.length>0&&r.push(i.pop()),r.push.apply(r,i),r}function Cw(n,e,t){return n.some(function(r){return t(r,e)})}function YG(n,e,t){t===void 0&&(t=0);var r=Math.max(0,Math.min(n.x+n.width+t,e.x+e.width+t)-Math.max(n.x-t,e.x-t)),i=Math.max(0,Math.min(n.y+n.height+t,e.y+e.height+t)-Math.max(n.y-t,e.y-t));return r*i}function Mw(n,e){return Cw(n,e,function(t,r){var i=Su(t),a=Su(r);return YG(i.getCanvasBBox(),a.getCanvasBBox(),2)>0})}function HG(n,e,t,r,i){var a,o;if(t.length!==0){var s=(a=t[0])===null||a===void 0?void 0:a.get("element"),l=s==null?void 0:s.geometry;if(!(!l||["path","line","area"].indexOf(l.type)<0)){var u=l.getXYFields(),c=u[0],f=u[1],h=(0,v.groupBy)(e,function(p){return p.get("data")[c]}),d=[],g=i&&i.offset||((o=n[0])===null||o===void 0?void 0:o.offset)||12;(0,v.map)((0,v.keys)(h).reverse(),function(p){for(var m=XG(l,h[p]);m.length;){var _=m.shift(),S=Su(_);if(Cw(d,_,function(F,V){return F.get("data")[c]===V.get("data")[c]&&F.get("data")[f]===V.get("data")[f]})){S.set("visible",!1);continue}var M=Mw(d,_),R=!1;if(M&&(S.attr("y",S.attr("y")+2*g),R=Mw(d,_)),R){S.set("visible",!1);continue}d.push(_)}})}}}var L1;function jG(){return L1||(L1=document.createElement("canvas").getContext("2d")),L1}var C0=(0,v.memoize)(function(n,e){e===void 0&&(e={});var t=e.fontSize,r=e.fontFamily,i=e.fontWeight,a=e.fontStyle,o=e.fontVariant,s=jG();return s.font=[a,o,i,t+"px",r].join(" "),s.measureText((0,v.isString)(n)?n:"").width},function(n,e){return e===void 0&&(e={}),(0,b.__spreadArrays)([n],(0,v.values)(e)).join("")}),ZG=function(n,e,t){var r=16,i=C0("...",t),a;(0,v.isString)(n)?a=n:a=(0,v.toString)(n);var o=e,s=[],l,u;if(C0(n,t)<=e)return n;for(;l=a.substr(0,r),u=C0(l,t),!(u+i>o&&u>o);)if(s.push(l),o-=u,a=a.substr(r),!a)return s.join("");for(;l=a.substr(0,1),u=C0(l,t),!(u+i>o);)if(s.push(l),o-=u,a=a.substr(1),!a)return s.join("");return s.join("")+"..."};function KG(n,e,t,r,i){if(!(e.length<=0)){var a=(i==null?void 0:i.direction)||["top","right","bottom","left"],o=(i==null?void 0:i.action)||"translate",s=(i==null?void 0:i.margin)||0,l=e[0].get("coordinate");if(!!l){var u=Kk(l,s),c=u.minX,f=u.minY,h=u.maxX,d=u.maxY;(0,v.each)(e,function(g){var p=g.getCanvasBBox(),m=p.minX,_=p.minY,S=p.maxX,M=p.maxY,R=p.x,F=p.y,V=p.width,nt=p.height,at=R,xt=F;if(a.indexOf("left")>=0&&(m<c||S<c)&&(at=c),a.indexOf("top")>=0&&(_<f||M<f)&&(xt=f),a.indexOf("right")>=0&&(m>h?at=h-V:S>h&&(at=at-(S-h))),a.indexOf("bottom")>=0&&(_>d?xt=d-nt:M>d&&(xt=xt-(M-d))),at!==R||xt!==F){var gt=at-R;if(o==="translate")Zv(g,gt,xt-F);else if(o==="ellipsis"){var Tt=g.findAll(function(Ct){return Ct.get("type")==="text"});Tt.forEach(function(Ct){var te=(0,v.pick)(Ct.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),Kt=Ct.getCanvasBBox(),ne=ZG(Ct.attr("text"),Kt.width-Math.abs(gt),te);Ct.attr("text",ne)})}else g.hide()}})}}}function $G(n,e,t){var r={fillOpacity:(0,v.isNil)(n.attr("fillOpacity"))?1:n.attr("fillOpacity"),strokeOpacity:(0,v.isNil)(n.attr("strokeOpacity"))?1:n.attr("strokeOpacity"),opacity:(0,v.isNil)(n.attr("opacity"))?1:n.attr("opacity")};n.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),n.animate(r,e)}function QG(n,e,t){var r={fillOpacity:0,strokeOpacity:0,opacity:0},i=e.easing,a=e.duration,o=e.delay;n.animate(r,a,i,function(){n.remove(!0)},o)}function JG(n,e,t){var r,i=e[0],a=e[1];return n.applyToMatrix([i,a,1]),t==="x"?(n.setMatrix(Cn.vs(n.getMatrix(),[["t",-i,-a],["s",.01,1],["t",i,a]])),r=Cn.vs(n.getMatrix(),[["t",-i,-a],["s",100,1],["t",i,a]])):t==="y"?(n.setMatrix(Cn.vs(n.getMatrix(),[["t",-i,-a],["s",1,.01],["t",i,a]])),r=Cn.vs(n.getMatrix(),[["t",-i,-a],["s",1,100],["t",i,a]])):t==="xy"&&(n.setMatrix(Cn.vs(n.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]])),r=Cn.vs(n.getMatrix(),[["t",-i,-a],["s",100,100],["t",i,a]])),r}function R1(n,e,t,r,i){var a=t.start,o=t.end,s=t.getWidth(),l=t.getHeight(),u,c;i==="y"?(u=a.x+s/2,c=r.y<a.y?r.y:a.y):i==="x"?(u=r.x>a.x?r.x:a.x,c=a.y+l/2):i==="xy"&&(t.isPolar?(u=t.getCenter().x,c=t.getCenter().y):(u=(a.x+o.x)/2,c=(a.y+o.y)/2));var f=JG(n,[u,c],i);n.animate({matrix:f},e)}function qG(n,e,t){var r=t.coordinate,i=t.minYPoint;R1(n,e,r,i,"x")}function t4(n,e,t){var r=t.coordinate,i=t.minYPoint;R1(n,e,r,i,"y")}function e4(n,e,t){var r=t.coordinate,i=t.minYPoint;R1(n,e,r,i,"xy")}function r4(n,e,t){var r=n.getTotalLength();n.attr("lineDash",[r]),n.animate(function(i){return{lineDashOffset:(1-i)*r}},e)}function n4(n,e,t){var r=t.toAttrs,i=r.x,a=r.y;delete r.x,delete r.y,n.attr(r),n.animate({x:i,y:a},e)}function i4(n,e,t){var r=n.getBBox(),i=n.get("origin").mappingData,a=i.points,o=a[0].y-a[1].y>0?r.maxX:r.minX,s=(r.minY+r.maxY)/2;n.applyToMatrix([o,s,1]);var l=Cn.vs(n.getMatrix(),[["t",-o,-s],["s",.01,1],["t",o,s]]);n.setMatrix(l),n.animate({matrix:Cn.vs(n.getMatrix(),[["t",-o,-s],["s",100,1],["t",o,s]])},e)}function a4(n,e,t){var r=n.getBBox(),i=n.get("origin").mappingData,a=(r.minX+r.maxX)/2,o=i.points,s=o[0].y-o[1].y<=0?r.maxY:r.minY;n.applyToMatrix([a,s,1]);var l=Cn.vs(n.getMatrix(),[["t",-a,-s],["s",1,.01],["t",a,s]]);n.setMatrix(l),n.animate({matrix:Cn.vs(n.getMatrix(),[["t",-a,-s],["s",1,100],["t",a,s]])},e)}function Aw(n,e){var t,r=v0(n,e),i=r.startAngle,a=r.endAngle;return!(0,v.isNumberEqual)(i,-Math.PI*.5)&&i<-Math.PI*.5&&(i+=Math.PI*2),!(0,v.isNumberEqual)(a,-Math.PI*.5)&&a<-Math.PI*.5&&(a+=Math.PI*2),e[5]===0&&(t=[a,i],i=t[0],a=t[1]),(0,v.isNumberEqual)(i,Math.PI*1.5)&&(i=Math.PI*-.5),(0,v.isNumberEqual)(a,Math.PI*-.5)&&(a=Math.PI*1.5),{startAngle:i,endAngle:a}}function Tw(n){var e;return n[0]==="M"||n[0]==="L"?e=[n[1],n[2]]:(n[0]==="a"||n[0]==="A"||n[0]==="C")&&(e=[n[n.length-2],n[n.length-1]]),e}function Iw(n){var e,t,r,i=n.filter(function(M){return M[0]==="A"||M[0]==="a"});if(i.length===0)return{startAngle:0,endAngle:0,radius:0,innerRadius:0};var a=i[0],o=i.length>1?i[1]:i[0],s=n.indexOf(a),l=n.indexOf(o),u=Tw(n[s-1]),c=Tw(n[l-1]),f=Aw(u,a),h=f.startAngle,d=f.endAngle,g=Aw(c,o),p=g.startAngle,m=g.endAngle;(0,v.isNumberEqual)(h,p)&&(0,v.isNumberEqual)(d,m)?(t=h,r=d):(t=Math.min(h,p),r=Math.max(d,m));var _=a[1],S=i[i.length-1][1];return _<S?(e=[S,_],_=e[0],S=e[1]):_===S&&(S=0),{startAngle:t,endAngle:r,radius:_,innerRadius:S}}function o4(n,e,t){var r=t.toAttrs,i=t.coordinate,a=r.path||[],o=a.map(function(S){return S[0]});if(!(a.length<1)){var s=Iw(a),l=s.startAngle,u=s.endAngle,c=s.radius,f=s.innerRadius,h=Iw(n.attr("path")),d=h.startAngle,g=h.endAngle,p=i.getCenter(),m=l-d,_=u-g;if(m===0&&_===0){n.attr("path",a);return}n.animate(function(S){var M=d+S*m,R=g+S*_;return(0,b.__assign)((0,b.__assign)({},r),{path:(0,v.isEqual)(o,["M","A","A","Z"])?IS(p.x,p.y,c,M,R):mu(p.x,p.y,c,M,R,f)})},(0,b.__assign)((0,b.__assign)({},e),{callback:function(){n.attr("path",a)}}))}}function s4(n,e,t){var r=PS(t.coordinate,20),i=r.type,a=r.startState,o=r.endState,s=n.setClip({type:i,attrs:a});s.animate(o,(0,b.__assign)((0,b.__assign)({},e),{callback:function(){n&&!n.get("destroyed")&&n.set("clipShape",null),s.remove(!0)}}))}function N1(n,e,t){if(n.isGroup())(0,v.each)(n.getChildren(),function(s){N1(s,e,t)});else{var r=n.getBBox(),i=(r.minX+r.maxX)/2,a=(r.minY+r.maxY)/2;if(n.applyToMatrix([i,a,1]),t==="zoomIn"){var o=Cn.vs(n.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]]);n.setMatrix(o),n.animate({matrix:Cn.vs(n.getMatrix(),[["t",-i,-a],["s",100,100],["t",i,a]])},e)}else n.animate({matrix:Cn.vs(n.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]])},(0,b.__assign)((0,b.__assign)({},e),{callback:function(){n.remove(!0)}}))}}function l4(n,e,t){N1(n,e,"zoomIn")}function u4(n,e,t){N1(n,e,"zoomOut")}function Tl(n){return[et.TOP,et.BOTTOM].includes(n)?{offsetX:0,offsetY:n===et.TOP?-8:8,style:{textAlign:"center",textBaseline:n===et.TOP?"bottom":"top"}}:[et.LEFT,et.RIGHT].includes(n)?{offsetX:n===et.LEFT?-8:8,offsetY:0,style:{textAlign:n===et.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function k1(n,e,t){return{x:n.x+e*Math.cos(t),y:n.y+e*Math.sin(t)}}var c4=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return(0,v.deepMix)({},n.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:n.prototype.getDefaultTitleCfg.call(this)})},e.prototype.render=function(){n.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.getRegion=function(t,r){var i=1/2,a={x:.5,y:.5},o=Math.PI*2/t,s=-1*Math.PI/2+o*r,l=i/(1+1/Math.sin(o/2)),u=k1(a,i-l,s),c=Math.PI*5/4,f=Math.PI*1/4;return{start:k1(u,l,c),end:k1(u,l,f)}},e.prototype.afterEachView=function(t,r){this.processAxis(t,r)},e.prototype.beforeEachView=function(t,r){},e.prototype.generateFacets=function(t){var r=this,i=this.cfg,a=i.fields,o=i.type,s=a[0];if(!s)throw new Error("No `fields` specified!");var l=this.getFieldValues(t,s),u=l.length,c=[];return l.forEach(function(f,h){var d=[{field:s,value:f,values:l}],g=(0,v.filter)(t,r.getFacetDataFilter(d)),p={type:o,data:g,region:r.getRegion(u,h),columnValue:f,columnField:s,columnIndex:h,columnValuesLength:u,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};c.push(p)}),c},e.prototype.getXAxisOption=function(t,r,i,a){return i},e.prototype.getYAxisOption=function(t,r,i,a){return i},e.prototype.renderTitle=function(){var t=this;(0,v.each)(this.facets,function(r){var i=r.columnValue,a=r.view,o=(0,v.get)(t.cfg.title,"formatter"),s=(0,v.deepMix)({position:["50%","0%"],content:o?o(i):i},Tl(et.TOP),t.cfg.title);a.annotation().text(s)})},e}(Fc),f4=c4,h4=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return(0,v.deepMix)({},n.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:n.prototype.getDefaultTitleCfg.call(this)})},e.prototype.render=function(){n.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.afterEachView=function(t,r){this.processAxis(t,r)},e.prototype.beforeEachView=function(t,r){},e.prototype.generateFacets=function(t){var r=this,i=this.cfg.fields,a=this.cfg.cols,o=i[0];if(!o)throw new Error("No `fields` specified!");var s=this.getFieldValues(t,o),l=s.length;a=a||l;var u=this.getPageCount(l,a),c=[];return s.forEach(function(f,h){var d=r.getRowCol(h,a),g=d.row,p=d.col,m=[{field:o,value:f,values:s}],_=(0,v.filter)(t,r.getFacetDataFilter(m)),S={type:r.cfg.type,data:_,region:r.getRegion(u,a,p,g),columnValue:f,rowValue:f,columnField:o,rowField:null,columnIndex:p,rowIndex:g,columnValuesLength:a,rowValuesLength:u,total:l};c.push(S)}),c},e.prototype.getXAxisOption=function(t,r,i,a){return a.rowIndex!==a.rowValuesLength-1&&a.columnValuesLength*a.rowIndex+a.columnIndex+1+a.columnValuesLength<=a.total?(0,b.__assign)((0,b.__assign)({},i),{label:null,title:null}):i},e.prototype.getYAxisOption=function(t,r,i,a){return a.columnIndex!==0?(0,b.__assign)((0,b.__assign)({},i),{title:null,label:null}):i},e.prototype.renderTitle=function(){var t=this;(0,v.each)(this.facets,function(r){var i=r.columnValue,a=r.view,o=(0,v.get)(t.cfg.title,"formatter"),s=(0,v.deepMix)({position:["50%","0%"],content:o?o(i):i},Tl(et.TOP),t.cfg.title);a.annotation().text(s)})},e.prototype.getPageCount=function(t,r){return Math.floor((t+r-1)/r)},e.prototype.getRowCol=function(t,r){var i=Math.floor(t/r),a=t%r;return{row:i,col:a}},e}(Fc),d4=h4,v4=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return(0,v.deepMix)({},n.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:(0,b.__assign)({},n.prototype.getDefaultTitleCfg.call(this)),rowTitle:(0,b.__assign)({},n.prototype.getDefaultTitleCfg.call(this))})},e.prototype.render=function(){n.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.afterEachView=function(t,r){this.processAxis(t,r)},e.prototype.beforeEachView=function(t,r){},e.prototype.generateFacets=function(t){for(var r=this.cfg,i=r.fields,a=r.type,o=i.length,s=o,l=[],u=0;u<s;u++)for(var c=i[u],f=0;f<o;f++){var h=i[f],d={type:a,data:t,region:this.getRegion(o,s,u,f),columnValue:c,rowValue:h,columnField:c,rowField:h,columnIndex:u,rowIndex:f,columnValuesLength:s,rowValuesLength:o};l.push(d)}return l},e.prototype.getXAxisOption=function(t,r,i,a){return a.rowIndex!==a.rowValuesLength-1?(0,b.__assign)((0,b.__assign)({},i),{label:null,title:null}):i},e.prototype.getYAxisOption=function(t,r,i,a){return a.columnIndex!==0?(0,b.__assign)((0,b.__assign)({},i),{title:null,label:null}):i},e.prototype.renderTitle=function(){var t=this;(0,v.each)(this.facets,function(r,i){var a=r.columnIndex,o=r.rowIndex,s=r.columnValuesLength,l=r.rowValuesLength,u=r.columnValue,c=r.rowValue,f=r.view;if(o===0){var h=(0,v.get)(t.cfg.columnTitle,"formatter"),d=(0,v.deepMix)({position:["50%","0%"],content:h?h(u):u},Tl(et.TOP),t.cfg.columnTitle);f.annotation().text(d)}if(a===s-1){var h=(0,v.get)(t.cfg.rowTitle,"formatter"),d=(0,v.deepMix)({position:["100%","50%"],content:h?h(c):c},Tl(et.RIGHT),t.cfg.rowTitle);f.annotation().text(d)}})},e}(Fc),g4=v4,p4=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return(0,v.deepMix)({},n.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:n.prototype.getDefaultTitleCfg.call(this),transpose:!1})},e.prototype.render=function(){n.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.beforeEachView=function(t,r){this.cfg.transpose?r.columnIndex%2==0?t.coordinate().transpose().reflect("x"):t.coordinate().transpose():r.rowIndex%2!=0&&t.coordinate().reflect("y")},e.prototype.afterEachView=function(t,r){this.processAxis(t,r)},e.prototype.generateFacets=function(t){var r=this,i=this.cfg.fields[0],a=[],o=1,s=1,l=[""],u=[""],c,f;return this.cfg.transpose?(c=i,l=this.getFieldValues(t,c).slice(0,2),o=l.length):(f=i,u=this.getFieldValues(t,f).slice(0,2),s=u.length),l.forEach(function(h,d){u.forEach(function(g,p){var m=[{field:c,value:h,values:l},{field:f,value:g,values:u}],_=(0,v.filter)(t,r.getFacetDataFilter(m)),S={type:r.cfg.type,data:_,region:r.getRegion(s,o,d,p),columnValue:h,rowValue:g,columnField:c,rowField:f,columnIndex:d,rowIndex:p,columnValuesLength:o,rowValuesLength:s};a.push(S)})}),a},e.prototype.getXAxisOption=function(t,r,i,a){return a.columnIndex===1||a.rowIndex===1?(0,b.__assign)((0,b.__assign)({},i),{label:null,title:null}):i},e.prototype.getYAxisOption=function(t,r,i,a){return i},e.prototype.renderTitle=function(){var t=this;(0,v.each)(this.facets,function(r,i){var a=r.columnValue,o=r.rowValue,s=r.view,l=(0,v.get)(t.cfg.title,"formatter");if(t.cfg.transpose){var u=(0,v.deepMix)({position:["50%","0%"],content:l?l(a):a},Tl(et.TOP),t.cfg.title);s.annotation().text(u)}else{var u=(0,v.deepMix)({position:["100%","50%"],content:l?l(o):o},Tl(et.RIGHT),t.cfg.title);s.annotation().text(u)}})},e}(Fc),y4=p4,m4=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.afterEachView=function(t,r){this.processAxis(t,r)},e.prototype.beforeEachView=function(t,r){},e.prototype.getDefaultCfg=function(){return(0,v.deepMix)({},n.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:(0,b.__assign)({},n.prototype.getDefaultTitleCfg.call(this)),rowTitle:(0,b.__assign)({},n.prototype.getDefaultTitleCfg.call(this))})},e.prototype.render=function(){n.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.generateFacets=function(t){var r=this,i=this.cfg.fields,a=i[0],o=i[1],s=[],l=1,u=1,c=[""],f=[""];return a&&(c=this.getFieldValues(t,a),l=c.length),o&&(f=this.getFieldValues(t,o),u=f.length),c.forEach(function(h,d){f.forEach(function(g,p){var m=[{field:a,value:h,values:c},{field:o,value:g,values:f}],_=(0,v.filter)(t,r.getFacetDataFilter(m)),S={type:r.cfg.type,data:_,region:r.getRegion(u,l,d,p),columnValue:h,rowValue:g,columnField:a,rowField:o,columnIndex:d,rowIndex:p,columnValuesLength:l,rowValuesLength:u};s.push(S)})}),s},e.prototype.renderTitle=function(){var t=this;(0,v.each)(this.facets,function(r,i){var a=r.columnIndex,o=r.rowIndex,s=r.columnValuesLength,l=r.columnValue,u=r.rowValue,c=r.view;if(o===0){var f=(0,v.get)(t.cfg.columnTitle,"formatter"),h=(0,v.deepMix)({position:["50%","0%"],content:f?f(l):l},Tl(et.TOP),t.cfg.columnTitle);c.annotation().text(h)}if(a===s-1){var f=(0,v.get)(t.cfg.rowTitle,"formatter"),h=(0,v.deepMix)({position:["100%","50%"],content:f?f(u):u},Tl(et.RIGHT),t.cfg.rowTitle);c.annotation().text(h)}})},e.prototype.getXAxisOption=function(t,r,i,a){return a.rowIndex!==a.rowValuesLength-1?(0,b.__assign)((0,b.__assign)({},i),{title:null,label:null}):a.columnIndex!==Math.floor((a.columnValuesLength-1)/2)?(0,b.__assign)((0,b.__assign)({},i),{title:null}):i},e.prototype.getYAxisOption=function(t,r,i,a){return a.columnIndex!==0?(0,b.__assign)((0,b.__assign)({},i),{title:null,label:null}):a.rowIndex!==Math.floor((a.rowValuesLength-1)/2)?(0,b.__assign)((0,b.__assign)({},i),{title:null}):i},e}(Fc),x4=m4,b4=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.afterChartRender=function(){t.facets&&t.cfg.line&&(t.container.clear(),t.drawLines(t.facets))},t}return e.prototype.afterEachView=function(t,r){this.processAxis(t,r)},e.prototype.beforeEachView=function(t,r){},e.prototype.init=function(){n.prototype.init.call(this),this.view.on(_t.AFTER_RENDER,this.afterChartRender)},e.prototype.getDefaultCfg=function(){return(0,v.deepMix)({},n.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:n.prototype.getDefaultTitleCfg.call(this)})},e.prototype.generateFacets=function(t){var r=this.cfg.fields;if(!r.length)throw new Error("Please specify for the fields for rootFacet!");var i=[],a={type:this.cfg.type,data:t,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return i.push(a),a.children=this.getChildFacets(t,1,i),this.setRegion(i),i},e.prototype.setRegion=function(t){var r=this;this.forceColIndex(t),t.forEach(function(i){i.region=r.getRegion(i.rowValuesLength,i.columnValuesLength,i.columnIndex,i.rowIndex)})},e.prototype.getRegion=function(t,r,i,a){var o=1/r,s=1/t,l={x:o*i,y:s*a},u={x:l.x+o,y:l.y+s*2/3};return{start:l,end:u}},e.prototype.forceColIndex=function(t){var r=this,i=[],a=0;t.forEach(function(h){r.isLeaf(h)&&(i.push(h),h.columnIndex=a,a++)}),i.forEach(function(h){h.columnValuesLength=i.length});for(var o=this.cfg.fields.length,s=o-1;s>=0;s--)for(var l=this.getFacetsByLevel(t,s),u=0,c=l;u<c.length;u++){var f=c[u];this.isLeaf(f)||(f.originColIndex=f.columnIndex,f.columnIndex=this.getRegionIndex(f.children),f.columnValuesLength=i.length)}},e.prototype.getFacetsByLevel=function(t,r){var i=[];return t.forEach(function(a){a.rowIndex===r&&i.push(a)}),i},e.prototype.getRegionIndex=function(t){var r=t[0],i=t[t.length-1];return(i.columnIndex-r.columnIndex)/2+r.columnIndex},e.prototype.isLeaf=function(t){return!t.children||!t.children.length},e.prototype.getRows=function(){return this.cfg.fields.length+1},e.prototype.getChildFacets=function(t,r,i){var a=this,o=this.cfg.fields,s=o.length;if(!(s<r)){var l=[],u=o[r-1],c=this.getFieldValues(t,u);return c.forEach(function(f,h){var d=[{field:u,value:f,values:c}],g=t.filter(a.getFacetDataFilter(d));if(g.length){var p={type:a.cfg.type,data:g,region:null,columnValue:f,rowValue:"",columnField:u,rowField:"",columnIndex:h,rowValuesLength:a.getRows(),columnValuesLength:1,rowIndex:r,children:a.getChildFacets(g,r+1,i)};l.push(p),i.push(p)}}),l}},e.prototype.render=function(){n.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.renderTitle=function(){var t=this;(0,v.each)(this.facets,function(r){var i=r.columnValue,a=r.view,o=(0,v.get)(t.cfg.title,"formatter"),s=(0,v.deepMix)({position:["50%","0%"],content:o?o(i):i},Tl(et.TOP),t.cfg.title);a.annotation().text(s)})},e.prototype.drawLines=function(t){var r=this;t.forEach(function(i){if(!r.isLeaf(i)){var a=i.children;r.addFacetLines(i,a)}})},e.prototype.addFacetLines=function(t,r){var i=this,a=t.view,o=a.coordinateBBox,s={x:o.x+o.width/2,y:o.y+o.height};r.forEach(function(l){var u=l.view.coordinateBBox,c={x:u.bl.x+(u.tr.x-u.bl.x)/2,y:u.tr.y},f={x:s.x,y:s.y+(c.y-s.y)/2},h={x:c.x,y:f.y};i.drawLine([s,f,h,c])})},e.prototype.getPath=function(t){var r=[],i=this.cfg.line.smooth;return i?(r.push(["M",t[0].x,t[0].y]),r.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y])):t.forEach(function(a,o){o===0?r.push(["M",a.x,a.y]):r.push(["L",a.x,a.y])}),r},e.prototype.drawLine=function(t){var r=this.getPath(t),i=this.cfg.line.style;this.container.addShape("path",{attrs:(0,v.assign)({path:r},i)})},e.prototype.getXAxisOption=function(t,r,i,a){return a.rowIndex!==a.rowValuesLength-1?(0,b.__assign)((0,b.__assign)({},i),{title:null,label:null}):i},e.prototype.getYAxisOption=function(t,r,i,a){return a.originColIndex!==0&&a.columnIndex!==0?(0,b.__assign)((0,b.__assign)({},i),{title:null,label:null}):i},e}(Fc),_4=b4;function Ow(n){var e=(0,b.__spreadArrays)(n);e.sort(function(r,i){return r-i});var t=e.length;return t===0?0:t%2==1?e[(t-1)/2]:(e[t/2]+e[t/2-1])/2}function S4(n){var e=(0,v.reduce)(n,function(t,r){return t+=isNaN(r)||!(0,v.isNumber)(r)?0:r},0);return n.length===0?0:e/n.length}function M0(n,e){if(!e)return null;var t;switch(n){case"start":return 0;case"end":return 1;case"median":{t=e.isCategory?Ow(e.values.map(function(r,i){return i})):Ow(e.values);break}case"mean":{t=e.isCategory?(e.values.length-1)/2:S4(e.values);break}case"min":t=e.isCategory?0:e[n];break;case"max":t=e.isCategory?e.values.length-1:e[n];break;default:t=n;break}return e.scale(t)}var A0=["regionFilter","shape"],E4=function(n){(0,b.__extends)(e,n);function e(t){var r=n.call(this,t)||this;return r.cache=new Map,r.foregroundContainer=r.view.getLayer($.FORE).addGroup(),r.backgroundContainer=r.view.getLayer($.BG).addGroup(),r.option=[],r}return Object.defineProperty(e.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.layout=function(){this.update()},e.prototype.render=function(){},e.prototype.update=function(){var t=this;this.onAfterRender(function(){var i=new Map;(0,v.each)(t.option,function(a){if((0,v.includes)(A0,a.type)){var o=t.updateOrCreate(a);o&&i.set(t.getCacheKey(a),o)}}),t.cache=t.syncCache(i)});var r=new Map;(0,v.each)(this.option,function(i){if(!(0,v.includes)(A0,i.type)){var a=t.updateOrCreate(i);a&&r.set(t.getCacheKey(i),a)}}),this.cache=this.syncCache(r)},e.prototype.clear=function(t){t===void 0&&(t=!1),n.prototype.clear.call(this),this.clearComponents(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),t&&(this.option=[])},e.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},e.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(r){t.push(r)}),t},e.prototype.clearComponents=function(){this.getComponents().forEach(function(t){t.component.destroy()}),this.cache.clear()},e.prototype.onAfterRender=function(t){this.view.getOptions().animate?this.view.geometries.forEach(function(r){r.animateOption&&r.once(It.AFTER_DRAW_ANIMATE,function(){t()})}):this.view.getRootView().once(_t.AFTER_RENDER,function(){t()})},e.prototype.createAnnotation=function(t){var r=t.type,i=P[(0,v.upperFirst)(r)];if(i){var a=this.getAnnotationTheme(r),o=this.getAnnotationCfg(r,t,a),s=new i(o);return{component:s,layer:this.isTop(o)?$.FORE:$.BG,direction:et.NONE,type:Z.ANNOTATION,extra:t}}},e.prototype.annotation=function(t){this.option.push(t)},e.prototype.arc=function(t){return this.annotation((0,b.__assign)({type:"arc"},t)),this},e.prototype.image=function(t){return this.annotation((0,b.__assign)({type:"image"},t)),this},e.prototype.line=function(t){return this.annotation((0,b.__assign)({type:"line"},t)),this},e.prototype.region=function(t){return this.annotation((0,b.__assign)({type:"region"},t)),this},e.prototype.text=function(t){return this.annotation((0,b.__assign)({type:"text"},t)),this},e.prototype.dataMarker=function(t){return this.annotation((0,b.__assign)({type:"dataMarker"},t)),this},e.prototype.dataRegion=function(t){this.annotation((0,b.__assign)({type:"dataRegion"},t))},e.prototype.regionFilter=function(t){this.annotation((0,b.__assign)({type:"regionFilter"},t))},e.prototype.shape=function(t){this.annotation((0,b.__assign)({type:"shape"},t))},e.prototype.html=function(t){this.annotation((0,b.__assign)({type:"html"},t))},e.prototype.parsePosition=function(t){var r=this.view.getXScale(),i=this.view.getScalesByDim("y"),a=(0,v.isFunction)(t)?t.call(null,r,i):t,o=0,s=0;if((0,v.isArray)(a)){var l=a[0],u=a[1];if((0,v.isString)(l)&&l.indexOf("%")!==-1&&!isNaN(l.slice(0,-1)))return this.parsePercentPosition(a);o=M0(l,r),s=M0(u,Object.values(i)[0])}else if(!(0,v.isNil)(a))for(var c=0,f=(0,v.keys)(a);c<f.length;c++){var h=f[c],d=a[h];h===r.field&&(o=M0(d,r)),i[h]&&(s=M0(d,i[h]))}return this.view.getCoordinate().convert({x:o,y:s})},e.prototype.getRegionPoints=function(t,r){var i=this,a=this.view.getXScale(),o=this.view.getScalesByDim("y"),s=Object.values(o)[0],l=a.field,u=this.view.getData(),c=(0,v.isArray)(t)?t[0]:t[l],f=(0,v.isArray)(r)?r[0]:r[l],h=[],d;return(0,v.each)(u,function(g,p){if(g[l]===c&&(d=p),p>=d){var m=i.parsePosition([g[l],g[s.field]]);m&&h.push(m)}if(g[l]===f)return!1}),h},e.prototype.parsePercentPosition=function(t){var r=parseFloat(t[0])/100,i=parseFloat(t[1])/100,a=this.view.getCoordinate(),o=a.start,s=a.end,l={x:Math.min(o.x,s.x),y:Math.min(o.y,s.y)},u=a.getWidth()*r+l.x,c=a.getHeight()*i+l.y;return{x:u,y:c}},e.prototype.getCoordinateBBox=function(){var t=this.view.getCoordinate(),r=t.start,i=t.end,a=t.getWidth(),o=t.getHeight(),s={x:Math.min(r.x,i.x),y:Math.min(r.y,i.y)};return{x:s.x,y:s.y,minX:s.x,minY:s.y,maxX:s.x+a,maxY:s.y+o,width:a,height:o}},e.prototype.getAnnotationCfg=function(t,r,i){var a=this,o=this.view.getCoordinate(),s=this.view.getCanvas(),l={};if((0,v.isNil)(r))return null;if(t==="arc"){var u=r,c=u.start,f=u.end,h=this.parsePosition(c),d=this.parsePosition(f),g=wh(o,h),p=wh(o,d);g>p&&(p=Math.PI*2+p),l={center:o.getCenter(),radius:r0(o,h),startAngle:g,endAngle:p}}else if(t==="image"){var m=r,c=m.start,f=m.end;l={start:this.parsePosition(c),end:this.parsePosition(f),src:r.src}}else if(t==="line"){var _=r,c=_.start,f=_.end;l={start:this.parsePosition(c),end:this.parsePosition(f),text:(0,v.get)(r,"text",null)}}else if(t==="region"){var S=r,c=S.start,f=S.end;l={start:this.parsePosition(c),end:this.parsePosition(f)}}else if(t==="text"){var M=this.view.getData(),R=r,F=R.position,V=R.content,nt=(0,b.__rest)(R,["position","content"]),at=V;(0,v.isFunction)(V)&&(at=V(M)),l=(0,b.__assign)((0,b.__assign)((0,b.__assign)({},this.parsePosition(F)),nt),{content:at})}else if(t==="dataMarker"){var xt=r,F=xt.position,gt=xt.point,Tt=xt.line,Ct=xt.text,te=xt.autoAdjust,Kt=xt.direction;l=(0,b.__assign)((0,b.__assign)({},this.parsePosition(F)),{coordinateBBox:this.getCoordinateBBox(),point:gt,line:Tt,text:Ct,autoAdjust:te,direction:Kt})}else if(t==="dataRegion"){var ne=r,c=ne.start,f=ne.end,ee=ne.region,Ct=ne.text,ve=ne.lineLength;l={points:this.getRegionPoints(c,f),region:ee,text:Ct,lineLength:ve}}else if(t==="regionFilter"){var ie=r,c=ie.start,f=ie.end,ye=ie.apply,Ee=ie.color,we=this.view.geometries,Pe=[],Ve=function(Ln){!Ln||(Ln.isGroup()?Ln.getChildren().forEach(function(gi){return Ve(gi)}):Pe.push(Ln))};(0,v.each)(we,function(Ln){ye?(0,v.contains)(ye,Ln.type)&&(0,v.each)(Ln.elements,function(gi){Ve(gi.shape)}):(0,v.each)(Ln.elements,function(gi){Ve(gi.shape)})}),l={color:Ee,shapes:Pe,start:this.parsePosition(c),end:this.parsePosition(f)}}else if(t==="shape"){var he=r,Te=he.render,Je=(0,b.__rest)(he,["render"]),Ze=function(Wr){if((0,v.isFunction)(r.render))return Te(Wr,a.view,{parsePosition:a.parsePosition.bind(a)})};l=(0,b.__assign)((0,b.__assign)({},Je),{render:Ze})}else if(t==="html"){var ar=r,cr=ar.html,F=ar.position,Je=(0,b.__rest)(ar,["html","position"]),Dr=function(Ln){return(0,v.isFunction)(cr)?cr(Ln,a.view):cr};l=(0,b.__assign)((0,b.__assign)((0,b.__assign)({},Je),this.parsePosition(F)),{parent:s.get("el").parentNode,html:Dr})}var sn=(0,v.deepMix)({},i,(0,b.__assign)((0,b.__assign)({},l),{top:r.top,style:r.style,offsetX:r.offsetX,offsetY:r.offsetY}));return t!=="html"&&(sn.container=this.getComponentContainer(sn)),sn.animate=this.view.getOptions().animate&&sn.animate&&(0,v.get)(r,"animate",sn.animate),sn.animateOption=(0,v.deepMix)({},Th,sn.animateOption,r.animateOption),sn},e.prototype.isTop=function(t){return(0,v.get)(t,"top",!0)},e.prototype.getComponentContainer=function(t){return this.isTop(t)?this.foregroundContainer:this.backgroundContainer},e.prototype.getAnnotationTheme=function(t){return(0,v.get)(this.view.getTheme(),["components","annotation",t],{})},e.prototype.updateOrCreate=function(t){var r=this.cache.get(this.getCacheKey(t));if(r){var i=t.type,a=this.getAnnotationTheme(i),o=this.getAnnotationCfg(i,t,a);Co(o,["container"]),r.component.update(o),(0,v.includes)(A0,t.type)&&r.component.render()}else r=this.createAnnotation(t),r&&(r.component.init(),(0,v.includes)(A0,t.type)&&r.component.render());return r},e.prototype.syncCache=function(t){var r=this,i=new Map(this.cache);return t.forEach(function(a,o){i.set(o,a)}),i.forEach(function(a,o){(0,v.find)(r.option,function(s){return o===r.getCacheKey(s)})||(a.component.destroy(),i.delete(o))}),i},e.prototype.getCacheKey=function(t){return t},e}(zc),w4=E4;function Pw(n,e){var t=(0,v.deepMix)({},(0,v.get)(n,["components","axis","common"]),(0,v.get)(n,["components","axis",e]));return(0,v.get)(t,["grid"],{})}function T0(n,e,t,r){var i=[],a=e.getTicks();return n.isPolar&&a.push({value:1,text:"",tickValue:""}),a.reduce(function(o,s,l){var u=s.value;if(r)i.push({points:[n.convert(t==="y"?{x:0,y:u}:{x:u,y:0}),n.convert(t==="y"?{x:1,y:u}:{x:u,y:1})]});else if(l){var c=o.value,f=(c+u)/2;i.push({points:[n.convert(t==="y"?{x:0,y:f}:{x:f,y:0}),n.convert(t==="y"?{x:1,y:f}:{x:f,y:1})]})}return s},a[0]),i}function B1(n,e,t,r,i){var a=e.values.length,o=[],s=t.getTicks();return s.reduce(function(l,u){var c=l?l.value:u.value,f=u.value,h=(c+f)/2;return i==="x"?o.push({points:[n.convert({x:r?f:h,y:0}),n.convert({x:r?f:h,y:1})]}):o.push({points:(0,v.map)(Array(a+1),function(d,g){return n.convert({x:g/a,y:r?f:h})})}),u},s[0]),o}function Dw(n,e){var t=(0,v.get)(e,"grid");if(t===null)return!1;var r=(0,v.get)(n,"grid");return!(t===void 0&&r===null)}var wu=["container"],Lw=(0,b.__assign)((0,b.__assign)({},Th),{appear:null}),C4=function(n){(0,b.__extends)(e,n);function e(t){var r=n.call(this,t)||this;return r.cache=new Map,r.gridContainer=r.view.getLayer($.BG).addGroup(),r.gridForeContainer=r.view.getLayer($.FORE).addGroup(),r.axisContainer=r.view.getLayer($.BG).addGroup(),r.axisForeContainer=r.view.getLayer($.FORE).addGroup(),r}return Object.defineProperty(e.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.render=function(){this.update()},e.prototype.layout=function(){var t=this,r=this.view.getCoordinate();(0,v.each)(this.getComponents(),function(i){var a=i.component,o=i.direction,s=i.type,l=i.extra,u=l.dim,c=l.scale,f=l.alignTick,h;if(s===Z.AXIS)r.isPolar?u==="x"?h=r.isTransposed?n0(r,o):Xx(r):u==="y"&&(h=r.isTransposed?Xx(r):n0(r,o)):h=n0(r,o);else if(s===Z.GRID)if(r.isPolar){var d=void 0;r.isTransposed?d=u==="x"?B1(r,t.view.getYScales()[0],c,f,u):T0(r,c,u,f):d=u==="x"?T0(r,c,u,f):B1(r,t.view.getXScale(),c,f,u),h={items:d,center:t.view.getCoordinate().getCenter()}}else h={items:T0(r,c,u,f)};a.update(h)})},e.prototype.update=function(){this.option=this.view.getOptions().axes;var t=new Map;this.updateXAxes(t),this.updateYAxes(t);var r=new Map;this.cache.forEach(function(i,a){t.has(a)?r.set(a,i):i.component.destroy()}),this.cache=r},e.prototype.clear=function(){n.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.gridForeContainer.clear(),this.axisContainer.clear(),this.axisForeContainer.clear()},e.prototype.destroy=function(){n.prototype.destroy.call(this),this.gridContainer.remove(!0),this.gridForeContainer.remove(!0),this.axisContainer.remove(!0),this.axisForeContainer.remove(!0)},e.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(r){t.push(r)}),t},e.prototype.updateXAxes=function(t){var r=this.view.getXScale();if(!(!r||r.isIdentity)){var i=a0(this.option,r.field);if(i!==!1){var a=kS(i,et.BOTTOM),o=$.BG,s="x",l=this.view.getCoordinate(),u=this.getId("axis",r.field),c=this.getId("grid",r.field);if(l.isRect){var f=this.cache.get(u);if(f){var h=this.getLineAxisCfg(r,i,a);Co(h,wu),f.component.update(h),t.set(u,f)}else f=this.createLineAxis(r,i,o,a,s),this.cache.set(u,f),t.set(u,f);var d=this.cache.get(c);if(d){var h=this.getLineGridCfg(r,i,a,s);Co(h,wu),d.component.update(h),t.set(c,d)}else d=this.createLineGrid(r,i,o,a,s),d&&(this.cache.set(c,d),t.set(c,d))}else if(l.isPolar){var f=this.cache.get(u);if(f){var h=l.isTransposed?this.getLineAxisCfg(r,i,et.RADIUS):this.getCircleAxisCfg(r,i,a);Co(h,wu),f.component.update(h),t.set(u,f)}else{if(l.isTransposed){if((0,v.isUndefined)(i))return;f=this.createLineAxis(r,i,o,et.RADIUS,s)}else f=this.createCircleAxis(r,i,o,a,s);this.cache.set(u,f),t.set(u,f)}var d=this.cache.get(c);if(d){var h=l.isTransposed?this.getCircleGridCfg(r,i,et.RADIUS,s):this.getLineGridCfg(r,i,et.CIRCLE,s);Co(h,wu),d.component.update(h),t.set(c,d)}else{if(l.isTransposed){if((0,v.isUndefined)(i))return;d=this.createCircleGrid(r,i,o,et.RADIUS,s)}else d=this.createLineGrid(r,i,o,et.CIRCLE,s);d&&(this.cache.set(c,d),t.set(c,d))}}}}},e.prototype.updateYAxes=function(t){var r=this,i=this.view.getYScales();(0,v.each)(i,function(a,o){if(!(!a||a.isIdentity)){var s=a.field,l=a0(r.option,s);if(l!==!1){var u=$.BG,c="y",f=r.getId("axis",s),h=r.getId("grid",s),d=r.view.getCoordinate();if(d.isRect){var g=kS(l,o===0?et.LEFT:et.RIGHT),p=r.cache.get(f);if(p){var m=r.getLineAxisCfg(a,l,g);Co(m,wu),p.component.update(m),t.set(f,p)}else p=r.createLineAxis(a,l,u,g,c),r.cache.set(f,p),t.set(f,p);var _=r.cache.get(h);if(_){var m=r.getLineGridCfg(a,l,g,c);Co(m,wu),_.component.update(m),t.set(h,_)}else _=r.createLineGrid(a,l,u,g,c),_&&(r.cache.set(h,_),t.set(h,_))}else if(d.isPolar){var p=r.cache.get(f);if(p){var m=d.isTransposed?r.getCircleAxisCfg(a,l,et.CIRCLE):r.getLineAxisCfg(a,l,et.RADIUS);Co(m,wu),p.component.update(m),t.set(f,p)}else{if(d.isTransposed){if((0,v.isUndefined)(l))return;p=r.createCircleAxis(a,l,u,et.CIRCLE,c)}else p=r.createLineAxis(a,l,u,et.RADIUS,c);r.cache.set(f,p),t.set(f,p)}var _=r.cache.get(h);if(_){var m=d.isTransposed?r.getLineGridCfg(a,l,et.CIRCLE,c):r.getCircleGridCfg(a,l,et.RADIUS,c);Co(m,wu),_.component.update(m),t.set(h,_)}else{if(d.isTransposed){if((0,v.isUndefined)(l))return;_=r.createLineGrid(a,l,u,et.CIRCLE,c)}else _=r.createCircleGrid(a,l,u,et.RADIUS,c);_&&(r.cache.set(h,_),t.set(h,_))}}}}})},e.prototype.createLineAxis=function(t,r,i,a,o){var s={component:new Gk(this.getLineAxisCfg(t,r,a)),layer:i,direction:a===et.RADIUS?et.NONE:a,type:Z.AXIS,extra:{dim:o,scale:t}};return s.component.set("field",t.field),s.component.init(),s},e.prototype.createLineGrid=function(t,r,i,a,o){var s=this.getLineGridCfg(t,r,a,o);if(s){var l={component:new Uk(s),layer:i,direction:et.NONE,type:Z.GRID,extra:{dim:o,scale:t,alignTick:(0,v.get)(s,"alignTick",!0)}};return l.component.init(),l}},e.prototype.createCircleAxis=function(t,r,i,a,o){var s={component:new zk(this.getCircleAxisCfg(t,r,a)),layer:i,direction:a,type:Z.AXIS,extra:{dim:o,scale:t}};return s.component.set("field",t.field),s.component.init(),s},e.prototype.createCircleGrid=function(t,r,i,a,o){var s=this.getCircleGridCfg(t,r,a,o);if(s){var l={component:new Wk(s),layer:i,direction:et.NONE,type:Z.GRID,extra:{dim:o,scale:t,alignTick:(0,v.get)(s,"alignTick",!0)}};return l.component.init(),l}},e.prototype.getLineAxisCfg=function(t,r,i){var a=(0,v.get)(r,["top"])?this.axisForeContainer:this.axisContainer,o=this.view.getCoordinate(),s=n0(o,i),l=BS(t,r),u=i0(this.view.getTheme(),i),c=(0,v.get)(r,["title"])?(0,v.deepMix)({title:{style:{text:l}}},{title:NS(this.view.getTheme(),i,r.title)},r):r,f=(0,v.deepMix)((0,b.__assign)((0,b.__assign)({container:a},s),{ticks:t.getTicks().map(function(M){return{id:""+M.tickValue,name:M.text,value:M.value}}),verticalFactor:o.isPolar?RS(s,o.getCenter())*-1:RS(s,o.getCenter()),theme:u}),u,c),h=this.getAnimateCfg(f),d=h.animate,g=h.animateOption;f.animateOption=g,f.animate=d;var p=LS(s),m=(0,v.get)(f,"verticalLimitLength",p?1/3:1/2);if(m<=1){var _=this.view.getCanvas().get("width"),S=this.view.getCanvas().get("height");f.verticalLimitLength=m*(p?_:S)}return f},e.prototype.getLineGridCfg=function(t,r,i,a){if(!!Dw(i0(this.view.getTheme(),i),r)){var o=Pw(this.view.getTheme(),i),s=(0,v.deepMix)({container:(0,v.get)(r,["top"])?this.gridForeContainer:this.gridContainer},o,(0,v.get)(r,"grid"),this.getAnimateCfg(r));return s.items=T0(this.view.getCoordinate(),t,a,(0,v.get)(s,"alignTick",!0)),s}},e.prototype.getCircleAxisCfg=function(t,r,i){var a=(0,v.get)(r,["top"])?this.axisForeContainer:this.axisContainer,o=this.view.getCoordinate(),s=t.getTicks().map(function(p){return{id:""+p.tickValue,name:p.text,value:p.value}});!t.isCategory&&Math.abs(o.endAngle-o.startAngle)===Math.PI*2&&s.pop();var l=BS(t,r),u=i0(this.view.getTheme(),et.CIRCLE),c=(0,v.get)(r,["title"])?(0,v.deepMix)({title:{style:{text:l}}},{title:NS(this.view.getTheme(),i,r.title)},r):r,f=(0,v.deepMix)((0,b.__assign)((0,b.__assign)({container:a},Xx(this.view.getCoordinate())),{ticks:s,verticalFactor:1,theme:u}),u,c),h=this.getAnimateCfg(f),d=h.animate,g=h.animateOption;return f.animate=d,f.animateOption=g,f},e.prototype.getCircleGridCfg=function(t,r,i,a){if(!!Dw(i0(this.view.getTheme(),i),r)){var o=Pw(this.view.getTheme(),et.RADIUS),s=(0,v.deepMix)({container:(0,v.get)(r,["top"])?this.gridForeContainer:this.gridContainer,center:this.view.getCoordinate().getCenter()},o,(0,v.get)(r,"grid"),this.getAnimateCfg(r)),l=(0,v.get)(s,"alignTick",!0),u=a==="x"?this.view.getYScales()[0]:this.view.getXScale();return s.items=B1(this.view.getCoordinate(),u,t,l,a),s}},e.prototype.getId=function(t,r){var i=this.view.getCoordinate();return t+"-"+r+"-"+i.type},e.prototype.getAnimateCfg=function(t){return{animate:this.view.getOptions().animate&&(0,v.get)(t,"animate"),animateOption:t&&t.animateOption?(0,v.deepMix)({},Lw,t.animateOption):Lw}},e}(zc),M4=C4;function Cu(n,e,t){return t===et.TOP?[n.minX+n.width/2-e.width/2,n.minY]:t===et.BOTTOM?[n.minX+n.width/2-e.width/2,n.maxY-e.height]:t===et.LEFT?[n.minX,n.minY+n.height/2-e.height/2]:t===et.RIGHT?[n.maxX-e.width,n.minY+n.height/2-e.height/2]:t===et.TOP_LEFT||t===et.LEFT_TOP?[n.tl.x,n.tl.y]:t===et.TOP_RIGHT||t===et.RIGHT_TOP?[n.tr.x-e.width,n.tr.y]:t===et.BOTTOM_LEFT||t===et.LEFT_BOTTOM?[n.bl.x,n.bl.y-e.height]:t===et.BOTTOM_RIGHT||t===et.RIGHT_BOTTOM?[n.br.x-e.width,n.br.y-e.height]:[0,0]}function A4(n,e){if(e.isTransposed)switch(n){case DIRECTION.BOTTOM:return DIRECTION.LEFT;case DIRECTION.LEFT:return DIRECTION.BOTTOM;case DIRECTION.RIGHT:return DIRECTION.TOP;case DIRECTION.TOP:return DIRECTION.RIGHT}return n}function Rw(n){return n===DIRECTION.LEFT?DIRECTION.RIGHT:n===DIRECTION.RIGHT?DIRECTION.LEFT:n}function Nw(n){return n===DIRECTION.TOP?DIRECTION.BOTTOM:n===DIRECTION.BOTTOM?DIRECTION.TOP:n}function T4(n,e){var t=e.matrix[0],r=e.matrix[4],i=n;return t<0&&(i=Rw(i)),r<0&&(i=Nw(i)),i}function I4(n,e){var t=n;return e.isReflect("x")&&(t=Rw(t)),e.isReflect("y")&&(t=Nw(t)),t}function Cot(n,e){var t=n;return t=A4(t,e),t=T4(t,e),t=I4(t,e),t}function kw(n,e){return(0,v.isBoolean)(n)?n===!1?!1:{}:(0,v.get)(n,[e],n)}function I0(n){return(0,v.get)(n,"position",et.BOTTOM)}var O4=function(n){(0,b.__extends)(e,n);function e(t){var r=n.call(this,t)||this;return r.container=r.view.getLayer($.FORE).addGroup(),r}return Object.defineProperty(e.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.render=function(){this.update()},e.prototype.layout=function(){var t=this;this.layoutBBox=this.view.viewBBox,(0,v.each)(this.components,function(r){var i=r.component,a=r.direction,o=l1(a),s=t.getCategoryLegendSizeCfg(o),l=i.get("maxWidth"),u=i.get("maxHeight");i.update({maxWidth:Math.min(s.maxWidth,l||0),maxHeight:Math.min(s.maxHeight,u||0)});var c=i.get("padding"),f=i.getLayoutBBox(),h=new Va(f.x,f.y,f.width,f.height).expand(c),d=Cu(t.view.viewBBox,h,a),g=d[0],p=d[1],m=Cu(t.layoutBBox,h,a),_=m[0],S=m[1],M=0,R=0;a.startsWith("top")||a.startsWith("bottom")?(M=g,R=S):(M=_,R=p),i.setLocation({x:M+c[3],y:R+c[0]}),t.layoutBBox=t.layoutBBox.cut(h,a)})},e.prototype.update=function(){var t=this;this.option=this.view.getOptions().legends;var r={},i=function(h,d,g){var p=t.getId(g.field),m=t.getComponentById(p);if(m){var _=void 0,S=kw(t.option,g.field);S!==!1&&((0,v.get)(S,"custom")?_=t.getCategoryCfg(h,d,g,S,!0):g.isLinear?_=t.getContinuousCfg(h,d,g,S):g.isCategory&&(_=t.getCategoryCfg(h,d,g,S))),_&&(Co(_,["container"]),m.direction=I0(S),m.component.update(_),r[p]=!0)}else{var M=t.createFieldLegend(h,d,g);M&&(M.component.init(),t.components.push(M),r[p]=!0)}};if((0,v.get)(this.option,"custom")){var a="global-custom",o=this.getComponentById(a);if(o){var s=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);Co(s,["container"]),o.component.update(s),r[a]=!0}else{var l=this.createCustomLegend(void 0,void 0,void 0,this.option);if(l){l.init();var u=$.FORE,c=I0(this.option);this.components.push({id:a,component:l,layer:u,direction:c,type:Z.LEGEND,extra:void 0}),r[a]=!0}}}else this.loopLegends(i);var f=[];(0,v.each)(this.getComponents(),function(h){r[h.id]?f.push(h):h.component.destroy()}),this.components=f},e.prototype.clear=function(){n.prototype.clear.call(this),this.container.clear()},e.prototype.destroy=function(){n.prototype.destroy.call(this),this.container.remove(!0)},e.prototype.getGeometries=function(t){var r=this,i=t.geometries;return(0,v.each)(t.views,function(a){i=i.concat(r.getGeometries(a))}),i},e.prototype.loopLegends=function(t){var r=this.view.getRootView()===this.view;if(!!r){var i=this.getGeometries(this.view),a={};(0,v.each)(i,function(o){var s=o.getGroupAttributes();(0,v.each)(s,function(l){var u=l.getScale(l.type);!u||u.type==="identity"||a[u.field]||(t(o,l,u),a[u.field]=!0)})})}},e.prototype.createFieldLegend=function(t,r,i){var a,o=kw(this.option,i.field),s=$.FORE,l=I0(o);if(o!==!1&&((0,v.get)(o,"custom")?a=this.createCustomLegend(t,r,i,o):i.isLinear?a=this.createContinuousLegend(t,r,i,o):i.isCategory&&(a=this.createCategoryLegend(t,r,i,o))),a)return a.set("field",i.field),{id:this.getId(i.field),component:a,layer:s,direction:l,type:Z.LEGEND,extra:{scale:i}}},e.prototype.createCustomLegend=function(t,r,i,a){var o=this.getCategoryCfg(t,r,i,a,!0);return new AS(o)},e.prototype.createContinuousLegend=function(t,r,i,a){var o=this.getContinuousCfg(t,r,i,a);return new Vk(o)},e.prototype.createCategoryLegend=function(t,r,i,a){var o=this.getCategoryCfg(t,r,i,a);return new AS(o)},e.prototype.getContinuousCfg=function(t,r,i,a){var o=i.getTicks(),s=(0,v.find)(o,function(p){return p.value===0}),l=(0,v.find)(o,function(p){return p.value===1}),u=o.map(function(p){var m=p.value,_=p.tickValue,S=r.mapping(i.invert(m)).join("");return{value:_,attrValue:S,color:S,scaleValue:m}});s||u.push({value:i.min,attrValue:r.mapping(i.invert(0)).join(""),color:r.mapping(i.invert(0)).join(""),scaleValue:0}),l||u.push({value:i.max,attrValue:r.mapping(i.invert(1)).join(""),color:r.mapping(i.invert(1)).join(""),scaleValue:1}),u.sort(function(p,m){return p.value-m.value});var c={min:(0,v.head)(u).value,max:(0,v.last)(u).value,colors:[],rail:{type:r.type},track:{}};r.type==="size"&&(c.track={style:{fill:r.type==="size"?this.view.getTheme().defaultColor:void 0}}),r.type==="color"&&(c.colors=u.map(function(p){return p.attrValue}));var f=this.container,h=I0(a),d=l1(h),g=(0,v.get)(a,"title");return g&&(g=(0,v.deepMix)({text:Uv(i)},g)),c.container=f,c.layout=d,c.title=g,c.animateOption=Th,this.mergeLegendCfg(c,a,"continuous")},e.prototype.getCategoryCfg=function(t,r,i,a,o){var s=this.container,l=(0,v.get)(a,"position",et.BOTTOM),u=AE(this.view.getTheme(),l),c=(0,v.get)(u,["marker"]),f=(0,v.get)(a,"marker"),h=l1(l),d=(0,v.get)(u,["pageNavigator"]),g=(0,v.get)(a,"pageNavigator"),p=o?mF(c,f,a.items):ME(this.view,t,r,c,f),m=(0,v.get)(a,"title");m&&(m=(0,v.deepMix)({text:i?Uv(i):""},m));var _=this.getCategoryLegendSizeCfg(h);_.container=s,_.layout=h,_.items=p,_.title=m,_.animateOption=Th,_.pageNavigator=(0,v.deepMix)({},d,g);var S=this.mergeLegendCfg(_,a,l);S.reversed&&S.items.reverse();var M=(0,v.get)(S,"maxItemWidth");return M&&M<=1&&(S.maxItemWidth=this.view.viewBBox.width*M),S},e.prototype.mergeLegendCfg=function(t,r,i){var a=i.split("-")[0],o=AE(this.view.getTheme(),a);return(0,v.deepMix)({},o,t,r)},e.prototype.getId=function(t){return this.name+"-"+t},e.prototype.getComponentById=function(t){return(0,v.find)(this.components,function(r){return r.id===t})},e.prototype.getCategoryLegendSizeCfg=function(t){var r=this.view.viewBBox,i=r.width,a=r.height;return t==="vertical"?{maxWidth:i*bt,maxHeight:a}:{maxWidth:i,maxHeight:a*bt}},e}(zc),P4=O4,D4=function(n){(0,b.__extends)(e,n);function e(t){var r=n.call(this,t)||this;return r.onChangeFn=v.noop,r.resetMeasure=function(){r.clear()},r.onValueChange=function(i){var a=i[0],o=i[1];r.start=a,r.end=o,r.changeViewData(a,o)},r.container=r.view.getLayer($.FORE).addGroup(),r.onChangeFn=(0,v.throttle)(r.onValueChange,20,{leading:!0}),r.width=0,r.view.on(_t.BEFORE_CHANGE_DATA,r.resetMeasure),r.view.on(_t.BEFORE_CHANGE_SIZE,r.resetMeasure),r}return Object.defineProperty(e.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){n.prototype.destroy.call(this),this.view.off(_t.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(_t.BEFORE_CHANGE_SIZE,this.resetMeasure)},e.prototype.init=function(){},e.prototype.render=function(){this.option=this.view.getOptions().slider;var t=this.getSliderCfg(),r=t.start,i=t.end;(0,v.isNil)(this.start)&&(this.start=r,this.end=i);var a=this.view.getOptions().data;this.option&&!(0,v.isEmpty)(a)?this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onChangeFn)):this.slider&&(this.slider.component.destroy(),this.slider=void 0)},e.prototype.layout=function(){var t=this;if(this.option&&!this.width&&(this.measureSlider(),setTimeout(function(){t.view.destroyed||t.changeViewData(t.start,t.end)},0)),this.slider){var r=this.view.coordinateBBox.width,i=this.slider.component.get("padding"),a=i[0],o=i[1],s=i[2],l=i[3],u=this.slider.component.getLayoutBBox(),c=new Va(u.x,u.y,Math.min(u.width,r),u.height).expand(i),f=this.getMinMaxText(this.start,this.end),h=f.minText,d=f.maxText,g=Cu(this.view.viewBBox,c,et.BOTTOM),p=g[0],m=g[1],_=Cu(this.view.coordinateBBox,c,et.BOTTOM),S=_[0],M=_[1];this.slider.component.update((0,b.__assign)((0,b.__assign)({},this.getSliderCfg()),{x:S+l,y:m+a,width:this.width,start:this.start,end:this.end,minText:h,maxText:d})),this.view.viewBBox=this.view.viewBBox.cut(c,et.BOTTOM)}},e.prototype.update=function(){this.render()},e.prototype.createSlider=function(){var t=this.getSliderCfg(),r=new kk((0,b.__assign)({container:this.container},t));return r.init(),{component:r,layer:$.FORE,direction:et.BOTTOM,type:Z.SLIDER}},e.prototype.updateSlider=function(){var t=this.getSliderCfg();if(this.width){var r=this.getMinMaxText(this.start,this.end),i=r.minText,a=r.maxText;t=(0,b.__assign)((0,b.__assign)({},t),{width:this.width,start:this.start,end:this.end,minText:i,maxText:a})}return this.slider.component.update(t),this.slider},e.prototype.measureSlider=function(){var t=this.getSliderCfg().width;this.width=t},e.prototype.getSliderCfg=function(){var t={height:16,start:0,end:1,minText:"",maxText:"",x:0,y:0,width:this.view.coordinateBBox.width};if((0,v.isObject)(this.option)){var r=(0,b.__assign)({data:this.getData()},(0,v.get)(this.option,"trendCfg",{}));t=(0,v.deepMix)({},t,this.getThemeOptions(),this.option),t=(0,b.__assign)((0,b.__assign)({},t),{trendCfg:r})}return t.start=(0,v.clamp)(Math.min((0,v.isNil)(t.start)?0:t.start,(0,v.isNil)(t.end)?1:t.end),0,1),t.end=(0,v.clamp)(Math.max((0,v.isNil)(t.start)?0:t.start,(0,v.isNil)(t.end)?1:t.end),0,1),t},e.prototype.getData=function(){var t=this.view.getOptions().data,r=this.view.getYScales()[0],i=this.view.getGroupScales();if(i.length){var a=i[0],o=a.field,s=a.ticks;return t.reduce(function(l,u){return u[o]===s[0]&&l.push(u[r.field]),l},[])}return t.map(function(l){return l[r.field]||0})},e.prototype.getThemeOptions=function(){var t=this.view.getTheme();return(0,v.get)(t,["components","slider","common"],{})},e.prototype.getMinMaxText=function(t,r){var i=this.view.getOptions().data,a=this.view.getXScale(),o=!0,s=(0,v.valuesOfKey)(i,a.field),l=o?s:s.reverse(),u=(0,v.size)(i);if(!a||!u)return{};var c=(0,v.size)(l),f=Math.floor(t*(c-1)),h=Math.floor(r*(c-1)),d=(0,v.get)(l,[f]),g=(0,v.get)(l,[h]),p=this.getSliderCfg().formatter;return p&&(d=p(d,i[f],f),g=p(g,i[h],h)),{minText:d,maxText:g}},e.prototype.changeViewData=function(t,r){var i=this.view.getOptions().data,a=this.view.getXScale(),o=(0,v.size)(i);if(!(!a||!o)){var s=!0,l=(0,v.valuesOfKey)(i,a.field),u=s?l:l.reverse(),c=(0,v.size)(u),f=Math.floor(t*(c-1)),h=Math.floor(r*(c-1));this.view.filter(a.field,function(d,g){var p=u.indexOf(d);return p>-1?Eh(p,f,h):!0}),this.view.render(!0)}},e.prototype.getComponents=function(){return this.slider?[this.slider]:[]},e.prototype.clear=function(){this.slider&&(this.slider.component.destroy(),this.slider=void 0),this.width=0,this.start=void 0,this.end=void 0},e}(zc),L4=D4,O0=0,Bw=8,R4=32,N4=20,k4=function(n){(0,b.__extends)(e,n);function e(t){var r=n.call(this,t)||this;return r.onChangeFn=v.noop,r.resetMeasure=function(){r.clear()},r.onValueChange=function(i){var a=i.ratio,o=r.getValidScrollbarCfg().animate;r.ratio=(0,v.clamp)(a,0,1);var s=r.view.getOptions().animate;o||r.view.animate(!1),r.changeViewData(r.getScrollRange(),!0),r.view.animate(s)},r.container=r.view.getLayer($.FORE).addGroup(),r.onChangeFn=(0,v.throttle)(r.onValueChange,20,{leading:!0}),r.trackLen=0,r.thumbLen=0,r.ratio=0,r.view.on(_t.BEFORE_CHANGE_DATA,r.resetMeasure),r.view.on(_t.BEFORE_CHANGE_SIZE,r.resetMeasure),r}return Object.defineProperty(e.prototype,"name",{get:function(){return"scrollbar"},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){n.prototype.destroy.call(this),this.view.off(_t.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(_t.BEFORE_CHANGE_SIZE,this.resetMeasure)},e.prototype.init=function(){},e.prototype.render=function(){this.option=this.view.getOptions().scrollbar,this.option?this.scrollbar?this.scrollbar=this.updateScrollbar():(this.scrollbar=this.createScrollbar(),this.scrollbar.component.on("scrollchange",this.onChangeFn)):this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0)},e.prototype.layout=function(){var t=this;if(this.option&&!this.trackLen&&(this.measureScrollbar(),setTimeout(function(){t.view.destroyed||t.changeViewData(t.getScrollRange(),!0)})),this.scrollbar){var r=this.view.coordinateBBox.width,i=this.scrollbar.component.get("padding"),a=this.scrollbar.component.getLayoutBBox(),o=new Va(a.x,a.y,Math.min(a.width,r),a.height).expand(i),s=this.getScrollbarComponentCfg(),l=void 0,u=void 0;if(s.isHorizontal){var c=Cu(this.view.viewBBox,o,et.BOTTOM),f=c[0],h=c[1],d=Cu(this.view.coordinateBBox,o,et.BOTTOM),g=d[0],p=d[1];l=g,u=h}else{var m=Cu(this.view.viewBBox,o,et.RIGHT),f=m[0],h=m[1],_=Cu(this.view.viewBBox,o,et.RIGHT),g=_[0],p=_[1];l=g,u=h}l+=i[3],u+=i[0],this.trackLen?this.scrollbar.component.update((0,b.__assign)((0,b.__assign)({},s),{x:l,y:u,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio})):this.scrollbar.component.update((0,b.__assign)((0,b.__assign)({},s),{x:l,y:u})),this.view.viewBBox=this.view.viewBBox.cut(o,s.isHorizontal?et.BOTTOM:et.RIGHT)}},e.prototype.update=function(){this.render()},e.prototype.getComponents=function(){return this.scrollbar?[this.scrollbar]:[]},e.prototype.clear=function(){this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0),this.trackLen=0,this.thumbLen=0,this.ratio=0,this.cnt=0,this.step=0,this.data=void 0,this.xScaleCfg=void 0,this.yScalesCfg=[]},e.prototype.getThemeOptions=function(){var t=this.view.getTheme();return(0,v.get)(t,["components","scrollbar","common"],{})},e.prototype.getScrollbarTheme=function(t){var r=(0,v.get)(this.view.getTheme(),["components","scrollbar"]),i=t||{},a=i.thumbHighlightColor,o=(0,b.__rest)(i,["thumbHighlightColor"]);return{default:(0,v.deepMix)({},(0,v.get)(r,["default","style"],{}),o),hover:(0,v.deepMix)({},(0,v.get)(r,["hover","style"],{}),{thumbColor:a})}},e.prototype.measureScrollbar=function(){var t=this.view.getXScale(),r=this.view.getYScales().slice();this.data=this.view.getOptions().data,this.step=this.getStep(),this.cnt=this.getCnt();var i=this.getScrollbarComponentCfg(),a=i.trackLen,o=i.thumbLen;this.trackLen=a,this.thumbLen=o,this.xScaleCfg={field:t.field,values:t.values||[]},this.yScalesCfg=r},e.prototype.getScrollRange=function(){var t=Math.floor((this.cnt-this.step)*(0,v.clamp)(this.ratio,0,1)),r=Math.min(t+this.step-1,this.cnt-1);return[t,r]},e.prototype.changeViewData=function(t,r){var i=this,a=t[0],o=t[1],s=this.getValidScrollbarCfg().type,l=s!=="vertical",u=(0,v.valuesOfKey)(this.data,this.xScaleCfg.field),c=l?u:u.reverse();this.yScalesCfg.forEach(function(f){i.view.scale(f.field,{formatter:f.formatter,type:f.type,min:f.min,max:f.max})}),this.view.filter(this.xScaleCfg.field,function(f){var h=c.indexOf(f);return h>-1?Eh(h,a,o):!0}),this.view.render(!0)},e.prototype.createScrollbar=function(){var t=this.getValidScrollbarCfg().type,r=t!=="vertical",i=new Fk((0,b.__assign)((0,b.__assign)({container:this.container},this.getScrollbarComponentCfg()),{x:0,y:0}));return i.init(),{component:i,layer:$.FORE,direction:r?et.BOTTOM:et.RIGHT,type:Z.SCROLLBAR}},e.prototype.updateScrollbar=function(){var t=this.getScrollbarComponentCfg(),r=this.trackLen?(0,b.__assign)((0,b.__assign)({},t),{trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio}):(0,b.__assign)({},t);return this.scrollbar.component.update(r),this.scrollbar},e.prototype.getStep=function(){if(this.step)return this.step;var t=this.view.coordinateBBox,r=this.getValidScrollbarCfg(),i=r.type,a=r.categorySize,o=i!=="vertical";return Math.floor((o?t.width:t.height)/a)},e.prototype.getCnt=function(){if(this.cnt)return this.cnt;var t=this.view.getXScale(),r=this.view.getOptions().data,i=(0,v.valuesOfKey)(r,t.field);return(0,v.size)(i)},e.prototype.getScrollbarComponentCfg=function(){var t=this.view,r=t.coordinateBBox,i=t.viewBBox,a=this.getValidScrollbarCfg(),o=a.type,s=a.padding,l=a.width,u=a.height,c=a.style,f=o!=="vertical",h=s[0],d=s[1],g=s[2],p=s[3],m=f?{x:r.minX+p,y:i.maxY-u-g}:{x:i.maxX-l-d,y:r.minY+h},_=this.getStep(),S=this.getCnt(),M=f?r.width-p-d:r.height-h-g,R=Math.max(M*(0,v.clamp)(_/S,0,1),N4);return(0,b.__assign)((0,b.__assign)({},this.getThemeOptions()),{x:m.x,y:m.y,size:f?u:l,isHorizontal:f,trackLen:M,thumbLen:R,thumbOffset:0,theme:this.getScrollbarTheme(c)})},e.prototype.getValidScrollbarCfg=function(){var t={type:"horizontal",categorySize:R4,width:Bw,height:Bw,padding:[0,0,0,0],animate:!0,style:{}};return(0,v.isObject)(this.option)&&(t=(0,b.__assign)((0,b.__assign)({},t),this.option)),(!(0,v.isObject)(this.option)||!this.option.padding)&&(t.padding=t.type==="horizontal"?[O0,0,O0,0]:[0,O0,0,O0]),t},e}(zc),B4=k4,F4={fill:"#CCD6EC",opacity:.3};function G4(n,e,t){var r=GB(n,e,t);if(r.length){r=(0,v.flatten)(r);for(var i=0,a=r;i<a.length;i++)for(var o=a[i],s=0,l=o;s<l.length;s++){var u=l[s],c=u.mappingData,f=c.x,h=c.y;u.x=(0,v.isArray)(f)?f[f.length-1]:f,u.y=(0,v.isArray)(h)?h[h.length-1]:h}var d=t.shared;if(d===!1&&r.length>1){for(var g=r[0],p=Math.abs(e.y-g[0].y),m=0,_=r;m<_.length;m++){var S=_[m],M=Math.abs(e.y-S[0].y);M<=p&&(g=S,p=M)}r=[g]}return(0,v.uniq)((0,v.flatten)(r))}return[]}var z4=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.show=function(t){var r=this.context.view,i=this.context.event,a=r.getController("tooltip").getTooltipCfg(),o=G4(r,{x:i.x,y:i.y},a);if(!(0,v.isEqual)(o,this.items)&&(this.items=o,o.length)){var s=r.getXScale().field,l=o[0].data[s],u=[],c=r.geometries;if((0,v.each)(c,function(ie){if(ie.type==="interval"||ie.type==="schema"){var ye=ie.getElementsBy(function(Ee){var we=Ee.getData();return we[s]===l});u=u.concat(ye)}}),u.length){var f=r.getCoordinate(),h=u[0].shape.getCanvasBBox(),d=u[0].shape.getCanvasBBox(),g=h;(0,v.each)(u,function(ie){var ye=ie.shape.getCanvasBBox();f.isTransposed?(ye.minY<h.minY&&(h=ye),ye.maxY>d.maxY&&(d=ye)):(ye.minX<h.minX&&(h=ye),ye.maxX>d.maxX&&(d=ye)),g.x=Math.min(ye.minX,g.minX),g.y=Math.min(ye.minY,g.minY),g.width=Math.max(ye.maxX,g.maxX)-g.x,g.height=Math.max(ye.maxY,g.maxY)-g.y});var p=r.backgroundGroup,m=r.coordinateBBox,_=void 0;if(f.isRect){var S=r.getXScale(),M=t||{},R=M.appendRatio,F=M.appendWidth;(0,v.isNil)(F)&&(R=(0,v.isNil)(R)?S.isLinear?0:.25:R,F=f.isTransposed?R*d.height:R*h.width);var V=void 0,nt=void 0,at=void 0,xt=void 0;f.isTransposed?(V=m.minX,nt=Math.min(d.minY,h.minY)-F,at=m.width,xt=g.height+F*2):(V=Math.min(h.minX,d.minX)-F,nt=m.minY,at=g.width+F*2,xt=m.height),_=[["M",V,nt],["L",V+at,nt],["L",V+at,nt+xt],["L",V,nt+xt],["Z"]]}else{var gt=(0,v.head)(u),Tt=(0,v.last)(u),Ct=Gv(gt.getModel(),f).startAngle,te=Gv(Tt.getModel(),f).endAngle,Kt=f.getCenter(),ne=f.getRadius(),ee=f.innerRadius*ne;_=mu(Kt.x,Kt.y,ne,Ct,te,ee)}if(this.regionPath)this.regionPath.attr("path",_),this.regionPath.show();else{var ve=(0,v.get)(t,"style",F4);this.regionPath=p.addShape({type:"path",name:"active-region",capture:!1,attrs:(0,b.__assign)((0,b.__assign)({},ve),{path:_})})}}}},e.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},e.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),n.prototype.destroy.call(this)},e}(Si),U4=z4,W4=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.timeStamp=0,t}return e.prototype.show=function(){var t=this.context,r=t.event,i=t.view,a=i.isTooltipLocked();if(!a){var o=this.timeStamp,s=+new Date,l=(0,v.get)(t.view.getOptions(),"tooltip.showDelay",16);if(s-o>l){var u=this.location,c={x:r.x,y:r.y};(!u||!(0,v.isEqual)(u,c))&&this.showTooltip(i,c),this.timeStamp=s,this.location=c}}},e.prototype.hide=function(){var t=this.context.view,r=t.getController("tooltip"),i=this.context.event,a=i.clientX,o=i.clientY;r.isCursorEntered({x:a,y:o})||t.isTooltipLocked()||(this.hideTooltip(t),this.location=null)},e.prototype.showTooltip=function(t,r){t.showTooltip(r)},e.prototype.hideTooltip=function(t){t.hideTooltip()},e}(Si),Fw=W4,V4=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.showTooltip=function(t,r){var i=zs(t);(0,v.each)(i,function(a){var o=Kx(t,a,r);a.showTooltip(o)})},e.prototype.hideTooltip=function(t){var r=zs(t);(0,v.each)(r,function(i){i.hideTooltip()})},e}(Fw),X4=V4,Y4=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.timeStamp=0,t}return e.prototype.destroy=function(){n.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},e.prototype.show=function(){var t=this.context,r=t.event,i=this.timeStamp,a=+new Date;if(a-i>16){var o=this.location,s={x:r.x,y:r.y};(!o||!(0,v.isEqual)(o,s))&&this.showTooltip(s),this.timeStamp=a,this.location=s}},e.prototype.hide=function(){this.hideTooltip(),this.location=null},e.prototype.showTooltip=function(t){var r=this.context,i=r.event,a=i.target;if(a&&a.get("tip")){this.tooltip||this.renderTooltip();var o=a.get("tip");this.tooltip.update((0,b.__assign)({title:o},t)),this.tooltip.show()}},e.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},e.prototype.renderTooltip=function(){var t,r=this.context.view,i=r.canvas,a={start:{x:0,y:0},end:{x:i.get("width"),y:i.get("height")}},o=r.getTheme(),s=(0,v.get)(o,["components","tooltip","domStyles"],{}),l=new TS({parent:i.get("el").parentNode,region:a,visible:!1,crosshairs:null,domStyles:(0,b.__assign)({},(0,v.deepMix)({},s,(t={},t[wl]={"max-width":"50%"},t[Sh]={"word-break":"break-all"},t)))});l.init(),l.setCapture(!1),this.tooltip=l},e}(Si),H4=Y4,j4=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName="",t}return e.prototype.hasState=function(t){return t.hasState(this.stateName)},e.prototype.setElementState=function(t,r){t.setState(this.stateName,r)},e.prototype.setState=function(){this.setStateEnable(!0)},e.prototype.clear=function(){var t=this.context.view;this.clearViewState(t)},e.prototype.clearViewState=function(t){var r=this,i=HS(t,this.stateName);(0,v.each)(i,function(a){r.setElementState(a,!1)})},e}(Si),F1=j4;function Gw(n){return(0,v.get)(n.get("delegateObject"),"item")}var Z4=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ignoreListItemStates=["unchecked"],t}return e.prototype.isItemIgnore=function(t,r){var i=this.ignoreListItemStates,a=i.filter(function(o){return r.hasState(t,o)});return!!a.length},e.prototype.setStateByComponent=function(t,r,i){var a=this.context.view,o=t.get("field"),s=ma(a);this.setElementsStateByItem(s,o,r,i)},e.prototype.setStateByElement=function(t,r){this.setElementState(t,r)},e.prototype.isMathItem=function(t,r,i){var a=this.context.view,o=Mh(a,r),s=hs(t,r);return!(0,v.isNil)(s)&&i.name===o.getText(s)},e.prototype.setElementsStateByItem=function(t,r,i,a){var o=this;(0,v.each)(t,function(s){o.isMathItem(s,r,i)&&s.setState(o.stateName,a)})},e.prototype.setStateEnable=function(t){var r=bu(this.context);if(r)VS(this.context)&&this.setStateByElement(r,t);else{var i=Ch(this.context);if(Vv(i)){var a=i.item,o=i.component;if(a&&o&&!this.isItemIgnore(a,o)){var s=this.context.event.gEvent;if(s&&s.fromShape&&s.toShape&&Gw(s.fromShape)===Gw(s.toShape))return;this.setStateByComponent(o,a,t)}}}},e.prototype.toggle=function(){var t=bu(this.context);if(t){var r=t.hasState(this.stateName);this.setElementState(t,!r)}},e.prototype.reset=function(){this.setStateEnable(!1)},e}(F1),G1=Z4,K4=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName="active",t}return e.prototype.active=function(){this.setState()},e}(G1),$4=K4,Q4=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.cache={},t}return e.prototype.getColorScale=function(t,r){var i=r.geometry.getAttribute("color");if(!i)return null;var a=t.getScaleByField(i.getFields()[0]);return a},e.prototype.getLinkPath=function(t,r){var i=this.context.view,a=i.getCoordinate().isTransposed,o=t.shape.getCanvasBBox(),s=r.shape.getCanvasBBox(),l=a?[["M",o.minX,o.minY],["L",s.minX,s.maxY],["L",s.maxX,s.maxY],["L",o.maxX,o.minY],["Z"]]:[["M",o.maxX,o.minY],["L",s.minX,s.minY],["L",s.minX,s.maxY],["L",o.maxX,o.maxY],["Z"]];return l},e.prototype.addLinkShape=function(t,r,i,a){var o={opacity:.4,fill:r.shape.attr("fill")};t.addShape({type:"path",attrs:(0,b.__assign)((0,b.__assign)({},(0,v.deepMix)({},o,(0,v.isFunction)(a)?a(o,r):a)),{path:this.getLinkPath(r,i)})})},e.prototype.linkByElement=function(t,r){var i=this,a=this.context.view,o=this.getColorScale(a,t);if(!!o){var s=hs(t,o.field);if(!this.cache[s]){var l=pB(a,o.field,s),u=this.linkGroup,c=u.addGroup();this.cache[s]=c;var f=l.length;(0,v.each)(l,function(h,d){if(d<f-1){var g=l[d+1];i.addLinkShape(c,h,g,r)}})}}},e.prototype.removeLink=function(t){var r=this.getColorScale(this.context.view,t);if(!!r){var i=hs(t,r.field);this.cache[i]&&(this.cache[i].remove(),this.cache[i]=null)}},e.prototype.link=function(t){var r=this.context;this.linkGroup||(this.linkGroup=r.view.foregroundGroup.addGroup({id:"link-by-color-group",capture:!1}));var i=bu(r);i&&this.linkByElement(i,t==null?void 0:t.style)},e.prototype.unlink=function(){var t=bu(this.context);t&&this.removeLink(t)},e.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear(),this.cache={}},e.prototype.destroy=function(){n.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},e}(Si),J4=Q4,q4=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.startPoint=null,t.endPoint=null,t.isStarted=!1,t.effectSiblings=!1,t.effectByRecord=!1,t}return e.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},e.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},e.prototype.getIntersectElements=function(){var t=null;if(Xv(this.context))t=Hx(this.context,10);else{var r=this.startPoint,i=this.isStarted?this.getCurrentPoint():this.endPoint;if(!r||!i)return;var a={minX:Math.min(r.x,i.x),minY:Math.min(r.y,i.y),maxX:Math.max(r.x,i.x),maxY:Math.max(r.y,i.y)},o=this.context.view;t=jx(o,a)}return t},e.prototype.setStateEnable=function(t){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(t);else{var r=ma(this.context.view),i=this.getIntersectElements();i&&i.length?this.effectByRecord?this.setSiblingsStateByRecord(i,t):this.setElementsState(i,t,r):this.clear()}},e.prototype.setSiblingsStateByRecord=function(t,r){var i=this,a=this.context.view,o=zs(a),s=t.map(function(c){return c.getModel().data}),l=a.getXScale().field,u=a.getYScales()[0].field;(0,v.each)(o,function(c){var f=ma(c),h=f.filter(function(d){var g=d.getModel().data;return $S(s,g,l,u)});i.setElementsState(h,r,f)})},e.prototype.setSiblingsState=function(t){var r=this,i=this.context.view,a=zs(i);Xv(this.context)&&(0,v.each)(a,function(o){var s=ma(o),l=YS(r.context,o,10);l&&l.length?r.setElementsState(l,t,s):r.clearViewState(o)})},e.prototype.setElementsState=function(t,r,i){var a=this;(0,v.each)(i,function(o){t.includes(o)?a.setElementState(o,r):a.setElementState(o,!1)})},e.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},e.prototype.clear=function(){var t=this,r=this.context.view;if(this.effectSiblings){var i=zs(r);(0,v.each)(i,function(a){t.clearViewState(a)})}else this.clearViewState(r)},e}(F1),z1=q4,tz=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName="active",t}return e.prototype.active=function(){this.setState()},e}(z1),ez=tz,rz=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.setStateEnable=function(t){var r=bu(this.context);if(r){if(!VS(this.context))return;t?(this.clear(),this.setElementState(r,!0)):this.hasState(r)&&this.setElementState(r,!1)}},e.prototype.toggle=function(){var t=bu(this.context);if(t){var r=this.hasState(t);r||this.clear(),this.setElementState(t,!r)}},e.prototype.reset=function(){this.setStateEnable(!1)},e}(F1),U1=rz,nz=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName="active",t}return e.prototype.active=function(){this.setState()},e}(U1),iz=nz,tg="inactive",eg="active";function W1(n){var e=ma(n);(0,v.each)(e,function(t){t.hasState(eg)&&t.setState(eg,!1),t.hasState(tg)&&t.setState(tg,!1)})}function zw(n,e,t){(0,v.each)(n,function(r){e(r)?(r.hasState(tg)&&r.setState(tg,!1),r.setState(eg,t)):(r.hasState(eg)&&r.setState(eg,!1),r.setState(tg,t))})}var Yc=H.INACTIVE,Il=H.ACTIVE,az=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName=Il,t}return e.prototype.setElementsStateByItem=function(t,r,i,a){var o=this,s=function(l){return o.isMathItem(l,r,i)};this.setHighlightBy(t,s,a)},e.prototype.setElementHighlight=function(t,r){r(t)?(t.hasState(Yc)&&t.setState(Yc,!1),t.setState(Il,!0)):t.hasState(Il)||t.setState(Yc,!0)},e.prototype.setHighlightBy=function(t,r,i){var a=this;if(i)(0,v.each)(t,function(l){a.setElementHighlight(l,r)});else{var o=HS(this.context.view,Il),s=!0;(0,v.each)(o,function(l){if(!r(l))return s=!1,!1}),s?this.clear():(0,v.each)(t,function(l){r(l)&&(l.hasState(Il)&&l.setState(Il,!1),l.setState(Yc,!0))})}},e.prototype.setElementState=function(t,r){var i=this.context.view,a=ma(i);this.setHighlightBy(a,function(o){return t===o},r)},e.prototype.highlight=function(){this.setState()},e.prototype.clear=function(){var t=this.context.view;W1(t)},e}(G1),V1=az,oz=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.setStateByElement=function(t,r){var i=this.context.view,a=t.geometry.getAttribute("color");if(!!a){var o=i.getScaleByField(a.getFields()[0]),s=hs(t,o.field),l=ma(i),u=l.filter(function(c){return hs(c,o.field)===s});this.setHighlightBy(l,function(c){return u.includes(c)},r)}},e}(V1),sz=oz,lz=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.setElementHighlight=function(t,r){r(t)?(t.hasState(Yc)&&t.setState(Yc,!1),t.setState(Il,!0)):(t.setState(Yc,!0),t.hasState(Il)&&t.setState(Il,!1))},e.prototype.setStateByElement=function(t,r){var i=this.context.view,a=i.getXScale(),o=hs(t,a.field),s=ma(i),l=s.filter(function(u){return hs(u,a.field)===o});this.setHighlightBy(s,function(u){return l.includes(u)},r)},e.prototype.toggle=function(){var t=bu(this.context);if(t){var r=t.hasState(this.stateName);this.setStateByElement(t,!r)}},e}(V1),uz=lz,cz=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName="active",t}return e.prototype.clearViewState=function(t){W1(t)},e.prototype.highlight=function(){this.setState()},e.prototype.setElementsState=function(t,r,i){zw(i,function(a){return t.indexOf(a)>=0},r)},e}(z1),Uw=cz,fz=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName="active",t}return e.prototype.highlight=function(){this.setState()},e.prototype.setElementState=function(t,r){var i=this.context.view,a=ma(i);zw(a,function(o){return t===o},r)},e.prototype.clear=function(){var t=this.context.view;W1(t)},e}(U1),hz=fz,dz=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName="selected",t}return e.prototype.selected=function(){this.setState()},e}(z1),vz=dz,gz=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName="selected",t}return e.prototype.selected=function(){this.setState()},e}(G1),pz=gz,yz=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName="selected",t}return e.prototype.selected=function(){this.setState()},e}(U1),mz=yz,xz=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName="",t.ignoreItemStates=[],t}return e.prototype.getTriggerListInfo=function(){var t=Ch(this.context),r=null;return Vv(t)&&(r={item:t.item,list:t.component}),r},e.prototype.getAllowComponents=function(){var t=this,r=this.context.view,i=ZS(r),a=[];return(0,v.each)(i,function(o){o.isList()&&t.allowSetStateByElement(o)&&a.push(o)}),a},e.prototype.hasState=function(t,r){return t.hasState(r,this.stateName)},e.prototype.clearAllComponentsState=function(){var t=this,r=this.getAllowComponents();(0,v.each)(r,function(i){i.clearItemsState(t.stateName)})},e.prototype.allowSetStateByElement=function(t){var r=t.get("field");if(!r)return!1;if(this.cfg&&this.cfg.componentNames){var i=t.get("name");if(this.cfg.componentNames.indexOf(i)===-1)return!1}var a=this.context.view,o=Mh(a,r);return o&&o.isCategory},e.prototype.allowSetStateByItem=function(t,r){var i=this.ignoreItemStates;if(i.length){var a=i.filter(function(o){return r.hasState(t,o)});return a.length===0}return!0},e.prototype.setStateByElement=function(t,r,i){var a=t.get("field"),o=this.context.view,s=Mh(o,a),l=hs(r,a),u=s.getText(l);this.setItemsState(t,u,i)},e.prototype.setStateEnable=function(t){var r=this,i=bu(this.context);if(i){var a=this.getAllowComponents();(0,v.each)(a,function(u){r.setStateByElement(u,i,t)})}else{var o=Ch(this.context);if(Vv(o)){var s=o.item,l=o.component;this.allowSetStateByElement(l)&&this.allowSetStateByItem(s,l)&&this.setItemState(l,s,t)}}},e.prototype.setItemsState=function(t,r,i){var a=this,o=t.getItems();(0,v.each)(o,function(s){s.name===r&&a.setItemState(t,s,i)})},e.prototype.setItemState=function(t,r,i){t.setItemState(r,this.stateName,i)},e.prototype.setState=function(){this.setStateEnable(!0)},e.prototype.reset=function(){this.setStateEnable(!1)},e.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var r=t.list,i=t.item,a=this.hasState(r,i);this.setItemState(r,i,!a)}},e.prototype.clear=function(){var t=this.getTriggerListInfo();t?t.list.clearItemsState(this.stateName):this.clearAllComponentsState()},e}(Si),rg=xz,bz=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName="active",t}return e.prototype.active=function(){this.setState()},e}(rg),_z=bz,Ww="inactive",Vw="active";function Sz(n){var e=n.getItems();(0,v.each)(e,function(t){n.hasState(t,Vw)&&n.setItemState(t,Vw,!1),n.hasState(t,Ww)&&n.setItemState(t,Ww,!1)})}var ng="inactive",Hc="active",Ez=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName=Hc,t.ignoreItemStates=["unchecked"],t}return e.prototype.setItemsState=function(t,r,i){this.setHighlightBy(t,function(a){return a.name===r},i)},e.prototype.setItemState=function(t,r,i){var a=t.getItems();this.setHighlightBy(t,function(o){return o===r},i)},e.prototype.setHighlightBy=function(t,r,i){var a=t.getItems();if(i)(0,v.each)(a,function(l){r(l)?(t.hasState(l,ng)&&t.setItemState(l,ng,!1),t.setItemState(l,Hc,!0)):t.hasState(l,Hc)||t.setItemState(l,ng,!0)});else{var o=t.getItemsByState(Hc),s=!0;(0,v.each)(o,function(l){if(!r(l))return s=!1,!1}),s?this.clear():(0,v.each)(a,function(l){r(l)&&(t.hasState(l,Hc)&&t.setItemState(l,Hc,!1),t.setItemState(l,ng,!0))})}},e.prototype.highlight=function(){this.setState()},e.prototype.clear=function(){var t=this.getTriggerListInfo();if(t)Sz(t.list);else{var r=this.getAllowComponents();(0,v.each)(r,function(i){i.clearItemsState(Hc),i.clearItemsState(ng)})}},e}(rg),X1=Ez,wz=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName="selected",t}return e.prototype.selected=function(){this.setState()},e}(rg),Cz=wz,Mz=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName="unchecked",t}return e.prototype.unchecked=function(){this.setState()},e}(rg),Az=Mz,Dh="unchecked",P0="checked",Tz=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName=P0,t}return e.prototype.setItemState=function(t,r,i){this.setCheckedBy(t,function(a){return a===r},i)},e.prototype.setCheckedBy=function(t,r,i){var a=t.getItems();i&&(0,v.each)(a,function(o){r(o)?(t.hasState(o,Dh)&&t.setItemState(o,Dh,!1),t.setItemState(o,P0,!0)):t.hasState(o,P0)||t.setItemState(o,Dh,!0)})},e.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var r=t.list,i=t.item,a=!(0,v.some)(r.getItems(),function(o){return r.hasState(o,Dh)});a||r.hasState(i,Dh)?this.setItemState(r,i,!0):this.reset()}},e.prototype.checked=function(){this.setState()},e.prototype.reset=function(){var t=this.getAllowComponents();(0,v.each)(t,function(r){r.clearItemsState(P0),r.clearItemsState(Dh)})},e}(rg),Iz=Tz,Oz=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.maskShape=null,t.points=[],t.starting=!1,t.moving=!1,t.preMovePoint=null,t.shapeType="path",t}return e.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},e.prototype.emitEvent=function(t){var r="mask:"+t,i=this.context.view,a=this.context.event;i.emit(r,{target:this.maskShape,shape:this.maskShape,points:this.points,x:a.x,y:a.y})},e.prototype.createMask=function(){var t=this.context.view,r=this.getMaskAttrs(),i=t.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:(0,b.__assign)({fill:"#C5D4EB",opacity:.3},r)});return i},e.prototype.getMaskPath=function(){return[]},e.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},e.prototype.start=function(){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(),this.emitEvent("start")},e.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},e.prototype.move=function(){if(!(!this.moving||!this.maskShape)){var t=this.getCurrentPoint(),r=this.preMovePoint,i=t.x-r.x,a=t.y-r.y,o=this.points;(0,v.each)(o,function(s){s.x+=i,s.y+=a}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t}},e.prototype.updateMask=function(){var t=this.getMaskAttrs();this.maskShape.attr(t)},e.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},e.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},e.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},e.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},e.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,n.prototype.destroy.call(this)},e}(Si),Y1=Oz,Pz=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.shapeType="circle",t}return e.prototype.getMaskAttrs=function(){var t=this.points,r=(0,v.last)(this.points),i=0,a=0,o=0;if(t.length){var s=t[0];i=Zx(s,r)/2,a=(r.x+s.x)/2,o=(r.y+s.y)/2}return{x:a,y:o,r:i}},e}(Y1),Dz=Pz,Lz=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.shapeType="rect",t}return e.prototype.getRegion=function(){var t=this.points;return{start:(0,v.head)(t),end:(0,v.last)(t)}},e.prototype.getMaskAttrs=function(){var t=this.getRegion(),r=t.start,i=t.end,a=Math.min(r.x,i.x),o=Math.min(r.y,i.y),s=Math.abs(i.x-r.x),l=Math.abs(i.y-r.y);return{x:a,y:o,width:s,height:l}},e}(Y1),Xw=Lz;function Yw(n){n.x=(0,v.clamp)(n.x,0,1),n.y=(0,v.clamp)(n.y,0,1)}var Rz=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.dim="x",t.inPlot=!0,t}return e.prototype.getRegion=function(){var t=null,r=null,i=this.points,a=this.dim,o=this.context.view.getCoordinate(),s=o.invert((0,v.head)(i)),l=o.invert((0,v.last)(i));return this.inPlot&&(Yw(s),Yw(l)),a==="x"?(t=o.convert({x:s.x,y:0}),r=o.convert({x:l.x,y:1})):(t=o.convert({x:0,y:s.y}),r=o.convert({x:1,y:l.y})),{start:t,end:r}},e}(Xw),Hw=Rz,Nz=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getMaskPath=function(){var t=this.points,r=[];return t.length&&((0,v.each)(t,function(i,a){a===0?r.push(["M",i.x,i.y]):r.push(["L",i.x,i.y])}),r.push(["L",t[0].x,t[0].y])),r},e.prototype.getMaskAttrs=function(){return{path:this.getMaskPath()}},e.prototype.addPoint=function(){this.resize()},e}(Y1),jw=Nz,kz=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getMaskPath=function(){var t=this.points;return xB(t,!0)},e}(jw),Bz=kz,Fz=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.setCursor=function(t){var r=this.context.view;r.getCanvas().setCursor(t)},e.prototype.default=function(){this.setCursor("default")},e.prototype.pointer=function(){this.setCursor("pointer")},e.prototype.move=function(){this.setCursor("move")},e.prototype.crosshair=function(){this.setCursor("crosshair")},e.prototype.wait=function(){this.setCursor("wait")},e.prototype.help=function(){this.setCursor("help")},e.prototype.text=function(){this.setCursor("text")},e.prototype.eResize=function(){this.setCursor("e-resize")},e.prototype.wResize=function(){this.setCursor("w-resize")},e.prototype.nResize=function(){this.setCursor("n-resize")},e.prototype.sResize=function(){this.setCursor("s-resize")},e.prototype.neResize=function(){this.setCursor("ne-resize")},e.prototype.nwResize=function(){this.setCursor("nw-resize")},e.prototype.seResize=function(){this.setCursor("se-resize")},e.prototype.swResize=function(){this.setCursor("sw-resize")},e.prototype.nsResize=function(){this.setCursor("ns-resize")},e.prototype.ewResize=function(){this.setCursor("ew-resize")},e}(Si),Gz=Fz,zz=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.filterView=function(t,r,i){var a=this;t.getScaleByField(r)&&t.filter(r,i),t.views&&t.views.length&&(0,v.each)(t.views,function(o){a.filterView(o,r,i)})},e.prototype.filter=function(){var t=Ch(this.context);if(t){var r=this.context.view,i=t.component,a=i.get("field");if(Vv(t)){if(a){var o=i.getItemsByState("unchecked"),s=Mh(r,a),l=o.map(function(h){return h.name});l.length?this.filterView(r,a,function(h){var d=s.getText(h);return!l.includes(d)}):this.filterView(r,a,null),r.render(!0)}}else if(XS(t)){var u=i.getValue(),c=u[0],f=u[1];this.filterView(r,a,function(h){return h>=c&&h<=f}),r.render(!0)}}},e}(Si),Uz=zz;function Zw(n,e,t,r){var i=Math.min(t[e],r[e]),a=Math.max(t[e],r[e]),o=n.range,s=o[0],l=o[1];if(i<s&&(i=s),a>l&&(a=l),i===l&&a===l)return null;var u=n.invert(i),c=n.invert(a);if(n.isCategory){var f=n.values.indexOf(u),h=n.values.indexOf(c),d=n.values.slice(f,h+1);return function(g){return d.includes(g)}}else return function(g){return g>=u&&g<=c}}var jc;(function(n){n.FILTER="brush-filter-processing",n.RESET="brush-filter-reset"})(jc||(jc={}));var Wz=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.dims=["x","y"],t.startPoint=null,t.isStarted=!1,t}return e.prototype.hasDim=function(t){return this.dims.includes(t)},e.prototype.start=function(){var t=this.context;this.isStarted=!0,this.startPoint=t.getCurrentPoint()},e.prototype.filter=function(){var t,r;if(Xv(this.context)){var i=this.context.event.target,a=i.getCanvasBBox();t={x:a.x,y:a.y},r={x:a.maxX,y:a.maxY}}else{if(!this.isStarted)return;t=this.startPoint,r=this.context.getCurrentPoint()}if(!(Math.abs(t.x-r.x)<5||Math.abs(t.x-r.y)<5)){var o=this.context.view,s=o.getCoordinate(),l=s.invert(r),u=s.invert(t);if(this.hasDim("x")){var c=o.getXScale(),f=Zw(c,"x",l,u);this.filterView(o,c.field,f)}if(this.hasDim("y")){var h=o.getYScales()[0],f=Zw(h,"y",l,u);this.filterView(o,h.field,f)}this.reRender(o,{source:jc.FILTER})}},e.prototype.end=function(){this.isStarted=!1},e.prototype.reset=function(){var t=this.context.view;if(this.isStarted=!1,this.hasDim("x")){var r=t.getXScale();this.filterView(t,r.field,null)}if(this.hasDim("y")){var i=t.getYScales()[0];this.filterView(t,i.field,null)}this.reRender(t,{source:jc.RESET})},e.prototype.filterView=function(t,r,i){t.filter(r,i)},e.prototype.reRender=function(t,r){t.render(!0,r)},e}(Si),D0=Wz,Vz=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.filterView=function(t,r,i){var a=zs(t);(0,v.each)(a,function(o){o.filter(r,i)})},e.prototype.reRender=function(t){var r=zs(t);(0,v.each)(r,function(i){i.render(!0)})},e}(D0),H1=Vz,Xz=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.filter=function(){var t=Ch(this.context),r=this.context.view,i=ma(r);if(Xv(this.context)){var a=Hx(this.context,10);a&&(0,v.each)(i,function(g){a.includes(g)?g.show():g.hide()})}else if(t){var o=t.component,s=o.get("field");if(Vv(t)){if(s){var l=o.getItemsByState("unchecked"),u=Mh(r,s),c=l.map(function(g){return g.name});(0,v.each)(i,function(g){var p=hs(g,s),m=u.getText(p);c.indexOf(m)>=0?g.hide():g.show()})}}else if(XS(t)){var f=o.getValue(),h=f[0],d=f[1];(0,v.each)(i,function(g){var p=hs(g,s);p>=h&&p<=d?g.show():g.hide()})}}},e.prototype.clear=function(){var t=ma(this.context.view);(0,v.each)(t,function(r){r.show()})},e.prototype.reset=function(){this.clear()},e}(Si),Yz=Xz,Hz=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.byRecord=!1,t}return e.prototype.filter=function(){Xv(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},e.prototype.filterByRecord=function(){var t=this.context.view,r=Hx(this.context,10);if(!!r){var i=t.getXScale().field,a=t.getYScales()[0].field,o=r.map(function(l){return l.getModel().data}),s=zs(t);(0,v.each)(s,function(l){var u=ma(l);(0,v.each)(u,function(c){var f=c.getModel().data;$S(o,f,i,a)?c.show():c.hide()})})}},e.prototype.filterByBBox=function(){var t=this,r=this.context.view,i=zs(r);(0,v.each)(i,function(a){var o=YS(t.context,a,10),s=ma(a);o&&(0,v.each)(s,function(l){o.includes(l)?l.show():l.hide()})})},e.prototype.reset=function(){var t=zs(this.context.view);(0,v.each)(t,function(r){var i=ma(r);(0,v.each)(i,function(a){a.show()})})},e}(Si),Kw=Hz,jz=10,Zz=5,Kz=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},t}return e.prototype.getButtonCfg=function(){return(0,v.deepMix)(this.buttonCfg,this.cfg)},e.prototype.drawButton=function(){var t=this.getButtonCfg(),r=this.context.view.foregroundGroup.addGroup({name:t.name}),i=r.addShape({type:"text",name:"button-text",attrs:(0,b.__assign)({text:t.text},t.textStyle)}),a=i.getBBox(),o=qx(t.padding),s=r.addShape({type:"rect",name:"button-rect",attrs:(0,b.__assign)({x:a.x-o[3],y:a.y-o[0],width:a.width+o[1]+o[3],height:a.height+o[0]+o[2]},t.style)});s.toBack(),r.on("mouseenter",function(){s.attr(t.activeStyle)}),r.on("mouseleave",function(){s.attr(t.style)}),this.buttonGroup=r},e.prototype.resetPosition=function(){var t=this.context.view,r=t.getCoordinate(),i=r.convert({x:1,y:1}),a=this.buttonGroup,o=a.getBBox(),s=Cn.vs(null,[["t",i.x-o.width-jz,i.y+o.height+Zz]]);a.setMatrix(s)},e.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},e.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},e.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),n.prototype.destroy.call(this)},e}(Si),$z=Kz,Qz=4,Jz=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.starting=!1,t.dragStart=!1,t}return e.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},e.prototype.drag=function(){if(!!this.startPoint){var t=this.context.getCurrentPoint(),r=this.context.view,i=this.context.event;this.dragStart?r.emit("drag",{target:i.target,x:i.x,y:i.y}):Zx(t,this.startPoint)>Qz&&(r.emit("dragstart",{target:i.target,x:i.x,y:i.y}),this.dragStart=!0)}},e.prototype.end=function(){if(this.dragStart){var t=this.context.view,r=this.context.event;t.emit("dragend",{target:r.target,x:r.x,y:r.y})}this.starting=!1,this.dragStart=!1},e}(Si),qz=Jz,t6=5,e6=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.starting=!1,t.isMoving=!1,t.startPoint=null,t.startMatrix=null,t}return e.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},e.prototype.move=function(){if(!!this.starting){var t=this.startPoint,r=this.context.getCurrentPoint(),i=Zx(t,r);if(i>t6&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var a=this.context.view,o=Cn.vs(this.startMatrix,[["t",r.x-t.x,r.y-t.y]]);a.backgroundGroup.setMatrix(o),a.foregroundGroup.setMatrix(o),a.middleGroup.setMatrix(o)}}},e.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},e.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var t=this.context.view;t.backgroundGroup.resetMatrix(),t.foregroundGroup.resetMatrix(),t.middleGroup.resetMatrix(),this.isMoving=!1},e}(Si),r6=e6,$w="x",Qw="y",n6=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.dims=[$w,Qw],t.cfgFields=["dims"],t.cacheScaleDefs={},t}return e.prototype.hasDim=function(t){return this.dims.includes(t)},e.prototype.getScale=function(t){var r=this.context.view;return t==="x"?r.getXScale():r.getYScales()[0]},e.prototype.resetDim=function(t){var r=this.context.view;if(this.hasDim(t)&&this.cacheScaleDefs[t]){var i=this.getScale(t);r.scale(i.field,this.cacheScaleDefs[t]),this.cacheScaleDefs[t]=null}},e.prototype.reset=function(){this.resetDim($w),this.resetDim(Qw);var t=this.context.view;t.render(!0)},e}(Si),Jw=n6,i6=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.startPoint=null,t.starting=!1,t.startCache={},t}return e.prototype.start=function(){var t=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0;var r=this.dims;(0,v.each)(r,function(i){var a=t.getScale(i),o=a.min,s=a.max,l=a.values;t.startCache[i]={min:o,max:s,values:l}})},e.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},e.prototype.translate=function(){var t=this;if(!!this.starting){var r=this.startPoint,i=this.context.view.getCoordinate(),a=this.context.getCurrentPoint(),o=i.invert(r),s=i.invert(a),l=s.x-o.x,u=s.y-o.y,c=this.context.view,f=this.dims;(0,v.each)(f,function(h){t.translateDim(h,{x:l*-1,y:u*-1})}),c.render(!0)}},e.prototype.translateDim=function(t,r){if(this.hasDim(t)){var i=this.getScale(t);i.isLinear&&this.translateLinear(t,i,r)}},e.prototype.translateLinear=function(t,r,i){var a=this.context.view,o=this.startCache[t],s=o.min,l=o.max,u=l-s,c=i[t]*u;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:r.nice,min:s,max:l}),a.scale(r.field,{nice:!1,min:s+c,max:l+c})},e.prototype.reset=function(){n.prototype.reset.call(this),this.startPoint=null,this.starting=!1},e}(Jw),a6=i6,o6=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.zoomRatio=.05,t}return e.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},e.prototype.zoom=function(t){var r=this,i=this.dims;(0,v.each)(i,function(a){r.zoomDim(a,t)}),this.context.view.render(!0)},e.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},e.prototype.zoomDim=function(t,r){if(this.hasDim(t)){var i=this.getScale(t);i.isLinear&&this.zoomLinear(t,i,r)}},e.prototype.zoomLinear=function(t,r,i){var a=this.context.view;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:r.nice,min:r.min,max:r.max});var o=this.cacheScaleDefs[t],s=o.max-o.min,l=r.min,u=r.max,c=i*s,f=l-c,h=u+c,d=h-f,g=d/s;h>f&&g<100&&g>.01&&a.scale(r.field,{nice:!1,min:l-c,max:u+c})},e}(Jw),s6=o6;iE("dark",rE(EF)),ht("canvas",T),ht("svg",B),ds("Polygon",W5),ds("Interval",R5),ds("Schema",X5),ds("Path",C1),ds("Point",G5),ds("Line",k5),ds("Area",w5),ds("Edge",M5),ds("Heatmap",T5),ds("Violin",j5),Hv("base",h0),Hv("interval",cG),Hv("pie",dG),Hv("polar",dw),eo("overlap",AG),eo("distribute",gG),eo("fixed-overlap",MG),eo("hide-overlap",DG),eo("limit-in-shape",SG),eo("limit-in-canvas",_G),eo("limit-in-plot",KG),eo("pie-outer",yG),eo("adjust-color",RG),eo("interval-adjust-position",FG),eo("interval-hide-overlap",zG),eo("point-adjust-position",VG),eo("pie-spider",bG),eo("path-adjust-position",HG),ho("fade-in",$G),ho("fade-out",QG),ho("grow-in-x",qG),ho("grow-in-xy",e4),ho("grow-in-y",t4),ho("scale-in-x",i4),ho("scale-in-y",a4),ho("wave-in",s4),ho("zoom-in",l4),ho("zoom-out",u4),ho("position-update",n4),ho("sector-path-update",o4),ho("path-in",r4),Gc("rect",x4),Gc("mirror",y4),Gc("list",d4),Gc("matrix",g4),Gc("circle",f4),Gc("tree",_4),_u("axis",M4),_u("legend",P4),_u("tooltip",t1),_u("annotation",w4),_u("slider",L4),_u("scrollbar",B4),Kr("tooltip",Fw),Kr("sibling-tooltip",X4),Kr("ellipsis-text",H4),Kr("element-active",$4),Kr("element-single-active",iz),Kr("element-range-active",ez),Kr("element-highlight",V1),Kr("element-highlight-by-x",uz),Kr("element-highlight-by-color",sz),Kr("element-single-highlight",hz),Kr("element-range-highlight",Uw),Kr("element-sibling-highlight",Uw,{effectSiblings:!0,effectByRecord:!0}),Kr("element-selected",pz),Kr("element-single-selected",mz),Kr("element-range-selected",vz),Kr("element-link-by-color",J4),Kr("active-region",U4),Kr("list-active",_z),Kr("list-selected",Cz),Kr("list-highlight",X1),Kr("list-unchecked",Az),Kr("list-checked",Iz),Kr("legend-item-highlight",X1,{componentNames:["legend"]}),Kr("axis-label-highlight",X1,{componentNames:["axis"]}),Kr("rect-mask",Xw),Kr("x-rect-mask",Hw,{dim:"x"}),Kr("y-rect-mask",Hw,{dim:"y"}),Kr("circle-mask",Dz),Kr("path-mask",jw),Kr("smooth-path-mask",Bz),Kr("cursor",Gz),Kr("data-filter",Uz),Kr("brush",D0),Kr("brush-x",D0,{dims:["x"]}),Kr("brush-y",D0,{dims:["y"]}),Kr("sibling-filter",H1),Kr("sibling-x-filter",H1),Kr("sibling-y-filter",H1),Kr("element-filter",Yz),Kr("element-sibling-filter",Kw),Kr("element-sibling-filter-record",Kw,{byRecord:!0}),Kr("view-drag",qz),Kr("view-move",r6),Kr("scale-translate",a6),Kr("scale-zoom",s6),Kr("reset-button",$z,{name:"reset-button",text:"reset"});function Mu(n){return n.isInPlot()}An("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]}),An("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]}),An("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]}),An("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]}),An("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]}),An("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]}),An("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]}),An("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]}),An("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]}),An("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]}),An("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]}),An("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(n){return!n.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(n){return!n.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]}),An("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Mu,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:Mu,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Mu,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]}),An("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]}),An("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Mu,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:Mu,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Mu,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]}),An("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Mu,action:"path-mask:start"},{trigger:"mousedown",isEnable:Mu,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]}),An("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]}),An("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter"]}]}),An("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]}),An("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]}),An("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","element-filter:filter"]}]}),An("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]});function qw(n){return n.gEvent.preventDefault(),n.gEvent.originalEvent.deltaY>0}An("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(n){return qw(n.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(n){return!qw(n.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]}),An("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]});function Xr(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return function(t){return n.reduce(function(r,i){return i(r)},t)}}function Wn(n,e){var t={};return n!==null&&typeof n=="object"&&e.forEach(function(r){var i=n[r];i!==void 0&&(t[r]=i)}),t}function tC(n,e){return e?(0,v.reduce)(e,function(t,r,i){return t.replace(new RegExp("{\\s*"+i+"\\s*}","g"),r)},n):n}var Au;(function(n){n.ERROR="error",n.WARN="warn",n.INFO="log"})(Au||(Au={}));var eC="AntV/G2Plot";function rC(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var r=0;return eC+": "+n.replace(/%s/g,function(){return""+e[r++]})}function Mot(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];if(!n){var i=new Error(rC.apply(void 0,__spreadArrays([e],t)));throw i.name=eC,i}}function Lh(n,e,t){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e||console[n](rC.apply(void 0,(0,b.__spreadArrays)([t],r)))}function j1(n){if(!n)return{width:0,height:0};var e=getComputedStyle(n);return{width:(n.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10),height:(n.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)}}function Xa(n,e){return n.geometries.find(function(t){return t.type===e})}function Rh(n){return(0,v.reduce)(n.geometries,function(e,t){return e.concat(t.elements)},[])}function ig(n){return(0,v.get)(n,["views","length"],0)<=0?Rh(n):(0,v.reduce)(n.views,function(e,t){return e.concat(ig(t))},Rh(n))}function l6(n){return(0,v.get)(n,["views","length"],0)<=0?n.geometries:(0,v.reduce)(n.views,function(e,t){return e.concat(t.geometries)},n.geometries)}function dn(n,e){return n.views.find(function(t){return t.id===e})}function ag(n){var e=n.parent;return e?e.views:[]}function nC(n){return ag(n).filter(function(e){return e!==n})}function xa(n){if(!(0,v.isType)(n,"Object"))return n;var e=(0,b.__assign)({},n);return e.formatter&&!e.content&&(e.content=e.formatter),e}function u6(n,e){var t=[];if(n.length){t.push(["M",n[0].x,n[0].y]);for(var r=1,i=n.length;r<i;r+=1){var a=n[r];t.push(["L",a.x,a.y])}e&&t.push(["Z"])}return t}var c6=function(n,e,t,r){var i=[],a,o,s=!!r,l,u;if(s){l=[Infinity,Infinity],u=[-Infinity,-Infinity];for(var c=0,f=n.length;c<f;c++){var h=n[c];l=Ar.VV([0,0],l,h),u=Ar.Fp([0,0],u,h)}l=Ar.VV([0,0],l,r[0]),u=Ar.Fp([0,0],u,r[1])}for(var c=0,d=n.length;c<d;c++){var h=n[c];if(t)a=n[c?c-1:d-1],o=n[(c+1)%d];else if(c===0||c===d-1){i.push(h);continue}else a=n[c-1],o=n[c+1];var g=[0,0];g=Ar.lu(g,o,a),g=Ar.bA(g,g,e);var p=Ar.TE(h,a),m=Ar.TE(h,o),_=p+m;_!==0&&(p/=_,m/=_);var S=Ar.bA([0,0],g,-p),M=Ar.bA([0,0],g,m),R=Ar.IH([0,0],h,S),F=Ar.IH([0,0],h,M);s&&(R=Ar.Fp([0,0],R,l),R=Ar.VV([0,0],R,u),F=Ar.Fp([0,0],F,l),F=Ar.VV([0,0],F,u)),i.push(R),i.push(F)}return t&&i.push(i.shift()),i};function f6(n,e,t){for(var r=!!e,i=[],a=0,o=n.length;a<o;a+=2)i.push([n[a],n[a+1]]);for(var s=c6(i,.4,r,t),l=i.length,u=[],c,f,h,a=0;a<l-1;a++)c=s[a*2],f=s[a*2+1],h=i[a+1],u.push(["C",c[0],c[1],f[0],f[1],h[0],h[1]]);return r&&(c=s[l],f=s[l+1],h=i[0],u.push(["C",c[0],c[1],f[0],f[1],h[0],h[1]])),u}function h6(n,e,t){var r=[],i=n[0],a=null;if(n.length<=2)return u6(n,e);for(var o=0,s=n.length;o<s;o++){var l=n[o];(!a||!(a.x===l.x&&a.y===l.y))&&(r.push(l.x),r.push(l.y),a=l)}var u=t||[[0,0],[1,1]],c=f6(r,e,u);return c.unshift(["M",i.x,i.y]),c}var d6=5,v6={}.toString,iC=function(n,e){return v6.call(n)==="[object "+e+"]"},g6=function(n){return iC(n,"Array")},p6=function(n){return typeof n=="object"&&n!==null},aC=function(n){if(!p6(n)||!iC(n,"Object"))return!1;for(var e=n;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e},oC=function(n,e,t,r){t=t||0,r=r||d6;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=e[i];a?aC(a)?(aC(n[i])||(n[i]={}),t<r?oC(n[i],a,t+1,r):n[i]=e[i]):g6(a)?(n[i]=[],n[i]=n[i].concat(a)):n[i]=a:n[i]=a}},Le=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var r=0;r<e.length;r+=1)oC(n,e[r]);return n};function sC(n){if(!n)return n;var e=n.match(/(([A-Z]{0,1}[a-z]*[^A-Z])|([A-Z]{1}))/g);return e.map(function(t){return t.toLowerCase()}).join("-")}function lC(n){var e={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"flex",justifyContent:"center",alignItems:"center"},t=["stroke","lineWidth","shadowColor","strokeOpacity","shadowBlur","shadowOffsetX","shadowOffsetY","fill"];(0,v.get)(n,"fill")&&(e.color=n.fill);var r=Wn(n,t),i=r.shadowColor,a=r.shadowBlur,o=a===void 0?0:a,s=r.shadowOffsetX,l=s===void 0?0:s,u=r.shadowOffsetY,c=u===void 0?0:u;e["text-shadow"]=""+[i,l+"px",c+"px",o+"px"].join(" ");var f=Wn(n,t),h=f.stroke,d=f.lineWidth,g=d===void 0?0:d;return e["-webkit-text-stroke"]=""+[g+"px",h].join(" "),(0,v.each)(n,function(p,m){["fontSize"].includes(m)&&(0,v.isNumber)(p)?e[sC(m)]=p+"px":m&&!t.includes(m)&&(e[sC(m)]=""+p)}),e}function uC(n,e){n.style["pointer-events"]="none",(0,v.each)(e,function(t,r){r&&t&&(n.style[r]=t)})}var L0=function(n,e,t){var r=e.statistic,i=e.plotType,a=r.title,o=r.content;[a,o].forEach(function(s,l){if(!!s){var u="";l===0?u=o?"translate(-50%, -100%)":"translate(-50%, -50%)":u=a?"translate(-50%, 0)":"translate(-50%, -50%)";var c=(0,v.isFunction)(s.style)?s.style(t):s.style;n.annotation().html((0,b.__assign)({position:["50%","50%"],html:function(f,h){var d=h.getCoordinate(),g=0;if(i==="pie"||i==="ring-progress")g=d.getRadius()*d.innerRadius*2;else if(i==="liquid"){var p=(0,v.get)(h.geometries,[0,"elements",0,"shape"]);if(p){var m=p.find(function(R){return R.get("name")==="wrap"}),_=m.getCanvasBBox().width;g=_}}else g||(g=d.getWidth());uC(f,(0,b.__assign)({width:g+"px",transform:u},lC(c)));var S=h.getData();if(s.customHtml)return s.customHtml(f,h,t,S);var M=s.content;return s.formatter&&(M=s.formatter(t,S)),M?(0,v.isString)(M)?M:""+M:"<div></div>"},key:(l===0?"top":"bottom")+"-statistic"},Wn(s,["offsetX","offsetY","rotate","style","formatter"])))}})},y6=function(n,e,t){var r=e.statistic,i=r.title,a=r.content;[i,a].forEach(function(o){if(!!o){var s=(0,v.isFunction)(o.style)?o.style(t):o.style;n.annotation().html((0,b.__assign)({position:["50%","100%"],html:function(l,u){var c=u.getCoordinate(),f=u.views[0].getCoordinate(),h=f.getCenter(),d=f.getRadius(),g=Math.max(Math.sin(f.startAngle),Math.sin(f.endAngle))*d,p=h.y+g-c.y.start-parseFloat((0,v.get)(s,"fontSize",0)),m=c.getRadius()*c.innerRadius*2;uC(l,(0,b.__assign)({width:m+"px",transform:"translate(-50%, "+p+"px)"},lC(s)));var _=u.getData();if(o.customHtml)return o.customHtml(l,u,t,_);var S=o.content;return o.formatter&&(S=o.formatter(t,_)),S?(0,v.isString)(S)?S:""+S:"<div></div>"}},Wn(o,["offsetX","offsetY","rotate","style","formatter"])))}})},Z1;function m6(){return Z1||(Z1=document.createElement("canvas").getContext("2d")),Z1}var cC=(0,v.memoize)(function(n,e){e===void 0&&(e={});var t=e.fontSize,r=e.fontFamily,i=r===void 0?"sans-serif":r,a=e.fontWeight,o=e.fontStyle,s=e.fontVariant,l=m6();l.font=[o,a,s,t+"px",i].join(" ");var u=l.measureText((0,v.isString)(n)?n:"");return u.width},function(n,e){return e===void 0&&(e={}),(0,b.__spreadArrays)([n],(0,v.values)(e)).join("")});function og(n){return typeof n=="number"&&!isNaN(n)}function x6(n,e,t){var r=Math.min(e,t),i=Math.max(e,t);return n>=r&&n<=i}function K1(n,e){var t=n.filter(function(a){var o=(0,v.get)(a,[e]);return(0,v.isNumber)(o)&&!isNaN(o)}),r=t.every(function(a){return(0,v.get)(a,[e])>=0}),i=t.every(function(a){return(0,v.get)(a,[e])<=0});return r?{min:0}:i?{max:0}:{}}function fC(n,e,t,r,i){if(i===void 0&&(i=[]),!Array.isArray(n))return{nodes:[],links:[]};var a=[],o={},s=-1;return n.forEach(function(l){var u=l[e],c=l[t],f=l[r],h=Wn(l,i);o[u]||(o[u]=(0,b.__assign)({id:++s,name:u},h)),o[c]||(o[c]=(0,b.__assign)({id:++s,name:c},h)),a.push((0,b.__assign)({source:o[u].id,target:o[c].id,value:f},h))}),{nodes:Object.values(o),links:a}}function Nh(n,e){var t=(0,v.filter)(n,function(r){var i=r[e];return i===null||typeof i=="number"&&!isNaN(i)});return Lh(Au.WARN,t.length===n.length,"illegal data existed in chart data."),t}var hC={locale:"en-US"};function Aot(n){each(n,function(e,t){return hC[t]=e})}var R0={};function dC(n,e){R0[n]=e}function N0(n){return{get:function(e,t){return tC((0,v.get)(R0[n],e)||(0,v.get)(R0[hC.locale],e)||(0,v.get)(R0["en-US"],e)||e,t)}}}var b6={locale:"en-US",general:{increase:"Increase",decrease:"Decrease",root:"Root"},statistic:{total:"Total"},conversionTag:{label:"Rate"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"Total"}},_6={locale:"zh-CN",general:{increase:"\u589E\u52A0",decrease:"\u51CF\u5C11",root:"\u521D\u59CB"},statistic:{total:"\u603B\u8BA1"},conversionTag:{label:"\u8F6C\u5316\u7387"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"\u603B\u8BA1"}},S6=x(57872),vC="data-chart-source-type",gC=["padding","appendPadding","renderer","pixelRatio","syncViewPadding","supportCSSTransform","limitInPlot"],tn=function(n){(0,b.__extends)(e,n);function e(t,r){var i=n.call(this)||this;return i.type="base",i.container=typeof t=="string"?document.getElementById(t):t,i.options=Le({},i.getDefaultOptions(),r),i.createG2(),i.bindEvents(),i}return e.getDefaultOptions=function(){return{renderer:"canvas",xAxis:{nice:!0,label:{autoRotate:!1,autoHide:{type:"equidistance",cfg:{minGap:6}}}},yAxis:{nice:!0,label:{autoHide:!0,autoRotate:!1}},animation:!0}},e.prototype.createG2=function(){var t=this.options,r=t.width,i=t.height;this.chart=new dE((0,b.__assign)((0,b.__assign)((0,b.__assign)({container:this.container,autoFit:!1},this.getChartSize(r,i)),{localRefresh:!1}),Wn(this.options,gC))),this.container.setAttribute(vC,"G2Plot")},e.prototype.getChartSize=function(t,r){var i=j1(this.container);return{width:t||i.width||400,height:r||i.height||400}},e.prototype.bindEvents=function(){var t=this;this.chart&&this.chart.on("*",function(r){(r==null?void 0:r.type)&&t.emit(r.type,r)})},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.render=function(){this.chart.clear(),this.chart.options={data:[],animate:!0},this.chart.views=[],this.execAdaptor(),this.chart.render(),this.bindSizeSensor()},e.prototype.update=function(t){this.updateOption(t),this.render()},e.prototype.updateOption=function(t){this.options=Le({},this.options,t)},e.prototype.setState=function(t,r,i){i===void 0&&(i=!0);var a=Rh(this.chart);(0,v.each)(a,function(o){r(o.getData())&&o.setState(t,i)})},e.prototype.getStates=function(){var t=Rh(this.chart),r=[];return(0,v.each)(t,function(i){var a=i.getData(),o=i.getStates();(0,v.each)(o,function(s){r.push({data:a,state:s,geometry:i.geometry,element:i})})}),r},e.prototype.changeData=function(t){this.update({data:t})},e.prototype.changeSize=function(t,r){this.chart.changeSize(t,r)},e.prototype.destroy=function(){this.unbindSizeSensor(),this.chart.destroy(),this.off(),this.container.removeAttribute(vC)},e.prototype.execAdaptor=function(){var t=this.getSchemaAdaptor(),r=this.options,i=r.padding,a=r.appendPadding;this.chart.padding=i,this.chart.appendPadding=a,t({chart:this.chart,options:this.options})},e.prototype.triggerResize=function(){this.chart.forceFit()},e.prototype.bindSizeSensor=function(){var t=this;if(!this.unbind){var r=this.options.autoFit,i=r===void 0?!0:r;i&&(this.unbind=(0,S6.ak)(this.container,function(){var a=j1(t.container),o=a.width,s=a.height;(o!==t.chart.width||s!==t.chart.height)&&t.triggerResize()}))}},e.prototype.unbindSizeSensor=function(){this.unbind&&(this.unbind(),this.unbind=void 0)},e}(Ot.Z),vo=["type","alias","tickCount","tickInterval","min","max","nice","minLimit","maxLimit","range","tickMethod","base","exponent","mask","sync"];function Tu(n){var e=n.chart,t=n.options,r=t.legend,i=t.colorField,a=t.seriesField;return r===!1?e.legend(!1):(i||a)&&e.legend(i||a,r),n}function ha(n){var e=n.chart,t=n.options,r=t.tooltip;return r!==void 0&&e.tooltip(r),n}function li(n){var e=n.chart,t=n.options,r=t.interactions;return(0,v.each)(r,function(i){i.enable===!1?e.removeInteraction(i.type):e.interaction(i.type,i.cfg||{})}),n}function Hn(n){var e=n.chart,t=n.options,r=t.animation;return typeof r=="boolean"?e.animate(r):e.animate(!0),(0,v.each)(e.geometries,function(i){i.animate(r)}),n}function Dn(n){var e=n.chart,t=n.options,r=t.theme;return r&&e.theme(r),n}function Iu(n){var e=n.chart,t=n.options,r=t.state;return r&&(0,v.each)(e.geometries,function(i){i.state(r)}),n}function k0(n){var e=n.chart,t=n.options,r=t.slider;return e.option("slider",r),n}function E6(n){var e=n.chart,t=n.options,r=t.scrollbar;return e.option("scrollbar",r),n}function Ri(n,e){return function(t){var r=t.chart,i=t.options,a={};return(0,v.each)(n,function(o,s){a[s]=Wn(o,vo)}),a=Le({},e,i.meta,a),r.scale(a),t}}function Ai(n){return function(e){var t=e.chart,r=e.options,i=t.getController("annotation");return(0,v.each)((0,b.__spreadArrays)(r.annotations||[],n||[]),function(a){i.annotation(a)}),e}}function Zc(n){var e=n.chart,t=n.options,r=t.yAxis,i=t.limitInPlot,a=i;return(0,v.isObject)(r)&&(0,v.isNil)(i)&&(Object.values(Wn(r,["min","max","minLimit","maxLimit"])).some(function(o){return!(0,v.isNil)(o)})?a=!0:a=!1),e.limitInPlot=a,n}function Ho(n,e){if(n===!1)return{fields:!1};var t=(0,v.get)(n,"fields"),r=(0,v.get)(n,"formatter");return r&&!t&&(t=e),{fields:t,formatter:r}}function B0(n,e){var t=n.xField,r=n.yField,i=n.colorField,a=n.shapeField,o=n.sizeField,s=n.styleField,l=n.rawFields,u=l===void 0?[]:l,c=[];if(e==="color")c=(0,b.__spreadArrays)([i||t],u);else if(e==="shape")c=(0,b.__spreadArrays)([a||t],u);else if(e==="size")c=(0,b.__spreadArrays)([o||t],u);else{c=(0,b.__spreadArrays)([t,r,i,a,o,s],u);var f=["x","y","color","shape","size","style"].indexOf(e),h=c[f];c.splice(f,1),c.unshift(h)}return(0,v.uniq)(c.filter(function(d){return!!d}))}function kh(n,e){if(!!e)return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i={};return n.forEach(function(a,o){i[a]=t[o]}),delete i.undefined,e(i)}}function go(n){var e=n.chart,t=n.options,r=t.type,i=t.args,a=t.mapping,o=t.xField,s=t.yField,l=t.colorField,u=t.shapeField,c=t.sizeField,f=t.tooltipFields,h=t.label,d=t.state;if(!a)return n;var g=a.color,p=a.shape,m=a.size,_=a.style,S=a.tooltip,M=e[r](i).position(o+"*"+s);if((0,v.isString)(g))l?M.color(l,g):M.color(g);else if((0,v.isFunction)(g)){var R=B0(t,"color");M.color(R.join("*"),kh(R,g))}else l&&M.color(l,g);if((0,v.isString)(p))u?M.shape(u,[p]):M.shape(p);else if((0,v.isFunction)(p)){var R=B0(t,"shape");M.shape(R.join("*"),kh(R,p))}else u&&M.shape(u,p);if((0,v.isNumber)(m))c?M.size(c,m):M.size(m);else if((0,v.isFunction)(m)){var R=B0(t,"size");M.size(R.join("*"),kh(R,m))}else c&&M.size(c,m);if((0,v.isFunction)(_)){var R=B0(t,"style");M.style(R.join("*"),kh(R,_))}else(0,v.isObject)(_)&&M.style(_);if(f===!1?M.tooltip(!1):(0,v.isEmpty)(f)||M.tooltip(f.join("*"),kh(f,S)),h===!1)M.label(!1);else if(h){var F=h.callback,V=h.fields,nt=(0,b.__rest)(h,["callback","fields"]);M.label({fields:V||[s],callback:F,cfg:xa(nt)})}return d&&M.state(d),[o,s].filter(function(at){return at!==l}).forEach(function(at){e.legend(at,!1)}),(0,b.__assign)((0,b.__assign)({},n),{ext:{geometry:M}})}function $1(n){var e=n.options,t=e.area,r=e.xField,i=e.yField,a=e.seriesField,o=e.smooth,s=e.tooltip,l=Ho(s,[r,i,a]),u=l.fields,c=l.formatter;return t?go(Le({},n,{options:{type:"area",colorField:a,tooltipFields:u,mapping:(0,b.__assign)({shape:o?"smooth":"area",tooltip:c},t)}})):n}function Bh(n){var e=n.options,t=e.line,r=e.stepType,i=e.xField,a=e.yField,o=e.seriesField,s=e.smooth,l=e.connectNulls,u=e.tooltip,c=Ho(u,[i,a,o]),f=c.fields,h=c.formatter;return t?go(Le({},n,{options:{type:"line",colorField:o,tooltipFields:f,mapping:(0,v.deepMix)({shape:r||(s?"smooth":"line"),tooltip:h},t),args:{connectNulls:l}}})):n}function Ao(n){var e=n.options,t=e.point,r=e.xField,i=e.yField,a=e.seriesField,o=e.sizeField,s=e.shapeField,l=e.tooltip,u=Ho(l,[r,i,a,o,s]),c=u.fields,f=u.formatter;return t?go(Le({},n,{options:{type:"point",colorField:a,shapeField:s,tooltipFields:c,mapping:(0,b.__assign)({tooltip:f},t)}})):n}function w6(n){var e=n.chart,t=n.options,r=n.ext,i=t.seriesField,a=t.isGroup,o=t.isStack,s=t.marginRatio,l=t.widthRatio,u=t.groupField,c=t.theme,f=[];if(i&&(a&&f.push({type:"dodge",dodgeBy:u||i,marginRatio:s}),o&&f.push({type:"stack",marginRatio:s})),f.length&&(r==null?void 0:r.geometry)){var h=r==null?void 0:r.geometry;h.adjust(f)}return(0,v.isNil)(l)||e.theme(Le({},(0,v.isObject)(c)?c:Ah(c),{columnWidthRatio:l})),n}function ba(n){var e=n.options,t=e.xField,r=e.yField,i=e.interval,a=e.seriesField,o=e.tooltip,s=e.minColumnWidth,l=e.maxColumnWidth,u=e.columnBackground,c=e.dodgePadding,f=e.intervalPadding,h=Ho(o,[t,r,a]),d=h.fields,g=h.formatter,p=(i?go(Le({},n,{options:{type:"interval",colorField:a,tooltipFields:d,mapping:(0,b.__assign)({tooltip:g},i),args:{dodgePadding:c,intervalPadding:f,minColumnWidth:s,maxColumnWidth:l,background:u}}})):n).ext;return w6((0,b.__assign)((0,b.__assign)({},n),{ext:p}))}function F0(n){var e=n.options,t=e.polygon,r=e.xField,i=e.yField,a=e.seriesField,o=e.tooltip,s=Ho(o,[r,i,a]),l=s.fields,u=s.formatter;return t?go(Le({},n,{options:{type:"polygon",colorField:a,tooltipFields:l,mapping:(0,b.__assign)({tooltip:u},t)}})):n}function pC(n){var e=n.options,t=e.edge,r=e.xField,i=e.yField,a=e.seriesField,o=e.tooltip,s=Ho(o,[r,i,a]),l=s.fields,u=s.formatter;return t?go(Le({},n,{options:{type:"edge",colorField:a,tooltipFields:l,mapping:(0,b.__assign)({tooltip:u},t)}})):n}function yC(n){var e=n.options,t=e.schema,r=e.xField,i=e.yField,a=e.seriesField,o=e.tooltip,s=Ho(o,[r,i,a]),l=s.fields,u=s.formatter;return t?go(Le({},n,{options:{type:"schema",colorField:a,tooltipFields:l,mapping:(0,b.__assign)({tooltip:u},t)}})):n}function C6(n){var e=n.options,t=e.violin,r=e.xField,i=e.yField,a=e.seriesField,o=e.sizeField,s=e.tooltip,l=Ho(s,[r,i,a,o]),u=l.fields,c=l.formatter;return t?go(Le({},n,{options:{type:"violin",colorField:a,tooltipFields:u,mapping:(0,b.__assign)({tooltip:c},t)}})):n}function M6(n){var e=n.chart,t=n.options,r=t.data,i=t.color,a=t.lineStyle,o=t.lineShape,s=t.point,l=t.seriesField,u=s==null?void 0:s.state;e.data(r);var c=Le({},n,{options:{shapeField:l,line:{color:i,style:a,shape:o},point:s&&(0,b.__assign)({color:i,shape:"circle"},s),label:void 0}}),f=Le({},c,{options:{tooltip:!1,state:u}});return Bh(c),Ao(f),n}function G0(n){var e,t,r=n.options,i=r.xAxis,a=r.yAxis,o=r.xField,s=r.yField,l=r.data;return Xr(Ri((e={},e[o]=i,e[s]=a,e),(t={},t[o]={type:"cat"},t[s]=K1(l,s),t)))(n)}function mC(n){var e=n.chart,t=n.options,r=t.xAxis,i=t.yAxis,a=t.xField,o=t.yField;return r===!1?e.axis(a,!1):e.axis(a,r),i===!1?e.axis(o,!1):e.axis(o,i),n}function xC(n){var e=n.chart,t=n.options,r=t.legend,i=t.seriesField;return r&&i?e.legend(i,r):r===!1&&e.legend(!1),n}function A6(n){var e=n.chart,t=n.options,r=t.label,i=t.yField,a=Xa(e,"line");if(!r)a.label(!1);else{var o=r.callback,s=(0,b.__rest)(r,["callback"]);a.label({fields:[i],callback:o,cfg:(0,b.__assign)({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},xa(s))})}return n}function T6(n){var e=n.chart,t=n.options,r=t.isStack;return r&&(0,v.each)(e.geometries,function(i){i.adjust("stack")}),n}function bC(n){return Xr(M6,G0,T6,Dn,mC,xC,ha,A6,k0,li,Hn,Ai(),Zc)(n)}var I6=Le({},tn.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},legend:{position:"top-left"},isStack:!1}),O6=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.active=function(){var t=this.getView(),r=this.context.event;if(r.data){var i=r.data.items,a=t.geometries.filter(function(o){return o.type==="point"});(0,v.each)(a,function(o){(0,v.each)(o.elements,function(s){var l=(0,v.findIndex)(i,function(u){return u.data===s.data})!==-1;s.setState("active",l)})})}},e.prototype.getView=function(){return this.context.view},e}(Si);Kr("marker-active",O6),An("marker-active",{start:[{trigger:"tooltip:show",action:"marker-active:active"}]});var _C=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="line",t}return e.getDefaultOptions=function(){return I6},e.prototype.changeData=function(t){this.updateOption({data:t});var r=this,i=r.chart,a=r.options;G0({chart:i,options:a}),this.chart.changeData(t)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return bC},e}(tn);function SC(n,e,t,r){var i=(0,v.reduce)(n,function(a,o){var s=o[t],l=a.has(s)?a.get(s):0,u=o[e];return l=og(u)?l+u:l,a.set(s,l),a},new Map);return(0,v.map)(n,function(a){var o,s=a[e],l=a[t],u=og(s)?s/i.get(l):0;return(0,b.__assign)((0,b.__assign)({},a),(o={},o[r]=u,o))})}function sg(n,e,t,r,i){return i?SC(n,e,t,r):n}function P6(n){var e=n.chart,t=n.options,r=t.data,i=t.areaStyle,a=t.color,o=t.point,s=t.line,l=t.isPercent,u=t.xField,c=t.yField,f=t.tooltip,h=t.seriesField,d=t.startOnZero,g=o==null?void 0:o.state,p=sg(r,c,u,c,l);e.data(p);var m=l?(0,b.__assign)({formatter:function(R){return{name:R[h]||R[u],value:(Number(R[c])*100).toFixed(2)+"%"}}},f):f,_=Le({},n,{options:{area:{color:a,style:i},line:s&&(0,b.__assign)({color:a},s),point:o&&(0,b.__assign)({color:a},o),tooltip:m,label:void 0,args:{startOnZero:d}}}),S=Le({},_,{options:{tooltip:!1}}),M=Le({},_,{options:{tooltip:!1,state:g}});return $1(_),Bh(S),Ao(M),n}function D6(n){var e=n.chart,t=n.options,r=t.label,i=t.yField,a=Xa(e,"area");if(!r)a.label(!1);else{var o=r.callback,s=(0,b.__rest)(r,["callback"]);a.label({fields:[i],callback:o,cfg:(0,b.__assign)({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},xa(s))})}return n}function L6(n){var e=n.chart,t=n.options,r=t.isStack,i=t.isPercent,a=t.seriesField;return(i||r)&&a&&(0,v.each)(e.geometries,function(o){o.adjust("stack")}),n}function EC(n){return Xr(P6,G0,L6,Dn,mC,xC,ha,D6,k0,Ai(),li,Hn,Zc)(n)}var R6=Le({},tn.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},isStack:!0,line:{},legend:{position:"top-left"}}),wC=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="area",t}return e.getDefaultOptions=function(){return R6},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.changeData=function(t){this.updateOption({data:t});var r=this.options,i=r.isPercent,a=r.xField,o=r.yField,s=this,l=s.chart,u=s.options;G0({chart:l,options:u}),this.chart.changeData(sg(t,o,a,o,i))},e.prototype.getSchemaAdaptor=function(){return EC},e}(tn);function CC(n,e){return!(0,v.isNumber)(n)||!(0,v.isNumber)(e)?"-":n===e?"100%":n===0?"\u221E":e===0?"-\u221E":(100*e/n).toFixed(2)+"%"}function N6(n,e){return Le({size:e?32:80,spacing:e?8:12,offset:e?32:0,arrow:n.arrow!==!1&&{headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},text:n.text!==!1&&{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)",textAlign:"center",textBaseline:"middle"},formatter:CC}},n)}function z0(n,e){return(0,v.map)(e.getModel().points,function(t){return n.convertPoint(t)})}function k6(n,e,t){var r=n.view,i=n.geometry,a=n.group,o=n.options,s=n.horizontal,l=o.offset,u=o.size,c=o.arrow,f=r.getCoordinate(),h=z0(f,e)[s?3:0],d=z0(f,t)[s?0:3],g=d.y-h.y,p=d.x-h.x;if(typeof c!="boolean"){var m=c.headSize,_=o.spacing,S;s?(p-m)/2<_?(_=Math.max(1,(p-m)/2),S=[[h.x+_,h.y-l],[h.x+_,h.y-l-u],[d.x-_,d.y-l-u/2]]):S=[[h.x+_,h.y-l],[h.x+_,h.y-l-u],[d.x-_-m,d.y-l-u],[d.x-_,d.y-l-u/2],[d.x-_-m,d.y-l]]:(g-m)/2<_?(_=Math.max(1,(g-m)/2),S=[[h.x+l,h.y+_],[h.x+l+u,h.y+_],[d.x+l+u/2,d.y-_]]):S=[[h.x+l,h.y+_],[h.x+l+u,h.y+_],[d.x+l+u,d.y-_-m],[d.x+l+u/2,d.y-_],[d.x+l,d.y-_-m]],a.addShape("polygon",{id:r.id+"-conversion-tag-arrow-"+i.getElementId(e.getModel().mappingData),name:"conversion-tag-arrow",origin:{element:e,nextElement:t},attrs:(0,b.__assign)((0,b.__assign)({},c.style||{}),{points:S})})}}function B6(n,e,t){var r,i,a,o=n.view,s=n.geometry,l=n.group,u=n.options,c=n.field,f=n.horizontal,h=u.offset,d=u.size;if(typeof u.text!="boolean"){var g=o.getCoordinate(),p=((r=u.text)===null||r===void 0?void 0:r.formatter)&&((i=u.text)===null||i===void 0?void 0:i.formatter(e.getData()[c],t.getData()[c])),m=z0(g,e)[f?3:0],_=z0(g,t)[f?0:3],S=l.addShape("text",{id:o.id+"-conversion-tag-text-"+s.getElementId(e.getModel().mappingData),name:"conversion-tag-text",origin:{element:e,nextElement:t},attrs:(0,b.__assign)((0,b.__assign)({},((a=u.text)===null||a===void 0?void 0:a.style)||{}),{text:p,x:f?(m.x+_.x)/2:m.x+h+d/2,y:f?m.y-h-d/2:(m.y+_.y)/2})});if(f){var M=_.x-m.x,R=S.getBBox().width;if(R>M){var F=R/p.length,V=Math.max(1,Math.ceil(M/F)-1),nt=p.slice(0,V)+"...";S.attr("text",nt)}}}}function F6(n,e,t){k6(n,e,t),B6(n,e,t)}function G6(n,e,t){return e===void 0&&(e=!0),t===void 0&&(t=!1),function(r){var i=r.options,a=r.chart,o=i.conversionTag,s=i.theme;return o&&!t&&(a.theme(Le({},(0,v.isObject)(s)?s:Ah(s),{columnWidthRatio:1/3})),a.annotation().shape({render:function(l,u){var c=l.addGroup({id:a.id+"-conversion-tag-group",name:"conversion-tag-group"}),f=(0,v.find)(a.geometries,function(g){return g.type==="interval"}),h={view:u,geometry:f,group:c,field:n,horizontal:e,options:N6(o,e)},d=e?f.elements:f.elements.slice().reverse();(0,v.each)(d,function(g,p){p>0&&F6(h,d[p-1],g)})}})),r}}var lg={hover:"__interval-connected-area-hover__",click:"__interval-connected-area-click__"};An(lg.hover,{start:[{trigger:"interval:mouseenter",action:["element-highlight-by-color:highlight","element-link-by-color:link"]}],end:[{trigger:"interval:mouseleave",action:["element-highlight-by-color:reset","element-link-by-color:unlink"]}]}),An(lg.click,{start:[{trigger:"interval:click",action:["element-highlight-by-color:clear","element-highlight-by-color:highlight","element-link-by-color:clear","element-link-by-color:unlink","element-link-by-color:link"]}],end:[{trigger:"document:mousedown",action:["element-highlight-by-color:clear","element-link-by-color:clear"]}]});function z6(n){return n===void 0&&(n=!1),function(e){var t=e.chart,r=e.options,i=r.connectedArea,a=function(){t.removeInteraction(lg.hover),t.removeInteraction(lg.click)};if(!n&&i){var o=i.trigger||"hover";a(),t.interaction(lg[o])}else a();return e}}function U6(n){var e=n.options,t=e.legend,r=e.seriesField,i=e.isStack;return r?t!==!1&&(t=(0,b.__assign)({position:i?"right-top":"top-left"},t)):t=!1,n.options.legend=t,n}function W6(n){var e=n.chart,t=n.options,r=t.data,i=t.columnStyle,a=t.color,o=t.columnWidthRatio,s=t.isPercent,l=t.xField,u=t.yField,c=t.seriesField,f=t.tooltip;e.data(sg(r,u,l,u,s));var h=s?(0,b.__assign)({formatter:function(g){return{name:g[c]||g[l],value:(Number(g[u])*100).toFixed(2)+"%"}}},f):f,d=Le({},n,{options:{widthRatio:o,tooltip:h,interval:{style:i,color:a}}});return ba(d),n}function Q1(n){var e,t,r=n.options,i=r.xAxis,a=r.yAxis,o=r.xField,s=r.yField,l=r.data,u=r.isPercent,c=u?{max:1,min:0,minLimit:0,maxLimit:1}:{};return Xr(Ri((e={},e[o]=i,e[s]=a,e),(t={},t[o]={type:"cat"},t[s]=(0,b.__assign)((0,b.__assign)({},K1(l,s)),c),t)))(n)}function V6(n){var e=n.chart,t=n.options,r=t.xAxis,i=t.yAxis,a=t.xField,o=t.yField;return r===!1?e.axis(a,!1):e.axis(a,r),i===!1?e.axis(o,!1):e.axis(o,i),n}function X6(n){var e=n.chart,t=n.options,r=t.legend,i=t.seriesField;return r&&i?e.legend(i,r):r===!1&&e.legend(!1),n}function Y6(n){var e=n.chart,t=n.options,r=t.label,i=t.yField,a=t.isRange,o=Xa(e,"interval");if(!r)o.label(!1);else{var s=r.callback,l=(0,b.__rest)(r,["callback"]);o.label({fields:[i],callback:s,cfg:(0,b.__assign)({layout:(l==null?void 0:l.position)?void 0:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]},xa(a?(0,b.__assign)({content:function(u){var c;return(c=u[i])===null||c===void 0?void 0:c.join("-")}},l):l))})}return n}function H6(n){var e=n.chart,t=n.options,r=t.tooltip,i=t.isGroup,a=t.isStack,o=t.groupField,s=t.data,l=t.xField,u=t.yField,c=t.seriesField;if(r===!1)e.tooltip(!1);else{var f=r;if(i&&a){var h=(f==null?void 0:f.formatter)||function(d){return{name:d[c]+" - "+d[o],value:d[u]}};f=(0,b.__assign)((0,b.__assign)({},f),{customItems:function(d){var g=[];return(0,v.each)(d,function(p){var m=(0,v.filter)(s,function(_){return(0,v.isMatch)(_,Wn(p.data,[l,c]))});m.forEach(function(_){g.push((0,b.__assign)((0,b.__assign)((0,b.__assign)({},p),{value:_[u],data:_,mappingData:{_origin:_}}),h(_)))})}),g}})}e.tooltip(f)}return n}function J1(n,e){e===void 0&&(e=!1);var t=n.options,r=t.seriesField;return Xr(U6,Dn,Iu,W6,Q1,V6,X6,H6,k0,E6,Y6,li,Hn,Ai(),G6(t.yField,!e,!!r),z6(!t.isStack),Zc)(n)}var j6=Le({},tn.getDefaultOptions(),{columnWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},interactions:[{type:"active-region"}]}),MC=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="column",t}return e.getDefaultOptions=function(){return j6},e.prototype.changeData=function(t){this.updateOption({data:t});var r=this.options,i=r.yField,a=r.xField,o=r.isPercent,s=this,l=s.chart,u=s.options;Q1({chart:l,options:u}),this.chart.changeData(sg(t,i,a,i,o))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return J1},e}(tn);function AC(n){return n&&n.slice().reverse()}function TC(n){var e=n.chart,t=n.options,r=t.xField,i=t.yField,a=t.xAxis,o=t.yAxis,s=t.barStyle,l=t.barWidthRatio,u=t.label,c=t.data,f=t.seriesField,h=t.isStack,d=t.minBarWidth,g=t.maxBarWidth;u&&!u.position&&(u.position="left",u.layout||(u.layout=[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]));var p=t.legend;f?p!==!1&&(p=(0,b.__assign)({position:h?"top-left":"right-top",reversed:!h},p||{})):p=!1,n.options.legend=p;var m=t.tooltip;return f&&m!==!1&&(m=(0,b.__assign)({reversed:!h},m||{})),n.options.tooltip=m,e.coordinate().transpose(),J1({chart:e,options:(0,b.__assign)((0,b.__assign)({},t),{label:u,xField:i,yField:r,xAxis:o,yAxis:a,columnStyle:s,columnWidthRatio:l,minColumnWidth:d,maxColumnWidth:g,columnBackground:t.barBackground,data:AC(c)})},!0)}var Z6=Le({},tn.getDefaultOptions(),{barWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},interactions:[{type:"active-region"}]}),IC=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="bar",t}return e.getDefaultOptions=function(){return Z6},e.prototype.changeData=function(t){this.updateOption({data:t});var r=this,i=r.chart,a=r.options,o=a.xField,s=a.yField,l=a.isPercent,u=(0,b.__assign)((0,b.__assign)({},a),{xField:s,yField:o});Q1({chart:i,options:u}),i.changeData(sg(AC(t),o,s,o,l))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return TC},e}(tn),OC=Le({},tn.getDefaultOptions(),{legend:{position:"right"},tooltip:{shared:!1,showTitle:!1,showMarkers:!1},label:{layout:{type:"limit-in-plot",cfg:{action:"ellipsis"}}},pieStyle:{stroke:"white",lineWidth:1},statistic:{title:{style:{fontWeight:300,color:"#4B535E",textAlign:"center",fontSize:"20px",lineHeight:1}},content:{style:{fontWeight:"bold",color:"rgba(44,53,66,0.85)",textAlign:"center",fontSize:"32px",lineHeight:1}}},theme:{components:{annotation:{text:{animate:!1}}}}});function K6(n,e){var t=null;return(0,v.each)(n,function(r){typeof r[e]=="number"&&(t+=r[e])}),t}function $6(n,e){var t;switch(n){case"inner":return t="-30%",(0,v.isString)(e)&&e.endsWith("%")?parseFloat(e)*.01>0?t:e:e<0?e:t;case"outer":return t=12,(0,v.isString)(e)&&e.endsWith("%")?parseFloat(e)*.01<0?t:e:e>0?e:t;default:return e}}function U0(n,e){return(0,v.every)(Nh(n,e),function(t){return t[e]===0})}var Q6=[1,0,0,0,1,0,0,0,1];function q1(n,e){var t=e?(0,b.__spreadArrays)(e):(0,b.__spreadArrays)(Q6);return vs.transform(t,n)}var J6=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getActiveElements=function(){var t=vs.getDelegationObject(this.context);if(t){var r=this.context.view,i=t.component,a=t.item,o=i.get("field");if(o){var s=r.geometries[0].elements;return s.filter(function(l){return l.getModel().data[o]===a.value})}}return[]},e.prototype.getActiveElementLabels=function(){var t=this.context.view,r=this.getActiveElements(),i=t.geometries[0].labelsContainer.getChildren();return i.filter(function(a){return r.find(function(o){return(0,v.isEqual)(o.getData(),a.get("data"))})})},e.prototype.transfrom=function(t){t===void 0&&(t=7.5);var r=this.getActiveElements(),i=this.getActiveElementLabels();r.forEach(function(a,o){var s=i[o],l=a.geometry.coordinate;if(l.isPolar&&l.isTransposed){var u=vs.getAngle(a.getModel(),l),c=u.startAngle,f=u.endAngle,h=(c+f)/2,d=t,g=d*Math.cos(h),p=d*Math.sin(h);a.shape.setMatrix(q1([["t",g,p]])),s.setMatrix(q1([["t",g,p]]))}})},e.prototype.active=function(){this.transfrom()},e.prototype.reset=function(){this.transfrom(0)},e}(Si),q6=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getAnnotations=function(t){var r=t||this.context.view;return r.getController("annotation").option},e.prototype.getInitialAnnotation=function(){return this.initialAnnotation},e.prototype.init=function(){var t=this,r=this.context.view;r.removeInteraction("tooltip"),r.on("afterchangesize",function(){var i=t.getAnnotations(r);t.initialAnnotation=i})},e.prototype.change=function(t){var r=this.context,i=r.view,a=r.event;this.initialAnnotation||(this.initialAnnotation=this.getAnnotations());var o=(0,v.get)(a,["data","data"]);if(a.type.match("legend-item")){var s=vs.getDelegationObject(this.context),l=i.getGroupedFields()[0];if(s&&l){var u=s.item;o=i.getData().find(function(h){return h[l]===u.value})}}if(o){var c=(0,v.get)(t,"annotations",[]),f=(0,v.get)(t,"statistic",{});i.getController("annotation").clear(!0),(0,v.each)(c,function(h){typeof h=="object"&&i.annotation()[h.type](h)}),L0(i,{statistic:f,plotType:"pie"},o),i.render(!0)}},e.prototype.reset=function(){var t=this.context.view,r=t.getController("annotation");r.clear(!0);var i=this.getInitialAnnotation();(0,v.each)(i,function(a){t.annotation()[a.type](a)}),t.render(!0)},e}(Si),PC="pie-statistic";Kr(PC,q6),An("pie-statistic-active",{start:[{trigger:"element:mouseenter",action:"pie-statistic:change"}],end:[{trigger:"element:mouseleave",action:"pie-statistic:reset"}]}),Kr("pie-legend",J6),An("pie-legend-active",{start:[{trigger:"legend-item:mouseenter",action:"pie-legend:active"}],end:[{trigger:"legend-item:mouseleave",action:"pie-legend:reset"}]});function tU(n){var e=n.chart,t=n.options,r=t.data,i=t.angleField,a=t.colorField,o=t.color,s=t.pieStyle,l=Nh(r,i);if(U0(l,i)){var u="$$percentage$$";l=l.map(function(f){var h;return(0,b.__assign)((0,b.__assign)({},f),(h={},h[u]=1/l.length,h))}),e.data(l);var c=Le({},n,{options:{xField:"1",yField:u,seriesField:a,isStack:!0,interval:{color:o,style:s},args:{zIndexReversed:!0}}});ba(c)}else{e.data(l);var c=Le({},n,{options:{xField:"1",yField:i,seriesField:a,isStack:!0,interval:{color:o,style:s},args:{zIndexReversed:!0}}});ba(c)}return n}function eU(n){var e,t=n.chart,r=n.options,i=r.meta,a=r.colorField,o=Le({},i);return t.scale(o,(e={},e[a]={type:"cat"},e)),n}function rU(n){var e=n.chart,t=n.options,r=t.radius,i=t.innerRadius,a=t.startAngle,o=t.endAngle;return e.coordinate({type:"theta",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}),n}function nU(n){var e=n.chart,t=n.options,r=t.label,i=t.colorField,a=t.angleField,o=e.geometries[0];if(!r)o.label(!1);else{var s=r.callback,l=(0,b.__rest)(r,["callback"]),u=xa(l);if(u.content){var c=u.content;u.content=function(g,p,m){var _=g[i],S=g[a],M=e.getScaleByField(a),R=M==null?void 0:M.scale(S);return(0,v.isFunction)(c)?c((0,b.__assign)((0,b.__assign)({},g),{percent:R}),p,m):(0,v.isString)(c)?tC(c,{value:S,name:_,percentage:(0,v.isNumber)(R)&&!(0,v.isNil)(S)?(R*100).toFixed(2)+"%":null}):c}}var f={inner:"",outer:"pie-outer",spider:"pie-spider"},h=u.type?f[u.type]:"pie-outer",d=u.layout?(0,v.isArray)(u.layout)?u.layout:[u.layout]:[];u.layout=(h?[{type:h}]:[]).concat(d),o.label({fields:i?[a,i]:[a],callback:s,cfg:(0,b.__assign)((0,b.__assign)({},u),{offset:$6(u.type,u.offset),type:"pie"})})}return n}function DC(n){var e=n.innerRadius,t=n.statistic,r=n.angleField,i=n.colorField,a=n.meta,o=n.locale,s=N0(o);if(e&&t){var l=Le({},OC.statistic,t),u=l.title,c=l.content;return u!==!1&&(u=Le({},{formatter:function(f){return f?f[i]:(0,v.isNil)(u.content)?s.get(["statistic","total"]):u.content}},u)),c!==!1&&(c=Le({},{formatter:function(f,h){var d=f?f[r]:K6(h,r),g=(0,v.get)(a,[r,"formatter"])||function(p){return p};return f||(0,v.isNil)(c.content)?g(d):c.content}},c)),Le({},{statistic:{title:u,content:c}},n)}return n}function LC(n){var e=n.chart,t=n.options,r=DC(t),i=r.innerRadius,a=r.statistic;return e.getController("annotation").clear(!0),Xr(Ai())(n),i&&a&&L0(e,{statistic:a,plotType:"pie"}),n}function iU(n){var e=n.chart,t=n.options,r=t.tooltip,i=t.colorField,a=t.angleField,o=t.data;if(r===!1)e.tooltip(r);else if(e.tooltip(Le({},r,{shared:!1})),U0(o,a)){var s=(0,v.get)(r,"fields"),l=(0,v.get)(r,"formatter");(0,v.isEmpty)((0,v.get)(r,"fields"))&&(s=[i,a],l=l||function(u){return{name:u[i],value:(0,v.toString)(u[a])}}),e.geometries[0].tooltip(s.join("*"),kh(s,l))}return n}function aU(n){var e=n.chart,t=n.options,r=DC(t),i=r.interactions,a=r.statistic,o=r.annotations;return(0,v.each)(i,function(s){var l,u;if(s.enable===!1)e.removeInteraction(s.type);else if(s.type==="pie-statistic-active"){var c=[];((l=s.cfg)===null||l===void 0?void 0:l.start)||(c=[{trigger:"element:mouseenter",action:PC+":change",arg:{statistic:a,annotations:o}}]),(0,v.each)((u=s.cfg)===null||u===void 0?void 0:u.start,function(f){c.push((0,b.__assign)((0,b.__assign)({},f),{arg:{statistic:a,annotations:o}}))}),e.interaction(s.type,Le({},s.cfg,{start:c}))}else e.interaction(s.type,s.cfg||{})}),n}function RC(n){return Xr(tU,eU,Dn,rU,Tu,iU,nU,Iu,LC,aU,Hn)(n)}var NC=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="pie",t}return e.getDefaultOptions=function(){return OC},e.prototype.changeData=function(t){this.chart.emit(_t.BEFORE_CHANGE_DATA,fa.fromData(this.chart,_t.BEFORE_CHANGE_DATA,null));var r=this.options,i=this.options.angleField,a=Nh(r.data,i),o=Nh(t,i);U0(a,i)||U0(o,i)?this.update({data:t}):(this.updateOption({data:t}),this.chart.data(o),LC({chart:this.chart,options:this.options}),this.chart.render(!0)),this.chart.emit(_t.AFTER_CHANGE_DATA,fa.fromData(this.chart,_t.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return RC},e}(tn);function oU(n){var e=n.chart,t=n.options,r=t.data,i=t.sectorStyle,a=t.color;return e.data(r),Xr(ba)(Le({},n,{options:{marginRatio:1,interval:{style:i,color:a}}})),n}function sU(n){var e=n.chart,t=n.options,r=t.label,i=t.xField,a=Xa(e,"interval");if(r===!1)a.label(!1);else if((0,v.isObject)(r)){var o=r.callback,s=r.fields,l=(0,b.__rest)(r,["callback","fields"]),u=l.offset,c=l.layout;(u===void 0||u>=0)&&(c=c?(0,v.isArray)(c)?c:[c]:[],l.layout=(0,v.filter)(c,function(f){return f.type!=="limit-in-shape"}),l.layout.length||delete l.layout),a.label({fields:s||[i],callback:o,cfg:xa(l)})}else Lh(Au.WARN,r===null,"the label option must be an Object."),a.label({fields:[i]});return n}function lU(n){var e=n.chart,t=n.options,r=t.legend,i=t.seriesField;return r===!1?e.legend(!1):i&&e.legend(i,r),n}function uU(n){var e=n.chart,t=n.options,r=t.radius,i=t.innerRadius,a=t.startAngle,o=t.endAngle;return e.coordinate({type:"polar",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}),n}function cU(n){var e,t=n.options,r=t.xAxis,i=t.yAxis,a=t.xField,o=t.yField;return Xr(Ri((e={},e[a]=r,e[o]=i,e)))(n)}function fU(n){var e=n.chart,t=n.options,r=t.xAxis,i=t.yAxis,a=t.xField,o=t.yField;return r?e.axis(a,r):e.axis(a,!1),i?e.axis(o,i):e.axis(o,!1),n}function hU(n){Xr(oU,cU,sU,uU,fU,lU,ha,li,Hn,Dn,Ai(),Iu)(n)}var dU=Le({},tn.getDefaultOptions(),{xAxis:!1,yAxis:!1,legend:{position:"right",offsetX:-10},sectorStyle:{stroke:"#fff",lineWidth:1},label:{layout:{type:"limit-in-shape"}},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]}),vU=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="rose",t}return e.getDefaultOptions=function(){return dU},e.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(t)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return hU},e}(tn);function W0(n){if((0,v.isNumber)(n))return[n,n,n,n];if((0,v.isArray)(n)){var e=n.length;if(e===1)return[n[0],n[0],n[0],n[0]];if(e===2)return[n[0],n[1],n[0],n[1]];if(e===3)return[n[0],n[1],n[2],n[1]];if(e===4)return n}return[0,0,0,0]}function tb(n,e,t){e===void 0&&(e="bottom"),t===void 0&&(t=25);var r=W0(n),i=[e.startsWith("top")?t:0,e.startsWith("right")?t:0,e.startsWith("bottom")?t:0,e.startsWith("left")?t:0];return[r[0]+i[0],r[1]+i[1],r[2]+i[2],r[3]+i[3]]}var gU={font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:3e3};function pU(n,e){return e=(0,v.assign)({},gU,e),yU(n,e)}function yU(n,e){var t=OU();["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval","random"].forEach(function(l){(0,v.isNil)(e[l])||t[l](e[l])}),t.words(n),e.imageMask&&t.createMask(e.imageMask);var r=t.start(),i=r._tags;i.forEach(function(l){l.x+=e.size[0]/2,l.y+=e.size[1]/2});var a=e.size,o=a[0],s=a[1];return i.push({text:"",value:0,x:0,y:0,opacity:0}),i.push({text:"",value:0,x:o,y:s,opacity:0}),i}var eb=Math.PI/180,ug=1<<11>>5,V0=1<<11;function mU(n){return n.text}function xU(){return"serif"}function kC(){return"normal"}function bU(n){return n.value}function _U(){return~~(Math.random()*2)*90}function SU(){return 1}function EU(n,e,t,r){if(!e.sprite){var i=n.context,a=n.ratio;i.clearRect(0,0,(ug<<5)/a,V0/a);var o=0,s=0,l=0,u=t.length;for(--r;++r<u;){e=t[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/a)+"px "+e.font;var c=i.measureText(e.text+"m").width*a,f=e.size<<1;if(e.rotate){var h=Math.sin(e.rotate*eb),d=Math.cos(e.rotate*eb),g=c*d,p=c*h,m=f*d,_=f*h;c=Math.max(Math.abs(g+_),Math.abs(g-_))+31>>5<<5,f=~~Math.max(Math.abs(p+m),Math.abs(p-m))}else c=c+31>>5<<5;if(f>l&&(l=f),o+c>=ug<<5&&(o=0,s+=l,l=0),s+f>=V0)break;i.translate((o+(c>>1))/a,(s+(f>>1))/a),e.rotate&&i.rotate(e.rotate*eb),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=c,e.height=f,e.xoff=o,e.yoff=s,e.x1=c>>1,e.y1=f>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,o+=c}for(var S=i.getImageData(0,0,(ug<<5)/a,V0/a).data,M=[];--r>=0;)if(e=t[r],!!e.hasText){for(var c=e.width,R=c>>5,f=e.y1-e.y0,F=0;F<f*R;F++)M[F]=0;if(o=e.xoff,o==null)return;s=e.yoff;for(var V=0,nt=-1,at=0;at<f;at++){for(var F=0;F<c;F++){var xt=R*at+(F>>5),gt=S[(s+at)*(ug<<5)+(o+F)<<2]?1<<31-F%32:0;M[xt]|=gt,V|=gt}V?nt=at:(e.y0++,f--,at--,s++)}e.y1=e.y0+nt,e.sprite=M.slice(0,(e.y1-e.y0)*R)}}}function wU(n,e,t){t>>=5;for(var r=n.sprite,i=n.width>>5,a=n.x-(i<<4),o=a&127,s=32-o,l=n.y1-n.y0,u=(n.y+n.y0)*t+(a>>5),c,f=0;f<l;f++){c=0;for(var h=0;h<=i;h++)if((c<<s|(h<i?(c=r[f*i+h])>>>o:0))&e[u+h])return!0;u+=t}return!1}function CU(n,e){var t=n[0],r=n[1];e.x+e.x0<t.x&&(t.x=e.x+e.x0),e.y+e.y0<t.y&&(t.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function MU(n,e){return n.x+n.x1>e[0].x&&n.x+n.x0<e[1].x&&n.y+n.y1>e[0].y&&n.y+n.y0<e[1].y}function BC(n){var e=n[0]/n[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function AU(n){var e=4,t=e*n[0]/n[1],r=0,i=0;return function(a){var o=a<0?-1:1;switch(Math.sqrt(1+4*o*a)-o&3){case 0:r+=t;break;case 1:i+=e;break;case 2:r-=t;break;default:i-=e;break}return[r,i]}}function FC(n){for(var e=[],t=-1;++t<n;)e[t]=0;return e}function TU(){return document.createElement("canvas")}function Us(n){return(0,v.isFunction)(n)?n:function(){return n}}var IU={archimedean:BC,rectangular:AU};function OU(){var n=[256,256],e=xU,t=bU,r=kC,i=_U,a=SU,o=BC,s=Math.random,l=[],u=Infinity,c=mU,f=kC,h=TU,d={};d.start=function(){var m=n[0],_=n[1],S=g(h()),M=d.board?d.board:FC((n[0]>>5)*n[1]),R=l.length,F=[],V=l.map(function(gt,Tt,Ct){return gt.text=c.call(this,gt,Tt,Ct),gt.font=e.call(this,gt,Tt,Ct),gt.style=f.call(this,gt,Tt,Ct),gt.weight=r.call(this,gt,Tt,Ct),gt.rotate=i.call(this,gt,Tt,Ct),gt.size=~~t.call(this,gt,Tt,Ct),gt.padding=a.call(this,gt,Tt,Ct),gt}).sort(function(gt,Tt){return Tt.size-gt.size}),nt=-1,at=d.board?[{x:0,y:0},{x:m,y:_}]:null;xt();function xt(){for(var gt=Date.now();Date.now()-gt<u&&++nt<R;){var Tt=V[nt];Tt.x=m*(s()+.5)>>1,Tt.y=_*(s()+.5)>>1,EU(S,Tt,V,nt),Tt.hasText&&p(M,Tt,at)&&(F.push(Tt),at?d.hasImage||CU(at,Tt):at=[{x:Tt.x+Tt.x0,y:Tt.y+Tt.y0},{x:Tt.x+Tt.x1,y:Tt.y+Tt.y1}],Tt.x-=n[0]>>1,Tt.y-=n[1]>>1)}d._tags=F,d._bounds=at}return d};function g(m){m.width=m.height=1;var _=Math.sqrt(m.getContext("2d").getImageData(0,0,1,1).data.length>>2);m.width=(ug<<5)/_,m.height=V0/_;var S=m.getContext("2d");return S.fillStyle=S.strokeStyle="red",S.textAlign="center",{context:S,ratio:_}}function p(m,_,S){for(var M=_.x,R=_.y,F=Math.sqrt(n[0]*n[0]+n[1]*n[1]),V=o(n),nt=s()<.5?1:-1,at,xt=-nt,gt,Tt;(at=V(xt+=nt))&&(gt=~~at[0],Tt=~~at[1],!(Math.min(Math.abs(gt),Math.abs(Tt))>=F));)if(_.x=M+gt,_.y=R+Tt,!(_.x+_.x0<0||_.y+_.y0<0||_.x+_.x1>n[0]||_.y+_.y1>n[1])&&(!S||!wU(_,m,n[0]))&&(!S||MU(_,S))){for(var Ct=_.sprite,te=_.width>>5,Kt=n[0]>>5,ne=_.x-(te<<4),ee=ne&127,ve=32-ee,ie=_.y1-_.y0,ye=void 0,Ee=(_.y+_.y0)*Kt+(ne>>5),we=0;we<ie;we++){ye=0;for(var Pe=0;Pe<=te;Pe++)m[Ee+Pe]|=ye<<ve|(Pe<te?(ye=Ct[we*te+Pe])>>>ee:0);Ee+=Kt}return delete _.sprite,!0}return!1}return d.createMask=function(m){var _=document.createElement("canvas"),S=n[0],M=n[1];if(!(!S||!M)){var R=S>>5,F=FC((S>>5)*M);_.width=S,_.height=M;var V=_.getContext("2d");V.drawImage(m,0,0,m.width,m.height,0,0,S,M);for(var nt=V.getImageData(0,0,S,M).data,at=0;at<M;at++)for(var xt=0;xt<S;xt++){var gt=R*at+(xt>>5),Tt=at*S+xt<<2,Ct=nt[Tt]>=250&&nt[Tt+1]>=250&&nt[Tt+2]>=250,te=Ct?1<<31-xt%32:0;F[gt]|=te}d.board=F,d.hasImage=!0}},d.timeInterval=function(m){u=m==null?Infinity:m},d.words=function(m){l=m},d.size=function(m){n=[+m[0],+m[1]]},d.font=function(m){e=Us(m)},d.fontWeight=function(m){r=Us(m)},d.rotate=function(m){i=Us(m)},d.spiral=function(m){o=IU[m]||m},d.fontSize=function(m){t=Us(m)},d.padding=function(m){a=Us(m)},d.random=function(m){s=Us(m)},d}function GC(n){var e=n.options,t=n.chart,r=t,i=r.width,a=r.height,o=r.padding,s=r.appendPadding,l=r.ele,u=e.data,c=e.imageMask,f=e.wordField,h=e.weightField,d=e.colorField,g=e.wordStyle,p=e.timeInterval,m=e.random,_=e.spiral,S=e.autoFit,M=S===void 0?!0:S,R=e.placementStrategy;if(!u||!u.length)return[];var F=g.fontFamily,V=g.fontWeight,nt=g.padding,at=g.fontSize,xt=NU(u,h),gt=[FU(xt),GU(xt)],Tt=u.map(function(Kt){return{text:Kt[f],value:Kt[h],color:Kt[d],datum:Kt}}),Ct={imageMask:c,font:F,fontSize:RU(at,gt),fontWeight:V,size:PU({width:i,height:a,padding:o,appendPadding:s,autoFit:M,container:l}),padding:nt,timeInterval:p,random:m,spiral:_,rotate:kU(e)};if((0,v.isFunction)(R)){var te=Tt.map(function(Kt,ne,ee){return(0,b.__assign)((0,b.__assign)((0,b.__assign)({},Kt),{hasText:!!Kt.text,font:Us(Ct.font)(Kt,ne,ee),weight:Us(Ct.fontWeight)(Kt,ne,ee),rotate:Us(Ct.rotate)(Kt,ne,ee),size:Us(Ct.fontSize)(Kt,ne,ee),style:"normal"}),R.call(t,Kt,ne,ee))});return te.push({text:"",value:0,x:0,y:0,opacity:0}),te.push({text:"",value:0,x:Ct.size[0],y:Ct.size[1],opacity:0}),te}return pU(Tt,Ct)}function PU(n){var e=n.width,t=n.height,r=n.container,i=n.autoFit,a=n.padding,o=n.appendPadding;if(i){var s=j1(r);e=s.width,t=s.height}e=e||400,t=t||400;var l=DU({padding:a,appendPadding:o}),u=l[0],c=l[1],f=l[2],h=l[3],d=[e-(h+c),t-(u+f)];return d}function DU(n){var e=W0(n.padding),t=W0(n.appendPadding),r=e[0]+t[0],i=e[1]+t[1],a=e[2]+t[2],o=e[3]+t[3];return[r,i,a,o]}function LU(n){return new Promise(function(e,t){if(n instanceof HTMLImageElement){e(n);return}if((0,v.isString)(n)){var r=new Image;r.crossOrigin="anonymous",r.src=n,r.onload=function(){e(r)},r.onerror=function(){Lh(Au.ERROR,!1,"image %s load failed !!!",n),t()};return}Lh(Au.WARN,n===void 0,"The type of imageMask option must be String or HTMLImageElement."),t()})}function RU(n,e){if((0,v.isFunction)(n))return n;if((0,v.isArray)(n)){var t=n[0],r=n[1];if(!e)return function(){return(r+t)/2};var i=e[0],a=e[1];return a===i?function(){return(r+t)/2}:function(s){var l=s.value;return(r-t)/(a-i)*(l-i)+t}}return function(){return n}}function NU(n,e){return n.map(function(t){return t[e]}).filter(function(t){return typeof t=="number"&&!isNaN(t)})}function kU(n){var e=BU(n),t=e.rotation,r=e.rotationSteps;if(!(0,v.isArray)(t))return t;var i=t[0],a=t[1],o=r===1?0:(a-i)/(r-1);return function(){return a===i?a:Math.floor(Math.random()*r)*o}}function BU(n){var e=n.wordStyle.rotationSteps;return e<1&&(Lh(Au.WARN,!1,"The rotationSteps option must be greater than or equal to 1."),e=1),{rotation:n.wordStyle.rotation,rotationSteps:e}}function FU(n){return Math.min.apply(Math,n)}function GU(n){return Math.max.apply(Math,n)}function zU(n){var e=n.chart,t=n.options,r=t.colorField,i=t.color,a=GC(n);e.data(a);var o=Le({},n,{options:{xField:"x",yField:"y",seriesField:r&&"color",point:{color:i,shape:"word-cloud"}}}),s=Ao(o).ext;return s.geometry.label(!1),e.coordinate().reflect("y"),e.axis(!1),n}function UU(n){return Xr(Ri({x:{nice:!1},y:{nice:!1}}))(n)}function WU(n){Xr(zU,UU,ha,Tu,li,Hn,Dn,Iu)(n)}var VU=Le({},tn.getDefaultOptions(),{timeInterval:2e3,legend:!1,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!1,fields:["text","value","color"],formatter:function(n){return{name:n.text,value:n.value}}},wordStyle:{fontFamily:"Verdana",fontWeight:"normal",padding:1,fontSize:[12,60],rotation:[0,90],rotationSteps:2,rotateRatio:.5}});Bn("point","word-cloud",{draw:function(n,e){var t=n.x,r=n.y,i=e.addShape("text",{attrs:(0,b.__assign)((0,b.__assign)({},XU(n)),{x:t,y:r})}),a=n.data.rotate;return typeof a=="number"&&vs.rotate(i,a*Math.PI/180),i}});function XU(n){return{fontSize:n.data.size,text:n.data.text,textAlign:"center",fontFamily:n.data.font,fontWeight:n.data.weight,fill:n.color||n.defaultStyle.stroke,textBaseline:"alphabetic"}}var YU=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="word-cloud",t}return e.getDefaultOptions=function(){return VU},e.prototype.changeData=function(t){this.updateOption({data:t}),this.options.imageMask?this.render():this.chart.changeData(GC({chart:this.chart,options:this.options}))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.render=function(){var t=this;return new Promise(function(r){var i=t.options.imageMask;if(!i){n.prototype.render.call(t),r();return}var a=function(o){t.options=(0,b.__assign)((0,b.__assign)({},t.options),{imageMask:o||null}),n.prototype.render.call(t),r()};LU(i).then(a).catch(a)})},e.prototype.getSchemaAdaptor=function(){return WU},e.prototype.triggerResize=function(){var t=this;this.chart.destroyed||(this.execAdaptor(),window.setTimeout(function(){n.prototype.triggerResize.call(t)}))},e}(tn),Kc=x(89831),HU={exp:Kc.regressionExp,linear:Kc.regressionLinear,loess:Kc.regressionLoess,log:Kc.regressionLog,poly:Kc.regressionPoly,pow:Kc.regressionPow,quad:Kc.regressionQuad};function jU(n,e){var t=10,r={regionStyle:[{position:{start:[n,"max"],end:["max",e]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:["min","max"],end:[n,e]},style:{fill:"#a3dda1",opacity:.4}},{position:{start:["min",e],end:[n,"min"]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:[n,e],end:["max","min"]},style:{fill:"#a3dda1",opacity:.4}}],lineStyle:{stroke:"#9ba29a",lineWidth:1},labelStyle:[{position:["max",e],offsetX:-t,offsetY:-t,style:{textAlign:"right",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",e],offsetX:t,offsetY:-t,style:{textAlign:"left",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",e],offsetX:t,offsetY:t,style:{textAlign:"left",textBaseline:"top",fontSize:14,fill:"#ccc"}},{position:["max",e],offsetX:-t,offsetY:t,style:{textAlign:"right",textBaseline:"top",fontSize:14,fill:"#ccc"}}]};return r}var ZU=function(n,e){var t=e.view,r=e.options,i=r.xField,a=r.yField,o=t.getScaleByField(i),s=t.getScaleByField(a),l=n.map(function(u){return t.getCoordinate().convert({x:o.scale(u[0]),y:s.scale(u[1])})});return h6(l,!1)},KU=function(n){var e=n.options,t=e.xField,r=e.yField,i=e.data,a=e.regressionLine,o=a.type,s=o===void 0?"linear":o,l=a.algorithm,u;if(l)u=(0,v.isArray)(l)?l:l(i);else{var c=HU[s]().x(function(f){return f[t]}).y(function(f){return f[r]});u=c(i)}return ZU(u,n)},$U=function(n){var e,t=n.meta,r=t===void 0?{}:t,i=n.xField,a=n.yField,o=n.data,s=o[0][i],l=o[0][a],u=s>0,c=l>0;function f(h,d){var g=(0,v.get)(r,[h]);function p(_){return(0,v.get)(g,_)}var m={};return d==="x"?((0,v.isNumber)(s)&&((0,v.isNumber)(p("min"))||(m.min=u?0:s*2),(0,v.isNumber)(p("max"))||(m.max=u?s*2:0)),m):((0,v.isNumber)(l)&&((0,v.isNumber)(p("min"))||(m.min=c?0:l*2),(0,v.isNumber)(p("max"))||(m.max=c?l*2:0)),m)}return(0,b.__assign)((0,b.__assign)({},r),(e={},e[i]=(0,b.__assign)((0,b.__assign)({},r[i]),f(i,"x")),e[a]=(0,b.__assign)((0,b.__assign)({},r[a]),f(a,"y")),e))};function zC(n){var e=n.data,t=e===void 0?[]:e,r=n.xField,i=n.yField;if(t.length){for(var a=!0,o=!0,s=t[0],l=void 0,u=1;u<t.length&&(l=t[u],s[r]!==l[r]&&(a=!1),s[i]!==l[i]&&(o=!1),!(!a&&!o));u++)s=l;var c=[];a&&c.push(r),o&&c.push(i);var f=Wn($U(n),c);return Le({},n,{meta:f})}return n}function QU(n){var e=n.chart,t=n.options,r=t.data,i=t.type,a=t.color,o=t.shape,s=t.pointStyle,l=t.shapeField,u=t.colorField,c=t.xField,f=t.yField,h=t.sizeField,d=t.size,g=t.tooltip;h&&(d||(d=[2,8]),(0,v.isNumber)(d)&&(d=[d,d])),g&&!g.fields&&(g=(0,b.__assign)((0,b.__assign)({},g),{fields:[c,f,u,h,l]})),e.data(r),Ao(Le({},n,{options:{seriesField:u,point:{color:a,shape:o,size:d,style:s},tooltip:g}}));var p=Xa(e,"point");return i&&p.adjust(i),n}function X0(n){var e,t=n.options,r=t.xAxis,i=t.yAxis,a=t.xField,o=t.yField,s=zC(t);return Xr(Ri((e={},e[a]=r,e[o]=i,e)))(Le({},n,{options:s}))}function JU(n){var e=n.chart,t=n.options,r=t.xAxis,i=t.yAxis,a=t.xField,o=t.yField;return e.axis(a,r),e.axis(o,i),n}function qU(n){var e=n.chart,t=n.options,r=t.legend,i=t.colorField,a=t.shapeField,o=t.sizeField,s=t.shapeLegend,l=t.sizeLegend,u=r!==!1;return i&&e.legend(i,u?r:!1),a&&(s?e.legend(a,s):e.legend(a,s===!1?!1:r)),o&&e.legend(o,l||!1),!u&&!s&&!l&&e.legend(!1),n}function t8(n){var e=n.chart,t=n.options,r=t.label,i=t.yField,a=Xa(e,"point");if(!r)a.label(!1);else{var o=r.callback,s=(0,b.__rest)(r,["callback"]);a.label({fields:[i],callback:o,cfg:xa(s)})}return n}function e8(n){var e=n.options,t=e.quadrant,r=[];if(t){var i=t.xBaseline,a=i===void 0?0:i,o=t.yBaseline,s=o===void 0?0:o,l=t.labels,u=t.regionStyle,c=t.lineStyle,f=jU(a,s),h=new Array(4).join(",").split(",");h.forEach(function(d,g){r.push((0,b.__assign)((0,b.__assign)({type:"region",top:!1},f.regionStyle[g].position),{style:Le({},f.regionStyle[g].style,u==null?void 0:u[g])}),(0,b.__assign)({type:"text",top:!0},Le({},f.labelStyle[g],l==null?void 0:l[g])))}),r.push({type:"line",top:!1,start:["min",s],end:["max",s],style:Le({},f.lineStyle,c)},{type:"line",top:!1,start:[a,"min"],end:[a,"max"],style:Le({},f.lineStyle,c)})}return Xr(Ai(r))(n)}function r8(n){var e=n.options,t=n.chart,r=e.regressionLine;if(r){var i=r.style,a=r.top,o=a===void 0?!1:a,s={stroke:"#9ba29a",lineWidth:2,opacity:.5};t.annotation().shape({top:o,render:function(l,u){var c=l.addGroup({id:t.id+"-regression-line",name:"regression-line-group"}),f=KU({view:u,options:e});c.addShape("path",{name:"regression-line",attrs:(0,b.__assign)((0,b.__assign)({path:f},s),i)})}})}return n}function n8(n){var e=n.chart,t=n.options,r=t.tooltip;return r?e.tooltip(r):r===!1&&e.tooltip(!1),n}function UC(n){return Xr(QU,X0,JU,qU,n8,t8,li,e8,Hn,Dn,r8)(n)}var i8=Le({},tn.getDefaultOptions(),{size:4,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!0,crosshairs:{type:"xy"}}});An("drag-move",{start:[{trigger:"plot:mousedown",action:"scale-translate:start"}],processing:[{trigger:"plot:mousemove",action:"scale-translate:translate",throttle:{wait:100,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseup",action:"scale-translate:end"}]});var WC=function(n){(0,b.__extends)(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.type="scatter",i.on(_t.BEFORE_RENDER,function(a){var o,s,l=i,u=l.options,c=l.chart;if(((o=a.data)===null||o===void 0?void 0:o.source)===jc.FILTER){var f=i.chart.filterData(i.chart.getData());X0({chart:c,options:(0,b.__assign)((0,b.__assign)({},u),{data:f})})}((s=a.data)===null||s===void 0?void 0:s.source)===jc.RESET&&X0({chart:c,options:u})}),i}return e.getDefaultOptions=function(){return i8},e.prototype.changeData=function(t){this.updateOption(zC(Le({},this.options,{data:t})));var r=this,i=r.options,a=r.chart;X0({chart:a,options:i}),this.chart.changeData(t)},e.prototype.getSchemaAdaptor=function(){return UC},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e}(tn);function a8(n){var e=n.chart,t=n.options,r=t.data,i=t.lineStyle,a=t.color,o=t.point,s=t.area;e.data(r);var l=Le({},n,{options:{line:{style:i,color:a},point:o&&(0,b.__assign)({color:a},o),area:s&&(0,b.__assign)({color:a},s),label:void 0}}),u=Le({},l,{options:{tooltip:!1}}),c=(o==null?void 0:o.state)||t.state,f=Le({},l,{options:{tooltip:!1,state:c}});return Bh(l),Ao(f),$1(u),n}function o8(n){var e,t=n.options,r=t.xAxis,i=t.yAxis,a=t.xField,o=t.yField;return Xr(Ri((e={},e[a]=r,e[o]=i,e)))(n)}function s8(n){var e=n.chart,t=n.options,r=t.radius,i=t.startAngle,a=t.endAngle;return e.coordinate("polar",{radius:r,startAngle:i,endAngle:a}),n}function l8(n){var e=n.chart,t=n.options,r=t.xField,i=t.xAxis,a=t.yField,o=t.yAxis;return e.axis(r,i),e.axis(a,o),n}function u8(n){var e=n.chart,t=n.options,r=t.label,i=t.yField,a=Xa(e,"line");if(!r)a.label(!1);else{var o=r.callback,s=(0,b.__rest)(r,["callback"]);a.label({fields:[i],callback:o,cfg:xa(s)})}return n}function c8(n){return Xr(a8,o8,Dn,s8,l8,Tu,ha,u8,li,Hn,Ai())(n)}var f8=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),e.prototype.getTooltipItems=function(t){var r=this.getTooltipCfg(),i=r.shared,a=r.title,o=n.prototype.getTooltipItems.call(this,t);if(o.length>0){var s=this.view.geometries[0],l=s.dataArray,u=o[0].name,c=[];return l.forEach(function(f){f.forEach(function(h){var d=vs.getTooltipItems(h,s),g=d[0];if(!i&&g&&g.name===u){var p=(0,v.isNil)(a)?u:a;c.push((0,b.__assign)((0,b.__assign)({},g),{name:g.title,title:p}))}else if(i&&g){var p=(0,v.isNil)(a)?g.name||u:a;c.push((0,b.__assign)((0,b.__assign)({},g),{name:g.title,title:p}))}})}),c}return[]},e}(t1);_u("radar-tooltip",f8);var h8=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(){var t=this.context.view;t.removeInteraction("tooltip")},e.prototype.show=function(){var t=this.context.event,r=this.getTooltipController();r.showTooltip({x:t.x,y:t.y})},e.prototype.hide=function(){var t=this.getTooltipController();t.hideTooltip()},e.prototype.getTooltipController=function(){var t=this.context.view;return t.getController("radar-tooltip")},e}(Si);Kr("radar-tooltip",h8),An("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]});var d8=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="radar",t}return e.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(t)},e.prototype.getDefaultOptions=function(){return Le({},n.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},e.prototype.getSchemaAdaptor=function(){return c8},e}(tn),Fh;(function(n){n.Left="Left",n.Right="Right"})(Fh||(Fh={}));var $c;(function(n){n.Line="line",n.Column="column"})($c||($c={}));var jo="left-axes-view",Zo="right-axes-view",VC={nice:!0,label:{autoHide:!0,autoRotate:!1}},v8=(0,b.__assign)((0,b.__assign)({},VC),{position:"left"}),g8=(0,b.__assign)((0,b.__assign)({},VC),{position:"right",grid:null});function rb(n){return(0,v.get)(n,"geometry")===$c.Line}function nb(n){return(0,v.get)(n,"geometry")===$c.Column}function XC(n,e,t){return nb(t)?Le({},{geometry:$c.Column,label:t.label&&t.isRange?{content:function(r){var i;return(i=r[e])===null||i===void 0?void 0:i.join("-")}}:void 0},t):(0,b.__assign)({geometry:$c.Line},t)}function YC(n,e){var t=n[0],r=n[1];if((0,v.isArray)(e)){var i=e[0],a=e[1];return[i,a]}var o=(0,v.get)(e,t),s=(0,v.get)(e,r);return[o,s]}function HC(n,e){return e===Fh.Left?n===!1?!1:Le({},v8,n):e===Fh.Right?n===!1?!1:Le({},g8,n):n}function jC(n){var e=n.view,t=n.geometryOption,r=n.yField,i=n.legend,a=(0,v.get)(i,"marker"),o=Xa(e,rb(t)?"line":"interval");if(!t.seriesField){var s=o.getAttribute("color"),l=s.values[0],u=a||(rb(t)?{symbol:function(f,h,d){return[["M",f-d,h],["L",f+d,h]]},style:{lineWidth:2,r:6,stroke:l}}:{symbol:"square",style:{fill:l}});return[{value:r,name:(0,v.get)(e,"options.scales."+r+".alias")||r,marker:u,isGeometry:!0,viewId:e.id}]}var c=o.getGroupAttributes();return(0,v.reduce)(c,function(f,h){var d=vs.getLegendItems(e,o,h,e.getTheme(),a);return f.concat(d)},[])}function p8(n){var e=n.options,t=n.chart,r=e.geometryOption,i=r.isStack,a=r.color,o=r.seriesField,s=r.groupField,l=r.isGroup,u=["xField","yField"];if(rb(r)){Bh(Le({},n,{options:(0,b.__assign)((0,b.__assign)((0,b.__assign)({},Wn(e,u)),r),{line:{color:r.color,style:r.lineStyle}})})),Ao(Le({},n,{options:(0,b.__assign)((0,b.__assign)((0,b.__assign)({},Wn(e,u)),r),{point:r.point&&(0,b.__assign)({color:a,shape:"circle"},r.point)})}));var c=[];l&&c.push({type:"dodge",dodgeBy:s||o,customOffset:0}),i&&c.push({type:"stack"}),c.length&&(0,v.each)(t.geometries,function(f){f.adjust(c)})}return nb(r)&&ba(Le({},n,{options:(0,b.__assign)((0,b.__assign)((0,b.__assign)({},Wn(e,u)),r),{widthRatio:r.columnWidthRatio,interval:(0,b.__assign)((0,b.__assign)({},Wn(r,["color"])),{style:r.columnStyle})})})),n}var ZC=function(n,e){var t=e[0],r=e[1],i=n.getOptions().data,a=n.getXScale(),o=(0,v.size)(i);if(!(!a||!o)){var s=!0,l=(0,v.valuesOfKey)(i,a.field),u=s?l:l.reverse(),c=(0,v.size)(u),f=Math.floor(t*(c-1)),h=Math.floor(r*(c-1));n.filter(a.field,function(d){var g=u.indexOf(d);return g>-1?x6(g,f,h):!0}),n.render(!0)}};function y8(n){var e,t=n.options,r=t.geometryOptions,i=r===void 0?[]:r,a=t.xField,o=t.yField,s=(0,v.every)(i,function(l){var u=l.geometry;return u===$c.Line||u===void 0});return Le({},{options:{geometryOptions:[],meta:(e={},e[a]={type:"cat",sync:!0,range:s?[0,1]:void 0},e),tooltip:{showMarkers:s,showCrosshairs:s,shared:!0,crosshairs:{type:"x"}},interactions:s?[{type:"legend-visible-filter"}]:[{type:"legend-visible-filter"},{type:"active-region"}],legend:{position:"top-left"}}},n,{options:{yAxis:YC(o,t.yAxis),geometryOptions:[XC(a,o[0],i[0]),XC(a,o[1],i[1])],annotations:YC(o,t.annotations)}})}function m8(n){var e=n.chart,t=n.options,r=t.xField,i=t.yField,a=t.geometryOptions,o=t.data,s=t.tooltip,l={line:0,column:1},u=[(0,b.__assign)((0,b.__assign)({},a[0]),{id:jo,data:o[0],yField:i[0]}),(0,b.__assign)((0,b.__assign)({},a[1]),{id:Zo,data:o[1],yField:i[1]})];return u.sort(function(c,f){return-l[c.geometry]+l[f.geometry]}).forEach(function(c){var f=c.id,h=c.data,d=c.yField,g=nb(c)&&c.isPercent,p=g?SC(h,d,r,d):h,m=e.createView({id:f}).data(p),_=g?(0,b.__assign)({formatter:function(S){return{name:S[c.seriesField]||d,value:(Number(S[d])*100).toFixed(2)+"%"}}},s):s;p8({chart:m,options:{xField:r,yField:d,tooltip:_,geometryOption:c}})}),n}function x8(n){var e,t=n.chart,r=n.options,i=r.geometryOptions,a=((e=t.getTheme())===null||e===void 0?void 0:e.colors10)||[],o=0;return t.once("beforepaint",function(){(0,v.each)(i,function(s,l){var u=dn(t,l===0?jo:Zo);if(!s.color){var c=u.getGroupScales(),f=(0,v.get)(c,[0,"values","length"],1),h=a.slice(o,o+f).concat(l===0?[]:a);u.geometries.forEach(function(d){s.seriesField?d.color(s.seriesField,h):d.color(h[0])}),o+=f}}),t.render(!0)}),n}function b8(n){var e,t,r=n.chart,i=n.options,a=i.xAxis,o=i.yAxis,s=i.xField,l=i.yField;return Ri((e={},e[s]=a,e[l[0]]=o[0],e))(Le({},n,{chart:dn(r,jo)})),Ri((t={},t[s]=a,t[l[1]]=o[1],t))(Le({},n,{chart:dn(r,Zo)})),n}function _8(n){var e=n.chart,t=n.options,r=dn(e,jo),i=dn(e,Zo),a=t.xField,o=t.yField,s=t.xAxis,l=t.yAxis;return e.axis(a,!1),e.axis(o[0],!1),e.axis(o[1],!1),r.axis(a,s),r.axis(o[0],HC(l[0],Fh.Left)),i.axis(a,!1),i.axis(o[1],HC(l[1],Fh.Right)),n}function S8(n){var e=n.chart,t=n.options,r=t.tooltip,i=dn(e,jo),a=dn(e,Zo);return e.tooltip(r),i.tooltip({shared:!0}),a.tooltip({shared:!0}),n}function E8(n){var e=n.chart;return li(Le({},n,{chart:dn(e,jo)})),li(Le({},n,{chart:dn(e,Zo)})),n}function w8(n){var e=n.chart,t=n.options,r=t.annotations,i=(0,v.get)(r,[0]),a=(0,v.get)(r,[1]);return Ai(i)(Le({},n,{chart:dn(e,jo),options:{annotations:i}})),Ai(a)(Le({},n,{chart:dn(e,Zo),options:{annotations:a}})),n}function C8(n){var e=n.chart;return Dn(Le({},n,{chart:dn(e,jo)})),Dn(Le({},n,{chart:dn(e,Zo)})),Dn(n),n}function M8(n){var e=n.chart;return Hn(Le({},n,{chart:dn(e,jo)})),Hn(Le({},n,{chart:dn(e,Zo)})),n}function A8(n){var e=n.chart,t=n.options,r=t.yAxis;return Zc(Le({},n,{chart:dn(e,jo),options:{yAxis:r[0]}})),Zc(Le({},n,{chart:dn(e,Zo),options:{yAxis:r[1]}})),n}function T8(n){var e=n.chart,t=n.options,r=t.legend,i=t.geometryOptions,a=t.yField,o=t.data,s=dn(e,jo),l=dn(e,Zo);return r===!1?e.legend(!1):(0,v.isObject)(r)&&r.custom===!0?e.legend(r):(e.once("beforepaint",function(){var u=o[0].length?jC({view:s,geometryOption:i[0],yField:a[0],legend:r}):[],c=o[1].length?jC({view:l,geometryOption:i[1],yField:a[1],legend:r}):[];e.legend(Le({},r,{custom:!0,items:u.concat(c)}))}),e.on("legend-item:click",function(u){var c=(0,v.get)(u,"gEvent.delegateObject",{});if(c&&c.item){var f=c.item,h=f.value,d=f.isGeometry,g=f.viewId;if(d){var p=(0,v.findIndex)(a,function(S){return S===h});if(p>-1){var m=(0,v.get)(dn(e,g),"geometries");(0,v.each)(m,function(S){S.changeVisible(!c.item.unchecked)})}}else{var _=(0,v.get)(e.getController("legend"),"option.items",[]);(0,v.each)(e.views,function(S){var M=S.getGroupScales();(0,v.each)(M,function(R){R.values&&R.values.indexOf(h)>-1&&S.filter(R.field,function(F){var V=(0,v.find)(_,function(nt){return nt.value===F});return!V.unchecked})}),e.render(!0)})}}})),n}function I8(n){var e=n.chart,t=n.options,r=t.slider,i=dn(e,jo),a=dn(e,Zo);return r&&(i.option("slider",r),i.on("slider:valuechanged",function(o){var s=o.event,l=s.value,u=s.originValue;(0,v.isEqual)(l,u)||ZC(a,l)}),e.once("afterpaint",function(){if(!(0,v.isBoolean)(r)){var o=r.start,s=r.end;(o||s)&&ZC(a,[o,s])}})),n}function O8(n){return Xr(y8,m8,b8,_8,A8,S8,E8,w8,C8,M8,x8,T8,I8)(n)}var P8=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="dual-axes",t}return e.prototype.getDefaultOptions=function(){return Le({},n.prototype.getDefaultOptions.call(this),{yAxis:[],syncViewPadding:!0})},e.prototype.getSchemaAdaptor=function(){return O8},e.prototype.setState=function(t,r,i){i===void 0&&(i=!0);var a=ig(this.chart);(0,v.each)(a,function(o){r(o.getData())&&o.setState(t,i)})},e.prototype.getStates=function(){var t=ig(this.chart),r=[];return(0,v.each)(t,function(i){var a=i.getData(),o=i.getStates();(0,v.each)(o,function(s){r.push({data:a,state:s,geometry:i.geometry,element:i})})}),r},e}(tn),cg="x",Gh="y",KC={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(n,e){return""+(0,v.get)(e,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}},showCrosshairs:!0,crosshairs:{type:"x"}},D8={appendPadding:2,tooltip:(0,b.__assign)({},KC),animation:{}};function Qc(n){return(0,v.map)(n||[],function(e,t){return{x:""+t,y:e}})}function L8(n){var e=n.chart,t=n.options,r=t.data,i=t.color,a=t.areaStyle,o=t.point,s=t.line,l=o==null?void 0:o.state,u=Qc(r);e.data(u);var c=Le({},n,{options:{xField:cg,yField:Gh,area:{color:i,style:a},line:s,point:o}}),f=Le({},c,{options:{tooltip:!1}}),h=Le({},c,{options:{tooltip:!1,state:l}});return $1(c),Bh(f),Ao(h),e.axis(!1),e.legend(!1),n}function zh(n){var e,t,r=n.options,i=r.xAxis,a=r.yAxis,o=r.data,s=Qc(o);return Xr(Ri((e={},e[cg]=i,e[Gh]=a,e),(t={},t[cg]={type:"cat"},t[Gh]=K1(s,Gh),t)))(n)}function $C(n){return Xr(L8,zh,ha,Dn,Hn,Ai())(n)}function R8(n){var e=n.chart,t=n.options,r=t.data,i=t.color,a=t.lineStyle,o=t.point,s=o==null?void 0:o.state,l=Qc(r);e.data(l);var u=Le({},n,{options:{xField:cg,yField:Gh,line:{color:i,style:a},point:o}}),c=Le({},u,{options:{tooltip:!1,state:s}});return Bh(u),Ao(c),e.axis(!1),e.legend(!1),n}function QC(n){return Xr(R8,zh,Dn,ha,Hn,Ai())(n)}var JC=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="tiny-line",t}return e.getDefaultOptions=function(){return D8},e.prototype.changeData=function(t){this.updateOption({data:t});var r=this,i=r.chart,a=r.options;zh({chart:i,options:a}),i.changeData(Qc(t))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return QC},e}(tn);function N8(n){var e=n.chart,t=n.options,r=t.data,i=t.color,a=t.columnStyle,o=t.columnWidthRatio,s=Qc(r);e.data(s);var l=Le({},n,{options:{xField:cg,yField:Gh,widthRatio:o,interval:{style:a,color:i}}});return ba(l),e.axis(!1),e.legend(!1),e.interaction("element-active"),n}function qC(n){return Xr(N8,zh,ha,Dn,Hn,Ai())(n)}var k8={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(n,e){return""+(0,v.get)(e,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}}},B8={appendPadding:2,tooltip:(0,b.__assign)({},k8),animation:{}},t2=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="tiny-column",t}return e.getDefaultOptions=function(){return B8},e.prototype.changeData=function(t){this.updateOption({data:t});var r=this,i=r.chart,a=r.options;zh({chart:i,options:a}),i.changeData(Qc(t))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return qC},e}(tn),F8={appendPadding:2,tooltip:(0,b.__assign)({},KC),color:"l(90) 0:#E5EDFE 1:#ffffff",areaStyle:{fillOpacity:.6},line:{size:1,color:"#5B8FF9"},animation:{}},e2=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="tiny-area",t}return e.getDefaultOptions=function(){return F8},e.prototype.changeData=function(t){this.updateOption({data:t});var r=this,i=r.chart,a=r.options;zh({chart:i,options:a}),i.changeData(Qc(t))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return $C},e}(tn);function r2(n,e){var t=Math.floor(n/e);return[e*t,e*(t+1)]}function G8(n){return Math.ceil(Math.log(n.length)/Math.LN2)+1}function n2(n,e,t,r,i){var a=(0,v.clone)(n);(0,v.sortBy)(a,e);var o=(0,v.valuesOfKey)(a,e),s=(0,v.getRange)(o),l=s.max-s.min,u=t;if(!t&&r&&(u=l/r),!t&&!r){var c=G8(o);u=l/c}var f={},h=(0,v.groupBy)(a,i);(0,v.isEmpty)(h)?(0,v.each)(a,function(g){var p=g[e],m=r2(p,u),_=m[0]+"-"+m[1];(0,v.hasKey)(f,_)||(f[_]={range:m,count:0}),f[_].count+=1}):Object.keys(h).forEach(function(g){(0,v.each)(h[g],function(p){var m=p[e],_=r2(m,u),S=_[0]+"-"+_[1],M=S+"-"+g;(0,v.hasKey)(f,M)||(f[M]={range:_,count:0},f[M][i]=g),f[M].count+=1})});var d=[];return(0,v.each)(f,function(g){d.push(g)}),d}function z8(n){var e=n.chart,t=n.options,r=t.data,i=t.binField,a=t.binNumber,o=t.binWidth,s=t.color,l=t.stackField,u=t.legend,c=t.columnStyle,f=n2(r,i,o,a,l);e.data(f);var h=Le({},n,{options:{xField:"range",yField:"count",seriesField:l,isStack:!0,interval:{color:s,style:c}}});return ba(h),u&&l&&e.legend(l,u),n}function U8(n){var e=n.options,t=e.xAxis,r=e.yAxis;return Xr(Ri({range:t,count:r}))(n)}function W8(n){var e=n.chart,t=n.options,r=t.xAxis,i=t.yAxis;return r===!1?e.axis("range",!1):e.axis("range",r),i===!1?e.axis("count",!1):e.axis("count",i),n}function V8(n){var e=n.chart,t=n.options,r=t.label,i=Xa(e,"interval");if(!r)i.label(!1);else{var a=r.callback,o=(0,b.__rest)(r,["callback"]);i.label({fields:["count"],callback:a,cfg:xa(o)})}return n}function i2(n){return Xr(z8,U8,W8,Dn,Iu,V8,ha,li,Hn)(n)}var X8=Le({},tn.getDefaultOptions(),{columnStyle:{stroke:"#FFFFFF"},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]}),a2=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="histogram",t}return e.getDefaultOptions=function(){return X8},e.prototype.changeData=function(t){this.updateOption({data:t});var r=this.options,i=r.binField,a=r.binNumber,o=r.binWidth,s=r.stackField;this.chart.changeData(n2(t,i,o,a,s))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return i2},e}(tn),o2=["#FAAD14","#E8EDF3"],Y8={percent:.2,color:o2,animation:{}};function ib(n){var e=(0,v.clamp)(og(n)?n:0,0,1);return[{type:"current",percent:e},{type:"target",percent:1-e}]}function s2(n){var e=n.chart,t=n.options,r=t.percent,i=t.progressStyle,a=t.color,o=t.barWidthRatio;e.data(ib(r));var s=Le({},n,{options:{xField:"1",yField:"percent",seriesField:"type",isStack:!0,widthRatio:o,interval:{style:i,color:(0,v.isString)(a)?[a,o2[1]]:a},args:{zIndexReversed:!0}}});return ba(s),e.tooltip(!1),e.axis(!1),e.legend(!1),n}function H8(n){var e=n.chart;return e.coordinate("rect").transpose(),n}function l2(n){return Xr(s2,Ri({}),H8,Hn,Dn,Ai())(n)}var u2=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="process",t}return e.getDefaultOptions=function(){return Y8},e.prototype.changeData=function(t){this.updateOption({percent:t}),this.chart.changeData(ib(t))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return l2},e}(tn);function j8(n){var e=n.chart,t=n.options,r=t.innerRadius,i=t.radius;return e.coordinate("theta",{innerRadius:r,radius:i}),n}function c2(n,e){var t=n.chart,r=n.options,i=r.innerRadius,a=r.statistic,o=r.percent,s=r.meta;if(t.getController("annotation").clear(!0),i&&a){var l=(0,v.get)(s,["percent","formatter"])||function(c){return(c*100).toFixed(2)+"%"},u=a.content;u&&(u=Le({},u,{content:(0,v.isNil)(u.content)?l(o):u.content})),L0(t,{statistic:(0,b.__assign)((0,b.__assign)({},a),{content:u}),plotType:"ring-progress"},{percent:o})}return e&&t.render(!0),n}function f2(n){return Xr(s2,Ri({}),j8,c2,Hn,Dn,Ai())(n)}var Z8={percent:.2,innerRadius:.8,radius:.98,color:["#FAAD14","#E8EDF3"],statistic:{title:!1,content:{style:{fontSize:"14px",fontWeight:300,fill:"#4D4D4D",textAlign:"center",textBaseline:"middle"}}},animation:{}},h2=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="ring-process",t}return e.getDefaultOptions=function(){return Z8},e.prototype.changeData=function(t){this.chart.emit(_t.BEFORE_CHANGE_DATA,fa.fromData(this.chart,_t.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t}),this.chart.data(ib(t)),c2({chart:this.chart,options:this.options},!0),this.chart.emit(_t.AFTER_CHANGE_DATA,fa.fromData(this.chart,_t.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return f2},e}(tn);function K8(n){var e=n.chart,t=n.options,r=t.data,i=t.type,a=t.xField,o=t.yField,s=t.colorField,l=t.sizeField,u=t.sizeRatio,c=t.shape,f=t.color,h=t.tooltip,d=t.heatmapStyle;e.data(r);var g="polygon";i==="density"&&(g="heatmap");var p=Ho(h,[a,o,s]),m=p.fields,_=p.formatter,S=1;return(u||u===0)&&(!c&&!l?console.warn("sizeRatio is not in effect: Must define shape or sizeField first"):u<0||u>1?console.warn("sizeRatio is not in effect: It must be a number in [0,1]"):S=u),go(Le({},n,{options:{type:g,colorField:s,tooltipFields:m,shapeField:l||"",label:void 0,mapping:{tooltip:_,shape:c&&(l?function(M){var R=r.map(function(nt){return nt[l]}),F=Math.min.apply(Math,R),V=Math.max.apply(Math,R);return[c,((0,v.get)(M,l)-F)/(V-F),S]}:function(){return[c,1,S]}),color:f||s&&e.getTheme().sequenceColors.join("-"),style:d}}})),n}function $8(n){var e,t=n.options,r=t.xAxis,i=t.yAxis,a=t.xField,o=t.yField;return Xr(Ri((e={},e[a]=r,e[o]=i,e)))(n)}function Q8(n){var e=n.chart,t=n.options,r=t.xAxis,i=t.yAxis,a=t.xField,o=t.yField;return r===!1?e.axis(a,!1):e.axis(a,r),i===!1?e.axis(o,!1):e.axis(o,i),n}function J8(n){var e=n.chart,t=n.options,r=t.label,i=t.colorField,a=t.type,o=Xa(e,a==="density"?"heatmap":"polygon");if(!r)o.label(!1);else if(i){var s=r.callback,l=(0,b.__rest)(r,["callback"]);o.label({fields:[i],callback:s,cfg:xa(l)})}return n}function q8(n){var e=n.chart,t=n.options,r=t.coordinate,i=t.reflect;return r&&e.coordinate({type:r.type||"rect",cfg:r.cfg}),i&&e.coordinate().reflect(i),n}function tW(n){return Xr(Dn,$8,q8,K8,Q8,Tu,ha,J8,Ai(),li,Hn,Iu)(n)}var eW=Le({},tn.getDefaultOptions(),{type:"polygon",legend:!1,coordinate:{type:"rect"},xAxis:{tickLine:null,line:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}},yAxis:{grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}});Bn("polygon","circle",{draw:function(n,e){var t,r,i=n.x,a=n.y,o=this.parsePoints(n.points),s=Math.abs(o[2].x-o[1].x),l=Math.abs(o[1].y-o[0].y),u=Math.min(s,l)/2,c=Number(n.shape[1]),f=Number(n.shape[2]),h=Math.sqrt(f),d=u*h*Math.sqrt(c),g=((t=n.style)===null||t===void 0?void 0:t.fill)||n.color||((r=n.defaultStyle)===null||r===void 0?void 0:r.fill),p=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)((0,b.__assign)({x:i,y:a,r:d},n.defaultStyle),n.style),{fill:g})});return p}}),Bn("polygon","square",{draw:function(n,e){var t,r,i=n.x,a=n.y,o=this.parsePoints(n.points),s=Math.abs(o[2].x-o[1].x),l=Math.abs(o[1].y-o[0].y),u=Math.min(s,l),c=Number(n.shape[1]),f=Number(n.shape[2]),h=Math.sqrt(f),d=u*h*Math.sqrt(c),g=((t=n.style)===null||t===void 0?void 0:t.fill)||n.color||((r=n.defaultStyle)===null||r===void 0?void 0:r.fill),p=e.addShape("rect",{attrs:(0,b.__assign)((0,b.__assign)((0,b.__assign)({x:i-d/2,y:a-d/2,width:d,height:d},n.defaultStyle),n.style),{fill:g})});return p}});var rW=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="heatmap",t}return e.getDefaultOptions=function(){return eW},e.prototype.getSchemaAdaptor=function(){return tW},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e}(tn),ab,Uh="$$range$$",nW="low-q1-median-q3-high",iW="$$y_outliers$$",d2="outliers_view",aW=Le({},tn.getDefaultOptions(),{meta:(ab={},ab[Uh]={min:0,alias:nW},ab),interactions:[{type:"active-region"}],tooltip:{showMarkers:!1,shared:!0},boxStyle:{lineWidth:1}}),v2=function(n,e){var t=n;if(Array.isArray(e)){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4];t=(0,v.map)(n,function(l){return l[Uh]=[l[r],l[i],l[a],l[o],l[s]],l})}return t};function oW(n){var e=n.chart,t=n.options,r=t.xField,i=t.yField,a=t.groupField,o=t.color,s=t.tooltip,l=t.boxStyle;e.data(v2(t.data,i));var u=(0,v.isArray)(i)?Uh:i,c=i?(0,v.isArray)(i)?i:[i]:[],f=s;f!==!1&&(f=Le({},{fields:(0,v.isArray)(i)?i:[]},f));var h=yC(Le({},n,{options:{xField:r,yField:u,seriesField:a,tooltip:f,rawFields:c,schema:{shape:"box",color:o,style:l}}})).ext;return a&&h.geometry.adjust("dodge"),n}function sW(n){var e=n.chart,t=n.options,r=t.xField,i=t.data,a=t.outliersField,o=t.outliersStyle,s=t.padding;if(!a)return n;var l=e.createView({padding:s,id:d2});return l.data(i),Ao({chart:l,options:{xField:r,yField:a,point:{shape:"circle",style:o}}}),l.axis(!1),n}function lW(n){var e,t,r=n.chart,i=n.options,a=i.meta,o=i.xAxis,s=i.yAxis,l=i.xField,u=i.yField,c=i.outliersField,f=Array.isArray(u)?Uh:u,h={};if(c){var d=iW;h=(e={},e[c]={sync:d,nice:!0},e[f]={sync:d,nice:!0},e)}var g=Le(h,a,(t={},t[l]=Wn(o,vo),t[f]=Wn(s,vo),t));return r.scale(g),n}function uW(n){var e=n.chart,t=n.options,r=t.xAxis,i=t.yAxis,a=t.xField,o=t.yField,s=Array.isArray(o)?Uh:o;return r===!1?e.axis(a,!1):e.axis(a,r),i===!1?e.axis(Uh,!1):e.axis(s,i),n}function cW(n){var e=n.chart,t=n.options,r=t.legend,i=t.groupField;return i?r?e.legend(i,r):e.legend(i,{position:"bottom"}):e.legend(!1),n}function fW(n){return Xr(oW,sW,lW,uW,cW,ha,li,Hn,Dn)(n)}var hW=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="box",t}return e.getDefaultOptions=function(){return aW},e.prototype.changeData=function(t){this.updateOption({data:t});var r=this.options.yField,i=this.chart.views.find(function(a){return a.id===d2});i&&i.data(t),this.chart.changeData(v2(t,r))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return fW},e}(tn),dW=x(89081),vW=x.n(dW);function g2(n,e){var t=n.length*e;if(n.length===0)throw new Error("quantile requires at least one data point.");if(e<0||e>1)throw new Error("quantiles must be between 0 and 1");return e===1?n[n.length-1]:e===0?n[0]:t%1!=0?n[Math.ceil(t)-1]:n.length%2==0?(n[t-1]+n[t])/2:n[t]}function fg(n,e,t){var r=n[e];n[e]=n[t],n[t]=r}function Y0(n,e,t,r){for(t=t||0,r=r||n.length-1;r>t;){if(r-t>600){var i=r-t+1,a=e-t+1,o=Math.log(i),s=.5*Math.exp(2*o/3),l=.5*Math.sqrt(o*s*(i-s)/i);a-i/2<0&&(l*=-1);var u=Math.max(t,Math.floor(e-a*s/i+l)),c=Math.min(r,Math.floor(e+(i-a)*s/i+l));Y0(n,e,u,c)}var f=n[e],h=t,d=r;for(fg(n,t,e),n[r]>f&&fg(n,t,r);h<d;){for(fg(n,h,d),h++,d--;n[h]<f;)h++;for(;n[d]>f;)d--}n[t]===f?fg(n,t,d):(d++,fg(n,d,r)),d<=e&&(t=d+1),e<=d&&(r=d-1)}}function hg(n,e){var t=n.slice();if(Array.isArray(e)){gW(t,e);for(var r=[],i=0;i<e.length;i++)r[i]=g2(t,e[i]);return r}else{var a=y2(t.length,e);return p2(t,a,0,t.length-1),g2(t,e)}}function p2(n,e,t,r){e%1==0?Y0(n,e,t,r):(e=Math.floor(e),Y0(n,e,t,r),Y0(n,e+1,e+1,r))}function gW(n,e){for(var t=[0],r=0;r<e.length;r++)t.push(y2(n.length,e[r]));t.push(n.length-1),t.sort(pW);for(var i=[0,t.length-1];i.length;){var a=Math.ceil(i.pop()),o=Math.floor(i.pop());if(!(a-o<=1)){var s=Math.floor((o+a)/2);p2(n,t[s],Math.floor(t[o]),Math.ceil(t[a])),i.push(o,s,s,a)}}}function pW(n,e){return n-e}function y2(n,e){var t=n*e;return e===1?n-1:e===0?0:t%1!=0?Math.ceil(t)-1:n%2==0?t-.5:t}var m2=function(n){return{low:(0,v.min)(n),high:(0,v.max)(n),q1:hg(n,.25),q3:hg(n,.75),median:hg(n,[.5]),minMax:[(0,v.min)(n),(0,v.max)(n)],quantile:[hg(n,.25),hg(n,.75)]}},x2=function(n,e){var t=vW().create(n,e);return{violinSize:t.map(function(r){return r.y}),violinY:t.map(function(r){return r.x})}},b2=function(n){var e=n.xField,t=n.yField,r=n.seriesField,i=n.data,a=n.kde,o={min:a.min,max:a.max,size:a.sampleSize,width:a.width};if(!r){var s=(0,v.groupBy)(i,e);return Object.keys(s).map(function(c){var f=s[c],h=f.map(function(d){return d[t]});return(0,b.__assign)((0,b.__assign)({x:c},x2(h,o)),m2(h))})}var l=[],u=(0,v.groupBy)(i,r);return Object.keys(u).forEach(function(c){var f=(0,v.groupBy)(u[c],e);return Object.keys(f).forEach(function(h){var d,g=f[h],p=g.map(function(m){return m[t]});l.push((0,b.__assign)((0,b.__assign)((d={x:h},d[r]=c,d),x2(p,o)),m2(p)))})}),l},Ko="x",Jc="violinY",yW="violinSize",_2="minMax",S2="quantile",E2="median",ob="violin_view",mW="min_max_view",xW="quantile_view",bW="median_view",_W=Le({},tn.getDefaultOptions(),{syncViewPadding:!0,kde:{type:"triangular",sampleSize:32,width:3},violinStyle:{lineWidth:1,fillOpacity:.3,strokeOpacity:.75},xAxis:{grid:{line:null},tickLine:{alignTick:!1}},yAxis:{grid:{line:{style:{lineWidth:.5,lineDash:[4,4]}}}},legend:{position:"top-left"},tooltip:{showMarkers:!1}}),H0=["low","high","q1","q3","median"],j0=[{type:"dodge",marginRatio:1/32}];function SW(n){var e=n.chart,t=n.options;return e.data(b2(t)),n}function EW(n){var e=n.chart,t=n.options,r=t.seriesField,i=t.color,a=t.shape,o=a===void 0?"violin":a,s=t.violinStyle,l=t.tooltip,u=e.createView({id:ob});return C6({chart:u,options:{xField:Ko,yField:Jc,seriesField:r||Ko,sizeField:yW,tooltip:(0,b.__assign)({fields:H0},l),violin:{style:s,color:i,shape:o}}}),u.geometries[0].adjust(j0),n}function wW(n){var e=n.chart,t=n.options,r=t.seriesField,i=t.color,a=t.tooltip,o=t.box;if(o===!1)return n;var s=e.createView({id:mW});ba({chart:s,options:{xField:Ko,yField:_2,seriesField:r||Ko,tooltip:(0,b.__assign)({fields:H0},a),interval:{color:i,size:1,style:{lineWidth:0}}}}),s.geometries[0].adjust(j0);var l=e.createView({id:xW});ba({chart:l,options:{xField:Ko,yField:S2,seriesField:r||Ko,tooltip:(0,b.__assign)({fields:H0},a),interval:{color:i,size:8,style:{fillOpacity:1}}}}),l.geometries[0].adjust(j0);var u=e.createView({id:bW});return Ao({chart:u,options:{xField:Ko,yField:E2,seriesField:r||Ko,tooltip:(0,b.__assign)({fields:H0},a),point:{color:i,size:1,style:{fill:"white",lineWidth:0}}}}),u.geometries[0].adjust(j0),l.axis(!1),s.axis(!1),u.axis(!1),u.legend(!1),s.legend(!1),l.legend(!1),n}function CW(n){var e,t=n.chart,r=n.options,i=r.meta,a=r.xAxis,o=r.yAxis,s={},l=Le(s,i,(e={},e[Ko]=(0,b.__assign)((0,b.__assign)({sync:!0},Wn(a,vo)),{type:"cat"}),e[Jc]=(0,b.__assign)({sync:!0},Wn(o,vo)),e[_2]=(0,b.__assign)({sync:Jc},Wn(o,vo)),e[S2]=(0,b.__assign)({sync:Jc},Wn(o,vo)),e[E2]=(0,b.__assign)({sync:Jc},Wn(o,vo)),e));return t.scale(l),n}function MW(n){var e=n.chart,t=n.options,r=t.xAxis,i=t.yAxis,a=dn(e,ob);return r===!1?a.axis(Ko,!1):a.axis(Ko,r),i===!1?a.axis(Jc,!1):a.axis(Jc,i),e.axis(!1),n}function AW(n){var e=n.chart,t=n.options,r=t.legend,i=t.seriesField,a=t.shape;if(r===!1)e.legend(!1);else{var o=i||Ko,s=(0,v.omit)(r,["selected"]);(!a||!a.startsWith("hollow"))&&((0,v.get)(s,["marker","style","lineWidth"])||(0,v.set)(s,["marker","style","lineWidth"],0)),e.legend(o,s),(0,v.get)(r,"selected")&&(0,v.each)(e.views,function(l){return l.legend(o,r)})}return n}function TW(n){var e=n.chart,t=dn(e,ob);return Ai()((0,b.__assign)((0,b.__assign)({},n),{chart:t})),n}function IW(n){var e=n.chart,t=n.options,r=t.animation;return(0,v.each)(e.views,function(i){typeof r=="boolean"?i.animate(r):i.animate(!0),(0,v.each)(i.geometries,function(a){a.animate(r)})}),n}function OW(n){return Xr(Dn,SW,EW,wW,CW,ha,MW,AW,li,TW,IW)(n)}var PW=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="violin",t}return e.getDefaultOptions=function(){return _W},e.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(b2(this.options))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return OW},e}(tn),dg="$$stock-range$$",Z0="trend",w2="up",C2="down",DW={showMarkers:!1,showCrosshairs:!0,shared:!0,crosshairs:{type:"xy",follow:!0,text:function(n,e,t){var r;if(n==="x"){var i=t[0];r=i?i.title:e}else r=e;return{position:n==="y"?"start":"end",content:r,style:{fill:"#dfdfdf"}}},textBackground:{padding:[2,4],style:{fill:"#666"}}}},LW=Le({},tn.getDefaultOptions(),{tooltip:DW,interactions:[{type:"tooltip"}],legend:{position:"top-left"},risingFill:"#ef5350",fallingFill:"#26a69a"});function M2(n,e){return(0,v.map)(n,function(t){if((0,v.isArray)(e)){var r=e[0],i=e[1],a=e[2],o=e[3];t[Z0]=t[r]<=t[i]?w2:C2,t[dg]=[t[r],t[i],t[a],t[o]]}return t})}function RW(n){var e=n.chart,t=n.options,r=t.yField,i=t.data,a=t.risingFill,o=t.fallingFill,s=t.tooltip,l=t.stockStyle;e.data(M2(i,r));var u=s;return u!==!1&&(u=Le({},{fields:r},u)),yC(Le({},n,{options:{schema:{shape:"candle",color:[a,o],style:l},yField:dg,seriesField:Z0,rawFields:r,tooltip:u}})),n}function NW(n){var e,t,r=n.chart,i=n.options,a=i.meta,o=i.xAxis,s=i.yAxis,l=i.xField,u=(e={},e[l]={type:"timeCat",tickCount:6},e[Z0]={values:[w2,C2]},e),c=Le(u,a,(t={},t[l]=Wn(o,vo),t[dg]=Wn(s,vo),t));return r.scale(c),n}function kW(n){var e=n.chart,t=n.options,r=t.xAxis,i=t.yAxis,a=t.xField;return r===!1?e.axis(a,!1):e.axis(a,r),i===!1?e.axis(dg,!1):e.axis(dg,i),n}function BW(n){var e=n.chart,t=n.options,r=t.tooltip;return r!==!1?e.tooltip(r):e.tooltip(!1),n}function FW(n){var e=n.chart,t=n.options,r=t.legend;return r?e.legend(Z0,r):r===!1&&e.legend(!1),n}function GW(n){Xr(Dn,RW,NW,kW,BW,FW,li,Hn,Ai(),k0)(n)}var zW=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="stock",t}return e.getDefaultOptions=function(){return LW},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return GW},e.prototype.changeData=function(t){this.updateOption({data:t});var r=this.options.yField;this.chart.changeData(M2(t,r))},e}(tn),sb,Ou="$$percentage$$",qc="$$mappingValue$$",Ol="$$conversion$$",lb="$$totalPercentage$$",vg="$$x$$",gg="$$y$$",UW={appendPadding:[0,80],minSize:0,maxSize:1,meta:(sb={},sb[qc]={min:0,max:1,nice:!1},sb),label:{style:{fill:"#fff",fontSize:12}},tooltip:{showTitle:!1,showMarkers:!1,shared:!1},conversionTag:{offsetX:10,offsetY:0,style:{fontSize:12,fill:"rgba(0,0,0,0.45)"}}};function A2(n,e,t){var r=[],i=t.yField,a=t.maxSize,o=t.minSize,s=(0,v.get)((0,v.maxBy)(e,i),[i]),l=(0,v.isNumber)(a)?a:1,u=(0,v.isNumber)(o)?o:0;return r=(0,v.map)(n,function(c,f){var h=(c[i]||0)/s;return c[Ou]=h,c[qc]=(l-u)*h+u,c[Ol]=[(0,v.get)(n,[f-1,i]),c[i]],c}),r}function ub(n){return function(e){var t=e.chart,r=e.options,i=r.conversionTag,a=t.getOptions().data;if(i){var o=i.formatter;a.forEach(function(s,l){if(!(l<=0)){var u=n(s,l,a,{top:!0,text:{content:(0,v.isFunction)(o)?o(s,a):o,offsetX:i.offsetX,offsetY:i.offsetY,position:"end",autoRotate:!1,style:(0,b.__assign)({textAlign:"start",textBaseline:"middle"},i.style)}});t.annotation().line(u)}})}return e}}function WW(n){var e=n.chart,t=n.options,r=t.data,i=r===void 0?[]:r,a=t.yField,o=t.maxSize,s=t.minSize,l=A2(i,i,{yField:a,maxSize:o,minSize:s});return e.data(l),n}function VW(n){var e=n.chart,t=n.options,r=t.xField,i=t.yField,a=t.color,o=t.tooltip,s=t.label,l=t.shape,u=l===void 0?"funnel":l,c=t.funnelStyle,f=Ho(o,[r,i]),h=f.fields,d=f.formatter;go({chart:e,options:{type:"interval",xField:r,yField:qc,colorField:r,tooltipFields:(0,v.isArray)(h)&&h.concat([Ou,Ol]),mapping:{shape:u,tooltip:d,color:a,style:c},label:s}});var g=Xa(n.chart,"interval");return g.adjust("symmetric"),n}function XW(n){var e=n.chart,t=n.options,r=t.isTransposed;return e.coordinate({type:"rect",actions:r?[]:[["transpose"],["scale",1,-1]]}),n}function YW(n){var e=n.options,t=e.maxSize,r=function(i,a,o,s){var l=t-(t-i[qc])/2;return(0,b.__assign)((0,b.__assign)({},s),{start:[a-.5,l],end:[a-.5,l+.05]})};return ub(r)(n),n}function T2(n){return Xr(WW,VW,XW,YW)(n)}function HW(n){var e,t=n.chart,r=n.options,i=r.data,a=i===void 0?[]:i,o=r.yField;return t.data(a),t.scale((e={},e[o]={sync:!0},e)),n}function jW(n){var e=n.chart,t=n.options,r=t.data,i=t.xField,a=t.yField,o=t.color,s=t.compareField,l=t.isTransposed,u=t.tooltip,c=t.maxSize,f=t.minSize,h=t.label,d=t.funnelStyle;return e.facet("mirror",{fields:[s],transpose:!l,padding:l?0:[32,0,0,0],eachView:function(g,p){var m=l?p.rowIndex:p.columnIndex;l||g.coordinate({type:"rect",actions:[["transpose"],["scale",m===0?-1:1,-1]]});var _=A2(p.data,r,{yField:a,maxSize:c,minSize:f});g.data(_);var S=Ho(u,[i,a,s]),M=S.fields,R=S.formatter,F=l?{offset:m===0?10:-23,position:m===0?"bottom":"top"}:{offset:10,position:"left",style:{textAlign:m===0?"end":"start"}};go({chart:g,options:{type:"interval",xField:i,yField:qc,colorField:i,tooltipFields:(0,v.isArray)(M)&&M.concat([Ou,Ol]),mapping:{shape:"funnel",tooltip:R,color:o,style:d},label:h===!1?!1:Le({},F,h)}})}}),n}function ZW(n){var e=n.chart,t=n.options,r=t.conversionTag,i=t.isTransposed;return e.once("beforepaint",function(){e.views.forEach(function(a,o){var s=function(l,u,c,f){var h=o===0?-1:1;return Le({},f,{start:[u-.5,l[qc]],end:[u-.5,l[qc]+.05],text:i?{style:{textAlign:"start"}}:{offsetX:r!==!1?h*r.offsetX:0,style:{textAlign:o===0?"end":"start"}}})};ub(s)(Le({},{chart:a,options:t}))})}),n}function KW(n){return Xr(HW,jW,ZW)(n)}function $W(n){var e,t=n.chart,r=n.options,i=r.data,a=i===void 0?[]:i,o=r.yField;return t.data(a),t.scale((e={},e[o]={sync:!0},e)),n}function QW(n){var e=n.chart,t=n.options,r=t.seriesField,i=t.isTransposed;return e.facet("rect",{fields:[r],padding:[i?0:32,10,0,10],eachView:function(a,o){T2(Le({},n,{chart:a,options:{data:o.data}}))}}),n}function JW(n){return Xr($W,QW)(n)}function qW(n){var e=n.chart,t=n.options,r=t.data,i=r===void 0?[]:r,a=t.yField,o=(0,v.reduce)(i,function(u,c){return u+(c[a]||0)},0),s=(0,v.maxBy)(i,a)[a],l=(0,v.map)(i,function(u,c){var f=[],h=[];if(u[lb]=(u[a]||0)/o,c){var d=i[c-1][vg],g=i[c-1][gg];f[0]=d[3],h[0]=g[3],f[1]=d[2],h[1]=g[2]}else f[0]=-.5,h[0]=1,f[1]=.5,h[1]=1;return h[2]=h[1]-u[lb],f[2]=(h[2]+1)/4,h[3]=h[2],f[3]=-f[2],u[vg]=f,u[gg]=h,u[Ou]=(u[a]||0)/s,u[Ol]=[(0,v.get)(i,[c-1,a]),u[a]],u});return e.data(l),n}function tV(n){var e=n.chart,t=n.options,r=t.xField,i=t.yField,a=t.color,o=t.tooltip,s=t.label,l=t.funnelStyle,u=Ho(o,[r,i]),c=u.fields,f=u.formatter;return go({chart:e,options:{type:"polygon",xField:vg,yField:gg,colorField:r,tooltipFields:(0,v.isArray)(c)&&c.concat([Ou,Ol]),label:s,mapping:{tooltip:f,color:a,style:l}}}),n}function eV(n){var e=n.chart,t=n.options,r=t.isTransposed;return e.coordinate({type:"rect",actions:r?[["transpose"],["reflect","x"]]:[]}),n}function rV(n){var e=function(t,r,i,a){return(0,b.__assign)((0,b.__assign)({},a),{start:[t[vg][1],t[gg][1]],end:[t[vg][1]+.05,t[gg][1]]})};return ub(e)(n),n}function nV(n){return Xr(qW,tV,eV,rV)(n)}function iV(n){var e=n.options,t=e.compareField,r=e.xField,i=e.yField,a=e.locale,o=e.funnelStyle,s=N0(a),l={label:t?{fields:[r,i,t,Ou,Ol],formatter:function(c){return""+c[i]}}:{fields:[r,i,Ou,Ol],offset:0,position:"middle",formatter:function(c){return c[r]+" "+c[i]}},tooltip:{title:r,formatter:function(c){return{name:c[r],value:c[i]}}},conversionTag:{formatter:function(c){return s.get(["conversionTag","label"])+": "+CC.apply(void 0,c[Ol])}}},u;return(t||o)&&(u=function(c){return Le({},t&&{lineWidth:1,stroke:"#fff"},(0,v.isFunction)(o)?o(c):o)}),Le({options:l},n,{options:{funnelStyle:u}})}function aV(n){var e=n.options,t=e.compareField,r=e.dynamicHeight,i=e.seriesField;return i?JW(n):t?KW(n):r?nV(n):T2(n)}function oV(n){var e,t=n.options,r=t.xAxis,i=t.yAxis,a=t.xField,o=t.yField;return Xr(Ri((e={},e[a]=r,e[o]=i,e)))(n)}function sV(n){var e=n.chart;return e.axis(!1),n}function lV(n){var e=n.chart,t=n.options,r=t.legend;return r===!1?e.legend(!1):e.legend(r),n}function I2(n){return Xr(iV,aV,oV,sV,ha,li,lV,Hn,Dn,Ai())(n)}var O2=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="funnel",t}return e.getDefaultOptions=function(){return UW},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return I2},e.CONVERSATION_FIELD=Ol,e.PERCENT_FIELD=Ou,e.TOTAL_PERCENT_FIELD=lb,e}(tn),uV="liquid";function P2(n){return[{percent:n,type:uV}]}function cV(n){var e=n.chart,t=n.options,r=t.percent,i=t.liquidStyle,a=t.radius,o=t.outline,s=t.wave,l=t.shape;e.scale({percent:{min:0,max:1}}),e.data(P2(r));var u=t.color||e.getTheme().defaultColor,c=Le({},n,{options:{xField:"type",yField:"percent",widthRatio:a,interval:{color:u,style:i,shape:"liquid-fill-gauge"}}}),f=ba(c).ext,h=f.geometry,d=e.getTheme().background,g={radius:a,outline:o,wave:s,shape:l,background:d};return h.customInfo(g),e.legend(!1),e.axis(!1),e.tooltip(!1),n}function D2(n,e){var t=n.chart,r=n.options,i=r.statistic,a=r.percent,o=r.meta;t.getController("annotation").clear(!0);var s=(0,v.get)(o,["percent","formatter"])||function(u){return(u*100).toFixed(2)+"%"},l=i.content;return l&&(l=Le({},l,{content:(0,v.isNil)(l.content)?s(a):l.content})),L0(t,{statistic:(0,b.__assign)((0,b.__assign)({},i),{content:l}),plotType:"liquid"},{percent:a}),e&&t.render(!0),n}function fV(n){return Xr(Dn,cV,D2,Ri({}),Hn,li)(n)}var hV={radius:.9,statistic:{title:!1,content:{style:{opacity:.75,fontSize:"30px",lineHeight:"30px",textAlign:"center"}}},outline:{border:2,distance:0},wave:{count:3,length:192},shape:"circle"},L2=5e3;function R2(n,e,t){return n+(e-n)*t}function dV(n){var e=(0,b.__assign)({opacity:1},n.style);return n.color&&!e.fill&&(e.fill=n.color),e}function vV(n){var e={fill:"#fff",fillOpacity:0,lineWidth:4},t=(0,v.mix)({},e,n.style);return n.color&&!t.stroke&&(t.stroke=n.color),(0,v.isNumber)(n.opacity)&&(t.opacity=t.strokeOpacity=n.opacity),t}function gV(n,e,t,r){return e===0?[[n+1/2*t/Math.PI/2,r/2],[n+1/2*t/Math.PI,r],[n+t/4,r]]:e===1?[[n+1/2*t/Math.PI/2*(Math.PI-2),r],[n+1/2*t/Math.PI/2*(Math.PI-1),r/2],[n+t/4,0]]:e===2?[[n+1/2*t/Math.PI/2,-r/2],[n+1/2*t/Math.PI,-r],[n+t/4,-r]]:[[n+1/2*t/Math.PI/2*(Math.PI-2),-r],[n+1/2*t/Math.PI/2*(Math.PI-1),-r/2],[n+t/4,0]]}function pV(n,e,t,r,i,a,o){for(var s=Math.ceil(2*n/t*4)*4,l=[],u=r;u<-Math.PI*2;)u+=Math.PI*2;for(;u>0;)u-=Math.PI*2;u=u/Math.PI/2*t;var c=a-n+u-n*2;l.push(["M",c,e]);for(var f=0,h=0;h<s;++h){var d=h%4,g=gV(h*t/4,d,t,i);l.push(["C",g[0][0]+c,-g[0][1]+e,g[1][0]+c,-g[1][1]+e,g[2][0]+c,-g[2][1]+e]),h===s-1&&(f=g[2][0])}return l.push(["L",f+c,o+n]),l.push(["L",c,o+n]),l.push(["Z"]),l}function yV(n,e,t,r,i,a,o,s,l){for(var u=i.fill,c=i.opacity,f=o.getBBox(),h=f.maxX-f.minX,d=f.maxY-f.minY,g=0;g<r;g++){var p=r<=1?0:g/(r-1),m=a.addShape("path",{name:"waterwave-path",attrs:{path:pV(s,f.minY+d*t,l,0,h/32,n,e),fill:u,opacity:R2(.2,.9,p)*c}});try{var _=q1([["t",l,0]]);m.stopAnimate(),m.animate({matrix:_},{duration:R2(.5*L2,L2,p),repeat:!0})}catch(S){console.warn("off-screen group animate error!")}}}function mV(n,e,t,r){var i=t*2/3,a=Math.max(i,r),o=i/2,s=n,l=o+e-a/2,u=Math.asin(o/((a-o)*.85)),c=Math.sin(u)*o,f=Math.cos(u)*o,h=s-f,d=l+c,g=n,p=l+o/Math.sin(u);return`
      M `+h+" "+d+`
      A `+o+" "+o+" 0 1 1 "+(h+f*2)+" "+d+`
      Q `+g+" "+p+" "+n+" "+(e+a/2)+`
      Q `+g+" "+p+" "+h+" "+d+`
      Z 
    `}function xV(n,e,t,r){var i=t/2,a=r/2;return`
      M `+n+" "+(e-a)+` 
      a `+i+" "+a+" 0 1 0 0 "+a*2+`
      a `+i+" "+a+" 0 1 0 0 "+-a*2+`
      Z
    `}function bV(n,e,t,r){var i=r/2,a=t/2;return`
      M `+n+" "+(e-i)+`
      L `+(n+a)+" "+e+`
      L `+n+" "+(e+i)+`
      L `+(n-a)+" "+e+`
      Z
    `}function _V(n,e,t,r){var i=r/2,a=t/2;return`
      M `+n+" "+(e-i)+`
      L `+(n+a)+" "+(e+i)+`
      L `+(n-a)+" "+(e+i)+`
      Z
    `}function SV(n,e,t,r){var i=.618,a=r/2,o=t/2*i;return`
      M `+(n-o)+" "+(e-a)+`
      L `+(n+o)+" "+(e-a)+`
      L `+(n+o)+" "+(e+a)+`
      L `+(n-o)+" "+(e+a)+`
      Z
    `}Bn("interval","liquid-fill-gauge",{draw:function(n,e){var t=.5,r=.5,i=n.customInfo,a=i,o=a.radius,s=a.shape,l=a.background,u=i.outline,c=i.wave,f=u.border,h=u.distance,d=c.count,g=c.length,p=(0,v.reduce)(n.points,function(Ct,te){return Math.min(Ct,te.x)},Infinity),m=this.parsePoint({x:t,y:r}),_=this.parsePoint({x:p,y:r}),S=m.x-_.x,M=Math.min(S,_.y*o),R=dV(n),F=vV((0,v.mix)({},n,u)),V=M-f/2,nt={pin:mV,circle:xV,diamond:bV,triangle:_V,rect:SV},at=typeof s=="function"?s:nt[s]||nt.circle,xt=at(m.x,m.y,V*2,V*2),gt=e.addGroup({name:"waves"}),Tt=gt.setClip({type:"path",attrs:{path:xt}});return yV(m.x,m.y,1-n.points[1].y,d,R,gt,Tt,M*2,g),e.addShape("path",{name:"distance",attrs:{path:xt,fill:"transparent",lineWidth:f+h*2,stroke:l==="transparent"?"#fff":l}}),e.addShape("path",{name:"wrap",attrs:(0,v.mix)(F,{path:xt,fill:"transparent",lineWidth:f})}),e}});var EV=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="liquid",t}return e.getDefaultOptions=function(){return hV},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.changeData=function(t){this.chart.emit(_t.BEFORE_CHANGE_DATA,fa.fromData(this.chart,_t.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t}),this.chart.data(P2(t)),D2({chart:this.chart,options:this.options},!0),this.chart.emit(_t.AFTER_CHANGE_DATA,fa.fromData(this.chart,_t.AFTER_CHANGE_DATA,null))},e.prototype.getSchemaAdaptor=function(){return fV},e}(tn);function N2(n){var e=n.data,t=n.xField,r=n.measureField,i=n.rangeField,a=n.targetField,o=n.layout,s=[],l=[];e.forEach(function(f,h){var d;f[i].sort(function(g,p){return g-p}),f[i].forEach(function(g,p){var m,_=p===0?g:f[i][p]-f[i][p-1];s.push((m={rKey:i+"_"+p},m[t]=t?f[t]:String(h),m[i]=_,m))}),f[r].forEach(function(g,p){var m;s.push((m={mKey:f[r].length>1?r+"_"+p:""+r},m[t]=t?f[t]:String(h),m[r]=g,m))}),s.push((d={tKey:""+a},d[t]=t?f[t]:String(h),d[a]=f[a],d)),l.push(f[i],f[r],f[a])});var u=Math.min.apply(Math,l.flat(Infinity)),c=Math.max.apply(Math,l.flat(Infinity));return u=u>0?0:u,o==="vertical"&&s.reverse(),{min:u,max:c,ds:s}}function wV(n){var e=n.chart,t=n.options,r=t.bulletStyle,i=t.targetField,a=t.rangeField,o=t.measureField,s=t.xField,l=t.color,u=t.layout,c=t.size,f=t.label,h=N2(t),d=h.min,g=h.max,p=h.ds;e.data(p);var m=Le({},n,{options:{xField:s,yField:a,seriesField:"rKey",isStack:!0,label:(0,v.get)(f,"range"),interval:{color:(0,v.get)(l,"range"),style:(0,v.get)(r,"range"),size:(0,v.get)(c,"range")}}});ba(m),e.geometries[0].tooltip(!1);var _=Le({},n,{options:{xField:s,yField:o,seriesField:"mKey",isStack:!0,label:(0,v.get)(f,"measure"),interval:{color:(0,v.get)(l,"measure"),style:(0,v.get)(r,"measure"),size:(0,v.get)(c,"measure")}}});ba(_);var S=Le({},n,{options:{xField:s,yField:i,seriesField:"tKey",label:(0,v.get)(f,"target"),point:{color:(0,v.get)(l,"target"),style:(0,v.get)(r,"target"),size:(0,v.isFunction)((0,v.get)(c,"target"))?function(M){return(0,v.get)(c,"target")(M)/2}:(0,v.get)(c,"target")/2,shape:u==="horizontal"?"line":"hyphen"}}});return Ao(S),u==="horizontal"&&e.coordinate().transpose(),(0,b.__assign)((0,b.__assign)({},n),{ext:{data:{min:d,max:g}}})}function k2(n){var e,t,r=n.options,i=n.ext,a=r.xAxis,o=r.yAxis,s=r.targetField,l=r.rangeField,u=r.measureField,c=r.xField,f=i.data;return Xr(Ri((e={},e[c]=a,e[u]=o,e),(t={},t[u]={min:f==null?void 0:f.min,max:f==null?void 0:f.max,sync:!0},t[s]={sync:""+u},t[l]={sync:""+u},t)))(n)}function CV(n){var e=n.chart,t=n.options,r=t.xAxis,i=t.yAxis,a=t.xField,o=t.measureField,s=t.rangeField,l=t.targetField;return e.axis(""+s,!1),e.axis(""+l,!1),r===!1?e.axis(""+a,!1):e.axis(""+a,r),i===!1?e.axis(""+o,!1):e.axis(""+o,i),n}function MV(n){var e=n.chart,t=n.options,r=t.legend;return e.removeInteraction("legend-filter"),e.legend(r),e.legend("rKey",!1),e.legend("mKey",!1),e.legend("tKey",!1),n}function AV(n){var e=n.chart,t=n.options,r=t.label,i=t.measureField,a=t.targetField,o=t.rangeField,s=e.geometries,l=s[0],u=s[1],c=s[2];return(0,v.get)(r,"range")?l.label(""+o,(0,b.__assign)({layout:[{type:"limit-in-plot"}]},xa(r.range))):l.label(!1),(0,v.get)(r,"measure")?u.label(""+i,(0,b.__assign)({layout:[{type:"limit-in-plot"}]},xa(r.measure))):u.label(!1),(0,v.get)(r,"target")?c.label(""+a,(0,b.__assign)({layout:[{type:"limit-in-plot"}]},xa(r.target))):c.label(!1),n}function TV(n){Xr(wV,k2,CV,MV,Dn,AV,ha,li,Hn)(n)}var IV=Le({},tn.getDefaultOptions(),{layout:"horizontal",size:{range:30,measure:20,target:20},xAxis:{tickLine:!1,line:null},bulletStyle:{range:{fillOpacity:.5}},label:{measure:{position:"right"}},tooltip:{showMarkers:!1}}),OV=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="bullet",t}return e.getDefaultOptions=function(){return IV},e.prototype.changeData=function(t){this.updateOption({data:t});var r=N2(this.options),i=r.min,a=r.max,o=r.ds;k2({options:this.options,ext:{data:{min:i,max:a}},chart:this.chart}),this.chart.changeData(o)},e.prototype.getSchemaAdaptor=function(){return TV},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e}(tn),cb="ancestor-node",B2="value",pg="path",PV=[pg,"name","depth","height"],DV=Le({},tn.getDefaultOptions(),{innerRadius:0,radius:.85,hierarchyConfig:{field:"value"},tooltip:{shared:!0,showMarkers:!1,offset:20,showTitle:!1},sunburstStyle:{lineWidth:.5,stroke:"#FFF"},drilldown:{enabled:!0}}),F2=4,LV=0,G2=5,z2="drilldown-bread-crumb",RV={position:"top-left",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}},yg="hierarchy-data-transform-params",NV=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.name="drill-down",t.historyCache=[],t.breadCrumbGroup=null,t.breadCrumbCfg=RV,t}return e.prototype.click=function(){var t=(0,v.get)(this.context,["event","data","data"]);if(!t)return!1;this.drill(t),this.drawBreadCrumb()},e.prototype.resetPosition=function(){if(!!this.breadCrumbGroup){var t=this.context.view.getCoordinate(),r=this.breadCrumbGroup,i=r.getBBox(),a=this.getButtonCfg().position,o={x:t.start.x,y:t.end.y-(i.height+G2*2)};t.isPolar&&(o={x:0,y:0}),a==="bottom-left"&&(o={x:t.start.x,y:t.start.y});var s=vs.transform(null,[["t",o.x+LV,o.y+i.height+G2]]);r.setMatrix(s)}},e.prototype.reset=function(){this.historyCache[0]&&this.back(this.historyCache.slice(0,1)),this.historyCache=[],this.hideCrumbGroup()},e.prototype.drill=function(t){var r=this.context.view,i=(0,v.get)(r,["interactions","drill-down","cfg","transformData"],function(u){return u}),a=i((0,b.__assign)({data:t.data},t[yg]));r.changeData(a);for(var o=[],s=t;s;){var l=s.data;o.unshift({id:l.name+"_"+s.height+"_"+s.depth,name:l.name,children:i((0,b.__assign)({data:l},t[yg]))}),s=s.parent}this.historyCache=(this.historyCache||[]).slice(0,-1).concat(o)},e.prototype.back=function(t){if(!(!t||t.length<=0)){var r=this.context.view,i=(0,v.last)(t).children;r.changeData(i),t.length>1?(this.historyCache=t,this.drawBreadCrumb()):(this.historyCache=[],this.hideCrumbGroup())}},e.prototype.getButtonCfg=function(){var t=this.context.view,r=(0,v.get)(t,["interactions","drill-down","cfg","drillDownConfig"]);return Le(this.breadCrumbCfg,r==null?void 0:r.breadCrumb,this.cfg)},e.prototype.drawBreadCrumb=function(){this.drawBreadCrumbGroup(),this.resetPosition(),this.breadCrumbGroup.show()},e.prototype.drawBreadCrumbGroup=function(){var t=this,r=this.getButtonCfg(),i=this.historyCache;this.breadCrumbGroup?this.breadCrumbGroup.clear():this.breadCrumbGroup=this.context.view.foregroundGroup.addGroup({name:z2});var a=0;i.forEach(function(o,s){var l=t.breadCrumbGroup.addShape({type:"text",id:o.id,name:z2+"_"+o.name+"_text",attrs:(0,b.__assign)((0,b.__assign)({text:s===0&&!(0,v.isNil)(r.rootText)?r.rootText:o.name},r.textStyle),{x:a,y:0})}),u=l.getBBox();if(a+=u.width+F2,l.on("click",function(h){var d,g=h.target.get("id");if(g!==((d=(0,v.last)(i))===null||d===void 0?void 0:d.id)){var p=i.slice(0,i.findIndex(function(m){return m.id===g})+1);t.back(p)}}),l.on("mouseenter",function(h){var d,g=h.target.get("id");g!==((d=(0,v.last)(i))===null||d===void 0?void 0:d.id)?l.attr(r.activeTextStyle):l.attr({cursor:"default"})}),l.on("mouseleave",function(){l.attr(r.textStyle)}),s<i.length-1){var c=t.breadCrumbGroup.addShape({type:"text",name:r.name+"_"+o.name+"_divider",attrs:(0,b.__assign)((0,b.__assign)({text:r.dividerText},r.textStyle),{x:a,y:0})}),f=c.getBBox();a+=f.width+F2}})},e.prototype.hideCrumbGroup=function(){this.breadCrumbGroup&&this.breadCrumbGroup.hide()},e.prototype.destroy=function(){this.breadCrumbGroup&&this.breadCrumbGroup.remove(),n.prototype.destroy.call(this)},e}(Si);function U2(n){n.x0=Math.round(n.x0),n.y0=Math.round(n.y0),n.x1=Math.round(n.x1),n.y1=Math.round(n.y1)}function mg(n,e,t,r,i){for(var a=n.children,o,s=-1,l=a.length,u=n.value&&(r-e)/n.value;++s<l;)o=a[s],o.y0=t,o.y1=i,o.x0=e,o.x1=e+=o.value*u}function W2(){var n=1,e=1,t=0,r=!1;function i(o){var s=o.height+1;return o.x0=o.y0=t,o.x1=n,o.y1=e/s,o.eachBefore(a(e,s)),r&&o.eachBefore(U2),o}function a(o,s){return function(l){l.children&&mg(l,l.x0,o*(l.depth+1)/s,l.x1,o*(l.depth+2)/s);var u=l.x0,c=l.y0,f=l.x1-t,h=l.y1-t;f<u&&(u=f=(u+f)/2),h<c&&(c=h=(c+h)/2),l.x0=u,l.y0=c,l.x1=f,l.y1=h}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(n=+o[0],e=+o[1],i):[n,e]},i.padding=function(o){return arguments.length?(t=+o,i):t},i}var Fe=x(58704);function kV(n){var e=0,t=n.children,r=t&&t.length;if(!r)e=1;else for(;--r>=0;)e+=t[r].value;n.value=e}function BV(){return this.eachAfter(kV)}var FV=x(56760);function V2(n,e){var t=typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=(0,FV.Z)(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){t=t.call(n)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function GV(n,e){var t=-1,r=V2(this),i;try{for(r.s();!(i=r.n()).done;){var a=i.value;n.call(e,a,++t,this)}}catch(o){r.e(o)}finally{r.f()}return this}function zV(n,e){for(var t=this,r=[t],i,a,o=-1;t=r.pop();)if(n.call(e,t,++o,this),i=t.children)for(a=i.length-1;a>=0;--a)r.push(i[a]);return this}function UV(n,e){for(var t=this,r=[t],i=[],a,o,s,l=-1;t=r.pop();)if(i.push(t),a=t.children)for(o=0,s=a.length;o<s;++o)r.push(a[o]);for(;t=i.pop();)n.call(e,t,++l,this);return this}function WV(n,e){var t=-1,r=V2(this),i;try{for(r.s();!(i=r.n()).done;){var a=i.value;if(n.call(e,a,++t,this))return a}}catch(o){r.e(o)}finally{r.f()}}function VV(n){return this.eachAfter(function(e){for(var t=+n(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)t+=r[i].value;e.value=t})}function XV(n){return this.eachBefore(function(e){e.children&&e.children.sort(n)})}function YV(n){for(var e=this,t=HV(e,n),r=[e];e!==t;)e=e.parent,r.push(e);for(var i=r.length;n!==t;)r.splice(i,0,n),n=n.parent;return r}function HV(n,e){if(n===e)return n;var t=n.ancestors(),r=e.ancestors(),i=null;for(n=t.pop(),e=r.pop();n===e;)i=n,n=t.pop(),e=r.pop();return i}function jV(){for(var n=this,e=[n];n=n.parent;)e.push(n);return e}function ZV(){return Array.from(this)}function KV(){var n=[];return this.eachBefore(function(e){e.children||n.push(e)}),n}function $V(){var n=this,e=[];return n.each(function(t){t!==n&&e.push({source:t.parent,target:t})}),e}var QV=x(36724),Ir=x.n(QV),JV=Ir().mark(X2);function X2(){var n,e,t,r,i,a;return Ir().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:n=this,t=[n];case 1:e=t.reverse(),t=[];case 2:if(!(n=e.pop())){s.next=8;break}return s.next=5,n;case 5:if(r=n.children)for(i=0,a=r.length;i<a;++i)t.push(r[i]);s.next=2;break;case 8:if(t.length){s.next=1;break}case 9:case"end":return s.stop()}},JV,this)}function Wh(n,e){n instanceof Map?(n=[void 0,n],e===void 0&&(e=e9)):e===void 0&&(e=t9);for(var t=new Vh(n),r,i=[t],a,o,s,l;r=i.pop();)if((o=e(r.data))&&(l=(o=Array.from(o)).length))for(r.children=o,s=l-1;s>=0;--s)i.push(a=o[s]=new Vh(o[s])),a.parent=r,a.depth=r.depth+1;return t.eachBefore(Y2)}function qV(){return Wh(this).eachBefore(r9)}function t9(n){return n.children}function e9(n){return Array.isArray(n)?n[1]:null}function r9(n){n.data.value!==void 0&&(n.value=n.data.value),n.data=n.data.data}function Y2(n){var e=0;do n.height=e;while((n=n.parent)&&n.height<++e)}function Vh(n){this.data=n,this.depth=this.height=0,this.parent=null}Vh.prototype=Wh.prototype=(0,Fe.Z)({constructor:Vh,count:BV,each:GV,eachAfter:UV,eachBefore:zV,find:WV,sum:VV,sort:XV,path:YV,ancestors:jV,descendants:ZV,leaves:KV,links:$V,copy:qV},Symbol.iterator,X2);var fb="Invalid field: it must be a string!";function hb(n,e){var t=n.field,r=n.fields;if((0,v.isString)(t))return t;if((0,v.isArray)(t))return console.warn(fb),t[0];if(console.warn(fb+" will try to get fields instead."),(0,v.isString)(r))return r;if((0,v.isArray)(r)&&r.length)return r[0];if(e)return e;throw new TypeError(fb)}function db(n){var e=[];return n&&n.each?n.each(function(t){e.push(t)}):n&&n.eachNode&&n.eachNode(function(t){e.push(t)}),e}var n9={field:"value",size:[1,1],round:!1,padding:0,sort:function(n,e){return e.value-n.value},as:["x","y"],ignoreParentValue:!0};function i9(n,e){e=(0,v.assign)({},n9,e);var t=e.as;if(!(0,v.isArray)(t)||t.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var r;try{r=hb(e)}catch(l){console.warn(l)}var i=function(l){return W2().size(e.size).round(e.round).padding(e.padding)(Wh(l).sum(function(u){return(0,v.size)(u.children)?e.ignoreParentValue?0:u[r]-(0,v.reduce)(u.children,function(c,f){return c+f[r]},0):u[r]}).sort(e.sort))},a=i(n),o=t[0],s=t[1];return a.each(function(l){var u,c;l[o]=[l.x0,l.x1,l.x1,l.x0],l[s]=[l.y1,l.y1,l.y0,l.y0],l.name=l.name||((u=l.data)===null||u===void 0?void 0:u.name)||((c=l.data)===null||c===void 0?void 0:c.label),l.data.name=l.name,["x0","x1","y0","y1"].forEach(function(f){t.indexOf(f)===-1&&delete l[f]})}),db(a)}function a9(n,e){return n.parent===e.parent?1:2}function o9(n){return n.reduce(s9,0)/n.length}function s9(n,e){return n+e.x}function l9(n){return 1+n.reduce(u9,0)}function u9(n,e){return Math.max(n,e.y)}function c9(n){for(var e;e=n.children;)n=e[0];return n}function f9(n){for(var e;e=n.children;)n=e[e.length-1];return n}function h9(){var n=a9,e=1,t=1,r=!1;function i(a){var o,s=0;a.eachAfter(function(h){var d=h.children;d?(h.x=o9(d),h.y=l9(d)):(h.x=o?s+=n(h,o):0,h.y=0,o=h)});var l=c9(a),u=f9(a),c=l.x-n(l,u)/2,f=u.x+n(u,l)/2;return a.eachAfter(r?function(h){h.x=(h.x-a.x)*e,h.y=(a.y-h.y)*t}:function(h){h.x=(h.x-c)/(f-c)*e,h.y=(1-(a.y?h.y/a.y:1))*t})}return i.separation=function(a){return arguments.length?(n=a,i):n},i.size=function(a){return arguments.length?(r=!1,e=+a[0],t=+a[1],i):r?null:[e,t]},i.nodeSize=function(a){return arguments.length?(r=!0,e=+a[0],t=+a[1],i):r?[e,t]:null},i}function d9(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function v9(n){for(var e=n.length,t,r;e;)r=Math.random()*e--|0,t=n[e],n[e]=n[r],n[r]=t;return n}function H2(n){for(var e=0,t=(n=v9(Array.from(n))).length,r=[],i,a;e<t;)i=n[e],a&&j2(a,i)?++e:(a=p9(r=g9(r,i)),e=0);return a}function g9(n,e){var t,r;if(vb(e,n))return[e];for(t=0;t<n.length;++t)if(K0(e,n[t])&&vb(xg(n[t],e),n))return[n[t],e];for(t=0;t<n.length-1;++t)for(r=t+1;r<n.length;++r)if(K0(xg(n[t],n[r]),e)&&K0(xg(n[t],e),n[r])&&K0(xg(n[r],e),n[t])&&vb(Z2(n[t],n[r],e),n))return[n[t],n[r],e];throw new Error}function K0(n,e){var t=n.r-e.r,r=e.x-n.x,i=e.y-n.y;return t<0||t*t<r*r+i*i}function j2(n,e){var t=n.r-e.r+Math.max(n.r,e.r,1)*1e-9,r=e.x-n.x,i=e.y-n.y;return t>0&&t*t>r*r+i*i}function vb(n,e){for(var t=0;t<e.length;++t)if(!j2(n,e[t]))return!1;return!0}function p9(n){switch(n.length){case 1:return y9(n[0]);case 2:return xg(n[0],n[1]);case 3:return Z2(n[0],n[1],n[2])}}function y9(n){return{x:n.x,y:n.y,r:n.r}}function xg(n,e){var t=n.x,r=n.y,i=n.r,a=e.x,o=e.y,s=e.r,l=a-t,u=o-r,c=s-i,f=Math.sqrt(l*l+u*u);return{x:(t+a+l/f*c)/2,y:(r+o+u/f*c)/2,r:(f+i+s)/2}}function Z2(n,e,t){var r=n.x,i=n.y,a=n.r,o=e.x,s=e.y,l=e.r,u=t.x,c=t.y,f=t.r,h=r-o,d=r-u,g=i-s,p=i-c,m=l-a,_=f-a,S=r*r+i*i-a*a,M=S-o*o-s*s+l*l,R=S-u*u-c*c+f*f,F=d*g-h*p,V=(g*R-p*M)/(F*2)-r,nt=(p*m-g*_)/F,at=(d*M-h*R)/(F*2)-i,xt=(h*_-d*m)/F,gt=nt*nt+xt*xt-1,Tt=2*(a+V*nt+at*xt),Ct=V*V+at*at-a*a,te=-(gt?(Tt+Math.sqrt(Tt*Tt-4*gt*Ct))/(2*gt):Ct/Tt);return{x:r+V+nt*te,y:i+at+xt*te,r:te}}function K2(n,e,t){var r=n.x-e.x,i,a,o=n.y-e.y,s,l,u=r*r+o*o;u?(a=e.r+t.r,a*=a,l=n.r+t.r,l*=l,a>l?(i=(u+l-a)/(2*u),s=Math.sqrt(Math.max(0,l/u-i*i)),t.x=n.x-i*r-s*o,t.y=n.y-i*o+s*r):(i=(u+a-l)/(2*u),s=Math.sqrt(Math.max(0,a/u-i*i)),t.x=e.x+i*r-s*o,t.y=e.y+i*o+s*r)):(t.x=e.x+t.r,t.y=e.y)}function $2(n,e){var t=n.r+e.r-1e-6,r=e.x-n.x,i=e.y-n.y;return t>0&&t*t>r*r+i*i}function Q2(n){var e=n._,t=n.next._,r=e.r+t.r,i=(e.x*t.r+t.x*e.r)/r,a=(e.y*t.r+t.y*e.r)/r;return i*i+a*a}function $0(n){this._=n,this.next=null,this.previous=null}function J2(n){if(!(i=(n=d9(n)).length))return 0;var e,t,r,i,a,o,s,l,u,c,f;if(e=n[0],e.x=0,e.y=0,!(i>1))return e.r;if(t=n[1],e.x=-t.r,t.x=e.r,t.y=0,!(i>2))return e.r+t.r;K2(t,e,r=n[2]),e=new $0(e),t=new $0(t),r=new $0(r),e.next=r.previous=t,t.next=e.previous=r,r.next=t.previous=e;t:for(s=3;s<i;++s){K2(e._,t._,r=n[s]),r=new $0(r),l=t.next,u=e.previous,c=t._.r,f=e._.r;do if(c<=f){if($2(l._,r._)){t=l,e.next=t,t.previous=e,--s;continue t}c+=l._.r,l=l.next}else{if($2(u._,r._)){e=u,e.next=t,t.previous=e,--s;continue t}f+=u._.r,u=u.previous}while(l!==u.next);for(r.previous=e,r.next=t,e.next=t.previous=t=r,a=Q2(e);(r=r.next)!==t;)(o=Q2(r))<a&&(e=r,a=o);t=e.next}for(e=[t._],r=t;(r=r.next)!==t;)e.push(r._);for(r=H2(e),s=0;s<i;++s)e=n[s],e.x-=r.x,e.y-=r.y;return r.r}function m9(n){return J2(n),n}function x9(n){return n==null?null:Q0(n)}function Q0(n){if(typeof n!="function")throw new Error;return n}function tf(){return 0}function Xh(n){return function(){return n}}function b9(n){return Math.sqrt(n.value)}function q2(){var n=null,e=1,t=1,r=tf;function i(a){return a.x=e/2,a.y=t/2,n?a.eachBefore(tM(n)).eachAfter(gb(r,.5)).eachBefore(eM(1)):a.eachBefore(tM(b9)).eachAfter(gb(tf,1)).eachAfter(gb(r,a.r/Math.min(e,t))).eachBefore(eM(Math.min(e,t)/(2*a.r))),a}return i.radius=function(a){return arguments.length?(n=x9(a),i):n},i.size=function(a){return arguments.length?(e=+a[0],t=+a[1],i):[e,t]},i.padding=function(a){return arguments.length?(r=typeof a=="function"?a:Xh(+a),i):r},i}function tM(n){return function(e){e.children||(e.r=Math.max(0,+n(e)||0))}}function gb(n,e){return function(t){if(r=t.children){var r,i,a=r.length,o=n(t)*e||0,s;if(o)for(i=0;i<a;++i)r[i].r+=o;if(s=J2(r),o)for(i=0;i<a;++i)r[i].r-=o;t.r=s+o}}}function eM(n){return function(e){var t=e.parent;e.r*=n,t&&(e.x=t.x+n*e.x,e.y=t.y+n*e.y)}}var _9={depth:-1},rM={};function S9(n){return n.id}function E9(n){return n.parentId}function w9(){var n=S9,e=E9;function t(r){var i=Array.from(r),a=i.length,o,s,l,u,c,f,h,d=new Map;for(s=0;s<a;++s)o=i[s],c=i[s]=new Vh(o),(f=n(o,s,r))!=null&&(f+="")&&(h=c.id=f,d.set(h,d.has(h)?rM:c)),(f=e(o,s,r))!=null&&(f+="")&&(c.parent=f);for(s=0;s<a;++s)if(c=i[s],f=c.parent){if(u=d.get(f),!u)throw new Error("missing: "+f);if(u===rM)throw new Error("ambiguous: "+f);u.children?u.children.push(c):u.children=[c],c.parent=u}else{if(l)throw new Error("multiple roots");l=c}if(!l)throw new Error("no root");if(l.parent=_9,l.eachBefore(function(g){g.depth=g.parent.depth+1,--a}).eachBefore(Y2),l.parent=null,a>0)throw new Error("cycle");return l}return t.id=function(r){return arguments.length?(n=Q0(r),t):n},t.parentId=function(r){return arguments.length?(e=Q0(r),t):e},t}function C9(n,e){return n.parent===e.parent?1:2}function pb(n){var e=n.children;return e?e[0]:n.t}function yb(n){var e=n.children;return e?e[e.length-1]:n.t}function M9(n,e,t){var r=t/(e.i-n.i);e.c-=r,e.s+=t,n.c+=r,e.z+=t,e.m+=t}function A9(n){for(var e=0,t=0,r=n.children,i=r.length,a;--i>=0;)a=r[i],a.z+=e,a.m+=e,e+=a.s+(t+=a.c)}function T9(n,e,t){return n.a.parent===e.parent?n.a:t}function J0(n,e){this._=n,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}J0.prototype=Object.create(Vh.prototype);function I9(n){for(var e=new J0(n,0),t,r=[e],i,a,o,s;t=r.pop();)if(a=t._.children)for(t.children=new Array(s=a.length),o=s-1;o>=0;--o)r.push(i=t.children[o]=new J0(a[o],o)),i.parent=t;return(e.parent=new J0(null,0)).children=[e],e}function O9(){var n=C9,e=1,t=1,r=null;function i(u){var c=I9(u);if(c.eachAfter(a),c.parent.m=-c.z,c.eachBefore(o),r)u.eachBefore(l);else{var f=u,h=u,d=u;u.eachBefore(function(S){S.x<f.x&&(f=S),S.x>h.x&&(h=S),S.depth>d.depth&&(d=S)});var g=f===h?1:n(f,h)/2,p=g-f.x,m=e/(h.x+g+p),_=t/(d.depth||1);u.eachBefore(function(S){S.x=(S.x+p)*m,S.y=S.depth*_})}return u}function a(u){var c=u.children,f=u.parent.children,h=u.i?f[u.i-1]:null;if(c){A9(u);var d=(c[0].z+c[c.length-1].z)/2;h?(u.z=h.z+n(u._,h._),u.m=u.z-d):u.z=d}else h&&(u.z=h.z+n(u._,h._));u.parent.A=s(u,h,u.parent.A||f[0])}function o(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function s(u,c,f){if(c){for(var h=u,d=u,g=c,p=h.parent.children[0],m=h.m,_=d.m,S=g.m,M=p.m,R;g=yb(g),h=pb(h),g&&h;)p=pb(p),d=yb(d),d.a=u,R=g.z+S-h.z-m+n(g._,h._),R>0&&(M9(T9(g,u,f),u,R),m+=R,_+=R),S+=g.m,m+=h.m,M+=p.m,_+=d.m;g&&!yb(d)&&(d.t=g,d.m+=S-_),h&&!pb(p)&&(p.t=h,p.m+=m-M,f=u)}return f}function l(u){u.x*=e,u.y=u.depth*t}return i.separation=function(u){return arguments.length?(n=u,i):n},i.size=function(u){return arguments.length?(r=!1,e=+u[0],t=+u[1],i):r?null:[e,t]},i.nodeSize=function(u){return arguments.length?(r=!0,e=+u[0],t=+u[1],i):r?[e,t]:null},i}function q0(n,e,t,r,i){for(var a=n.children,o,s=-1,l=a.length,u=n.value&&(i-t)/n.value;++s<l;)o=a[s],o.x0=e,o.x1=r,o.y0=t,o.y1=t+=o.value*u}var nM=(1+Math.sqrt(5))/2;function iM(n,e,t,r,i,a){for(var o=[],s=e.children,l,u,c=0,f=0,h=s.length,d,g,p=e.value,m,_,S,M,R,F,V;c<h;){d=i-t,g=a-r;do m=s[f++].value;while(!m&&f<h);for(_=S=m,F=Math.max(g/d,d/g)/(p*n),V=m*m*F,R=Math.max(S/V,V/_);f<h;++f){if(m+=u=s[f].value,u<_&&(_=u),u>S&&(S=u),V=m*m*F,M=Math.max(S/V,V/_),M>R){m-=u;break}R=M}o.push(l={value:m,dice:d<g,children:s.slice(c,f)}),l.dice?mg(l,t,r,i,p?r+=g*m/p:a):q0(l,t,r,p?t+=d*m/p:i,a),p-=m,c=f}return o}var aM=function n(e){function t(r,i,a,o,s){iM(e,r,i,a,o,s)}return t.ratio=function(r){return n((r=+r)>1?r:1)},t}(nM);function oM(){var n=aM,e=!1,t=1,r=1,i=[0],a=tf,o=tf,s=tf,l=tf,u=tf;function c(h){return h.x0=h.y0=0,h.x1=t,h.y1=r,h.eachBefore(f),i=[0],e&&h.eachBefore(U2),h}function f(h){var d=i[h.depth],g=h.x0+d,p=h.y0+d,m=h.x1-d,_=h.y1-d;m<g&&(g=m=(g+m)/2),_<p&&(p=_=(p+_)/2),h.x0=g,h.y0=p,h.x1=m,h.y1=_,h.children&&(d=i[h.depth+1]=a(h)/2,g+=u(h)-d,p+=o(h)-d,m-=s(h)-d,_-=l(h)-d,m<g&&(g=m=(g+m)/2),_<p&&(p=_=(p+_)/2),n(h,g,p,m,_))}return c.round=function(h){return arguments.length?(e=!!h,c):e},c.size=function(h){return arguments.length?(t=+h[0],r=+h[1],c):[t,r]},c.tile=function(h){return arguments.length?(n=Q0(h),c):n},c.padding=function(h){return arguments.length?c.paddingInner(h).paddingOuter(h):c.paddingInner()},c.paddingInner=function(h){return arguments.length?(a=typeof h=="function"?h:Xh(+h),c):a},c.paddingOuter=function(h){return arguments.length?c.paddingTop(h).paddingRight(h).paddingBottom(h).paddingLeft(h):c.paddingTop()},c.paddingTop=function(h){return arguments.length?(o=typeof h=="function"?h:Xh(+h),c):o},c.paddingRight=function(h){return arguments.length?(s=typeof h=="function"?h:Xh(+h),c):s},c.paddingBottom=function(h){return arguments.length?(l=typeof h=="function"?h:Xh(+h),c):l},c.paddingLeft=function(h){return arguments.length?(u=typeof h=="function"?h:Xh(+h),c):u},c}function P9(n,e,t,r,i){var a=n.children,o,s=a.length,l,u=new Array(s+1);for(u[0]=l=o=0;o<s;++o)u[o+1]=l+=a[o].value;c(0,s,n.value,e,t,r,i);function c(f,h,d,g,p,m,_){if(f>=h-1){var S=a[f];S.x0=g,S.y0=p,S.x1=m,S.y1=_;return}for(var M=u[f],R=d/2+M,F=f+1,V=h-1;F<V;){var nt=F+V>>>1;u[nt]<R?F=nt+1:V=nt}R-u[F-1]<u[F]-R&&f+1<F&&--F;var at=u[F]-M,xt=d-at;if(m-g>_-p){var gt=d?(g*xt+m*at)/d:m;c(f,F,at,g,p,gt,_),c(F,h,xt,gt,p,m,_)}else{var Tt=d?(p*xt+_*at)/d:_;c(f,F,at,g,p,m,Tt),c(F,h,xt,g,Tt,m,_)}}}function D9(n,e,t,r,i){(n.depth&1?q0:mg)(n,e,t,r,i)}var L9=function n(e){function t(r,i,a,o,s){if((l=r._squarify)&&l.ratio===e)for(var l,u,c,f,h=-1,d,g=l.length,p=r.value;++h<g;){for(u=l[h],c=u.children,f=u.value=0,d=c.length;f<d;++f)u.value+=c[f].value;u.dice?mg(u,i,a,o,p?a+=(s-a)*u.value/p:s):q0(u,i,a,p?i+=(o-i)*u.value/p:o,s),p-=u.value}else r._squarify=l=iM(e,r,i,a,o,s),l.ratio=e}return t.ratio=function(r){return n((r=+r)>1?r:1)},t}(nM),R9={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"],sort:function(n,e){return e.value-n.value},ratio:.5*(1+Math.sqrt(5))};function N9(n,e){return n==="treemapSquarify"?k[n].ratio(e):k[n]}function sM(n,e){e=(0,v.assign)({},R9,e);var t=e.as;if(!(0,v.isArray)(t)||t.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var r;try{r=hb(e)}catch(u){console.warn(u)}var i=N9(e.tile,e.ratio),a=function(u){return oM().tile(i).size(e.size).round(e.round).padding(e.padding).paddingInner(e.paddingInner).paddingOuter(e.paddingOuter).paddingTop(e.paddingTop).paddingRight(e.paddingRight).paddingBottom(e.paddingBottom).paddingLeft(e.paddingLeft)(Wh(u).sum(function(c){return e.ignoreParentValue&&c.children?0:c[r]}).sort(e.sort))},o=a(n),s=t[0],l=t[1];return o.each(function(u){u[s]=[u.x0,u.x1,u.x1,u.x0],u[l]=[u.y1,u.y1,u.y0,u.y0],["x0","x1","y0","y1"].forEach(function(c){t.indexOf(c)===-1&&delete u[c]})}),db(o)}function lM(n){var e=n.data,t=n.colorField,r=n.rawFields,i=n.hierarchyConfig,a=i===void 0?{}:i,o={partition:i9,treemap:sM},s=n.seriesField,l=n.type||"partition",u=o[l](e,(0,b.__assign)((0,b.__assign)({field:s||"value"},a),{type:"hierarchy."+l,as:["x","y"]})),c=[];return u.forEach(function(f){var h,d,g,p,m,_;if(f.depth===0)return null;for(var S=f.data.name,M=(0,b.__assign)({},f);M.depth>1;)S=((d=M.parent.data)===null||d===void 0?void 0:d.name)+" / "+S,M=M.parent;var R=(0,b.__assign)((0,b.__assign)((0,b.__assign)({},Wn(f.data,(0,b.__spreadArrays)(r||[],[a.field]))),(h={},h[pg]=S,h[cb]=M.data.name,h)),f);s&&(R[s]=f.data[s]||((p=(g=f.parent)===null||g===void 0?void 0:g.data)===null||p===void 0?void 0:p[s])),t&&(R[t]=f.data[t]||((_=(m=f.parent)===null||m===void 0?void 0:m.data)===null||_===void 0?void 0:_[t])),R.ext=a,R[yg]={hierarchyConfig:a,colorField:t,rawFields:r},c.push(R)}),c}function k9(n){var e=n.chart,t=n.options,r=t.color,i=t.colorField,a=i===void 0?cb:i,o=t.sunburstStyle,s=t.rawFields,l=s===void 0?[]:s,u=lM(t);e.data(u);var c;return o&&(c=function(f){return Le({},{fillOpacity:Math.pow(.85,f.depth)},(0,v.isFunction)(o)?o(f):o)}),F0(Le({},n,{options:{xField:"x",yField:"y",seriesField:a,rawFields:(0,v.uniq)((0,b.__spreadArrays)(PV,l)),polygon:{color:r,style:c}}})),n}function B9(n){var e=n.chart;return e.axis(!1),n}function F9(n){var e=n.chart;return e.legend(!1),n}function G9(n){var e=n.chart,t=n.options,r=t.label,i=Xa(e,"polygon");if(!r)i.label(!1);else{var a=r.fields,o=a===void 0?["name"]:a,s=r.callback,l=(0,b.__rest)(r,["fields","callback"]);i.label({fields:o,callback:s,cfg:xa(l)})}return n}function z9(n){var e=n.chart,t=n.options,r=t.innerRadius,i=t.radius,a=t.reflect,o=e.coordinate({type:"polar",cfg:{innerRadius:r,radius:i}});return a&&o.reflect(a),n}function U9(n){var e,t=n.options,r=t.hierarchyConfig,i=t.meta;return Xr(Ri({},(e={},e[B2]=(0,v.get)(i,(0,v.get)(r,["field"],"value")),e)))(n)}function W9(n){var e=n.chart,t=n.options,r=t.tooltip;if(r===!1)e.tooltip(!1);else{var i=r;(0,v.get)(r,"fields")||(i=Le({},{customItems:function(a){return a.map(function(o){var s=(0,v.get)(e.getOptions(),"scales"),l=(0,v.get)(s,[pg,"formatter"],function(c){return c}),u=(0,v.get)(s,[B2,"formatter"],function(c){return c});return(0,b.__assign)((0,b.__assign)({},o),{name:l(o.data[pg]),value:u(o.data.value)})})}},i)),e.tooltip(i)}return n}function V9(n){var e=n.drilldown,t=n.interactions,r=t===void 0?[]:t;return(e==null?void 0:e.enabled)?Le({},n,{interactions:(0,b.__spreadArrays)(r,[{type:"drill-down",cfg:{drillDownConfig:e,transformData:lM}}])}):n}function X9(n){var e=n.chart,t=n.options,r=t.drilldown;return li({chart:e,options:V9(t)}),(r==null?void 0:r.enabled)&&(e.appendPadding=tb(e.appendPadding,(0,v.get)(r,["breadCrumb","position"]))),n}function Y9(n){return Xr(Dn,k9,B9,U9,F9,z9,W9,G9,X9,Hn,Ai())(n)}function uM(n){var e=(0,v.get)(n,["event","data","data"],{});return(0,v.isArray)(e.children)&&e.children.length>0}Kr("drill-down-action",NV),An("drill-down",{showEnable:[{trigger:"element:mouseenter",action:"cursor:pointer",isEnable:uM},{trigger:"element:mouseleave",action:"cursor:default"}],start:[{trigger:"element:click",isEnable:uM,action:["drill-down-action:click"]},{trigger:"afterchangesize",action:["drill-down-action:resetPosition"]}]});var H9=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="sunburst",t}return e.getDefaultOptions=function(){return DV},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Y9},e.SUNBURST_ANCESTOR_FIELD=cb,e.SUNBURST_PATH_FIELD=pg,e}(tn),ty,Yh="range",mb="type",Pu="percent",j9="#f0f0f0",cM="indicator-view",fM="range-view",Z9="range-mask-view",K9={percent:0,range:{ticks:[]},innerRadius:.9,radius:.95,startAngle:-7/6*Math.PI,endAngle:1/6*Math.PI,syncViewPadding:!0,axis:{line:null,label:{offset:-24,style:{textAlign:"center",textBaseline:"middle"}},subTickLine:{length:-8},tickLine:{length:-12},grid:null},indicator:{pointer:{style:{lineWidth:5,lineCap:"round"}},pin:{style:{r:9.75,lineWidth:4.5,fill:"#fff"}}},statistic:{title:!1},meta:(ty={},ty[Yh]={sync:"v"},ty[Pu]={sync:"v",tickCount:5,tickInterval:.2},ty),animation:!1};function $9(n,e){return n.map(function(t,r){var i;return i={},i[Yh]=t-(n[r-1]||0),i[mb]=""+r,i[Pu]=e,i}).filter(function(t){return!!t[Yh]})}function hM(n){var e;return[(e={},e[Pu]=(0,v.clamp)(n,0,1),e)]}function dM(n,e){var t=(0,v.get)(e,["ticks"],[]),r=(0,v.size)(t)?t:[0,(0,v.clamp)(n,0,1),1];return $9(r,n)}function Q9(n){var e=n.chart,t=n.options,r=t.percent,i=t.range,a=t.radius,o=t.innerRadius,s=t.startAngle,l=t.endAngle,u=t.axis,c=t.indicator,f=t.gaugeStyle,h=i.color,d=i.width;if(c){var g=hM(r),p=e.createView({id:cM});p.data(g),p.point().position(Pu+"*1").shape("gauge-indicator").customInfo({defaultColor:e.getTheme().defaultColor,indicator:c}),p.coordinate("polar",{startAngle:s,endAngle:l,radius:o*a}),p.axis(Pu,u),p.scale(Pu,Wn(u,vo))}var m=dM(r,t.range),_=e.createView({id:fM});_.data(m);var S=(0,v.isString)(h)?[h,j9]:h;return ba({chart:_,options:{xField:"1",yField:Yh,seriesField:mb,rawFields:[Pu],isStack:!0,interval:{color:S,style:f},args:{zIndexReversed:!0},minColumnWidth:d,maxColumnWidth:d}}),_.coordinate("polar",{innerRadius:o,radius:a,startAngle:s,endAngle:l}).transpose(),n}function J9(n){var e,t=n.chart,r=n.options,i=r.type,a=r.meter;if(i==="meter"){var o=r.innerRadius,s=r.radius,l=r.startAngle,u=r.endAngle,c=r.range,f=c==null?void 0:c.width,h=c==null?void 0:c.width,d=t.getTheme().background,g=d;(!g||g==="transparent")&&(g="#fff");var p=t.createView({id:Z9});p.data([(e={},e[mb]="1",e[Yh]=1,e)]);var m={meter:a};p.interval({minColumnWidth:f,maxColumnWidth:h}).position("1*"+Yh).color(g).adjust("stack").shape("meter-gauge").customInfo(m),p.coordinate("polar",{innerRadius:o,radius:s,startAngle:l,endAngle:u}).transpose()}return n}function q9(n){var e;return Xr(Ri((e={range:{min:0,max:1,maxLimit:1,minLimit:0}},e[Pu]={},e)))(n)}function vM(n,e){var t=n.chart,r=n.options,i=r.statistic,a=r.percent;if(t.getController("annotation").clear(!0),i){var o=i.content,s=void 0;o&&(s=Le({},{content:(a*100).toFixed(2)+"%",style:{opacity:.75,fontSize:"30px",lineHeight:1,textAlign:"center",color:"rgba(44,53,66,0.85)"}},o)),y6(t,{statistic:(0,b.__assign)((0,b.__assign)({},i),{content:s})},{percent:a})}return e&&t.render(!0),n}function tX(n){var e=n.chart;return e.legend(!1),e.tooltip(!1),n}function gM(n){return Xr(Dn,Hn,Q9,q9,vM,li,J9,Ai(),tX)(n)}Bn("point","gauge-indicator",{draw:function(n,e){var t=n.customInfo,r=t.indicator,i=t.defaultColor,a=r,o=a.pointer,s=a.pin,l=e.addGroup(),u=this.parsePoint({x:0,y:0});return o&&l.addShape("line",{name:"pointer",attrs:(0,b.__assign)({x1:u.x,y1:u.y,x2:n.x,y2:n.y,stroke:i},o.style)}),s&&l.addShape("circle",{name:"pin",attrs:(0,b.__assign)({x:u.x,y:u.y,stroke:i},s.style)}),l}}),Bn("interval","meter-gauge",{draw:function(n,e){var t=n.customInfo.meter,r=t===void 0?{}:t,i=r.steps,a=i===void 0?50:i,o=r.stepRatio,s=o===void 0?.5:o,l=this.coordinate.endAngle-this.coordinate.startAngle,u=l/a,c=0;s>0&&s<=1&&(u=l/((1-s)/s*(a-1)+a),c=u*(1-s)/s);var f=e.addGroup();if(c>0)for(var h=this.coordinate.getCenter(),d=this.coordinate.getRadius(),g=vs.getAngle(n,this.coordinate),p=g.startAngle,m=g.endAngle,_=p,S=0;_<m&&S<2*a-1;S++){var M=S%2;if(M){var R=vs.getSectorPath(h.x,h.y,d,_,Math.min(_+c,m),d*this.coordinate.innerRadius);f.addShape("path",{name:"meter-gauge-mask",attrs:{path:R,fill:n.color,stroke:n.color,lineWidth:.5},capture:!1})}_+=M?c:u}return f}});var pM=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="gauge",t}return e.getDefaultOptions=function(){return K9},e.prototype.changeData=function(t){this.chart.emit(_t.BEFORE_CHANGE_DATA,fa.fromData(this.chart,_t.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t});var r=this.chart.views.find(function(a){return a.id===cM});r&&r.data(hM(t));var i=this.chart.views.find(function(a){return a.id===fM});i&&i.data(dM(t,this.options.range)),vM({chart:this.chart,options:this.options},!0),this.chart.emit(_t.AFTER_CHANGE_DATA,fa.fromData(this.chart,_t.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return gM},e}(tn),$o="$$yField$$",ey="$$diffField$$",xb="$$absoluteField$$",bb="$$isTotal$$",eX={label:{},leaderLine:{style:{lineWidth:1,stroke:"#8c8c8c",lineDash:[4,2]}},total:{style:{fill:"rgba(0, 0, 0, 0.25)"}},interactions:[{type:"element-active"}],risingFill:"#f4664a",fallingFill:"#30bf78",waterfallStyle:{fill:"rgba(0, 0, 0, 0.25)"},yAxis:{grid:{line:{style:{lineDash:[4,2]}}}}};function rX(n,e,t,r,i){var a,o=[];if((0,v.reduce)(n,function(l,u){var c;Lh(Au.WARN,(0,v.isNumber)(u[t]),u[t]+" is not a valid number");var f=(0,v.isUndefined)(u[t])?null:u[t];return o.push((0,b.__assign)((0,b.__assign)({},u),(c={},c[r]=[l,l+f],c))),l+f},0),o.length&&i){var s=(0,v.get)(o,[[n.length-1],r,[1]]);o.push((a={},a[e]=i.label,a[t]=s,a[r]=[0,s],a))}return o}function yM(n,e,t,r){var i=rX(n,e,t,$o,r);return i.map(function(a,o){var s;return(0,v.isObject)(a)?(0,b.__assign)((0,b.__assign)({},a),(s={},s[xb]=a[$o][1],s[ey]=a[$o][1]-a[$o][0],s[bb]=o===n.length,s)):a})}function nX(n){for(var e=[],t=0;t<n.length;t++){var r=n[t];if(r){var i=t===0?"M":"L";e.push([i,r.x,r.y])}}var a=n[0];return e.push(["L",a.x,a.y]),e.push(["z"]),e}function iX(n){return Le({},n.defaultStyle,n.style,{fill:n.color})}Bn("interval","waterfall",{draw:function(n,e){var t=n.customInfo,r=n.points,i=n.nextPoints,a=e.addGroup(),o=this.parsePath(nX(r)),s=iX(n);a.addShape("path",{attrs:(0,b.__assign)((0,b.__assign)({},s),{path:o})});var l=(0,v.get)(t,"leaderLine");if(l&&i){var u=[["M",r[2].x,r[2].y],["L",i[0].x,i[0].y]];r[2].y===i[1].y&&(u[1]=["L",i[1].x,i[1].y]),u=this.parsePath(u),a.addShape("path",{attrs:(0,b.__assign)({path:u},l.style||{})})}return a}});function aX(n){var e=n.options,t=e.locale,r=e.total,i=N0(t).get(["waterfall","total"]);return r&&typeof r.label!="string"&&i&&(n.options.total.label=i),n}function oX(n){var e=n.chart,t=n.options,r=t.data,i=t.xField,a=t.yField,o=t.total,s=t.leaderLine,l=t.columnWidthRatio,u=t.waterfallStyle,c=t.risingFill,f=t.fallingFill,h=t.color;e.data(yM(r,i,a,o));var d=h||function(_){return(0,v.get)(_,[bb])?(0,v.get)(o,["style","fill"],""):(0,v.get)(_,[$o,1])-(0,v.get)(_,[$o,0])>0?c:f},g=Le({},n,{options:{xField:i,yField:$o,seriesField:i,rawFields:[a,ey,bb,$o],widthRatio:l,interval:{style:u,shape:"waterfall",color:d}}}),p=ba(g).ext,m=p.geometry;return m.customInfo({leaderLine:s}),n}function sX(n){var e,t,r=n.options,i=r.xAxis,a=r.yAxis,o=r.xField,s=r.yField,l=r.meta,u=Le({},{alias:s},(0,v.get)(l,s));return Xr(Ri((e={},e[o]=i,e[s]=a,e[$o]=a,e),Le({},l,(t={},t[$o]=u,t[ey]=u,t[xb]=u,t))))(n)}function lX(n){var e=n.chart,t=n.options,r=t.xAxis,i=t.yAxis,a=t.xField,o=t.yField;return r===!1?e.axis(a,!1):e.axis(a,r),i===!1?(e.axis(o,!1),e.axis($o,!1)):(e.axis(o,i),e.axis($o,i)),n}function uX(n){var e=n.chart,t=n.options,r=t.legend,i=t.total,a=t.risingFill,o=t.fallingFill,s=t.locale,l=N0(s);if(r===!1)e.legend(!1);else{var u=[{name:l.get(["general","increase"]),value:"increase",marker:{symbol:"square",style:{r:5,fill:a}}},{name:l.get(["general","decrease"]),value:"decrease",marker:{symbol:"square",style:{r:5,fill:o}}}];i&&u.push({name:i.label||"",value:"total",marker:{symbol:"square",style:Le({},{r:5},(0,v.get)(i,"style"))}}),e.legend(Le({},{custom:!0,position:"top",items:u},r)),e.removeInteraction("legend-filter")}return n}function cX(n){var e=n.chart,t=n.options,r=t.label,i=t.labelMode,a=t.xField,o=Xa(e,"interval");if(!r)o.label(!1);else{var s=r.callback,l=(0,b.__rest)(r,["callback"]);o.label({fields:i==="absolute"?[xb,a]:[ey,a],callback:s,cfg:xa(l)})}return n}function fX(n){var e=n.chart,t=n.options,r=t.tooltip,i=t.xField,a=t.yField;if(r!==!1){e.tooltip((0,b.__assign)({showCrosshairs:!1,showMarkers:!1,shared:!0,fields:[a]},r));var o=e.geometries[0];(r==null?void 0:r.formatter)?o.tooltip(i+"*"+a,r.formatter):o.tooltip(a)}else e.tooltip(!1);return n}function hX(n){return Xr(aX,Dn,oX,sX,lX,uX,fX,cX,Iu,li,Hn,Ai())(n)}var dX=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="waterfall",t}return e.getDefaultOptions=function(){return eX},e.prototype.changeData=function(t){var r=this.options,i=r.xField,a=r.yField,o=r.total;this.updateOption({data:t}),this.chart.changeData(yM(t,i,a,o))},e.prototype.getSchemaAdaptor=function(){return hX},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e}(tn);function vX(n,e,t){var r=t.map(function(o){return o[e]}).filter(function(o){return o!==void 0}),i=r.length>0?Math.max.apply(Math,r):0,a=Math.abs(n)%360;return a?i*360/a:i}function gX(n){var e=n.chart,t=n.options,r=t.barStyle,i=t.color,a=t.tooltip,o=t.colorField,s=t.type,l=t.xField,u=t.yField,c=t.data,f=Nh(c,u);e.data(f);var h=Le({},n,{options:{tooltip:a,seriesField:o,interval:{style:r,color:i,shape:s==="line"?"line":"intervel"},minColumnWidth:t.minBarWidth,maxColumnWidth:t.maxBarWidth,columnBackground:t.barBackground}});return ba(h),s==="line"&&Ao({chart:e,options:{xField:l,yField:u,seriesField:o,point:{shape:"circle",color:i}}}),n}function mM(n){var e,t=n.options,r=t.yField,i=t.maxAngle,a=t.data,o=Nh(a,r);return Xr(Ri((e={},e[r]={min:0,max:vX(i,r,o)},e)))(n)}function pX(n){var e=n.chart,t=n.options,r=t.radius,i=t.innerRadius,a=t.startAngle,o=t.endAngle;return e.coordinate({type:"polar",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}).transpose(),n}function yX(n){var e=n.chart,t=n.options,r=t.xField,i=t.xAxis;return e.axis(r,i),n}function mX(n){var e=n.chart,t=n.options,r=t.label,i=t.yField,a=Xa(e,"interval");if(!r)a.label(!1);else{var o=r.callback,s=(0,b.__rest)(r,["callback"]);a.label({fields:[i],callback:o,cfg:(0,b.__assign)((0,b.__assign)({},xa(s)),{type:"polar"})})}return n}function xX(n){return Xr(gX,mM,yX,pX,li,Hn,Dn,ha,Tu,Ai(),mX)(n)}var bX=Le({},tn.getDefaultOptions(),{interactions:[{type:"element-active"}],legend:!1,tooltip:{showMarkers:!1},xAxis:{grid:null,tickLine:null,line:null},maxAngle:240}),_X=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="radial-bar",t}return e.getDefaultOptions=function(){return bX},e.prototype.changeData=function(t){this.updateOption({data:t}),mM({chart:this.chart,options:this.options}),this.chart.changeData(t)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return xX},e}(tn),Ws="first-axes-view",Vs="second-axes-view",Hh="series-field-key";function xM(n,e,t,r,i){var a=[];e.forEach(function(f){r.forEach(function(h){var d,g=(d={},d[n]=h[n],d[t]=f,d[f]=h[f],d);a.push(g)})});var o=Object.values((0,v.groupBy)(a,t)),s=o[0],l=s===void 0?[]:s,u=o[1],c=u===void 0?[]:u;return i?[l.reverse(),c.reverse()]:[l,c]}function Du(n){return n!=="vertical"}function SX(n,e,t){var r=e[0],i=e[1],a=r.autoPadding,o=i.autoPadding,s=n.__axisPosition,l=s.layout,u=s.position;if(Du(l)&&u==="top"&&(r.autoPadding=t.instance(a.top,0,a.bottom,a.left),i.autoPadding=t.instance(o.top,a.left,o.bottom,0)),Du(l)&&u==="bottom"&&(r.autoPadding=t.instance(a.top,a.right/2+5,a.bottom,a.left),i.autoPadding=t.instance(o.top,o.right,o.bottom,a.right/2+5)),!Du(l)&&u==="bottom"){var c=a.left>=o.left?a.left:o.left;r.autoPadding=t.instance(a.top,a.right,a.bottom/2+5,c),i.autoPadding=t.instance(a.bottom/2+5,o.right,o.bottom,c)}if(!Du(l)&&u==="top"){var c=a.left>=o.left?a.left:o.left;r.autoPadding=t.instance(a.top,a.right,0,c),i.autoPadding=t.instance(0,o.right,a.top,c)}}function EX(n){var e=n.chart,t=n.options,r=t.data,i=t.xField,a=t.yField,o=t.color,s=t.barStyle,l=t.widthRatio,u=t.legend,c=t.layout,f=xM(i,a,Hh,r,Du(c));u?e.legend(Hh,u):u===!1&&e.legend(!1);var h,d,g=f[0],p=f[1];Du(c)?(h=e.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},id:Ws}),h.coordinate().transpose().reflect("x"),d=e.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},id:Vs}),d.coordinate().transpose(),h.data(g),d.data(p)):(h=e.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}},id:Ws}),d=e.createView({region:{start:{x:0,y:.5},end:{x:1,y:1}},id:Vs}),d.coordinate().reflect("y").rotate(Math.PI*0),h.data(g),d.data(p));var m=Le({},n,{chart:h,options:{widthRatio:l,xField:i,yField:a[0],seriesField:Hh,interval:{color:o,style:s}}});ba(m);var _=Le({},n,{chart:d,options:{xField:i,yField:a[1],seriesField:Hh,widthRatio:l,interval:{color:o,style:s}}});return ba(_),n}function wX(n){var e,t,r,i=n.options,a=n.chart,o=i.xAxis,s=i.yAxis,l=i.xField,u=i.yField,c=dn(a,Ws),f=dn(a,Vs),h={};return(0,v.keys)((i==null?void 0:i.meta)||{}).map(function(d){(0,v.get)(i==null?void 0:i.meta,[d,"alias"])&&(h[d]=i.meta[d].alias)}),a.scale((e={},e[Hh]={sync:!0,formatter:function(d){return(0,v.get)(h,d,d)}},e)),Ri((t={},t[l]=o,t[u[0]]=s[u[0]],t))(Le({},n,{chart:c})),Ri((r={},r[l]=o,r[u[1]]=s[u[1]],r))(Le({},n,{chart:f})),n}function CX(n){var e=n.chart,t=n.options,r=t.xAxis,i=t.yAxis,a=t.xField,o=t.yField,s=t.layout,l=dn(e,Ws),u=dn(e,Vs);return(r==null?void 0:r.position)==="bottom"?u.axis(a,(0,b.__assign)((0,b.__assign)({},r),{label:{formatter:function(){return""}}})):u.axis(a,!1),r===!1?l.axis(a,!1):l.axis(a,(0,b.__assign)({position:Du(s)?"top":"bottom"},r)),i===!1?(l.axis(o[0],!1),u.axis(o[1],!1)):(l.axis(o[0],i[o[0]]),u.axis(o[1],i[o[1]])),e.__axisPosition={position:l.getOptions().axes[a].position,layout:s},n}function MX(n){var e=n.chart;return li(Le({},n,{chart:dn(e,Ws)})),li(Le({},n,{chart:dn(e,Vs)})),n}function AX(n){var e=n.chart,t=n.options,r=t.yField,i=t.yAxis;return Zc(Le({},n,{chart:dn(e,Ws),options:{yAxis:i[r[0]]}})),Zc(Le({},n,{chart:dn(e,Vs),options:{yAxis:i[r[1]]}})),n}function TX(n){var e=n.chart;return Dn(Le({},n,{chart:dn(e,Ws)})),Dn(Le({},n,{chart:dn(e,Vs)})),n}function IX(n){var e=n.chart;return Hn(Le({},n,{chart:dn(e,Ws)})),Hn(Le({},n,{chart:dn(e,Vs)})),n}function OX(n){var e=n.chart,t=n.options,r=t.label,i=t.yField,a=dn(e,Ws),o=dn(e,Vs),s=Xa(a,"interval"),l=Xa(o,"interval");if(!r)s.label(!1),l.label(!1);else{var u=r.callback,c=(0,b.__rest)(r,["callback"]);s.label({fields:[i[0]],callback:u,cfg:xa(c)}),l.label({fields:[i[1]],callback:u,cfg:xa(c)})}return n}function PX(n){return Xr(EX,wX,CX,AX,TX,OX,ha,MX,IX)(n)}var DX=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="bidirectional-bar",t}return e.getDefaultOptions=function(){return Le({},n.getDefaultOptions.call(this),{syncViewPadding:SX})},e.prototype.changeData=function(t){t===void 0&&(t=[]),this.chart.emit(_t.BEFORE_CHANGE_DATA,fa.fromData(this.chart,_t.BEFORE_CHANGE_DATA,null)),this.updateOption({data:t});var r=this.options,i=r.xField,a=r.yField,o=r.layout,s=xM(i,a,Hh,t,Du(o)),l=s[0],u=s[1],c=dn(this.chart,Ws),f=dn(this.chart,Vs);c.data(l),f.data(u),this.chart.render(!0),this.chart.emit(_t.AFTER_CHANGE_DATA,fa.fromData(this.chart,_t.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return PX},e}(tn);function bM(n,e){if(!!(0,v.isArray)(n))return n.find(function(t){return t.type===e})}function _M(n,e){var t=bM(n,e);return t&&t.enable!==!1}function _b(n){var e=n.interactions,t=n.drilldown;return(0,v.get)(t,"enabled")||_M(e,"treemap-drill-down")}function LX(n){var e=n.interactions["drill-down"];if(!!e){var t=e.context.actions.find(function(r){return r.name==="drill-down-action"});t.reset()}}function Sb(n){var e=n.data,t=n.colorField,r=n.enableDrillDown,i=n.hierarchyConfig,a=sM(e,(0,b.__assign)((0,b.__assign)({},i),{type:"hierarchy.treemap",field:"value",as:["x","y"]})),o=[];return a.forEach(function(s){if(s.depth===0||r&&s.depth!==1||!r&&s.children)return null;var l=s.ancestors().map(function(h){return{data:h.data,height:h.height,value:h.value}}),u=r&&(0,v.isArray)(e.path)?l.concat(e.path.slice(1)):l,c=Object.assign({},s.data,(0,b.__assign)({x:s.x,y:s.y,depth:s.depth,value:s.value,path:u},s));if(!s.data[t]&&s.parent){var f=s.ancestors().find(function(h){return h.data[t]});c[t]=f==null?void 0:f.data[t]}else c[t]=s.data[t];c[yg]={hierarchyConfig:i,colorField:t,enableDrillDown:r},o.push(c)}),o}function RX(n){var e=n.options,t=e.colorField;return Le({options:{tooltip:{fields:["name","value",t,"path"],formatter:function(r){return{name:r.name,value:r.value}}}}},n)}function NX(n){var e=n.chart,t=n.options,r=t.color,i=t.colorField,a=t.rectStyle,o=t.hierarchyConfig,s=Sb({data:t.data,colorField:t.colorField,enableDrillDown:_b(t),hierarchyConfig:o});return e.data(s),F0(Le({},n,{options:{xField:"x",yField:"y",seriesField:i,rawFields:["value"],polygon:{color:r,style:a}}})),e.coordinate().reflect("y"),n}function kX(n){var e=n.chart;return e.axis(!1),n}function BX(n){var e=n.drilldown,t=n.interactions,r=t===void 0?[]:t,i=_b(n);return i?Le({},n,{interactions:(0,b.__spreadArrays)(r,[{type:"drill-down",cfg:{drillDownConfig:e,transformData:Sb}}])}):n}function FX(n){var e=n.chart,t=n.options,r=t.interactions,i=t.drilldown;li({chart:e,options:BX(t)});var a=bM(r,"view-zoom");a&&(a.enable!==!1?e.getCanvas().on("mousewheel",function(s){s.preventDefault()}):e.getCanvas().off("mousewheel"));var o=_b(t);return o&&(e.appendPadding=tb(e.appendPadding,(0,v.get)(i,["breadCrumb","position"]))),n}function GX(n){return Xr(RX,Dn,NX,kX,Tu,ha,FX,Hn,Ai())(n)}var zX={colorField:"name",rectStyle:{lineWidth:1,stroke:"#fff"},hierarchyConfig:{tile:"treemapSquarify"},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1,breadCrumb:{position:"bottom-left",rootText:"\u521D\u59CB",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}}}},UX=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="treemap",t}return e.getDefaultOptions=function(){return zX},e.prototype.changeData=function(t){var r=this.options,i=r.colorField,a=r.interactions,o=r.hierarchyConfig;this.updateOption({data:t});var s=Sb({data:t,colorField:i,enableDrillDown:_M(a,"treemap-drill-down"),hierarchyConfig:o});this.chart.changeData(s),LX(this.chart)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return GX},e}(tn),SM="x",EM="y",wM="name",Eb="nodes",wb="edges";function WX(n){return n.target.depth}function VX(n){return n.depth}function XX(n,e){return e-1-n.height}function Cb(n,e){return n.sourceLinks.length?n.depth:e-1}function YX(n){return n.targetLinks.length?n.depth:n.sourceLinks.length?(0,v.minBy)(n.sourceLinks,WX)-1:0}function ry(n){return function(){return n}}function Mb(n,e){for(var t=0,r=0;r<n.length;r++)t+=e(n[r]);return t}function Ab(n,e){for(var t=-Infinity,r=0;r<n.length;r++)t=Math.max(e(n[r]),t);return t}function HX(n,e){for(var t=Infinity,r=0;r<n.length;r++)t=Math.min(e(n[r]),t);return t}function CM(n,e){return ny(n.source,e.source)||n.index-e.index}function MM(n,e){return ny(n.target,e.target)||n.index-e.index}function ny(n,e){return n.y0-e.y0}function Tb(n){return n.value}function jX(n){return n.index}function ZX(n){return n.nodes}function KX(n){return n.links}function AM(n,e){var t=n.get(e);if(!t)throw new Error("missing: "+e);return t}function TM(n){for(var e=n.nodes,t=0,r=e;t<r.length;t++){for(var i=r[t],a=i.y0,o=a,s=0,l=i.sourceLinks;s<l.length;s++){var u=l[s];u.y0=a+u.width/2,a+=u.width}for(var c=0,f=i.targetLinks;c<f.length;c++){var u=f[c];u.y1=o+u.width/2,o+=u.width}}}function $X(){var n=0,e=0,t=1,r=1,i=24,a=8,o,s=jX,l=Cb,u,c,f,h=ZX,d=KX,g=6;function p(ee){var ve={nodes:h(ee),links:d(ee)};return m(ve),_(ve),S(ve),M(ve),V(ve),TM(ve),ve}p.update=function(ee){return TM(ee),ee},p.nodeId=function(ee){return arguments.length?(s=typeof ee=="function"?ee:ry(ee),p):s},p.nodeAlign=function(ee){return arguments.length?(l=typeof ee=="function"?ee:ry(ee),p):l},p.nodeDepth=function(ee){return arguments.length?(u=(typeof ee=="function",ee),p):u},p.nodeSort=function(ee){return arguments.length?(c=ee,p):c},p.nodeWidth=function(ee){return arguments.length?(i=+ee,p):i},p.nodePadding=function(ee){return arguments.length?(a=o=+ee,p):a},p.nodes=function(ee){return arguments.length?(h=typeof ee=="function"?ee:ry(ee),p):h},p.links=function(ee){return arguments.length?(d=typeof ee=="function"?ee:ry(ee),p):d},p.linkSort=function(ee){return arguments.length?(f=ee,p):f},p.size=function(ee){return arguments.length?(n=e=0,t=+ee[0],r=+ee[1],p):[t-n,r-e]},p.extent=function(ee){return arguments.length?(n=+ee[0][0],t=+ee[1][0],e=+ee[0][1],r=+ee[1][1],p):[[n,e],[t,r]]},p.iterations=function(ee){return arguments.length?(g=+ee,p):g};function m(ee){var ve=ee.nodes,ie=ee.links;ve.forEach(function(Te,Je){Te.index=Je,Te.sourceLinks=[],Te.targetLinks=[]});var ye=new Map(ve.map(function(Te){return[s(Te),Te]}));if(ie.forEach(function(Te,Je){Te.index=Je;var Ze=Te.source,ar=Te.target;typeof Ze!="object"&&(Ze=Te.source=AM(ye,Ze)),typeof ar!="object"&&(ar=Te.target=AM(ye,ar)),Ze.sourceLinks.push(Te),ar.targetLinks.push(Te)}),f!=null)for(var Ee=0,we=ve;Ee<we.length;Ee++){var Pe=we[Ee],Ve=Pe.sourceLinks,he=Pe.targetLinks;Ve.sort(f),he.sort(f)}}function _(ee){for(var ve=ee.nodes,ie=0,ye=ve;ie<ye.length;ie++){var Ee=ye[ie];Ee.value=Ee.fixedValue===void 0?Math.max(Mb(Ee.sourceLinks,Tb),Mb(Ee.targetLinks,Tb)):Ee.fixedValue}}function S(ee){for(var ve=ee.nodes,ie=ve.length,ye=new Set(ve),Ee=new Set,we=0;ye.size;){if(ye.forEach(function(Te){Te.depth=we;for(var Je=0,Ze=Te.sourceLinks;Je<Ze.length;Je++){var ar=Ze[Je].target;Ee.add(ar)}}),++we>ie)throw new Error("circular link");ye=Ee,Ee=new Set}if(u)for(var Pe=Math.max(Ab(ve,function(Te){return Te.depth})+1,0),Ve=void 0,he=0;he<ve.length;he++)Ve=ve[he],Ve.depth=u.call(null,Ve,Pe)}function M(ee){for(var ve=ee.nodes,ie=ve.length,ye=new Set(ve),Ee=new Set,we=0;ye.size;){if(ye.forEach(function(Pe){Pe.height=we;for(var Ve=0,he=Pe.targetLinks;Ve<he.length;Ve++){var Te=he[Ve].source;Ee.add(Te)}}),++we>ie)throw new Error("circular link");ye=Ee,Ee=new Set}}function R(ee){for(var ve=ee.nodes,ie=Math.max(Ab(ve,function(ar){return ar.depth})+1,0),ye=(t-n-i)/(ie-1),Ee=new Array(ie).fill(0).map(function(){return[]}),we=0,Pe=ve;we<Pe.length;we++){var Ve=Pe[we],he=Math.max(0,Math.min(ie-1,Math.floor(l.call(null,Ve,ie))));Ve.layer=he,Ve.x0=n+he*ye,Ve.x1=Ve.x0+i,Ee[he]?Ee[he].push(Ve):Ee[he]=[Ve]}if(c)for(var Te=0,Je=Ee;Te<Je.length;Te++){var Ze=Je[Te];Ze.sort(c)}return Ee}function F(ee){for(var ve=HX(ee,function(cr){return(r-e-(cr.length-1)*o)/Mb(cr,Tb)}),ie=0,ye=ee;ie<ye.length;ie++){for(var Ee=ye[ie],we=e,Pe=0,Ve=Ee;Pe<Ve.length;Pe++){var he=Ve[Pe];he.y0=we,he.y1=we+he.value*ve,we=he.y1+o;for(var Te=0,Je=he.sourceLinks;Te<Je.length;Te++){var Ze=Je[Te];Ze.width=Ze.value*ve}}we=(r-we+o)/(Ee.length+1);for(var ar=0;ar<Ee.length;++ar){var he=Ee[ar];he.y0+=we*(ar+1),he.y1+=we*(ar+1)}te(Ee)}}function V(ee){var ve=R(ee);o=Math.min(a,(r-e)/(Ab(ve,function(we){return we.length})-1)),F(ve);for(var ie=0;ie<g;++ie){var ye=Math.pow(.99,ie),Ee=Math.max(1-ye,(ie+1)/g);at(ve,ye,Ee),nt(ve,ye,Ee)}}function nt(ee,ve,ie){for(var ye=1,Ee=ee.length;ye<Ee;++ye){for(var we=ee[ye],Pe=0,Ve=we;Pe<Ve.length;Pe++){for(var he=Ve[Pe],Te=0,Je=0,Ze=0,ar=he.targetLinks;Ze<ar.length;Ze++){var cr=ar[Ze],Dr=cr.source,sn=cr.value,Wr=sn*(he.layer-Dr.layer);Te+=Kt(Dr,he)*Wr,Je+=Wr}if(Je>0){var ai=(Te/Je-he.y0)*ve;he.y0+=ai,he.y1+=ai,Ct(he)}}c===void 0&&we.sort(ny),we.length&&xt(we,ie)}}function at(ee,ve,ie){for(var ye=ee.length,Ee=ye-2;Ee>=0;--Ee){for(var we=ee[Ee],Pe=0,Ve=we;Pe<Ve.length;Pe++){for(var he=Ve[Pe],Te=0,Je=0,Ze=0,ar=he.sourceLinks;Ze<ar.length;Ze++){var cr=ar[Ze],Dr=cr.target,sn=cr.value,Wr=sn*(Dr.layer-he.layer);Te+=ne(he,Dr)*Wr,Je+=Wr}if(Je>0){var ai=(Te/Je-he.y0)*ve;he.y0+=ai,he.y1+=ai,Ct(he)}}c===void 0&&we.sort(ny),we.length&&xt(we,ie)}}function xt(ee,ve){var ie=ee.length>>1,ye=ee[ie];Tt(ee,ye.y0-o,ie-1,ve),gt(ee,ye.y1+o,ie+1,ve),Tt(ee,r,ee.length-1,ve),gt(ee,e,0,ve)}function gt(ee,ve,ie,ye){for(;ie<ee.length;++ie){var Ee=ee[ie],we=(ve-Ee.y0)*ye;we>1e-6&&(Ee.y0+=we,Ee.y1+=we),ve=Ee.y1+o}}function Tt(ee,ve,ie,ye){for(;ie>=0;--ie){var Ee=ee[ie],we=(Ee.y1-ve)*ye;we>1e-6&&(Ee.y0-=we,Ee.y1-=we),ve=Ee.y0-o}}function Ct(ee){var ve=ee.sourceLinks,ie=ee.targetLinks;if(f===void 0){for(var ye=0,Ee=ie;ye<Ee.length;ye++){var we=Ee[ye].source.sourceLinks;we.sort(MM)}for(var Pe=0,Ve=ve;Pe<Ve.length;Pe++){var he=Ve[Pe].target.targetLinks;he.sort(CM)}}}function te(ee){if(f===void 0)for(var ve=0,ie=ee;ve<ie.length;ve++){var ye=ie[ve],Ee=ye.sourceLinks,we=ye.targetLinks;Ee.sort(MM),we.sort(CM)}}function Kt(ee,ve){for(var ie=ee.y0-(ee.sourceLinks.length-1)*o/2,ye=0,Ee=ee.sourceLinks;ye<Ee.length;ye++){var we=Ee[ye],Pe=we.target,Ve=we.width;if(Pe===ve)break;ie+=Ve+o}for(var he=0,Te=ve.targetLinks;he<Te.length;he++){var Je=Te[he],Pe=Je.source,Ve=Je.width;if(Pe===ee)break;ie-=Ve}return ie}function ne(ee,ve){for(var ie=ve.y0-(ve.targetLinks.length-1)*o/2,ye=0,Ee=ve.targetLinks;ye<Ee.length;ye++){var we=Ee[ye],Pe=we.source,Ve=we.width;if(Pe===ee)break;ie+=Ve+o}for(var he=0,Te=ee.sourceLinks;he<Te.length;he++){var Je=Te[he],Pe=Je.target,Ve=Je.width;if(Pe===ve)break;ie-=Ve}return ie}return p}var QX={left:VX,right:XX,center:YX,justify:Cb},JX={nodeId:function(n){return n.index},nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodeSort:void 0};function qX(n){var e=(0,v.isString)(n)?QX[n]:(0,v.isFunction)(n)?n:null;return e||Cb}function t7(n){return(0,v.assign)({},JX,n)}function e7(n,e){var t=t7(n),r=t.nodeId,i=t.nodeSort,a=t.nodeAlign,o=t.nodeWidth,s=t.nodePadding,l=t.nodeDepth,u=$X().nodeSort(i).nodeWidth(o).nodePadding(s).nodeDepth(l).nodeAlign(qX(a)).extent([[0,0],[1,1]]).nodeId(r),c=u(e);return c.nodes.forEach(function(f){var h=f.x0,d=f.x1,g=f.y0,p=f.y1;f.x=[h,d,d,h],f.y=[g,g,p,p]}),c.links.forEach(function(f){var h=f.source,d=f.target,g=h.x1,p=d.x0;f.x=[g,g,p,p];var m=f.width/2;f.y=[f.y0+m,f.y0-m,f.y1+m,f.y1-m]}),c}function r7(n,e,t){var r=[];return n.forEach(function(i){var a=i[e],o=i[t];r.includes(a)||r.push(a),r.includes(o)||r.push(o)}),r}function n7(n,e,t,r){var i={};return e.forEach(function(a){i[a]={},e.forEach(function(o){i[a][o]=0})}),n.forEach(function(a){i[a[t]][a[r]]=1}),i}function i7(n,e,t){if(!(0,v.isArray)(n))return[];var r=[],i=r7(n,e,t),a=n7(n,i,e,t),o={};i.forEach(function(l){o[l]=0});function s(l){o[l]=1,i.forEach(function(u){if(a[l][u]!=0)if(o[u]==1)r.push(l+"_"+u);else{if(o[u]==-1)return;s(u)}}),o[l]=-1}return i.forEach(function(l){o[l]!=-1&&s(l)}),r.length!==0&&console.warn("sankey data contains circle, "+r.length+" records removed.",r),n.filter(function(l){return r.findIndex(function(u){return u===l[e]+"_"+l[t]})<0})}function a7(n,e,t){return og(n)?n/t:e}function o7(n,e,t){return og(n)?n/t:e}function IM(n,e,t){var r=n.data,i=n.sourceField,a=n.targetField,o=n.weightField,s=n.nodeAlign,l=n.nodeSort,u=n.nodePadding,c=n.nodePaddingRatio,f=n.nodeWidth,h=n.nodeWidthRatio,d=n.nodeDepth,g=n.rawFields,p=g===void 0?[]:g,m=fC(i7(r,i,a),i,a,o,p),_=e7({nodeAlign:s,nodePadding:o7(u,c,t),nodeWidth:a7(f,h,e),nodeSort:l,nodeDepth:d},m),S=_.nodes,M=_.links;return{nodes:S.map(function(R){return(0,b.__assign)((0,b.__assign)({},Wn(R,(0,b.__spreadArrays)(["x","y","name"],p))),{isNode:!0})}),edges:M.map(function(R){return(0,b.__assign)((0,b.__assign)({source:R.source.name,target:R.target.name,name:R.source.name||R.target.name},Wn(R,(0,b.__spreadArrays)(["x","y","value"],p))),{isNode:!1})})}}function s7(n){var e=n.chart,t=n.options,r=t.color,i=t.nodeStyle,a=t.edgeStyle,o=t.label,s=t.tooltip;e.legend(!1),e.tooltip(s),e.axis(!1),e.coordinate().reflect("y");var l=IM(t,e.width,e.height),u=l.nodes,c=l.edges,f=e.createView({id:wb});f.data(c),pC({chart:f,options:{xField:SM,yField:EM,seriesField:wM,edge:{color:r,style:a,shape:"arc"},tooltip:s,state:{active:{style:{opacity:.8,lineWidth:0}}}}});var h=e.createView({id:Eb});return h.data(u),F0({chart:h,options:{xField:SM,yField:EM,seriesField:wM,polygon:{color:r,style:i},label:o,tooltip:s}}),e.interaction("element-active"),e.scale({x:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},y:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},name:{sync:"color",type:"cat"}}),n}function l7(n){var e=n.chart,t=n.options,r=t.animation;typeof r=="boolean"?e.animate(r):e.animate(!0);var i=(0,b.__spreadArrays)(e.views[0].geometries,e.views[1].geometries);return i.forEach(function(a){a.animate(r)}),n}function u7(n){var e=n.chart,t=n.options,r=t.nodeDraggable,i="sankey-node-draggable";return r?e.interaction(i):e.removeInteraction(i),n}function c7(n){return Xr(s7,li,u7,l7,Dn)(n)}var f7=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.isDragging=!1,t}return e.prototype.isNodeElement=function(){var t=(0,v.get)(this.context,"event.target");if(t){var r=t.get("element");return r&&r.getModel().data.isNode}return!1},e.prototype.getNodeView=function(){return dn(this.context.view,Eb)},e.prototype.getEdgeView=function(){return dn(this.context.view,wb)},e.prototype.getCurrentDatumIdx=function(t){return this.getNodeView().geometries[0].elements.indexOf(t)},e.prototype.start=function(){if(this.isNodeElement()){this.prevPoint={x:(0,v.get)(this.context,"event.x"),y:(0,v.get)(this.context,"event.y")};var t=this.context.event.target.get("element"),r=this.getCurrentDatumIdx(t);if(r===-1)return;this.currentElementIdx=r,this.context.isDragging=!0,this.isDragging=!0,this.prevNodeAnimateCfg=this.getNodeView().getOptions().animate,this.prevEdgeAnimateCfg=this.getEdgeView().getOptions().animate,this.getNodeView().animate(!1),this.getEdgeView().animate(!1)}},e.prototype.translate=function(){if(this.isDragging){var t=this.context.view,r={x:(0,v.get)(this.context,"event.x"),y:(0,v.get)(this.context,"event.y")},i=r.x-this.prevPoint.x,a=r.y-this.prevPoint.y,o=this.getNodeView(),s=o.geometries[0].elements[this.currentElementIdx];if(s&&s.getModel()){var l=s.getModel().data,u=o.getOptions().data,c=o.getCoordinate(),f={x:i/c.getWidth(),y:a/c.getHeight()},h=(0,b.__assign)((0,b.__assign)({},l),{x:l.x.map(function(_){return _+=f.x}),y:l.y.map(function(_){return _+=f.y})}),d=(0,b.__spreadArrays)(u);d[this.currentElementIdx]=h,o.data(d);var g=l.name,p=this.getEdgeView(),m=p.getOptions().data;m.forEach(function(_){_.source===g&&(_.x[0]+=f.x,_.x[1]+=f.x,_.y[0]+=f.y,_.y[1]+=f.y),_.target===g&&(_.x[2]+=f.x,_.x[3]+=f.x,_.y[2]+=f.y,_.y[3]+=f.y)}),p.data(m),this.prevPoint=r,t.render(!0)}}},e.prototype.end=function(){this.isDragging=!1,this.context.isDragging=!1,this.prevPoint=null,this.currentElementIdx=null,this.getNodeView().animate(this.prevNodeAnimateCfg),this.getEdgeView().animate(this.prevEdgeAnimateCfg)},e}(Si);Kr("sankey-node-drag",f7),An("sankey-node-draggable",{showEnable:[{trigger:"polygon:mouseenter",action:"cursor:pointer"},{trigger:"polygon:mouseleave",action:"cursor:default"}],start:[{trigger:"polygon:mousedown",action:"sankey-node-drag:start"}],processing:[{trigger:"plot:mousemove",action:"sankey-node-drag:translate"},{isEnable:function(n){return n.isDragging},trigger:"plot:mousemove",action:"cursor:move"}],end:[{trigger:"plot:mouseup",action:"sankey-node-drag:end"}]});var h7=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="sankey",t}return e.getDefaultOptions=function(){return{appendPadding:8,syncViewPadding:!0,nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.3,lineWidth:0},label:{fields:["x","name"],callback:function(t,r){var i=t[1]===1;return{style:{fill:"#545454",textAlign:i?"end":"start"},offsetX:i?-8:8,content:r}},layout:[{type:"hide-overlap"}]},tooltip:{showTitle:!1,showMarkers:!1,shared:!1,fields:["name","source","target","value","isNode"],showContent:function(t){return!(0,v.get)(t,[0,"data","isNode"])},formatter:function(t){var r=t.source,i=t.target,a=t.value;return{name:r+" -> "+i,value:a}}},nodeWidthRatio:.008,nodePaddingRatio:.01,animation:{appear:{animation:"wave-in"},enter:{animation:"wave-in"}}}},e.prototype.changeData=function(t){this.updateOption({data:t});var r=IM(this.options,this.chart.width,this.chart.height),i=r.nodes,a=r.edges,o=dn(this.chart,Eb),s=dn(this.chart,wb);o.changeData(i),s.changeData(a)},e.prototype.getSchemaAdaptor=function(){return c7},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e}(tn),d7={y:0,nodeWidthRatio:.05,weight:!1,nodePaddingRatio:.1,id:function(n){return n.id},source:function(n){return n.source},target:function(n){return n.target},sourceWeight:function(n){return n.value||1},targetWeight:function(n){return n.value||1},sortBy:null};function v7(n,e,t){(0,v.forIn)(n,function(r,i){r.inEdges=e.filter(function(a){return""+t.target(a)==""+i}),r.outEdges=e.filter(function(a){return""+t.source(a)==""+i}),r.edges=r.outEdges.concat(r.inEdges),r.frequency=r.edges.length,r.value=0,r.inEdges.forEach(function(a){r.value+=t.targetWeight(a)}),r.outEdges.forEach(function(a){r.value+=t.sourceWeight(a)})})}function g7(n,e){var t={weight:function(i,a){return a.value-i.value},frequency:function(i,a){return a.frequency-i.frequency},id:function(i,a){return(""+e.id(i)).localeCompare(""+e.id(a))}},r=t[e.sortBy];!r&&(0,v.isFunction)(e.sortBy)&&(r=e.sortBy),r&&n.sort(r)}function p7(n,e){var t=n.length;if(!t)throw new TypeError("Invalid nodes: it's empty!");if(e.weight){var r=e.nodePaddingRatio;if(r<0||r>=1)throw new TypeError("Invalid nodePaddingRatio: it must be in range [0, 1)!");var i=r/(2*t),a=e.nodeWidthRatio;if(a<=0||a>=1)throw new TypeError("Invalid nodeWidthRatio: it must be in range (0, 1)!");var o=0;n.forEach(function(l){o+=l.value}),n.forEach(function(l){l.weight=l.value/o,l.width=l.weight*(1-r),l.height=a}),n.forEach(function(l,u){for(var c=0,f=u-1;f>=0;f--)c+=n[f].width+2*i;var h=l.minX=i+c,d=l.maxX=l.minX+l.width,g=l.minY=e.y-a/2,p=l.maxY=g+a;l.x=[h,d,d,h],l.y=[g,g,p,p]})}else{var s=1/t;n.forEach(function(l,u){l.x=(u+.5)*s,l.y=e.y})}return n}function y7(n,e,t){if(t.weight){var r={};(0,v.forIn)(n,function(i,a){r[a]=i.value}),e.forEach(function(i){var a=t.source(i),o=t.target(i),s=n[a],l=n[o];if(s&&l){var u=r[a],c=t.sourceWeight(i),f=s.minX+(s.value-u)/s.value*s.width,h=f+c/s.value*s.width;r[a]-=c;var d=r[o],g=t.targetWeight(i),p=l.minX+(l.value-d)/l.value*l.width,m=p+g/l.value*l.width;r[o]-=g;var _=t.y;i.x=[f,h,p,m],i.y=[_,_,_,_],i.source=s,i.target=l}})}else e.forEach(function(i){var a=n[t.source(i)],o=n[t.target(i)];a&&o&&(i.x=[a.x,o.x],i.y=[a.y,o.y],i.source=a,i.target=o)});return e}function m7(n){return(0,v.assign)({},d7,n)}function x7(n,e){var t=m7(n),r={},i=e.nodes,a=e.links;i.forEach(function(l){var u=t.id(l);r[u]=l}),v7(r,a,t),g7(i,t);var o=p7(i,t),s=y7(r,a,t);return{nodes:o,links:s}}var OM="x",PM="y",DM="name",LM="source",b7={nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.5,lineWidth:2},label:{fields:["x","name"],callback:function(n,e){var t=(n[0]+n[1])/2,r=t>.5?-4:4;return{labelEmit:!0,style:{fill:"#8c8c8c"},offsetX:r,content:e}}},tooltip:{showTitle:!1,showMarkers:!1,fields:["source","target","value","isNode"],showContent:function(n){return!(0,v.get)(n,[0,"data","isNode"])},formatter:function(n){var e=n.source,t=n.target,r=n.value;return{name:e+" -> "+t,value:r}}},interactions:[{type:"element-active"}],weight:!0,nodePaddingRatio:.1,nodeWidthRatio:.05};function _7(n){var e=n.options,t=e.data,r=e.sourceField,i=e.targetField,a=e.weightField,o=e.nodePaddingRatio,s=e.nodeWidthRatio,l=e.rawFields,u=l===void 0?[]:l,c=fC(t,r,i,a),f=x7({weight:!0,nodePaddingRatio:o,nodeWidthRatio:s},c),h=f.nodes,d=f.links,g=h.map(function(m){return(0,b.__assign)((0,b.__assign)({},Wn(m,(0,b.__spreadArrays)(["id","x","y","name"],u))),{isNode:!0})}),p=d.map(function(m){return(0,b.__assign)((0,b.__assign)({source:m.source.name,target:m.target.name,name:m.source.name||m.target.name},Wn(m,(0,b.__spreadArrays)(["x","y","value"],u))),{isNode:!1})});return(0,b.__assign)((0,b.__assign)({},n),{ext:(0,b.__assign)((0,b.__assign)({},n.ext),{chordData:{nodesData:g,edgesData:p}})})}function S7(n){var e,t=n.chart;return t.scale((e={x:{sync:!0,nice:!0},y:{sync:!0,nice:!0,max:1}},e[DM]={sync:"color"},e[LM]={sync:"color"},e)),n}function E7(n){var e=n.chart;return e.axis(!1),n}function w7(n){var e=n.chart;return e.legend(!1),n}function C7(n){var e=n.chart,t=n.options,r=t.tooltip;return e.tooltip(r),n}function M7(n){var e=n.chart;return e.coordinate("polar").reflect("y"),n}function A7(n){var e=n.chart,t=n.options,r=n.ext.chordData.nodesData,i=t.nodeStyle,a=t.label,o=t.tooltip,s=e.createView();return s.data(r),F0({chart:s,options:{xField:OM,yField:PM,seriesField:DM,polygon:{style:i},label:a,tooltip:o}}),n}function T7(n){var e=n.chart,t=n.options,r=n.ext.chordData.edgesData,i=t.edgeStyle,a=t.tooltip,o=e.createView();o.data(r);var s={xField:OM,yField:PM,seriesField:LM,edge:{style:i,shape:"arc"},tooltip:a};return pC({chart:o,options:s}),n}function I7(n){var e=n.chart,t=n.options,r=t.animation;return typeof r=="boolean"?e.animate(r):e.animate(!0),(0,v.each)(l6(e),function(i){i.animate(r)}),n}function O7(n){return Xr(Dn,_7,M7,S7,E7,w7,C7,T7,A7,li,Iu,I7)(n)}var P7=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="chord",t}return e.getDefaultOptions=function(){return b7},e.prototype.setState=function(t,r,i){i===void 0&&(i=!0);var a=ig(this.chart);(0,v.each)(a,function(o){r(o.getData())&&o.setState(t,i)})},e.prototype.getStates=function(){var t=ig(this.chart),r=[];return(0,v.each)(t,function(i){var a=i.getData(),o=i.getStates();(0,v.each)(o,function(s){r.push({data:a,state:s,geometry:i.geometry,element:i})})}),r},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return O7},e}(tn),Tot=function(n){(0,b.__extends)(e,n);function e(t,r,i,a){var o=n.call(this,t,Le({},a,r))||this;return o.type="g2-plot",o.defaultOptions=a,o.adaptor=i,o}return e.prototype.getDefaultOptions=function(){return this.defaultOptions},e.prototype.getSchemaAdaptor=function(){return this.adaptor},e}(tn),D7={line:bC,pie:RC,column:J1,bar:TC,area:EC,gauge:gM,"tiny-line":QC,"tiny-column":qC,"tiny-area":$C,"ring-progress":f2,progress:l2,scatter:UC,histogram:i2,funnel:I2},L7={line:_C,pie:NC,column:MC,bar:IC,area:wC,gauge:pM,"tiny-line":JC,"tiny-column":t2,"tiny-area":e2,"ring-progress":h2,progress:u2,scatter:WC,histogram:a2,funnel:O2},R7={pie:{label:!1},column:{tooltip:{showMarkers:!1}},bar:{tooltip:{showMarkers:!1}}};function RM(n,e,t){var r=L7[n];if(!r){console.error("could not find "+n+" plot");return}var i=D7[n];i({chart:e,options:Le({},r.getDefaultOptions(),(0,v.get)(R7,n,{}),t)})}function N7(n){var e=n.chart,t=n.options,r=t.views,i=t.legend;return(0,v.each)(r,function(a){var o=a.region,s=a.data,l=a.meta,u=a.axes,c=a.coordinate,f=a.interactions,h=a.annotations,d=a.tooltip,g=a.geometries,p=e.createView({region:o});p.data(s);var m={};u&&(0,v.each)(u,function(_,S){m[S]=Wn(_,vo)}),m=Le({},l,m),p.scale(m),u?(0,v.each)(u,function(_,S){p.axis(S,_)}):p.axis(!1),p.coordinate(c),(0,v.each)(g,function(_){var S=go({chart:p,options:_}).ext,M=_.adjust;M&&S.geometry.adjust(M)}),(0,v.each)(f,function(_){_.enable===!1?p.removeInteraction(_.type):p.interaction(_.type,_.cfg)}),(0,v.each)(h,function(_){p.annotation()[_.type]((0,b.__assign)({},_))}),typeof a.animation=="boolean"?p.animate(!1):(p.animate(!0),(0,v.each)(p.geometries,function(_){_.animate(a.animation)})),d&&(p.interaction("tooltip"),p.tooltip(d))}),i?(0,v.each)(i,function(a,o){e.legend(o,a)}):e.legend(!1),e.tooltip(t.tooltip),n}function k7(n){var e=n.chart,t=n.options,r=t.plots;return(0,v.each)(r,function(i){var a=i.type,o=i.region,s=i.options,l=s===void 0?{}:s,u=l.tooltip,c=e.createView((0,b.__assign)({region:o},Wn(l,gC)));u&&c.interaction("tooltip"),RM(a,c,l)}),n}function B7(n){return Xr(Hn,N7,k7,li,Hn,Dn,ha)(n)}function F7(n,e){var t=n.getModel(),r=t.data,i;return(0,v.isArray)(r)?i=r[0][e]:i=r[e],i}function G7(n){var e=Rh(n);(0,v.each)(e,function(t){t.hasState("active")&&t.setState("active",!1),t.hasState("selected")&&t.setState("selected",!1),t.hasState("inactive")&&t.setState("inactive",!1)})}var z7=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getAssociationItems=function(t,r){var i,a=this.context.event,o=r||{},s=o.linkField,l=o.dim,u=[];if((i=a.data)===null||i===void 0?void 0:i.data){var c=a.data.data;(0,v.each)(t,function(f){var h,d,g=s;if(l==="x"?g=f.getXScale().field:l==="y"?g=(h=f.getYScales().find(function(m){return m.field===g}))===null||h===void 0?void 0:h.field:g||(g=(d=f.getGroupScales()[0])===null||d===void 0?void 0:d.field),!!g){var p=(0,v.map)(Rh(f),function(m){var _=!1,S=!1,M=(0,v.isArray)(c)?(0,v.get)(c[0],g):(0,v.get)(c,g);return F7(m,g)===M?_=!0:S=!0,{element:m,view:f,active:_,inactive:S}});u.push.apply(u,p)}})}return u},e.prototype.showTooltip=function(t){var r=nC(this.context.view),i=this.getAssociationItems(r,t);(0,v.each)(i,function(a){if(a.active){var o=a.element.shape.getCanvasBBox();a.view.showTooltip({x:o.minX+o.width/2,y:o.minY+o.height/2})}})},e.prototype.hideTooltip=function(){var t=nC(this.context.view);(0,v.each)(t,function(r){r.hideTooltip()})},e.prototype.active=function(t){var r=ag(this.context.view),i=this.getAssociationItems(r,t);(0,v.each)(i,function(a){var o=a.active,s=a.element;o&&s.setState("active",!0)})},e.prototype.selected=function(t){var r=ag(this.context.view),i=this.getAssociationItems(r,t);(0,v.each)(i,function(a){var o=a.active,s=a.element;o&&s.setState("selected",!0)})},e.prototype.highlight=function(t){var r=ag(this.context.view),i=this.getAssociationItems(r,t);(0,v.each)(i,function(a){var o=a.inactive,s=a.element;o&&s.setState("inactive",!0)})},e.prototype.reset=function(){var t=ag(this.context.view);(0,v.each)(t,function(r){G7(r)})},e}(Si);Kr("association",z7),An("association-active",{start:[{trigger:"element:mouseenter",action:"association:active"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),An("association-selected",{start:[{trigger:"element:mouseenter",action:"association:selected"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),An("association-highlight",{start:[{trigger:"element:mouseenter",action:"association:highlight"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),An("association-tooltip",{start:[{trigger:"element:mousemove",action:"association:showTooltip"}],end:[{trigger:"element:mouseleave",action:"association:hideTooltip"}]});var NM=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="mix",t}return e.prototype.getSchemaAdaptor=function(){return B7},e}(tn);function U7(n,e){var t=e.data,r=e.coordinate,i=e.interactions,a=e.annotations,o=e.animation,s=e.tooltip,l=e.axes,u=e.meta,c=e.geometries;t&&n.data(t);var f={};l&&(0,v.each)(l,function(h,d){f[d]=Wn(h,vo)}),f=Le({},u,f),n.scale(f),r&&n.coordinate(r),l===!1?n.axis(!1):(0,v.each)(l,function(h,d){n.axis(d,h)}),(0,v.each)(c,function(h){var d=go({chart:n,options:h}).ext,g=h.adjust;g&&d.geometry.adjust(g)}),(0,v.each)(i,function(h){h.enable===!1?n.removeInteraction(h.type):n.interaction(h.type,h.cfg)}),(0,v.each)(a,function(h){n.annotation()[h.type]((0,b.__assign)({},h))}),typeof o=="boolean"?n.animate(!1):(n.animate(!0),(0,v.each)(n.geometries,function(h){h.animate(o)})),s?(n.interaction("tooltip"),n.tooltip(s)):s===!1&&n.removeInteraction("tooltip")}function W7(n){var e=n.chart,t=n.options,r=t.type,i=t.data,a=t.fields,o=t.eachView,s=(0,v.omit)(t,["type","data","fields","eachView","axes","meta","tooltip","coordinate","theme","legend","interactions","annotations"]);return e.data(i),e.facet(r,(0,b.__assign)((0,b.__assign)({},s),{fields:a,eachView:function(l,u){var c=o(l,u);if(c.geometries)U7(l,c);else{var f=c,h=f.options;h.tooltip&&l.interaction("tooltip"),RM(f.type,l,h)}}})),n}function V7(n){var e=n.chart,t=n.options,r=t.axes,i=t.meta,a=t.tooltip,o=t.coordinate,s=t.theme,l=t.legend,u=t.interactions,c=t.annotations,f={};return r&&(0,v.each)(r,function(h,d){f[d]=Wn(h,vo)}),f=Le({},i,f),e.scale(f),e.coordinate(o),r?(0,v.each)(r,function(h,d){e.axis(d,h)}):e.axis(!1),a?(e.interaction("tooltip"),e.tooltip(a)):a===!1&&e.removeInteraction("tooltip"),e.legend(l),s&&e.theme(s),(0,v.each)(u,function(h){h.enable===!1?e.removeInteraction(h.type):e.interaction(h.type,h.cfg)}),(0,v.each)(c,function(h){e.annotation()[h.type]((0,b.__assign)({},h))}),n}function X7(n){return Xr(Dn,W7,V7)(n)}var Y7={title:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},rowTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},columnTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}}},H7=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="area",t}return e.getDefaultOptions=function(){return Y7},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return X7},e}(tn),j7={field:"value",as:["x","y","r"],sort:function(n,e){return e.value-n.value}};function Z7(n,e){e=(0,v.assign)({},j7,e);var t=e.as;if(!(0,v.isArray)(t)||t.length!==3)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');var r;try{r=hb(e)}catch(u){console.warn(u)}var i=function(u){return q2().size(e.size).padding(e.padding)(Wh(u).sum(function(c){return c[r]}).sort(e.sort))},a=i(n),o=t[0],s=t[1],l=t[2];return a.each(function(u){u[o]=u.x,u[s]=u.y,u[l]=u.r}),db(a)}function kM(n){var e=n.data,t=n.hierarchyConfig,r=n.rawFields,i=r===void 0?[]:r,a=n.enableDrillDown,o=Z7(e,(0,b.__assign)((0,b.__assign)({},t),{field:"value",as:["x","y","r"]})),s=[];return o.forEach(function(l){for(var u,c=l.data.name,f=(0,b.__assign)({},l);f.depth>1;)c=((u=f.parent.data)===null||u===void 0?void 0:u.name)+" / "+c,f=f.parent;if(a&&l.depth>2)return null;var h=Le({},l.data,(0,b.__assign)((0,b.__assign)((0,b.__assign)({},Wn(l.data,i)),{path:c}),l));h.ext=t,h[yg]={hierarchyConfig:t,rawFields:i,enableDrillDown:a},s.push(h)}),s}function BM(n){var e=n.map(function(r){return W0(r)}),t=[0,0,0,0];return e.length>0&&(t=t.map(function(r,i){return e.forEach(function(a,o){r+=e[o][i]}),r})),t}function FM(n,e,t){var r=BM([n,e]),i=r[0],a=r[1],o=r[2],s=r[3],l=t.width,u=t.height,c=l-(s+a),f=u-(i+o),h=Math.min(c,f),d=(c-h)/2,g=(f-h)/2,p=i+g,m=a+d,_=o+g,S=s+d,M=[p,m,_,S],R=h<0?0:h;return{finalPadding:M,finalSize:R}}var K7=["x","y","r","name","value","path","depth"],$7={colorField:"name",autoFit:!0,pointStyle:{lineWidth:0,stroke:"#fff"},legend:!1,hierarchyConfig:{size:[1,1],padding:0},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1}};function Q7(n){var e=n.chart,t=Math.min(e.viewBBox.width,e.viewBBox.height);return Le({options:{size:function(r){var i=r.r;return i*t}}},n)}function J7(n){var e=n.options,t=n.chart,r=t.viewBBox,i=e.padding,a=e.appendPadding,o=e.drilldown,s=a;if(o==null?void 0:o.enabled){var l=tb(t.appendPadding,(0,v.get)(o,["breadCrumb","position"]));s=BM([l,a])}var u=FM(i,s,r).finalPadding;return t.padding=u,t.appendPadding=0,n}function q7(n){var e=n.chart,t=n.options,r=e.padding,i=e.appendPadding,a=t.color,o=t.colorField,s=t.pointStyle,l=t.hierarchyConfig,u=t.sizeField,c=t.rawFields,f=c===void 0?[]:c,h=t.drilldown,d=kM({data:t.data,hierarchyConfig:l,enableDrillDown:h==null?void 0:h.enabled,rawFields:f});e.data(d);var g=e.viewBBox,p=FM(r,i,g).finalSize,m=function(_){var S=_.r;return S*p};return u&&(m=function(_){return _[u]*p}),Ao(Le({},n,{options:{xField:"x",yField:"y",seriesField:o,sizeField:u,rawFields:(0,b.__spreadArrays)(K7,f),point:{color:a,style:s,shape:"circle",size:m}}})),n}function tY(n){return Xr(Ri({},{x:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0},y:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0}}))(n)}function eY(n){var e=n.chart,t=n.options,r=t.tooltip;if(r===!1)e.tooltip(!1);else{var i=r;(0,v.get)(r,"fields")||(i=Le({},{customItems:function(a){return a.map(function(o){var s=(0,v.get)(e.getOptions(),"scales"),l=(0,v.get)(s,["name","formatter"],function(c){return c}),u=(0,v.get)(s,["value","formatter"],function(c){return c});return(0,b.__assign)((0,b.__assign)({},o),{name:l(o.data.name),value:u(o.data.value)})})}},i)),e.tooltip(i)}return n}function rY(n){var e=n.chart;return e.axis(!1),n}function nY(n){var e=n.drilldown,t=n.interactions,r=t===void 0?[]:t;return(e==null?void 0:e.enabled)?Le({},n,{interactions:(0,b.__spreadArrays)(r,[{type:"drill-down",cfg:{drillDownConfig:e,transformData:kM,enableDrillDown:!0}}])}):n}function iY(n){var e=n.chart,t=n.options;return li({chart:e,options:nY(t)}),n}function aY(n){return Xr(Q7,J7,Dn,tY,q7,rY,Tu,eY,iY,Hn,Ai())(n)}var Iot=function(n){(0,b.__extends)(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="circle-packing",t}return e.getDefaultOptions=function(){return $7},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return aY},e.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))},e}(tn),jh;(function(n){n.DEV="DEV",n.BETA="BETA",n.STABLE="STABLE"})(jh||(jh={}));function oY(n,e){console.warn(n===jh.DEV?"Plot '"+e+"' is in DEV stage, just give us issues.":n===jh.BETA?"Plot '"+e+"' is in BETA stage, DO NOT use it in production env.":n===jh.STABLE?"Plot '"+e+`' is in STABLE stage, import it by "import { `+e+` } from '@antv/g2plot'".`:"invalid Stage type.")}var Oot=function(){function n(){}return Object.defineProperty(n,"MultiView",{get:function(){return oY(jh.STABLE,"MultiView"),NM},enumerable:!1,configurable:!0}),n}(),Pot="2.3.25";dC("en-US",b6),dC("zh-CN",_6);var GM={scale:Ri,legend:Tu,tooltip:ha,annotation:Ai,interaction:li,theme:Dn,animation:Hn},sY=x(5672),lY=function(n,e){var t=document.createElement("div");return e==="tooltip"&&(t.className="g2-tooltip"),sY.render(n,t),t},uY=lY,cY=function(n,e){var t={}.toString;return t.call(n)==="[object "+e+"]"},fY=function(n){if(!n)return n;var e={};for(var t in n)e[t]=n[t];return e},bg=function(n){if(!n)return n;var e=new n.constructor,t=function(i){return Object.prototype.toString.call(i).slice(8,-1)};for(var r in n)n.hasOwnProperty(r)&&(e[r]=t(n[r])==="Object"||t(n[r])==="Array"?bg(n[r]):n[r]);return e},hY=function(n,e){for(var t=n,r=0;r<e.length;r+=1)if(t==null?void 0:t[e[r]])t=t[e[r]];else{t=void 0;break}return t},dY=function(n,e,t){if(!n)return n;var r=n;return e.forEach(function(i,a){a<e.length-1?r=r[i]:r[i]=t}),n},Xs={isType:cY,clone:fY,hasPath:hY,setPath:dY,deepClone:bg},Ib=function(){return Ib=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Ib.apply(this,arguments)},zM=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};function jn(n,e){var t=(0,z.useRef)(),r=(0,z.useRef)(),i=(0,z.useRef)(null),a=e.onReady,o=e.onEvent,s=function(f,h){var d;return f===void 0&&(f="image/png"),(d=t.current)===null||d===void 0?void 0:d.chart.canvas.cfg.el.toDataURL(f,h)},l=function(f,h,d){var g;f===void 0&&(f="download"),h===void 0&&(h="image/png");var p=f;f.indexOf(".")===-1&&(p=f+"."+h.split("/")[1]);var m=(g=t.current)===null||g===void 0?void 0:g.chart.canvas.cfg.el.toDataURL(h,d),_=document.createElement("a");return _.href=m,_.download=p,document.body.appendChild(_),_.click(),document.body.removeChild(_),_=null,p},u=function(f,h,d){var g=Xs.hasPath,p=Xs.setPath,m=g(f,h);p(f,h,function(){for(var _=[],S=0;S<arguments.length;S++)_[S]=arguments[S];var M=Xs.isType(m,"Function")?m.apply(void 0,_):m;return Xs.isType(M,"String")||Xs.isType(M,"Number")||Xs.isType(M,"HTMLDivElement")?M:uY(M,d)})},c=function(){var f=Xs.hasPath;f(e,["statistic","content","customHtml"])&&u(e,["statistic","content","customHtml"]),f(e,["statistic","title","customHtml"])&&u(e,["statistic","title","customHtml"]),typeof e.tooltip=="object"&&(f(e,["tooltip","container"])&&u(e,["tooltip","container"],"tooltip"),f(e,["tooltip","customContent"])&&u(e,["tooltip","customContent"],"tooltip"))};return(0,z.useEffect)(function(){if(t.current&&!(0,v.isEqual)(r.current,e)){var f=!1;if(r.current){var h=r.current,d=h.data,g=h.value,p=h.percent,m=zM(h,["data","value","percent"]),_=e.data,S=e.value,M=e.percent,R=zM(e,["data","value","percent"]);f=(0,v.isEqual)(m,R)}if(f){var F="data",V=["percent"],nt=Object.keys(e);V.forEach(function(at){nt.includes(at)&&(F=at)}),t.current.changeData((e==null?void 0:e[F])||[])}else c(),t.current.update(e);r.current=Xs.deepClone(e)}},[e]),(0,z.useEffect)(function(){if(!i.current)return function(){return null};c();var f=new n(i.current,Ib({},e));n.prototype.toDataURL=function(d,g){return s(d,g)},n.prototype.downloadImage=function(d,g,p){return l(d,g,p)},f.render(),r.current||(r.current=Xs.deepClone(e)),t.current=Xs.clone(f),a&&a(f);var h=function(d){o&&o(f,d)};return f.on("*",h),function(){t.current&&(t.current.destroy(),t.current.off("*",h),t.current=void 0)}},[]),{chart:t,container:i}}var Zn=function(n,e){!n||((0,v.isFunction)(n)?n(e):n.current=e)},vY=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gY=function(n){vY(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.state={hasError:!1},t.renderError=function(r){var i=t.props.errorTemplate;switch(r){default:return i&&typeof i=="function"?i(r):z.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",r.message)}},t}return e.getDerivedStateFromError=function(t){return{hasError:!0,error:t}},e.getDerivedStateFromProps=function(t,r){return r.children!==t.children?{children:t.children,hasError:!1,error:void 0}:null},e.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):z.createElement(z.Fragment,null,this.props.children)},e}(z.Component),bn=gY;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Qo=function(){return Qo=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Qo.apply(this,arguments)};function pY(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}var yY=function(){return Math.random().toString(36).substring(6)},UM=function(n){var e=n.animate,t=n.backgroundColor,r=n.backgroundOpacity,i=n.baseUrl,a=n.children,o=n.foregroundColor,s=n.foregroundOpacity,l=n.gradientRatio,u=n.uniqueKey,c=n.interval,f=n.rtl,h=n.speed,d=n.style,g=n.title,p=pY(n,["animate","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","uniqueKey","interval","rtl","speed","style","title"]),m=u||yY(),_=m+"-diff",S=m+"-animated-diff",M=m+"-aria",R=f?{transform:"scaleX(-1)"}:null,F="0; "+c+"; 1",V=h+"s";return(0,z.createElement)("svg",Qo({"aria-labelledby":M,role:"img",style:Qo(Qo({},d),R)},p),g?(0,z.createElement)("title",{id:M},g):null,(0,z.createElement)("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+i+"#"+_+")",style:{fill:"url("+i+"#"+S+")"}}),(0,z.createElement)("defs",{role:"presentation"},(0,z.createElement)("clipPath",{id:_},a),(0,z.createElement)("linearGradient",{id:S},(0,z.createElement)("stop",{offset:"0%",stopColor:t,stopOpacity:r},e&&(0,z.createElement)("animate",{attributeName:"offset",values:-l+"; "+-l+"; 1",keyTimes:F,dur:V,repeatCount:"indefinite"})),(0,z.createElement)("stop",{offset:"50%",stopColor:o,stopOpacity:s},e&&(0,z.createElement)("animate",{attributeName:"offset",values:-l/2+"; "+-l/2+"; "+(1+l/2),keyTimes:F,dur:V,repeatCount:"indefinite"})),(0,z.createElement)("stop",{offset:"100%",stopColor:t,stopOpacity:r},e&&(0,z.createElement)("animate",{attributeName:"offset",values:"0; 0; "+(1+l),keyTimes:F,dur:V,repeatCount:"indefinite"})))))};UM.defaultProps={animate:!0,backgroundColor:"#f5f6f7",backgroundOpacity:1,baseUrl:"",foregroundColor:"#eee",foregroundOpacity:1,gradientRatio:2,id:null,interval:.25,rtl:!1,speed:1.2,style:{},title:"Loading..."};var Zh=function(n){return n.children?(0,z.createElement)(UM,Qo({},n)):(0,z.createElement)(mY,Qo({},n))},mY=function(n){return(0,z.createElement)(Zh,Qo({viewBox:"0 0 476 124"},n),(0,z.createElement)("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),(0,z.createElement)("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),(0,z.createElement)("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),(0,z.createElement)("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),(0,z.createElement)("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),(0,z.createElement)("circle",{cx:"20",cy:"20",r:"20"}))},Dot=function(n){return createElement(Zh,Qo({viewBox:"0 0 400 460"},n),createElement("circle",{cx:"31",cy:"31",r:"15"}),createElement("rect",{x:"58",y:"18",rx:"2",ry:"2",width:"140",height:"10"}),createElement("rect",{x:"58",y:"34",rx:"2",ry:"2",width:"140",height:"10"}),createElement("rect",{x:"0",y:"60",rx:"2",ry:"2",width:"400",height:"400"}))},Lot=function(n){return createElement(Zh,Qo({viewBox:"0 0 340 84"},n),createElement("rect",{x:"0",y:"0",width:"67",height:"11",rx:"3"}),createElement("rect",{x:"76",y:"0",width:"140",height:"11",rx:"3"}),createElement("rect",{x:"127",y:"48",width:"53",height:"11",rx:"3"}),createElement("rect",{x:"187",y:"48",width:"72",height:"11",rx:"3"}),createElement("rect",{x:"18",y:"48",width:"100",height:"11",rx:"3"}),createElement("rect",{x:"0",y:"71",width:"37",height:"11",rx:"3"}),createElement("rect",{x:"18",y:"23",width:"140",height:"11",rx:"3"}),createElement("rect",{x:"166",y:"23",width:"173",height:"11",rx:"3"}))},Rot=function(n){return createElement(Zh,Qo({viewBox:"0 0 400 110"},n),createElement("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"250",height:"10"}),createElement("rect",{x:"20",y:"20",rx:"3",ry:"3",width:"220",height:"10"}),createElement("rect",{x:"20",y:"40",rx:"3",ry:"3",width:"170",height:"10"}),createElement("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"250",height:"10"}),createElement("rect",{x:"20",y:"80",rx:"3",ry:"3",width:"200",height:"10"}),createElement("rect",{x:"20",y:"100",rx:"3",ry:"3",width:"80",height:"10"}))},Not=function(n){return createElement(Zh,Qo({viewBox:"0 0 245 125"},n),createElement("circle",{cx:"10",cy:"20",r:"8"}),createElement("rect",{x:"25",y:"15",rx:"5",ry:"5",width:"220",height:"10"}),createElement("circle",{cx:"10",cy:"50",r:"8"}),createElement("rect",{x:"25",y:"45",rx:"5",ry:"5",width:"220",height:"10"}),createElement("circle",{cx:"10",cy:"80",r:"8"}),createElement("rect",{x:"25",y:"75",rx:"5",ry:"5",width:"220",height:"10"}),createElement("circle",{cx:"10",cy:"110",r:"8"}),createElement("rect",{x:"25",y:"105",rx:"5",ry:"5",width:"220",height:"10"}))},xY=Zh,bY=function(n){var e=n.loadingTemplate,t=function(){return e||z.createElement(xY,{viewBox:"0 0 400 180",width:200,height:90,speed:1},z.createElement("rect",{x:"20",y:"5",rx:"0",ry:"0",width:"1",height:"170"}),z.createElement("rect",{x:"20",y:"175",rx:"0",ry:"0",width:"360",height:"1"}),z.createElement("rect",{x:"40",y:"75",rx:"0",ry:"0",width:"35",height:"100"}),z.createElement("rect",{x:"80",y:"125",rx:"0",ry:"0",width:"35",height:"50"}),z.createElement("rect",{x:"120",y:"105",rx:"0",ry:"0",width:"35",height:"70"}),z.createElement("rect",{x:"160",y:"35",rx:"0",ry:"0",width:"35",height:"140"}),z.createElement("rect",{x:"200",y:"55",rx:"0",ry:"0",width:"35",height:"120"}),z.createElement("rect",{x:"240",y:"15",rx:"0",ry:"0",width:"35",height:"160"}),z.createElement("rect",{x:"280",y:"135",rx:"0",ry:"0",width:"35",height:"40"}),z.createElement("rect",{x:"320",y:"85",rx:"0",ry:"0",width:"35",height:"90"}))};return z.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:"#fff"}},t())},_n=bY,_Y=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},SY=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=_Y(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(wC,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),WM=SY,EY=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},wY=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=EY(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(IC,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),VM=wY,CY=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},MY=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=CY(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(OV,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),XM=MY,AY=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},TY=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=AY(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(MC,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),YM=TY,IY=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},OY=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=IY(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(O2,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),HM=OY,PY=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},DY=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=PY(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(a2,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),jM=DY,LY=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},RY=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=LY(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(_C,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),ZM=RY,NY=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},kY=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=NY(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(hW,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),KM=kY,BY=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},FY=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=BY(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(EV,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),$M=FY,GY=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},zY=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=GY(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(rW,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),QM=zY,UY=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},WY=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=UY(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(NC,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),JM=WY,VY=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},XY=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=VY(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(pM,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),qM=XY,YY=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},HY=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=YY(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(u2,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),tA=HY,jY=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},ZY=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=jY(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(d8,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),eA=ZY,KY=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},$Y=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=KY(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(h2,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),rA=$Y,QY=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},JY=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=QY(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(vU,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),nA=JY,qY=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},tH=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=qY(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(P7,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),iA=tH,eH=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},rH=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=eH(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(WC,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),aA=rH,nH=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},iH=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=nH(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(e2,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),oA=iH,aH=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},oH=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=aH(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(t2,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),sA=oH,sH=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},lH=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=sH(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(P8,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),lA=lH,uH=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},cH=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=uH(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(JC,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),uA=cH,fH=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},hH=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=fH(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(dX,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),cA=hH,dH=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},vH=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=dH(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(YU,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),fA=vH,gH=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},pH=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=gH(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(H9,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),hA=pH,yH=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},mH=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=yH(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(zW,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),dA=mH,xH=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},bH=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=xH(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(_X,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),vA=bH,_H=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},SH=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=_H(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(h7,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),gA=SH,EH=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},wH=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=EH(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(UX,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),pA=wH,CH=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},MH=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=CH(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(PW,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),yA=MH,AH=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},TH=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=AH(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(H7,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),mA=TH,IH=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},OH=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=IH(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(NM,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),iy=OH,PH=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},DH=(0,z.forwardRef)(function(n,e){var t=n.chartRef,r=n.style,i=r===void 0?{height:"inherit"}:r,a=n.className,o=n.loading,s=n.loadingTemplate,l=n.errorTemplate,u=PH(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=jn(DX,u),f=c.chart,h=c.container;return(0,z.useEffect)(function(){Zn(t,f.current)},[f.current]),(0,z.useImperativeHandle)(e,function(){return{getChart:function(){return f.current}}}),z.createElement(bn,{errorTemplate:l},o&&z.createElement(_n,{loadingTemplate:s}),z.createElement("div",{className:a,style:i,ref:h}))}),xA=DH,LH={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(e){return Object.assign(this,e),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(e){var t=this,r=this.events;this.graph=e,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!0),(0,v.each)(r,function(i,a){e.on(a,i)}),document.addEventListener("visibilitychange",function(){t.keydown=!1})},unbind:function(e){var t=this.events;(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!1),(0,v.each)(t,function(r,i){e.off(i,r)})},get:function(e){return this[e]},set:function(e,t){return this[e]=t,this}},RH=function(){function n(){}return n.registerBehavior=function(e,t){if(!t)throw new Error("please specify handler for this behavior: "+e);var r=(0,v.clone)(LH);Object.assign(r,t);var i=function(o){var s=this;Object.assign(this,this.getDefaultCfg(),o);var l=this.getEvents();this.events=null;var u={};l&&((0,v.each)(l,function(c,f){u[f]=(0,v.wrapBehavior)(s,c)}),this.events=u)};i.prototype=r,n.types[e]=i},n.hasBehavior=function(e){return!!n.types[e]},n.getBehavior=function(e){return n.types[e]},n.types={},n}(),bA=RH,_A=bA,NH=function(e,t){var r=e.nodes,i=e.edges,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,l){o[s.id]=l;var u=[];a.push(u)}),i&&i.forEach(function(s){var l=s.source,u=s.target,c=o[l],f=o[u];!c&&c!==0||!f&&f!==0||(a[c][f]=1,t||(a[f][c]=1))}),a},ef=NH,kH=function(e,t){return e===t},SA=function(){function n(e,t){t===void 0&&(t=null),this.value=e,this.next=t}return n.prototype.toString=function(e){return e?e(this.value):""+this.value},n}(),BH=function(){function n(e){e===void 0&&(e=kH),this.head=null,this.tail=null,this.compare=e}return n.prototype.prepend=function(e){var t=new SA(e,this.head);return this.head=t,this.tail||(this.tail=t),this},n.prototype.append=function(e){var t=new SA(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},n.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var r=this.head;if(r!==null)for(;r.next;)this.compare(r.next.value,e)?(t=r.next,r.next=r.next.next):r=r.next;return this.compare(this.tail.value,e)&&(this.tail=r),t},n.prototype.find=function(e){var t=e.value,r=t===void 0?void 0:t,i=e.callback,a=i===void 0?void 0:i;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||r!==void 0&&this.compare(o.value,r))return o;o=o.next}return null},n.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},n.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},n.prototype.fromArray=function(e){var t=this;return e.forEach(function(r){return t.append(r)}),this},n.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},n.prototype.reverse=function(){for(var e=this.head,t=null,r=null;e;)r=e.next,e.next=t,t=e,e=r;this.tail=this.head,this.head=t},n.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},n}(),EA=BH,FH=function(){function n(){this.linkedList=new EA}return n.prototype.isEmpty=function(){return!this.linkedList.head},n.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},n.prototype.enqueue=function(e){this.linkedList.append(e)},n.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},n.prototype.toString=function(e){return this.linkedList.toString(e)},n}(),GH=FH,To=function(e,t,r){t===void 0&&(t=[]);var i=t.filter(function(l){return l.source===e||l.target===e});if(r==="target"){var a=function(u){return u.source===e};return i.filter(a).map(function(l){return l.target})}if(r==="source"){var o=function(u){return u.target===e};return i.filter(o).map(function(l){return l.source})}var s=function(u){return u.source===e?u.target:u.source};return i.map(s)},zH=function(e,t){return t.filter(function(r){return r.source===e})},ay=function(e,t){return t.filter(function(r){return r.source===e||r.target===e})},wA=function(e){e===void 0&&(e=0);var t=(""+Math.random()).split(".")[1].substr(0,5),r=(""+Math.random()).split(".")[1].substr(0,5);return e+"-"+t+r};function UH(n){n===void 0&&(n={});var e=n,t=function(){},r=function(){var i={};return function(a){var o=a.next,s=o;return i[s]?!1:(i[s]=!0,!0)}}();return e.allowTraversal=n.allowTraversal||r,e.enter=n.enter||t,e.leave=n.leave||t,e}var WH=function(e,t,r){var i=UH(r),a=new GH,o=e.edges,s=o===void 0?[]:o;a.enqueue(t);for(var l="",u=function(){var f=a.dequeue();i.enter({current:f,previous:l}),To(f,s,"target").forEach(function(h){i.allowTraversal({previous:l,current:f,next:h})&&a.enqueue(h)}),i.leave({current:f,previous:l}),l=f};!a.isEmpty();)u()},CA=WH,VH=function(e){for(var t=e.nodes,r=t===void 0?[]:t,i=e.edges,a=i===void 0?[]:i,o=[],s={},l=[],u=function d(g){l.push(g),s[g.id]=!0;for(var p=To(g.id,a),m=function(M){var R=p[M];if(!s[R]){var F=r.filter(function(V){return V.id===R});F.length>0&&d(F[0])}},_=0;_<p.length;++_)m(_)},c=0;c<r.length;c++){var f=r[c];if(!s[f.id]){u(f);for(var h=[];l.length>0;)h.push(l.pop());o.push(h)}}return o},MA=function(e){for(var t=e.nodes,r=t===void 0?[]:t,i=e.edges,a=i===void 0?[]:i,o=[],s={},l={},u={},c=[],f=0,h=function m(_){l[_.id]=f,u[_.id]=f,f+=1,o.push(_),s[_.id]=!0;for(var S=To(_.id,a,"target").filter(function(nt){return r.map(function(at){return at.id}).indexOf(nt)>-1}),M=function(at){var xt=S[at];if(!l[xt]&&l[xt]!==0){var gt=r.filter(function(Tt){return Tt.id===xt});gt.length>0&&m(gt[0]),u[_.id]=Math.min(u[_.id],u[xt])}else s[xt]&&(u[_.id]=Math.min(u[_.id],l[xt]))},R=0;R<S.length;R++)M(R);if(u[_.id]===l[_.id]){for(var F=[];o.length>0;){var V=o.pop();if(s[V.id]=!1,F.push(V),V===_)break}F.length>0&&c.push(F)}},d=0,g=r;d<g.length;d++){var p=g[d];!l[p.id]&&l[p.id]!==0&&h(p)}return c};function Ob(n,e){return e?MA(n):VH(n)}var _g=function(e){var t={},r=e.nodes,i=r===void 0?[]:r,a=e.edges,o=a===void 0?[]:a;return i.forEach(function(s){t[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){t[s.source].degree++,t[s.source].outDegree++,t[s.target].degree++,t[s.target].inDegree++}),t},oy=_g,AA=function(e,t){var r=_g(e);return r[t]?_g(e)[t].inDegree:0},TA=function(e,t){var r=_g(e);return r[t]?_g(e)[t].outDegree:0};function XH(n){n===void 0&&(n={});var e=n,t=function(){},r=function(){var i={};return function(a){var o=a.next;return i[o]?!1:(i[o]=!0,!0)}}();return e.allowTraversal=n.allowTraversal||r,e.enter=n.enter||t,e.leave=n.leave||t,e}function IA(n,e,t,r){r.enter({current:e,previous:t});var i=n.edges,a=i===void 0?[]:i;To(e,a,"target").forEach(function(o){r.allowTraversal({previous:t,current:e,next:o})&&IA(n,o,e,r)}),r.leave({current:e,previous:t})}function Pb(n,e,t){IA(n,e,"",XH(t))}var YH=function(e){var t=null,r=e.nodes,i=r===void 0?[]:r,a={},o={},s={},l={};i.forEach(function(f){o[f.id]=f});for(var u={enter:function(h){var d=h.current,g=h.previous;if(s[d]){t={};for(var p=d,m=g;m!==d;)t[p]=m,p=m,m=a[m];t[p]=m}else s[d]=d,delete o[d],a[d]=g},leave:function(h){var d=h.current;l[d]=d,delete s[d]},allowTraversal:function(h){var d=h.next;return t?!1:!l[d]}};Object.keys(o).length;){var c=Object.keys(o)[0];Pb(e,c,u)}return t},Db=function(e,t,r){var i,a;r===void 0&&(r=!0);for(var o=[],s=Ob(e,!1),l=0,u=s;l<u.length;l++){var c=u[l];if(!!c.length)for(var f=c[0],h=f.id,d=[f],g=(i={},i[h]=f,i),p=(a={},a[h]=new Set,a);d.length>0;)for(var m=d.pop(),_=m.id,S=To(_,e.edges),M=function(V){var nt,at=S[V],xt=e.nodes.find(function(ne){return ne.id===at});if(at===_)o.push((nt={},nt[at]=m,nt));else if(!(at in p))g[at]=m,d.push(xt),p[at]=new Set([m]);else if(!p[_].has(xt)){for(var gt=!0,Tt=[xt,m],Ct=g[_];p[at].size&&!p[at].has(Ct)&&(Tt.push(Ct),Ct!==g[Ct.id]);)Ct=g[Ct.id];if(Tt.push(Ct),t&&r?(gt=!1,Tt.findIndex(function(ne){return t.indexOf(ne.id)>-1})>-1&&(gt=!0)):t&&!r&&Tt.findIndex(function(ne){return t.indexOf(ne.id)>-1})>-1&&(gt=!1),gt){for(var te={},Kt=1;Kt<Tt.length;Kt+=1)te[Tt[Kt-1].id]=Tt[Kt];Tt.length&&(te[Tt[Tt.length-1].id]=Tt[0]),o.push(te)}p[at].add(m)}},R=0;R<S.length;R+=1)M(R)}return o},Lb=function(e,t,r){r===void 0&&(r=!0);for(var i=[],a=new Set,o=[],s=[],l={},u={},c=function(Ct){for(var te=[Ct];te.length>0;){var Kt=te.pop();a.has(Kt)&&(a.delete(Kt),o[Kt.id].forEach(function(ne){te.push(ne)}),o[Kt.id].clear())}},f=function Tt(Ct,te,Kt){var ne=!1;if(t&&r===!1&&t.indexOf(Ct.id)>-1)return ne;i.push(Ct),a.add(Ct);for(var ee=Kt[Ct.id],ve=0;ve<ee.length;ve+=1){var ie=l[ee[ve]];if(ie===te){for(var ye={},Ee=1;Ee<i.length;Ee+=1)ye[i[Ee-1].id]=i[Ee];i.length&&(ye[i[i.length-1].id]=i[0]),s.push(ye),ne=!0}else a.has(ie)||Tt(ie,te,Kt)&&(ne=!0)}if(ne)c(Ct);else for(var ve=0;ve<ee.length;ve+=1){var ie=l[ee[ve]];o[ie.id].has(Ct)||o[ie.id].add(Ct)}return i.pop(),ne},h=e.nodes,d=h===void 0?[]:h,g=0;g<d.length;g+=1){var p=d[g],m=p.id;u[m]=g,l[g]=p}if(t&&r)for(var _=function(Ct){var te=t[Ct];u[d[Ct].id]=u[te],u[te]=0,l[0]=d.find(function(Kt){return Kt.id===te}),l[u[d[Ct].id]]=d[Ct]},g=0;g<t.length;g++)_(g);for(var S=function(Ct){for(var te,Kt,ne=Infinity,ee=0;ee<Ct.length;ee+=1)for(var ve=Ct[ee],ie=0;ie<ve.length;ie++){var ye=u[ve[ie].id];ye<ne&&(ne=ye,Kt=ee)}for(var Ee=Ct[Kt],we=[],ee=0;ee<Ee.length;ee+=1){var Pe=Ee[ee];we[Pe.id]=[];for(var Ve=0,he=To(Pe.id,e.edges,"target").filter(function(Ze){return Ee.map(function(ar){return ar.id}).indexOf(Ze)>-1});Ve<he.length;Ve++){var Te=he[Ve];Te===Pe.id&&!(r===!1&&t.indexOf(Pe.id)>-1)?s.push((te={},te[Pe.id]=Pe,te)):we[Pe.id].push(u[Te])}}return{component:Ee,adjList:we,minIdx:ne}},M=0;M<d.length;){var R=d.filter(function(Tt){return u[Tt.id]>=M}),F=MA({nodes:R,edges:e.edges}).filter(function(Tt){return Tt.length>1});if(F.length===0)break;var V=S(F),nt=V.minIdx,at=V.adjList,xt=V.component;if(xt.length>1){xt.forEach(function(Tt){o[Tt.id]=new Set});var gt=l[nt];if(t&&r&&t.indexOf(gt.id)===-1)return s;f(gt,gt,at),M=nt+1}else break}return s},OA=function(e,t,r,i){return i===void 0&&(i=!0),t?Lb(e,r,i):Db(e,r,i)},Rb=YH,HH=function(e,t,r){for(var i=Infinity,a,o=0;o<t.length;o++){var s=t[o].id;!r[s]&&e[s]<=i&&(i=e[s],a=t[o])}return a},jH=function(e,t,r,i){var a=e.nodes,o=a===void 0?[]:a,s=e.edges,l=s===void 0?[]:s,u=[],c={},f={},h={};o.forEach(function(M,R){var F=M.id;u.push(F),f[F]=Infinity,F===t&&(f[F]=0)});for(var d=o.length,g=function(R){var F=HH(f,o,c),V=F.id;if(c[V]=!0,f[V]===Infinity)return"continue";var nt=[];r?nt=zH(V,l):nt=ay(V,l),nt.forEach(function(at){var xt=at.target,gt=at.source,Tt=xt===V?gt:xt,Ct=i&&at[i]?at[i]:1;f[Tt]>f[F.id]+Ct?(f[Tt]=f[F.id]+Ct,h[Tt]=[F.id]):f[Tt]===f[F.id]+Ct&&h[Tt].push(F.id)})},p=0;p<d;p++)g(p);h[t]=[t];var m={};for(var _ in f)f[_]!==Infinity&&PA(t,_,h,m);var S={};for(var _ in m)S[_]=m[_][0];return{length:f,path:S,allPath:m}},Sg=jH;function PA(n,e,t,r){if(n===e)return[n];if(r[e])return r[e];for(var i=[],a=0,o=t[e];a<o.length;a++){var s=o[a],l=PA(n,s,t,r);if(!l)return;for(var u=0,c=l;u<c.length;u++){var f=c[u];(0,v.isArray)(f)?i.push((0,b.__spreadArray)((0,b.__spreadArray)([],f),[e])):i.push([f,e])}}return r[e]=i,r[e]}var DA=function(e,t,r,i,a){var o=Sg(e,t,i,a),s=o.length,l=o.path,u=o.allPath;return{length:s[r],path:l[r],allPath:u[r]}},LA=function(e,t,r,i){var a;if(t===r)return[[t]];var o=e.edges,s=o===void 0?[]:o,l=[t],u=(a={},a[t]=!0,a),c=[],f=[],h=i?To(t,s,"target"):To(t,s);for(c.push(h);l.length>0&&c.length>0;){var d=c[c.length-1];if(d.length){var g=d.shift();g&&(l.push(g),u[g]=!0,h=i?To(g,s,"target"):To(g,s),c.push(h.filter(function(_){return!u[_]})))}else{var p=l.pop();u[p]=!1,c.pop();continue}if(l[l.length-1]===r){var m=l.map(function(S){return S});f.push(m);var p=l.pop();u[p]=!1,c.pop()}}return f},ZH=function(e,t){for(var r=ef(e,t),i=[],a=r.length,o=0;o<a;o+=1){i[o]=[];for(var s=0;s<a;s+=1)o===s?i[o][s]=0:r[o][s]===0||!r[o][s]?i[o][s]=Infinity:i[o][s]=r[o][s]}for(var l=0;l<a;l+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)i[o][s]>i[o][l]+i[l][s]&&(i[o][s]=i[o][l]+i[l][s]);return i},Eg=ZH,KH=function(e,t,r,i){t===void 0&&(t=!1),r===void 0&&(r="weight"),i===void 0&&(i=1e3);var a=e.nodes,o=a===void 0?[]:a,s=e.edges,l=s===void 0?[]:s,u={},c={};o.forEach(function(R,F){var V=wA();R.clusterId=V,u[V]={id:V,nodes:[R]},c[R.id]={node:R,idx:F}});var f=ef(e,t),h=[],d={};f.forEach(function(R,F){var V=0,nt=o[F].id;d[nt]={},R.forEach(function(at,xt){if(!!at){V+=at;var gt=o[xt].id;d[nt][gt]=at}}),h.push(V)});for(var g=0,p=function(){var F=!1;if(o.forEach(function(V){var nt={};Object.keys(d[V.id]).forEach(function(ne){var ee=d[V.id][ne],ve=c[ne].node,ie=ve.clusterId;nt[ie]||(nt[ie]=0),nt[ie]+=ee});var at=-Infinity,xt=[];if(Object.keys(nt).forEach(function(ne){at<nt[ne]?(at=nt[ne],xt=[ne]):at===nt[ne]&&xt.push(ne)}),!(xt.length===1&&xt[0]===V.clusterId)){var gt=xt.indexOf(V.clusterId);if(gt>=0&&xt.splice(gt,1),xt&&xt.length){F=!0;var Tt=u[V.clusterId],Ct=Tt.nodes.indexOf(V);Tt.nodes.splice(Ct,1);var te=Math.floor(Math.random()*xt.length),Kt=u[xt[te]];Kt.nodes.push(V),V.clusterId=Kt.id}}}),!F)return"break";g++};g<i;){var m=p();if(m==="break")break}Object.keys(u).forEach(function(R){var F=u[R];(!F.nodes||!F.nodes.length)&&delete u[R]});var _=[],S={};l.forEach(function(R){var F=R.source,V=R.target,nt=R[r]||1,at=c[F].node.clusterId,xt=c[V].node.clusterId,gt=at+"---"+xt;if(S[gt])S[gt].weight+=nt,S[gt].count++;else{var Tt={source:at,target:xt,weight:nt,count:1};S[gt]=Tt,_.push(Tt)}});var M=[];return Object.keys(u).forEach(function(R){M.push(u[R])}),{clusters:M,clusterEdges:_}},RA=KH,$H=function(e,t,r,i){for(var a=t.length,o=2*i,s=0,l=0;l<a;l++)for(var u=e[l].clusterId,c=0;c<a;c++){var f=e[c].clusterId;if(u===f){var h=t[l][c]||0,d=r[l]||0,g=r[c]||0;s+=h-d*g/o}}return s*=1/o,s},QH=function(e,t,r,i){t===void 0&&(t=!1),r===void 0&&(r="weight"),i===void 0&&(i=1e-4);var a=e.nodes,o=a===void 0?[]:a,s=e.edges,l=s===void 0?[]:s,u=1,c={},f={};o.forEach(function(at,xt){var gt=String(u++);at.clusterId=gt,c[gt]={id:gt,nodes:[at]},f[at.id]={node:at,idx:xt}});var h=ef(e,t),d=[],g={},p=0;h.forEach(function(at,xt){var gt=0,Tt=o[xt].id;g[Tt]={},at.forEach(function(Ct,te){if(!!Ct){gt+=Ct;var Kt=o[te].id;g[Tt][Kt]=Ct,p+=Ct}}),d.push(gt)}),p/=2;for(var m=Infinity,_=Infinity,S=0;m=$H(o,h,d,p),!(Math.abs(m-_)<i||S>100);)_=m,S++,Object.keys(c).forEach(function(at){var xt=0;l.forEach(function(gt){var Tt=gt.source,Ct=gt.target,te=f[Tt].node.clusterId,Kt=f[Ct].node.clusterId;(te===at&&Kt!==at||Kt===at&&te!==at)&&(xt=xt+(gt[r]||1))}),c[at].sumTot=xt}),o.forEach(function(at,xt){var gt=c[at.clusterId],Tt=0,Ct,te=d[xt]/(2*p),Kt=0,ne=gt.nodes;ne.forEach(function(Pe){var Ve=f[Pe.id].idx;Kt+=h[xt][Ve]||0});var ee=Kt-gt.sumTot*te,ve=g[at.id];if(Object.keys(ve).forEach(function(Pe){var Ve=f[Pe].node,he=Ve.clusterId;if(he!==at.clusterId){var Te=c[he],Je=Te.nodes;if(!(!Je||!Je.length)){var Ze=0;Je.forEach(function(Dr){var sn=f[Dr.id].idx;Ze+=h[xt][sn]||0});var ar=Ze-Te.sumTot*te,cr=ar-ee;cr>Tt&&(Tt=cr,Ct=Te)}}}),Tt>0){Ct.nodes.push(at);var ie=at.clusterId;at.clusterId=Ct.id;var ye=gt.nodes.indexOf(at);gt.nodes.splice(ye,1);var Ee=0,we=0;l.forEach(function(Pe){var Ve=Pe.source,he=Pe.target,Te=f[Ve].node.clusterId,Je=f[he].node.clusterId;(Te===Ct.id&&Je!==Ct.id||Je===Ct.id&&Te!==Ct.id)&&(Ee=Ee+(Pe[r]||1)),(Te===ie&&Je!==ie||Je===ie&&Te!==ie)&&(we=we+(Pe[r]||1))}),Ct.sumTot=Ee,gt.sumTot=we}});var M={},R=0;Object.keys(c).forEach(function(at){var xt=c[at];if(!xt.nodes||!xt.nodes.length){delete c[at];return}var gt=String(R+1);gt!==at&&(xt.id=gt,xt.nodes=xt.nodes.map(function(Tt){return{id:Tt.id,clusterId:gt}}),c[gt]=xt,M[at]=gt,delete c[at],R++)}),o.forEach(function(at){at.clusterId&&M[at.clusterId]&&(at.clusterId=M[at.clusterId])});var F=[],V={};l.forEach(function(at){var xt=at.source,gt=at.target,Tt=at[r]||1,Ct=f[xt].node.clusterId,te=f[gt].node.clusterId,Kt=Ct+"---"+te;if(V[Kt])V[Kt].weight+=Tt,V[Kt].count++;else{var ne={source:Ct,target:te,weight:Tt,count:1};V[Kt]=ne,F.push(ne)}});var nt=[];return Object.keys(c).forEach(function(at){nt.push(c[at])}),{clusters:nt,clusterEdges:F}},NA=QH,JH=function(){function n(e){this.count=e.length,this.parent={};for(var t=0,r=e;t<r.length;t++){var i=r[t];this.parent[i]=i}}return n.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},n.prototype.union=function(e,t){var r=this.find(e),i=this.find(t);r!==i&&(r<i?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},n.prototype.connected=function(e,t){return this.find(e)===this.find(t)},n}(),qH=JH,tj=function(e,t){return e-t},ej=function(){function n(e){e===void 0&&(e=tj),this.compareFn=e,this.list=[]}return n.prototype.getLeft=function(e){return 2*e+1},n.prototype.getRight=function(e){return 2*e+2},n.prototype.getParent=function(e){return e===0?null:Math.floor((e-1)/2)},n.prototype.isEmpty=function(){return this.list.length<=0},n.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},n.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},n.prototype.insert=function(e){if(e!==null){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},n.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var r=this.list[t];this.list[t]=this.list[e],this.list[e]=r,e=t,t=this.getParent(e)}},n.prototype.moveDown=function(e){var t,r=e,i=this.getLeft(e),a=this.getRight(e),o=this.list.length;i!==null&&i<o&&this.compareFn(this.list[r],this.list[i])>0?r=i:a!==null&&a<o&&this.compareFn(this.list[r],this.list[a])>0&&(r=a),e!==r&&(t=[this.list[r],this.list[e]],this.list[e]=t[0],this.list[r]=t[1],this.moveDown(r))},n}(),rj=ej,nj=function(e,t){var r=[],i=e.nodes,a=i===void 0?[]:i,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return r;var l=a[0],u=new Set;u.add(l);var c=function(m,_){return t?m.weight-_.weight:0},f=new rj(c);for(ay(l.id,s).forEach(function(p){f.insert(p)});!f.isEmpty();){var h=f.delMin(),d=h.source,g=h.target;u.has(d)&&u.has(g)||(r.push(h),u.has(d)||(u.add(d),ay(d,s).forEach(function(p){f.insert(p)})),u.has(g)||(u.add(g),ay(g,s).forEach(function(p){f.insert(p)})))}return r},kA=function(e,t){var r=[],i=e.nodes,a=i===void 0?[]:i,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return r;var l=s.map(function(d){return d});t&&l.sort(function(d,g){return d.weight-g.weight});for(var u=new qH(a.map(function(d){return d.id}));l.length>0;){var c=l.shift(),f=c.source,h=c.target;u.connected(f,h)||(r.push(c),u.union(f,h))}return r},ij=function(e,t,r){var i={prim:nj,kruskal:kA};return r?i[r](e,t):kA(e,t)},BA=ij,aj=function(e,t,r){typeof t!="number"&&(t=1e-6),typeof r!="number"&&(r=.85);for(var i=1,a=0,o=1e3,s=e.nodes,l=s===void 0?[]:s,u=e.edges,c=u===void 0?[]:u,f=l.length,h,d={},g={},p=0;p<f;++p){var m=l[p],_=m.id;d[_]=1/f,g[_]=1/f}for(var S=oy(e);o>0&&i>t;){a=0;for(var p=0;p<f;++p){var m=l[p],_=m.id;if(h=0,S[m.id].inDegree===0)d[_]=0;else{for(var M=To(_,c,"source"),R=0;R<M.length;++R){var F=M[R],V=S[F].outDegree;V>0&&(h+=g[F]/V)}d[_]=r*h,a+=d[_]}}a=(1-a)/f,i=0;for(var p=0;p<f;++p){var m=l[p],_=m.id;h=d[_]+a,i+=Math.abs(h-g[_]),g[_]=h}o-=1}return g},FA=aj,oj=-1,sy=-1,GA="-1",Pl="-1",zA=-1,kot="-1",UA=function(){function n(e,t,r,i){e===void 0&&(e=oj),t===void 0&&(t=sy),r===void 0&&(r=sy),i===void 0&&(i=GA),this.id=e,this.from=t,this.to=r,this.label=i}return n}(),sj=function(){function n(e,t){e===void 0&&(e=sy),t===void 0&&(t=Pl),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return n.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},n}(),WA=function(){function n(e,t,r){e===void 0&&(e=sy),t===void 0&&(t=!0),r===void 0&&(r=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=r}return n.prototype.getNodeNum=function(){return this.nodes.length},n.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var r=new sj(e,t);this.nodes.push(r),this.nodeMap[e]=r,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},n.prototype.addEdge=function(e,t,r,i){if((this.edgeIdAutoIncrease||e===void 0)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[e])){var a=new UA(e,t,r,i);if(this.edges.push(a),this.edgeMap[e]=a,this.nodeMap[t].addEdge(a),this.edgeLabelMap[i]||(this.edgeLabelMap[i]=[]),this.edgeLabelMap[i].push(a),!this.directed){var o=new UA(e,r,t,i);this.nodeMap[r].addEdge(o),this.edgeLabelMap[i].push(o)}}},n}(),rf=function(){function n(e,t,r,i,a){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:r||Pl,edgeLabel:i||GA,nodeLabel2:a||Pl}}return n.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},n.prototype.notEqualTo=function(e){return!this.equalTo(e)},n}(),VA=function(){function n(){this.rmpath=[],this.dfsEdgeList=[]}return n.prototype.equalTo=function(e){var t=this.dfsEdgeList.length,r=e.length;if(t!==r)return!1;for(var i=0;i<t;i++)if(this.dfsEdgeList[i]!==e[i])return!1;return!0},n.prototype.notEqualTo=function(e){return!this.equalTo(e)},n.prototype.pushBack=function(e,t,r,i,a){return this.dfsEdgeList.push(new rf(e,t,r,i,a)),this.dfsEdgeList},n.prototype.toGraph=function(e,t){e===void 0&&(e=zA),t===void 0&&(t=!1);var r=new WA(e,!0,t);return this.dfsEdgeList.forEach(function(i){var a=i.fromNode,o=i.toNode,s=i.nodeEdgeNodeLabel,l=s.nodeLabel1,u=s.edgeLabel,c=s.nodeLabel2;l!==Pl&&r.addNode(a,l),c!==Pl&&r.addNode(o,c),r.addEdge(void 0,a,o,u)}),r},n.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length,r=t-1;r>=0;r--){var i=this.dfsEdgeList[r],a=i.fromNode,o=i.toNode;a<o&&(e===void 0||o===e)&&(this.rmpath.push(r),e=a)}return this.rmpath},n.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)}),Object.keys(e).length},n}(),ly=function(){function n(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return n.prototype.hasNode=function(e){return this.nodesUsed[e.id]===1},n.prototype.hasEdge=function(e){return this.edgesUsed[e.id]===1},n}(),lj=function(){function n(e){var t=e.graphs,r=e.minSupport,i=r===void 0?2:r,a=e.minNodeNum,o=a===void 0?1:a,s=e.maxNodeNum,l=s===void 0?4:s,u=e.top,c=u===void 0?10:u,f=e.directed,h=f===void 0?!1:f,d=e.verbose,g=d===void 0?!1:d;this.graphs=t,this.dfsCode=new VA,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=i,this.top=c,this.directed=h,this.counter=0,this.maxNodeNum=l,this.minNodeNum=o,this.verbose=g,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return n.prototype.findForwardRootEdges=function(e,t){var r=this,i=[],a=e.nodeMap;return t.edges.forEach(function(o){(r.directed||t.label<=a[o.to].label)&&i.push(o)}),i},n.prototype.findBackwardEdge=function(e,t,r,i){if(!this.directed&&t===r)return null;for(var a=e.nodeMap,o=a[r.to],s=o.edges,l=s.length,u=0;u<l;u++){var c=s[u];if(!(i.hasEdge(c)||c.to!==t.from)){if(this.directed){if(a[t.from].label<a[r.to].label||a[t.from].label===a[r.to].label&&t.label<=c.label)return c}else if(t.label<c.label||t.label===c.label&&a[t.to].label<=a[r.to].label)return c}}return null},n.prototype.findForwardPureEdges=function(e,t,r,i){for(var a=[],o=t.to,s=e.nodeMap[o].edges,l=s.length,u=0;u<l;u++){var c=s[u],f=e.nodeMap[c.to];r<=f.label&&!i.hasNode(f)&&a.push(c)}return a},n.prototype.findForwardRmpathEdges=function(e,t,r,i){for(var a=[],o=e.nodeMap,s=o[t.to].label,l=o[t.from],u=l.edges,c=u.length,f=0;f<c;f++){var h=u[f],d=o[h.to].label;t.to===h.to||r>d||i.hasNode(o[h.to])||(t.label<h.label||t.label===h.label&&s<=d)&&a.push(h)}return a},n.prototype.getSupport=function(e){var t={};return e.forEach(function(r){t[r.graphId]||(t[r.graphId]=!0)}),Object.keys(t).length},n.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach(function(r){var i=e[r],a=i.nodeLabel1,o=i.edgeLabel,s=i.nodeLabel2;if(!t){t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s};return}(a<t.nodeLabel1||a===t.nodeLabel1&&o<t.edgeLabel||a===t.nodeLabel1&&o===t.edgeLabel&&s<t.nodeLabel2)&&(t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s})}),t},n.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),t.dfsEdgeList.length===1)return!0;var r=this.directed,i=t.toGraph(zA,r),a=i.nodeMap,o=new VA,s={};i.nodes.forEach(function(f){var h=e.findForwardRootEdges(i,f);h.forEach(function(d){var g=a[d.to],p=f.label+"-"+d.label+"-"+g.label;s[p]||(s[p]={projected:[],nodeLabel1:f.label,edgeLabel:d.label,nodeLabel2:g.label});var m={graphId:i.id,edge:d,preNode:null};s[p].projected.push(m)})});var l=this.findMinLabel(s);o.dfsEdgeList.push(new rf(0,1,l.nodeLabel1,l.edgeLabel,l.nodeLabel2));var u=function f(h){for(var d=o.buildRmpath(),g=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,p=o.dfsEdgeList[d[0]].toNode,m={},_=!1,S=0,M=r?-1:0,R=function(ve){if(_)return"break";h.forEach(function(ie){var ye=new ly(ie),Ee=e.findBackwardEdge(i,ye.edges[d[ve]],ye.edges[d[0]],ye);Ee&&(m[Ee.label]||(m[Ee.label]={projected:[],edgeLabel:Ee.label}),m[Ee.label].projected.push({graphId:i.id,edge:m,preNode:ie}),S=o.dfsEdgeList[d[ve]].fromNode,_=!0)})},F=d.length-1;F>M;F--){var V=R(F);if(V==="break")break}if(_){var nt=e.findMinLabel(m);o.dfsEdgeList.push(new rf(p,S,Pl,nt.edgeLabel,Pl));var at=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[at]!==o.dfsEdgeList[at]?!1:f(m[nt.edgeLabel].projected)}var xt={};_=!1;var gt=0;h.forEach(function(ee){var ve=new ly(ee),ie=e.findForwardPureEdges(i,ve.edges[d[0]],g,ve);ie.length>0&&(_=!0,gt=p,ie.forEach(function(ye){var Ee=ye.label+"-"+a[ye.to].label;xt[Ee]||(xt[Ee]={projected:[],edgeLabel:ye.label,nodeLabel2:a[ye.to].label}),xt[Ee].projected.push({graphId:i.id,edge:ye,preNode:ee})}))});for(var Tt=d.length,Ct=function(ve){if(_)return"break";var ie=d[ve];h.forEach(function(ye){var Ee=new ly(ye),we=e.findForwardRmpathEdges(i,Ee.edges[ie],g,Ee);we.length>0&&(_=!0,gt=o.dfsEdgeList[ie].fromNode,we.forEach(function(Pe){var Ve=Pe.label+"-"+a[Pe.to].label;xt[Ve]||(xt[Ve]={projected:[],edgeLabel:Pe.label,nodeLabel2:a[Pe.to].label}),xt[Ve].projected.push({graphId:i.id,edge:Pe,preNode:ye})}))})},F=0;F<Tt;F++){var te=Ct(F);if(te==="break")break}if(!_)return!0;var Kt=e.findMinLabel(xt);o.dfsEdgeList.push(new rf(gt,p+1,Pl,Kt.edgeLabel,Kt.nodeLabel2));var ne=o.dfsEdgeList.length-1;return t.dfsEdgeList[ne]!==o.dfsEdgeList[ne]?!1:f(xt[Kt.edgeLabel+"-"+Kt.nodeLabel2].projected)},c=l.nodeLabel1+"-"+l.edgeLabel+"-"+l.nodeLabel2;return u(s[c].projected)},n.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,v.clone)(e))}},n.prototype.subGraphMining=function(e){var t=this,r=this.getSupport(e);if(!(r<this.minSupport)&&!!this.isMin()){this.report();var i=this.dfsCode.getNodeNum(),a=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[a[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,l={},u={};e.forEach(function(c){for(var f=t.graphs[c.graphId],h=f.nodeMap,d=new ly(c),g=a.length-1;g>=0;g--){var p=t.findBackwardEdge(f,d.edges[a[g]],d.edges[a[0]],d);if(p){var m=t.dfsCode.dfsEdgeList[a[g]].fromNode+"-"+p.label;u[m]||(u[m]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[a[g]].fromNode,edgeLabel:p.label}),u[m].projected.push({graphId:c.graphId,edge:p,preNode:c})}}if(!(i>=t.maxNodeNum)){var _=t.findForwardPureEdges(f,d.edges[a[0]],s,d);_.forEach(function(M){var R=o+"-"+M.label+"-"+h[M.to].label;l[R]||(l[R]={projected:[],fromNodeId:o,edgeLabel:M.label,nodeLabel2:h[M.to].label}),l[R].projected.push({graphId:c.graphId,edge:M,preNode:c})});for(var S=function(R){var F=t.findForwardRmpathEdges(f,d.edges[a[R]],s,d);F.forEach(function(V){var nt=t.dfsCode.dfsEdgeList[a[R]].fromNode+"-"+V.label+"-"+h[V.to].label;l[nt]||(l[nt]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[a[R]].fromNode,edgeLabel:V.label,nodeLabel2:h[V.to].label}),l[nt].projected.push({graphId:c.graphId,edge:V,preNode:c})})},g=0;g<a.length;g++)S(g)}}),Object.keys(u).forEach(function(c){var f=u[c],h=f.toNodeId,d=f.edgeLabel;t.dfsCode.dfsEdgeList.push(new rf(o,h,"-1",d,"-1")),t.subGraphMining(u[c].projected),t.dfsCode.dfsEdgeList.pop()}),Object.keys(l).forEach(function(c){var f=l[c],h=f.fromNodeId,d=f.edgeLabel,g=f.nodeLabel2;t.dfsCode.dfsEdgeList.push(new rf(h,o+1,Pl,d,g)),t.subGraphMining(l[c].projected),t.dfsCode.dfsEdgeList.pop()})}},n.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,r=this.minSupport,i=this.frequentSize1Subgraphs,a={},o={},s={},l={};return Object.keys(e).forEach(function(u){var c=e[u],f=c.nodeMap;c.nodes.forEach(function(h,d){var g=h.label,p=u+"-"+g;if(!s[p]){var m=a[g]||0;m++,a[g]=m}s[p]={graphKey:u,label:g},h.edges.forEach(function(_){var S=g,M=f[_.to].label;if(!t&&S>M){var R=M;M=S,S=R}var F=_.label,V=u+"-"+S+"-"+F+"-"+M,nt=S+"-"+F+"-"+M;if(!o[nt]){var at=o[nt]||0;at++,o[nt]=at}l[V]={graphId:u,nodeLabel1:S,edgeLabel:F,nodeLabel2:M}})})}),Object.keys(a).forEach(function(u){var c=a[u];if(!(c<r)){var f={nodes:[],edges:[]};f.nodes.push({id:"0",label:u}),i.push(f)}}),i},n.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs,r=this.directed,i={};Object.keys(t).forEach(function(a){var o=t[a],s=o.nodeMap;o.nodes.forEach(function(l){var u=e.findForwardRootEdges(o,l);u.forEach(function(c){var f=s[c.to],h=l.label+"-"+c.label+"-"+f.label;i[h]||(i[h]={projected:[],nodeLabel1:l.label,edgeLabel:c.label,nodeLabel2:f.label});var d={graphId:a,edge:c,preNode:null};i[h].projected.push(d)})})}),Object.keys(i).forEach(function(a){var o=i[a],s=o.projected,l=o.nodeLabel1,u=o.edgeLabel,c=o.nodeLabel2;e.dfsCode.dfsEdgeList.push(new rf(0,1,l,u,c)),e.subGraphMining(s),e.dfsCode.dfsEdgeList.pop()})}},n}(),uj=function(e,t,r,i){var a={};return Object.keys(e).forEach(function(o,s){var l=e[o],u=new WA(s,!0,t),c={};l.nodes.forEach(function(f,h){u.addNode(h,f[r]),c[f.id]=h}),l.edges.forEach(function(f,h){var d=c[f.source],g=c[f.target];u.addEdge(-1,d,g,f[i])}),u&&u.getNodeNum()&&(a[u.id]=u)}),a},cj=function(e,t,r){var i=[];return e.forEach(function(a){var o={nodes:[],edges:[]};a.nodes.forEach(function(s){var l;o.nodes.push((l={id:""+s.id},l[t]=s.label,l))}),a.edges.forEach(function(s){var l;o.edges.push((l={source:""+s.from,target:""+s.to},l[r]=s.label,l))}),i.push(o)}),i},XA="cluster",fj=function(e){var t=e.graphs,r=e.directed,i=r===void 0?!1:r,a=e.nodeLabelProp,o=a===void 0?XA:a,s=e.edgeLabelProp,l=s===void 0?XA:s,u=uj(t,i,o,l),c=e.minSupport,f=e.maxNodeNum,h=e.minNodeNum,d=e.verbose,g=e.top,p={graphs:u,minSupport:c,maxNodeNum:f,minNodeNum:h,top:g,verbose:d,directed:i},m=new lj(p);m.run();var _=cj(m.frequentSubgraphs,o,l);return _},hj=fj;function uy(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?uy=function(t){return typeof t}:uy=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uy(n)}var YA=function(e,t,r,i){r===void 0&&(r="cluster"),i===void 0&&(i=2);var a=[],o=e.nodes;return t.forEach(function(s,l){a.push(HA(o,s,l,r,i))}),a},HA=function(e,t,r,i,a){var o=[r],s=[],l={};return t.forEach(function(u,c){if(u<=a&&r!==c){o.push(c),s.push(e[c]);var f=e[c][i];l[f]?(l[f].count++,l[f].dists.push(u)):l[f]={count:1,dists:[u]}}}),Object.keys(l).forEach(function(u){l[u].dists=l[u].dists.sort(function(c,f){return c-f})}),{nodeIdx:r,nodeId:e[r].id,nodeIdxs:o,neighbors:s,neighborNum:o.length-1,nodeLabelCountMap:l}},dj=function(e,t,r,i,a){var o=Math.ceil(r/t),s={},l=0;return i.forEach(function(u,c){for(var f=0,h=0,d=u.nodeIdxs,g=u.neighborNum-1;f<o;){for(var p=d[1+Math.floor(Math.random()*g)],m=0;(s[c+"-"+p]||s[p+"-"+c])&&(p=Math.floor(Math.random()*t),m++,!(m>2*t)););if(m<2*t&&(s[c+"-"+p]={start:c,end:p,distance:a[c][p]},f++,l++,l>=r))return s;if(h++,h>2*t)break}if(f<o){var _=o-f;o=(o+_)/(t-c-1)}}),s},cy=function(e,t,r,i){var a=r.nodes;return i||(i={}),Object.keys(e).forEach(function(o){var s,l;if(!(i&&i[o])){i[o]={nodes:[],edges:[]};var u=e[o],c=(s=t[u.start])===null||s===void 0?void 0:s.nodeIdxs,f=(l=t[u.end])===null||l===void 0?void 0:l.nodeIdxs;if(!(!c||!f)){var h=new Set(f),d=c.filter(function(S){return h.has(S)});if(!(!d||!d.length)){for(var g={},p=d.length,m=0;m<p;m++){var _=a[d[m]];i[o].nodes.push(_),g[_.id]=!0}r.edges.forEach(function(S){g[S.source]&&g[S.target]&&i[o].edges.push(S)})}}}}),i},fy=function(e,t,r,i){var a={};e.nodes.forEach(function(s){a[s.id]=s});var o=0;return e.edges.forEach(function(s){var l=a[s.source][r],u=a[s.target][r],c=t.nodes[0][r],f=t.nodes[1][r],h=t.edges[0][i];s[i]===h&&(l===c&&u===f||l===f&&u===c)&&o++}),o},vj=function(e,t,r){for(var i=Infinity,a=0,o=function(u){var c=e[u],f=Object.keys(c).sort(function(S,M){return c[S]-c[M]}),h=10,d=[];f.forEach(function(S,M){d[M%h]||(d[M%h]={graphs:[],totalCount:0,aveCount:0}),d[M%h].graphs.push(S),d[M%h].totalCount+=c[S]});var g=0,p=[];d.forEach(function(S){var M=S.totalCount/S.graphs.length;S.aveCount=M,p.push(M);var R=0,F=S.length;S.graphs.forEach(function(V,nt){var at=c[V];S.graphs.forEach(function(xt,gt){nt!==gt&&(R+=Math.abs(at-c[xt]))})}),R/=F*(F-1)/2,g+=R}),g/=d.length;var m=0;p.forEach(function(S,M){p.forEach(function(R,F){M!==F&&(m+=Math.abs(S-R))}),m/=p.length*(p.length-1)/2});var _=m-g;i<_&&(i=_,a=u)},s=0;s<t;s++)o(s);return{structure:r[a],structureCountMap:e[a]}},jA=function(e,t){var r={},i={};return e.forEach(function(a,o){r[a.id]={idx:o,node:a,degree:0};var s=a[t];i[s]||(i[s]=[]),i[s].push(a)}),{nodeMap:r,nodeLabelMap:i}},ZA=function(e,t,r){var i={},a={};return e.forEach(function(o,s){i[""+wA]={idx:s,edge:o};var l=o[t];a[l]||(a[l]=[]),a[l].push(o);var u=r[o.source];u&&u.degree++;var c=r[o.target];c&&c.degree++}),{edgeMap:i,edgeLabelMap:a}},KA=function(e,t,r){var i=t.length,a={};return t.forEach(function(o,s){for(var l=r?0:s+1,u=e[s].id,c=l;c<i;c++)if(s!==c){var f=e[c].id,h=o[c];a[u+"-"+f]=h,r||(a[f+"-"+u]=h)}}),a},gj=function(e,t,r,i,a,o,s,l,u,c,f){var h,d=t.id+"-"+r.id;if(c&&c[d])return c[d];var g=f?f[d]:void 0;if(!g){var p=(h={},h[d]={start:i[t.id].idx,end:i[r.id].idx,distance:a},h);f=cy(p,o,e,f),g=f[d]}return fy(g,s,l,u)},pj=function(e,t,r,i,a,o,s){if(r===void 0&&(r=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),!(!e||!e.nodes)){var l=e.nodes.length;if(!!l){var u=Eg(e,r),c=Eg(t,r),f=KA(e.nodes,u,r),h=KA(t.nodes,c,r),d=jA(e.nodes,o),g=d.nodeMap,p=d.nodeLabelMap,m=jA(t.nodes,o),_=m.nodeMap,S=m.nodeLabelMap;ZA(e.edges,s,g);var M=ZA(t.edges,s,_).edgeLabelMap;a||(a=Math.max.apply(Math,(0,b.__spreadArray)((0,b.__spreadArray)([],c[0]),[2]))),i||(i=a);var R=YA(e,u,o,i),F=YA(t,c,o,i),V=Math.min(100,l*(l-1)/2),nt=dj(i,l,V,F,u),at=cy(nt,R,e),xt=10,gt=1,Tt=1,Ct=4,te={graphs:at,nodeLabelProp:o,edgeLabelProp:s,minSupport:gt,minNodeNum:Tt,maxNodeNum:Ct,directed:r},Kt=hj(te).slice(0,xt),ne=Kt.length,ee=[];Kt.forEach(function(Vn,ti){ee[ti]={},Object.keys(at).forEach(function(Kn){var xn=at[Kn],oi=fy(xn,Vn,o,s);ee[ti][Kn]=oi})});var ve=vj(ee,ne,Kt),ie=ve.structure,ye=ve.structureCountMap,Ee=t.nodes[0],we=Ee[o],Pe=p[we],Ve={},he={},Te={},Je={},Ze={};Object.keys(S).forEach(function(Vn,ti){Ze[Vn]=[];var Kn=-Infinity,xn=S[Vn],oi={};xn.forEach(function(Gn){var cn=h[Ee.id+"-"+Gn.id];cn&&Ze[Vn].push(cn),Kn<cn&&(Kn=cn),oi[Ee.id+"-"+Gn.id]={start:0,end:_[Gn.id].idx,distance:cn}}),Ze[Vn]=Ze[Vn].sort(function(Gn,cn){return Gn-cn}),he=cy(oi,F,t,he);var ln=[];if(Object.keys(oi).forEach(function(Gn){if(Te[Gn]){ln.push(Te[Gn]);return}var cn=he[Gn];Te[Gn]=fy(cn,ie,o,s),ln.push(Te[Gn])}),ln=ln.sort(function(Gn,cn){return cn-Gn}),Je[Ee.id+"-"+Vn]=ln,Vn!==we)for(var si=Pe.length,Xn=function(cn){var ei=Pe[cn],Cr=R[g[ei.id].idx],qn=Cr.nodeLabelCountMap[Vn],nl=S[Vn].length;if(!qn||qn.count<nl)return Pe.splice(cn,1),"continue";for(var sa=!1,La=0;La<nl;La++)if(qn.dists[La]>Ze[Vn][La]){sa=!0;break}if(sa)return Pe.splice(cn,1),"continue";var Za={};Cr.neighbors.forEach(function(Ki){var ya=f[ei.id+"-"+Ki.id];Za[ei.id+"-"+Ki.id]={start:g[ei.id].idx,end:g[Ki.id].idx,distance:ya}}),at=cy(Za,R,e,at);var Ui=[];Object.keys(Za).forEach(function(Ki){if(ye[Ki]){Ui.push(ye[Ki]);return}var ya=at[Ki];ye[Ki]=fy(ya,ie,o,s),Ui.push(ye[Ki])}),Ui=Ui.sort(function(Ki,ya){return ya-Ki});for(var Ra=!1,La=0;La<nl;La++)if(Ui[La]<ln[La]){Ra=!0;break}if(Ra)return Pe.splice(cn,1),"continue"},oa=si-1;oa>=0;oa--)Xn(oa)});var ar=[];Pe.forEach(function(Vn){for(var ti=g[Vn.id].idx,Kn=HA(e.nodes,u[ti],ti,o,a),xn=Kn.neighbors,oi=xn.length,ln=!1,si=function(cn){if(xn.length+1<t.nodes.length)return ln=!0,{value:void 0};var ei=xn[cn],Cr=ei[o];if(!S[Cr]||!S[Cr].length)return xn.splice(cn,1),"continue";var qn=Vn.id+"-"+ei.id;if(!Ze[Cr]||!Ze[Cr].length)return xn.splice(cn,1),"continue";var nl=f[qn],sa=Ze[Cr][Ze[Cr].length-1];if(nl>sa)return xn.splice(cn,1),"continue";var La=ye[qn]?ye[qn]:gj(e,Vn,ei,g,nl,R,ie,o,s,ye,at),Za=Ee.id+"-"+Cr,Ui=Je[Za][Je[Za].length-1];if(La<Ui)return xn.splice(cn,1),"continue";var Ra=Ve[Cr];if(Ra===void 0&&(Ra=Infinity,S[Cr].forEach(function(Ki){var ya=_[Ki.id].degree;Ra>ya&&(Ra=ya)}),Ve[Cr]=Ra),g[ei.id].degree<Ra)return xn.splice(cn,1),"continue"},Xn=oi-1;Xn>=0;Xn--){var oa=si(Xn);if(uy(oa)==="object")return oa.value}ln||ar.push({nodes:[Vn].concat(xn)})});var cr=Sg(t,Ee.id,!1).length,Dr={};r?(Object.keys(cr).forEach(function(Vn){var ti=_[Vn].node[o];Dr[ti]?Dr[ti].push(cr[Vn]):Dr[ti]=[cr[Vn]]}),Object.keys(Dr).forEach(function(Vn){Dr[Vn].sort(function(ti,Kn){return ti-Kn})})):Dr=Ze;for(var sn=ar.length,Wr=function(ti){var Kn=ar[ti],xn=Kn.nodes[0],oi={},ln={};Kn.nodes.forEach(function(hi,$i){ln[hi.id]={idx:$i,node:hi,degree:0};var qi=hi[o];oi[qi]?oi[qi]++:oi[qi]=1});var si=[],Xn={};e.edges.forEach(function(hi){ln[hi.source]&&ln[hi.target]&&(si.push(hi),Xn[hi[s]]?Xn[hi[s]]++:Xn[hi[s]]=1,ln[hi.source].degree++,ln[hi.target].degree++)});for(var oa=Object.keys(M).length,Gn=!1,cn=0;cn<oa;cn++){var ei=Object.keys(M)[cn];if(!Xn[ei]||Xn[ei]<M[ei].length){Gn=!0;break}}if(Gn)return ar.splice(ti,1),"continue";var Cr=si.length;if(Cr<t.edges.length)return ar.splice(ti,1),"break";for(var qn=!1,nl=function($i){var qi=si[$i],Na=qi[s],al=M[Na];if(!al||!al.length)return Xn[Na]--,al&&Xn[Na]<al.length?(qn=!0,"break"):(si.splice($i,1),ln[qi.source].degree--,ln[qi.target].degree--,"continue");var Ef=ln[qi.source].node[o],Md=ln[qi.target].node[o],fp=!1;if(al.forEach(function(ol){var wf=_[ol.source].node,Qu=_[ol.target].node;wf[o]===Ef&&Qu[o]===Md&&(fp=!0),!r&&wf[o]===Md&&Qu[o]===Ef&&(fp=!0)}),!fp)return Xn[Na]--,al&&Xn[Na]<al.length?(qn=!0,"break"):(si.splice($i,1),ln[qi.source].degree--,ln[qi.target].degree--,"continue")},cn=Cr-1;cn>=0;cn--){var sa=nl(cn);if(sa==="break")break}if(qn)return ar.splice(ti,1),"continue";Kn.edges=si;var La=Sg(Kn,Kn.nodes[0].id,!1).length;if(Object.keys(La).reverse().forEach(function(hi){if(!(hi===Kn.nodes[0].id||qn)){if(La[hi]===Infinity){var $i=ln[hi].node[o];if(oi[$i]--,oi[$i]<S[$i].length){qn=!0;return}var qi=Kn.nodes.indexOf(ln[hi].node);Kn.nodes.splice(qi,1),ln[hi]=void 0;return}var Na=g[hi].node[o];if(!Dr[Na]||!Dr[Na].length||La[hi]>Dr[Na][Dr[Na].length-1]){var $i=ln[hi].node[o];if(oi[$i]--,oi[$i]<S[$i].length){qn=!0;return}var qi=Kn.nodes.indexOf(ln[hi].node);Kn.nodes.splice(qi,1),ln[hi]=void 0}}}),qn)return ar.splice(ti,1),"continue";for(var Za=!0,Ui=0;Za&&!qn;){if(Za=!1,ln[xn.id].degree<_[Ee.id].degree){qn=!0;break}if(oi[xn[o]]<S[xn[o]].length){qn=!0;break}for(var Ra=Kn.nodes.length,Ki=Ra-1;Ki>=0;Ki--){var ya=Kn.nodes[Ki],il=ln[ya.id].degree,cp=ya[o];if(il<Ve[cp]){if(oi[ya[o]]--,oi[ya[o]]<S[ya[o]].length){qn=!0;break}Kn.nodes.splice(Ki,1),ln[ya.id]=void 0,Za=!0}}if(qn||!Za&&Ui!==0)break;Cr=si.length;for(var Ka=Cr-1;Ka>=0;Ka--){var Do=si[Ka];if(!ln[Do.source]||!ln[Do.target]){si.splice(Ka,1);var $u=Do[s];if(Xn[$u]--,ln[Do.source]&&ln[Do.source].degree--,ln[Do.target]&&ln[Do.target].degree--,M[$u]&&Xn[$u]<M[$u].length){qn=!0;break}Za=!0}}Ui++}if(qn||qn||Kn.nodes.length<t.nodes.length||si.length<t.edges.length)return ar.splice(ti,1),"continue"},ai=sn-1;ai>=0;ai--){var Ln=Wr(ai);if(Ln==="break")break}for(var gi=ar.length,Po=function(ti){var Kn=ar[ti],xn={};Kn.edges.forEach(function(si){var Xn=si.source+"-"+si.target+"-"+si.label;xn[Xn]?xn[Xn]++:xn[Xn]=1});for(var oi=function(Xn){var oa=ar[Xn],Gn={};oa.edges.forEach(function(ei){var Cr=ei.source+"-"+ei.target+"-"+ei.label;Gn[Cr]?Gn[Cr]++:Gn[Cr]=1});var cn=!0;Object.keys(Gn).length!==Object.keys(xn).length?cn=!1:Object.keys(xn).forEach(function(ei){Gn[ei]!==xn[ei]&&(cn=!1)}),cn&&ar.splice(Xn,1)},ln=gi-1;ln>ti;ln--)oi(ln);gi=ar.length},ai=0;ai<=gi-1;ai++)Po(ai);return ar}}},$A=pj,yj=function(){function n(e){e===void 0&&(e=10),this.linkedList=new EA,this.maxStep=e}return Object.defineProperty(n.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),n.prototype.isEmpty=function(){return!this.linkedList.head},n.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},n.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},n.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},n.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},n.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},n.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},n}(),hy=yj,QA=Rb,mj={getAdjMatrix:ef,breadthFirstSearch:CA,connectedComponent:Ob,getDegree:oy,getInDegree:AA,getOutDegree:TA,detectCycle:Rb,detectDirectedCycle:QA,detectAllCycles:OA,detectAllDirectedCycle:Lb,detectAllUndirectedCycle:Db,depthFirstSearch:Pb,dijkstra:Sg,findAllPath:LA,findShortestPath:DA,floydWarshall:Eg,labelPropagation:RA,louvain:NA,minimumSpanningTree:BA,pageRank:FA,getNeighbors:To,Stack:hy,GADDI:$A},dy=Cn.vs,xj=function(e){return function(t,r){return t[e]-r[e]}},JA=function(e,t,r){return e>=t&&e<=r},vy=function(e,t,r,i){var a=1e-4,o={x:r.x-e.x,y:r.y-e.y},s={x:t.x-e.x,y:t.y-e.y},l={x:i.x-r.x,y:i.y-r.y},u=s.x*l.y-s.y*l.x,c=u*u,f=1/u,h=s.x*s.x+s.y*s.y,d=l.x*l.x+l.y*l.y;if(c>a*h*d){var g=(o.x*l.y-o.y*l.x)*f,p=(o.x*s.y-o.y*s.x)*f;return!JA(g,0,1)||!JA(p,0,1)?null:{x:e.x+g*s.x,y:e.y+g*s.y}}return null},qA=function(e,t){var r=e.x,i=e.y,a=e.width,o=e.height,s=r+a/2,l=i+o/2,u=[],c={x:s,y:l};u.push({x:r,y:i}),u.push({x:r+a,y:i}),u.push({x:r+a,y:i+o}),u.push({x:r,y:i+o}),u.push({x:r,y:i});for(var f=null,h=1;h<u.length&&(f=vy(u[h-1],u[h],c,t),!f);h++);return f},tT=function(e,t){var r=e.x,i=e.y,a=e.r,o=t.x,s=t.y,l=o-r,u=s-i,c=Math.sqrt(l*l+u*u);if(c<a)return null;var f=Math.sign(l),h=Math.sign(u),d=Math.atan(u/l);return{x:r+Math.abs(a*Math.cos(d))*f,y:i+Math.abs(a*Math.sin(d))*h}},eT=function(e,t){var r=e.rx,i=e.ry,a=e.x,o=e.y,s=t.x-a,l=t.y-o,u=Math.atan2(l/i,s/r);return u<0&&(u+=2*Math.PI),{x:a+r*Math.cos(u),y:o+i*Math.sin(u)}},gy=function(e,t,r){r===void 0&&(r=1);var i=[e.x,e.y,r];return(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]),Eo(i,i,t),{x:i[0],y:i[1]}},rT=function(e,t,r){r===void 0&&(r=1),(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]);var i=ra.invert([1,0,0,0,1,0,0,0,1],t);i||(i=[1,0,0,0,1,0,0,0,1]);var a=[e.x,e.y,r];return Eo(a,a,i),{x:a[0],y:a[1]}},Nb=function(e,t,r){var i=e.x-t.x,a=e.y-t.y,o=e.x-r.x,s=e.y-r.y,l=(e.x*e.x-t.x*t.x-t.y*t.y+e.y*e.y)/2,u=(e.x*e.x-r.x*r.x-r.y*r.y+e.y*e.y)/2,c=a*o-i*s;return{x:-(s*l-a*u)/c,y:-(i*u-o*l)/c}},py=function(e,t){var r=e.x-t.x,i=e.y-t.y;return Math.sqrt(r*r+i*i)},bj=function(e,t){var r=[];return e.forEach(function(i){var a=[];i.forEach(function(o){a.push(o*t)}),r.push(a)}),r},_j=function(e){for(var t=[],r=e.length,i=0;i<r;i+=1){t[i]=[];for(var a=0;a<r;a+=1)i===a?t[i][a]=0:e[i][a]===0||!e[i][a]?t[i][a]=Infinity:t[i][a]=e[i][a]}for(var o=0;o<r;o+=1)for(var i=0;i<r;i+=1)for(var a=0;a<r;a+=1)t[i][a]>t[i][o]+t[o][a]&&(t[i][a]=t[i][o]+t[o][a]);return t},Sj=function(e,t){var r=e.nodes,i=e.edges,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,l){o[s.id]=l;var u=[];a.push(u)}),i&&i.forEach(function(s){var l=s.source,u=s.target,c=o[l],f=o[u];a[c][f]=1,t||(a[f][c]=1)}),a},nT=function(e,t){e.translate(t.x,t.y)},iT=function(e,t,r,i){i===void 0&&(i={duration:500});var a=e.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]);var o=e.getCanvasBBox(),s=t.x-o.minX,l=t.y-o.minY;if(r){var u=s*a[0],c=l*a[4],f=0,h=0,d=0,g=0;e.animate(function(m){return d=u*m,g=c*m,a=dy(a,[["t",d-f,g-h]]),f=d,h=g,{matrix:a}},i)}else{var p=dy(a,[["t",s,l]]);e.setMatrix(p)}},Ej=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var i=t;(0,v.isArray)(t)||(i=[t,t]),(0,v.isArray)(t)&&t.length===1&&(i=[t[0],t[0]]),r=dy(r,[["s",i[0],i[1]]]),e.setMatrix(r)},wj=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]),r=dy(r,[["r",t]]),e.setMatrix(r)},Cj=function(e,t,r){for(var i=[],a=0;a<e;a++)i[a]=0;return r.forEach(function(o){o.source&&(i[t[o.source]]+=1),o.target&&(i[t[o.target]]+=1)}),i};function Mj(n,e,t){return(t[0]-n[0])*(e[1]-n[1])==(e[0]-n[0])*(t[1]-n[1])&&Math.min(n[0],e[0])<=t[0]&&t[0]<=Math.max(n[0],e[0])&&Math.min(n[1],e[1])<=t[1]&&t[1]<=Math.max(n[1],e[1])}var wg=function(e,t,r){var i=!1,a=e.length,o=1e-6;function s(f){return Math.abs(f)<o?0:f<0?-1:1}if(a<=2)return!1;for(var l=0;l<a;l++){var u=e[l],c=e[(l+1)%a];if(Mj(u,c,[t,r]))return!0;s(u[1]-r)>0!=s(c[1]-r)>0&&s(t-(r-u[1])*(u[0]-c[0])/(u[1]-c[1])-u[0])<0&&(i=!i)}return i},aT=function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)},Aj=function(e,t){var r=!1;return(0,v.each)(e,function(i){if(vy(i.from,i.to,t.from,t.to))return r=!0,!1}),r},oT=function(e,t){var r=function(h){var d=h.map(function(p){return p[0]}),g=h.map(function(p){return p[1]});return{minX:Math.min.apply(null,d),maxX:Math.max.apply(null,d),minY:Math.min.apply(null,g),maxY:Math.max.apply(null,g)}},i=function(h){for(var d=[],g=h.length,p=0;p<g-1;p++){var m=h[p],_=h[p+1];d.push({from:{x:m[0],y:m[1]},to:{x:_[0],y:_[1]}})}if(d.length>1){var S=h[0],M=h[g-1];d.push({from:{x:M[0],y:M[1]},to:{x:S[0],y:S[1]}})}return d};if(e.length<2||t.length<2)return!1;var a=r(e),o=r(t);if(!aT(a,o))return!1;var s=!1;if((0,v.each)(t,function(f){if(wg(e,f[0],f[1]))return s=!0,!1}),s||((0,v.each)(e,function(f){if(wg(t,f[0],f[1]))return s=!0,!1}),s))return!0;var l=i(e),u=i(t),c=!1;return(0,v.each)(u,function(f){if(Aj(l,f))return c=!0,!1}),c},nf=function(){function n(e,t,r,i){this.x1=e,this.y1=t,this.x2=r,this.y2=i}return n.prototype.getBBox=function(){var e=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),r=Math.max(this.x1,this.x2),i=Math.max(this.y1,this.y2),a={x:e,y:t,minX:e,minY:t,maxX:r,maxY:i,width:r-e,height:i-t};return a},n}(),kb=function(e,t){var r={top:[e.minX,e.minY,e.maxX,e.minY],left:[e.minX,e.minY,e.minX,e.maxY],bottom:[e.minX,e.maxY,e.maxX,e.maxY],right:[e.maxX,e.minY,e.maxX,e.maxY]};return r[t]},Tj=function(e,t){var r=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),i=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),a=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(a){var o=r/a,s=i/a;if(o>=0&&o<=1&&s>=0&&s<=1)return o}return Number.POSITIVE_INFINITY},sT=function(e,t){for(var r=["top","left","bottom","right"],i=e.getBBox(),a=0,o=[],s=0;s<4;s++){var l=kb(i,r[s]),u=l[0],c=l[1],f=l[2],h=l[3];o[s]=vy({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:u,y:c},{x:f,y:h}),o[s]&&(a+=1)}return[o,a]},Bb=function(e,t){for(var r=["top","left","bottom","right"],i=e.getBBox(),a=Number.POSITIVE_INFINITY,o=0,s=0;s<4;s++){var l=kb(i,r[s]),u=l[0],c=l[1],f=l[2],h=l[3],d=Tj(t,new nf(u,c,f,h));d=Math.abs(d-.5),d>=0&&d<=1&&(o+=1,a=d<a?d:a)}return o===0?-1:a},lT=function(e){var t=0,r=0;if(e.length>0){for(var i=0,a=e;i<a.length;i++){var o=a[i];t+=o.x,r+=o.y}t/=e.length,r/=e.length}return{x:t,y:r}},yy=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},uT=function(e,t){var r=t.x1,i=t.y1,a=t.x2-r,o=t.y2-i,s=e.x-r,l=e.y-i,u=s*a+l*o,c;u<=0?c=0:(s=a-s,l=o-l,u=s*a+l*o,u<=0?c=0:c=u*u/(a*a+o*o));var f=s*s+l*l-c;return f<0&&(f=0),f},Fb=function(e,t,r){return r===void 0&&(r=.001),Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(r,2)},cT=function(e,t){var r=e.x<t.x,i=e.x>t.x+t.width,a=e.y>t.y+t.height,o=e.y<t.y,s=r||i||a||o;if(!s)return 0;if(a&&!r&&!i)return Math.pow(t.y+t.height-e.y,2);if(o&&!r&&!i)return Math.pow(e.y-t.y,2);if(r&&!a&&!o)return Math.pow(t.x-e.x,2);if(i&&!a&&!o)return Math.pow(t.x+t.width-e.x,2);var l=Math.min(Math.abs(t.x-e.x),Math.abs(t.x+t.width-e.x)),u=Math.min(Math.abs(t.y-e.y),Math.abs(t.y+t.height-e.y));return l*l+u*u},Ij=function(e,t){var r=e[0],i=e[1],a=e[2],o=e[3],s=t.x,l=t.y,u=[a-r,o-i];if(Ar.I6(u,[0,0]))return NaN;var c=[-u[1],u[0]];Ar.Fv(c,c);var f=[s-r,l-i];return Math.abs(Ar.AK(f,c))},Lu="rgb(95, 149, 255)",Oj="rgb(255, 255, 255)",fT="rgb(0, 0, 0)",Gb="rgb(247, 250, 255)",hT="rgb(239, 244, 255)",my="rgb(253, 253, 253)",dT="rgb(250, 250, 250)",xy="rgb(224, 224, 224)",vT="rgb(234, 234, 234)",Pj="rgb(245, 245, 245)",Dj="rgb(191, 213, 255)",gT="#4572d9",Lj="rgb(223, 234, 255)",Tn={mainStroke:Lu,mainFill:hT,activeStroke:Lu,activeFill:Gb,inactiveStroke:Dj,inactiveFill:Gb,selectedStroke:Lu,selectedFill:Oj,highlightStroke:gT,highlightFill:Lj,disableStroke:xy,disableFill:dT,edgeMainStroke:xy,edgeActiveStroke:Lu,edgeInactiveStroke:vT,edgeSelectedStroke:Lu,edgeHighlightStroke:Lu,edgeDisableStroke:Pj,comboMainStroke:xy,comboMainFill:my,comboActiveStroke:Lu,comboActiveFill:Gb,comboInactiveStroke:xy,comboInactiveFill:my,comboSelectedStroke:Lu,comboSelectedFill:my,comboHighlightStroke:gT,comboHighlightFill:my,comboDisableStroke:vT,comboDisableFill:dT},Rr={version:"0.3.4",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Tn.mainStroke,fill:hT},size:20,color:Tn.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Tn.activeFill,stroke:Tn.activeStroke}},nodeStateStyles:{active:{fill:Tn.activeFill,stroke:Tn.activeStroke,lineWidth:2,shadowColor:Tn.mainStroke,shadowBlur:10},selected:{fill:Tn.selectedFill,stroke:Tn.selectedStroke,lineWidth:4,shadowColor:Tn.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Tn.highlightFill,stroke:Tn.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Tn.inactiveFill,stroke:Tn.inactiveStroke,lineWidth:1},disable:{fill:Tn.disableFill,stroke:Tn.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:fT,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Tn.edgeMainStroke,lineAppendWidth:2},color:Tn.edgeMainStroke},edgeStateStyles:{active:{stroke:Tn.edgeActiveStroke,lineWidth:1},selected:{stroke:Tn.edgeSelectedStroke,lineWidth:2,shadowColor:Tn.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Tn.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Tn.edgeInactiveStroke,lineWidth:1},disable:{stroke:Tn.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:fT,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Tn.comboMainFill,lineWidth:1,stroke:Tn.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Tn.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Tn.comboActiveStroke,lineWidth:1,fill:Tn.comboActiveFill},selected:{stroke:Tn.comboSelectedStroke,lineWidth:2,fill:Tn.comboSelectedFill,shadowColor:Tn.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Tn.comboHighlightStroke,lineWidth:2,fill:Tn.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Tn.comboInactiveStroke,fill:Tn.comboInactiveFill,lineWidth:1},disable:{stroke:Tn.comboDisableStroke,fill:Tn.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]}},Rj={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,"0":.6,"1":.40099945068359377,"2":.6,"3":.6,"4":.6,"5":.6,"6":.6,"7":.5469985961914062,"8":.6,"9":.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},Ys=Math.PI,zb=Math.sin,Ub=Math.cos,_a=zb(Ys/8),Sa=Ub(Ys/8),by=function(e,t){var r=e.getBBox(),i={x:r.minX,y:r.minY},a={x:r.maxX,y:r.maxY};if(t){var o=t.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),i=gy(i,o),a=gy(a,o)}var s=i.x,l=i.y,u=a.x,c=a.y;return{x:s,y:l,minX:s,minY:l,maxX:u,maxY:c,width:u-s,height:c-l}},pT=function(e){var t=e.sourceNode||e.targetNode,r=t.get("group"),i=r.getMatrix();i||(i=[1,0,0,0,1,0,0,0,1]);var a=t.getKeyShape(),o=a.getBBox(),s=e.loopCfg||{},l=s.dist||Math.max(o.width,o.height)*2,u=s.position||Rr.defaultLoopPosition,c=[i[6],i[7]],f=[e.startPoint.x,e.startPoint.y],h=[e.endPoint.x,e.endPoint.y],d=o.height/2,g=o.height/2,p=d*_a,m=d*Sa,_=g*_a,S=g*Sa;if(f[0]===h[0]&&f[1]===h[1]){switch(u){case"top":f=[c[0]-p,c[1]-m],h=[c[0]+_,c[1]-S];break;case"top-right":d=o.height/2,g=o.width/2,p=d*_a,m=d*Sa,_=g*_a,S=g*Sa,f=[c[0]+p,c[1]-m],h=[c[0]+S,c[1]-_];break;case"right":d=o.width/2,g=o.width/2,p=d*_a,m=d*Sa,_=g*_a,S=g*Sa,f=[c[0]+m,c[1]-p],h=[c[0]+S,c[1]+_];break;case"bottom-right":d=o.width/2,g=o.height/2,p=d*_a,m=d*Sa,_=g*_a,S=g*Sa,f=[c[0]+m,c[1]+p],h=[c[0]+_,c[1]+S];break;case"bottom":d=o.height/2,g=o.height/2,p=d*_a,m=d*Sa,_=g*_a,S=g*Sa,f=[c[0]+p,c[1]+m],h=[c[0]-_,c[1]+S];break;case"bottom-left":d=o.height/2,g=o.width/2,p=d*_a,m=d*Sa,_=g*_a,S=g*Sa,f=[c[0]-p,c[1]+m],h=[c[0]-S,c[1]+_];break;case"left":d=o.width/2,g=o.width/2,p=d*_a,m=d*Sa,_=g*_a,S=g*Sa,f=[c[0]-m,c[1]+p],h=[c[0]-S,c[1]-_];break;case"top-left":d=o.width/2,g=o.height/2,p=d*_a,m=d*Sa,_=g*_a,S=g*Sa,f=[c[0]-m,c[1]-p],h=[c[0]-_,c[1]-S];break;default:d=o.width/2,g=o.width/2,p=d*_a,m=d*Sa,_=g*_a,S=g*Sa,f=[c[0]-p,c[1]-m],h=[c[0]+_,c[1]-S]}if(s.clockwise===!1){var M=[f[0],f[1]];f=[h[0],h[1]],h=[M[0],M[1]]}}var R=[f[0]-c[0],f[1]-c[1]],F=(d+l)/d,V=(g+l)/g;s.clockwise===!1&&(F=(g+l)/g,V=(d+l)/d);var nt=Ar.bA([0,0],R,F),at=[c[0]+nt[0],c[1]+nt[1]],xt=[h[0]-c[0],h[1]-c[1]],gt=Ar.bA([0,0],xt,V),Tt=[c[0]+gt[0],c[1]+gt[1]];return e.startPoint={x:f[0],y:f[1]},e.endPoint={x:h[0],y:h[1]},e.controlPoints=[{x:at[0],y:at[1]},{x:Tt[0],y:Tt[1]}],e},_y=function(e,t,r,i,a){var o=1e-4,s=[],l=e.getPoint(t);if(l===null)return{x:0,y:0,angle:0};if(t<o)s=e.getStartTangent().reverse();else if(t>1-o)s=e.getEndTangent();else{var u=e.getPoint(t+o);s.push([l.x,l.y]),s.push([u.x,u.y])}var c=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]);if(c<0&&(c+=Ys*2),r&&(l.x+=Ub(c)*r,l.y+=zb(c)*r),i){var f=c-Ys/2;c>1/2*Ys&&c<3*1/2*Ys&&(f-=Ys),l.x+=Ub(f)*i,l.y+=zb(f)*i}var h={x:l.x,y:l.y,angle:c};return a?(c>1/2*Ys&&c<3*1/2*Ys&&(c-=Ys),(0,b.__assign)({rotate:c},h)):h},yT=function n(e,t){if(t(e)===!1)return!1;if(e&&e.children){for(var r=e.children.length-1;r>=0;r--)if(!n(e.children[r],t))return!1}return!0},Nj=function n(e,t){if(e&&e.children){for(var r=e.children.length-1;r>=0;r--)if(!n(e.children[r],t))return}return t(e)!==!1},Io=function(e,t){typeof t=="function"&&yT(e,t)},Ru=function(e,t){typeof t=="function"&&Nj(e,t)},mT=function(e,t){return t*(Rj[e]||1)},xT=function(e,t){var r=0,i=new RegExp("[\u4E00-\u9FA5]+");return e.split("").forEach(function(a){i.test(a)?r+=t:r+=mT(a,t)}),[r,t]},Wb=function(e,t){var r=[],i={},a={};e.forEach(function(l){a[l.id]=l}),e.forEach(function(l,u){var c=(0,v.clone)(l);c.itemType="combo",c.children=void 0,c.parentId===c.id?(console.warn("The parentId for combo "+c.id+" can not be the same as the combo's id"),delete c.parentId):c.parentId&&!a[c.parentId]&&(console.warn("The parent combo for combo "+c.id+" does not exist!"),delete c.parentId);var f=i[c.id];if(f){if(c.children=f.children,i[c.id]=c,f=c,!f.parentId){r.push(f);return}var h=i[f.parentId];if(h)h.children?h.children.push(c):h.children=[c];else{var d={id:f.parentId,children:[f]};i[f.parentId]=d,i[c.id]=c}return}if((0,v.isString)(l.parentId)){var g=i[l.parentId];if(g)g.children?g.children.push(c):g.children=[c],i[c.id]=c;else{var p={id:l.parentId,children:[c]};i[p.id]=p,i[c.id]=c}}else r.push(c),i[c.id]=c});var o={};(t||[]).forEach(function(l){o[l.id]=l;var u=i[l.comboId];if(u){var c={id:l.id,comboId:l.comboId};u.children?u.children.push(c):u.children=[c],c.itemType="node",i[l.id]=c}});var s=0;return r.forEach(function(l){l.depth=s+10,yT(l,function(u){var c,f=i[u.id].itemType;f==="node"?c=i[u.comboId]:c=i[u.parentId],c&&f==="node"?u.depth=s+1:u.depth=s+10,s<u.depth&&(s=u.depth);var h=o[u.id];return h&&(h.depth=u.depth),!0})}),r},Vb=function(e,t,r){var i=e,a,o={root:{children:e}},s=!1,l="root";(e||[]).forEach(function(d){if(!s){if(d.id===t){a=d,d.itemType==="combo"?a.parentId=r:a.comboId=r,s=!0;return}Io(d,function(g){return o[g.id]={children:g.children},i=o[g.parentId||g.comboId||"root"].children,g&&(g.removed||t===g.id)&&i?(l=g.parentId||g.comboId||"root",a=g,g.itemType==="combo"?a.parentId=r:a.comboId=r,s=!0,!1):!0})}}),i=o[l].children;var u=i?i.indexOf(a):-1;if(u>-1&&i.splice(u,1),s||(a={id:t,itemType:"node",comboId:r},o[t]={children:void 0}),t){var c=!1;if(r){var f=0;(e||[]).forEach(function(d){c||Io(d,function(g){return r===g.id?(c=!0,g.children?g.children.push(a):g.children=[a],f=g.depth,a.itemType==="node"?a.depth=f+2:a.depth=f+1,!1):!0})})}else(!r||!c)&&a.itemType!=="node"&&e.push(a);var h=a.depth;Io(a,function(d){return d.itemType==="node"?h+=2:h+=1,d.depth=h,!0})}return e},Cg=function(e,t){var r={minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};return!e||e.length===0||(e.forEach(function(i){var a=t.findById(i.id);if(!(!a||!a.isVisible())){a.set("bboxCanvasCache",void 0);var o=a.getCanvasBBox();o.x&&r.minX>o.minX&&(r.minX=o.minX),o.y&&r.minY>o.minY&&(r.minY=o.minY),o.x&&r.maxX<o.maxX&&(r.maxX=o.maxX),o.y&&r.maxY<o.maxY&&(r.maxY=o.maxY)}}),r.x=(r.minX+r.maxX)/2,r.y=(r.minY+r.maxY)/2,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,Object.keys(r).forEach(function(i){(r[i]===Infinity||r[i]===-Infinity)&&(r[i]=void 0)})),r},bT=function(e){var t=(0,v.isNumber)(e.x)||(0,v.isNumber)(e.y)||e.type||e.anchorPoints||e.size;return e.style&&(t=t||(0,v.isNumber)(e.style.r)||(0,v.isNumber)(e.style.width)||(0,v.isNumber)(e.style.height)||(0,v.isNumber)(e.style.rx)||(0,v.isNumber)(e.style.ry)),t},Sy=function(e){var t={};return Object.keys(e).forEach(function(r){var i=e[r];if((0,v.isObject)(i)){var a={};Object.keys(i).forEach(function(o){var s=i[o];o==="img"&&!(0,v.isString)(s)||(a[o]=(0,v.clone)(s))}),t[r]=a}else t[r]=(0,v.clone)(i)}),t},_T=function(e){if(!e)return console.error("G6 Error Tips: the data must be defined"),!1;var t=e.nodes,r=e.edges,i=e.combos,a=i===void 0?[]:i;if(!t&&!r){var o=!0;return Io(e,function(h){return(0,v.isString)(h.id)?!0:(o=!1,!1)}),o}var s=(t||[]).find(function(h){return!(0,v.isString)(h.id)});if(s)return console.warn("G6 Warning Tips: missing 'id' property, or %c"+s.id+"%c is not a string.","font-size: 20px; color: red;",""),!1;var l=(t||[]).map(function(h){return h.id}),u=a.map(function(h){return h.id}),c=(0,b.__spreadArray)((0,b.__spreadArray)([],l),u),f=(r||[]).find(function(h){return!c.includes(h.source)||!c.includes(h.target)});return f?(console.warn("G6 Warning Tips: The source %c"+f.source+"%c or the target %c"+f.target+"%c of the edge do not exist in the nodes or combos.","font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1):!0},kj=function(e,t){if(e==="node"||e==="combo"){if(t.id&&!(0,v.isString)(t.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c"+t.id+"%c is not a string.","font-size: 20px; color: red;",""),!1}else if(e==="edge"&&(!t.source||!t.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0},Bj=function(){function n(e){this.graph=e,this.destroyed=!1,this.modes=e.get("modes")||{default:[]},this.formatModes(),this.mode=e.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return n.prototype.formatModes=function(){var e=this.modes;(0,v.each)(e,function(t){(0,v.each)(t,function(r,i){(0,v.isString)(r)&&(t[i]={type:r})})})},n.prototype.setBehaviors=function(e){var t=this.graph,r=this.modes[e],i=[],a;(0,v.each)(r||[],function(o){var s=bA.getBehavior(o.type||o);!s||(a=new s(o),a&&(a.bind(t),i.push(a)))}),this.currentBehaves=i},n.mergeBehaviors=function(e,t){return(0,v.each)(t,function(r){e.indexOf(r)<0&&((0,v.isString)(r)&&(r={type:r}),e.push(r))}),e},n.filterBehaviors=function(e,t){var r=[];return e.forEach(function(i){var a="";(0,v.isString)(i)?a=i:a=i.type,t.indexOf(a)<0&&r.push(i)}),r},n.prototype.setMode=function(e){var t=this,r=t.modes,i=t.graph,a=e,o=r[a];!o||(i.emit("beforemodechange",{mode:e}),(0,v.each)(this.currentBehaves,function(s){s.delegate&&s.delegate.remove(),s.unbind(i)}),this.setBehaviors(a),i.emit("aftermodechange",{mode:e}),this.mode=e)},n.prototype.getMode=function(){return this.mode},n.prototype.manipulateBehaviors=function(e,t,r){var i=this,a;if((0,v.isArray)(e)?a=e:a=[e],(0,v.isArray)(t))return(0,v.each)(t,function(s){i.modes[s]?r?i.modes[s]=n.mergeBehaviors(i.modes[s]||[],a):i.modes[s]=n.filterBehaviors(i.modes[s]||[],a):r&&(i.modes[s]=a)}),this;var o=t;return t||(o=this.mode),this.modes[o]||r&&(this.modes[o]=a),r?this.modes[o]=n.mergeBehaviors(this.modes[o]||[],a):this.modes[o]=n.filterBehaviors(this.modes[o]||[],a),this.setMode(this.mode),this},n.prototype.updateBehavior=function(e,t,r){(0,v.isString)(e)&&(e={type:e});var i=[];if(!r||r===this.mode||r==="default"){if(i=this.currentBehaves,!i||!i.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var a=i.length,o=0;o<a;o++){var s=i[o];if(s.type===e.type)return s.updateCfg(t),this;o===a-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(i=this.modes[r],!i||!i.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var l=i.length,o=0;o<l;o++){var s=i[o];if(s.type===e.type||s===e.type)return s===e.type&&(s={type:s}),Object.assign(s,t),i[o]=s,this;o===l-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},n.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},n}(),Fj=Bj,Gj=function(n){(0,b.__extends)(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.item=r.item,i.canvasX=r.canvasX,i.canvasY=r.canvasY,i.wheelDelta=r.wheelDelta,i.detail=r.detail,i}return e}(Qt.Event),Xb=function(e){return e+"-"+Math.random()+Date.now()},Yb=function(e){var t=0,r=0,i=0,a=0;if((0,v.isNumber)(e))t=r=i=a=e;else if((0,v.isString)(e)){var o=parseInt(e,10);t=r=i=a=o}else(0,v.isArray)(e)&&(t=e[0],i=(0,v.isNil)(e[1])?e[0]:e[1],a=(0,v.isNil)(e[2])?e[0]:e[2],r=(0,v.isNil)(e[3])?i:e[3]);return[t,i,a,r]},zj=function(e){var t=new Gj(e.type,e);return t.clientX=e.clientX,t.clientY=e.clientY,t.x=e.x,t.y=e.y,t.target=e.target,t.currentTarget=e.currentTarget,t.bubbles=!0,t.item=e.item,t},Uj=function(e){if(!e)return!1;for(var t=9,r=[1,0,0,0,1,0,0,0,1],i=0;i<t;i++)if(e[i]!==r[i])return!0;return!1},Ey=function(e){return Number.isNaN(Number(e))},ST=function(e){for(var t=Infinity,r=-Infinity,i=Infinity,a=-Infinity,o=0;o<e.length;o++){var s=e[o],l=s.getBBox(),u=l.minX,c=l.minY,f=l.maxX,h=l.maxY;u<t&&(t=u),c<i&&(i=c),f>r&&(r=f),h>a&&(a=h)}var d=Math.floor(t),g=Math.floor(i),p=Math.ceil(r)-Math.floor(t),m=Math.ceil(a)-Math.floor(i);return{x:d,y:g,width:p,height:m,minX:t,minY:i,maxX:r,maxY:a}},Wj=function(e,t,r,i,a){t===void 0&&(t=15),r===void 0&&(r="quadratic"),i===void 0&&(i=void 0),a===void 0&&(a=void 0);for(var o=e.length,s=t*2,l=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],u={},c=[],f={},h=0;h<o;h++){var d=e[h],g=d.source,p=d.target,m=g+"-"+p;if(!c[h]){u[m]||(u[m]=[]),c[h]=!0,u[m].push(d);for(var _=0;_<o;_++)if(h!==_){var S=e[_],M=S.source,R=S.target;c[_]||(g===R&&p===M?(u[m].push(S),c[_]=!0,f[M+"|"+R+"|"+(u[m].length-1)]=!0):g===M&&p===R&&(u[m].push(S),c[_]=!0))}}}for(var F in u)for(var V=u[F],nt=V.length,at=0;at<nt;at++){var xt=V[at];if(xt.source===xt.target){a&&(xt.type=a),xt.loopCfg={position:l[at%8],dist:Math.floor(at/8)*20+50};continue}if(nt===1&&i&&xt.source!==xt.target){xt.type=i;continue}xt.type=r;var gt=(at%2==0?1:-1)*(f[xt.source+"|"+xt.target+"|"+at]?-1:1);nt%2==1?xt.curveOffset=gt*Math.ceil(at/2)*s:xt.curveOffset=gt*(Math.floor(at/2)*s+t)}return e},Vj=function(){function n(e){this.destroyed=!1,this.graph=e,this.destroyed=!1}return n.prototype.getViewCenter=function(){var e=this.getFormatPadding(),t=this.graph,r=this.graph.get("width"),i=t.get("height");return{x:(r-e[1]-e[3])/2+e[3],y:(i-e[0]-e[2])/2+e[0]}},n.prototype.fitCenter=function(){var e=this.graph,t=e.get("group");t.resetMatrix();var r=t.getCanvasBBox();if(!(r.width===0||r.height===0)){var i=this.getViewCenter(),a={x:r.x+r.width/2,y:r.y+r.height/2};e.translate(i.x-a.x,i.y-a.y)}},n.prototype.fitView=function(){var e=this.graph,t=this.getFormatPadding(),r=e.get("width"),i=e.get("height"),a=e.get("group");a.resetMatrix();var o=a.getCanvasBBox();if(!(o.width===0||o.height===0)){var s=this.getViewCenter(),l={x:o.x+o.width/2,y:o.y+o.height/2};e.translate(s.x-l.x,s.y-l.y);var u=(r-t[1]-t[3])/o.width,c=(i-t[0]-t[2])/o.height,f=u;u>c&&(f=c),e.zoom(f,s)}},n.prototype.getFormatPadding=function(){var e=this.graph.get("fitViewPadding");return Yb(e)},n.prototype.focusPoint=function(e,t,r){var i=this,a=this.getViewCenter(),o=this.getPointByCanvas(a.x,a.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),t){var l=(o.x-e.x)*s[0],u=(o.y-e.y)*s[4],c=0,f=0,h=0,d=0;this.graph.get("canvas").animate(function(g){h=l*g,d=u*g,i.graph.translate(h-c,d-f),c=h,f=d},(0,b.__assign)({},r))}else this.graph.translate((o.x-e.x)*s[0],(o.y-e.y)*s[4])},n.prototype.getPointByCanvas=function(e,t){var r=this.graph.get("group").getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var i=rT({x:e,y:t},r);return i},n.prototype.getPointByClient=function(e,t){var r=this.graph.get("canvas"),i=r.getPointByClient(e,t);return this.getPointByCanvas(i.x,i.y)},n.prototype.getClientByPoint=function(e,t){var r=this.graph.get("canvas"),i=this.getCanvasByPoint(e,t),a=r.getClientByPoint(i.x,i.y);return{x:a.x,y:a.y}},n.prototype.getCanvasByPoint=function(e,t){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),gy({x:e,y:t},r)},n.prototype.focus=function(e,t,r){if((0,v.isString)(e)&&(e=this.graph.findById(e)),e){var i=0,a=0;if(e.getType&&e.getType()==="edge"){var o=e.getSource().get("group").getMatrix(),s=e.getTarget().get("group").getMatrix();o&&s?(i=(o[6]+s[6])/2,a=(o[7]+s[7])/2):(o||s)&&(i=o?o[6]:s[6],a=o?o[7]:s[7])}else{var l=e.get("group"),u=l.getMatrix();u||(u=[1,0,0,0,1,0,0,0,1]),i=u[6],a=u[7]}this.focusPoint({x:i,y:a},t,r)}},n.prototype.changeSize=function(e,t){var r=this.graph;if(!(0,v.isNumber)(e)||!(0,v.isNumber)(t))throw Error("invalid canvas width & height, please make sure width & height type is number");r.set({width:e,height:t});var i=r.get("canvas");i.changeSize(e,t);var a=r.get("plugins");a.forEach(function(o){o.get("gridContainer")&&o.positionInit()})},n.prototype.destroy=function(){this.graph=null,this.destroyed=!1},n}(),Xj=Vj;function wy(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?wy=function(t){return typeof t}:wy=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wy(n)}function ET(n){if(typeof n!="string")return n;var e=function(nt){if(typeof nt!="string")return nt;try{return JSON.parse(nt.trim())}catch(at){return nt.trim()}},t=e(n);if(typeof t!="string")return t;for(var r=function(nt){return nt[nt.length-1]},i=n.trim(),a=[],o=[],s=function(){for(var nt=[],at=0;at<arguments.length;at++)nt[at]=arguments[at];return nt.some(function(xt){return r(o)===xt})},l=function(){return r(a)},u=null,c=0,f="";c<i.length;){var h=i[c],d=s('"',"'");if(!d&&!h.trim()){c+=1;continue}var g=i[c-1]==="\\",p=s("}"),m=s("]"),_=s(","),S=l();if(d)if(r(o)===h&&!g){o.pop();var M=e(f);S.push(M),u=M,f=""}else f+=h;else if(m&&h===",")f&&(S.push(e(f)),f="");else if(p&&h===":")o.push(","),f&&(S.push(f),f="");else if(_&&h===",")f&&(S.push(e(f)),f=""),o.pop();else if(h==="}"&&(p||_)){f&&(S.push(e(f)),f=""),_&&o.pop();for(var R={},F=1;F<S.length;F+=2)R[S[F-1]]=S[F];a.pop(),a.length&&r(a).push(R),o.pop(),u=R}else h==="]"&&m?(f&&(S.push(e(f)),f=""),a.pop(),a.length&&r(a).push(S),o.pop(),u=S):h==="{"?(a.push([]),o.push("}")):h==="["?(a.push([]),o.push("]")):h==='"'?o.push('"'):h==="'"?o.push("'"):f+=h;c+=1}return u||f}var Yj=function(e){return e.split("-").reduce(function(t,r){return t+r.charAt(0).toUpperCase()+r.slice(1)})},Hj=function(e){return function(t){for(var r=e.length,i=[],a=0,o="";a<r;)if(e[a]==="{"&&e[a+1]==="{")i.push(o),o="",a+=2;else if(e[a]==="}"&&e[a+1]==="}"){if(i.length){var s=i.pop();o=(0,v.get)(t,o,s.endsWith("=")?'"{'+o+'}"':o),i.push(s+o)}a+=2,o=""}else o+=e[a],a+=1;return i.push(o),i.map(function(l,u){return i[u-1]&&i[u-1].endsWith("=")?'"{'+l+'}"':l}).join("")}};function wT(n,e){var t={},r=n.getAttributeNames&&n.getAttributeNames()||[],i=n.children&&Array.from(n.children).map(function(s){return wT(s,e)}),a={},o=n.tagName?n.tagName.toLowerCase():"group";return o==="text"&&(t.text=n.innerText),a.type=o,o==="img"&&(a.type="image"),Array.from(r).forEach(function(s){var l=Yj(s),u=n.getAttribute(s);try{if(l==="style"||l==="attrs"){var c=ET(u);t=(0,b.__assign)((0,b.__assign)({},t),c)}else a[l]=ET(u)}catch(f){if(l==="style")throw f;a[l]=u}}),a.attrs=t,e&&e.style&&a.name&&wy(e.style[a.name])==="object"&&(a.attrs=(0,b.__assign)((0,b.__assign)({},a.attrs),e.style[a.name])),e&&e.style&&a.keyshape&&(a.attrs=(0,b.__assign)((0,b.__assign)({},a.attrs),e.style)),i.length&&(a.children=i),a}function jj(n,e,t){var r=n.attrs,i=r===void 0?{}:r,a={x:e.x||0,y:e.y||0,width:t.width||0,height:t.height||0},o,s;switch(n.type){case"maker":case"circle":i.r&&(s=2*i.r,o=2*i.r);break;case"text":i.text&&(s=xT(i.text,i.fontSize||12)[0],o=16,a.y+=o,a.height=o,a.width=s,n.attrs=(0,b.__assign)({fontSize:12,fill:"#000"},i));break;default:i.width&&(s=i.width),i.height&&(o=i.height)}return o>=0&&(a.height=o),s>=0&&(a.width=s),i.marginTop&&(a.y+=i.marginTop),i.marginLeft&&(a.x+=i.marginLeft),a}function CT(n,e){var t;e===void 0&&(e={x:0,y:0});var r=(0,b.__assign)({x:0,y:0,width:0,height:0},e);if((t=n.children)===null||t===void 0?void 0:t.length){var i=n.attrs,a=i===void 0?{}:i,o=a.marginTop,s=(0,b.__assign)({},e);o&&(s.y+=o);for(var l=0;l<n.children.length;l++){n.children[l].attrs.key=(a.key||"root")+" -"+l+" ";var u=CT(n.children[l],s);if(u.bbox){var c=u.bbox;u.attrs.next==="inline"?s.x+=u.bbox.width:s.y+=u.bbox.height,c.width+c.x>r.width&&(r.width=c.width+c.x),c.height+c.y>r.height&&(r.height=c.height+c.y)}}}return n.bbox=jj(n,e,r),n.attrs=(0,b.__assign)((0,b.__assign)({},n.attrs),n.bbox),n}function MT(n,e){var t,r,i,a,o=(n||{}).type,s=((e==null?void 0:e.attrs)||{}).key;if(s&&n&&(n.attrs.key=s),!n&&e)return{action:"delete",val:e,type:o,key:s};if(n&&!e)return{action:"add",val:n,type:o};if(!n&&!e)return{action:"same",type:o};var l=[];if(((t=n.children)===null||t===void 0?void 0:t.length)>0||((r=e.children)===null||r===void 0?void 0:r.length)>0)for(var u=Math.max((i=n.children)===null||i===void 0?void 0:i.length,(a=e.children)===null||a===void 0?void 0:a.length),c=e.children||[],f=n.children||[],h=0;h<u;h+=1)l.push(MT(f[h],c[h]));var d=Object.keys(e.attrs),g=Object.keys(n.attrs);return e.type!==n.type?{action:"restructure",nowTarget:n,formerTarget:e,key:s,children:l}:d.filter(function(p){return p!=="children"}).some(function(p){return n.attrs[p]!==e.attrs[p]||!g.includes(p)})?{action:"change",val:n,children:l,type:o,key:s}:{action:"same",children:l,type:o,key:s}}function AT(n){var e={},t=function(i){var a=typeof n=="function"?n(i):n,o=Hj(a)(i),s=document.createElement("div");s.innerHTML=o;var l=s.children[0],u=CT(wT(l,i));return s.remove(),u};return{draw:function(i,a){var o=t(i),s=a,l=function u(c){var f=c.attrs,h=f===void 0?{}:f,d=c.bbox,g=c.type,p=c.children,m=(0,b.__rest)(c,["attrs","bbox","type","children"]);if(c.type!=="group"){var _=a.addShape(c.type,(0,b.__assign)({attrs:h,origin:{bbox:d,type:g,children:p}},m));c.keyshape&&(s=_)}c.children&&c.children.forEach(function(S){return u(S)})};return l(o),e[i.id]=[o],s},update:function(i,a){e[i.id]||(e[i.id]=[]);var o=a.getContainer(),s=o.get("children"),l=t(i),u=e[i.id].pop(),c=MT(l,u),f=function g(p){var m;p.type!=="group"&&o.addShape(p.type,{attrs:p.attrs}),((m=p.children)===null||m===void 0?void 0:m.length)&&p.children.map(function(_){return g(_)})},h=function g(p){var m,_=s.find(function(S){return S.attrs.key===p.attrs.key});_&&o.removeChild(_),((m=p.children)===null||m===void 0?void 0:m.length)&&p.children.map(function(S){return g(S)})},d=function g(p){var m=p.key;if(p.type!=="group"){var _=s.find(function(M){return M.attrs.key===m});switch(p.action){case"change":if(_){var S=p.val.keyshape?a.getOriginStyle():{};_.attr((0,b.__assign)((0,b.__assign)({},S),p.val.attrs))}break;case"add":f(p.val);break;case"delete":h(p.val);break;case"restructure":h(p.formerTarget),f(p.nowTarget);break;default:break}}p.children&&p.children.forEach(function(M){return g(M)})};d(c),e[i.id].push(l)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var Hb={};function TT(n){return Hb[n]||(Hb[n]=(0,v.upperFirst)(n)),Hb[n]}var Zj={defaultShapeType:"defaultType",className:null,getShape:function(e){var t=this,r=t[e]||t[t.defaultShapeType]||t["simple-circle"];return r},draw:function(e,t,r){var i=this.getShape(e),a=i.draw(t,r);return i.afterDraw&&i.afterDraw(t,r,a),a},baseUpdate:function(e,t,r){var i=this.getShape(e);i.update&&i.update(t,r),i.afterUpdate&&i.afterUpdate(t,r)},setState:function(e,t,r,i){var a=this.getShape(e);a.setState(t,r,i)},shouldUpdate:function(e){var t=this.getShape(e);return!!t.update},getControlPoints:function(e,t){var r=this.getShape(e);return r.getControlPoints(t)},getAnchorPoints:function(e,t){var r=this.getShape(e);return r.getAnchorPoints(t)}},jb={options:{},draw:function(e,t){return this.drawShape(e,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t=this.options.anchorPoints,r=e.anchorPoints||t;return r}},Cy=function(){function n(){}return n.registerFactory=function(e,t){var r=TT(e),i=Zj,a=(0,b.__assign)((0,b.__assign)({},i),t);return n[r]=a,a.className=r,a},n.getFactory=function(e){var t=TT(e);return n[t]},n.registerNode=function(e,t,r){var i=n.Node,a;if(typeof t=="string"||typeof t=="function"){var o=AT(t);a=(0,b.__assign)((0,b.__assign)({},i.getShape("single-node")),o)}else if(t.jsx){var s=t.jsx,o=AT(s);a=(0,b.__assign)((0,b.__assign)((0,b.__assign)({},i.getShape("single-node")),o),t)}else{i.getShape(r);var l=r?i.getShape(r):jb;a=(0,b.__assign)((0,b.__assign)({},l),t)}return a.type=e,a.itemType="node",i[e]=a,a},n.registerEdge=function(e,t,r){var i=n.Edge,a=r?i.getShape(r):jb,o=(0,b.__assign)((0,b.__assign)({},a),t);return o.type=e,o.itemType="edge",i[e]=o,o},n.registerCombo=function(e,t,r){var i=n.Combo,a=r?i.getShape(r):jb,o=(0,b.__assign)((0,b.__assign)({},a),t);return o.type=e,o.itemType="combo",i[e]=o,o},n}(),Ea=Cy;Cy.registerFactory("node",{defaultShapeType:"circle"}),Cy.registerFactory("edge",{defaultShapeType:"line"}),Cy.registerFactory("combo",{defaultShapeType:"circle"});var Zb="bboxCache",Kb="bboxCanvasCache",Bot=null,Kj=function(){function n(e){this._cfg={},this.destroyed=!1;var t={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(t,this.getDefaultCfg(),e);var r=this.get("model"),i=r.id,a=this.get("type");i||(i=Xb(a),this.get("model").id=i),this.set("id",i);var o=e.group;o&&(o.set("item",this),o.set("id",i)),this.init(),this.draw();var s=r.shape||r.type||(a==="edge"?"line":"circle"),l=this.get("shapeFactory");if(l&&l[s]){var u=l[s].options;if(u&&u.stateStyles){var c=this.get("styles")||r.stateStyles;c=(0,v.deepMix)({},u.stateStyles,c),this.set("styles",c)}}}return n.prototype.calculateBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=by(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},n.prototype.calculateCanvasBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=by(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},n.prototype.drawInner=function(){var e=this,t=e.get("shapeFactory"),r=e.get("group"),i=e.get("model");r.clear();var a=i.visible;if(a!==void 0&&!a&&e.changeVisibility(a),!!t){e.updatePosition(i);var o=e.getShapeCfg(i),s=o.type,l=t.draw(s,o,r);l&&(e.set("keyShape",l),l.set("isKeyShape",!0),l.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(t,s)}},n.prototype.setOriginStyle=function(){var e=this.get("group"),t=e.get("children"),r=this.getKeyShape(),i=this,a=r.get("name");if(this.get("originStyle")){var s=this.getOriginStyle();a&&!s[a]&&(s[a]={});var l=this.getCurrentStatesStyle();(0,v.each)(t,function(u){var c=u.get("name"),f=u.attr();if(c&&c!==a){var h=l[c];s[c]||(s[c]={}),h?Object.keys(f).forEach(function(p){var m=f[p];m!==h[p]&&(s[c][p]=m)}):s[c]=u.get("type")!=="image"?(0,v.clone)(f):i.getShapeStyleByName(c)}else{var d=u.attr(),g=(0,b.__assign)((0,b.__assign)({},l),l[a]);Object.keys(d).forEach(function(p){var m=d[p];g[p]!==m&&(a?s[a][p]=m:s[p]=m)})}}),s.path&&delete s.path,s.matrix&&delete s.matrix,s.x&&delete s.x,s.y&&delete s.y,s[a]&&s[a].x&&delete s[a].x,s[a]&&s[a].y&&delete s[a].y,i.set("originStyle",s)}else{var o={};(0,v.each)(t,function(u){var c=u.get("type"),f=u.get("name");if(f&&f!==a)o[f]=c!=="image"?(0,v.clone)(u.attr()):i.getShapeStyleByName(f);else{var h=i.getShapeStyleByName();if(h.path&&delete h.path,h.matrix&&delete h.matrix,!a)Object.assign(o,h);else if(f)o[a]=h;else{var d=Xb("shape");u.set("name",d),o[d]=c!=="image"?(0,v.clone)(u.attr()):i.getShapeStyleByName(f)}}}),i.set("originStyle",o)}},n.prototype.restoreStates=function(e,t){var r=this,i=r.get("states");(0,v.each)(i,function(a){e.setState(t,a,!0,r)})},n.prototype.init=function(){var e=Ea.getFactory(this.get("type"));this.set("shapeFactory",e)},n.prototype.get=function(e){return this._cfg[e]},n.prototype.set=function(e,t){(0,v.isPlainObject)(e)?this._cfg=(0,b.__assign)((0,b.__assign)({},this._cfg),e):this._cfg[e]=t},n.prototype.getDefaultCfg=function(){return{}},n.prototype.clearCache=function(){this.set(Zb,null),this.set(Kb,null)},n.prototype.beforeDraw=function(){},n.prototype.afterDraw=function(){},n.prototype.afterUpdate=function(){},n.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},n.prototype.getShapeStyleByName=function(e){var t=this.get("group"),r;if(e?r=t.find(function(a){return a.get("name")===e}):r=this.getKeyShape(),r){var i={};return(0,v.each)(r.attr(),function(a,o){(o!=="img"||(0,v.isString)(a))&&(i[o]=a)}),i}return{}},n.prototype.getShapeCfg=function(e){var t=this.get("styles");if(t){var r=e;return r.style=(0,b.__assign)((0,b.__assign)({},t),e.style),r}return e},n.prototype.getStateStyle=function(e){var t=this.get("styles"),r=t&&t[e];return r},n.prototype.getOriginStyle=function(){return this.get("originStyle")},n.prototype.getCurrentStatesStyle=function(){var e=this,t={},r=e.getStates();return!r||!r.length?this.getOriginStyle():((0,v.each)(e.getStates(),function(i){t=Object.assign(t,e.getStateStyle(i))}),t)},n.prototype.setState=function(e,t){var r=this.get("states"),i=this.get("shapeFactory"),a=e,o=e;(0,v.isString)(t)&&(a=e+":"+t,o=e+":");var s=r;if((0,v.isBoolean)(t)){var l=r.indexOf(o);if(t){if(l>-1)return;r.push(a)}else l>-1&&r.splice(l,1)}else if((0,v.isString)(t)){var u=r.filter(function(h){return h.includes(o)});u.length>0&&this.clearStates(u),s=s.filter(function(h){return!h.includes(o)}),s.push(a),this.set("states",s)}if(i){var c=this.get("model"),f=c.type;i.setState(f,e,t,this)}},n.prototype.clearStates=function(e){var t=this,r=t.getStates(),i=t.get("shapeFactory"),a=t.get("model"),o=a.type;e||(e=r),(0,v.isString)(e)&&(e=[e]);var s=r.filter(function(l){return e.indexOf(l)===-1});t.set("states",s),e.forEach(function(l){i.setState(o,l,!1,t)})},n.prototype.getContainer=function(){return this.get("group")},n.prototype.getKeyShape=function(){return this.get("keyShape")},n.prototype.getModel=function(){return this.get("model")},n.prototype.getType=function(){return this.get("type")},n.prototype.getID=function(){return this.get("id")},n.prototype.isItem=function(){return!0},n.prototype.getStates=function(){return this.get("states")},n.prototype.hasState=function(e){var t=this.getStates();return t.indexOf(e)>=0},n.prototype.refresh=function(){var e=this.get("model");this.updatePosition(e),this.updateShape(),this.afterUpdate(),this.clearCache()},n.prototype.isOnlyMove=function(e){return!1},n.prototype.update=function(e,t){t===void 0&&(t=!1);var r=this.get("model"),i=r.visible,a=e.visible;i!==a&&a!==void 0&&this.changeVisibility(a);var o={x:r.x,y:r.y};e.x=isNaN(e.x)?r.x:e.x,e.y=isNaN(e.y)?r.y:e.y;var s=this.get("styles");if(e.stateStyles){var l=e.stateStyles;(0,v.mix)(s,l),delete e.stateStyles}Object.assign(r,e),t?this.updatePosition(e):((o.x!==e.x||o.y!==e.y)&&this.updatePosition(e),this.updateShape()),this.afterUpdate(),this.clearCache()},n.prototype.updateShape=function(){var e=this.get("shapeFactory"),t=this.get("model"),r=t.type;if(e.shouldUpdate(r)&&r===this.get("currentShape")){var i=this.getShapeCfg(t);e.baseUpdate(r,i,this),this.setOriginStyle()}else this.draw();this.restoreStates(e,r)},n.prototype.updatePosition=function(e){var t=this.get("model"),r=(0,v.isNil)(e.x)?t.x:e.x,i=(0,v.isNil)(e.y)?t.y:e.y,a=this.get("group");if((0,v.isNil)(r)||(0,v.isNil)(i))return!1;t.x=r,t.y=i;var o=a.getMatrix();return o&&o[6]===r&&o[7]===i?!1:(a.resetMatrix(),nT(a,{x:r,y:i}),this.clearCache(),!0)},n.prototype.getBBox=function(){var e=this.get(Zb);return e||(e=this.calculateBBox(),this.set(Zb,e)),e},n.prototype.getCanvasBBox=function(){var e=this.get(Kb);return e||(e=this.calculateCanvasBBox(),this.set(Kb,e)),e},n.prototype.toFront=function(){var e=this.get("group");e.toFront()},n.prototype.toBack=function(){var e=this.get("group");e.toBack()},n.prototype.show=function(){this.changeVisibility(!0)},n.prototype.hide=function(){this.changeVisibility(!1)},n.prototype.changeVisibility=function(e){var t=this.get("group");e?t.show():t.hide(),this.set("visible",e)},n.prototype.isVisible=function(){return this.get("visible")},n.prototype.enableCapture=function(e){var t=this.get("group");t&&t.set("capture",e)},n.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),t=this.get("group");e&&t.stopAnimate(),this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},n}(),IT=Kj,My={source:"start",target:"end"},Hs="Node",Kh="Point",$j="Anchor",Qj=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(t,r){var i=My[t]+Kh,a=t+Hs,o=this.get(a);o&&!o.destroyed&&o.removeEdge(this),(0,v.isPlainObject)(r)?(this.set(i,r),this.set(a,null)):r&&(r.addEdge(this),this.set(a,r),this.set(i,null))},e.prototype.getLinkPoint=function(t,r,i){var a=My[t]+Kh,o=t+Hs,s=this.get(a);if(!s){var l=this.get(o),u=t+$j,c=this.getPrePoint(t,i),f=r[u];(0,v.isNil)(f)||(s=l.getLinkPointByAnchor(f)),s=s||l.getLinkPoint(c),(0,v.isNil)(s.index)||this.set(t+"AnchorIndex",s.index)}return s},e.prototype.getPrePoint=function(t,r){if(r&&r.length){var i=t==="source"?0:r.length-1;return r[i]}var a=t==="source"?"target":"source";return this.getEndPoint(a)},e.prototype.getEndPoint=function(t){var r=t+Hs,i=My[t]+Kh,a=this.get(r);return a?a.get("model"):this.get(i)},e.prototype.getControlPointsByCenter=function(t){var r=this.getEndPoint("source"),i=this.getEndPoint("target"),a=this.get("shapeFactory"),o=t.type;return a.getControlPoints(o,{startPoint:r,endPoint:i})},e.prototype.getEndCenter=function(t){var r=t+Hs,i=My[t]+Kh,a=this.get(r);if(a){var o=a.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(i)},e.prototype.init=function(){n.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(t){var r=this,i=r.get("linkCenter"),a=n.prototype.getShapeCfg.call(this,t);if(i)a.startPoint=r.getEndCenter("source"),a.endPoint=r.getEndCenter("target");else{var o=a.controlPoints||r.getControlPointsByCenter(a);a.startPoint=r.getLinkPoint("source",t,o),a.endPoint=r.getLinkPoint("target",t,o)}return a.sourceNode=r.get("sourceNode"),a.targetNode=r.get("targetNode"),a},e.prototype.getModel=function(){var t=this.get("model"),r=this.get("source"+Hs),i=this.get("target"+Hs);return r?delete t["source"+Hs]:t.source=this.get("start"+Kh),i?delete t["target"+Hs]:t.target=this.get("end"+Kh),!(0,v.isString)(t.source)&&!(0,v.isPlainObject)(t.source)&&(t.source=t.source.getID()),!(0,v.isString)(t.target)&&!(0,v.isPlainObject)(t.target)&&(t.target=t.target.getID()),t},e.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},e.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){return!1},e.prototype.update=function(t,r){r===void 0&&(r=!1);var i=this.get("model"),a=i.visible,o=t.visible;a!==o&&o!==void 0&&this.changeVisibility(o);var s=this.get("styles");if(t.stateStyles){var l=t.stateStyles;(0,v.mix)(s,l),delete t.stateStyles}Object.assign(i,t),this.updateShape(),this.afterUpdate(),this.clearCache()},e.prototype.destroy=function(){var t=this.get("source"+Hs),r=this.get("target"+Hs);t&&!t.destroyed&&t.removeEdge(this),r&&!r.destroyed&&r.removeEdge(this),n.prototype.destroy.call(this)},e}(IT),OT=Qj,$b="anchorPointsCache",Jj="bboxCache",qj=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getNearestPoint=function(t,r){for(var i=0,a=t[0],o=py(t[0],r),s=0;s<t.length;s++){var l=t[s],u=py(l,r);u<o&&(a=l,o=u,i=s)}return a.anchorIndex=i,a},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("target")===t})},e.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("source")===t})},e.prototype.getNeighbors=function(t){var r=this,i=this.get("edges");if(t==="target"){var a=function(u){return u.getSource()===r};return i.filter(a).map(function(l){return l.getTarget()})}if(t==="source"){var o=function(u){return u.getTarget()===r};return i.filter(o).map(function(l){return l.getSource()})}var s=function(u){return u.getSource()===r?u.getTarget():u.getSource()};return i.map(s)},e.prototype.getLinkPointByAnchor=function(t){var r=this.getAnchorPoints();return r[t]},e.prototype.getLinkPoint=function(t){var r=this.get("keyShape"),i=r.get("type"),a=this.get("type"),o,s,l=this.getBBox();a==="combo"?(o=l.centerX||(l.maxX+l.minX)/2,s=l.centerY||(l.maxY+l.minY)/2):(o=l.centerX,s=l.centerY);var u=this.getAnchorPoints(),c;switch(i){case"circle":c=tT({x:o,y:s,r:l.width/2},t);break;case"ellipse":c=eT({x:o,y:s,rx:l.width/2,ry:l.height/2},t);break;default:c=qA(l,t)}var f=c;return u.length&&(f||(f=t),f=this.getNearestPoint(u,f)),f||(f={x:o,y:s}),f},e.prototype.getAnchorPoints=function(){var t=this.get($b);if(!t){t=[];var r=this.get("shapeFactory"),i=this.getBBox(),a=this.get("model"),o=this.getShapeCfg(a),s=a.type,l=r.getAnchorPoints(s,o)||[];(0,v.each)(l,function(u,c){var f={x:i.minX+u[0]*i.width,y:i.minY+u[1]*i.height,anchorIndex:c};t.push(f)}),this.set($b,t)}return t},e.prototype.addEdge=function(t){this.get("edges").push(t)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(t){var r=this.getEdges(),i=r.indexOf(t);i>-1&&r.splice(i,1)},e.prototype.clearCache=function(){this.set(Jj,null),this.set($b,null)},e.prototype.isOnlyMove=function(t){if(!t)return!1;var r=!(0,v.isNil)(t.x),i=!(0,v.isNil)(t.y),a=Object.keys(t);return a.length===1&&(r||i)||a.length===2&&r&&i},e}(IT),Qb=qj,PT="bboxCache",DT="bboxCanvasCache",Jb="sizeCache",LT="anchorPointsCache",tZ=function(n){(0,b.__extends)(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(t){var r=this.get("styles"),i=this.get("bbox");if(r&&i){var a=t,o={r:Math.hypot(i.height,i.width)/2||Rr.defaultCombo.size[0]/2,width:i.width||Rr.defaultCombo.size[0],height:i.height||Rr.defaultCombo.size[1]};a.style=(0,b.__assign)((0,b.__assign)((0,b.__assign)({},r),t.style),o);var s=t.padding||Rr.defaultCombo.padding;return(0,v.isNumber)(s)?(o.r+=s,o.width+=s*2,o.height+=s*2):(o.r+=s[0],o.width+=s[1]+s[3]||s[1]*2,o.height+=s[0]+s[2]||s[0]*2),this.set(Jb,o),a}return t},e.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var t=this.get("keyShape"),r=this.get("group"),i=by(t,r);i.centerX=(i.minX+i.maxX)/2,i.centerY=(i.minY+i.maxY)/2;var a=this.get(Jb),o=this.get(PT)||{},s=o.x,l=o.x;if(a){a.width=Math.max(a.width,i.width),a.height=Math.max(a.height,i.height);var u=t.get("type");u==="circle"?(i.width=a.r*2,i.height=a.r*2):(i.width=a.width,i.height=a.height),i.minX=i.centerX-i.width/2,i.minY=i.centerY-i.height/2,i.maxX=i.centerX+i.width/2,i.maxY=i.centerY+i.height/2}else i.width=i.maxX-i.minX,i.height=i.maxY-i.minY,i.centerX=(i.minX+i.maxX)/2,i.centerY=(i.minY+i.maxY)/2;return i.x=i.minX,i.y=i.minY,(i.x!==s||i.y!==l)&&this.set(LT,null),i}},e.prototype.getChildren=function(){var t=this;return{nodes:t.getNodes(),combos:t.getCombos()}},e.prototype.getNodes=function(){var t=this;return t.get("nodes")},e.prototype.getCombos=function(){var t=this;return t.get("combos")},e.prototype.addChild=function(t){var r=this,i=t.getType();switch(i){case"node":r.addNode(t);break;case"combo":r.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(t){var r=this;return r.get("combos").push(t),!0},e.prototype.addNode=function(t){var r=this;return r.get("nodes").push(t),!0},e.prototype.removeChild=function(t){var r=this,i=t.getType();switch(i){case"node":r.removeNode(t);break;case"combo":r.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(t){if(!!t){var r=this.getCombos(),i=r.indexOf(t);return i>-1?(r.splice(i,1),!0):!1}},e.prototype.removeNode=function(t){if(!!t){var r=this.getNodes(),i=r.indexOf(t);return i>-1?(r.splice(i,1),!0):!1}},e.prototype.isOnlyMove=function(t){return!1},e.prototype.getBBox=function(){this.set(DT,null);var t=this.calculateCanvasBBox();return t},e.prototype.clearCache=function(){this.set(PT,null),this.set(DT,null),this.set(LT,null)},e.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),r=this.get("group");t&&r.stopAnimate(),this.clearCache(),this.set(Jb,null),this.set("bbox",null),r.remove(),this._cfg=null,this.destroyed=!0}},e}(Qb),RT=tZ,Mg="node",Ay="edge",NT="vedge",Ag="combo",eZ="default",kT="Mapper",Dl="stateStyles",rZ=function(){function n(e){this.graph=e,this.destroyed=!1}return n.prototype.addItem=function(e,t){var r=this.graph,i=e===NT?Ay:e,a=r.get(i+"Group")||r.get("group"),o=(0,v.upperFirst)(i),s=null,l=r.get(i+(0,v.upperFirst)(Dl))||{},u=r.get(eZ+o);t[Dl]&&(l=t[Dl]),u&&(0,v.each)(u,function(S,M){(0,v.isObject)(S)&&!(0,v.isArray)(S)?t[M]=(0,v.deepMix)({},S,t[M]):(0,v.isArray)(S)?t[M]=t[M]||(0,v.clone)(u[M]):t[M]=t[M]||u[M]});var c=r.get(i+kT);if(c){var f=c(t);f[Dl]&&(l=f[Dl],delete f[Dl]),(0,v.each)(f,function(S,M){(0,v.isObject)(S)&&!(0,v.isArray)(S)?t[M]=(0,v.deepMix)({},t[M],S):t[M]=f[M]||t[M]})}if(r.emit("beforeadditem",{type:e,model:t}),e===Ay||e===NT){var h=void 0,d=void 0;if(h=t.source,d=t.target,h&&(0,v.isString)(h)&&(h=r.findById(h)),d&&(0,v.isString)(d)&&(d=r.findById(d)),!h||!d){console.warn("The source or target node of edge "+t.id+" does not exist!");return}h.getType&&h.getType()==="combo"&&(t.isComboEdge=!0),d.getType&&d.getType()==="combo"&&(t.isComboEdge=!0),s=new OT({model:t,source:h,target:d,styles:l,linkCenter:r.get("linkCenter"),group:a.addGroup()})}else if(e===Mg)s=new Qb({model:t,styles:l,group:a.addGroup()});else if(e===Ag){var g=t.children,p=Cg(g,r);isNaN(p.x)?isNaN(t.x)&&(t.x=Math.random()*100):t.x=p.x,isNaN(p.y)?isNaN(t.y)&&(t.y=Math.random()*100):t.y=p.y;var m=a.addGroup();m.setZIndex(t.depth),s=new RT({model:t,styles:l,bbox:t.collapsed?Cg([],r):p,group:m});var _=s.getModel();(g||[]).forEach(function(S){var M=r.findById(S.id);s.addChild(M),S.depth=_.depth+2}),t.collapsed&&setTimeout(function(){r.collapseCombo(s)},0)}if(s)return r.get(e+"s").push(s),r.get("itemMap")[s.get("id")]=s,r.emit("afteradditem",{item:s,model:t}),s},n.prototype.updateItem=function(e,t){var r,i,a=this.graph;if((0,v.isString)(e)&&(e=a.findById(e)),!(!e||e.destroyed)){var o="";e.getType&&(o=e.getType());var s=a.get(o+kT),l=e.getModel(),u=e.isOnlyMove(t);if(s){var c=(0,v.deepMix)({},l,t),f=s(c),h=(0,v.deepMix)({},l,f,t);f[Dl]&&(e.set("styles",h[Dl]),delete h[Dl]),(0,v.each)(h,function(R,F){t[F]=R})}else(0,v.each)(t,function(R,F){l[F]&&(0,v.isObject)(R)&&!(0,v.isArray)(R)&&(t[F]=(0,b.__assign)((0,b.__assign)({},l[F]),t[F]))});if(a.emit("beforeupdateitem",{item:e,cfg:t}),o===Ay){if(t.source){var d=t.source;(0,v.isString)(d)&&(d=a.findById(d)),e.setSource(d)}if(t.target){var g=t.target;(0,v.isString)(g)&&(g=a.findById(g)),e.setTarget(g)}e.update(t)}if(o===Mg||o===Ag){e.update(t,u);var p=e.getEdges(),m=bT(t);if(m&&o===Mg)(0,v.each)(p,function(R){R.refresh()});else if(m&&o===Ag){var _=e.get("shapeFactory"),S=l.type||"circle",M=l.animate===void 0||t.animate===void 0?(i=(r=_[S])===null||r===void 0?void 0:r.options)===null||i===void 0?void 0:i.animate:l.animate||t.animate;M?setTimeout(function(){if(!(!e||e.destroyed)){var R=e.getKeyShape();!R||R.destroyed||(0,v.each)(p,function(F){F&&!F.destroyed&&F.refresh()})}},201):(0,v.each)(p,function(R){R.refresh()})}}a.emit("afterupdateitem",{item:e,cfg:t})}},n.prototype.updateCombo=function(e,t){var r=this,i,a,o=this.graph;if((0,v.isString)(e)&&(e=o.findById(e)),!(!e||e.destroyed)){var s=e.getModel(),l=Cg(s.collapsed?[]:t,o),u=s.collapsed?Cg(t,o):l,c=u.x,f=u.y;e.set("bbox",l),e.update({x:c,y:f});var h=e.get("shapeFactory"),d=s.type||"circle",g=s.animate===void 0?(a=(i=h[d])===null||i===void 0?void 0:i.options)===null||a===void 0?void 0:a.animate:s.animate;g?setTimeout(function(){if(!(!e||e.destroyed)){var p=e.getKeyShape();!p||p.destroyed||(e.getShapeCfg(s),r.updateComboEdges(e))}},201):this.updateComboEdges(e)}},n.prototype.updateComboEdges=function(e){for(var t=e.getEdges()||[],r=0;r<t.length;r++){var i=t[r];if(i&&!i.destroyed){var a=i.get("shapeFactory"),o=i.getShapeCfg(i.getModel()),s=i.getContainer();s.clear();var l=a.draw(o.type,o,s);i.set("keyShape",l),l.set("isKeyShape",!0),l.set("draggable",!0),i.setOriginStyle()}}},n.prototype.collapseCombo=function(e){var t=this.graph;(0,v.isString)(e)&&(e=t.findById(e));var r=e.getChildren();r.nodes.forEach(function(i){t.hideItem(i)}),r.combos.forEach(function(i){t.hideItem(i)})},n.prototype.expandCombo=function(e){var t=this.graph;(0,v.isString)(e)&&(e=t.findById(e));var r=e.getChildren();r.nodes.forEach(function(i){t.showItem(i)}),r.combos.forEach(function(i){i.getModel().collapsed?i.show():t.showItem(i)})},n.prototype.removeItem=function(e){var t=this,r=this.graph;if((0,v.isString)(e)&&(e=r.findById(e)),!(!e||e.destroyed)){var i=(0,v.clone)(e.getModel());r.emit("beforeremoveitem",{item:i});var a="";e.getType&&(a=e.getType());var o=r.get(a+"s"),s=o.indexOf(e);if(s>-1&&o.splice(s,1),a===Ay){var l=r.get("v"+a+"s"),u=l.indexOf(e);u>-1&&l.splice(u,1)}var c=e.get("id"),f=r.get("itemMap");delete f[c];var h=r.get("comboTrees"),d=e.get("id");if(a===Mg){var g=e.getModel().comboId;if(h&&g){var p=h,m=!1;h.forEach(function(V){m||Io(V,function(nt){if(nt.id===d&&p){var at=p.indexOf(nt);return p.splice(at,1),m=!0,!1}return p=nt.children,!0})})}for(var _=e.getEdges(),S=_.length-1;S>=0;S--)r.removeItem(_[S],!1);g&&r.updateCombo(g)}else if(a===Ag){var M=e.getModel().parentId,R,F=!1;(h||[]).forEach(function(nt){F||Io(nt,function(at){return at.id===d?(R=at,F=!0,!1):!0})}),R.removed=!0,R&&R.children&&R.children.forEach(function(nt){t.removeItem(nt.id)});for(var _=e.getEdges(),S=_.length;S>=0;S--)r.removeItem(_[S],!1);M&&r.updateCombo(M)}e.destroy(),r.emit("afterremoveitem",{item:i})}},n.prototype.setItemState=function(e,t,r){var i=this.graph,a=t;(0,v.isString)(r)&&(a=t+":"+r),!(e.hasState(a)===r&&r||(0,v.isString)(r)&&e.hasState(a))&&(i.emit("beforeitemstatechange",{item:e,state:a,enabled:r}),e.setState(t,r),i.autoPaint(),i.emit("afteritemstatechange",{item:e,state:a,enabled:r}))},n.prototype.priorityState=function(e,t){var r=this.graph,i=e;(0,v.isString)(e)&&(i=r.findById(e)),this.setItemState(i,t,!1),this.setItemState(i,t,!0)},n.prototype.clearItemStates=function(e,t){var r=this.graph;(0,v.isString)(e)&&(e=r.findById(e)),r.emit("beforeitemstatesclear",{item:e,states:t}),e.clearStates(t),r.emit("afteritemstatesclear",{item:e,states:t})},n.prototype.refreshItem=function(e){var t=this.graph;(0,v.isString)(e)&&(e=t.findById(e)),t.emit("beforeitemrefresh",{item:e}),e.refresh(),t.emit("afteritemrefresh",{item:e})},n.prototype.addCombos=function(e,t){var r=this,i=this.graph;(e||[]).forEach(function(o){Ru(o,function(s){var l;return t.forEach(function(u){u.id===s.id&&(u.children=s.children,u.depth=s.depth,l=u)}),l&&r.addItem("combo",l),!0})});var a=i.get("comboGroup");a&&a.sort()},n.prototype.changeItemVisibility=function(e,t){var r=this,i=this.graph;if((0,v.isString)(e)&&(e=i.findById(e)),!e){console.warn("The item to be shown or hidden does not exist!");return}if(i.emit("beforeitemvisibilitychange",{item:e,visible:t}),e.changeVisibility(t),e.getType&&e.getType()===Mg){var a=e.getEdges();(0,v.each)(a,function(c){t&&!(c.get("source").isVisible()&&c.get("target").isVisible())||r.changeItemVisibility(c,t)})}else if(e.getType&&e.getType()===Ag){var o=i.get("comboTrees"),s=e.get("id"),l=[],u=!1;(o||[]).forEach(function(f){u||!f.children||f.children.length===0||Io(f,function(h){return h.id===s?(l=h.children,u=!0,!1):!0})}),l&&(!t||t&&!e.getModel().collapsed)&&l.forEach(function(f){var h=i.findById(f.id);r.changeItemVisibility(h,t)});var a=e.getEdges();(0,v.each)(a,function(f){t&&!(f.get("source").isVisible()&&f.get("target").isVisible())||r.changeItemVisibility(f,t)})}return i.emit("afteritemvisibilitychange",{item:e,visible:t}),e},n.prototype.destroy=function(){this.graph=null,this.destroyed=!0},n}(),nZ=rZ,af=null,iZ=function(){function n(e){this.graph=e,this.cachedStates={enabled:{},disabled:{}},this.destroyed=!1}return n.checkCache=function(e,t,r){if(!!r[t]){var i=r[t].indexOf(e);i>=0&&r[t].splice(i,1)}},n.cacheState=function(e,t,r){r[t]||(r[t]=[]),r[t].push(e)},n.prototype.updateState=function(e,t,r){var i=this,a=n.checkCache,o=n.cacheState;if(!e.destroyed){var s=this.cachedStates,l=s.enabled,u=s.disabled;r?(a(e,t,u),o(e,t,l)):(a(e,t,l),o(e,t,u)),af&&clearTimeout(af),af=setTimeout(function(){af=null,i.updateGraphStates()},16)}},n.prototype.updateStates=function(e,t,r){var i=this;(0,v.isString)(t)?this.updateState(e,t,r):t.forEach(function(a){i.updateState(e,a,r)})},n.prototype.updateGraphStates=function(){var e=this.graph.get("states"),t=this.cachedStates;(0,v.each)(t.disabled,function(r,i){e[i]&&(e[i]=e[i].filter(function(a){return r.indexOf(a)<0&&!r.destroyed}))}),(0,v.each)(t.enabled,function(r,i){if(!e[i])e[i]=r;else{var a={};e[i].forEach(function(o){o.destroyed||(a[o.get("id")]=!0)}),r.forEach(function(o){if(!o.destroyed){var s=o.get("id");a[s]||(a[s]=!0,e[i].push(o))}})}}),this.graph.emit("graphstatechange",{states:e}),this.cachedStates={enabled:{},disabled:{}}},n.prototype.destroy=function(){this.graph=null,this.cachedStates=null,af&&clearTimeout(af),af=null,this.destroyed=!0},n}(),aZ=iZ,oZ=function(e,t){return!e||!t?e:e.replace(/\\?\{([^{}]+)\}/g,function(r,i){if(r.charAt(0)==="\\")return r.slice(1);var a=t[i];return a===0&&(a="0"),a||""})},BT=function(e){var t=[];if(e.length<2)throw new Error("point length must largn than 2, now it's "+e.length);for(var r=0,i=e;r<i.length;r++){var a=i[r],o=a.x,s=a.y;t.push(o),t.push(s)}var l=(0,Ma.e9)(t);return l.unshift(["M",e[0].x,e[0].y]),l},Ty=function(e,t,r,i){r===void 0&&(r=0),i===void 0&&(i=0);var a={x:(1-r)*e.x+r*t.x,y:(1-r)*e.y+r*t.y},o=[0,0];Ar.Fv(o,[t.x-e.x,t.y-e.y]),(!o||!o[0]&&!o[1])&&(o=[0,0]);var s=[-o[1]*i,o[0]*i];return a.x+=s[0],a.y+=s[1],a},sZ=function(e,t){var r=e.length;if(!r)return"";for(var i="",a="",o=0;o<r;o++){var s=e[o];o===0?a="M{x} {y}":a="L{x} {y}",i+=oZ(a,s)}return t&&(i+="Z"),i},qb=function(e){var t=[];return e.forEach(function(r){var i=r[0];if(i!=="A")for(var a=1;a<r.length;a=a+2)t.push([r[a],r[a+1]]);else{var o=r.length;t.push([r[o-2],r[o-1]])}}),t},t_=function(e){if(e.length<2)throw new Error("point length must largn than 2, now it's "+e.length);var t=e[0],r=e[1],i=e[e.length-1],a=e[e.length-2];e.unshift(i),e.unshift(a),e.push(t),e.push(r);for(var o=[],s=1;s<e.length-2;s+=1){var l=e[s-1].x,u=e[s-1].y,c=e[s].x,f=e[s].y,h=e[s+1].x,d=e[s+1].y,g=s!==e.length-2?e[s+2].x:h,p=s!==e.length-2?e[s+2].y:d,m=c+(h-l)/6,_=f+(d-u)/6,S=h-(g-c)/6,M=d-(p-f)/6;o.push(["C",m,_,S,M,h,d])}return o.unshift(["M",i.x,i.y]),o},FT=function(e,t){return Ar.bA([0,0],Ar.Fv([0,0],e),t)},GT=function(e,t){var r=[e[1]-t[1],t[0]-e[0]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]);if(i===0)throw new Error("p0 should not be equal to p1");return[r[0]/i,r[1]/i]},zT=function(e,t){return[t[0]-e[0],t[1]-e[1]]};function e_(n,e){var t=function(f){var h=[f[0][0],f[0][1]-e],d=[f[0][0],f[0][1]+e];return"M "+h+" A "+e+","+e+",0,0,0,"+d+" A "+e+","+e+",0,0,0,"+h},r=function(f){var h=Ar.bA([0,0],GT(f[0],f[1]),e),d=Ar.bA([0,0],h,-1),g=Ar.IH([0,0],f[0],h),p=Ar.IH([0,0],f[1],h),m=Ar.IH([0,0],f[1],d),_=Ar.IH([0,0],f[0],d);return"M "+g+" L "+p+" A "+[e,e,"0,0,0",m].join(",")+" L "+_+" A "+[e,e,"0,0,0",g].join(",")};if(!n||n.length<1)return"";if(n.length===1)return t(n);if(n.length===2)return r(n);for(var i=new Array(n.length),a=0;a<i.length;++a){var o=a===0?n[n.length-1]:n[a-1],s=n[a],l=Ar.bA([0,0],GT(o,s),e);i[a]=[Ar.IH([0,0],o,l),Ar.IH([0,0],s,l)]}var u="A "+[e,e,"0,0,0,"].join(",");return i=i.map(function(c,f){var h="";return f===0&&(h="M "+i[i.length-1][1]+" "),h+=u+c[0]+" L "+c[1],h}),i.join(" ")}function UT(n,e){var t=n.length,r=function(c){var f=[c[0][0],c[0][1]-e],h=[c[0][0],c[0][1]+e];return"M "+f+" A "+[e,e,"0,0,0",h].join(",")+" A "+[e,e,"0,0,0",f].join(",")},i=function(c){var f=zT(c[0],c[1]),h=FT(f,e),d=Ar.IH([0,0],c[0],Ar.bA([0,0],h,-1)),g=Ar.IH([0,0],c[1],h),p=1.2*e,m=FT(Ar.Fv([0,0],f),p),_=Ar.bA([0,0],m,-1),S=Ar.IH([0,0],d,_),M=Ar.IH([0,0],g,_),R=Ar.IH([0,0],d,m);return"M "+d+" C "+[S,M,g].join(",")+" S "+[R,d].join(",")+" Z"};if(!n||t<1)return"";if(t===1)return r(n);if(t===2)return i(n);for(var a=n.map(function(u,c){var f=n[(c+1)%t];return{p:u,v:Ar.Fv([0,0],zT(u,f))}}),o=0;o<a.length;++o){var s=o>0?o-1:t-1,l=Ar.Fv([0,0],Ar.IH([0,0],a[s].v,Ar.bA([0,0],a[o].v,-1)));a[o].p=Ar.IH([0,0],a[o].p,Ar.bA([0,0],l,e))}return a.map(function(u){var c=u.p;return{x:c[0],y:c[1]}})}var WT=function(e,t,r){return(e.y-r.y)*(t.x-r.x)-(e.x-r.x)*(t.y-r.y)},VT=function(e){var t=e.map(function(s){return{x:s.getModel().x,y:s.getModel().y}});if(t.sort(function(s,l){return s.x===l.x?s.y-l.y:s.x-l.x}),t.length===1)return t;for(var r=[],i=0;i<t.length;i++){for(;r.length>=2&&WT(r[r.length-2],r[r.length-1],t[i])<=0;)r.pop();r.push(t[i])}for(var a=[],i=t.length-1;i>=0;i--){for(;a.length>=2&&WT(a[a.length-2],a[a.length-1],t[i])<=0;)a.pop();a.push(t[i])}a.pop(),r.pop();var o=r.concat(a);return o},lZ={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function uZ(n,e,t){var r=!1,i=function(l,u){return e.cells[l+u*e.width]},a=function(l,u){var c=0;return i(l-1,u-1)>=t&&(c+=1),i(l,u-1)>t&&(c+=2),i(l-1,u)>t&&(c+=4),i(l,u)>t&&(c+=8),c},o=function(l,u){for(var c=l,f=u,h,d,g=0;g<e.width*e.height;g++){if(h=c,d=f,n.findIndex(function(m){return m.x===c&&m.y===f})>-1){if(!(n[0].x!==c||n[0].y!==f))return!0}else n.push({x:c,y:f});var p=a(c,f);switch(p){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:c++;break;case 12:case 14:case 4:c--;break;case 6:h===0&&(d===-1?c-=1:c+=1);break;case 1:case 13:case 5:f--;break;case 9:h===1&&(d===0?f-=1:f+=1);break;case 10:case 8:case 11:f++;break;default:return console.warn("Marching squares invalid state: "+p),!0}}};this.march=function(){for(var s=0;s<e.width&&!r;s+=1)for(var l=0;l<e.height&&!r;l+=1)i(s,l)>t&&a(s,l)!==15&&(r=o(s,l));return r}}var cZ=function(e,t,r){var i=Math.ceil(e/r),a=Math.ceil(t/r),o=new Float32Array(Math.max(0,i*a)).fill(0);return{cells:o,width:i,height:a}},fZ=function(e,t,r){var i=null,a=Number.POSITIVE_INFINITY;return t.forEach(function(o){var s={x:e.getModel().x,y:e.getModel().y},l={x:o.getModel().x,y:o.getModel().y},u=yy(s,l),c=new nf(s.x,s.y,l.x,l.y),f=r.reduce(function(h,d){return Bb(d,c)>0?h+1:h},0);u*Math.pow(f+1,2)<a&&(i=o,a=u*Math.pow(f+1,2))}),i},XT=function(e,t){var r=Number.POSITIVE_INFINITY,i=null;return e.forEach(function(a){var o=Bb(a,t);o>=0&&o<r&&(i=a,r=o)}),i},hZ=function(e,t,r,i){var a=[],o=[];o.push(e);for(var s=!0,l=0,u=function(d,g){var p=!1;return g.forEach(function(m){p||(Fb(d,{x:m.x1,y:m.y1})||Fb(d,{x:m.x2,y:m.y2}))&&(p=!0)}),p},c=function(d,g){for(var p=0,m=g;p<m.length;p++){var _=m[p],S=_.getBBox(),M=[[S.x,S.y],[S.x+S.width,S.y],[S.x,S.y+S.height],[S.x+S.width,S.y+S.height]];if(wg(M,d.x,d.y))return!0}return!1};s&&l<r;){s=!1;for(var f=function(){var d=o.pop(),g=XT(t,d);if(g){var p=sT(g,d),m=p[0],_=p[1];if(_===2){var S=function(R){for(var F=i,V=YT(g,F,m,R),nt=u(V,o)||u(V,a),at=c(V,t);!nt&&at&&F>=1;)F/=1.5,V=YT(g,F,m,R),nt=u(V,o)||u(V,a),at=c(V,t);V&&!nt&&(!R||!at)&&(o.push(new nf(d.x1,d.y1,V.x,V.y)),o.push(new nf(V.x,V.y,d.x2,d.y2)),s=!0)};S(!0),s||S(!1)}}s||a.push(d),l+=1};!s&&o.length;)f()}for(;o.length;)a.push(o.pop());return a};function dZ(n,e,t,r,i){var a=fZ(n,t,e);if(a===null)return[];var o=function(f){for(var h=[];f.length>0;){var d=f.pop();if(f.length===0){h.push(d);break}var g=f.pop(),p=new nf(d.x1,d.y1,g.x2,g.y2),m=XT(e,p);m?(h.push(d),f.push(g)):f.push(p)}return h},s=new nf(n.getModel().x,n.getModel().y,a.getModel().x,a.getModel().y),l=hZ(s,e,r,i),u=o(l);return u}var vZ=function(e,t,r){var i=Object.assign(lZ,r),a=lT(e.map(function(S){return{x:S.getModel().x,y:S.getModel().y}}));e=e.sort(function(S,M){return yy({x:S.getModel().x,y:S.getModel().y},a)-yy({x:M.getModel().x,y:M.getModel().y},a)});var o=[],s=[];e.forEach(function(S){var M=dZ(S,t,o,i.maxRoutingIterations,i.morphBuffer);M.forEach(function(R){s.push(R)}),o.push(S)});for(var l=gZ(e,s,i.nodeR0),u=cZ(l.width,l.height,i.pixelGroupSize),c=[],f=[],h=0;h<i.maxMarchingIterations;h++)if(pZ(e,t,s,l,u,i),c=[],f=[],!!new uZ(c,u,i.threshold).march()){var d=c.map(function(S){return{x:Math.round(S.x*i.pixelGroupSize+l.minX),y:Math.round(S.y*i.pixelGroupSize+l.minY)}});if(d){var g=d.length;if(i.skip>1)for(g=Math.floor(d.length/i.skip);g<3&&i.skip>1;)i.skip-=1,g=Math.floor(d.length/i.skip);for(var p=0,m=0;m<g;m+=1,p+=i.skip)f.push({x:d[p].x,y:d[p].y})}var _=function(){for(var M=0,R=e;M<R.length;M++){var F=R[M],V=f.map(function(nt){return[nt.x,nt.y]});if(!wg(V,F.getBBox().centerX,F.getBBox().centerY))return!1}return!0};if(f&&_())return f;if(i.threshold*=.9,h<=i.maxMarchingIterations*.5)i.memberInfluenceFactor*=1.2,i.edgeInfluenceFactor*=1.2;else if(i.nonMemberInfluenceFactor!==0&&t.length>0)i.nonMemberInfluenceFactor*=.8;else break}return f};function gZ(n,e,t){var r={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},i=[];n.forEach(function(l){i.push(l.getBBox())}),e.forEach(function(l){i.push(l.getBBox())});for(var a=0,o=i;a<o.length;a++){var s=o[a];r.minX=(s.minX<r.minX?s.minX:r.minX)-t,r.minY=(s.minY<r.minY?s.minY:r.minY)-t,r.maxX=(s.maxX>r.maxX?s.maxX:r.maxX)+t,r.maxY=(s.maxY>r.maxY?s.maxY:r.maxY)+t}return r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.x=r.minX,r.y=r.minY,r}function pZ(n,e,t,r,i,a){function o(d,g){var p=Math.floor((d-g)/a.pixelGroupSize);return p<0?0:p}function s(d,g){return d*a.pixelGroupSize+g}var l=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),u=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),c=function(g,p){var m=Math.min(o(g.minX,p+r.minX),i.width),_=Math.min(o(g.minY,p+r.minY),i.height),S=Math.min(o(g.maxX,-p+r.minX),i.width),M=Math.min(o(g.maxY,-p+r.minY),i.height);return[m,_,S,M]},f=function(g,p){for(var m=g.getBBox(),_=c(m,a.nodeR1),S=_[0],M=_[1],R=_[2],F=_[3],V=M;V<F;V+=1)for(var nt=S;nt<R;nt+=1)if(!(p<0&&i[nt+V*i.width]<=0)){var at=s(nt,r.minX),xt=s(V,r.minY),gt=cT({x:at,y:xt},{x:m.minX,y:m.minY,width:m.width,height:m.height});if(gt<Math.pow(a.nodeR1,2)){var Tt=Math.sqrt(gt)-a.nodeR1;i.cells[nt+V*i.width]+=p*Tt*Tt}}},h=function(g,p){for(var m=g.getBBox(),_=c(m,a.edgeR1),S=_[0],M=_[1],R=_[2],F=_[3],V=M;V<F;V+=1)for(var nt=S;nt<R;nt+=1)if(!(p<0&&i.cells[nt+V*i.width]<=0)){var at=s(nt,r.minX),xt=s(V,r.minY),gt=uT({x:at,y:xt},g);if(gt<Math.pow(a.edgeR1,2)){var Tt=Math.sqrt(gt)-a.edgeR1;i.cells[nt+V*i.width]+=p*Tt*Tt}}};a.nodeInfluenceFactor&&n.forEach(function(d){f(d,a.nodeInfluenceFactor/l)}),a.edgeInfluenceFactor&&t.forEach(function(d){h(d,a.edgeInfluenceFactor/u)}),a.negativeNodeInfluenceFactor&&e.forEach(function(d){f(d,a.negativeNodeInfluenceFactor/l)})}function YT(n,e,t,r){var i=n.getBBox(),a=t[0],o=t[1],s=t[2],l=t[3],u={topLeft:{x:i.minX-e,y:i.minY-e},topRight:{x:i.maxX+e,y:i.minY-e},bottomLeft:{x:i.minX-e,y:i.maxY+e},bottomRight:{x:i.maxX+e,y:i.maxY+e}},c=i.height*i.width;function f(g,p){return i.width*((g.y-i.minY+(p.y-i.minY))*.5)}if(o){if(a)return r?u.topLeft:u.bottomRight;if(s)return r?u.bottomLeft:u.topRight;var h=f(o,l);return h<c*.5?o.y>l.y?r?u.topLeft:u.bottomRight:r?u.topRight:u.bottomLeft:o.y<l.y?r?u.bottomLeft:u.topRight:r?u.bottomRight:u.topLeft}if(l){if(a)return r?u.topRight:u.bottomLeft;if(s)return r?u.bottomRight:u.topLeft}var d=f(a,s);return d<c*.5?a.x>s.x?r?u.topLeft:u.bottomRight:r?u.bottomLeft:u.topRight:a.x<s.x?r?u.topRight:u.bottomLeft:r?u.bottomRight:u.topLeft}var yZ=function(){function n(e,t){this.cfg=(0,v.deepMix)(this.getDefaultCfg(),t),this.graph=e,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(r){return(0,v.isString)(r)?e.findById(r):r}),this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,v.isString)(r)?e.findById(r):r}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return n.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},n.prototype.setPadding=function(){var e=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+e:10+e,this.cfg.bubbleCfg={nodeR0:this.padding-e,nodeR1:this.padding-e,morphBuffer:this.padding-e}},n.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},n.prototype.calcPath=function(e,t){var r,i,a;switch(this.type){case"round-convex":r=VT(e),a=e_(r.map(function(o){return[o.x,o.y]}),this.padding),i=(0,Ma.tr)(a);break;case"smooth-convex":r=VT(e),r.length===2?(a=e_(r.map(function(o){return[o.x,o.y]}),this.padding),i=(0,Ma.tr)(a)):r.length>2&&(a=UT(r.map(function(o){return[o.x,o.y]}),this.padding),i=t_(a));break;case"bubble":r=vZ(e,t,this.cfg.bubbleCfg),i=r.length>=2&&t_(r);break;default:}return i},n.prototype.render=function(){this.group.addShape("path",{attrs:(0,b.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id}),this.group.toBack()},n.prototype.addMember=function(e){if(!!e){(0,v.isString)(e)&&(e=this.graph.findById(e)),this.members.push(e);var t=this.nonMembers.indexOf(e);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},n.prototype.addNonMember=function(e){if(!!e){(0,v.isString)(e)&&(e=this.graph.findById(e)),this.nonMembers.push(e);var t=this.members.indexOf(e);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},n.prototype.removeMember=function(e){if(!!e){(0,v.isString)(e)&&(e=this.graph.findById(e));var t=this.members.indexOf(e);return t>-1?(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},n.prototype.removeNonMember=function(e){if(!!e){(0,v.isString)(e)&&(e=this.graph.findById(e));var t=this.nonMembers.indexOf(e);return t>-1?(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},n.prototype.updateData=function(e,t){var r=this;this.group.findById(this.id).remove(),e&&(this.members=e.map(function(i){return(0,v.isString)(i)?r.graph.findById(i):i})),t&&(this.nonMembers=t.map(function(i){return(0,v.isString)(i)?r.graph.findById(i):i})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},n.prototype.updateStyle=function(e){var t=this.group.findById(this.id);t.attr((0,b.__assign)({},e))},n.prototype.updateCfg=function(e){var t=this;this.cfg=(0,v.deepMix)(this.cfg,e),this.id=this.cfg.id,this.group=this.cfg.group,e.members&&(this.members=this.cfg.members.map(function(r){return(0,v.isString)(r)?t.graph.findById(r):r})),e.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,v.isString)(r)?t.graph.findById(r):r})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},n.prototype.contain=function(e){var t=this,r;(0,v.isString)(e)?r=this.graph.findById(e):r=e;var i,a=r.getKeyShape();if(r.get("type")==="path")i=qb(a.attr("path"));else{var o=a.getCanvasBBox();i=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return i=i.map(function(s){var l=t.graph.getPointByCanvas(s[0],s[1]);return[l.x,l.y]}),oT(i,qb(this.path))},n.prototype.destroy=function(){this.group.remove(),this.cfg=null},n}(),HT=yZ,r_=Cn.vs,mZ="node",xZ=function(n){(0,b.__extends)(e,n);function e(t){var r=n.call(this)||this;return r.cfg=(0,v.deepMix)(r.getDefaultCfg(),t),r.init(),r.animating=!1,r.destroyed=!1,r.cfg.enabledStack&&(r.undoStack=new hy(r.cfg.maxStep),r.redoStack=new hy(r.cfg.maxStep)),r}return e.prototype.init=function(){this.initCanvas();var t=new Xj(this),r=new Fj(this),i=new nZ(this),a=new aZ(this);this.set({viewController:t,modeController:r,itemController:i,stateController:a}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},e.prototype.initGroups=function(){var t=this.get("canvas"),r=this.get("canvas").get("el"),i=r.id,a=t.addGroup({id:i+"-root",className:Rr.rootContainerClassName});if(this.get("groupByTypes")){var o=a.addGroup({id:i+"-edge",className:Rr.edgeContainerClassName}),s=a.addGroup({id:i+"-node",className:Rr.nodeContainerClassName}),l=a.addGroup({id:i+"-combo",className:Rr.comboContainerClassName});l.toBack(),this.set({nodeGroup:s,edgeGroup:o,comboGroup:l})}var u=a.addGroup({id:i+"-delegate",className:Rr.delegateContainerClassName});this.set({delegateGroup:u}),this.set("group",a)},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.2,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[]}},e.prototype.set=function(t,r){return(0,v.isPlainObject)(t)?this.cfg=(0,b.__assign)((0,b.__assign)({},this.cfg),t):this.cfg[t]=r,this},e.prototype.get=function(t){return this.cfg[t]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(t){return this.set("minZoom",t)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(t,r){(0,v.isString)(t)&&(t=this.findById(t));var i=this.get("itemController");r||(r=t.get("states")),i.clearItemStates(t,r);var a=this.get("stateController");a.updateStates(t,r,!1)},e.prototype.node=function(t){typeof t=="function"&&this.set("nodeMapper",t)},e.prototype.edge=function(t){typeof t=="function"&&this.set("edgeMapper",t)},e.prototype.combo=function(t){typeof t=="function"&&this.set("comboMapper",t)},e.prototype.findById=function(t){return this.get("itemMap")[t]},e.prototype.find=function(t,r){var i,a=this.get(t+"s");return(0,v.each)(a,function(o,s){if(r(o,s))return i=o,i}),i},e.prototype.findAll=function(t,r){var i=[];return(0,v.each)(this.get(t+"s"),function(a,o){r(a,o)&&i.push(a)}),i},e.prototype.findAllByState=function(t,r){return this.findAll(t,function(i){return i.hasState(r)})},e.prototype.translate=function(t,r){var i=this.get("group"),a=(0,v.clone)(i.getMatrix());a||(a=[1,0,0,0,1,0,0,0,1]),a=r_(a,[["t",t,r]]),i.setMatrix(a),this.emit("viewportchange",{action:"translate",matrix:i.getMatrix()}),this.autoPaint()},e.prototype.moveTo=function(t,r,i,a){var o=this.get("group");iT(o,{x:t,y:r},i,a||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:o.getMatrix()})},e.prototype.fitView=function(t){t&&this.set("fitViewPadding",t);var r=this.get("viewController");r.fitView(),this.autoPaint()},e.prototype.fitCenter=function(){var t=this.get("viewController");t.fitCenter(),this.autoPaint()},e.prototype.addBehaviors=function(t,r){var i=this.get("modeController");return i.manipulateBehaviors(t,r,!0),this},e.prototype.removeBehaviors=function(t,r){var i=this.get("modeController");return i.manipulateBehaviors(t,r,!1),this},e.prototype.updateBehavior=function(t,r,i){var a=this.get("modeController");return a.updateBehavior(t,r,i),this},e.prototype.zoom=function(t,r){var i=this.get("group"),a=(0,v.clone)(i.getMatrix()),o=this.get("minZoom"),s=this.get("maxZoom");a||(a=[1,0,0,0,1,0,0,0,1]),r?a=r_(a,[["t",-r.x,-r.y],["s",t,t],["t",r.x,r.y]]):a=r_(a,[["s",t,t]]),!(o&&a[0]<o||s&&a[0]>s)&&(i.setMatrix(a),this.emit("viewportchange",{action:"zoom",matrix:a}),this.autoPaint())},e.prototype.zoomTo=function(t,r){var i=t/this.getZoom();this.zoom(i,r)},e.prototype.focusItem=function(t,r,i){var a=this.get("viewController"),o=!1;r?o=!0:r===void 0&&(o=this.get("animate"));var s={};i?s=i:i===void 0&&(s=this.get("animateCfg")),a.focus(t,o,s),this.autoPaint()},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(t,r){var i=this.get("viewController");return i.getPointByClient(t,r)},e.prototype.getClientByPoint=function(t,r){var i=this.get("viewController");return i.getClientByPoint(t,r)},e.prototype.getPointByCanvas=function(t,r){var i=this.get("viewController");return i.getPointByCanvas(t,r)},e.prototype.getCanvasByPoint=function(t,r){var i=this.get("viewController");return i.getCanvasByPoint(t,r)},e.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},e.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},e.prototype.showItem=function(t,r){r===void 0&&(r=!0);var i=this.get("itemController"),a=i.changeItemVisibility(t,!0);if(r&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),l={},u={};switch(s){case"node":l.nodes=[{id:o,visible:!1}],u.nodes=[{id:o,visible:!0}];break;case"edge":l.nodes=[{id:o,visible:!1}],u.edges=[{id:o,visible:!0}];break;case"combo":l.nodes=[{id:o,visible:!1}],u.combos=[{id:o,visible:!0}];break;default:break}this.pushStack("visible",{before:l,after:u})}},e.prototype.hideItem=function(t,r){r===void 0&&(r=!0);var i=this.get("itemController"),a=i.changeItemVisibility(t,!1);if(r&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),l={},u={};switch(s){case"node":l.nodes=[{id:o,visible:!0}],u.nodes=[{id:o,visible:!1}];break;case"edge":l.nodes=[{id:o,visible:!0}],u.edges=[{id:o,visible:!1}];break;case"combo":l.nodes=[{id:o,visible:!0}],u.combos=[{id:o,visible:!1}];break;default:break}this.pushStack("visible",{before:l,after:u})}},e.prototype.refreshItem=function(t){var r=this.get("itemController");r.refreshItem(t)},e.prototype.setAutoPaint=function(t){var r=this;r.set("autoPaint",t);var i=r.get("canvas");i.set("autoDraw",t)},e.prototype.remove=function(t,r){r===void 0&&(r=!0),this.removeItem(t,r)},e.prototype.removeItem=function(t,r){r===void 0&&(r=!0);var i=t;if((0,v.isString)(t)&&(i=this.findById(t)),!i&&(0,v.isString)(t))console.warn("The item to be removed does not exist!");else if(i){var a="";if(i.getType&&(a=i.getType()),r&&this.get("enabledStack")){var o=(0,b.__assign)((0,b.__assign)({},i.getModel()),{itemType:a}),s={};switch(a){case"node":{s.nodes=[o],s.edges=[];for(var l=i.getEdges(),u=l.length-1;u>=0;u--)s.edges.push((0,b.__assign)((0,b.__assign)({},l[u].getModel()),{itemType:"edge"}));break}case"edge":s.edges=[o];break;case"combo":s.combos=[o];break;default:break}this.pushStack("delete",{before:s,after:{}})}if(a==="node"){var c=i.getModel();c.comboId&&this.updateComboTree(i)}var f=this.get("itemController");if(f.removeItem(i),a==="combo"){var h=Vb(this.get("comboTrees"));this.set("comboTrees",h)}}},e.prototype.addItem=function(t,r,i,a){i===void 0&&(i=!0),a===void 0&&(a=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!a);var s=this.get("itemController");if(!kj(t,r))return!1;if(r.id&&this.findById(r.id)){console.warn("This item exists already. Be sure the id %c"+r.id+"%c is unique.","font-size: 20px; color: red;","");return}var l,u=this.get("comboTrees");if(u||(u=[]),t==="combo"){var c=this.get("itemMap"),f=!1;if(u.forEach(function(R){f||Ru(R,function(F){if(r.parentId===F.id){f=!0;var V=(0,b.__assign)({id:r.id,depth:F.depth+2},r);F.children?F.children.push(V):F.children=[V],r.depth=V.depth,l=s.addItem(t,r)}var nt=c[F.id];return f&&nt&&nt.getType&&nt.getType()==="combo"&&s.updateCombo(nt,F.children),!0})}),!f){var h=(0,b.__assign)({id:r.id,depth:0},r);r.depth=h.depth,u.push(h),l=s.addItem(t,r)}this.set("comboTrees",u)}else if(t==="node"&&(0,v.isString)(r.comboId)&&u){var d=this.findById(r.comboId);d&&d.getType&&d.getType()!=="combo"&&console.warn("'"+r.comboId+"' is not a id of a combo in the graph, the node will be added without combo."),l=s.addItem(t,r);var g=this.get("itemMap"),p=!1,m=!1;(u||[]).forEach(function(R){m||p||Ru(R,function(F){if(F.id===r.id)return m=!0,!1;if(r.comboId===F.id&&!m){p=!0;var V=(0,v.clone)(r);V.itemType="node",F.children?F.children.push(V):F.children=[V],V.depth=F.depth+1}return p&&g[F.id].getType&&g[F.id].getType()==="combo"&&s.updateCombo(g[F.id],F.children),!0})})}else l=s.addItem(t,r);if(t==="node"&&r.comboId||t==="combo"&&r.parentId){var d=this.findById(r.comboId||r.parentId);d&&d.getType&&d.getType()==="combo"&&d.addChild(l)}var _=this.get("combos");if(_&&_.length>0&&this.sortCombos(),this.autoPaint(),i&&this.get("enabledStack")){var S=(0,b.__assign)((0,b.__assign)({},l.getModel()),{itemType:t}),M={};switch(t){case"node":M.nodes=[S];break;case"edge":M.edges=[S];break;case"combo":M.combos=[S];break;default:break}this.pushStack("add",{before:{},after:M})}return l},e.prototype.add=function(t,r,i,a){return i===void 0&&(i=!0),a===void 0&&(a=!0),this.addItem(t,r,i,a)},e.prototype.updateItem=function(t,r,i){var a=this;i===void 0&&(i=!0);var o=this.get("itemController"),s;(0,v.isString)(t)?s=this.findById(t):s=t;var l=(0,v.clone)(s.getModel()),u="";s.getType&&(u=s.getType());var c=(0,b.__spreadArray)([],s.getStates());if(u==="combo"&&(0,v.each)(c,function(g){return a.setItemState(s,g,!1)}),o.updateItem(s,r),u==="combo"&&(0,v.each)(c,function(g){return a.setItemState(s,g,!0)}),i&&this.get("enabledStack")){var f={nodes:[],edges:[],combos:[]},h={nodes:[],edges:[],combos:[]},d=(0,b.__assign)({id:l.id},r);switch(u){case"node":f.nodes.push(l),h.nodes.push(d);break;case"edge":f.edges.push(l),h.edges.push(d);break;case"combo":f.combos.push(l),h.combos.push(d);break;default:break}u==="node"&&f.nodes.push(l),this.pushStack("update",{before:f,after:h})}},e.prototype.update=function(t,r,i){i===void 0&&(i=!0),this.updateItem(t,r,i)},e.prototype.setItemState=function(t,r,i){(0,v.isString)(t)&&(t=this.findById(t));var a=this.get("itemController");a.setItemState(t,r,i);var o=this.get("stateController");(0,v.isString)(i)?o.updateState(t,r+":"+i,!0):o.updateState(t,r,i)},e.prototype.priorityState=function(t,r){var i=this.get("itemController");i.priorityState(t,r)},e.prototype.data=function(t){_T(t),this.set("data",t)},e.prototype.render=function(){var t=this;this.set("comboSorted",!1);var r=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!r)throw new Error("data must be defined first");var i=r.nodes,a=i===void 0?[]:i,o=r.edges,s=o===void 0?[]:o,l=r.combos,u=l===void 0?[]:l;if(this.clear(!0),this.emit("beforerender"),(0,v.each)(a,function(m){t.add("node",m,!1,!1)}),u&&u.length!==0){var c=Wb(u,a);this.set("comboTrees",c),t.addCombos(u)}(0,v.each)(s,function(m){t.add("edge",m,!1,!1)});var f=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var h=t.get("layoutController");if(h){if(h.layout(d),this.destroyed)return}else t.get("fitView")&&t.fitView(),t.get("fitCenter")&&t.fitCenter(),t.emit("afterrender"),t.set("animate",f);function d(){t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",f)}if(!this.get("groupByTypes"))if(u&&u.length!==0)this.sortCombos();else if(r.nodes&&r.edges&&r.nodes.length<r.edges.length){var g=this.getNodes();g.forEach(function(m){m.toFront()})}else{var p=this.getEdges();p.forEach(function(m){m.toBack()})}this.get("enabledStack")&&this.pushStack("render")},e.prototype.read=function(t){this.data(t),this.render()},e.prototype.diffItems=function(t,r,i){var a=this,o,s=this.get("itemMap");(0,v.each)(i,function(l){if(o=s[l.id],o){if(a.get("animate")&&t===mZ){var u=o.getContainer().getMatrix();u||(u=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:u[6],y:u[7]})}a.updateItem(o,l,!1)}else o=a.addItem(t,l,!1);o&&r[t+"s"].push(o)})},e.prototype.changeData=function(t,r){r===void 0&&(r=!0);var i=this;if(!_T(t))return this;r&&this.get("enabledStack")&&this.pushStack("changedata",{before:i.save(),after:t}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(p){return i.clearItemStates(p)}),this.getEdges().map(function(p){return i.clearItemStates(p)});var a=this.get("canvas"),o=a.get("localRefresh");a.set("localRefresh",!1),i.get("data")||(i.data(t),i.render());var s=this.get("itemMap"),l={nodes:[],edges:[]},u=t.combos;if(u){var c=Wb(u,t.nodes);this.set("comboTrees",c)}else this.set("comboTrees",[]);this.diffItems("node",l,t.nodes),(0,v.each)(s,function(p,m){s[m].getModel().depth=0,!(p.getType&&p.getType()==="edge")&&(p.getType&&p.getType()==="combo"?(delete s[m],p.destroy()):l.nodes.indexOf(p)<0&&(delete s[m],i.remove(p,!1)))});for(var f=this.getCombos(),h=f.length,d=h-1;d>=0;d--)f[d].destroyed&&f.splice(d,1);u&&(i.addCombos(u),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",l,t.edges),(0,v.each)(s,function(p,m){p.getType&&(p.getType()==="node"||p.getType()==="combo")||l.edges.indexOf(p)<0&&(delete s[m],i.remove(p,!1))}),this.set({nodes:l.nodes,edges:l.edges});var g=this.get("layoutController");return g&&(g.changeData(),i.get("animate")&&!g.getLayoutType()?i.positionsAnimate():i.autoPaint()),setTimeout(function(){a.set("localRefresh",o)},16),this},e.prototype.addCombos=function(t){var r=this,i=r.get("comboTrees"),a=this.get("itemController");a.addCombos(i,t)},e.prototype.createCombo=function(t,r){var i=this;this.set("comboSorted",!1);var a="",o;if(!!t){if((0,v.isString)(t))a=t,o={id:t};else{if(a=t.id,!a){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}o=t}var s=r.map(function(u){var c=i.findById(u),f=c.getModel(),h="";c.getType&&(h=c.getType());var d={id:c.getID(),itemType:h};return h==="combo"?(d.parentId=a,f.parentId=a):h==="node"&&(d.comboId=a,f.comboId=a),d});o.children=s,this.addItem("combo",o,!1),this.set("comboSorted",!1);var l=this.get("comboTrees");(l||[]).forEach(function(u){Ru(u,function(c){return c.id===a?(c.itemType="combo",c.children=s,!1):!0})}),l&&this.sortCombos()}},e.prototype.uncombo=function(t){var r=this,i=this,a=t;if((0,v.isString)(t)&&(a=this.findById(t)),!a||a.getType&&a.getType()!=="combo"){console.warn("The item is not a combo!");return}var o=a.getModel().parentId,s=i.get("comboTrees");s||(s=[]);var l=this.get("itemMap"),u=a.get("id"),c,f=[],h=this.get("combos"),d=this.findById(o);if(s.forEach(function(p){c||Ru(p,function(m){if(m.id===u){c=m;var _=a.getEdges();_.forEach(function(M){r.removeItem(M,!1)});var S=h.indexOf(a);h.splice(S,1),delete l[u],a.destroy()}if(o&&c&&m.id===o){d.removeCombo(a),f=m.children;var S=f.indexOf(c);return S!==-1&&f.splice(S,1),c.children.forEach(function(R){var F=r.findById(R.id),V=F.getModel();F.getType&&F.getType()==="combo"?(R.parentId=o,delete R.comboId,V.parentId=o,delete V.comboId):F.getType&&F.getType()==="node"&&(R.comboId=o,V.comboId=o),d.addChild(F),f.push(R)}),!1}return!0})}),!o&&c){var g=s.indexOf(c);s.splice(g,1),c.children.forEach(function(p){p.parentId=void 0;var m=r.findById(p.id).getModel();delete m.parentId,delete m.comboId,p.itemType!=="node"&&s.push(p)})}},e.prototype.updateCombos=function(){var t=this,r=this,i=this.get("comboTrees"),a=r.get("itemController"),o=r.get("itemMap");(i||[]).forEach(function(s){Ru(s,function(l){if(!l)return!0;var u=o[l.id];if(u&&u.getType&&u.getType()==="combo"){var c=(0,b.__spreadArray)([],u.getStates());(0,v.each)(c,function(f){return t.setItemState(u,f,!1)}),a.updateCombo(u,l.children),(0,v.each)(c,function(f){return t.setItemState(u,f,!0)})}return!0})}),r.sortCombos()},e.prototype.updateCombo=function(t){var r=this,i=this,a=t,o;if((0,v.isString)(t)&&(a=this.findById(t)),!a||a.getType&&a.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}o=a.get("id");var s=this.get("comboTrees"),l=i.get("itemController"),u=i.get("itemMap");(s||[]).forEach(function(c){Ru(c,function(f){if(!f)return!0;var h=u[f.id];if(o===f.id&&h&&h.getType&&h.getType()==="combo"){var d=(0,b.__spreadArray)([],h.getStates());(0,v.each)(d,function(g){h.getStateStyle(g)&&r.setItemState(h,g,!1)}),l.updateCombo(h,f.children),(0,v.each)(d,function(g){h.getStateStyle(g)&&r.setItemState(h,g,!0)}),o&&(o=f.parentId)}return!0})})},e.prototype.updateComboTree=function(t,r,i){i===void 0&&(i=!0);var a=this;this.set("comboSorted",!1);var o;(0,v.isString)(t)?o=a.findById(t):o=t;var s=o.getModel(),l=s.comboId||s.parentId,u="";if(o.getType&&(u=o.getType()),r&&u==="combo"){var c=this.get("comboTrees"),f=!0,h;if((c||[]).forEach(function(S){h||Io(S,function(M){if(!h)return M.id===o.getID()&&(h=M),!0})}),Io(h,function(S){return S.id===r?(f=!1,!1):!0}),!f){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(i&&this.get("enabledStack")){var d={},g={};u==="combo"?(d.combos=[{id:s.id,parentId:s.parentId}],g.combos=[{id:s.id,parentId:r}]):u==="node"&&(d.nodes=[{id:s.id,parentId:s.comboId}],g.nodes=[{id:s.id,parentId:r}]),this.pushStack("updateComboTree",{before:d,after:g})}if(s.parentId||s.comboId){var p=this.findById(s.parentId||s.comboId);p&&p.removeChild(o)}if(u==="combo"?s.parentId=r:u==="node"&&(s.comboId=r),r){var m=this.findById(r);m&&m.addChild(o)}if(l){var m=this.findById(l);m&&m.removeChild(o)}var _=Vb(this.get("comboTrees"),s.id,r);this.set("comboTrees",_),this.updateCombos()},e.prototype.save=function(){var t=[],r=[],i=[];return(0,v.each)(this.get("nodes"),function(a){t.push(a.getModel())}),(0,v.each)(this.get("edges"),function(a){r.push(a.getModel())}),(0,v.each)(this.get("combos"),function(a){i.push(a.getModel())}),{nodes:t,edges:r,combos:i}},e.prototype.changeSize=function(t,r){var i=this.get("viewController");return i.changeSize(t,r),this},e.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var r=t.get("nodes"),i=t.get("edges"),a=t.get("edges");(0,v.each)(r,function(o){o.refresh()}),(0,v.each)(i,function(o){o.refresh()}),(0,v.each)(a,function(o){o.refresh()})}t.emit("aftergraphrefresh"),t.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(t){if((0,v.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo does not exist!");return}return t.getChildren()},e.prototype.positionsAnimate=function(){var t=this;t.emit("beforeanimate");var r=t.get("animateCfg"),i=r.onFrame,a=t.getNodes(),o=a.map(function(l){var u=l.getModel();return{id:u.id,x:u.x,y:u.y}});t.isAnimating()&&t.stopAnimate();var s=t.get("canvas");s.animate(function(l){(0,v.each)(o,function(u){var c=t.findById(u.id);if(!(!c||c.destroyed)){var f=c.get("originAttrs"),h=c.get("model");if(!f){var d=c.getContainer().getMatrix();d||(d=[1,0,0,0,1,0,0,0,1]),f={x:d[6],y:d[7]},c.set("originAttrs",f)}if(i){var g=i(c,l,u,f);c.set("model",Object.assign(h,g))}else h.x=f.x+(u.x-f.x)*l,h.y=f.y+(u.y-f.y)*l}}),t.refreshPositions()},{duration:r.duration,easing:r.easing,callback:function(){(0,v.each)(a,function(u){u.set("originAttrs",null)}),r.callback&&r.callback(),t.emit("afteranimate"),t.animating=!1}})},e.prototype.refreshPositions=function(){var t=this;t.emit("beforegraphrefreshposition");var r=t.get("nodes"),i=t.get("edges"),a=t.get("vedges"),o=t.get("combos"),s,l={};(0,v.each)(r,function(u){s=u.getModel();var c=u.get("originAttrs");if(!(c&&s.x===c.x&&s.y===c.y)){var f=u.updatePosition({x:s.x,y:s.y});l[s.id]=f,s.comboId&&(l[s.comboId]=l[s.comboId]||f)}}),o&&o.length!==0&&t.updateCombos(),(0,v.each)(i,function(u){var c=u.getSource().getModel(),f=u.getTarget();if(!(0,v.isPlainObject)(f)){var h=f.getModel();(l[c.id]||l[h.id]||u.getModel().isComboEdge)&&u.refresh()}}),(0,v.each)(a,function(u){u.refresh()}),t.emit("aftergraphrefreshposition"),t.autoPaint()},e.prototype.stopAnimate=function(){this.get("canvas").stopAnimate()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},e.prototype.getCurrentMode=function(){var t=this.get("modeController");return t.getMode()},e.prototype.setMode=function(t){var r=this.get("modeController");return r.setMode(t),this},e.prototype.clear=function(t){t===void 0&&(t=!1);var r=this.get("canvas");return r.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},e.prototype.updateLayout=function(t){var r=this.get("layoutController");(0,v.isString)(t)&&(t={type:t});var i=this.get("layout"),a={};Object.assign(a,i,t),this.set("layout",a),r.isLayoutTypeSame(a)&&a.gpuEnabled===i.gpuEnabled?r.updateLayoutCfg(a):r.changeLayout(a)},e.prototype.destroyLayout=function(){var t=this.get("layoutController");t.destroyLayout()},e.prototype.layout=function(){var t=this.get("layoutController"),r=this.get("layout");if(!(!r||!t)){if(r.workerEnabled){t.layout();return}t.layoutMethod?t.relayout(!0):t.layout()}},e.prototype.collapseCombo=function(t){var r=this;if((0,v.isString)(t)&&(t=this.findById(t)),!t){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var i=t.getModel(),a=this.get("itemController");a.collapseCombo(t),i.collapsed=!0;var o=this.getEdges().concat(this.get("vedges")),s=[],l=[],u=this.get("comboTrees"),c=!1;(u||[]).forEach(function(d){c||Io(d,function(g){if(c&&g.depth<=i.depth)return!1;if(i.id===g.id&&(c=!0),c){var p=r.findById(g.id);p&&p.getType&&p.getType()==="combo"&&(s=s.concat(p.getNodes()),l=l.concat(p.getCombos()))}return!0})});var f={},h=[];o.forEach(function(d){if(!(d.isVisible()&&!d.getModel().isVEdge)){var g=d.getSource(),p=d.getTarget();if((s.includes(g)||l.includes(g))&&!s.includes(p)&&!l.includes(p)||g.getModel().id===i.id){var m=d.getModel();if(m.isVEdge){r.removeItem(d,!1);return}for(var _=p.getModel();!p.isVisible();){if(p=r.findById(_.parentId||_.comboId),!p||!_.parentId&&!_.comboId)return;_=p.getModel()}var S=_.id;if(f[i.id+"-"+S]){f[i.id+"-"+S]+=m.size||1;return}var M=r.addItem("vedge",{source:i.id,target:S,isVEdge:!0},!1);f[i.id+"-"+S]=m.size||1,h.push(M)}else if(!s.includes(g)&&!l.includes(g)&&(s.includes(p)||l.includes(p))||p.getModel().id===i.id){var m=d.getModel();if(m.isVEdge){r.removeItem(d,!1);return}for(var R=g.getModel();!g.isVisible();){if(g=r.findById(R.parentId||R.comboId),!g||!R.parentId&&!R.comboId)return;R=g.getModel()}var F=R.id;if(f[F+"-"+i.id]){f[F+"-"+i.id]+=m.size||1;return}var M=r.addItem("vedge",{target:i.id,source:F,isVEdge:!0},!1);f[F+"-"+i.id]=m.size||1,h.push(M)}}}),h.forEach(function(d){var g=d.getModel();r.updateItem(d,{size:f[g.source+"-"+g.target]},!1)}),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})},e.prototype.expandCombo=function(t){var r=this;if((0,v.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var i=t.getModel(),a=this.get("itemController");a.expandCombo(t),i.collapsed=!1;var o=this.getEdges().concat(this.get("vedges")),s=[],l=[],u=this.get("comboTrees"),c=!1;(u||[]).forEach(function(d){c||Io(d,function(g){if(c&&g.depth<=i.depth)return!1;if(i.id===g.id&&(c=!0),c){var p=r.findById(g.id);p&&p.getType&&p.getType()==="combo"&&(s=s.concat(p.getNodes()),l=l.concat(p.getCombos()))}return!0})});var f={},h={};o.forEach(function(d){if(!(d.isVisible()&&!d.getModel().isVEdge)){var g=d.getSource(),p=d.getTarget(),m=g.get("id"),_=p.get("id");if((s.includes(g)||l.includes(g))&&!s.includes(p)&&!l.includes(p)||m===i.id){if(d.getModel().isVEdge){r.removeItem(d,!1);return}for(var S=p.getModel();!p.isVisible();){if(p=r.findById(S.comboId||S.parentId),!p||!S.parentId&&!S.comboId)return;S=p.getModel()}_=S.id;for(var M=g.getModel();!g.isVisible();){if(g=r.findById(M.comboId||M.parentId),!g||!M.parentId&&!M.comboId)return;if(M.comboId===i.id||M.parentId===i.id)break;M=g.getModel()}if(m=M.id,_){var R=m+"-"+_;if(f[R]){f[R]+=d.getModel().size||1,r.updateItem(h[R],{size:f[R]},!1);return}var F=r.addItem("vedge",{source:m,target:_,isVEdge:!0},!1);f[R]=d.getModel().size||1,h[R]=F}}else if(!s.includes(g)&&!l.includes(g)&&(s.includes(p)||l.includes(p))||_===i.id){if(d.getModel().isVEdge){r.removeItem(d,!1);return}for(var M=g.getModel();!g.isVisible();){if(g=r.findById(M.comboId||M.parentId),!g||!M.parentId&&!M.comboId)return;M=g.getModel()}m=M.id;for(var S=p.getModel();!p.isVisible();){if(p=r.findById(S.comboId||S.parentId),!p||!S.parentId&&!S.comboId)return;if(S.comboId===i.id||S.parentId===i.id)break;S=p.getModel()}if(_=S.id,m){var R=m+"-"+_;if(f[R]){f[R]+=d.getModel().size||1,r.updateItem(h[R],{size:f[R]},!1);return}var F=r.addItem("vedge",{target:_,source:m,isVEdge:!0},!1);f[R]=d.getModel().size||1,h[R]=F}}else(s.includes(g)||l.includes(g))&&(s.includes(p)||l.includes(p))&&g.isVisible()&&p.isVisible()&&d.show()}}),this.emit("aftercollapseexpandcombo",{action:"expand",item:t})},e.prototype.collapseExpandCombo=function(t){if((0,v.isString)(t)&&(t=this.findById(t)),!(!t||t.getType&&t.getType()!=="combo")){for(var r=t.getModel(),i=this.findById(r.parentId);i;){var a=i.getModel();if(a.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),i=void 0;return}i=this.findById(a.parentId)}var o=r.collapsed;o?this.expandCombo(t):this.collapseCombo(t),this.updateCombo(t)}},e.prototype.sortCombos=function(){var t=this,r=this.get("comboSorted");if(!r){this.set("comboSorted",!0);var i=[],a={},o=this.get("comboTrees");(o||[]).forEach(function(l){Io(l,function(u){return i[u.depth]?i[u.depth].push(u.id):i[u.depth]=[u.id],a[u.id]=u.depth,!0})});var s=this.getEdges().concat(this.get("vedges"));(s||[]).forEach(function(l){var u=l.getModel(),c=a[u.source]||0,f=a[u.target]||0,h=Math.max(c,f);i[h]?i[h].push(u.id):i[h]=[u.id]}),i.forEach(function(l){if(!(!l||!l.length))for(var u=l.length-1;u>=0;u--){var c=t.findById(l[u]);c&&c.toFront()}})}},e.prototype.getNeighbors=function(t,r){var i=t;return(0,v.isString)(t)&&(i=this.findById(t)),i.getNeighbors(r)},e.prototype.getNodeDegree=function(t,r,i){r===void 0&&(r=void 0),i===void 0&&(i=!1);var a=t;(0,v.isString)(t)&&(a=this.findById(t));var o=this.get("degrees");(!o||i)&&(o=oy(this.save()),this.set("degrees",o));var s=o[a.getID()],l=0;if(!s)return 0;switch(r){case"in":l=s.inDegree;break;case"out":l=s.outDegree;break;case"all":l=s;break;default:l=s.degree;break}return l},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear())},e.prototype.pushStack=function(t,r,i){if(t===void 0&&(t="update"),i===void 0&&(i="undo"),!this.get("enabledStack")){console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !");return}var a=r?(0,v.clone)(r):{before:{},after:(0,v.clone)(this.save())};i==="redo"?this.redoStack.push({action:t,data:a}):this.undoStack.push({action:t,data:a}),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack})},e.prototype.getAdjMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var i=this.get("adjMatrix");return(!i||!t)&&(i=ef(this.save(),r),this.set("adjMatrix",i)),i},e.prototype.getShortestPathMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var i=this.get("adjMatrix"),a=this.get("shortestPathMatrix");return(!i||!t)&&(i=ef(this.save(),r),this.set("adjMatrix",i)),(!a||!t)&&(a=Eg(this.save(),r),this.set("shortestPathMatrix",a)),a},e.prototype.on=function(t,r,i){return n.prototype.on.call(this,t,r,i)},e.prototype.destroy=function(){this.clear(),this.clearStack(),this.get("itemController").destroy(),this.get("modeController").destroy(),this.get("viewController").destroy(),this.get("stateController").destroy(),this.get("canvas").destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},e.prototype.createHull=function(t){if(!t.members||t.members.length<1){console.warn("Create hull failed! The members is empty.");return}var r=this.get("hullGroup"),i=this.get("hullMap");if(i||(i={},this.set("hullMap",i)),(!r||r.get("destroyed"))&&(r=this.get("group").addGroup({id:"hullGroup"}),r.toBack(),this.set("hullGroup",r)),i[t.id])return console.warn("Existed hull id."),i[t.id];var a=r.addGroup({id:t.id+"-container"}),o=new HT(this,(0,b.__assign)((0,b.__assign)({},t),{group:a})),s=o.id;return i[s]=o,o},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(t){return this.get("hullMap")[t]},e.prototype.removeHull=function(t){var r;(0,v.isString)(t)?r=this.getHullById(t):r=t;var i=this.get("hullMap");delete i[r.id],r.destroy()},e.prototype.removeHulls=function(){var t=this.getHulls();!t||!Object.keys(t).length||(Object.keys(t).forEach(function(r){var i=t[r];i.destroy()}),this.set("hullMap",{}))},e}(Ot.Z),jT=xZ;function Iy(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Iy=function(t){return typeof t}:Iy=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iy(n)}var of=Cn.vs,bZ="-shape",ZT="-label",Oy=["startArrow","endArrow"],KT={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},_Z={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Py={edge:_Z,node:KT,combo:KT},n_="-label-bg",i_={options:{},itemType:"",type:"",getCustomConfig:function(e){return{}},getOptions:function(e){return(0,v.deepMix)({labelCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}},descriptionCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}}},this.options,this.getCustomConfig(e)||{},e)},draw:function(e,t){var r=this.drawShape(e,t);if(r.set("className",this.itemType+bZ),e.label){var i=this.drawLabel(e,t);i.set("className",this.itemType+ZT)}return r},afterDraw:function(e,t,r){},drawShape:function(e,t){return null},drawLabel:function(e,t){var r=this.getOptions(e).labelCfg,i=r||{},a=this.getLabelStyle(e,i,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,draggable:!0,className:"text-shape",name:"text-shape"});if(o){var l=s.getBBox(),u=s.getMatrix();if(u||(u=[1,0,0,0,1,0,0,0,1]),a.rotateCenter)switch(a.rotateCenter){case"center":u=of(u,[["t",-l.width/2,-l.height/2],["r",o],["t",l.width/2,l.height/2]]);break;case"lefttop":u=of(u,[["t",-a.x,-a.y],["r",o],["t",a.x,a.y]]);break;case"leftcenter":u=of(u,[["t",-a.x,-a.y-l.height/2],["r",o],["t",a.x,a.y+l.height/2]]);break;default:u=of(u,[["t",-l.width/2,-l.height/2],["r",o],["t",l.width/2,l.height/2]]);break}else u=of(u,[["t",-a.x,-a.y-l.height/2],["r",o],["t",a.x,a.y+l.height/2]]);s.setMatrix(u)}if(a.background){var c=this.drawLabelBg(e,t,s),f=this.itemType+n_;c.set("classname",f),s.toFront()}return s},drawLabelBg:function(e,t,r){var i=this.options.labelCfg,a=(0,v.mix)({},i,e.labelCfg),o=this.getLabelBgStyleByPosition(r,e,a,t),s=t.addShape("rect",{name:"text-bg-shape",attrs:o});return s},getLabelStyleByPosition:function(e,t,r){return{text:e.label}},getLabelBgStyleByPosition:function(e,t,r,i){return{}},getLabelStyle:function(e,t,r){var i=this.getLabelStyleByPosition(e,t,r),a=this.itemType+"Label",o=Rr[a]?Rr[a].style:null,s=(0,b.__assign)((0,b.__assign)((0,b.__assign)({},o),i),t.style);return s},getShapeStyle:function(e){return e.style},update:function(e,t){this.updateShapeStyle(e,t),this.updateLabel(e,t)},updateShapeStyle:function(e,t){var r=t.getContainer(),i=t.getKeyShape(),a=(0,v.mix)({},i.attr(),e.style),o=function(u){var c,f=a[u];if((0,v.isPlainObject)(f)){var h=r.find(function(d){return d.get("name")===u});h&&h.attr(f)}else i.attr((c={},c[u]=f,c))};for(var s in a)o(s)},updateLabel:function(e,t){var r=t.getContainer(),i=this.getOptions({}).labelCfg,a=this.itemType+ZT,o=r.find(function(F){return F.get("className")===a}),s=this.itemType+n_,l=r.find(function(F){return F.get("classname")===s});if(e.label||e.label==="")if(o){var c={};t.getModel&&(c=t.getModel().labelCfg);var f=(0,v.deepMix)({},i,c,e.labelCfg),h=this.getLabelStyleByPosition(e,f,r),d=e.labelCfg?e.labelCfg.style:void 0,g=f.style&&f.style.background,p=(0,b.__assign)((0,b.__assign)((0,b.__assign)({},o.attr()),h),d),m=p.rotate;if(delete p.rotate,m){var _=[1,0,0,0,1,0,0,0,1];_=of(_,[["t",-p.x,-p.y],["r",m],["t",p.x,p.y]]),o.resetMatrix(),o.attr((0,b.__assign)((0,b.__assign)({},p),{matrix:_}))}else o.resetMatrix(),o.attr(p);if(!l)p.background&&(l=this.drawLabelBg(e,r,o),l.set("classname",s),o.toFront());else if(p.background){var S=this.getLabelBgStyleByPosition(o,e,f,r),M=(0,b.__assign)((0,b.__assign)({},S),g);if(l.resetMatrix(),m){var R=[1,0,0,0,1,0,0,0,1];R=of(R,[["t",-M.x,-M.y],["r",m],["t",M.x,M.y]]),M.matrix=R}l.attr(M)}else r.removeChild(l)}else{var u=this.drawLabel(e,r);u.set("className",a)}},afterUpdate:function(e,t){},setState:function(e,t,r){var i,a,o=r.get("keyShape");if(!(!o||o.destroyed)){var s=r.getType(),l=(0,v.isBoolean)(t)?e:e+":"+t,u=this.getStateStyle(l,r),c=r.getStateStyle(l);if(!(!c&&!u)){var f=(0,v.mix)({},c||u),h=r.getContainer(),d={x:1,y:1,cx:1,cy:1};if(s==="combo"&&(d.r=1,d.width=1,d.height=1),t){var g=function(ne){var ee,ve=f[ne];if((0,v.isPlainObject)(ve)&&!Oy.includes(ne)){var ie=h.find(function(ye){return ye.get("name")===ne});ie&&ie.attr(ve)}else o.attr((ee={},ee[ne]=ve,ee))};for(var p in f)g(p)}else{var m=Sy(r.getCurrentStatesStyle()),_=r.getModel(),S=(0,v.mix)({},_.style,Sy(r.getOriginStyle())),M=o.get("name"),R=o.attr(),F={};Object.keys(R).forEach(function(Kt){if(Kt!=="img"){var ne=R[Kt];ne&&Iy(ne)==="object"?F[Kt]=(0,v.clone)(ne):F[Kt]=ne}});var V={},nt=function(ne){var ee=f[ne];if((0,v.isPlainObject)(ee)&&!Oy.includes(ne)){var ve=h.find(function(Ee){return Ee.get("name")===ne});if(ve){var ie=Sy(ve.attr());(0,v.each)(ee,function(Ee,we){if(ne===M&&F[we]&&!d[we]){delete F[we];var Pe=S[ne][we]||Py[s][we];o.attr(we,Pe)}else if(ie[we]||ie[we]===0){delete ie[we];var Ve=S[ne][we]||Py[s][we];ve.attr(we,Ve)}}),V[ne]=ie}}else if(F[ne]&&!d[ne]){delete F[ne];var ye=S[ne]||(S[M]?S[M][ne]:void 0)||Py[s][ne];o.attr(ne,ye)}};for(var at in f)nt(at);M?V[M]=F:(0,v.mix)(V,F);for(var p in m)if(!d[p]){var xt=m[p];(!(0,v.isPlainObject)(xt)||Oy.includes(p))&&(M?((0,v.mix)(S[M],(a={},a[p]=xt,a)),delete S[p]):(0,v.mix)(S,(i={},i[p]=xt,i)),delete m[p])}var gt={};(0,v.deepMix)(gt,S,V,m);var Tt=!1,Ct=function(ne){var ee,ve,ie=gt[ne];if((0,v.isPlainObject)(ie)&&!Oy.includes(ne)){var ye=h.find(function(we){return we.get("name")===ne});ye&&(ne===M&&(s==="combo"&&(delete ie.r,delete ie.width,delete ie.height),Tt=!0),ye.attr(ie))}else if(!Tt){var Ee=ie||Py[s][ne];s==="combo"?M||o.attr((ee={},ee[ne]=Ee,ee)):o.attr((ve={},ve[ne]=Ee,ve))}};for(var te in gt)Ct(te)}}}},getStateStyle:function(e,t){var r=t.getModel(),i=t.getType(),a=this.getOptions(r),o=a.stateStyles,s=a.style,l=s===void 0?{}:s,u=r.stateStyles?r.stateStyles[e]:o&&o[e];return i==="combo"?(0,v.clone)(u):(0,v.mix)({},l,u)},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t=this.getOptions(e).anchorPoints;return t}},SZ={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:Rr.nodeLabel.offset,getSize:function(e){var t=e.size||this.getOptions({}).size||Rr.defaultNode.size;return(0,v.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),(0,v.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition;if(r==="center")return{x:0,y:0,text:e.label};var i=t.offset;(0,v.isNil)(i)&&(i=this.offset);var a=this.getSize(e),o=a[0],s=a[1],l;switch(r){case"top":l={x:0,y:0-s/2-i,textBaseline:"bottom"};break;case"bottom":l={x:0,y:s/2+i,textBaseline:"top"};break;case"left":l={x:0-o/2-i,y:0,textAlign:"right"};break;default:l={x:o/2+i,y:0,textAlign:"left"};break}return l.text=e.label,l},getLabelBgStyleByPosition:function(e,t,r,i){if(!e)return{};var a=e.getBBox(),o=r.style&&r.style.background;if(!o)return{};var s=Yb(o.padding),l=a.width+s[1]+s[3],u=a.height+s[0]+s[2],c=r.offset;(0,v.isNil)(c)&&(c=this.offset);var f;return f={x:a.minX-s[3],y:a.minY-s[0]},f=(0,b.__assign)((0,b.__assign)((0,b.__assign)({},f),o),{width:l,height:u}),f},drawShape:function(e,t){var r=this.shapeType,i=this.getShapeStyle(e),a=t.addShape(r,{attrs:i,draggable:!0,name:"node-shape"});return a},updateLinkPoints:function(e,t){var r=this.getOptions(e).linkPoints,i=t.find(function(nt){return nt.get("className")==="link-point-left"}),a=t.find(function(nt){return nt.get("className")==="link-point-right"}),o=t.find(function(nt){return nt.get("className")==="link-point-top"}),s=t.find(function(nt){return nt.get("className")==="link-point-bottom"}),l;i&&(l=i.attr()),a&&!l&&(l=a.attr()),o&&!l&&(l=o.attr()),s&&!l&&(l=s.attr()),l||(l=r);var u=(0,v.mix)({},l,e.linkPoints),c=u.fill,f=u.stroke,h=u.lineWidth,d=u.size/2;d||(d=u.r);var g=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},p=g.left,m=g.right,_=g.top,S=g.bottom,M=this.getSize(e),R=M[0],F=M[1],V={r:d,fill:c,stroke:f,lineWidth:h};i?!p&&p!==void 0?i.remove():i.attr((0,b.__assign)((0,b.__assign)({},V),{x:-R/2,y:0})):p&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},V),{x:-R/2,y:0}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),a?(!m&&m!==void 0&&a.remove(),a.attr((0,b.__assign)((0,b.__assign)({},V),{x:R/2,y:0}))):m&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},V),{x:R/2,y:0}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),o?(!_&&_!==void 0&&o.remove(),o.attr((0,b.__assign)((0,b.__assign)({},V),{x:0,y:-F/2}))):_&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},V),{x:0,y:-F/2}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s?!S&&S!==void 0?s.remove():s.attr((0,b.__assign)((0,b.__assign)({},V),{x:0,y:F/2})):S&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},V),{x:0,y:F/2}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},updateShape:function(e,t,r,i){var a=t.get("keyShape");a.attr((0,b.__assign)({},r)),this.updateLabel(e,t),i&&this.updateIcon(e,t)},updateIcon:function(e,t){var r=this,i=t.getContainer(),a=this.getOptions(e).icon,o=(e.icon?e.icon:{show:void 0}).show,s=i.find(function(h){return h.get("className")===r.type+"-icon"});if(s)if(o||o===void 0){var l=(0,v.mix)({},s.attr(),a),u=l.width,c=l.height;s.attr((0,b.__assign)((0,b.__assign)({},l),{x:-u/2,y:-c/2}))}else s.remove();else if(o){var u=a.width,c=a.height;i.addShape("image",{attrs:(0,b.__assign)((0,b.__assign)({},a),{x:-u/2,y:-c/2}),className:this.type+"-icon",name:this.type+"-icon"});var f=i.find(function(g){return g.get("className")==="node-label"});f&&f.toFront()}}},EZ=(0,b.__assign)((0,b.__assign)({},i_),SZ);Ea.registerNode("single-node",EZ);var Dy="edge-shape";function wZ(n){var e=n;return n==="start"?e="end":n==="end"&&(e="start"),e}var CZ={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:Rr.defaultEdge.size,style:{x:0,y:0,stroke:Rr.defaultEdge.style.stroke,lineAppendWidth:Rr.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Rr.edgeLabel.style.fill,fontSize:Rr.edgeLabel.style.fontSize}},stateStyles:(0,b.__assign)({},Rr.edgeStateStyles)},getPath:function(e){var t=[];return(0,v.each)(e,function(r,i){i===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},i=(0,v.mix)({},t,r,e.style),a=e.size||Rr.defaultEdge.size;e=this.getPathPoints(e);var o=e.startPoint,s=e.endPoint,l=this.getControlPoints(e),u=[o];l&&(u=u.concat(l)),u.push(s);var c=this.getPath(u),f=(0,v.mix)({},Rr.defaultEdge.style,{stroke:Rr.defaultEdge.color,lineWidth:a,path:c},i);return f},updateShapeStyle:function(e,t){var r=t.getContainer(),i={stroke:e.color},a=r.find(function(S){return S.get("className")==="edge-shape"})||t.getKeyShape(),o=e.size;e=this.getPathPoints(e);var s=e.startPoint,l=e.endPoint,u=this.getControlPoints(e),c=[s];u&&(c=c.concat(u)),c.push(l);var f=a.attr(),h=(0,v.mix)({},i,f,e.style),d=e.sourceNode,g=e.targetNode,p={radius:h.radius};u||(p={source:d,target:g,offset:h.offset,radius:h.radius}),f.endArrow&&h.endArrow===!1&&(e.style.endArrow={path:""}),f.startArrow&&h.startArrow===!1&&(e.style.startArrow={path:""});var m=this.getPath(c,p),_=(0,v.mix)(i,a.attr(),{lineWidth:o,path:m},e.style);a&&a.attr(_)},getLabelStyleByPosition:function(e,t,r){var i=t.position||this.labelPosition,a={},o=r&&r.find(function(h){return h.get("className")===Dy}),s;i==="start"?s=0:i==="end"?s=1:s=.5;var l=t.refX||this.refX,u=t.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return a.x=e.startPoint.x+l,a.y=e.startPoint.y+u,a.text=e.label,a;var c;(0,v.isNil)(t.autoRotate)?c=this.labelAutoRotate:c=t.autoRotate;var f=_y(o,s,l,u,c);return a.x=f.x,a.y=f.y,a.rotate=f.rotate,a.textAlign=this._getTextAlign(i,f.angle),a.text=e.label,a},getLabelBgStyleByPosition:function(e,t,r,i){if(!e)return{};var a=e.getBBox(),o=r.style&&r.style.background;if(!o)return{};var s=o.padding,l=a.width+s[1]+s[3],u=a.height+s[0]+s[2],c=r.position||this.labelPosition,f=(0,b.__assign)((0,b.__assign)({},o),{width:l,height:u,x:a.minX-s[2],y:a.minY-s[0],rotate:0}),h;(0,v.isNil)(r.autoRotate)?h=this.labelAutoRotate:h=r.autoRotate;var d=i&&i.find(function(M){return M.get("className")===Dy}),g;c==="start"?g=0:c==="end"?g=1:g=.5;var p=r.refX||this.refX,m=r.refY||this.refY;if(t.startPoint.x===t.endPoint.x&&t.startPoint.y===t.endPoint.y)return f.x=t.startPoint.x+p-l/2,f.y=t.startPoint.y+m-u/2,f;var _=_y(d,g,p-l/2,m+u/2,h),S=_.angle;return S>1/2*Math.PI&&S<3*1/2*Math.PI&&(_=_y(d,g,p+l/2,m+u/2,h)),h&&(f.x=_.x,f.y=_.y),f.rotate=_.rotate,f},_getTextAlign:function(e,t){var r="center";return t?(t=t%(Math.PI*2),e!=="center"&&(t>=0&&t<=Math.PI/2||t>=3/2*Math.PI&&t<2*Math.PI?r=e:r=wZ(e)),r):e},getControlPoints:function(e){return e.controlPoints},getPathPoints:function(e){return e},drawShape:function(e,t){var r=this.getShapeStyle(e),i=t.addShape("path",{className:Dy,name:Dy,attrs:r});return i},drawLabel:function(e,t){var r=this.options.labelCfg,i;typeof window!="undefined"&&typeof window.getComputedStyle!="undefined"?i=window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif":i="Arial, sans-serif";var a=(0,v.deepMix)({fontFamily:i},r,e.labelCfg),o=this.getLabelStyle(e,a,t),s=o.rotate;delete o.rotate;var l=t.addShape("text",{attrs:o,name:"text-shape"});if(s&&l.rotateAtStart(s),o.background){var u=this.drawLabelBg(e,t,l),c=this.itemType+n_;u.set("classname",c),l.toFront()}return l},drawLabelBg:function(e,t,r){var i=this.options.labelCfg,a=(0,v.deepMix)({},i,e.labelCfg),o=this.getLabelStyle(e,a,t),s=o.rotate,l=this.getLabelBgStyleByPosition(r,e,a,t);delete l.rotate;var u=t.addShape("rect",{name:"text-bg-shape",attrs:l});return s&&u.rotateAtStart(s),u}},MZ=(0,b.__assign)((0,b.__assign)({},i_),CZ);Ea.registerEdge("single-edge",MZ),Ea.registerEdge("line",{getControlPoints:function(){}},"single-edge"),Ea.registerEdge("spline",{getPath:function(e){var t=BT(e);return t}},"single-edge"),Ea.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint,i={x:(t.x+r.x)/2,y:(t.y+r.y)/2},a,o;if(e.controlPoints!==void 0){if(o=e.controlPoints[0],a=Nb(t,o,r),t.x<=r.x&&t.y>r.y?this.clockwise=a.x>o.x?0:1:t.x<=r.x&&t.y<r.y?this.clockwise=a.x>o.x?1:0:t.x>r.x&&t.y<=r.y?this.clockwise=a.y<o.y?0:1:this.clockwise=a.y<o.y?1:0,(o.x-t.x)/(o.y-t.y)==(r.x-t.x)/(r.y-t.y))return[]}else{e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),(0,v.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),e.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:r.x-t.x,y:r.y-t.y},l=Math.atan2(s.y,s.x);o={x:e.curveOffset*Math.cos(-Math.PI/2+l)+i.x,y:e.curveOffset*Math.sin(-Math.PI/2+l)+i.y},a=Nb(t,o,r)}var u=py(t,a),c=[{x:u,y:u}];return c},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),e.length===2?t.push(["L",e[1].x,e[1].y]):t.push(["A",e[1].x,e[1].y,0,0,this.clockwise,e[2].x,e[2].y]),t}},"single-edge"),Ea.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var t=e.controlPoints;if(!t||!t.length){var r=e.startPoint,i=e.endPoint;e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,v.isArray)(this.curveOffset)&&(e.curveOffset=e.curveOffset[0]),(0,v.isArray)(this.curvePosition)&&(e.curvePosition=e.curveOffset[0]);var a=Ty(r,i,e.curvePosition,e.curveOffset);t=[a]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),t}},"single-edge"),Ea.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(e){var t=e.controlPoints;if(e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,v.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,v.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),!t||!t.length||t.length<2){var r=e.startPoint,i=e.endPoint,a=Ty(r,i,e.curvePosition[0],e.curveOffset[0]),o=Ty(r,i,e.curvePosition[1],e.curveOffset[1]);t=[a,o]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]),t}},"single-edge"),Ea.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,v.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,v.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,v.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var i=r.y-t.y,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(i)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x,y:t.y+i*this.curvePosition[0]+a[0]},s={x:r.x,y:r.y-i*this.curvePosition[1]+a[1]};return[o,s]}},"cubic"),Ea.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,v.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,v.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,v.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var i=r.x-t.x,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(i)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x+i*this.curvePosition[0]+a[0],y:t.y},s={x:r.x-i*this.curvePosition[1]+a[1],y:r.y},l=[o,s];return l}},"cubic"),Ea.registerEdge("loop",{getPathPoints:function(e){return pT(e)},getControlPoints:function(e){return e.controlPoints},afterDraw:function(e){e.controlPoints=void 0},afterUpdate:function(e){e.controlPoints=void 0}},"cubic");var AZ={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:Rr.comboLabel.refX,refY:Rr.comboLabel.refY,options:{style:{stroke:Rr.defaultCombo.style.stroke,fill:Rr.defaultCombo.style.fill,lineWidth:Rr.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Rr.comboLabel.style.fill,fontSize:Rr.comboLabel.style.fontSize}},stateStyles:(0,b.__assign)({},Rr.comboStateStyles)},getSize:function(e){var t=(0,v.clone)(e.size||this.options.size||Rr.defaultCombo.size);return(0,v.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),(0,v.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,i=e.style,a=e.padding||this.options.padding;(0,v.isArray)(a)&&(a=a[0]);var o=t.refX,s=t.refY;(0,v.isNil)(o)&&(o=this.refX),(0,v.isNil)(s)&&(s=this.refY);var l=this.getSize(e),u=Math.max(i.r,l[0]/2)||l[0]/2,c=u+a,f;switch(r){case"top":f={x:0,y:-c-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":f={x:0,y:c+s,textBaseline:"bottom",textAlign:"center"};break;case"left":f={x:-c+o,y:0,textAlign:"left"};break;case"center":f={x:0,y:0,text:e.label,textAlign:"center"};break;default:f={x:c+o,y:0,textAlign:"right"};break}return f.text=e.label,f},drawShape:function(e,t){var r=this.shapeType,i=this.getShapeStyle(e),a=t.addShape(r,{attrs:i,draggable:!0,name:"combo-shape"});return a},updateShape:function(e,t,r){var i=t.get("keyShape"),a=e.animate===void 0?this.options.animate:e.animate;a&&i.animate?i.animate(r,{duration:200,easing:"easeLinear"}):i.attr((0,b.__assign)({},r)),this.updateLabel(e,t)}},TZ=(0,b.__assign)((0,b.__assign)({},i_),AZ);Ea.registerCombo("single-combo",TZ),Ea.registerCombo("circle",{options:{size:[Rr.defaultCombo.size[0],Rr.defaultCombo.size[0]],padding:Rr.defaultCombo.padding[0],animate:!0,style:{stroke:Rr.defaultCombo.style.stroke,fill:Rr.defaultCombo.style.fill,lineWidth:Rr.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Rr.comboLabel.style.fill,fontSize:Rr.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,b.__assign)({},Rr.comboStateStyles)},shapeType:"circle",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e);delete r.height,delete r.width;var i=t.addShape("circle",{attrs:r,className:"circle-combo",name:"circle-combo",draggable:!0});return i},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,v.isArray)(r)&&(r=r[0]);var i={stroke:e.color},a=(0,v.mix)({},t,i,e.style),o;if(e.fixSize)o=(0,v.isNumber)(e.fixSize)?e.fixSize:e.fixSize[0];else{var s=this.getSize(e);!(0,v.isNumber)(a.r)||isNaN(a.r)?o=s[0]/2||Rr.defaultCombo.style.r:o=Math.max(a.r,s[0]/2)||s[0]/2}a.r=o+r;var l=(0,b.__assign)({x:0,y:0},a);return e.style?e.style.r=o:e.style={r:o},l},update:function(e,t){var r=this.getSize(e),i=e.padding||this.options.padding;(0,v.isArray)(i)&&(i=i[0]);var a=(0,v.clone)(e.style),o;e.fixSize?o=(0,v.isNumber)(e.fixSize)?e.fixSize:e.fixSize[0]:o=Math.max(a.r,r[0]/2)||r[0]/2,a.r=o+i;var s=t.get("sizeCache");s&&(s.r=a.r);var l={stroke:e.color},u=t.get("keyShape"),c=(0,v.mix)({},u.attr(),l,a);e.style?e.style.r=o:e.style={r:o},this.updateShape(e,t,c,!0)}},"single-combo"),Ea.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:Rr.defaultCombo.style.stroke,fill:Rr.defaultCombo.style.fill,lineWidth:Rr.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Rr.comboLabel.style.fill,fontSize:Rr.comboLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,b.__assign)({},Rr.comboStateStyles)},shapeType:"rect",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e),i=t.addShape("rect",{attrs:r,className:"rect-combo",name:"rect-combo",draggable:!0});return i},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,i=e.style,a=e.padding||this.options.padding;(0,v.isNumber)(a)&&(a=[a,a,a,a]);var o=t.refX,s=t.refY;(0,v.isNil)(o)&&(o=this.refX),(0,v.isNil)(s)&&(s=this.refY);var l=i.width/2+a[3],u=i.height/2+a[0],c;switch(r){case"top":c={x:0-l+o,y:0-u+s,textBaseline:"top",textAlign:"left"};break;case"bottom":c={x:0,y:u+s,textBaseline:"bottom",textAlign:"center"};break;case"left":c={x:0-l+s,y:0,textAlign:"left"};break;case"center":c={x:0,y:0,text:e.label,textAlign:"center"};break;default:c={x:l+o,y:0,textAlign:"right"};break}return c.text=e.label,c},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,v.isNumber)(r)&&(r=[r,r,r,r]);var i={stroke:e.color},a=(0,v.mix)({},t,i,e.style),o=this.getSize(e),s,l,u=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;u?(0,v.isNumber)(u)?(s=u,l=u):(s=u[0],l=u[1]):(!(0,v.isNumber)(a.width)||isNaN(a.width)?s=o[0]||Rr.defaultCombo.style.width:s=Math.max(a.width,o[0])||o[0],!(0,v.isNumber)(a.height)||isNaN(a.height)?l=o[1]||Rr.defaultCombo.style.height:l=Math.max(a.height,o[1])||o[1]);var c=-s/2-r[3],f=-l/2-r[0];a.width=s+r[1]+r[3],a.height=l+r[0]+r[2];var h=(0,b.__assign)({x:c,y:f},a);return e.style?(e.style.width=s,e.style.height=l):e.style={width:s,height:l},h},update:function(e,t){var r=this.getSize(e),i=e.padding||this.options.padding;(0,v.isNumber)(i)&&(i=[i,i,i,i]);var a=(0,v.clone)(e.style),o,s,l=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;l?(0,v.isNumber)(l)?(o=l,s=l):(o=l[0],s=l[1]):(o=Math.max(a.width,r[0])||r[0],s=Math.max(a.height,r[1])||r[1]),a.width=o+i[1]+i[3],a.height=s+i[0]+i[2];var u=t.get("sizeCache");u&&(u.width=a.width,u.height=a.height),a.x=-o/2-i[3],a.y=-s/2-i[0];var c={stroke:e.color},f=t.get("keyShape"),h=(0,v.mix)({},f.attr(),c,a);e.style?(e.style.width=o,e.style.height=s):e.style={width:o,height:s},this.updateShape(e,t,h,!1)},updateShape:function(e,t,r){var i=t.get("keyShape"),a=e.animate===void 0?this.options.animate:e.animate;a&&i.animate?i.animate(r,{duration:200,easing:"easeLinear"}):i.attr((0,b.__assign)({},r)),this.updateLabel(e,t)}},"single-combo"),Ea.registerNode("simple-circle",{options:{size:Rr.defaultNode.size,style:{x:0,y:0,stroke:Rr.defaultNode.style.stroke,fill:Rr.defaultNode.style.fill,lineWidth:Rr.defaultNode.style.lineWidth},labelCfg:{style:{fill:Rr.nodeLabel.style.fill,fontSize:Rr.nodeLabel.style.fontSize}},stateStyles:(0,b.__assign)({},Rr.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),i=t.addShape("circle",{attrs:r,className:this.type+"-keyShape",draggable:!0});return i},getShapeStyle:function(e){var t=this.getOptions(e).style,r={stroke:e.color},i=(0,v.deepMix)({},t,r),a=this.getSize(e),o=a[0]/2,s=(0,b.__assign)({x:0,y:0,r:o},i);return s},update:function(e,t){var r=this.getSize(e),i={stroke:e.color,r:r[0]/2},a=t.get("keyShape"),o=(0,v.deepMix)({},a.attr(),i,e.style);this.updateShape(e,t,o,!0)}},"single-node"),Ea.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:Rr.defaultNode.style.stroke,fill:Rr.defaultNode.style.fill,lineWidth:Rr.defaultNode.style.lineWidth},labelCfg:{style:{fill:Rr.nodeLabel.style.fill,fontSize:Rr.nodeLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,b.__assign)({},Rr.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),i=t.addShape("rect",{attrs:r,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return i},getShapeStyle:function(e){var t=this.getOptions(e).style,r={stroke:e.color},i=(0,v.mix)({},t,r),a=this.getSize(e),o=i.width||a[0],s=i.height||a[1],l=(0,b.__assign)({x:-o/2,y:-s/2,width:o,height:s},i);return l},update:function(e,t){var r=t.getContainer(),i=this.getOptions({}).style,a=this.getSize(e),o=t.get("keyShape");e.size||(a[0]=o.attr("width")||i.width,a[1]=o.attr("height")||i.height);var s={stroke:e.color,x:-a[0]/2,y:-a[1]/2,width:a[0],height:a[1]},l=(0,v.mix)({},i,o.attr(),s);l=(0,v.mix)(l,e.style),this.updateShape(e,t,l,!1)}},"single-node"),Ea.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(e,t){var r=this.shapeType,i=this.getShapeStyle(e);delete i.fill;var a=t.addShape(r,{attrs:i,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawClip(e,a),a},drawClip:function(e,t){var r=this.getOptions(e).clipCfg;if(!!r.show){var i=r.type,a=r.x,o=r.y,s=r.style;if(i==="circle"){var l=r.r;t.setClip({type:"circle",attrs:(0,b.__assign)({r:l,x:a,y:o},s)})}else if(i==="rect"){var u=r.width,c=r.height,f=a-u/2,h=o-c/2;t.setClip({type:"rect",attrs:(0,b.__assign)({x:f,y:h,width:u,height:c},s)})}else if(i==="ellipse"){var d=r.rx,g=r.ry;t.setClip({type:"ellipse",attrs:(0,b.__assign)({x:a,y:o,rx:d,ry:g},s)})}else if(i==="polygon"){var p=r.points;t.setClip({type:"polygon",attrs:(0,b.__assign)({points:p},s)})}else if(i==="path"){var m=r.path;t.setClip({type:"path",attrs:(0,b.__assign)({path:m},s)})}}},getShapeStyle:function(e){var t=this.getOptions(e).style,r=this.getSize(e),i=this.getOptions(e).img,a=r[0],o=r[1];t&&(a=t.width||r[0],o=t.height||r[1]);var s=(0,b.__assign)({x:-a/2,y:-o/2,width:a,height:o,img:i},t);return s},updateShapeStyle:function(e,t){var r=t.getContainer(),i=this.itemType+"-shape",a=r.find(function(s){return s.get("className")===i})||t.getKeyShape(),o=this.getShapeStyle(e);a&&a.attr(o)}},"single-node");var $T={triangle:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=15),r===void 0&&(r=0);var i=r*2,a="M "+i+",0 L "+(i+t)+",-"+e/2+" L "+(i+t)+","+e/2+" Z";return a},vee:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=20),r===void 0&&(r=0);var i=r*2,a="M "+i+",0 L "+(i+t)+",-"+e/2+`
        L `+(i+2*t/3)+",0 L "+(i+t)+","+e/2+" Z";return a},circle:function(e,t){e===void 0&&(e=5),t===void 0&&(t=0);var r=t*2,i="M "+r+`, 0
            a `+e+","+e+" 0 1,0 "+e*2+`,0
            a `+e+","+e+" 0 1,0 "+-e*2+",0";return i},rect:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=10),r===void 0&&(r=0);var i=r*2,a="M "+i+","+-e/2+` 
        L `+(i+t)+","+-e/2+` 
        L `+(i+t)+","+e/2+` 
        L `+i+","+e/2+" Z";return a},diamond:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=0);var i=r*2,a="M "+i+`,0 
        L `+(i+t/2)+","+-e/2+` 
        L `+(i+t)+`,0 
        L `+(i+t/2)+","+e/2+" Z";return a},triangleRect:function(e,t,r,i,a,o){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=15),i===void 0&&(i=3),a===void 0&&(a=5),o===void 0&&(o=0);var s=o*2,l=s+t+a,u="M "+s+",0 L "+(s+t)+",-"+e/2+" L "+(s+t)+","+e/2+` Z
            M `+l+", -"+r/2+`
            L `+(l+i)+" -"+r/2+`
            L `+(l+i)+" "+r/2+`
            L `+l+" "+r/2+`
            Z`;return u}},QT={collapse:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e+r-4,t]]},expand:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e-r+2*r-4,t],["M",e-r+r,t-r+4],["L",e,t+r-4]]},upTriangle:function(e,t,r){var i=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",e-i,t+a],["L",e+i,t+a],["L",e,t-r],["Z"]]},downTriangle:function(e,t,r){var i=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",e-i,t-a],["L",e+i,t-a],["L",e,t+r],["Z"]]}},Nu=Ea,IZ=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],OZ=Cn.vs,PZ=(0,b.__assign)((0,b.__assign)((0,b.__assign)((0,b.__assign)((0,b.__assign)((0,b.__assign)({},J),K),q),Y),X),{transform:OZ,mat3:ra}),Jo=PZ,DZ=function(){function n(e){this.graph=e,this.layoutCfg=e.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return n.prototype.initLayout=function(){},n.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},n.prototype.getLayoutCfgType=function(e){var t=e.type;if(t)return t;var r=e.pipes;return Array.isArray(r)?r.map(function(i){return(i==null?void 0:i.type)||""}):null},n.prototype.isLayoutTypeSame=function(e){var t=this.getLayoutCfgType(e);return Array.isArray(this.layoutType)?this.layoutType.every(function(r,i){return r===t[i]}):(e==null?void 0:e.type)===this.layoutType},n.prototype.refreshLayout=function(){var e=this.graph;!e||(e.get("animate")?e.positionsAnimate():e.refreshPositions())},n.prototype.changeLayout=function(e){this.layoutCfg=e,this.destoryLayoutMethods(),this.layout()},n.prototype.changeData=function(){this.destoryLayoutMethods(),this.layout()},n.prototype.destoryLayoutMethods=function(){var e=this.layoutMethods;e==null||e.forEach(function(t){t.destroy()}),this.layoutMethods=[]},n.prototype.destroyLayout=function(){var e=this.graph;this.destoryLayoutMethods(),e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},n.prototype.setDataFromGraph=function(){for(var e=[],t=[],r=[],i=[],a=[],o=[],s=[],l=this.graph.getNodes(),u=this.graph.getEdges(),c=this.graph.getCombos(),f=l.length,h=0;h<f;h++){var d=l[h];if(!(!d||d.destroyed)){var g=d.getModel();if(!d.isVisible()){t.push(g);continue}e.push(g)}}for(var p=u.length,h=0;h<p;h++){var m=u[h];if(!(!m||m.destroyed)){var g=m.getModel();if(!m.isVisible()){i.push(g);continue}g.isComboEdge?a.push(g):r.push(g)}}for(var _=c.length,h=0;h<_;h++){var S=c[h];if(!S.destroyed){var g=S.getModel();if(!S.isVisible()){i.push(g);continue}o.push(g)}}return{nodes:e,hiddenNodes:t,edges:r,hiddenEdges:i,combos:o,hiddenCombos:s,comboEdges:a}},n.prototype.reLayoutMethod=function(e,t){var r=this;return new Promise(function(i,a){var o=r.graph,s=t==null?void 0:t.type;t.onLayoutEnd=function(){o.emit("aftersublayout",{type:s}),i()},e.init(r.data),s==="force"&&(e.ticking=!1,e.forceSimulation.stop()),o.emit("beforesublayout",{type:s}),e.execute(),e.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd()})},n.prototype.relayout=function(e){var t=this,r=this,i=r.graph,a=r.layoutMethods,o=r.layoutCfg;if(e){this.data=this.setDataFromGraph();var s=this.data.nodes;if(!s)return!1;this.initPositions(o.center,s)}i.emit("beforelayout");var l=Promise.resolve();a==null||a.forEach(function(u,c){var f=o[c];l=l.then(function(){return t.reLayoutMethod(u,f)})}),l.then(function(){o.onAllLayoutEnd&&o.onAllLayoutEnd()}).catch(function(u){console.warn("relayout failed",u)})},n.prototype.filterLayoutData=function(e,t){var r=e.nodes,i=e.edges,a=(0,b.__rest)(e,["nodes","edges"]);if(!r)return e;var o,s;if((0,v.isFunction)(t==null?void 0:t.nodesFilter)?o=t.nodesFilter:o=function(){return!0},(0,v.isFunction)(t==null?void 0:t.edgesFilter))s=t.edgesFilter;else{var l=r.reduce(function(u,c){return u[c.id]=!0,u},{});s=function(c){return l[c.source]&&l[c.target]}}return(0,b.__assign)({nodes:r.filter(o),edges:i.filter(s)},a)},n.prototype.getLayoutBBox=function(e){var t=this.graph,r=(0,v.groupBy)(t.getNodes(),function(o){return o.getModel().layoutOrder}),i=Object.values(r).map(function(o){var s=ST(o);return s.size=[s.width,s.height],s}),a=Object.values((0,v.groupBy)(e,"layoutOrder"));return{groupNodes:a,layoutNodes:i}},n.prototype.layoutAnimate=function(){},n.prototype.moveToZero=function(){var e=this.graph,t=e.get("data"),r=t.nodes;if(!(r[0].x===void 0||r[0].x===null||Ey(r[0].x))){for(var i=[0,0],a=r.length,o=0;o<a;o++){var s=r[o];i[0]+=s.x,i[1]+=s.y}i[0]/=r.length,i[1]/=r.length;for(var o=0;o<a;o++){var s=r[o];s.x-=i[0],s.y-=i[1]}}},n.prototype.initPositions=function(e,t){var r=this.graph;if(!t)return!1;var i=t?t.length:0;if(!!i){var a=r.get("width")*.85,o=r.get("height")*.85,s=Math.ceil(Math.sqrt(i)*(a/o)),l=Math.ceil(i/s),u=a/(s-1),c=o/(l-1);(!isFinite(u)||!u)&&(u=0),(!isFinite(c)||!u)&&(c=0);for(var f=e[0]-a/2,h=e[1]-o/2,d=!0,g=0;g<i;g++){var p=t[g];Ey(p.x)&&(d=!1,p.x=g%s*u+f),Ey(p.y)&&(d=!1,p.y=Math.floor(g/s)*c+h)}return d}},n.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},n}(),JT=DZ,LZ=function(){function n(e){this.graph=e,this.destroyed=!1,this.initEvents()}return n}(),qT=LZ,Ly;(function(n){n.CLICK="click",n.DBLCLICK="dblclick",n.MOUSEDOWN="mousedown",n.MOUDEUP="mouseup",n.CONTEXTMENU="contextmenu",n.MOUSEENTER="mouseenter",n.MOUSEOUT="mouseout",n.MOUSEOVER="mouseover",n.MOUSEMOVE="mousemove",n.MOUSELEAVE="mouseleave",n.DRAGSTART="dragstart",n.DRAGEND="dragend",n.DRAG="drag",n.DRAGENTER="dragenter",n.DRAGLEAVE="dragleave",n.DRAGOVER="dragover",n.DRAGOUT="dragout",n.DDROP="drop",n.KEYUP="keyup",n.KEYDOWN="keydown",n.WHEEL="wheel",n.FOCUS="focus",n.BLUR="blur",n.TOUCHSTART="touchstart",n.TOUCHMOVE="touchmove",n.TOUCHEND="touchend",n.CANVAS_TOUCHSTART="canvas:touchstart",n.CANVAS_TOUCHMOVE="canvas:touchmove",n.CANVAS_TOUCHEND="canvas:touchend",n.NODE_TOUCHSTART="node:touchstart",n.NODE_TOUCHMOVE="node:touchmove",n.NODE_TOUCHEND="node:touchend",n.COMBO_TOUCHSTART="combo:touchstart",n.COMBO_TOUCHMOVE="combo:touchmove",n.COMBO_TOUCHEND="combo:touchend",n.EDGE_TOUCHSTART="edge:touchstart",n.EDGE_TOUCHMOVE="edge:touchmove",n.EDGE_TOUCHEND="edge:touchend",n.NODE_CONTEXTMENU="node:contextmenu",n.NODE_CLICK="node:click",n.NODE_DBLCLICK="node:dblclick",n.NODE_MOUSEDOWN="node:mousedown",n.NODE_MOUSEUP="node:mouseup",n.NODE_MOUSEENTER="node:mouseenter",n.NODE_MOUSELEAVE="node:mouseleave",n.NODE_MOUSEMOVE="node:mousemove",n.NODE_MOUSEOUT="node:mouseout",n.NODE_MOUSEOVER="node:mouseover",n.NODE_DROP="node:drop",n.NODE_DRAGOVER="node:dragover",n.NODE_DRAGENTER="node:dragenter",n.NODE_DRAGLEAVE="node:dragleave",n.NODE_DRAGSTART="node:dragstart",n.NODE_DRAG="node:drag",n.NODE_DRAGEND="node:dragend",n.NODE_TAP="node:tap",n.NODE_PANSTART="node:panstart",n.NODE_PANMOVE="node:panmove",n.NODE_PANEND="node:panend",n.COMBO_CONTEXTMENU="combo:contextmenu",n.COMBO_CLICK="combo:click",n.COMBO_DBLCLICK="combo:dblclick",n.COMBO_MOUSEDOWN="combo:mousedown",n.COMBO_MOUSEUP="combo:mouseup",n.COMBO_MOUSEENTER="combo:mouseenter",n.COMBO_MOUSELEAVE="combo:mouseleave",n.COMBO_MOUSEMOVE="combo:mousemove",n.COMBO_MOUSEOUT="combo:mouseout",n.COMBO_MOUSEOVER="combo:mouseover",n.COMBO_DROP="combo:drop",n.COMBO_DRAGOVER="combo:dragover",n.COMBO_DRAGENTER="combo:dragenter",n.COMBO_DRAGLEAVE="combo:dragleave",n.COMBO_DRAGSTART="combo:dragstart",n.COMBO_DRAG="combo:drag",n.COMBO_DRAGEND="combo:dragend",n.COMBO_TAP="combo:tap",n.COMBO_PANSTART="combo:panstart",n.COMBO_PANMOVE="combo:panmove",n.COMBO_PANEND="combo:panend",n.EDGE_CONTEXTMENU="edge:contextmenu",n.EDGE_CLICK="edge:click",n.EDGE_DBLCLICK="edge:dblclick",n.EDGE_MOUSEDOWN="edge:mousedown",n.EDGE_MOUSEUP="edge:mouseup",n.EDGE_MOUSEENTER="edge:mouseenter",n.EDGE_MOUSELEAVE="edge:mouseleave",n.EDGE_MOUSEMOVE="edge:mousemove",n.EDGE_MOUSEOUT="edge:mouseout",n.EDGE_MOUSEOVER="edge:mouseover",n.EDGE_DROP="edge:drop",n.EDGE_DRAGOVER="edge:dragover",n.EDGE_DRAGENTER="edge:dragenter",n.EDGE_DRAGLEAVE="edge:dragleave",n.CANVAS_CONTEXTMENU="canvas:contextmenu",n.CANVAS_CLICK="canvas:click",n.CANVAS_DBLCLICK="canvas:dblclick",n.CANVAS_MOUSEDOWN="canvas:mousedown",n.CANVAS_MOUSEUP="canvas:mouseup",n.CANVAS_MOUSEENTER="canvas:mouseenter",n.CANVAS_MOUSELEAVE="canvas:mouseleave",n.CANVAS_MOUSEMOVE="canvas:mousemove",n.CANVAS_MOUSEOUT="canvas:mouseout",n.CANVAS_MOUSEOVER="canvas:mouseover",n.CANVAS_DROP="canvas:drop",n.CANVAS_DRAGENTER="canvas:dragenter",n.CANVAS_DRAGLEAVE="canvas:dragleave",n.CANVAS_DRAGSTART="canvas:dragstart",n.CANVAS_DRAG="canvas:drag",n.CANVAS_DRAGEND="canvas:dragend",n.CANVAS_TAP="canvas:tap",n.CANVAS_PANSTART="canvas:panstart",n.CANVAS_PANMOVE="canvas:panmove",n.CANVAS_PANEND="canvas:panend",n.BEFORERENDER="beforerender",n.AFTERRENDER="afterrender",n.BEFOREADDITEM="beforeadditem",n.AFTERADDITEM="afteradditem",n.BEFOREREMOVEITEM="beforeremoveitem",n.AFTERREMOVEITEM="afterremoveitem",n.BEFOREUPDATEITEM="beforeupdateitem",n.AFTERUPDATEITEM="afterupdateitem",n.BEFOREITEMVISIBILITYCHANGE="beforeitemvisibilitychange",n.AFTERITEMVISIBILITYCHANGE="afteritemvisibilitychange",n.BEFOREITEMSTATECHANGE="beforeitemstatechange",n.AFTERITEMSTATECHANGE="afteritemstatechange",n.BEFOREITEMREFRESH="beforeitemrefresh",n.AFTERITEMREFRESH="afteritemrefresh",n.BEFOREITEMSTATESCLEAR="beforeitemstatesclear",n.AFTERITEMSTATESCLEAR="afteritemstatesclear",n.BEFOREMODECHANGE="beforemodechange",n.AFTERMODECHANGE="aftermodechange",n.BEFORELAYOUT="beforelayout",n.AFTERLAYOUT="afterlayout",n.BEFORECREATEEDGE="beforecreateedge",n.AFTERCREATEEDGE="aftercreateedge",n.BEFOREGRAPHREFRESHPOSITION="beforegraphrefreshposition",n.AFTERGRAPHREFRESHPOSITION="aftergraphrefreshposition",n.BEFOREGRAPHREFRESH="beforegraphrefresh",n.AFTERGRAPHREFRESH="aftergraphrefresh",n.BEFOREANIMATE="beforeanimate",n.AFTERANIMATE="afteranimate",n.BEFOREPAINT="beforepaint",n.AFTERPAINT="afterpaint",n.BEFORECOLLAPSEEXPANDCOMBO="beforecollapseexpandcombo",n.AFTERCOLLAPSEEXPANDCOMBO="aftercollapseexpandcombo",n.GRAPHSTATECHANGE="graphstatechange",n.AFTERACTIVATERELATIONS="afteractivaterelations",n.NODESELECTCHANGE="nodeselectchange",n.TOOLTIPCHANGE="tooltipchange",n.WHEELZOOM="wheelzoom",n.VIEWPORTCHANGE="viewportchange",n.DRAGNODEEND="dragnodeend",n.STACKCHANGE="stackchange",n.TAP="tap",n.PINCHSTART="pinchstart",n.PINCHMOVE="pinchmove",n.PANSTART="panstart",n.PANMOVE="panmove",n.PANEND="panend"})(Ly||(Ly={}));var Ll=Nu.registerNode,tI=Nu.registerEdge,RZ=Nu.registerCombo,eI=_A.registerBehavior,Sr=Rr,Fot={version:Rr.version,AbstractGraph:jT,BaseGlobal:Sr,Util:Jo,Shape:Nu,Node:Qb,Edge:OT,Combo:RT,Hull:HT,registerNode:Nu.registerNode,registerEdge:Nu.registerEdge,registerCombo:Nu.registerCombo,registerBehavior:_A.registerBehavior,Arrow:$T,Marker:QT,AbstractLayout:JT,AbstractEvent:qT},NZ=x(6578);function kZ(n,e,t){var r=[0,0,0,0,0,0,0,0,0];return ra.fromTranslation(r,t),ra.multiply(n,r,e)}function BZ(n,e,t){var r=[0,0,0,0,0,0,0,0,0];return ra.fromRotation(r,t),ra.multiply(n,r,e)}function FZ(n,e,t){var r=[0,0,0,0,0,0,0,0,0];return ra.fromScaling(r,t),ra.multiply(n,r,e)}function GZ(n,e,t){return ra.multiply(n,t,e)}function Ry(n,e){for(var t=n?[].concat(n):[1,0,0,0,1,0,0,0,1],r=0,i=e.length;r<i;r++){var a=e[r];switch(a[0]){case"t":kZ(t,t,[a[1],a[2]]);break;case"s":FZ(t,t,[a[1],a[2]]);break;case"r":BZ(t,t,a[1]);break;case"m":GZ(t,t,a[1]);break;default:break}}return t}function zZ(n,e){return n[0]*e[1]-e[0]*n[1]}function Got(n,e,t){var r=vec2.angle(n,e),i=zZ(n,e)>=0;return t?i?Math.PI*2-r:r:i?r:Math.PI*2-r}function zot(n,e,t){return t?(n[0]=e[1],n[1]=-1*e[0]):(n[0]=-1*e[1],n[1]=e[0]),n}var UZ=x(90112),Tg=x.n(UZ),WZ=x(29231),Ny=x.n(WZ),ky=2,rI=.16,VZ=.05,XZ=.05,YZ=.15,nI=5,iI=4,HZ=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function aI(n,e,t){var r;return Math.round(n.h)>=60&&Math.round(n.h)<=240?r=t?Math.round(n.h)-ky*e:Math.round(n.h)+ky*e:r=t?Math.round(n.h)+ky*e:Math.round(n.h)-ky*e,r<0?r+=360:r>=360&&(r-=360),r}function oI(n,e,t){if(n.h===0&&n.s===0)return n.s;var r;return t?r=n.s-rI*e:e===iI?r=n.s+rI:r=n.s+VZ*e,r>1&&(r=1),t&&e===nI&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2))}function sI(n,e,t){var r;return t?r=n.v+XZ*e:r=n.v-YZ*e,r>1&&(r=1),Number(r.toFixed(2))}function By(n){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],r=Ny()(n),i=nI;i>0;i-=1){var a=r.toHsv(),o=Ny()({h:aI(a,i,!0),s:oI(a,i,!0),v:sI(a,i,!0)}).toHexString();t.push(o)}t.push(r.toHexString());for(var s=1;s<=iI;s+=1){var l=r.toHsv(),u=Ny()({h:aI(l,s),s:oI(l,s),v:sI(l,s)}).toHexString();t.push(u)}return e.theme==="dark"?HZ.map(function(c){var f=c.index,h=c.opacity,d=Ny().mix(e.backgroundColor||"#141414",t[f],h*100).toHexString();return d}):t}var a_={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Ya={},o_={};Object.keys(a_).forEach(function(n){Ya[n]=By(a_[n]),Ya[n].primary=Ya[n][5],o_[n]=By(a_[n],{theme:"dark",backgroundColor:"#141414"}),o_[n].primary=o_[n][5]});var Uot=Ya.red,Wot=Ya.volcano,Vot=Ya.gold,Xot=Ya.orange,Yot=Ya.yellow,Hot=Ya.lime,jot=Ya.green,Zot=Ya.cyan,Kot=Ya.blue,$ot=Ya.geekblue,Qot=Ya.purple,Jot=Ya.magenta,qot=Ya.grey,da=function(e,t,r){var i=Tg()(e),a=Tg()(t);return Tg()([(1-r)*i.red()+r*a.red(),(1-r)*i.green()+r*a.green(),(1-r)*i.blue()+r*a.blue()]).rgb()},jZ=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="rgb(150, 150, 150)");var i=da(t,e,.05).rgb().toString(),a=da(t,e,.1).rgb().toString(),o=da(t,e,.2).rgb().toString(),s=da(t,e,.4).rgb().toString(),l=da(t,r,.02).rgb().toString(),u=da(t,r,.05).rgb().toString(),c=da(t,r,.1).rgb().toString(),f=da(t,r,.2).rgb().toString(),h=da(t,r,.3).rgb().toString(),d=By(e,{theme:"default",backgroundColor:t}),g=Tg()(e).hex().toLowerCase(),p=d.indexOf(g),m=e;return p!==-1&&(m=d[p+1]),{mainStroke:e,mainFill:a,activeStroke:e,activeFill:i,inactiveStroke:s,inactiveFill:i,selectedStroke:e,selectedFill:t,highlightStroke:m,highlightFill:o,disableStroke:h,disableFill:u,edgeMainStroke:h,edgeActiveStroke:e,edgeInactiveStroke:f,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:h,comboMainFill:l,comboActiveStroke:e,comboActiveFill:i,comboInactiveStroke:h,comboInactiveFill:l,comboSelectedStroke:e,comboSelectedFill:l,comboHighlightStroke:m,comboHighlightFill:l,comboDisableStroke:f,comboDisableFill:u}},ZZ=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="#777");var i=da(t,e,.2).rgb().toString(),a=da(t,e,.3).rgb().toString(),o=da(t,e,.6).rgb().toString(),s=da(t,e,.8).rgb().toString(),l=da(t,r,.2).rgb().toString(),u=da(t,r,.25).rgb().toString(),c=da(t,r,.3).rgb().toString(),f=da(t,r,.4).rgb().toString(),h=da(t,r,.5).rgb().toString(),d=By(e,{theme:"dark",backgroundColor:t}),g=Tg()(e).hex().toLowerCase(),p=d.indexOf(g),m=e;return p!==-1&&(m=d[p+1]),{mainStroke:s,mainFill:i,activeStroke:e,activeFill:a,inactiveStroke:s,inactiveFill:i,selectedStroke:e,selectedFill:i,highlightStroke:e,highlightFill:o,disableStroke:h,disableFill:u,edgeMainStroke:r,edgeActiveStroke:e,edgeInactiveStroke:r,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:f,comboMainFill:u,comboActiveStroke:e,comboActiveFill:l,comboInactiveStroke:f,comboInactiveFill:u,comboSelectedStroke:e,comboSelectedFill:l,comboHighlightStroke:m,comboHighlightFill:u,comboDisableStroke:f,comboDisableFill:l}},s_=function(e,t,r,i){return t===void 0&&(t="#fff"),r===void 0&&(r="default"),i===void 0&&(i="rgb(150, 150, 150)"),r==="default"?jZ(e,t,"rgb(150, 150, 150)"):ZZ(e,t,"#777")},KZ=function(e,t,r,i){t===void 0&&(t="#fff"),r===void 0&&(r="default"),i===void 0&&(i="rgb(150, 150, 150)");var a=[];return e.forEach(function(o){a.push(s_(o,t,r,i))}),a},$Z="rgb(95, 149, 255)",QZ="rgb(255, 255, 255)",lI="rgb(0, 0, 0)",Sn=s_($Z,QZ),sf={version:"0.3.4",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Sn.mainStroke,fill:Sn.mainFill},size:20,color:Sn.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Sn.activeFill,stroke:Sn.activeStroke}},nodeStateStyles:{active:{fill:Sn.activeFill,stroke:Sn.activeStroke,lineWidth:2,shadowColor:Sn.mainStroke,shadowBlur:10},selected:{fill:Sn.selectedFill,stroke:Sn.selectedStroke,lineWidth:4,shadowColor:Sn.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Sn.highlightFill,stroke:Sn.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Sn.inactiveFill,stroke:Sn.inactiveStroke,lineWidth:1},disable:{fill:Sn.disableFill,stroke:Sn.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:lI,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Sn.edgeMainStroke,lineAppendWidth:2},color:Sn.edgeMainStroke},edgeStateStyles:{active:{stroke:Sn.edgeActiveStroke,lineWidth:1},selected:{stroke:Sn.edgeSelectedStroke,lineWidth:2,shadowColor:Sn.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Sn.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Sn.edgeInactiveStroke,lineWidth:1},disable:{stroke:Sn.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:lI,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Sn.comboMainFill,lineWidth:1,stroke:Sn.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Sn.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Sn.comboActiveStroke,lineWidth:1,fill:Sn.comboActiveFill},selected:{stroke:Sn.comboSelectedStroke,lineWidth:2,fill:Sn.comboSelectedFill,shadowColor:Sn.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Sn.comboHighlightStroke,lineWidth:2,fill:Sn.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Sn.comboInactiveStroke,fill:Sn.comboInactiveFill,lineWidth:1},disable:{stroke:Sn.comboDisableStroke,fill:Sn.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"},JZ=Jo.cloneEvent,qZ=Jo.isViewportChanged,tK=function(n){(0,b.__extends)(e,n);function e(t){var r=n.call(this,t)||this;return r.extendEvents=[],r.dragging=!1,r.preItem=null,r.graph=t,r.destroyed=!1,r.initEvents(),r}return e.prototype.initEvents=function(){var t=this,r=t.graph,i=t.extendEvents,a=i===void 0?[]:i,o=r.get("canvas"),s=o.get("el"),l=(0,v.wrapBehavior)(this,"onCanvasEvents"),u=(0,v.wrapBehavior)(this,"onExtendEvents"),c=(0,v.wrapBehavior)(this,"onWheelEvent");o.off("*").on("*",l),this.canvasHandler=l,a.push(fs(s,"DOMMouseScroll",c)),a.push(fs(s,"mousewheel",c)),typeof window!="undefined"&&(a.push(fs(window,"keydown",u)),a.push(fs(window,"keyup",u)),a.push(fs(window,"focus",u)))},e.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},e.prototype.onCanvasEvents=function(t){var r=this.graph,i=r.get("canvas"),a=t.target,o=t.type;t.canvasX=t.x,t.canvasY=t.y;var s={x:t.canvasX,y:t.canvasY},l=r.get("group"),u=l.getMatrix();if(u||(u=[1,0,0,0,1,0,0,0,1]),qZ(u)&&(s=r.getPointByClient(t.clientX,t.clientY)),t.x=s.x,t.y=s.y,t.currentTarget=r,a===i){(o==="mousemove"||o==="mouseleave")&&this.handleMouseMove(t,"canvas"),t.target=i,t.item=null,r.emit(o,t),r.emit("canvas:"+o,t);return}var c=e.getItemRoot(a);if(!c){r.emit(o,t);return}var f=c.get("item");if(!f.destroyed){var h=f.getType();if(t.target=a,t.item=f,t.canvasX===t.x&&t.canvasY===t.y){var d=r.getCanvasByPoint(t.x,t.y);t.canvasX=d.x,t.canvasY=d.y}r.emit(o,t),t.name&&!t.name.includes(":")?r.emit(h+":"+o,t):r.emit(t.name,t),o==="dragstart"&&(this.dragging=!0),o==="dragend"&&(this.dragging=!1),o==="mousemove"&&this.handleMouseMove(t,h)}},e.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},e.prototype.onWheelEvent=function(t){(0,v.isNil)(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},e.prototype.handleMouseMove=function(t,r){var i=this,a=i.graph,o=i.preItem,s=a.get("canvas"),l=t.target===s?null:t.item;t=JZ(t),o&&o!==l&&!o.destroyed&&(t.item=o,this.emitCustomEvent(o.getType(),"mouseleave",t),this.dragging&&this.emitCustomEvent(o.getType(),"dragleave",t)),l&&o!==l&&(t.item=l,this.emitCustomEvent(r,"mouseenter",t),this.dragging&&this.emitCustomEvent(r,"dragenter",t)),this.preItem=l},e.prototype.emitCustomEvent=function(t,r,i){i.type=r,this.graph.emit(t+":"+r,i)},e.prototype.destroy=function(){var t=this,r=t.graph,i=t.canvasHandler,a=t.extendEvents,o=r.get("canvas");o.off("*",i),(0,v.each)(a,function(s){s.remove()}),this.dragging=!1,this.preItem=null,this.extendEvents.length=0,this.canvasHandler=null,this.destroyed=!0},e}(qT),eK=tK;class ro{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(e){return this.init(e),this.execute(!0)}init(e){this.nodes=e.nodes||[],this.edges=e.edges||[],this.combos=e.combos||[]}execute(e){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(e){e&&Object.assign(this,e)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}const Ig=n=>typeof n=="string",rK=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},nK=/-(\w)/g,tst=rK(n=>n.replace(nK,(e,t)=>t?t.toUpperCase():"")),Ia=Array.isArray,Mr=n=>typeof n=="number",Fy=n=>Number.isNaN(Number(n)),est=n=>{const e=parseFloat(n);return Fy(e)?n:e},Og=(n,e,t)=>{const r=[];for(let i=0;i<n;i++)r[i]=0;return t&&t.forEach(i=>{i.source&&(r[e[i.source]]+=1),i.target&&(r[e[i.target]]+=1)}),r},uI=n=>{const e=[],t=n.length;for(let r=0;r<t;r+=1){e[r]=[];for(let i=0;i<t;i+=1)r===i?e[r][i]=0:n[r][i]===0||!n[r][i]?e[r][i]=Infinity:e[r][i]=n[r][i]}for(let r=0;r<t;r+=1)for(let i=0;i<t;i+=1)for(let a=0;a<t;a+=1)e[i][a]>e[i][r]+e[r][a]&&(e[i][a]=e[i][r]+e[r][a]);return e},cI=(n,e)=>{const{nodes:t,edges:r}=n,i=[],a={};if(!t)throw new Error("invalid nodes data!");return t&&t.forEach((o,s)=>{a[o.id]=s;const l=[];i.push(l)}),r&&r.forEach(o=>{const{source:s,target:l}=o,u=a[s],c=a[l];i[u][c]=1,e||(i[c][u]=1)}),i},iK=(n,e)=>{const t=[];return n.forEach(r=>{const i=[];r.forEach(a=>{i.push(a*e)}),t.push(i)}),t},fI=(n,e)=>{if(n&&n.children){for(let t=n.children.length-1;t>=0;t--)if(!fI(n.children[t],e))return}return!!e(n)},Gy=(n,e)=>{typeof e=="function"&&fI(n,e)},aK=n=>n!==null&&typeof n=="object",l_=n=>{if(n===null)return n;if(n instanceof Date)return new Date(n.getTime());if(n instanceof Array){const e=[];return n.forEach(t=>{e.push(t)}),e.map(t=>l_(t))}if(typeof n=="object"&&n!=={}){const e=Object.assign({},n);return Object.keys(e).forEach(t=>{e[t]=l_(e[t])}),e}return n},ku=n=>typeof n=="function",lf=new Map,Ha=(n,e)=>{if(lf.get(n)&&console.warn(`The layout with the name ${n} exists already, it will be overridden`),aK(e)){class t extends ro{constructor(i){super();const a=this,o={},s=a.getDefaultCfg();Object.assign(o,s,e,i),Object.keys(o).forEach(l=>{const u=o[l];a[l]=u})}}lf.set(n,t)}else lf.set(n,e)},rst=n=>{lf.has(n)&&lf.delete(n)},oK=n=>lf.has(n)?lf.get(n):null;class sK extends ro{constructor(e){super();this.begin=[0,0],this.preventOverlap=!0,this.preventOverlapPadding=10,this.condense=!1,this.sortBy="degree",this.nodeSize=30,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.row=0,this.col=0,this.cellWidth=0,this.cellHeight=0,this.cellUsed={},this.id2manPos={},this.onLayoutEnd=()=>{},this.updateCfg(e)}getDefaultCfg(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}execute(){const e=this,t=e.nodes,r=t.length,i=e.begin;if(r===0){e.onLayoutEnd&&e.onLayoutEnd();return}if(r===1){t[0].x=i[0],t[0].y=i[1],e.onLayoutEnd&&e.onLayoutEnd();return}const a=e.edges,o=[];t.forEach(c=>{o.push(c)});const s={};if(o.forEach((c,f)=>{s[c.id]=f}),(e.sortBy==="degree"||!Ig(e.sortBy)||o[0][e.sortBy]===void 0)&&(e.sortBy="degree",Fy(t[0].degree))){const c=Og(o.length,s,a);o.forEach((f,h)=>{f.degree=c[h]})}o.sort((c,f)=>f[e.sortBy]-c[e.sortBy]),!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight);const l=e.rows,u=e.cols!=null?e.cols:e.columns;if(e.cells=r,l!=null&&u!=null?(e.rows=l,e.cols=u):l!=null&&u==null?(e.rows=l,e.cols=Math.ceil(e.cells/e.rows)):l==null&&u!=null?(e.cols=u,e.rows=Math.ceil(e.cells/e.cols)):(e.splits=Math.sqrt(e.cells*e.height/e.width),e.rows=Math.round(e.splits),e.cols=Math.round(e.width/e.height*e.splits)),e.cols*e.rows>e.cells){const c=e.small(),f=e.large();(c-1)*f>=e.cells?e.small(c-1):(f-1)*c>=e.cells&&e.large(f-1)}else for(;e.cols*e.rows<e.cells;){const c=e.small(),f=e.large();(f+1)*c>=e.cells?e.large(f+1):e.small(c+1)}e.cellWidth=e.width/e.cols,e.cellHeight=e.height/e.rows,e.condense&&(e.cellWidth=0,e.cellHeight=0),e.preventOverlap&&o.forEach(c=>{(!c.x||!c.y)&&(c.x=0,c.y=0);let f,h;Ia(c.size)?(f=c.size[0],h=c.size[1]):Mr(c.size)&&(f=c.size,h=c.size),(f===void 0||h===void 0)&&(Ia(e.nodeSize)?(f=e.nodeSize[0],h=e.nodeSize[1]):Mr(e.nodeSize)?(f=e.nodeSize,h=e.nodeSize):(f=30,h=30));const d=e.preventOverlapPadding,g=f+d,p=h+d;e.cellWidth=Math.max(e.cellWidth,g),e.cellHeight=Math.max(e.cellHeight,p)}),e.cellUsed={},e.row=0,e.col=0,e.id2manPos={};for(let c=0;c<o.length;c++){const f=o[c];let h;if(e.position&&(h=e.position(f)),h&&(h.row!==void 0||h.col!==void 0)){const d={row:h.row,col:h.col};if(d.col===void 0)for(d.col=0;e.used(d.row,d.col);)d.col++;else if(d.row===void 0)for(d.row=0;e.used(d.row,d.col);)d.row++;e.id2manPos[f.id]=d,e.use(d.row,d.col)}e.getPos(f)}return e.onLayoutEnd&&e.onLayoutEnd(),{edges:a,nodes:o}}small(e){const t=this;let r;const i=t.rows||5,a=t.cols||5;return e==null?r=Math.min(i,a):Math.min(i,a)===t.rows?t.rows=e:t.cols=e,r}large(e){const t=this;let r;const i=t.rows||5,a=t.cols||5;return e==null?r=Math.max(i,a):Math.max(i,a)===t.rows?t.rows=e:t.cols=e,r}used(e,t){return this.cellUsed[`c-${e}-${t}`]||!1}use(e,t){const r=this;r.cellUsed[`c-${e}-${t}`]=!0}moveToNextCell(){const e=this,t=e.cols||5;e.col++,e.col>=t&&(e.col=0,e.row++)}getPos(e){const t=this,r=t.begin,i=t.cellWidth,a=t.cellHeight;let o,s;const l=t.id2manPos[e.id];if(l)o=l.col*i+i/2+r[0],s=l.row*a+a/2+r[1];else{for(;t.used(t.row,t.col);)t.moveToNextCell();o=t.col*i+i/2+r[0],s=t.row*a+a/2+r[1],t.use(t.row,t.col),t.moveToNextCell()}e.x=o,e.y=s}getType(){return"grid"}}class lK extends ro{constructor(e){super();this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(e)}getDefaultCfg(){return{center:[0,0],width:300,height:300}}execute(){const e=this,t=e.nodes,r=.9,i=e.center;return!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight),t&&t.forEach(a=>{a.x=(Math.random()-.5)*r*e.width+i[0],a.y=(Math.random()-.5)*r*e.height+i[1]}),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:this.edges}}getType(){return"random"}}const u_=(n,e)=>{let t;return n?Mr(n)?t=r=>n:t=n:t=r=>e||1,t};class uK extends ro{constructor(e){super();this.maxIteration=1e3,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.preventOverlap=!0,this.tick=()=>{},this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(e)}getDefaultCfg(){return{maxIteration:500,gravity:10,enableTick:!0}}execute(){const e=this,t=e.nodes;if(e.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(e.timeInterval),!t||t.length===0){e.onLayoutEnd&&e.onLayoutEnd();return}!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);const r=e.center;if(t.length===1){t[0].x=r[0],t[0].y=r[1],e.onLayoutEnd&&e.onLayoutEnd();return}const i={},a={};t.forEach((u,c)=>{Mr(u.x)||(u.x=Math.random()*e.width),Mr(u.y)||(u.y=Math.random()*e.height),i[u.id]=u,a[u.id]=c}),e.nodeMap=i,e.nodeIdxMap=a,e.linkDistance=u_(e.linkDistance,1),e.nodeStrength=u_(e.nodeStrength,1),e.edgeStrength=u_(e.edgeStrength,1);const o=e.nodeSize;let s;if(e.preventOverlap){const u=e.nodeSpacing;let c;Mr(u)?c=()=>u:ku(u)?c=u:c=()=>0,o?Ia(o)?s=f=>(o[0]>o[1]?o[0]:o[1])+c(f):s=f=>o+c(f):s=f=>f.size?Ia(f.size)?(f.size[0]>f.size[1]?f.size[0]:f.size[1])+c(f):f.size+c(f):10+c(f)}e.nodeSize=s;const l=e.edges;e.degrees=Og(t.length,e.nodeIdxMap,l),e.getMass||(e.getMass=u=>e.degrees[e.nodeIdxMap[u.id]]||1),e.run()}run(){const e=this,t=e.nodes,r=e.edges,i=e.maxIteration;if(typeof window=="undefined")return;let a=0;this.timeInterval=window.setInterval(()=>{const o=[],s=[];if(!t)return;t.forEach((f,h)=>{o[2*h]=0,o[2*h+1]=0,s[2*h]=0,s[2*h+1]=0}),e.calRepulsive(o,t),r&&e.calAttractive(o,r),e.calGravity(o,t);const l=Math.max(.02,e.interval-a*.002);e.updateVelocity(o,s,l,t);const u=[];t.forEach(f=>{u.push({x:f.x,y:f.y})}),e.updatePosition(s,l,t),e.tick&&e.tick();let c=0;t.forEach((f,h)=>{const d=f.x-u[h].x,g=f.y-u[h].y;c+=Math.sqrt(d*d+g*g)}),c/=t.length,c<e.minMovement&&(window.clearInterval(e.timeInterval),e.onLayoutEnd&&e.onLayoutEnd()),a++,a>=i&&(e.onLayoutEnd&&e.onLayoutEnd(),window.clearInterval(e.timeInterval))},0)}calRepulsive(e,t){const r=this,i=r.getMass,a=r.nodeStrength,o=r.factor,s=r.coulombDisScale,l=r.preventOverlap,u=r.nodeSize;t.forEach((c,f)=>{const h=i?i(c):1;t.forEach((d,g)=>{if(f>=g)return;const p=c.x-d.x,m=c.y-d.y,_=Math.sqrt(p*p+m*m)+.01,S=(_+.1)*s,M=p/_,R=m/_,F=(a(c)+a(d))/2*o/(S*S),V=i?i(d):1;if(e[2*f]+=M*F,e[2*f+1]+=R*F,e[2*g]-=M*F,e[2*g+1]-=R*F,l&&_<(u(c)+u(d))/2){const nt=(a(c)+a(d))/2/(_*_);e[2*f]+=M*nt/h,e[2*f+1]+=R*nt/h,e[2*g]-=M*nt/V,e[2*g+1]-=R*nt/V}})})}calAttractive(e,t){const r=this,i=r.nodeMap,a=r.nodeIdxMap,o=r.linkDistance,s=r.edgeStrength,l=r.getMass;t.forEach((u,c)=>{const f=i[u.source],h=i[u.target],d=h.x-f.x,g=h.y-f.y,p=Math.sqrt(d*d+g*g)+.01,m=d/p,_=g/p,R=((o(u)||1)-p)*s(u),F=a[u.source],V=a[u.target],nt=l?l(f):1,at=l?l(h):1;e[2*F]-=m*R/nt,e[2*F+1]-=_*R/nt,e[2*V]+=m*R/at,e[2*V+1]+=_*R/at})}calGravity(e,t){const r=this,i=r.center,a=r.gravity,o=r.degrees,s=t.length;for(let l=0;l<s;l++){const u=t[l];let c=u.x-i[0],f=u.y-i[1],h=a;if(r.getCenter){const d=r.getCenter(u,o[l]);d&&Mr(d[0])&&Mr(d[1])&&Mr(d[2])&&(c=u.x-d[0],f=u.y-d[1],h=d[2])}!h||(e[2*l]-=h*c,e[2*l+1]-=h*f)}}updateVelocity(e,t,r,i){const a=this,o=r*a.damping;i.forEach((s,l)=>{let u=e[2*l]*o||.01,c=e[2*l+1]*o||.01;const f=Math.sqrt(u*u+c*c);if(f>a.maxSpeed){const h=a.maxSpeed/f;u=h*u,c=h*c}t[2*l]=u,t[2*l+1]=c})}updatePosition(e,t,r){r.forEach((i,a)=>{if(Mr(i.fx)&&Mr(i.fy)){i.x=i.fx,i.y=i.fy;return}const o=e[2*a]*t,s=e[2*a+1]*t;i.x+=o,i.y+=s})}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}destroy(){const e=this;e.stop(),e.tick=null,e.nodes=null,e.edges=null,e.destroyed=!0}getType(){return"gForce"}}function cK(n){const e=+this._x.call(null,n),t=+this._y.call(null,n);return hI(this.cover(e,t),e,t,n)}function hI(n,e,t,r){if(isNaN(e)||isNaN(t))return n;var i,a=n._root,o={data:r},s=n._x0,l=n._y0,u=n._x1,c=n._y1,f,h,d,g,p,m,_,S;if(!a)return n._root=o,n;for(;a.length;)if((p=e>=(f=(s+u)/2))?s=f:u=f,(m=t>=(h=(l+c)/2))?l=h:c=h,i=a,!(a=a[_=m<<1|p]))return i[_]=o,n;if(d=+n._x.call(null,a.data),g=+n._y.call(null,a.data),e===d&&t===g)return o.next=a,i?i[_]=o:n._root=o,n;do i=i?i[_]=new Array(4):n._root=new Array(4),(p=e>=(f=(s+u)/2))?s=f:u=f,(m=t>=(h=(l+c)/2))?l=h:c=h;while((_=m<<1|p)==(S=(g>=h)<<1|d>=f));return i[S]=a,i[_]=o,n}function fK(n){var e,t,r=n.length,i,a,o=new Array(r),s=new Array(r),l=Infinity,u=Infinity,c=-Infinity,f=-Infinity;for(t=0;t<r;++t)isNaN(i=+this._x.call(null,e=n[t]))||isNaN(a=+this._y.call(null,e))||(o[t]=i,s[t]=a,i<l&&(l=i),i>c&&(c=i),a<u&&(u=a),a>f&&(f=a));if(l>c||u>f)return this;for(this.cover(l,u).cover(c,f),t=0;t<r;++t)hI(this,o[t],s[t],n[t]);return this}function hK(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var t=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(t))i=(t=Math.floor(n))+1,a=(r=Math.floor(e))+1;else{for(var o=i-t||1,s=this._root,l,u;t>n||n>=i||r>e||e>=a;)switch(u=(e<r)<<1|n<t,l=new Array(4),l[u]=s,s=l,o*=2,u){case 0:i=t+o,a=r+o;break;case 1:t=i-o,a=r+o;break;case 2:i=t+o,r=a-o;break;case 3:t=i-o,r=a-o;break}this._root&&this._root.length&&(this._root=s)}return this._x0=t,this._y0=r,this._x1=i,this._y1=a,this}function dK(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function vK(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function no(n,e,t,r,i){this.node=n,this.x0=e,this.y0=t,this.x1=r,this.y1=i}function gK(n,e,t){var r,i=this._x0,a=this._y0,o,s,l,u,c=this._x1,f=this._y1,h=[],d=this._root,g,p;for(d&&h.push(new no(d,i,a,c,f)),t==null?t=Infinity:(i=n-t,a=e-t,c=n+t,f=e+t,t*=t);g=h.pop();)if(!(!(d=g.node)||(o=g.x0)>c||(s=g.y0)>f||(l=g.x1)<i||(u=g.y1)<a))if(d.length){var m=(o+l)/2,_=(s+u)/2;h.push(new no(d[3],m,_,l,u),new no(d[2],o,_,m,u),new no(d[1],m,s,l,_),new no(d[0],o,s,m,_)),(p=(e>=_)<<1|n>=m)&&(g=h[h.length-1],h[h.length-1]=h[h.length-1-p],h[h.length-1-p]=g)}else{var S=n-+this._x.call(null,d.data),M=e-+this._y.call(null,d.data),R=S*S+M*M;if(R<t){var F=Math.sqrt(t=R);i=n-F,a=e-F,c=n+F,f=e+F,r=d.data}}return r}function pK(n){if(isNaN(c=+this._x.call(null,n))||isNaN(f=+this._y.call(null,n)))return this;var e,t=this._root,r,i,a,o=this._x0,s=this._y0,l=this._x1,u=this._y1,c,f,h,d,g,p,m,_;if(!t)return this;if(t.length)for(;;){if((g=c>=(h=(o+l)/2))?o=h:l=h,(p=f>=(d=(s+u)/2))?s=d:u=d,e=t,!(t=t[m=p<<1|g]))return this;if(!t.length)break;(e[m+1&3]||e[m+2&3]||e[m+3&3])&&(r=e,_=m)}for(;t.data!==n;)if(i=t,!(t=t.next))return this;return(a=t.next)&&delete t.next,i?(a?i.next=a:delete i.next,this):e?(a?e[m]=a:delete e[m],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(r?r[_]=t:this._root=t),this):(this._root=a,this)}function yK(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function mK(){return this._root}function xK(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function bK(n){var e=[],t,r=this._root,i,a,o,s,l;for(r&&e.push(new no(r,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!n(r=t.node,a=t.x0,o=t.y0,s=t.x1,l=t.y1)&&r.length){var u=(a+s)/2,c=(o+l)/2;(i=r[3])&&e.push(new no(i,u,c,s,l)),(i=r[2])&&e.push(new no(i,a,c,u,l)),(i=r[1])&&e.push(new no(i,u,o,s,c)),(i=r[0])&&e.push(new no(i,a,o,u,c))}return this}function _K(n){var e=[],t=[],r;for(this._root&&e.push(new no(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var a,o=r.x0,s=r.y0,l=r.x1,u=r.y1,c=(o+l)/2,f=(s+u)/2;(a=i[0])&&e.push(new no(a,o,s,c,f)),(a=i[1])&&e.push(new no(a,c,s,l,f)),(a=i[2])&&e.push(new no(a,o,f,c,u)),(a=i[3])&&e.push(new no(a,c,f,l,u))}t.push(r)}for(;r=t.pop();)n(r.node,r.x0,r.y0,r.x1,r.y1);return this}function SK(n){return n[0]}function EK(n){return arguments.length?(this._x=n,this):this._x}function wK(n){return n[1]}function CK(n){return arguments.length?(this._y=n,this):this._y}function c_(n,e,t){var r=new f_(e==null?SK:e,t==null?wK:t,NaN,NaN,NaN,NaN);return n==null?r:r.addAll(n)}function f_(n,e,t,r,i,a){this._x=n,this._y=e,this._x0=t,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function dI(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var io=c_.prototype=f_.prototype;io.copy=function(){var n=new f_(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,t,r;if(!e)return n;if(!e.length)return n._root=dI(e),n;for(t=[{source:e,target:n._root=new Array(4)}];e=t.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?t.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=dI(r));return n},io.add=cK,io.addAll=fK,io.cover=hK,io.data=dK,io.extent=vK,io.find=gK,io.remove=pK,io.removeAll=yK,io.root=mK,io.size=xK,io.visit=bK,io.visitAfter=_K,io.x=EK,io.y=CK;function ao(n){return function(){return n}}function Bu(n){return(n()-.5)*1e-6}var MK={value:function(){}};function vI(){for(var n=0,e=arguments.length,t={},r;n<e;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new zy(t)}function zy(n){this._=n}function AK(n,e){return n.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");if(i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}zy.prototype=vI.prototype={constructor:zy,on:function(e,t){var r=this._,i=AK(e+"",r),a,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((a=(e=i[o]).type)&&(a=TK(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(a=(e=i[o]).type)r[a]=gI(r[a],e.name,t);else if(t==null)for(a in r)r[a]=gI(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new zy(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),i=0,a,o;i<a;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],i=0,a=o.length;i<a;++i)o[i].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],a=0,o=i.length;a<o;++a)i[a].value.apply(t,r)}};function TK(n,e){for(var t=0,r=n.length,i;t<r;++t)if((i=n[t]).name===e)return i.value}function gI(n,e,t){for(var r=0,i=n.length;r<i;++r)if(n[r].name===e){n[r]=MK,n=n.slice(0,r).concat(n.slice(r+1));break}return t!=null&&n.push({name:e,value:t}),n}var IK=vI,$h=0,Pg=0,Dg=0,pI=1e3,Uy,Lg,Wy=0,uf=0,Vy=0,Rg=typeof performance=="object"&&performance.now?performance:Date,yI=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function mI(){return uf||(yI(OK),uf=Rg.now()+Vy)}function OK(){uf=0}function h_(){this._call=this._time=this._next=null}h_.prototype=xI.prototype={constructor:h_,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?mI():+t)+(e==null?0:+e),!this._next&&Lg!==this&&(Lg?Lg._next=this:Uy=this,Lg=this),this._call=n,this._time=t,d_()},stop:function(){this._call&&(this._call=null,this._time=Infinity,d_())}};function xI(n,e,t){var r=new h_;return r.restart(n,e,t),r}function PK(){mI(),++$h;for(var n=Uy,e;n;)(e=uf-n._time)>=0&&n._call.call(null,e),n=n._next;--$h}function bI(){uf=(Wy=Rg.now())+Vy,$h=Pg=0;try{PK()}finally{$h=0,LK(),uf=0}}function DK(){var n=Rg.now(),e=n-Wy;e>pI&&(Vy-=e,Wy=n)}function LK(){for(var n,e=Uy,t,r=Infinity;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:Uy=t);Lg=n,d_(r)}function d_(n){if(!$h){Pg&&(Pg=clearTimeout(Pg));var e=n-uf;e>24?(n<Infinity&&(Pg=setTimeout(bI,n-Rg.now()-Vy)),Dg&&(Dg=clearInterval(Dg))):(Dg||(Wy=Rg.now(),Dg=setInterval(DK,pI)),$h=1,yI(bI))}}var RK=1664525,NK=1013904223,_I=4294967296;function kK(){var n=1;return function(){return(n=(RK*n+NK)%_I)/_I}}function BK(n){return n.x}function FK(n){return n.y}var GK=10,zK=Math.PI*(3-Math.sqrt(5));function SI(n){var e,t=1,r=.001,i=1-Math.pow(r,1/300),a=0,o=.6,s=new Map,l=xI(f),u=IK("tick","end"),c=kK();n==null&&(n=[]);function f(){h(),u.call("tick",e),t<r&&(l.stop(),u.call("end",e))}function h(p){var m,_=n.length,S;p===void 0&&(p=1);for(var M=0;M<p;++M)for(t+=(a-t)*i,s.forEach(function(R){R(t)}),m=0;m<_;++m)S=n[m],S.fx==null?S.x+=S.vx*=o:(S.x=S.fx,S.vx=0),S.fy==null?S.y+=S.vy*=o:(S.y=S.fy,S.vy=0);return e}function d(){for(var p=0,m=n.length,_;p<m;++p){if(_=n[p],_.index=p,_.fx!=null&&(_.x=_.fx),_.fy!=null&&(_.y=_.fy),isNaN(_.x)||isNaN(_.y)){var S=GK*Math.sqrt(.5+p),M=p*zK;_.x=S*Math.cos(M),_.y=S*Math.sin(M)}(isNaN(_.vx)||isNaN(_.vy))&&(_.vx=_.vy=0)}}function g(p){return p.initialize&&p.initialize(n,c),p}return d(),e={tick:h,restart:function(){return l.restart(f),e},stop:function(){return l.stop(),e},nodes:function(m){return arguments.length?(n=m,d(),s.forEach(g),e):n},alpha:function(m){return arguments.length?(t=+m,e):t},alphaMin:function(m){return arguments.length?(r=+m,e):r},alphaDecay:function(m){return arguments.length?(i=+m,e):+i},alphaTarget:function(m){return arguments.length?(a=+m,e):a},velocityDecay:function(m){return arguments.length?(o=1-m,e):1-o},randomSource:function(m){return arguments.length?(c=m,s.forEach(g),e):c},force:function(m,_){return arguments.length>1?(_==null?s.delete(m):s.set(m,g(_)),e):s.get(m)},find:function(m,_,S){var M=0,R=n.length,F,V,nt,at,xt;for(S==null?S=Infinity:S*=S,M=0;M<R;++M)at=n[M],F=m-at.x,V=_-at.y,nt=F*F+V*V,nt<S&&(xt=at,S=nt);return xt},on:function(m,_){return arguments.length>1?(u.on(m,_),e):u.on(m)}}}function EI(){var n,e,t,r,i=ao(-30),a,o=1,s=Infinity,l=.81;function u(d){var g,p=n.length,m=c_(n,BK,FK).visitAfter(f);for(r=d,g=0;g<p;++g)e=n[g],m.visit(h)}function c(){if(!!n){var d,g=n.length,p;for(a=new Array(g),d=0;d<g;++d)p=n[d],a[p.index]=+i(p,d,n)}}function f(d){var g=0,p,m,_=0,S,M,R;if(d.length){for(S=M=R=0;R<4;++R)(p=d[R])&&(m=Math.abs(p.value))&&(g+=p.value,_+=m,S+=m*p.x,M+=m*p.y);d.x=S/_,d.y=M/_}else{p=d,p.x=p.data.x,p.y=p.data.y;do g+=a[p.data.index];while(p=p.next)}d.value=g}function h(d,g,p,m){if(!d.value)return!0;var _=d.x-e.x,S=d.y-e.y,M=m-g,R=_*_+S*S;if(M*M/l<R)return R<s&&(_===0&&(_=Bu(t),R+=_*_),S===0&&(S=Bu(t),R+=S*S),R<o&&(R=Math.sqrt(o*R)),e.vx+=_*d.value*r/R,e.vy+=S*d.value*r/R),!0;if(d.length||R>=s)return;(d.data!==e||d.next)&&(_===0&&(_=Bu(t),R+=_*_),S===0&&(S=Bu(t),R+=S*S),R<o&&(R=Math.sqrt(o*R)));do d.data!==e&&(M=a[d.data.index]*r/R,e.vx+=_*M,e.vy+=S*M);while(d=d.next)}return u.initialize=function(d,g){n=d,t=g,c()},u.strength=function(d){return arguments.length?(i=typeof d=="function"?d:ao(+d),c(),u):i},u.distanceMin=function(d){return arguments.length?(o=d*d,u):Math.sqrt(o)},u.distanceMax=function(d){return arguments.length?(s=d*d,u):Math.sqrt(s)},u.theta=function(d){return arguments.length?(l=d*d,u):Math.sqrt(l)},u}function UK(n,e){var t,r=1;n==null&&(n=0),e==null&&(e=0);function i(){var a,o=t.length,s,l=0,u=0;for(a=0;a<o;++a)s=t[a],l+=s.x,u+=s.y;for(l=(l/o-n)*r,u=(u/o-e)*r,a=0;a<o;++a)s=t[a],s.x-=l,s.y-=u}return i.initialize=function(a){t=a},i.x=function(a){return arguments.length?(n=+a,i):n},i.y=function(a){return arguments.length?(e=+a,i):e},i.strength=function(a){return arguments.length?(r=+a,i):r},i}function WK(n){return n.index}function wI(n,e){var t=n.get(e);if(!t)throw new Error("node not found: "+e);return t}function v_(n){var e=WK,t=f,r,i=ao(30),a,o,s,l,u,c=1;n==null&&(n=[]);function f(m){return 1/Math.min(s[m.source.index],s[m.target.index])}function h(m){for(var _=0,S=n.length;_<c;++_)for(var M=0,R,F,V,nt,at,xt,gt;M<S;++M)R=n[M],F=R.source,V=R.target,nt=V.x+V.vx-F.x-F.vx||Bu(u),at=V.y+V.vy-F.y-F.vy||Bu(u),xt=Math.sqrt(nt*nt+at*at),xt=(xt-a[M])/xt*m*r[M],nt*=xt,at*=xt,V.vx-=nt*(gt=l[M]),V.vy-=at*gt,F.vx+=nt*(gt=1-gt),F.vy+=at*gt}function d(){if(!!o){var m,_=o.length,S=n.length,M=new Map(o.map(function(F,V){return[e(F,V,o),F]})),R;for(m=0,s=new Array(_);m<S;++m)R=n[m],R.index=m,typeof R.source!="object"&&(R.source=wI(M,R.source)),typeof R.target!="object"&&(R.target=wI(M,R.target)),s[R.source.index]=(s[R.source.index]||0)+1,s[R.target.index]=(s[R.target.index]||0)+1;for(m=0,l=new Array(S);m<S;++m)R=n[m],l[m]=s[R.source.index]/(s[R.source.index]+s[R.target.index]);r=new Array(S),g(),a=new Array(S),p()}}function g(){if(!!o)for(var m=0,_=n.length;m<_;++m)r[m]=+t(n[m],m,n)}function p(){if(!!o)for(var m=0,_=n.length;m<_;++m)a[m]=+i(n[m],m,n)}return h.initialize=function(m,_){o=m,u=_,d()},h.links=function(m){return arguments.length?(n=m,d(),h):n},h.id=function(m){return arguments.length?(e=m,h):e},h.iterations=function(m){return arguments.length?(c=+m,h):c},h.strength=function(m){return arguments.length?(t=typeof m=="function"?m:ao(+m),g(),h):t},h.distance=function(m){return arguments.length?(i=typeof m=="function"?m:ao(+m),p(),h):i},h}function VK(n){return n.x+n.vx}function XK(n){return n.y+n.vy}function CI(n){var e,t,r,i=1,a=1;typeof n!="function"&&(n=ao(n==null?1:+n));function o(){for(var u,c=e.length,f,h,d,g,p,m,_=0;_<a;++_)for(f=c_(e,VK,XK).visitAfter(s),u=0;u<c;++u)h=e[u],p=t[h.index],m=p*p,d=h.x+h.vx,g=h.y+h.vy,f.visit(S);function S(M,R,F,V,nt){var at=M.data,xt=M.r,gt=p+xt;if(at){if(at.index>h.index){var Tt=d-at.x-at.vx,Ct=g-at.y-at.vy,te=Tt*Tt+Ct*Ct;te<gt*gt&&(Tt===0&&(Tt=Bu(r),te+=Tt*Tt),Ct===0&&(Ct=Bu(r),te+=Ct*Ct),te=(gt-(te=Math.sqrt(te)))/te*i,h.vx+=(Tt*=te)*(gt=(xt*=xt)/(m+xt)),h.vy+=(Ct*=te)*gt,at.vx-=Tt*(gt=1-gt),at.vy-=Ct*gt)}return}return R>d+gt||V<d-gt||F>g+gt||nt<g-gt}}function s(u){if(u.data)return u.r=t[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(!!e){var u,c=e.length,f;for(t=new Array(c),u=0;u<c;++u)f=e[u],t[f.index]=+n(f,u,e)}}return o.initialize=function(u,c){e=u,r=c,l()},o.iterations=function(u){return arguments.length?(a=+u,o):a},o.strength=function(u){return arguments.length?(i=+u,o):i},o.radius=function(u){return arguments.length?(n=typeof u=="function"?u:ao(+u),l(),o):n},o}function YK(n){var e=ao(.1),t,r,i;typeof n!="function"&&(n=ao(n==null?0:+n));function a(s){for(var l=0,u=t.length,c;l<u;++l)c=t[l],c.vx+=(i[l]-c.x)*r[l]*s}function o(){if(!!t){var s,l=t.length;for(r=new Array(l),i=new Array(l),s=0;s<l;++s)r[s]=isNaN(i[s]=+n(t[s],s,t))?0:+e(t[s],s,t)}}return a.initialize=function(s){t=s,o()},a.strength=function(s){return arguments.length?(e=typeof s=="function"?s:ao(+s),o(),a):e},a.x=function(s){return arguments.length?(n=typeof s=="function"?s:ao(+s),o(),a):n},a}function HK(n){var e=ao(.1),t,r,i;typeof n!="function"&&(n=ao(n==null?0:+n));function a(s){for(var l=0,u=t.length,c;l<u;++l)c=t[l],c.vy+=(i[l]-c.y)*r[l]*s}function o(){if(!!t){var s,l=t.length;for(r=new Array(l),i=new Array(l),s=0;s<l;++s)r[s]=isNaN(i[s]=+n(t[s],s,t))?0:+e(t[s],s,t)}}return a.initialize=function(s){t=s,o()},a.strength=function(s){return arguments.length?(e=typeof s=="function"?s:ao(+s),o(),a):e},a.y=function(s){return arguments.length?(n=typeof s=="function"?s:ao(+s),o(),a):n},a}function jK(){function n(he){return()=>he}let e=he=>he.cluster,t=n(1),r=n(-1),i=n(100),a=n(.1),o=[0,0],s=[],l={},u=[],c=100,f=100,h={none:{x:0,y:0}},d=[],g,p="force",m=!0,_=.1;function S(he){if(!m)return S;g.tick(),at();for(let Te=0,Je=s.length,Ze,ar=he*_;Te<Je;++Te)Ze=s[Te],Ze.vx+=(h[e(Ze)].x-Ze.x)*ar,Ze.vy+=(h[e(Ze)].y-Ze.y)*ar}function M(){!s||R()}function R(){if(!s||!s.length)return;if(e(s[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");const he=F();g=SI(he.nodes).force("x",YK(c).strength(.1)).force("y",HK(f).strength(.1)).force("collide",CI(Te=>Te.r).iterations(4)).force("charge",EI().strength(r)).force("links",v_(he.nodes.length?he.links:[]).distance(i).strength(a)),d=g.nodes(),at()}function F(){const he=[],Te=[],Je={};let Ze=[],ar={},cr=[];return ar=V(s),cr=nt(u),Ze=Object.keys(ar),Ze.forEach((Dr,sn)=>{const Wr=ar[Dr];he.push({id:Dr,size:Wr.count,r:Math.sqrt(Wr.sumforceNodeSize/Math.PI)}),Je[Dr]=sn}),cr.forEach(Dr=>{const sn=Je[Dr.source],Wr=Je[Dr.target];sn!==void 0&&Wr!==void 0&&Te.push({source:sn,target:Wr,count:Dr.count})}),{nodes:he,links:Te}}function V(he){const Te={};return he.forEach(Je=>{const Ze=e(Je);Te[Ze]||(Te[Ze]={count:0,sumforceNodeSize:0})}),he.forEach(Je=>{const Ze=e(Je),ar=t(Je),cr=Te[Ze];cr.count=cr.count+1,cr.sumforceNodeSize=cr.sumforceNodeSize+Math.PI*(ar*ar)*1.3,Te[Ze]=cr}),Te}function nt(he){const Te={},Je=[];return he.forEach(ar=>{const cr=xt(ar);let Dr=0;Te[cr]!==void 0&&(Dr=Te[cr]),Dr+=1,Te[cr]=Dr}),Object.entries(Te).forEach(([ar,cr])=>{const Dr=ar.split("~")[0],sn=ar.split("~")[1];Dr!==void 0&&sn!==void 0&&Je.push({source:Dr,target:sn,count:cr})}),Je}function at(){return h={none:{x:0,y:0}},d.forEach(he=>{h[he.id]={x:he.x-o[0],y:he.y-o[1]}}),h}function xt(he){const Te=e(l[he.source]),Je=e(l[he.target]);return Te<=Je?`${Te}~${Je}`:`${Je}~${Te}`}function gt(he){l={},he.forEach(Te=>{l[Te.id]=Te})}function Tt(he){return arguments.length?(p=he,M(),S):p}function Ct(he){return arguments.length?typeof he=="string"?(e=Te=>Te[he],S):(e=he,S):e}function te(he){return arguments.length?(m=he,S):m}function Kt(he){return arguments.length?(_=he,S):_}function ne(he){return arguments.length?(c=he,S):c}function ee(he){return arguments.length?(f=he,S):f}function ve(he){return arguments.length?(gt(he||[]),s=he||[],S):s}function ie(he){return arguments.length?(u=he||[],M(),S):u}function ye(he){return arguments.length?(typeof he=="function"?t=he:t=n(+he),M(),S):t}function Ee(he){return arguments.length?(typeof he=="function"?r=he:r=n(+he),M(),S):r}function we(he){return arguments.length?(typeof he=="function"?i=he:i=n(+he),M(),S):i}function Pe(he){return arguments.length?(typeof he=="function"?a=he:a=n(+he),M(),S):a}function Ve(he){return arguments.length?(o=he,S):o}return S.initialize=he=>{s=he,M()},S.template=Tt,S.groupBy=Ct,S.enableGrouping=te,S.strength=Kt,S.centerX=ne,S.centerY=ee,S.nodes=ve,S.links=ie,S.forceNodeSize=ye,S.nodeSize=S.forceNodeSize,S.forceCharge=Ee,S.forceLinkDistance=we,S.forceLinkStrength=Pe,S.offset=Ve,S.getFocis=at,S}const g_={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};class ZK extends ro{constructor(e){super();this.center=[0,0],this.nodeStrength=null,this.edgeStrength=null,this.preventOverlap=!1,this.clusterNodeStrength=null,this.clusterEdgeStrength=null,this.clusterEdgeDistance=null,this.clusterNodeSize=null,this.clusterFociStrength=null,this.linkDistance=50,this.alphaDecay=.028,this.alphaMin=.001,this.alpha=.3,this.collideStrength=1,this.workerEnabled=!1,this.tick=()=>{},this.onLayoutEnd=()=>{},this.ticking=void 0,e&&this.updateCfg(e)}getDefaultCfg(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick(){},onLayoutEnd(){},workerEnabled:!1}}init(e){const t=this;t.nodes=e.nodes||[];const r=e.edges||[];t.edges=r.map(i=>{const a={},o=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(i).forEach(s=>{o.indexOf(s)>-1||(a[s]=i[s])}),a}),t.ticking=!1}execute(e){const t=this,r=t.nodes,i=t.edges;if(t.ticking)return;let a=t.forceSimulation;const o=t.alphaMin,s=t.alphaDecay,l=t.alpha;if(a){if(e){if(t.clustering&&t.clusterForce&&(t.clusterForce.nodes(r),t.clusterForce.links(i)),a.nodes(r),i&&t.edgeForce)t.edgeForce.links(i);else if(i&&!t.edgeForce){const u=v_().id(c=>c.id).links(i);t.edgeStrength&&u.strength(t.edgeStrength),t.linkDistance&&u.distance(t.linkDistance),t.edgeForce=u,a.force("link",u)}}t.preventOverlap&&t.overlapProcess(a),a.alpha(l).restart(),this.ticking=!0}else try{const u=EI();if(t.nodeStrength&&u.strength(t.nodeStrength),a=SI().nodes(r),t.clustering){const c=jK();c.centerX(t.center[0]).centerY(t.center[1]).template("force").strength(t.clusterFociStrength),i&&c.links(i),r&&c.nodes(r),c.forceLinkDistance(t.clusterEdgeDistance).forceLinkStrength(t.clusterEdgeStrength).forceCharge(t.clusterNodeStrength).forceNodeSize(t.clusterNodeSize),t.clusterForce=c,a.force("group",c)}if(a.force("center",UK(t.center[0],t.center[1])).force("charge",u).alpha(l).alphaDecay(s).alphaMin(o),t.preventOverlap&&t.overlapProcess(a),i){const c=v_().id(f=>f.id).links(i);t.edgeStrength&&c.strength(t.edgeStrength),t.linkDistance&&c.distance(t.linkDistance),t.edgeForce=c,a.force("link",c)}if(t.workerEnabled&&!$K()&&(t.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!t.workerEnabled)a.on("tick",()=>{t.tick()}).on("end",()=>{t.ticking=!1,t.onLayoutEnd&&t.onLayoutEnd()}),t.ticking=!0;else{a.stop();const c=KK(a);for(let f=1;f<=c;f++)a.tick(),postMessage({nodes:r,currentTick:f,totalTicks:c,type:g_.TICK},void 0);t.ticking=!1}t.forceSimulation=a,t.ticking=!0}catch(u){t.ticking=!1,console.warn(u)}}overlapProcess(e){const t=this,r=t.nodeSize,i=t.nodeSpacing;let a,o;const s=t.collideStrength;if(Mr(i)?o=()=>i:ku(i)?o=i:o=()=>0,!r)a=l=>l.size?Ia(l.size)?(l.size[0]>l.size[1]?l.size[0]:l.size[1])/2+o(l):l.size/2+o(l):10+o(l);else if(ku(r))a=l=>r(l)+o(l);else if(Ia(r)){const u=(r[0]>r[1]?r[0]:r[1])/2;a=c=>u+o(c)}else if(Mr(r)){const l=r/2;a=u=>l+o(u)}else a=()=>10;e.force("collisionForce",CI(a).strength(s))}updateCfg(e){const t=this;t.ticking&&(t.forceSimulation.stop(),t.ticking=!1),t.forceSimulation=null,Object.assign(t,e)}destroy(){const e=this;e.ticking&&(e.forceSimulation.stop(),e.ticking=!1),e.nodes=null,e.edges=null,e.destroyed=!0}}function KK(n){const e=n.alphaMin(),t=n.alphaTarget(),r=n.alpha(),i=Math.log((e-t)/(r-t))/Math.log(1-n.alphaDecay());return Math.ceil(i)}function $K(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}function QK(n,e,t,r){n.forEach((i,a)=>{n[a].children=[],n[a].parent=[]}),r?e.forEach(i=>{let a=0;i.source&&(a=t[i.source]);let o=0;i.target&&(o=t[i.target]);const s=n[a].children,l=n[o].parent;s.push(n[o].id),l.push(n[a].id)}):e.forEach(i=>{let a=0;i.source&&(a=t[i.source]);let o=0;i.target&&(o=t[i.target]);const s=n[a].children,l=n[o].children;s.push(n[o].id),l.push(n[a].id)})}function JK(n,e,t){const r=t.length;for(let i=0;i<r;i++)if(n.id===t[i].source&&e.id===t[i].target||e.id===t[i].source&&n.id===t[i].target)return!0;return!1}function qK(n,e){const t=n.degree,r=e.degree;return t<r?-1:t>r?1:0}class t$ extends ro{constructor(e){super();this.radius=null,this.startRadius=null,this.endRadius=null,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.divisions=1,this.ordering=null,this.angleRatio=1,this.nodes=[],this.edges=[],this.nodeMap={},this.degrees=[],this.width=300,this.height=300,this.updateCfg(e)}getDefaultCfg(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}execute(){const e=this,t=e.nodes,r=e.edges,i=t.length;if(i===0){e.onLayoutEnd&&e.onLayoutEnd();return}!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);const a=e.center;if(i===1){t[0].x=a[0],t[0].y=a[1],e.onLayoutEnd&&e.onLayoutEnd();return}let o=e.radius,s=e.startRadius,l=e.endRadius;const u=e.divisions,c=e.startAngle,f=e.endAngle,h=(f-c)/i,d={};t.forEach((F,V)=>{d[F.id]=V}),e.nodeMap=d;const g=Og(t.length,d,r);e.degrees=g,!o&&!s&&!l?o=e.height>e.width?e.width/2:e.height/2:!s&&l?s=l:s&&!l&&(l=s);const p=e.angleRatio,m=h*p,_=e.ordering;let S=[];_==="topology"?S=e.topologyOrdering():_==="topology-directed"?S=e.topologyOrdering(!0):_==="degree"?S=e.degreeOrdering():S=t;const M=e.clockwise,R=Math.ceil(i/u);for(let F=0;F<i;++F){let V=o;!V&&s!==null&&l!==null&&(V=s+F*(l-s)/(i-1)),V||(V=10+F*100/(i-1));let nt=c+F%R*m+2*Math.PI/u*Math.floor(F/R);M||(nt=f-F%R*m-2*Math.PI/u*Math.floor(F/R)),S[F].x=a[0]+Math.cos(nt)*V,S[F].y=a[1]+Math.sin(nt)*V,S[F].weight=g[F]}return e.onLayoutEnd&&e.onLayoutEnd(),{nodes:S,edges:this.edges}}topologyOrdering(e=!1){const t=this,r=t.degrees,i=t.edges,a=t.nodes,o=l_(a),s=t.nodeMap,l=[o[0]],u=[a[0]],c=[],f=a.length;c[0]=!0,QK(o,i,s,e);let h=0;return o.forEach((d,g)=>{if(g!==0)if((g===f-1||r[g]!==r[g+1]||JK(l[h],d,i))&&!c[g])l.push(d),u.push(a[s[d.id]]),c[g]=!0,h++;else{const p=l[h].children;let m=!1;for(let S=0;S<p.length;S++){const M=s[p[S]];if(r[M]===r[g]&&!c[M]){l.push(o[M]),u.push(a[s[o[M].id]]),c[M]=!0,m=!0;break}}let _=0;for(;!m&&(c[_]||(l.push(o[_]),u.push(a[s[o[_].id]]),c[_]=!0,m=!0),_++,_!==f););}}),u}degreeOrdering(){const e=this,t=e.nodes,r=[],i=e.degrees;return t.forEach((a,o)=>{a.degree=i[o],r.push(a)}),r.sort(qK),r}getType(){return"circular"}}var e$=x(92546),MI=x.n(e$);class r$ extends ro{constructor(e){super();this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(e)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}}execute(){const e=this,{nodes:t,nodeSize:r,rankdir:i,combos:a}=e;if(!t)return;const o=e.edges||[],s=new(MI()).graphlib.Graph({multigraph:!0,compound:!0});let l;r?Ia(r)?l=()=>r:l=()=>[r,r]:l=d=>d.size?Ia(d.size)?d.size:[d.size,d.size]:[40,40];let u=Xy(e.nodesepFunc,e.nodesep,50),c=Xy(e.ranksepFunc,e.ranksep,50);(i==="LR"||i==="RL")&&(u=Xy(e.ranksepFunc,e.ranksep,50),c=Xy(e.nodesepFunc,e.nodesep,50)),s.setDefaultEdgeLabel(()=>({})),s.setGraph(e);const f={};t.forEach(d=>{const g=l(d),p=c(d),m=u(d),_=g[0]+2*m,S=g[1]+2*p;s.setNode(d.id,{width:_,height:S}),this.sortByCombo&&d.comboId&&(f[d.comboId]||(f[d.comboId]=!0,s.setNode(d.comboId,{})),s.setParent(d.id,d.comboId))}),this.sortByCombo&&a&&a.forEach(d=>{!d.parentId||(f[d.parentId]||(f[d.parentId]=!0,s.setNode(d.parentId,{})),s.setParent(d.id,d.parentId))}),o.forEach(d=>{s.setEdge(d.source,d.target,{weight:d.weight||1})}),MI().layout(s);let h;return s.nodes().forEach(d=>{h=s.node(d);const g=t.findIndex(p=>p.id===d);!t[g]||(t[g].x=h.x,t[g].y=h.y)}),s.edges().forEach(d=>{h=s.edge(d);const g=o.findIndex(p=>p.source===d.v&&p.target===d.w);e.controlPoints&&o[g].type!=="loop"&&(o[g].controlPoints=h.points.slice(1,h.points.length-1))}),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:o}}getType(){return"dagre"}}function Xy(n,e,t){let r;return n?r=n:Mr(e)?r=()=>e:r=()=>t,r}var Oa=x(60357),wa=x(68247),AI=x(33814),Pr=x(28430),Fr=x(72239);const n$=Object.prototype.toString;function Yy(n){return n$.call(n).endsWith("Array]")}function i$(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Yy(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");var t=e.fromIndex,r=t===void 0?0:t,i=e.toIndex,a=i===void 0?n.length:i;if(r<0||r>=n.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=r||a>n.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=n[r],s=r+1;s<a;s++)n[s]>o&&(o=n[s]);return o}var a$=i$;function o$(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Yy(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");var t=e.fromIndex,r=t===void 0?0:t,i=e.toIndex,a=i===void 0?n.length:i;if(r<0||r>=n.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=r||a>n.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=n[r],s=r+1;s<a;s++)n[s]<o&&(o=n[s]);return o}var s$=o$;function l$(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Yy(n)){if(n.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var t;if(e.output!==void 0){if(!Yy(e.output))throw new TypeError("output option must be an array if specified");t=e.output}else t=new Array(n.length);var r=s$(n),i=a$(n);if(r===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var a=e.min,o=a===void 0?e.autoMinMax?r:0:a,s=e.max,l=s===void 0?e.autoMinMax?i:1:s;if(o>=l)throw new RangeError("min option must be smaller than max option");for(var u=(l-o)/(i-r),c=0;c<n.length;c++)t[c]=(n[c]-r)*u+o;return t}var TI=l$,Hy=" ".repeat(2),II=" ".repeat(4);function u$(){return OI(this)}function OI(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.maxRows,r=t===void 0?15:t,i=e.maxColumns,a=i===void 0?10:i,o=e.maxNumSize,s=o===void 0?8:o;return"".concat(n.constructor.name,` {
`).concat(Hy,`[
`).concat(II).concat(c$(n,r,a,s),`
`).concat(Hy,`]
`).concat(Hy,"rows: ").concat(n.rows,`
`).concat(Hy,"columns: ").concat(n.columns,`
}`)}function c$(n,e,t,r){for(var i=n.rows,a=n.columns,o=Math.min(i,e),s=Math.min(a,t),l=[],u=0;u<o;u++){for(var c=[],f=0;f<s;f++)c.push(f$(n.get(u,f),r));l.push("".concat(c.join(" ")))}return s!==a&&(l[l.length-1]+=" ... ".concat(a-t," more columns")),o!==i&&l.push("... ".concat(i-e," more rows")),l.join(`
`.concat(II))}function f$(n,e){var t=String(n);if(t.length<=e)return t.padEnd(e," ");var r=n.toPrecision(e-2);if(r.length<=e)return r;var i=n.toExponential(e-2),a=i.indexOf("e"),o=i.slice(a);return i.slice(0,e-o.length)+o}function h$(n,e){n.prototype.add=function(r){return typeof r=="number"?this.addS(r):this.addM(r)},n.prototype.addS=function(r){for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)+r);return this},n.prototype.addM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)+r.get(i,a));return this},n.add=function(r,i){var a=new e(r);return a.add(i)},n.prototype.sub=function(r){return typeof r=="number"?this.subS(r):this.subM(r)},n.prototype.subS=function(r){for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)-r);return this},n.prototype.subM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)-r.get(i,a));return this},n.sub=function(r,i){var a=new e(r);return a.sub(i)},n.prototype.subtract=n.prototype.sub,n.prototype.subtractS=n.prototype.subS,n.prototype.subtractM=n.prototype.subM,n.subtract=n.sub,n.prototype.mul=function(r){return typeof r=="number"?this.mulS(r):this.mulM(r)},n.prototype.mulS=function(r){for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)*r);return this},n.prototype.mulM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)*r.get(i,a));return this},n.mul=function(r,i){var a=new e(r);return a.mul(i)},n.prototype.multiply=n.prototype.mul,n.prototype.multiplyS=n.prototype.mulS,n.prototype.multiplyM=n.prototype.mulM,n.multiply=n.mul,n.prototype.div=function(r){return typeof r=="number"?this.divS(r):this.divM(r)},n.prototype.divS=function(r){for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)/r);return this},n.prototype.divM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)/r.get(i,a));return this},n.div=function(r,i){var a=new e(r);return a.div(i)},n.prototype.divide=n.prototype.div,n.prototype.divideS=n.prototype.divS,n.prototype.divideM=n.prototype.divM,n.divide=n.div,n.prototype.mod=function(r){return typeof r=="number"?this.modS(r):this.modM(r)},n.prototype.modS=function(r){for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)%r);return this},n.prototype.modM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)%r.get(i,a));return this},n.mod=function(r,i){var a=new e(r);return a.mod(i)},n.prototype.modulus=n.prototype.mod,n.prototype.modulusS=n.prototype.modS,n.prototype.modulusM=n.prototype.modM,n.modulus=n.mod,n.prototype.and=function(r){return typeof r=="number"?this.andS(r):this.andM(r)},n.prototype.andS=function(r){for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)&r);return this},n.prototype.andM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)&r.get(i,a));return this},n.and=function(r,i){var a=new e(r);return a.and(i)},n.prototype.or=function(r){return typeof r=="number"?this.orS(r):this.orM(r)},n.prototype.orS=function(r){for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)|r);return this},n.prototype.orM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)|r.get(i,a));return this},n.or=function(r,i){var a=new e(r);return a.or(i)},n.prototype.xor=function(r){return typeof r=="number"?this.xorS(r):this.xorM(r)},n.prototype.xorS=function(r){for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)^r);return this},n.prototype.xorM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)^r.get(i,a));return this},n.xor=function(r,i){var a=new e(r);return a.xor(i)},n.prototype.leftShift=function(r){return typeof r=="number"?this.leftShiftS(r):this.leftShiftM(r)},n.prototype.leftShiftS=function(r){for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)<<r);return this},n.prototype.leftShiftM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)<<r.get(i,a));return this},n.leftShift=function(r,i){var a=new e(r);return a.leftShift(i)},n.prototype.signPropagatingRightShift=function(r){return typeof r=="number"?this.signPropagatingRightShiftS(r):this.signPropagatingRightShiftM(r)},n.prototype.signPropagatingRightShiftS=function(r){for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>r);return this},n.prototype.signPropagatingRightShiftM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>r.get(i,a));return this},n.signPropagatingRightShift=function(r,i){var a=new e(r);return a.signPropagatingRightShift(i)},n.prototype.rightShift=function(r){return typeof r=="number"?this.rightShiftS(r):this.rightShiftM(r)},n.prototype.rightShiftS=function(r){for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>>r);return this},n.prototype.rightShiftM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>>r.get(i,a));return this},n.rightShift=function(r,i){var a=new e(r);return a.rightShift(i)},n.prototype.zeroFillRightShift=n.prototype.rightShift,n.prototype.zeroFillRightShiftS=n.prototype.rightShiftS,n.prototype.zeroFillRightShiftM=n.prototype.rightShiftM,n.zeroFillRightShift=n.rightShift,n.prototype.not=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,~this.get(r,i));return this},n.not=function(r){var i=new e(r);return i.not()},n.prototype.abs=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,Math.abs(this.get(r,i)));return this},n.abs=function(r){var i=new e(r);return i.abs()},n.prototype.acos=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,Math.acos(this.get(r,i)));return this},n.acos=function(r){var i=new e(r);return i.acos()},n.prototype.acosh=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,Math.acosh(this.get(r,i)));return this},n.acosh=function(r){var i=new e(r);return i.acosh()},n.prototype.asin=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,Math.asin(this.get(r,i)));return this},n.asin=function(r){var i=new e(r);return i.asin()},n.prototype.asinh=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,Math.asinh(this.get(r,i)));return this},n.asinh=function(r){var i=new e(r);return i.asinh()},n.prototype.atan=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,Math.atan(this.get(r,i)));return this},n.atan=function(r){var i=new e(r);return i.atan()},n.prototype.atanh=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,Math.atanh(this.get(r,i)));return this},n.atanh=function(r){var i=new e(r);return i.atanh()},n.prototype.cbrt=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,Math.cbrt(this.get(r,i)));return this},n.cbrt=function(r){var i=new e(r);return i.cbrt()},n.prototype.ceil=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,Math.ceil(this.get(r,i)));return this},n.ceil=function(r){var i=new e(r);return i.ceil()},n.prototype.clz32=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,Math.clz32(this.get(r,i)));return this},n.clz32=function(r){var i=new e(r);return i.clz32()},n.prototype.cos=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,Math.cos(this.get(r,i)));return this},n.cos=function(r){var i=new e(r);return i.cos()},n.prototype.cosh=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,Math.cosh(this.get(r,i)));return this},n.cosh=function(r){var i=new e(r);return i.cosh()},n.prototype.exp=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,Math.exp(this.get(r,i)));return this},n.exp=function(r){var i=new e(r);return i.exp()},n.prototype.expm1=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,Math.expm1(this.get(r,i)));return this},n.expm1=function(r){var i=new e(r);return i.expm1()},n.prototype.floor=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,Math.floor(this.get(r,i)));return this},n.floor=function(r){var i=new e(r);return i.floor()},n.prototype.fround=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,Math.fround(this.get(r,i)));return this},n.fround=function(r){var i=new e(r);return i.fround()},n.prototype.log=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,Math.log(this.get(r,i)));return this},n.log=function(r){var i=new e(r);return i.log()},n.prototype.log1p=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,Math.log1p(this.get(r,i)));return this},n.log1p=function(r){var i=new e(r);return i.log1p()},n.prototype.log10=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,Math.log10(this.get(r,i)));return this},n.log10=function(r){var i=new e(r);return i.log10()},n.prototype.log2=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,Math.log2(this.get(r,i)));return this},n.log2=function(r){var i=new e(r);return i.log2()},n.prototype.round=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,Math.round(this.get(r,i)));return this},n.round=function(r){var i=new e(r);return i.round()},n.prototype.sign=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,Math.sign(this.get(r,i)));return this},n.sign=function(r){var i=new e(r);return i.sign()},n.prototype.sin=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,Math.sin(this.get(r,i)));return this},n.sin=function(r){var i=new e(r);return i.sin()},n.prototype.sinh=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,Math.sinh(this.get(r,i)));return this},n.sinh=function(r){var i=new e(r);return i.sinh()},n.prototype.sqrt=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,Math.sqrt(this.get(r,i)));return this},n.sqrt=function(r){var i=new e(r);return i.sqrt()},n.prototype.tan=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,Math.tan(this.get(r,i)));return this},n.tan=function(r){var i=new e(r);return i.tan()},n.prototype.tanh=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,Math.tanh(this.get(r,i)));return this},n.tanh=function(r){var i=new e(r);return i.tanh()},n.prototype.trunc=function(){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,Math.trunc(this.get(r,i)));return this},n.trunc=function(r){var i=new e(r);return i.trunc()},n.pow=function(r,i){var a=new e(r);return a.pow(i)},n.prototype.pow=function(r){return typeof r=="number"?this.powS(r):this.powM(r)},n.prototype.powS=function(r){for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,Math.pow(this.get(i,a),r));return this},n.prototype.powM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,Math.pow(this.get(i,a),r.get(i,a)));return this}}function ys(n,e,t){var r=t?n.rows:n.rows-1;if(e<0||e>r)throw new RangeError("Row index out of range")}function ms(n,e,t){var r=t?n.columns:n.columns-1;if(e<0||e>r)throw new RangeError("Column index out of range")}function Qh(n,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==n.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function Jh(n,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==n.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function d$(n,e,t){return{row:v$(n,e),column:g$(n,t)}}function v$(n,e){if(typeof e!="object")throw new TypeError("unexpected type for row indices");var t=e.some(function(r){return r<0||r>=n.rows});if(t)throw new RangeError("row indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function g$(n,e){if(typeof e!="object")throw new TypeError("unexpected type for column indices");var t=e.some(function(r){return r<0||r>=n.columns});if(t)throw new RangeError("column indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function PI(n,e,t,r,i){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Zy("startRow",e),Zy("endRow",t),Zy("startColumn",r),Zy("endColumn",i),e>t||r>i||e<0||e>=n.rows||t<0||t>=n.rows||r<0||r>=n.columns||i<0||i>=n.columns)throw new RangeError("Submatrix indices are out of range")}function jy(n){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=[],r=0;r<n;r++)t.push(e);return t}function Zy(n,e){if(typeof e!="number")throw new TypeError("".concat(n," must be a number"))}function qh(n){if(n.isEmpty())throw new Error("Empty matrix has no elements to index")}function p$(n){for(var e=jy(n.rows),t=0;t<n.rows;++t)for(var r=0;r<n.columns;++r)e[t]+=n.get(t,r);return e}function y$(n){for(var e=jy(n.columns),t=0;t<n.rows;++t)for(var r=0;r<n.columns;++r)e[r]+=n.get(t,r);return e}function m$(n){for(var e=0,t=0;t<n.rows;t++)for(var r=0;r<n.columns;r++)e+=n.get(t,r);return e}function x$(n){for(var e=jy(n.rows,1),t=0;t<n.rows;++t)for(var r=0;r<n.columns;++r)e[t]*=n.get(t,r);return e}function b$(n){for(var e=jy(n.columns,1),t=0;t<n.rows;++t)for(var r=0;r<n.columns;++r)e[r]*=n.get(t,r);return e}function _$(n){for(var e=1,t=0;t<n.rows;t++)for(var r=0;r<n.columns;r++)e*=n.get(t,r);return e}function S$(n,e,t){for(var r=n.rows,i=n.columns,a=[],o=0;o<r;o++){for(var s=0,l=0,u=0,c=0;c<i;c++)u=n.get(o,c)-t[o],s+=u,l+=u*u;e?a.push((l-s*s/i)/(i-1)):a.push((l-s*s/i)/i)}return a}function E$(n,e,t){for(var r=n.rows,i=n.columns,a=[],o=0;o<i;o++){for(var s=0,l=0,u=0,c=0;c<r;c++)u=n.get(c,o)-t[o],s+=u,l+=u*u;e?a.push((l-s*s/r)/(r-1)):a.push((l-s*s/r)/r)}return a}function w$(n,e,t){for(var r=n.rows,i=n.columns,a=r*i,o=0,s=0,l=0,u=0;u<r;u++)for(var c=0;c<i;c++)l=n.get(u,c)-t,o+=l,s+=l*l;return e?(s-o*o/a)/(a-1):(s-o*o/a)/a}function C$(n,e){for(var t=0;t<n.rows;t++)for(var r=0;r<n.columns;r++)n.set(t,r,n.get(t,r)-e[t])}function M$(n,e){for(var t=0;t<n.rows;t++)for(var r=0;r<n.columns;r++)n.set(t,r,n.get(t,r)-e[r])}function A$(n,e){for(var t=0;t<n.rows;t++)for(var r=0;r<n.columns;r++)n.set(t,r,n.get(t,r)-e)}function T$(n){for(var e=[],t=0;t<n.rows;t++){for(var r=0,i=0;i<n.columns;i++)r+=Math.pow(n.get(t,i),2)/(n.columns-1);e.push(Math.sqrt(r))}return e}function I$(n,e){for(var t=0;t<n.rows;t++)for(var r=0;r<n.columns;r++)n.set(t,r,n.get(t,r)/e[t])}function O$(n){for(var e=[],t=0;t<n.columns;t++){for(var r=0,i=0;i<n.rows;i++)r+=Math.pow(n.get(i,t),2)/(n.rows-1);e.push(Math.sqrt(r))}return e}function P$(n,e){for(var t=0;t<n.rows;t++)for(var r=0;r<n.columns;r++)n.set(t,r,n.get(t,r)/e[r])}function D$(n){for(var e=n.size-1,t=0,r=0;r<n.columns;r++)for(var i=0;i<n.rows;i++)t+=Math.pow(n.get(i,r),2)/e;return Math.sqrt(t)}function L$(n,e){for(var t=0;t<n.rows;t++)for(var r=0;r<n.columns;r++)n.set(t,r,n.get(t,r)/e)}var va=function(){function n(){(0,Pr.Z)(this,n)}return(0,Fr.Z)(n,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(t){if(typeof t!="function")throw new TypeError("callback must be a function");for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)t.call(this,r,i);return this}},{key:"to1DArray",value:function(){for(var t=[],r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)t.push(this.get(r,i));return t}},{key:"to2DArray",value:function(){for(var t=[],r=0;r<this.rows;r++){t.push([]);for(var i=0;i<this.columns;i++)t[r].push(this.get(r,i))}return t}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var r=0;r<=t;r++)if(this.get(t,r)!==this.get(r,t))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var t=0,r=0,i=-1,a=!0,o=!1;t<this.rows&&a;){for(r=0,o=!1;r<this.columns&&o===!1;)this.get(t,r)===0?r++:this.get(t,r)===1&&r>i?(o=!0,i=r):(a=!1,o=!0);t++}return a}},{key:"isReducedEchelonForm",value:function(){for(var t=0,r=0,i=-1,a=!0,o=!1;t<this.rows&&a;){for(r=0,o=!1;r<this.columns&&o===!1;)this.get(t,r)===0?r++:this.get(t,r)===1&&r>i?(o=!0,i=r):(a=!1,o=!0);for(var s=r+1;s<this.rows;s++)this.get(t,s)!==0&&(a=!1);t++}return a}},{key:"echelonForm",value:function(){for(var t=this.clone(),r=0,i=0;r<t.rows&&i<t.columns;){for(var a=r,o=r;o<t.rows;o++)t.get(o,i)>t.get(a,i)&&(a=o);if(t.get(a,i)===0)i++;else{t.swapRows(r,a);for(var s=t.get(r,i),l=i;l<t.columns;l++)t.set(r,l,t.get(r,l)/s);for(var u=r+1;u<t.rows;u++){var c=t.get(u,i)/t.get(r,i);t.set(u,i,0);for(var f=i+1;f<t.columns;f++)t.set(u,f,t.get(u,f)-t.get(r,f)*c)}r++,i++}}return t}},{key:"reducedEchelonForm",value:function(){for(var t=this.echelonForm(),r=t.columns,i=t.rows,a=i-1;a>=0;)if(t.maxRow(a)===0)a--;else{for(var o=0,s=!1;o<i&&s===!1;)t.get(a,o)===1?s=!0:o++;for(var l=0;l<a;l++)for(var u=t.get(l,o),c=o;c<r;c++){var f=t.get(l,c)-u*t.get(a,c);t.set(l,c,f)}a--}return t}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof t!="object")throw new TypeError("options must be an object");var r=t.rows,i=r===void 0?1:r,a=t.columns,o=a===void 0?1:a;if(!Number.isInteger(i)||i<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(o)||o<=0)throw new TypeError("columns must be a positive integer");for(var s=new rn(this.rows*i,this.columns*o),l=0;l<i;l++)for(var u=0;u<o;u++)s.setSubMatrix(this,this.rows*l,this.columns*u);return s}},{key:"fill",value:function(t){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,t);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(t){ys(this,t);for(var r=[],i=0;i<this.columns;i++)r.push(this.get(t,i));return r}},{key:"getRowVector",value:function(t){return rn.rowVector(this.getRow(t))}},{key:"setRow",value:function(t,r){ys(this,t),r=Qh(this,r);for(var i=0;i<this.columns;i++)this.set(t,i,r[i]);return this}},{key:"swapRows",value:function(t,r){ys(this,t),ys(this,r);for(var i=0;i<this.columns;i++){var a=this.get(t,i);this.set(t,i,this.get(r,i)),this.set(r,i,a)}return this}},{key:"getColumn",value:function(t){ms(this,t);for(var r=[],i=0;i<this.rows;i++)r.push(this.get(i,t));return r}},{key:"getColumnVector",value:function(t){return rn.columnVector(this.getColumn(t))}},{key:"setColumn",value:function(t,r){ms(this,t),r=Jh(this,r);for(var i=0;i<this.rows;i++)this.set(i,t,r[i]);return this}},{key:"swapColumns",value:function(t,r){ms(this,t),ms(this,r);for(var i=0;i<this.rows;i++){var a=this.get(i,t);this.set(i,t,this.get(i,r)),this.set(i,r,a)}return this}},{key:"addRowVector",value:function(t){t=Qh(this,t);for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)+t[i]);return this}},{key:"subRowVector",value:function(t){t=Qh(this,t);for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)-t[i]);return this}},{key:"mulRowVector",value:function(t){t=Qh(this,t);for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)*t[i]);return this}},{key:"divRowVector",value:function(t){t=Qh(this,t);for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)/t[i]);return this}},{key:"addColumnVector",value:function(t){t=Jh(this,t);for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)+t[r]);return this}},{key:"subColumnVector",value:function(t){t=Jh(this,t);for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)-t[r]);return this}},{key:"mulColumnVector",value:function(t){t=Jh(this,t);for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)*t[r]);return this}},{key:"divColumnVector",value:function(t){t=Jh(this,t);for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)/t[r]);return this}},{key:"mulRow",value:function(t,r){ys(this,t);for(var i=0;i<this.columns;i++)this.set(t,i,this.get(t,i)*r);return this}},{key:"mulColumn",value:function(t,r){ms(this,t);for(var i=0;i<this.rows;i++)this.set(i,t,this.get(i,t)*r);return this}},{key:"max",value:function(){if(this.isEmpty())return NaN;for(var t=this.get(0,0),r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.get(r,i)>t&&(t=this.get(r,i));return t}},{key:"maxIndex",value:function(){qh(this);for(var t=this.get(0,0),r=[0,0],i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.get(i,a)>t&&(t=this.get(i,a),r[0]=i,r[1]=a);return r}},{key:"min",value:function(){if(this.isEmpty())return NaN;for(var t=this.get(0,0),r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.get(r,i)<t&&(t=this.get(r,i));return t}},{key:"minIndex",value:function(){qh(this);for(var t=this.get(0,0),r=[0,0],i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.get(i,a)<t&&(t=this.get(i,a),r[0]=i,r[1]=a);return r}},{key:"maxRow",value:function(t){if(ys(this,t),this.isEmpty())return NaN;for(var r=this.get(t,0),i=1;i<this.columns;i++)this.get(t,i)>r&&(r=this.get(t,i));return r}},{key:"maxRowIndex",value:function(t){ys(this,t),qh(this);for(var r=this.get(t,0),i=[t,0],a=1;a<this.columns;a++)this.get(t,a)>r&&(r=this.get(t,a),i[1]=a);return i}},{key:"minRow",value:function(t){if(ys(this,t),this.isEmpty())return NaN;for(var r=this.get(t,0),i=1;i<this.columns;i++)this.get(t,i)<r&&(r=this.get(t,i));return r}},{key:"minRowIndex",value:function(t){ys(this,t),qh(this);for(var r=this.get(t,0),i=[t,0],a=1;a<this.columns;a++)this.get(t,a)<r&&(r=this.get(t,a),i[1]=a);return i}},{key:"maxColumn",value:function(t){if(ms(this,t),this.isEmpty())return NaN;for(var r=this.get(0,t),i=1;i<this.rows;i++)this.get(i,t)>r&&(r=this.get(i,t));return r}},{key:"maxColumnIndex",value:function(t){ms(this,t),qh(this);for(var r=this.get(0,t),i=[0,t],a=1;a<this.rows;a++)this.get(a,t)>r&&(r=this.get(a,t),i[0]=a);return i}},{key:"minColumn",value:function(t){if(ms(this,t),this.isEmpty())return NaN;for(var r=this.get(0,t),i=1;i<this.rows;i++)this.get(i,t)<r&&(r=this.get(i,t));return r}},{key:"minColumnIndex",value:function(t){ms(this,t),qh(this);for(var r=this.get(0,t),i=[0,t],a=1;a<this.rows;a++)this.get(a,t)<r&&(r=this.get(a,t),i[0]=a);return i}},{key:"diag",value:function(){for(var t=Math.min(this.rows,this.columns),r=[],i=0;i<t;i++)r.push(this.get(i,i));return r}},{key:"norm",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",r=0;if(t==="max")return this.max();if(t==="frobenius"){for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)r=r+this.get(i,a)*this.get(i,a);return Math.sqrt(r)}else throw new RangeError("unknown norm type: ".concat(t))}},{key:"cumulativeSum",value:function(){for(var t=0,r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)t+=this.get(r,i),this.set(r,i,t);return this}},{key:"dot",value:function(t){n.isMatrix(t)&&(t=t.to1DArray());var r=this.to1DArray();if(r.length!==t.length)throw new RangeError("vectors do not have the same size");for(var i=0,a=0;a<r.length;a++)i+=r[a]*t[a];return i}},{key:"mmul",value:function(t){t=rn.checkMatrix(t);for(var r=this.rows,i=this.columns,a=t.columns,o=new rn(r,a),s=new Float64Array(i),l=0;l<a;l++){for(var u=0;u<i;u++)s[u]=t.get(u,l);for(var c=0;c<r;c++){for(var f=0,h=0;h<i;h++)f+=this.get(c,h)*s[h];o.set(c,l,f)}}return o}},{key:"strassen2x2",value:function(t){t=rn.checkMatrix(t);var r=new rn(2,2),i=this.get(0,0),a=t.get(0,0),o=this.get(0,1),s=t.get(0,1),l=this.get(1,0),u=t.get(1,0),c=this.get(1,1),f=t.get(1,1),h=(i+c)*(a+f),d=(l+c)*a,g=i*(s-f),p=c*(u-a),m=(i+o)*f,_=(l-i)*(a+s),S=(o-c)*(u+f),M=h+p-m+S,R=g+m,F=d+p,V=h-d+g+_;return r.set(0,0,M),r.set(0,1,R),r.set(1,0,F),r.set(1,1,V),r}},{key:"strassen3x3",value:function(t){t=rn.checkMatrix(t);var r=new rn(3,3),i=this.get(0,0),a=this.get(0,1),o=this.get(0,2),s=this.get(1,0),l=this.get(1,1),u=this.get(1,2),c=this.get(2,0),f=this.get(2,1),h=this.get(2,2),d=t.get(0,0),g=t.get(0,1),p=t.get(0,2),m=t.get(1,0),_=t.get(1,1),S=t.get(1,2),M=t.get(2,0),R=t.get(2,1),F=t.get(2,2),V=(i+a+o-s-l-f-h)*_,nt=(i-s)*(-g+_),at=l*(-d+g+m-_-S-M+F),xt=(-i+s+l)*(d-g+_),gt=(s+l)*(-d+g),Tt=i*d,Ct=(-i+c+f)*(d-p+S),te=(-i+c)*(p-S),Kt=(c+f)*(-d+p),ne=(i+a+o-l-u-c-f)*S,ee=f*(-d+p+m-_-S-M+R),ve=(-o+f+h)*(_+M-R),ie=(o-h)*(_-R),ye=o*M,Ee=(f+h)*(-M+R),we=(-o+l+u)*(S+M-F),Pe=(o-u)*(S-F),Ve=(l+u)*(-M+F),he=a*m,Te=u*R,Je=s*p,Ze=c*g,ar=h*F,cr=Tt+ye+he,Dr=V+xt+gt+Tt+ve+ye+Ee,sn=Tt+Ct+Kt+ne+ye+we+Ve,Wr=nt+at+xt+Tt+ye+we+Pe,ai=nt+xt+gt+Tt+Te,Ln=ye+we+Pe+Ve+Je,gi=Tt+Ct+te+ee+ve+ie+ye,Po=ve+ie+ye+Ee+Ze,Vn=Tt+Ct+te+Kt+ar;return r.set(0,0,cr),r.set(0,1,Dr),r.set(0,2,sn),r.set(1,0,Wr),r.set(1,1,ai),r.set(1,2,Ln),r.set(2,0,gi),r.set(2,1,Po),r.set(2,2,Vn),r}},{key:"mmulStrassen",value:function(t){t=rn.checkMatrix(t);var r=this.clone(),i=r.rows,a=r.columns,o=t.rows,s=t.columns;a!==o&&console.warn("Multiplying ".concat(i," x ").concat(a," and ").concat(o," x ").concat(s," matrix: dimensions do not match."));function l(h,d,g){var p=h.rows,m=h.columns;if(p===d&&m===g)return h;var _=n.zeros(d,g);return _=_.setSubMatrix(h,0,0),_}var u=Math.max(i,o),c=Math.max(a,s);r=l(r,u,c),t=l(t,u,c);function f(h,d,g,p){if(g<=512||p<=512)return h.mmul(d);g%2==1&&p%2==1?(h=l(h,g+1,p+1),d=l(d,g+1,p+1)):g%2==1?(h=l(h,g+1,p),d=l(d,g+1,p)):p%2==1&&(h=l(h,g,p+1),d=l(d,g,p+1));var m=parseInt(h.rows/2,10),_=parseInt(h.columns/2,10),S=h.subMatrix(0,m-1,0,_-1),M=d.subMatrix(0,m-1,0,_-1),R=h.subMatrix(0,m-1,_,h.columns-1),F=d.subMatrix(0,m-1,_,d.columns-1),V=h.subMatrix(m,h.rows-1,0,_-1),nt=d.subMatrix(m,d.rows-1,0,_-1),at=h.subMatrix(m,h.rows-1,_,h.columns-1),xt=d.subMatrix(m,d.rows-1,_,d.columns-1),gt=f(n.add(S,at),n.add(M,xt),m,_),Tt=f(n.add(V,at),M,m,_),Ct=f(S,n.sub(F,xt),m,_),te=f(at,n.sub(nt,M),m,_),Kt=f(n.add(S,R),xt,m,_),ne=f(n.sub(V,S),n.add(M,F),m,_),ee=f(n.sub(R,at),n.add(nt,xt),m,_),ve=n.add(gt,te);ve.sub(Kt),ve.add(ee);var ie=n.add(Ct,Kt),ye=n.add(Tt,te),Ee=n.sub(gt,Tt);Ee.add(Ct),Ee.add(ne);var we=n.zeros(2*ve.rows,2*ve.columns);return we=we.setSubMatrix(ve,0,0),we=we.setSubMatrix(ie,ve.rows,0),we=we.setSubMatrix(ye,0,ve.columns),we=we.setSubMatrix(Ee,ve.rows,ve.columns),we.subMatrix(0,g-1,0,p-1)}return f(r,t,u,c)}},{key:"scaleRows",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof t!="object")throw new TypeError("options must be an object");var r=t.min,i=r===void 0?0:r,a=t.max,o=a===void 0?1:a;if(!Number.isFinite(i))throw new TypeError("min must be a number");if(!Number.isFinite(o))throw new TypeError("max must be a number");if(i>=o)throw new RangeError("min must be smaller than max");for(var s=new rn(this.rows,this.columns),l=0;l<this.rows;l++){var u=this.getRow(l);u.length>0&&TI(u,{min:i,max:o,output:u}),s.setRow(l,u)}return s}},{key:"scaleColumns",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof t!="object")throw new TypeError("options must be an object");var r=t.min,i=r===void 0?0:r,a=t.max,o=a===void 0?1:a;if(!Number.isFinite(i))throw new TypeError("min must be a number");if(!Number.isFinite(o))throw new TypeError("max must be a number");if(i>=o)throw new RangeError("min must be smaller than max");for(var s=new rn(this.rows,this.columns),l=0;l<this.columns;l++){var u=this.getColumn(l);u.length&&TI(u,{min:i,max:o,output:u}),s.setColumn(l,u)}return s}},{key:"flipRows",value:function(){for(var t=Math.ceil(this.columns/2),r=0;r<this.rows;r++)for(var i=0;i<t;i++){var a=this.get(r,i),o=this.get(r,this.columns-1-i);this.set(r,i,o),this.set(r,this.columns-1-i,a)}return this}},{key:"flipColumns",value:function(){for(var t=Math.ceil(this.rows/2),r=0;r<this.columns;r++)for(var i=0;i<t;i++){var a=this.get(i,r),o=this.get(this.rows-1-i,r);this.set(i,r,o),this.set(this.rows-1-i,r,a)}return this}},{key:"kroneckerProduct",value:function(t){t=rn.checkMatrix(t);for(var r=this.rows,i=this.columns,a=t.rows,o=t.columns,s=new rn(r*a,i*o),l=0;l<r;l++)for(var u=0;u<i;u++)for(var c=0;c<a;c++)for(var f=0;f<o;f++)s.set(a*l+c,o*u+f,this.get(l,u)*t.get(c,f));return s}},{key:"kroneckerSum",value:function(t){if(t=rn.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var r=this.rows,i=t.rows,a=this.kroneckerProduct(rn.eye(i,i)),o=rn.eye(r,r).kroneckerProduct(t);return a.add(o)}},{key:"transpose",value:function(){for(var t=new rn(this.columns,this.rows),r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)t.set(i,r,this.get(r,i));return t}},{key:"sortRows",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:DI,r=0;r<this.rows;r++)this.setRow(r,this.getRow(r).sort(t));return this}},{key:"sortColumns",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:DI,r=0;r<this.columns;r++)this.setColumn(r,this.getColumn(r).sort(t));return this}},{key:"subMatrix",value:function(t,r,i,a){PI(this,t,r,i,a);for(var o=new rn(r-t+1,a-i+1),s=t;s<=r;s++)for(var l=i;l<=a;l++)o.set(s-t,l-i,this.get(s,l));return o}},{key:"subMatrixRow",value:function(t,r,i){if(r===void 0&&(r=0),i===void 0&&(i=this.columns-1),r>i||r<0||r>=this.columns||i<0||i>=this.columns)throw new RangeError("Argument out of range");for(var a=new rn(t.length,i-r+1),o=0;o<t.length;o++)for(var s=r;s<=i;s++){if(t[o]<0||t[o]>=this.rows)throw new RangeError("Row index out of range: ".concat(t[o]));a.set(o,s-r,this.get(t[o],s))}return a}},{key:"subMatrixColumn",value:function(t,r,i){if(r===void 0&&(r=0),i===void 0&&(i=this.rows-1),r>i||r<0||r>=this.rows||i<0||i>=this.rows)throw new RangeError("Argument out of range");for(var a=new rn(i-r+1,t.length),o=0;o<t.length;o++)for(var s=r;s<=i;s++){if(t[o]<0||t[o]>=this.columns)throw new RangeError("Column index out of range: ".concat(t[o]));a.set(s-r,o,this.get(s,t[o]))}return a}},{key:"setSubMatrix",value:function(t,r,i){if(t=rn.checkMatrix(t),t.isEmpty())return this;var a=r+t.rows-1,o=i+t.columns-1;PI(this,r,a,i,o);for(var s=0;s<t.rows;s++)for(var l=0;l<t.columns;l++)this.set(r+s,i+l,t.get(s,l));return this}},{key:"selection",value:function(t,r){for(var i=d$(this,t,r),a=new rn(t.length,r.length),o=0;o<i.row.length;o++)for(var s=i.row[o],l=0;l<i.column.length;l++){var u=i.column[l];a.set(o,l,this.get(s,u))}return a}},{key:"trace",value:function(){for(var t=Math.min(this.rows,this.columns),r=0,i=0;i<t;i++)r+=this.get(i,i);return r}},{key:"clone",value:function(){for(var t=new rn(this.rows,this.columns),r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)t.set(r,i,this.get(r,i));return t}},{key:"sum",value:function(t){switch(t){case"row":return p$(this);case"column":return y$(this);case void 0:return m$(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"product",value:function(t){switch(t){case"row":return x$(this);case"column":return b$(this);case void 0:return _$(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"mean",value:function(t){var r=this.sum(t);switch(t){case"row":{for(var i=0;i<this.rows;i++)r[i]/=this.columns;return r}case"column":{for(var a=0;a<this.columns;a++)r[a]/=this.rows;return r}case void 0:return r/this.size;default:throw new Error("invalid option: ".concat(t))}}},{key:"variance",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="object"&&(r=t,t=void 0),typeof r!="object")throw new TypeError("options must be an object");var i=r,a=i.unbiased,o=a===void 0?!0:a,s=i.mean,l=s===void 0?this.mean(t):s;if(typeof o!="boolean")throw new TypeError("unbiased must be a boolean");switch(t){case"row":{if(!Array.isArray(l))throw new TypeError("mean must be an array");return S$(this,o,l)}case"column":{if(!Array.isArray(l))throw new TypeError("mean must be an array");return E$(this,o,l)}case void 0:{if(typeof l!="number")throw new TypeError("mean must be a number");return w$(this,o,l)}default:throw new Error("invalid option: ".concat(t))}}},{key:"standardDeviation",value:function(t,r){typeof t=="object"&&(r=t,t=void 0);var i=this.variance(t,r);if(t===void 0)return Math.sqrt(i);for(var a=0;a<i.length;a++)i[a]=Math.sqrt(i[a]);return i}},{key:"center",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="object"&&(r=t,t=void 0),typeof r!="object")throw new TypeError("options must be an object");var i=r,a=i.center,o=a===void 0?this.mean(t):a;switch(t){case"row":{if(!Array.isArray(o))throw new TypeError("center must be an array");return C$(this,o),this}case"column":{if(!Array.isArray(o))throw new TypeError("center must be an array");return M$(this,o),this}case void 0:{if(typeof o!="number")throw new TypeError("center must be a number");return A$(this,o),this}default:throw new Error("invalid option: ".concat(t))}}},{key:"scale",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="object"&&(r=t,t=void 0),typeof r!="object")throw new TypeError("options must be an object");var i=r.scale;switch(t){case"row":{if(i===void 0)i=T$(this);else if(!Array.isArray(i))throw new TypeError("scale must be an array");return I$(this,i),this}case"column":{if(i===void 0)i=O$(this);else if(!Array.isArray(i))throw new TypeError("scale must be an array");return P$(this,i),this}case void 0:{if(i===void 0)i=D$(this);else if(typeof i!="number")throw new TypeError("scale must be a number");return L$(this,i),this}default:throw new Error("invalid option: ".concat(t))}}},{key:"toString",value:function(t){return OI(this,t)}}],[{key:"from1DArray",value:function(t,r,i){var a=t*r;if(a!==i.length)throw new RangeError("data length does not match given dimensions");for(var o=new rn(t,r),s=0;s<t;s++)for(var l=0;l<r;l++)o.set(s,l,i[s*r+l]);return o}},{key:"rowVector",value:function(t){for(var r=new rn(1,t.length),i=0;i<t.length;i++)r.set(0,i,t[i]);return r}},{key:"columnVector",value:function(t){for(var r=new rn(t.length,1),i=0;i<t.length;i++)r.set(i,0,t[i]);return r}},{key:"zeros",value:function(t,r){return new rn(t,r)}},{key:"ones",value:function(t,r){return new rn(t,r).fill(1)}},{key:"rand",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof i!="object")throw new TypeError("options must be an object");for(var a=i.random,o=a===void 0?Math.random:a,s=new rn(t,r),l=0;l<t;l++)for(var u=0;u<r;u++)s.set(l,u,o());return s}},{key:"randInt",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof i!="object")throw new TypeError("options must be an object");var a=i.min,o=a===void 0?0:a,s=i.max,l=s===void 0?1e3:s,u=i.random,c=u===void 0?Math.random:u;if(!Number.isInteger(o))throw new TypeError("min must be an integer");if(!Number.isInteger(l))throw new TypeError("max must be an integer");if(o>=l)throw new RangeError("min must be smaller than max");for(var f=l-o,h=new rn(t,r),d=0;d<t;d++)for(var g=0;g<r;g++){var p=o+Math.round(c()*f);h.set(d,g,p)}return h}},{key:"eye",value:function(t,r,i){r===void 0&&(r=t),i===void 0&&(i=1);for(var a=Math.min(t,r),o=this.zeros(t,r),s=0;s<a;s++)o.set(s,s,i);return o}},{key:"diag",value:function(t,r,i){var a=t.length;r===void 0&&(r=a),i===void 0&&(i=r);for(var o=Math.min(a,r,i),s=this.zeros(r,i),l=0;l<o;l++)s.set(l,l,t[l]);return s}},{key:"min",value:function(t,r){t=this.checkMatrix(t),r=this.checkMatrix(r);for(var i=t.rows,a=t.columns,o=new rn(i,a),s=0;s<i;s++)for(var l=0;l<a;l++)o.set(s,l,Math.min(t.get(s,l),r.get(s,l)));return o}},{key:"max",value:function(t,r){t=this.checkMatrix(t),r=this.checkMatrix(r);for(var i=t.rows,a=t.columns,o=new this(i,a),s=0;s<i;s++)for(var l=0;l<a;l++)o.set(s,l,Math.max(t.get(s,l),r.get(s,l)));return o}},{key:"checkMatrix",value:function(t){return n.isMatrix(t)?t:new rn(t)}},{key:"isMatrix",value:function(t){return t!=null&&t.klass==="Matrix"}}]),n}();va.prototype.klass="Matrix",typeof Symbol!="undefined"&&(va.prototype[Symbol.for("nodejs.util.inspect.custom")]=u$);function DI(n,e){return n-e}va.random=va.rand,va.randomInt=va.randInt,va.diagonal=va.diag,va.prototype.diagonal=va.prototype.diag,va.identity=va.eye,va.prototype.negate=va.prototype.neg,va.prototype.tensorProduct=va.prototype.kroneckerProduct;var rn=function(n){(0,wa.Z)(t,n);var e=(0,AI.Z)(t);function t(r,i){var a;if((0,Pr.Z)(this,t),a=e.call(this),t.isMatrix(r))return(0,Oa.Z)(a,r.clone());if(Number.isInteger(r)&&r>=0)if(a.data=[],Number.isInteger(i)&&i>=0)for(var o=0;o<r;o++)a.data.push(new Float64Array(i));else throw new TypeError("nColumns must be a positive integer");else if(Array.isArray(r)){var s=r;if(r=s.length,i=r?s[0].length:0,typeof i!="number")throw new TypeError("Data must be a 2D array with at least one element");a.data=[];for(var l=0;l<r;l++){if(s[l].length!==i)throw new RangeError("Inconsistent array dimensions");a.data.push(Float64Array.from(s[l]))}}else throw new TypeError("First argument must be a positive number or an array");return a.rows=r,a.columns=i,a}return(0,Fr.Z)(t,[{key:"set",value:function(i,a,o){return this.data[i][a]=o,this}},{key:"get",value:function(i,a){return this.data[i][a]}},{key:"removeRow",value:function(i){return ys(this,i),this.data.splice(i,1),this.rows-=1,this}},{key:"addRow",value:function(i,a){return a===void 0&&(a=i,i=this.rows),ys(this,i,!0),a=Float64Array.from(Qh(this,a)),this.data.splice(i,0,a),this.rows+=1,this}},{key:"removeColumn",value:function(i){ms(this,i);for(var a=0;a<this.rows;a++){for(var o=new Float64Array(this.columns-1),s=0;s<i;s++)o[s]=this.data[a][s];for(var l=i+1;l<this.columns;l++)o[l-1]=this.data[a][l];this.data[a]=o}return this.columns-=1,this}},{key:"addColumn",value:function(i,a){typeof a=="undefined"&&(a=i,i=this.columns),ms(this,i,!0),a=Jh(this,a);for(var o=0;o<this.rows;o++){for(var s=new Float64Array(this.columns+1),l=0;l<i;l++)s[l]=this.data[o][l];for(s[l++]=a[o];l<this.columns+1;l++)s[l]=this.data[o][l-1];this.data[o]=s}return this.columns+=1,this}}]),t}(va);h$(va,rn);var R$=function(n){(0,wa.Z)(t,n);var e=(0,AI.Z)(t);function t(r){var i;return(0,Pr.Z)(this,t),i=e.call(this),i.data=r,i.rows=r.length,i.columns=r[0].length,i}return(0,Fr.Z)(t,[{key:"set",value:function(i,a,o){return this.data[i][a]=o,this}},{key:"get",value:function(i,a){return this.data[i][a]}}]),t}(va);function td(n,e){var t=0;return Math.abs(n)>Math.abs(e)?(t=e/n,Math.abs(n)*Math.sqrt(1+t*t)):e!==0?(t=n/e,Math.abs(e)*Math.sqrt(1+t*t)):0}var LI=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if((0,Pr.Z)(this,n),e=R$.checkMatrix(e),e.isEmpty())throw new Error("Matrix must be non-empty");var r=e.rows,i=e.columns,a=t.computeLeftSingularVectors,o=a===void 0?!0:a,s=t.computeRightSingularVectors,l=s===void 0?!0:s,u=t.autoTranspose,c=u===void 0?!1:u,f=Boolean(o),h=Boolean(l),d=!1,g;if(r<i)if(!c)g=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{g=e.transpose(),r=g.rows,i=g.columns,d=!0;var p=f;f=h,h=p}else g=e.clone();for(var m=Math.min(r,i),_=Math.min(r+1,i),S=new Float64Array(_),M=new rn(r,m),R=new rn(i,i),F=new Float64Array(i),V=new Float64Array(r),nt=new Float64Array(_),at=0;at<_;at++)nt[at]=at;for(var xt=Math.min(r-1,i),gt=Math.max(0,Math.min(i-2,r)),Tt=Math.max(xt,gt),Ct=0;Ct<Tt;Ct++){if(Ct<xt){S[Ct]=0;for(var te=Ct;te<r;te++)S[Ct]=td(S[Ct],g.get(te,Ct));if(S[Ct]!==0){g.get(Ct,Ct)<0&&(S[Ct]=-S[Ct]);for(var Kt=Ct;Kt<r;Kt++)g.set(Kt,Ct,g.get(Kt,Ct)/S[Ct]);g.set(Ct,Ct,g.get(Ct,Ct)+1)}S[Ct]=-S[Ct]}for(var ne=Ct+1;ne<i;ne++){if(Ct<xt&&S[Ct]!==0){for(var ee=0,ve=Ct;ve<r;ve++)ee+=g.get(ve,Ct)*g.get(ve,ne);ee=-ee/g.get(Ct,Ct);for(var ie=Ct;ie<r;ie++)g.set(ie,ne,g.get(ie,ne)+ee*g.get(ie,Ct))}F[ne]=g.get(Ct,ne)}if(f&&Ct<xt)for(var ye=Ct;ye<r;ye++)M.set(ye,Ct,g.get(ye,Ct));if(Ct<gt){F[Ct]=0;for(var Ee=Ct+1;Ee<i;Ee++)F[Ct]=td(F[Ct],F[Ee]);if(F[Ct]!==0){F[Ct+1]<0&&(F[Ct]=0-F[Ct]);for(var we=Ct+1;we<i;we++)F[we]/=F[Ct];F[Ct+1]+=1}if(F[Ct]=-F[Ct],Ct+1<r&&F[Ct]!==0){for(var Pe=Ct+1;Pe<r;Pe++)V[Pe]=0;for(var Ve=Ct+1;Ve<r;Ve++)for(var he=Ct+1;he<i;he++)V[Ve]+=F[he]*g.get(Ve,he);for(var Te=Ct+1;Te<i;Te++)for(var Je=-F[Te]/F[Ct+1],Ze=Ct+1;Ze<r;Ze++)g.set(Ze,Te,g.get(Ze,Te)+Je*V[Ze])}if(h)for(var ar=Ct+1;ar<i;ar++)R.set(ar,Ct,F[ar])}}var cr=Math.min(i,r+1);if(xt<i&&(S[xt]=g.get(xt,xt)),r<cr&&(S[cr-1]=0),gt+1<cr&&(F[gt]=g.get(gt,cr-1)),F[cr-1]=0,f){for(var Dr=xt;Dr<m;Dr++){for(var sn=0;sn<r;sn++)M.set(sn,Dr,0);M.set(Dr,Dr,1)}for(var Wr=xt-1;Wr>=0;Wr--)if(S[Wr]!==0){for(var ai=Wr+1;ai<m;ai++){for(var Ln=0,gi=Wr;gi<r;gi++)Ln+=M.get(gi,Wr)*M.get(gi,ai);Ln=-Ln/M.get(Wr,Wr);for(var Po=Wr;Po<r;Po++)M.set(Po,ai,M.get(Po,ai)+Ln*M.get(Po,Wr))}for(var Vn=Wr;Vn<r;Vn++)M.set(Vn,Wr,-M.get(Vn,Wr));M.set(Wr,Wr,1+M.get(Wr,Wr));for(var ti=0;ti<Wr-1;ti++)M.set(ti,Wr,0)}else{for(var Kn=0;Kn<r;Kn++)M.set(Kn,Wr,0);M.set(Wr,Wr,1)}}if(h)for(var xn=i-1;xn>=0;xn--){if(xn<gt&&F[xn]!==0)for(var oi=xn+1;oi<i;oi++){for(var ln=0,si=xn+1;si<i;si++)ln+=R.get(si,xn)*R.get(si,oi);ln=-ln/R.get(xn+1,xn);for(var Xn=xn+1;Xn<i;Xn++)R.set(Xn,oi,R.get(Xn,oi)+ln*R.get(Xn,xn))}for(var oa=0;oa<i;oa++)R.set(oa,xn,0);R.set(xn,xn,1)}for(var Gn=cr-1,cn=0,ei=Number.EPSILON;cr>0;){var Cr=void 0,qn=void 0;for(Cr=cr-2;Cr>=-1&&Cr!==-1;Cr--){var nl=Number.MIN_VALUE+ei*Math.abs(S[Cr]+Math.abs(S[Cr+1]));if(Math.abs(F[Cr])<=nl||Number.isNaN(F[Cr])){F[Cr]=0;break}}if(Cr===cr-2)qn=4;else{var sa=void 0;for(sa=cr-1;sa>=Cr&&sa!==Cr;sa--){var La=(sa!==cr?Math.abs(F[sa]):0)+(sa!==Cr+1?Math.abs(F[sa-1]):0);if(Math.abs(S[sa])<=ei*La){S[sa]=0;break}}sa===Cr?qn=3:sa===cr-1?qn=1:(qn=2,Cr=sa)}switch(Cr++,qn){case 1:{var Za=F[cr-2];F[cr-2]=0;for(var Ui=cr-2;Ui>=Cr;Ui--){var Ra=td(S[Ui],Za),Ki=S[Ui]/Ra,ya=Za/Ra;if(S[Ui]=Ra,Ui!==Cr&&(Za=-ya*F[Ui-1],F[Ui-1]=Ki*F[Ui-1]),h)for(var il=0;il<i;il++)Ra=Ki*R.get(il,Ui)+ya*R.get(il,cr-1),R.set(il,cr-1,-ya*R.get(il,Ui)+Ki*R.get(il,cr-1)),R.set(il,Ui,Ra)}break}case 2:{var cp=F[Cr-1];F[Cr-1]=0;for(var Ka=Cr;Ka<cr;Ka++){var Do=td(S[Ka],cp),$u=S[Ka]/Do,hi=cp/Do;if(S[Ka]=Do,cp=-hi*F[Ka],F[Ka]=$u*F[Ka],f)for(var $i=0;$i<r;$i++)Do=$u*M.get($i,Ka)+hi*M.get($i,Cr-1),M.set($i,Cr-1,-hi*M.get($i,Ka)+$u*M.get($i,Cr-1)),M.set($i,Ka,Do)}break}case 3:{var qi=Math.max(Math.abs(S[cr-1]),Math.abs(S[cr-2]),Math.abs(F[cr-2]),Math.abs(S[Cr]),Math.abs(F[Cr])),Na=S[cr-1]/qi,al=S[cr-2]/qi,Ef=F[cr-2]/qi,Md=S[Cr]/qi,fp=F[Cr]/qi,ol=((al+Na)*(al-Na)+Ef*Ef)/2,wf=Na*Ef*(Na*Ef),Qu=0;(ol!==0||wf!==0)&&(ol<0?Qu=0-Math.sqrt(ol*ol+wf):Qu=Math.sqrt(ol*ol+wf),Qu=wf/(ol+Qu));for(var Cf=(Md+Na)*(Md-Na)+Qu,Ad=Md*fp,Yn=Cr;Yn<cr-1;Yn++){var so=td(Cf,Ad);so===0&&(so=Number.MIN_VALUE);var bs=Cf/so,_s=Ad/so;if(Yn!==Cr&&(F[Yn-1]=so),Cf=bs*S[Yn]+_s*F[Yn],F[Yn]=bs*F[Yn]-_s*S[Yn],Ad=_s*S[Yn+1],S[Yn+1]=bs*S[Yn+1],h)for(var Ju=0;Ju<i;Ju++)so=bs*R.get(Ju,Yn)+_s*R.get(Ju,Yn+1),R.set(Ju,Yn+1,-_s*R.get(Ju,Yn)+bs*R.get(Ju,Yn+1)),R.set(Ju,Yn,so);if(so=td(Cf,Ad),so===0&&(so=Number.MIN_VALUE),bs=Cf/so,_s=Ad/so,S[Yn]=so,Cf=bs*F[Yn]+_s*S[Yn+1],S[Yn+1]=-_s*F[Yn]+bs*S[Yn+1],Ad=_s*F[Yn+1],F[Yn+1]=bs*F[Yn+1],f&&Yn<r-1)for(var qu=0;qu<r;qu++)so=bs*M.get(qu,Yn)+_s*M.get(qu,Yn+1),M.set(qu,Yn+1,-_s*M.get(qu,Yn)+bs*M.get(qu,Yn+1)),M.set(qu,Yn,so)}F[cr-2]=Cf,cn=cn+1;break}case 4:{if(S[Cr]<=0&&(S[Cr]=S[Cr]<0?-S[Cr]:0,h))for(var Fm=0;Fm<=Gn;Fm++)R.set(Fm,Cr,-R.get(Fm,Cr));for(;Cr<Gn&&!(S[Cr]>=S[Cr+1]);){var hp=S[Cr];if(S[Cr]=S[Cr+1],S[Cr+1]=hp,h&&Cr<i-1)for(var Td=0;Td<i;Td++)hp=R.get(Td,Cr+1),R.set(Td,Cr+1,R.get(Td,Cr)),R.set(Td,Cr,hp);if(f&&Cr<r-1)for(var Id=0;Id<r;Id++)hp=M.get(Id,Cr+1),M.set(Id,Cr+1,M.get(Id,Cr)),M.set(Id,Cr,hp);Cr++}cn=0,cr--;break}}}if(d){var Qat=R;R=M,M=Qat}this.m=r,this.n=i,this.s=S,this.U=M,this.V=R}return(0,Fr.Z)(n,[{key:"solve",value:function(t){for(var r=t,i=this.threshold,a=this.s.length,o=rn.zeros(a,a),s=0;s<a;s++)Math.abs(this.s[s])<=i?o.set(s,s,0):o.set(s,s,1/this.s[s]);for(var l=this.U,u=this.rightSingularVectors,c=u.mmul(o),f=u.rows,h=l.rows,d=rn.zeros(f,h),g=0;g<f;g++)for(var p=0;p<h;p++){for(var m=0,_=0;_<a;_++)m+=c.get(g,_)*l.get(p,_);d.set(g,p,m)}return d.mmul(r)}},{key:"solveForDiagonal",value:function(t){return this.solve(rn.diag(t))}},{key:"inverse",value:function(){for(var t=this.V,r=this.threshold,i=t.rows,a=t.columns,o=new rn(i,this.s.length),s=0;s<i;s++)for(var l=0;l<a;l++)Math.abs(this.s[l])>r&&o.set(s,l,t.get(s,l)/this.s[l]);for(var u=this.U,c=u.rows,f=u.columns,h=new rn(i,c),d=0;d<i;d++)for(var g=0;g<c;g++){for(var p=0,m=0;m<f;m++)p+=o.get(d,m)*u.get(g,m);h.set(d,g,p)}return h}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,r=0,i=this.s,a=0,o=i.length;a<o;a++)i[a]>t&&r++;return r}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return rn.diag(this.s)}}]),n}();class N${constructor(e){this.distances=e.distances,this.dimension=e.dimension||2,this.linkDistance=e.linkDistance}layout(){const e=this,{dimension:t,distances:r,linkDistance:i}=e;try{const a=rn.mul(rn.pow(r,2),-.5),o=a.mean("row"),s=a.mean("column"),l=a.mean();a.add(l).subRowVector(o).subColumnVector(s);const u=new LI(a),c=rn.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map(f=>rn.mul([f],[c]).toJSON()[0].splice(0,t))}catch(a){const o=[];for(let s=0;s<r.length;s++){const l=Math.random()*i,u=Math.random()*i;o.push([l,u])}return o}}}const k$=800;class B${constructor(e){this.disp=[],this.positions=e.positions,this.adjMatrix=e.adjMatrix,this.focusID=e.focusID,this.radii=e.radii,this.iterations=e.iterations||10,this.height=e.height||10,this.width=e.width||10,this.speed=e.speed||100,this.gravity=e.gravity||10,this.nodeSizeFunc=e.nodeSizeFunc,this.k=e.k||5,this.strictRadial=e.strictRadial,this.nodes=e.nodes}layout(){const e=this,t=e.positions,r=[],i=e.iterations,a=e.width/10;e.maxDisplace=a,e.disp=r;for(let o=0;o<i;o++)t.forEach((s,l)=>{r[l]={x:0,y:0}}),e.getRepulsion(),e.updatePositions();return t}getRepulsion(){const e=this,t=e.positions,r=e.nodes,i=e.disp,a=e.k,o=e.radii||[];t.forEach((s,l)=>{i[l]={x:0,y:0},t.forEach((u,c)=>{if(l===c||o[l]!==o[c])return;let f=s[0]-u[0],h=s[1]-u[1],d=Math.sqrt(f*f+h*h);if(d===0){d=1;const g=l>c?1:-1;f=.01*g,h=.01*g}if(d<e.nodeSizeFunc(r[l])/2+e.nodeSizeFunc(r[c])/2){const g=a*a/d;i[l].x+=f/d*g,i[l].y+=h/d*g}})})}updatePositions(){const e=this,t=e.positions,r=e.disp,i=e.speed,a=e.strictRadial,o=e.focusID,s=e.maxDisplace||e.width/10;a&&r.forEach((u,c)=>{const f=t[c][0]-t[o][0],h=t[c][1]-t[o][1],d=Math.sqrt(f*f+h*h);let g=h/d,p=-f/d;const m=Math.sqrt(u.x*u.x+u.y*u.y);let _=Math.acos((g*u.x+p*u.y)/m);_>Math.PI/2&&(_-=Math.PI/2,g*=-1,p*=-1);const S=Math.cos(_)*m;u.x=g*S,u.y=p*S});const l=e.radii;t.forEach((u,c)=>{if(c===o)return;const f=Math.sqrt(r[c].x*r[c].x+r[c].y*r[c].y);if(f>0&&c!==o){const h=Math.min(s*(i/k$),f);if(u[0]+=r[c].x/f*h,u[1]+=r[c].y/f*h,a){let d=u[0]-t[o][0],g=u[1]-t[o][1];const p=Math.sqrt(d*d+g*g);d=d/p*l[c],g=g/p*l[c],u[0]=t[o][0]+d,u[1]=t[o][1]+g}}})}}function F$(n){const e=n.length,t=n[0].length,r=[];for(let i=0;i<e;i++){const a=[];for(let o=0;o<t;o++)n[i][o]!==0?a.push(1/(n[i][o]*n[i][o])):a.push(0);r.push(a)}return r}function G$(n,e){let t=-1;return n.forEach((r,i)=>{r.id===e&&(t=i)}),t}function RI(n,e){return Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1]))}class z$ extends ro{constructor(e){super();this.maxIteration=1e3,this.focusNode=null,this.unitRadius=null,this.linkDistance=50,this.preventOverlap=!1,this.strictRadial=!0,this.maxPreventOverlapIteration=200,this.sortStrength=10,this.nodes=[],this.edges=[],this.updateCfg(e)}getDefaultCfg(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}execute(){const e=this,t=e.nodes,r=e.edges||[];if(!t||t.length===0){e.onLayoutEnd&&e.onLayoutEnd();return}!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);const i=e.center;if(t.length===1){t[0].x=i[0],t[0].y=i[1],e.onLayoutEnd&&e.onLayoutEnd();return}const a=e.linkDistance;let o=null;if(Ig(e.focusNode)){let Tt=!1;for(let Ct=0;Ct<t.length;Ct++)t[Ct].id===e.focusNode&&(o=t[Ct],e.focusNode=o,Tt=!0,Ct=t.length);Tt||(o=null)}else o=e.focusNode;o||(o=t[0],e.focusNode=o);const s=G$(t,o.id);e.focusIndex=s;const l=cI({nodes:t,edges:r},!1),u=uI(l),c=e.maxToFocus(u,s);e.handleInfinity(u,s,c+1),e.distances=u;const f=u[s],h=e.width||500,d=e.height||500;let g=h-i[0]>i[0]?i[0]:h-i[0],p=d-i[1]>i[1]?i[1]:d-i[1];g===0&&(g=h/2),p===0&&(p=d/2);const m=p>g?g:p,_=Math.max(...f),S=[];f.forEach((Tt,Ct)=>{e.unitRadius||(e.unitRadius=m/_),S[Ct]=Tt*e.unitRadius}),e.radii=S;const M=e.eIdealDisMatrix();e.eIdealDistances=M;const R=F$(M);e.weights=R;let V=new N$({linkDistance:a,distances:M}).layout();V.forEach(Tt=>{Fy(Tt[0])&&(Tt[0]=Math.random()*a),Fy(Tt[1])&&(Tt[1]=Math.random()*a)}),e.positions=V,V.forEach((Tt,Ct)=>{t[Ct].x=Tt[0]+i[0],t[Ct].y=Tt[1]+i[1]}),V.forEach(Tt=>{Tt[0]-=V[s][0],Tt[1]-=V[s][1]}),e.run();const nt=e.preventOverlap,at=e.nodeSize;let xt;const gt=e.strictRadial;if(nt){const Tt=e.nodeSpacing;let Ct;Mr(Tt)?Ct=()=>Tt:ku(Tt)?Ct=Tt:Ct=()=>0,at?Ia(at)?xt=ne=>(at[0]>at[1]?at[0]:at[1])+Ct(ne):xt=ne=>at+Ct(ne):xt=ne=>ne.size?Ia(ne.size)?(ne.size[0]>ne.size[1]?ne.size[0]:ne.size[1])+Ct(ne):ne.size+Ct(ne):10+Ct(ne);const te={nodes:t,nodeSizeFunc:xt,adjMatrix:l,positions:V,radii:S,height:d,width:h,strictRadial:gt,focusID:s,iterations:e.maxPreventOverlapIteration||200,k:V.length/4.5};V=new B$(te).layout()}return V.forEach((Tt,Ct)=>{t[Ct].x=Tt[0]+i[0],t[Ct].y=Tt[1]+i[1]}),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:r}}run(){const e=this,t=e.maxIteration,r=e.positions||[],i=e.weights||[],a=e.eIdealDistances||[],o=e.radii||[];for(let s=0;s<=t;s++){const l=s/t;e.oneIteration(l,r,o,a,i)}}oneIteration(e,t,r,i,a){const o=this,s=1-e,l=o.focusIndex;t.forEach((u,c)=>{const f=RI(u,[0,0]),h=f===0?0:1/f;if(c===l)return;let d=0,g=0,p=0;t.forEach((_,S)=>{if(c===S)return;const M=RI(u,_),R=M===0?0:1/M,F=i[S][c];p+=a[c][S],d+=a[c][S]*(_[0]+F*(u[0]-_[0])*R),g+=a[c][S]*(_[1]+F*(u[1]-_[1])*R)});const m=r[c]===0?0:1/r[c];p*=s,p+=e*m*m,d*=s,d+=e*m*u[0]*h,u[0]=d/p,g*=s,g+=e*m*u[1]*h,u[1]=g/p})}eIdealDisMatrix(){const e=this,t=e.nodes;if(!t)return[];const r=e.distances,i=e.linkDistance,a=e.radii||[],o=e.unitRadius||50,s=[];return r&&r.forEach((l,u)=>{const c=[];l.forEach((f,h)=>{if(u===h)c.push(0);else if(a[u]===a[h])if(e.sortBy==="data")c.push(f*(Math.abs(u-h)*e.sortStrength)/(a[u]/o));else if(e.sortBy){let d=t[u][e.sortBy]||0,g=t[h][e.sortBy]||0;Ig(d)&&(d=d.charCodeAt(0)),Ig(g)&&(g=g.charCodeAt(0)),c.push(f*(Math.abs(d-g)*e.sortStrength)/(a[u]/o))}else c.push(f*i/(a[u]/o));else{const d=(i+o)/2;c.push(f*d)}}),s.push(c)}),s}handleInfinity(e,t,r){const i=e.length;for(let a=0;a<i;a++)if(e[t][a]===Infinity){e[t][a]=r,e[a][t]=r;for(let o=0;o<i;o++)e[a][o]!==Infinity&&e[t][o]===Infinity&&(e[t][o]=r+e[a][o],e[o][t]=r+e[a][o])}for(let a=0;a<i;a++)if(a!==t){for(let o=0;o<i;o++)if(e[a][o]===Infinity){let s=Math.abs(e[t][a]-e[t][o]);s=s===0?1:s,e[a][o]=s}}}maxToFocus(e,t){let r=0;for(let i=0;i<e[t].length;i++)e[t][i]!==Infinity&&(r=e[t][i]>r?e[t][i]:r);return r}getType(){return"radial"}}class U$ extends ro{constructor(e){super();this.nodeSize=30,this.minNodeSpacing=10,this.preventOverlap=!1,this.equidistant=!1,this.startAngle=3/2*Math.PI,this.clockwise=!0,this.sortBy="degree",this.nodes=[],this.edges=[],this.width=300,this.height=300,this.onLayoutEnd=()=>{},this.updateCfg(e)}getDefaultCfg(){return{nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}execute(){const e=this,t=e.nodes,r=e.edges,i=t.length;if(i===0){e.onLayoutEnd&&e.onLayoutEnd();return}!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);const a=e.center;if(i===1){t[0].x=a[0],t[0].y=a[1],e.onLayoutEnd&&e.onLayoutEnd();return}const o=[];let s;Ia(e.nodeSize)?s=Math.max(e.nodeSize[0],e.nodeSize[1]):s=e.nodeSize,t.forEach(g=>{o.push(g);let p=s;Ia(g.size)?p=Math.max(g.size[0],g.size[1]):Mr(g.size)&&(p=g.size),s=Math.max(s,p)}),e.clockwise=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise;const l={},u={};if(o.forEach((g,p)=>{l[g.id]=g,u[g.id]=p}),(e.sortBy==="degree"||!Ig(e.sortBy)||o[0][e.sortBy]===void 0)&&(e.sortBy="degree",!Mr(t[0].degree))){const g=Og(t.length,u,r);o.forEach((p,m)=>{p.degree=g[m]})}o.sort((g,p)=>p[e.sortBy]-g[e.sortBy]),e.maxValueNode=o[0],e.maxLevelDiff=e.maxLevelDiff||e.maxValueNode[e.sortBy]/4;const c=[[]];let f=c[0];o.forEach(g=>{if(f.length>0){const p=Math.abs(f[0][e.sortBy]-g[e.sortBy]);e.maxLevelDiff&&p>=e.maxLevelDiff&&(f=[],c.push(f))}f.push(g)});let h=s+e.minNodeSpacing;if(!e.preventOverlap){const g=c.length>0&&c[0].length>1,m=(Math.min(e.width,e.height)/2-h)/(c.length+(g?1:0));h=Math.min(h,m)}let d=0;if(c.forEach(g=>{let p=e.sweep;p===void 0&&(p=2*Math.PI-2*Math.PI/g.length);const m=g.dTheta=p/Math.max(1,g.length-1);if(g.length>1&&e.preventOverlap){const _=Math.cos(m)-Math.cos(0),S=Math.sin(m)-Math.sin(0),M=Math.sqrt(h*h/(_*_+S*S));d=Math.max(M,d)}g.r=d,d+=h}),e.equidistant){let g=0,p=0;for(let m=0;m<c.length;m++){const S=c[m].r-p;g=Math.max(g,S)}p=0,c.forEach((m,_)=>{_===0&&(p=m.r),m.r=p,p+=g})}return c.forEach(g=>{const p=g.dTheta,m=g.r;g.forEach((_,S)=>{const M=e.startAngle+(e.clockwise?1:-1)*p*S;_.x=a[0]+m*Math.cos(M),_.y=a[1]+m*Math.sin(M)})}),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:r}}getType(){return"concentric"}}class W$ extends ro{constructor(e){super();this.center=[0,0],this.linkDistance=50,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(e)}getDefaultCfg(){return{center:[0,0],linkDistance:50}}execute(){const e=this,{nodes:t,edges:r=[]}=e,i=e.center;if(!t||t.length===0){e.onLayoutEnd&&e.onLayoutEnd();return}if(t.length===1){t[0].x=i[0],t[0].y=i[1],e.onLayoutEnd&&e.onLayoutEnd();return}const a=e.linkDistance,o=cI({nodes:t,edges:r},!1),s=uI(o);e.handleInfinity(s);const l=iK(s,a);e.scaledDistances=l;const u=e.runMDS();return e.positions=u,u.forEach((c,f)=>{t[f].x=c[0]+i[0],t[f].y=c[1]+i[1]}),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:r}}runMDS(){const e=this,t=2,r=e.scaledDistances,i=rn.mul(rn.pow(r,2),-.5),a=i.mean("row"),o=i.mean("column"),s=i.mean();i.add(s).subRowVector(a).subColumnVector(o);const l=new LI(i),u=rn.sqrt(l.diagonalMatrix).diagonal();return l.leftSingularVectors.toJSON().map(c=>rn.mul([c],[u]).toJSON()[0].splice(0,t))}handleInfinity(e){let t=-999999;e.forEach(r=>{r.forEach(i=>{i!==Infinity&&t<i&&(t=i)})}),e.forEach((r,i)=>{r.forEach((a,o)=>{a===Infinity&&(e[i][o]=t)})})}getType(){return"mds"}}const V$=800;class X$ extends ro{constructor(e){super();this.maxIteration=1e3,this.gravity=10,this.speed=5,this.clustering=!1,this.clusterGravity=10,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.onLayoutEnd=()=>{},this.tick=()=>{},this.updateCfg(e)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}execute(){const e=this,t=e.nodes;if(e.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(e.timeInterval),!t||t.length===0){e.onLayoutEnd&&e.onLayoutEnd();return}!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);const r=e.center;if(t.length===1){t[0].x=r[0],t[0].y=r[1],e.onLayoutEnd&&e.onLayoutEnd();return}const i={},a={};return t.forEach((o,s)=>{Mr(o.x)||(o.x=Math.random()*this.width),Mr(o.y)||(o.y=Math.random()*this.height),i[o.id]=o,a[o.id]=s}),e.nodeMap=i,e.nodeIdxMap=a,e.run()}run(){const e=this,t=e.nodes;if(!t)return;const r=e.edges,i=e.maxIteration,a=e.center,o=e.height*e.width,s=Math.sqrt(o)/10,l=o/(t.length+1),u=Math.sqrt(l),c=e.gravity,f=e.speed,h=e.clustering,d={};if(h){t.forEach(p=>{if(d[p.cluster]===void 0){const _={name:p.cluster,cx:0,cy:0,count:0};d[p.cluster]=_}const m=d[p.cluster];Mr(p.x)&&(m.cx+=p.x),Mr(p.y)&&(m.cy+=p.y),m.count++});for(const p in d)d[p].cx/=d[p].count,d[p].cy/=d[p].count}if(typeof window=="undefined")return;let g=0;return this.timeInterval=window.setInterval(()=>{if(!t)return;const p=[];if(t.forEach((m,_)=>{p[_]={x:0,y:0}}),e.applyCalculate(t,r,p,u,l),h){const m=e.clusterGravity||c;t.forEach((_,S)=>{if(!Mr(_.x)||!Mr(_.y))return;const M=d[_.cluster],R=Math.sqrt((_.x-M.cx)*(_.x-M.cx)+(_.y-M.cy)*(_.y-M.cy)),F=u*m;p[S].x-=F*(_.x-M.cx)/R,p[S].y-=F*(_.y-M.cy)/R});for(const _ in d)d[_].cx=0,d[_].cy=0,d[_].count=0;t.forEach(_=>{const S=d[_.cluster];Mr(_.x)&&(S.cx+=_.x),Mr(_.y)&&(S.cy+=_.y),S.count++});for(const _ in d)d[_].cx/=d[_].count,d[_].cy/=d[_].count}t.forEach((m,_)=>{if(!Mr(m.x)||!Mr(m.y))return;const S=.01*u*c;p[_].x-=S*(m.x-a[0]),p[_].y-=S*(m.y-a[1])}),t.forEach((m,_)=>{if(Mr(m.fx)&&Mr(m.fy)){m.x=m.fx,m.y=m.fy;return}if(!Mr(m.x)||!Mr(m.y))return;const S=Math.sqrt(p[_].x*p[_].x+p[_].y*p[_].y);if(S>0){const M=Math.min(s*(f/V$),S);m.x+=p[_].x/S*M,m.y+=p[_].y/S*M}}),e.tick&&e.tick(),g++,g>=i&&(e.onLayoutEnd&&e.onLayoutEnd(),window.clearInterval(e.timeInterval))},0),{nodes:t,edges:r}}applyCalculate(e,t,r,i,a){const o=this;o.calRepulsive(e,r,a),t&&o.calAttractive(t,r,i)}calRepulsive(e,t,r){e.forEach((i,a)=>{t[a]={x:0,y:0},e.forEach((o,s)=>{if(a===s||!Mr(i.x)||!Mr(o.x)||!Mr(i.y)||!Mr(o.y))return;let l=i.x-o.x,u=i.y-o.y,c=l*l+u*u;if(c===0){c=1;const h=a>s?1:-1;l=.01*h,u=.01*h}const f=r/c;t[a].x+=l*f,t[a].y+=u*f})})}calAttractive(e,t,r){e.forEach(i=>{if(!i.source||!i.target)return;const a=this.nodeIdxMap[i.source],o=this.nodeIdxMap[i.target];if(a===o)return;const s=this.nodeMap[i.source],l=this.nodeMap[i.target];if(!Mr(l.x)||!Mr(s.x)||!Mr(l.y)||!Mr(s.y))return;const u=l.x-s.x,c=l.y-s.y,f=Math.sqrt(u*u+c*c),h=f*f/r;t[o].x-=u/f*h,t[o].y-=c/f*h,t[a].x+=u/f*h,t[a].y+=c/f*h})}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}destroy(){const e=this;e.stop(),e.tick=null,e.nodes=null,e.edges=null,e.destroyed=!0}getType(){return"fruchterman"}}function Gr(n,e,t,r){!t||Object.defineProperty(n,e,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(r):void 0})}function zr(n,e,t,r,i){var a={};return Object.keys(r).forEach(function(o){a[o]=r[o]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=t.slice().reverse().reduce(function(o,s){return s(n,e,o)||o},a),i&&a.initializer!==void 0&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),a.initializer===void 0&&(Object.defineProperty(n,e,a),a=null),a}var nst=x(78892),Fn=x(46609),Y$=-1,H$=1;function js(){return H$++}var cf=function n(e){(0,Pr.Z)(this,n)},ff=function(){function n(e){(0,Pr.Z)(this,n),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=e}return(0,Fr.Z)(n,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(t){return this.lookup[t]>-1}},{key:"create",value:function(t,r){this.lookup[t]=this.components.length;var i=new this.clazz(r||{});return this.components.push(i),this.entities.push(t),i}},{key:"remove",value:function(t){var r=this.lookup[t];r>-1&&r<this.components.length-1&&(this.components[r]=this.components[this.components.length-1],this.entities[r]=this.entities[this.entities.length-1],this.lookup[this.entities[r]]=r),this.components.pop(),this.entities.pop(),delete this.lookup[t]}},{key:"removeKeepSorted",value:function(t){var r=this.lookup[t];if(r>-1){var i=this.entities[r];if(r<this.components.length-1){for(var a=r+1;a<this.components.length;++a)this.components[a-1]=this.components[a];for(var o=r+1;o<this.entities.length;++o)this.entities[o-1]=this.entities[o],this.lookup[this.entities[o-1]]=o-1}this.components.pop(),this.entities.pop(),delete this.lookup[i]}}},{key:"moveItem",value:function(t,r){if(t!==r){for(var i=this.components[t],a=this.entities[t],o=t<r?1:-1,s=t;s!==r;s+=o){var l=s+o;this.components[s]=this.components[l],this.entities[s]=this.entities[l],this.lookup[this.entities[s]]=s}this.components[r]=i,this.entities[r]=a,this.lookup[a]=r}}},{key:"getEntity",value:function(t){return this.entities[t]}},{key:"getComponent",value:function(t){return this.components[t]}},{key:"getComponentByEntity",value:function(t){var r=this.lookup[t];return r>-1?this.components[r]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(t){for(var r=0,i=Object.keys(this.lookup);r<i.length;r++){var a=i[r],o=Number(a);if(this.lookup[o]===t)return o}return Y$}},{key:"find",value:function(t){for(var r=0;r<this.getCount();r++){var i=this.getComponent(r);if(t(i,r))return i}return null}},{key:"findIndex",value:function(t){for(var r=0;r<this.getCount();r++){var i=this.getComponent(r);if(t(i,r))return r}return-1}},{key:"forEach",value:function(t){for(var r=0,i=Object.keys(this.lookup);r<i.length;r++){var a=i[r],o=Number(a),s=this.lookup[o];t(o,this.getComponent(s))}}},{key:"forEachAsync",value:function(){var e=(0,Fn.Z)(Ir().mark(function r(i){var a,o,s,l,u;return Ir().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:a=0,o=Object.keys(this.lookup);case 1:if(!(a<o.length)){f.next=10;break}return s=o[a],l=Number(s),u=this.lookup[l],f.next=7,i(l,this.getComponent(u));case 7:a++,f.next=1;break;case 10:case"end":return f.stop()}},r,this)}));function t(r){return e.apply(this,arguments)}return t}()},{key:"map",value:function(t){for(var r=[],i=0,a=Object.keys(this.lookup);i<a.length;i++){var o=a[i],s=Number(o),l=this.lookup[s];r.push(t(s,this.getComponent(l)))}return r}}]),n}(),Ky=x(43030),ur=x(99311),je={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),Geometry:Symbol("Geometry"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),Material:Symbol("Material"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")},j$=function n(){(0,Pr.Z)(this,n),this.index=void 0},Z$=function n(){(0,Pr.Z)(this,n),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},K$=function(){function n(){(0,Pr.Z)(this,n),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return(0,Fr.Z)(n,[{key:"read",value:function(t){return this.reads.find(function(r){return r.index===t.index})||this.reads.push(t),t}},{key:"sample",value:function(t){return this.read(t),t}},{key:"write",value:function(t,r){var i=this.writes.find(function(l){return l.index===r.index});if(i)return r;var a=t.getResourceNode(r);a.resource.version++,a.resource.imported&&(this.hasSideEffect=!0);var o=t.createResourceNode(a.resource),s=t.getResourceNode(o);return s.writer=this,this.writes.push(o),o}}]),n}(),Jn=x(20458),$$=function n(){(0,Pr.Z)(this,n),this.first=void 0,this.last=void 0};function Q$(n){var e=J$();return function(){var r=(0,Jn.Z)(n),i;if(e){var a=(0,Jn.Z)(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return(0,Oa.Z)(this,i)}}function J$(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var NI=function(n){(0,wa.Z)(t,n);var e=Q$(t);function t(){var r;(0,Pr.Z)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),r.version=0,r.refs=0,r.name=void 0,r.imported=void 0,r.priority=void 0,r.discardStart=!0,r.discardEnd=!1,r.descriptor=void 0,r.resource=void 0,r}return(0,Fr.Z)(t,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){!this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){!this.imported}}]),t}($$),q$=function n(){(0,Pr.Z)(this,n),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0},kI,BI,FI,p_,GI,zI;function qo(n,e){var t;if(typeof Symbol=="undefined"||n[Symbol.iterator]==null){if(Array.isArray(n)||(t=tQ(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function tQ(n,e){if(!!n){if(typeof n=="string")return UI(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return UI(n,e)}}function UI(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var eQ=(kI=(0,ur.b2)(),BI=(0,ur.f3)(je.RenderEngine),kI(FI=(p_=(zI=function(){function n(){(0,Pr.Z)(this,n),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],Gr(this,"engine",GI,this)}return(0,Fr.Z)(n,[{key:"execute",value:function(){var e=(0,Fn.Z)(Ir().mark(function r(i){return Ir().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return this.compile(),o.next=3,this.executePassNodes(i);case 3:case"end":return o.stop()}},r,this)}));function t(r){return e.apply(this,arguments)}return t}()},{key:"tearDown",value:function(){this.frameGraphPasses.forEach(function(t){t.tearDown&&t.tearDown()}),this.reset()}},{key:"addPass",value:function(t,r,i,a){var o=new Z$;o.execute=i,a&&(o.tearDown=a),o.name=t;var s=new K$;return s.name=t,this.passNodes.push(s),this.frameGraphPasses.push(o),r(this,s,o),o}},{key:"getPass",value:function(t){return this.frameGraphPasses.find(function(r){return r.name===t})}},{key:"compile",value:function(){var t=this,r=qo(this.passNodes),i;try{for(r.s();!(i=r.n()).done;){var a=i.value;a.refCount=a.writes.length+(a.hasSideEffect?1:0),a.reads.forEach(function(ie){t.resourceNodes[ie.index].readerCount++})}}catch(ie){r.e(ie)}finally{r.f()}var o=[],s=qo(this.resourceNodes),l;try{for(s.s();!(l=s.n()).done;){var u=l.value;u.readerCount===0&&o.push(u)}}catch(ie){s.e(ie)}finally{s.f()}for(;o.length;){var c=o.pop(),f=c&&c.writer;if(f&&--f.refCount==0){var h=qo(f.reads),d;try{for(h.s();!(d=h.n()).done;){var g=d.value,p=this.resourceNodes[g.index];--p.readerCount==0&&o.push(p)}}catch(ie){h.e(ie)}finally{h.f()}}}this.resourceNodes.forEach(function(ie){ie.resource.refs+=ie.readerCount});var m=qo(this.passNodes),_;try{for(m.s();!(_=m.n()).done;){var S=_.value;if(!!S.refCount){var M=qo(S.reads),R;try{for(M.s();!(R=M.n()).done;){var F=R.value,V=this.resourceNodes[F.index].resource;V.first=V.first?V.first:S,V.last=S}}catch(ie){M.e(ie)}finally{M.f()}var nt=qo(S.writes),at;try{for(nt.s();!(at=nt.n()).done;){var xt=at.value,gt=this.resourceNodes[xt.index].resource;gt.first=gt.first?gt.first:S,gt.last=S}}catch(ie){nt.e(ie)}finally{nt.f()}}}}catch(ie){m.e(ie)}finally{m.f()}for(var Tt=0;Tt<2;Tt++){var Ct=qo(this.resourceNodes),te;try{for(Ct.s();!(te=Ct.n()).done;){var Kt=te.value,ne=Kt.resource;if(ne.priority===Tt&&ne.refs){var ee=ne.first,ve=ne.last;ee&&ve&&(ee.devirtualize.push(ne),ve.destroy.push(ne))}}}catch(ie){Ct.e(ie)}finally{Ct.f()}}}},{key:"executePassNodes",value:function(){var e=(0,Fn.Z)(Ir().mark(function r(i){var a,o,s,l,u,c,f,h,d,g,p,m,_,S,M,R,F;return Ir().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:a=qo(this.passNodes.entries()),nt.prev=1,a.s();case 3:if((o=a.n()).done){nt.next=18;break}if(s=(0,Ky.Z)(o.value,2),l=s[0],u=s[1],!u.refCount){nt.next=16;break}c=qo(u.devirtualize);try{for(c.s();!(f=c.n()).done;)h=f.value,h.preExecuteDevirtualize(this.engine)}catch(at){c.e(at)}finally{c.f()}d=qo(u.destroy);try{for(d.s();!(g=d.n()).done;)p=g.value,p.preExecuteDestroy(this.engine)}catch(at){d.e(at)}finally{d.f()}return nt.next=12,this.frameGraphPasses[l].execute(this,this.frameGraphPasses[l],i);case 12:m=qo(u.devirtualize);try{for(m.s();!(_=m.n()).done;)S=_.value,S.postExecuteDevirtualize(this.engine)}catch(at){m.e(at)}finally{m.f()}M=qo(u.destroy);try{for(M.s();!(R=M.n()).done;)F=R.value,F.postExecuteDestroy(this.engine)}catch(at){M.e(at)}finally{M.f()}case 16:nt.next=3;break;case 18:nt.next=23;break;case 20:nt.prev=20,nt.t0=nt.catch(1),a.e(nt.t0);case 23:return nt.prev=23,a.f(),nt.finish(23);case 26:this.reset();case 27:case"end":return nt.stop()}},r,this,[[1,20,23,26]])}));function t(r){return e.apply(this,arguments)}return t}()},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(t){return this.resourceNodes[t.index]}},{key:"createResourceNode",value:function(t){var r=new q$;r.resource=t,r.version=t.version,this.resourceNodes.push(r);var i=new j$;return i.index=this.resourceNodes.length-1,i}},{key:"createTexture",value:function(t,r,i){var a=new NI;return a.name=r,a.descriptor=i,this.createResourceNode(a)}},{key:"createRenderTarget",value:function(t,r,i){var a=new NI;return a.name=r,a.descriptor=i,this.createResourceNode(a)}},{key:"present",value:function(t){this.addPass("Present",function(r,i){i.read(t),i.hasSideEffect=!0},(0,Fn.Z)(Ir().mark(function r(){return Ir().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:case"end":return a.stop()}},r)})))}}]),n}(),zI),GI=zr(p_.prototype,"engine",[BI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p_))||FI),Zi=x(24517);function Ng(){var n=new Ei.WT(4);return Ei.WT!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0),n}function rQ(n){var e=new Ei.WT(4);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e}function WI(n,e,t,r){var i=new Ei.WT(4);return i[0]=n,i[1]=e,i[2]=t,i[3]=r,i}function nQ(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n}function iQ(n,e,t,r,i){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n}function aQ(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n}function ist(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n}function ast(n,e,t){return n[0]=e[0]*t[0],n[1]=e[1]*t[1],n[2]=e[2]*t[2],n[3]=e[3]*t[3],n}function ost(n,e,t){return n[0]=e[0]/t[0],n[1]=e[1]/t[1],n[2]=e[2]/t[2],n[3]=e[3]/t[3],n}function sst(n,e){return n[0]=Math.ceil(e[0]),n[1]=Math.ceil(e[1]),n[2]=Math.ceil(e[2]),n[3]=Math.ceil(e[3]),n}function lst(n,e){return n[0]=Math.floor(e[0]),n[1]=Math.floor(e[1]),n[2]=Math.floor(e[2]),n[3]=Math.floor(e[3]),n}function ust(n,e,t){return n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.min(e[2],t[2]),n[3]=Math.min(e[3],t[3]),n}function cst(n,e,t){return n[0]=Math.max(e[0],t[0]),n[1]=Math.max(e[1],t[1]),n[2]=Math.max(e[2],t[2]),n[3]=Math.max(e[3],t[3]),n}function fst(n,e){return n[0]=Math.round(e[0]),n[1]=Math.round(e[1]),n[2]=Math.round(e[2]),n[3]=Math.round(e[3]),n}function oQ(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n}function hst(n,e,t,r){return n[0]=e[0]+t[0]*r,n[1]=e[1]+t[1]*r,n[2]=e[2]+t[2]*r,n[3]=e[3]+t[3]*r,n}function dst(n,e){var t=e[0]-n[0],r=e[1]-n[1],i=e[2]-n[2],a=e[3]-n[3];return Math.hypot(t,r,i,a)}function vst(n,e){var t=e[0]-n[0],r=e[1]-n[1],i=e[2]-n[2],a=e[3]-n[3];return t*t+r*r+i*i+a*a}function sQ(n){var e=n[0],t=n[1],r=n[2],i=n[3];return Math.hypot(e,t,r,i)}function lQ(n){var e=n[0],t=n[1],r=n[2],i=n[3];return e*e+t*t+r*r+i*i}function gst(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=-e[3],n}function pst(n,e){return n[0]=1/e[0],n[1]=1/e[1],n[2]=1/e[2],n[3]=1/e[3],n}function uQ(n,e){var t=e[0],r=e[1],i=e[2],a=e[3],o=t*t+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),n[0]=t*o,n[1]=r*o,n[2]=i*o,n[3]=a*o,n}function cQ(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]}function yst(n,e,t,r){var i=t[0]*r[1]-t[1]*r[0],a=t[0]*r[2]-t[2]*r[0],o=t[0]*r[3]-t[3]*r[0],s=t[1]*r[2]-t[2]*r[1],l=t[1]*r[3]-t[3]*r[1],u=t[2]*r[3]-t[3]*r[2],c=e[0],f=e[1],h=e[2],d=e[3];return n[0]=f*u-h*l+d*s,n[1]=-(c*u)+h*o-d*a,n[2]=c*l-f*o+d*i,n[3]=-(c*s)+f*a-h*i,n}function fQ(n,e,t,r){var i=e[0],a=e[1],o=e[2],s=e[3];return n[0]=i+r*(t[0]-i),n[1]=a+r*(t[1]-a),n[2]=o+r*(t[2]-o),n[3]=s+r*(t[3]-s),n}function mst(n,e){e=e||1;var t,r,i,a,o,s;do t=glMatrix.RANDOM()*2-1,r=glMatrix.RANDOM()*2-1,o=t*t+r*r;while(o>=1);do i=glMatrix.RANDOM()*2-1,a=glMatrix.RANDOM()*2-1,s=i*i+a*a;while(s>=1);var l=Math.sqrt((1-o)/s);return n[0]=e*t,n[1]=e*r,n[2]=e*i*l,n[3]=e*a*l,n}function kg(n,e,t){var r=e[0],i=e[1],a=e[2],o=e[3];return n[0]=t[0]*r+t[4]*i+t[8]*a+t[12]*o,n[1]=t[1]*r+t[5]*i+t[9]*a+t[13]*o,n[2]=t[2]*r+t[6]*i+t[10]*a+t[14]*o,n[3]=t[3]*r+t[7]*i+t[11]*a+t[15]*o,n}function xst(n,e,t){var r=e[0],i=e[1],a=e[2],o=t[0],s=t[1],l=t[2],u=t[3],c=u*r+s*a-l*i,f=u*i+l*r-o*a,h=u*a+o*i-s*r,d=-o*r-s*i-l*a;return n[0]=c*u+d*-o+f*-l-h*-s,n[1]=f*u+d*-s+h*-o-c*-l,n[2]=h*u+d*-l+c*-s-f*-o,n[3]=e[3],n}function bst(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n}function _st(n){return"vec4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"}function hQ(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]&&n[3]===e[3]}function dQ(n,e){var t=n[0],r=n[1],i=n[2],a=n[3],o=e[0],s=e[1],l=e[2],u=e[3];return Math.abs(t-o)<=Ei.Ib*Math.max(1,Math.abs(t),Math.abs(o))&&Math.abs(r-s)<=Ei.Ib*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-l)<=Ei.Ib*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-u)<=Ei.Ib*Math.max(1,Math.abs(a),Math.abs(u))}var Sst=null,Est=null,wst=null,Cst=null,Mst=null,Ast=null,Tst=null,Ist=function(){var n=Ng();return function(e,t,r,i,a,o){var s,l;for(t||(t=4),r||(r=0),i?l=Math.min(i*t+r,e.length):l=e.length,s=r;s<l;s+=t)n[0]=e[s],n[1]=e[s+1],n[2]=e[s+2],n[3]=e[s+3],a(n,n,o),e[s]=n[0],e[s+1]=n[1],e[s+2]=n[2],e[s+3]=n[3];return e}}(),ed=x(26291),vQ=9007199254740991,gQ="[object Arguments]",pQ="[object Array]",yQ="[object Boolean]",mQ="[object Date]",xQ="[object Error]",bQ="[object Function]",_Q="[object Map]",SQ="[object Number]",EQ="[object Object]",wQ="[object RegExp]",CQ="[object Set]",MQ="[object String]",AQ="[object WeakMap]",TQ="[object ArrayBuffer]",IQ="[object DataView]",OQ="[object Float32Array]",PQ="[object Float64Array]",DQ="[object Int8Array]",LQ="[object Int16Array]",RQ="[object Int32Array]",NQ="[object Uint8Array]",kQ="[object Uint8ClampedArray]",BQ="[object Uint16Array]",FQ="[object Uint32Array]",Ti={};Ti[OQ]=Ti[PQ]=Ti[DQ]=Ti[LQ]=Ti[RQ]=Ti[NQ]=Ti[kQ]=Ti[BQ]=Ti[FQ]=!0,Ti[gQ]=Ti[pQ]=Ti[TQ]=Ti[yQ]=Ti[IQ]=Ti[mQ]=Ti[xQ]=Ti[bQ]=Ti[_Q]=Ti[SQ]=Ti[EQ]=Ti[wQ]=Ti[CQ]=Ti[MQ]=Ti[AQ]=!1;function Ost(n){return function(e){return n(e)}}var GQ=Object.prototype,zQ=GQ.toString;function UQ(n){return VQ(n)&&WQ(n.length)&&!!Ti[zQ.call(n)]}function WQ(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=vQ}function VQ(n){return!!n&&(0,ed.Z)(n)==="object"}var VI=UQ;function XI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function YI(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?XI(Object(t),!0).forEach(function(r){(0,Fe.Z)(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):XI(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function XQ(n){var e=YQ();return function(){var r=(0,Jn.Z)(n),i;if(e){var a=(0,Jn.Z)(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return(0,Oa.Z)(this,i)}}function YQ(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var HQ=function(n){(0,wa.Z)(t,n);var e=XQ(t);function t(r){var i;return(0,Pr.Z)(this,t),i=e.call(this,r),i.dirty=!0,i.attributes=[],i.indices=void 0,i.indicesBuffer=void 0,i.vertexCount=0,i.maxInstancedCount=void 0,i.aabb=void 0,i.entity=void 0,Object.assign((0,Zi.Z)(i),r),i}return(0,Fr.Z)(t,[{key:"setAttribute",value:function(i,a,o,s){var l=this.attributes.find(function(u){return u.name===i});return l?(l.data=a,l.dirty=!0):this.attributes.push(YI(YI({dirty:!0,name:i,data:a},o),{},{bufferGetter:s})),this.dirty=!0,this}},{key:"setIndex",value:function(i){return this.indices=new Uint32Array(i.buffer?i.buffer:i),this.dirty=!0,this}},{key:"applyMatrix",value:function(i){var a=this.attributes.find(function(h){var d=h.name;return d==="position"}),o=this.attributes.find(function(h){var d=h.name;return d==="normal"});if(a&&(a.dirty=!0,a.data&&a.data.length))for(var s=0;s<a.data.length;s+=3){var l=WI(a.data[s],a.data[s+1],a.data[s+2],1);kg(l,l,i),VI(a.data)?a.data.set([l[0],l[1],l[2]],s):(a.data[s]=l[0],a.data[s+1]=l[1],a.data[s+2]=l[2])}if(o){var u=ra.normalFromMat4(ra.create(),i);if(o.data&&o.data.length)for(var c=0;c<o.data.length;c+=3){var f=nn(o.data[c],o.data[c+1],o.data[c+2]);Eo(f,f,u),xc(f,f),VI(o.data)?o.data.set([f[0],f[1],f[2]],c):(o.data[c]=f[0],o.data[c+1]=f[1],o.data[c+2]=f[2])}}}}]),t}(cf),me;(function(n){n[n.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",n[n.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",n[n.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",n[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN",n[n.ZERO=0]="ZERO",n[n.ONE=1]="ONE",n[n.SRC_COLOR=768]="SRC_COLOR",n[n.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",n[n.SRC_ALPHA=770]="SRC_ALPHA",n[n.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",n[n.DST_ALPHA=772]="DST_ALPHA",n[n.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",n[n.DST_COLOR=774]="DST_COLOR",n[n.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",n[n.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",n[n.FUNC_ADD=32774]="FUNC_ADD",n[n.BLEND_EQUATION=32777]="BLEND_EQUATION",n[n.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",n[n.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",n[n.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",n[n.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",n[n.MAX_EXT=32776]="MAX_EXT",n[n.MIN_EXT=32775]="MIN_EXT",n[n.BLEND_DST_RGB=32968]="BLEND_DST_RGB",n[n.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",n[n.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",n[n.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",n[n.CONSTANT_COLOR=32769]="CONSTANT_COLOR",n[n.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",n[n.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",n[n.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",n[n.BLEND_COLOR=32773]="BLEND_COLOR",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",n[n.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",n[n.STREAM_DRAW=35040]="STREAM_DRAW",n[n.STATIC_DRAW=35044]="STATIC_DRAW",n[n.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",n[n.BUFFER_SIZE=34660]="BUFFER_SIZE",n[n.BUFFER_USAGE=34661]="BUFFER_USAGE",n[n.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",n[n.FRONT=1028]="FRONT",n[n.BACK=1029]="BACK",n[n.FRONT_AND_BACK=1032]="FRONT_AND_BACK",n[n.CULL_FACE=2884]="CULL_FACE",n[n.BLEND=3042]="BLEND",n[n.DITHER=3024]="DITHER",n[n.STENCIL_TEST=2960]="STENCIL_TEST",n[n.DEPTH_TEST=2929]="DEPTH_TEST",n[n.SCISSOR_TEST=3089]="SCISSOR_TEST",n[n.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",n[n.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",n[n.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",n[n.NO_ERROR=0]="NO_ERROR",n[n.INVALID_ENUM=1280]="INVALID_ENUM",n[n.INVALID_VALUE=1281]="INVALID_VALUE",n[n.INVALID_OPERATION=1282]="INVALID_OPERATION",n[n.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",n[n.CW=2304]="CW",n[n.CCW=2305]="CCW",n[n.LINE_WIDTH=2849]="LINE_WIDTH",n[n.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",n[n.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",n[n.CULL_FACE_MODE=2885]="CULL_FACE_MODE",n[n.FRONT_FACE=2886]="FRONT_FACE",n[n.DEPTH_RANGE=2928]="DEPTH_RANGE",n[n.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",n[n.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",n[n.DEPTH_FUNC=2932]="DEPTH_FUNC",n[n.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",n[n.STENCIL_FUNC=2962]="STENCIL_FUNC",n[n.STENCIL_FAIL=2964]="STENCIL_FAIL",n[n.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",n[n.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",n[n.STENCIL_REF=2967]="STENCIL_REF",n[n.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",n[n.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",n[n.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",n[n.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",n[n.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",n[n.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",n[n.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",n[n.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",n[n.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",n[n.VIEWPORT=2978]="VIEWPORT",n[n.SCISSOR_BOX=3088]="SCISSOR_BOX",n[n.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",n[n.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",n[n.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",n[n.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",n[n.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",n[n.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",n[n.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",n[n.RED_BITS=3410]="RED_BITS",n[n.GREEN_BITS=3411]="GREEN_BITS",n[n.BLUE_BITS=3412]="BLUE_BITS",n[n.ALPHA_BITS=3413]="ALPHA_BITS",n[n.DEPTH_BITS=3414]="DEPTH_BITS",n[n.STENCIL_BITS=3415]="STENCIL_BITS",n[n.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",n[n.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",n[n.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",n[n.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",n[n.SAMPLES=32937]="SAMPLES",n[n.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",n[n.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",n[n.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",n[n.DONT_CARE=4352]="DONT_CARE",n[n.FASTEST=4353]="FASTEST",n[n.NICEST=4354]="NICEST",n[n.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",n[n.BYTE=5120]="BYTE",n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.SHORT=5122]="SHORT",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.INT=5124]="INT",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.FLOAT=5126]="FLOAT",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.ALPHA=6406]="ALPHA",n[n.RGB=6407]="RGB",n[n.RGBA=6408]="RGBA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",n[n.VERTEX_SHADER=35633]="VERTEX_SHADER",n[n.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",n[n.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",n[n.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",n[n.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",n[n.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",n[n.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",n[n.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",n[n.SHADER_TYPE=35663]="SHADER_TYPE",n[n.DELETE_STATUS=35712]="DELETE_STATUS",n[n.LINK_STATUS=35714]="LINK_STATUS",n[n.VALIDATE_STATUS=35715]="VALIDATE_STATUS",n[n.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",n[n.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",n[n.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",n[n.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",n[n.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",n[n.NEVER=512]="NEVER",n[n.LESS=513]="LESS",n[n.EQUAL=514]="EQUAL",n[n.LEQUAL=515]="LEQUAL",n[n.GREATER=516]="GREATER",n[n.NOTEQUAL=517]="NOTEQUAL",n[n.GEQUAL=518]="GEQUAL",n[n.ALWAYS=519]="ALWAYS",n[n.KEEP=7680]="KEEP",n[n.REPLACE=7681]="REPLACE",n[n.INCR=7682]="INCR",n[n.DECR=7683]="DECR",n[n.INVERT=5386]="INVERT",n[n.INCR_WRAP=34055]="INCR_WRAP",n[n.DECR_WRAP=34056]="DECR_WRAP",n[n.VENDOR=7936]="VENDOR",n[n.RENDERER=7937]="RENDERER",n[n.VERSION=7938]="VERSION",n[n.NEAREST=9728]="NEAREST",n[n.LINEAR=9729]="LINEAR",n[n.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",n[n.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",n[n.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",n[n.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",n[n.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",n[n.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",n[n.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",n[n.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",n[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE=5890]="TEXTURE",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",n[n.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",n[n.TEXTURE0=33984]="TEXTURE0",n[n.TEXTURE1=33985]="TEXTURE1",n[n.TEXTURE2=33986]="TEXTURE2",n[n.TEXTURE3=33987]="TEXTURE3",n[n.TEXTURE4=33988]="TEXTURE4",n[n.TEXTURE5=33989]="TEXTURE5",n[n.TEXTURE6=33990]="TEXTURE6",n[n.TEXTURE7=33991]="TEXTURE7",n[n.TEXTURE8=33992]="TEXTURE8",n[n.TEXTURE9=33993]="TEXTURE9",n[n.TEXTURE10=33994]="TEXTURE10",n[n.TEXTURE11=33995]="TEXTURE11",n[n.TEXTURE12=33996]="TEXTURE12",n[n.TEXTURE13=33997]="TEXTURE13",n[n.TEXTURE14=33998]="TEXTURE14",n[n.TEXTURE15=33999]="TEXTURE15",n[n.TEXTURE16=34e3]="TEXTURE16",n[n.TEXTURE17=34001]="TEXTURE17",n[n.TEXTURE18=34002]="TEXTURE18",n[n.TEXTURE19=34003]="TEXTURE19",n[n.TEXTURE20=34004]="TEXTURE20",n[n.TEXTURE21=34005]="TEXTURE21",n[n.TEXTURE22=34006]="TEXTURE22",n[n.TEXTURE23=34007]="TEXTURE23",n[n.TEXTURE24=34008]="TEXTURE24",n[n.TEXTURE25=34009]="TEXTURE25",n[n.TEXTURE26=34010]="TEXTURE26",n[n.TEXTURE27=34011]="TEXTURE27",n[n.TEXTURE28=34012]="TEXTURE28",n[n.TEXTURE29=34013]="TEXTURE29",n[n.TEXTURE30=34014]="TEXTURE30",n[n.TEXTURE31=34015]="TEXTURE31",n[n.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",n[n.REPEAT=10497]="REPEAT",n[n.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",n[n.FLOAT_VEC2=35664]="FLOAT_VEC2",n[n.FLOAT_VEC3=35665]="FLOAT_VEC3",n[n.FLOAT_VEC4=35666]="FLOAT_VEC4",n[n.INT_VEC2=35667]="INT_VEC2",n[n.INT_VEC3=35668]="INT_VEC3",n[n.INT_VEC4=35669]="INT_VEC4",n[n.BOOL=35670]="BOOL",n[n.BOOL_VEC2=35671]="BOOL_VEC2",n[n.BOOL_VEC3=35672]="BOOL_VEC3",n[n.BOOL_VEC4=35673]="BOOL_VEC4",n[n.FLOAT_MAT2=35674]="FLOAT_MAT2",n[n.FLOAT_MAT3=35675]="FLOAT_MAT3",n[n.FLOAT_MAT4=35676]="FLOAT_MAT4",n[n.SAMPLER_2D=35678]="SAMPLER_2D",n[n.SAMPLER_CUBE=35680]="SAMPLER_CUBE",n[n.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",n[n.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",n[n.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",n[n.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",n[n.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",n[n.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",n[n.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",n[n.COMPILE_STATUS=35713]="COMPILE_STATUS",n[n.LOW_FLOAT=36336]="LOW_FLOAT",n[n.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",n[n.HIGH_FLOAT=36338]="HIGH_FLOAT",n[n.LOW_INT=36339]="LOW_INT",n[n.MEDIUM_INT=36340]="MEDIUM_INT",n[n.HIGH_INT=36341]="HIGH_INT",n[n.FRAMEBUFFER=36160]="FRAMEBUFFER",n[n.RENDERBUFFER=36161]="RENDERBUFFER",n[n.RGBA4=32854]="RGBA4",n[n.RGB5_A1=32855]="RGB5_A1",n[n.RGB565=36194]="RGB565",n[n.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",n[n.STENCIL_INDEX=6401]="STENCIL_INDEX",n[n.STENCIL_INDEX8=36168]="STENCIL_INDEX8",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",n[n.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",n[n.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",n[n.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",n[n.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",n[n.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",n[n.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",n[n.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",n[n.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",n[n.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",n[n.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",n[n.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",n[n.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",n[n.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",n[n.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",n[n.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",n[n.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",n[n.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",n[n.NONE=0]="NONE",n[n.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",n[n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",n[n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",n[n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",n[n.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",n[n.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",n[n.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",n[n.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",n[n.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",n[n.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",n[n.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",n[n.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",n[n.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",n[n.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",n[n.COPY_SRC=1]="COPY_SRC",n[n.COPY_DST=2]="COPY_DST",n[n.SAMPLED=4]="SAMPLED",n[n.STORAGE=8]="STORAGE",n[n.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(me||(me={}));var HI,jI,ZI,KI,$y,$I,QI,JI,jQ=(HI=(0,ur.b2)(),jI=(0,ur.f3)(je.GeometryComponentManager),ZI=(0,ur.f3)(je.RenderEngine),HI(KI=($y=(JI=function(){function n(){(0,Pr.Z)(this,n),Gr(this,"geometry",$I,this),Gr(this,"engine",QI,this)}return(0,Fr.Z)(n,[{key:"execute",value:function(){var e=(0,Fn.Z)(Ir().mark(function r(){var i=this;return Ir().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:this.geometry.forEach(function(s,l){l.dirty&&(l.attributes.forEach(function(u){if(u.dirty&&u.data){if(!u.buffer)u.buffer=i.engine.createBuffer({data:u.data,type:me.FLOAT});else{var c;(c=u.buffer)===null||c===void 0||c.subData({data:u.data,offset:0})}u.dirty=!1}}),l.indices&&(l.indicesBuffer?l.indicesBuffer.subData({data:l.indices,offset:0}):l.indicesBuffer=i.engine.createElements({data:l.indices,count:l.indices.length,type:me.UNSIGNED_INT,usage:me.STATIC_DRAW})),l.dirty=!1)});case 1:case"end":return o.stop()}},r,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"tearDown",value:function(){this.geometry.forEach(function(t,r){r.indicesBuffer&&r.indicesBuffer.destroy(),r.attributes.forEach(function(i){i.buffer&&i.buffer.destroy()})}),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{vertexCount:3},r=t.vertexCount,i=js();return this.geometry.create(i,{vertexCount:r})}},{key:"createInstancedBufferGeometry",value:function(t){var r=t.maxInstancedCount,i=t.vertexCount,a=js();return this.geometry.create(a,{maxInstancedCount:r,vertexCount:i})}}]),n}(),JI),$I=zr($y.prototype,"geometry",[jI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),QI=zr($y.prototype,"engine",[ZI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$y))||KI);function qI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function tO(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qI(Object(t),!0).forEach(function(r){(0,Fe.Z)(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):qI(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function ZQ(n){var e=KQ();return function(){var r=(0,Jn.Z)(n),i;if(e){var a=(0,Jn.Z)(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return(0,Oa.Z)(this,i)}}function KQ(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var $Q=function(n){(0,wa.Z)(t,n);var e=ZQ(t);function t(r){var i;return(0,Pr.Z)(this,t),i=e.call(this,r),i.vertexShaderGLSL=void 0,i.fragmentShaderGLSL=void 0,i.defines={},i.dirty=!0,i.uniforms=[],i.cull={enable:!0,face:me.BACK},i.depth={enable:!0},i.blend=void 0,i.entity=void 0,i.type=void 0,Object.assign((0,Zi.Z)(i),r),i}return(0,Fr.Z)(t,[{key:"setDefines",value:function(i){return this.defines=tO(tO({},this.defines),i),this}},{key:"setCull",value:function(i){return this.cull=i,this}},{key:"setDepth",value:function(i){return this.depth=i,this}},{key:"setBlend",value:function(i){return this.blend=i,this}},{key:"setUniform",value:function(i,a){var o=this;if(typeof i!="string")return Object.keys(i).forEach(function(l){return o.setUniform(l,i[l])}),this;var s=this.uniforms.find(function(l){return l.name===i});return s?(s.dirty=!0,s.data=a):this.uniforms.push({name:i,dirty:!0,data:a}),this.dirty=!0,this}}]),t}(cf),eO,rO,nO,iO,aO,Bg,oO,sO,lO,uO;function cO(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function fO(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cO(Object(t),!0).forEach(function(r){(0,Fe.Z)(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):cO(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var QQ=(eO=(0,ur.b2)(),rO=(0,ur.f3)(je.MaterialComponentManager),nO=(0,ur.f3)(je.RenderEngine),iO=(0,ur.f3)(je.ShaderModuleService),eO(aO=(Bg=(uO=function(){function n(){(0,Pr.Z)(this,n),Gr(this,"material",oO,this),Gr(this,"engine",sO,this),Gr(this,"shaderModule",lO,this)}return(0,Fr.Z)(n,[{key:"execute",value:function(){var e=(0,Fn.Z)(Ir().mark(function r(){return Ir().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:case"end":return a.stop()}},r)}));function t(){return e.apply(this,arguments)}return t}()},{key:"tearDown",value:function(){this.material.clear()}},{key:"createShaderMaterial",value:function(t){var r=js(),i=t.vertexShader,a=t.fragmentShader,o=[];if(!this.engine.supportWebGPU){var s="material-".concat(r);this.shaderModule.registerModule(s,{vs:t.vertexShader,fs:t.fragmentShader});var l=this.shaderModule.getModule(s);i=l.vs,a=l.fs,l.uniforms&&(o=Object.keys(l.uniforms).map(function(u){return{dirty:!0,name:u,data:l.uniforms[u]}}))}return this.material.create(r,fO(fO({vertexShaderGLSL:i,fragmentShaderGLSL:a},t),{},{uniforms:o}))}}]),n}(),uO),oO=zr(Bg.prototype,"material",[rO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sO=zr(Bg.prototype,"engine",[nO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lO=zr(Bg.prototype,"shaderModule",[iO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bg))||aO);function JQ(n){var e=qQ();return function(){var r=(0,Jn.Z)(n),i;if(e){var a=(0,Jn.Z)(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return(0,Oa.Z)(this,i)}}function qQ(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var y_;(function(n){n[n.Standard=0]="Standard"})(y_||(y_={}));var tJ=function(n){(0,wa.Z)(t,n);var e=JQ(t);function t(r){var i;return(0,Pr.Z)(this,t),i=e.call(this,r),i.strategy=y_.Standard,i.visibilityPlaneMask=0,i.visible=!1,Object.assign((0,Zi.Z)(i),r),i}return t}(cf),m_=function(){function n(e,t){(0,Pr.Z)(this,n),this.center=void 0,this.halfExtents=void 0,this.min=zn(),this.max=zn(),this.update(e,t)}return(0,Fr.Z)(n,[{key:"update",value:function(t,r){this.center=t||zn(),this.halfExtents=r||nn(.5,.5,.5),this.min=bc(this.min,this.center,this.halfExtents),this.max=za(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(t,r){za(this.center,r,t),mc(this.center,this.center,.5),bc(this.halfExtents,r,t),mc(this.halfExtents,this.halfExtents,.5),ea(this.min,t),ea(this.max,r)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(t){var r=this.center,i=r[0],a=r[1],o=r[2],s=this.halfExtents,l=s[0],u=s[1],c=s[2],f=i-l,h=i+l,d=a-u,g=a+u,p=o-c,m=o+c,_=t.center,S=_[0],M=_[1],R=_[2],F=t.halfExtents,V=F[0],nt=F[1],at=F[2],xt=S-V,gt=S+V,Tt=M-nt,Ct=M+nt,te=R-at,Kt=R+at;xt<f&&(f=xt),gt>h&&(h=gt),Tt<d&&(d=Tt),Ct>g&&(g=Ct),te<p&&(p=te),Kt>m&&(m=Kt),r[0]=(f+h)*.5,r[1]=(d+g)*.5,r[2]=(p+m)*.5,s[0]=(h-f)*.5,s[1]=(g-d)*.5,s[2]=(m-p)*.5,this.min[0]=f,this.min[1]=d,this.min[2]=p,this.max[0]=h,this.max[1]=g,this.max[2]=m}},{key:"intersects",value:function(t){var r=this.getMax(),i=this.getMin(),a=t.getMax(),o=t.getMin();return i[0]<=a[0]&&r[0]>=o[0]&&i[1]<=a[1]&&r[1]>=o[1]&&i[2]<=a[2]&&r[2]>=o[2]}},{key:"containsPoint",value:function(t){var r=this.getMin(),i=this.getMax();return!(t[0]<r[0]||t[0]>i[0]||t[1]<r[1]||t[1]>i[1]||t[2]<r[2]||t[2]>i[2])}},{key:"getNegativeFarPoint",value:function(t){return t.pnVertexFlag===273?ea(zn(),this.min):t.pnVertexFlag===272?nn(this.min[0],this.min[1],this.max[2]):t.pnVertexFlag===257?nn(this.min[0],this.max[1],this.min[2]):t.pnVertexFlag===256?nn(this.min[0],this.max[1],this.max[2]):t.pnVertexFlag===17?nn(this.max[0],this.min[1],this.min[2]):t.pnVertexFlag===16?nn(this.max[0],this.min[1],this.max[2]):t.pnVertexFlag===1?nn(this.max[0],this.max[1],this.min[2]):nn(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(t){return t.pnVertexFlag===273?ea(zn(),this.max):t.pnVertexFlag===272?nn(this.max[0],this.max[1],this.min[2]):t.pnVertexFlag===257?nn(this.max[0],this.min[1],this.max[2]):t.pnVertexFlag===256?nn(this.max[0],this.min[1],this.min[2]):t.pnVertexFlag===17?nn(this.min[0],this.max[1],this.max[2]):t.pnVertexFlag===16?nn(this.min[0],this.max[1],this.min[2]):t.pnVertexFlag===1?nn(this.min[0],this.min[1],this.max[2]):nn(this.min[0],this.min[1],this.min[2])}}]),n}();function eJ(n){var e=rJ();return function(){var r=(0,Jn.Z)(n),i;if(e){var a=(0,Jn.Z)(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return(0,Oa.Z)(this,i)}}function rJ(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var nJ=function(n){(0,wa.Z)(t,n);var e=eJ(t);function t(r){var i;return(0,Pr.Z)(this,t),i=e.call(this,r),i.material=void 0,i.geometry=void 0,i.aabb=new m_,i.aabbDirty=!0,i.model=void 0,i.visible=!0,i.children=[],Object.assign((0,Zi.Z)(i),r),i}return t}(cf),iJ=function(){function n(e,t){(0,Pr.Z)(this,n),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=e||0,this.normal=t||nn(0,1,0),this.updatePNVertexFlag()}return(0,Fr.Z)(n,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(t){return As(t,this.normal)-this.distance}},{key:"normalize",value:function(){var t=1/sv(this.normal);mc(this.normal,this.normal,t),this.distance*=t}},{key:"intersectsLine",value:function(t,r,i){var a=this.distanceToPoint(t),o=this.distanceToPoint(r),s=a/(a-o),l=s>=0&&s<=1;return l&&i&&Ua(i,t,r,s),l}}]),n}(),Fu;(function(n){n[n.OUTSIDE=4294967295]="OUTSIDE",n[n.INSIDE=0]="INSIDE",n[n.INDETERMINATE=2147483647]="INDETERMINATE"})(Fu||(Fu={}));var aJ=function(){function n(e){if((0,Pr.Z)(this,n),this.planes=[],e)this.planes=e;else for(var t=0;t<6;t++)this.planes.push(new iJ)}return(0,Fr.Z)(n,[{key:"extractFromVPMatrix",value:function(t){var r=(0,Ky.Z)(t,16),i=r[0],a=r[1],o=r[2],s=r[3],l=r[4],u=r[5],c=r[6],f=r[7],h=r[8],d=r[9],g=r[10],p=r[11],m=r[12],_=r[13],S=r[14],M=r[15];eu(this.planes[0].normal,s-i,f-l,p-h),this.planes[0].distance=-(M-m),eu(this.planes[1].normal,s+i,f+l,p+h),this.planes[1].distance=-(M+m),eu(this.planes[2].normal,s+a,f+u,p+d),this.planes[2].distance=-(M+_),eu(this.planes[3].normal,s-a,f-u,p-d),this.planes[3].distance=-(M-_),eu(this.planes[4].normal,s-o,f-c,p-g),this.planes[4].distance=-(M-S),eu(this.planes[5].normal,s+o,f+c,p+g),this.planes[5].distance=-(M+S),this.planes.forEach(function(R){R.normalize(),R.updatePNVertexFlag()})}}]),n}();function Pst(n){return typeof n=="number"}function Dst(n){return n===void 0?0:n>360||n<-360?n%360:n}function Lst(n,e,t){return isNumber(n)?vec3.fromValues(n,e,t):n.length===3?vec3.clone(n):vec3.fromValues(n[0],n[1],n[2])}function oJ(n,e){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[4],e[4]=n[5],e[5]=n[6],e[6]=n[8],e[7]=n[9],e[8]=n[10],e}function sJ(n){var e=(0,Ky.Z)(n,3),t=e[0],r=e[1],i=e[2],a=t+r*256+i*65536-1;return a}function Rst(n){return[n+1&255,n+1>>8&255,n+1>>8>>8&255]}var hO,dO,vO,gO,pO,yO,mO,hf,xO,bO,_O,SO,EO,wO;function CO(n,e){var t;if(typeof Symbol=="undefined"||n[Symbol.iterator]==null){if(Array.isArray(n)||(t=lJ(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function lJ(n,e){if(!!n){if(typeof n=="string")return MO(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return MO(n,e)}}function MO(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var uJ=(hO=(0,ur.b2)(),dO=(0,ur.f3)(je.MeshComponentManager),vO=(0,ur.f3)(je.CullableComponentManager),gO=(0,ur.f3)(je.GeometryComponentManager),pO=(0,ur.f3)(je.HierarchyComponentManager),yO=(0,ur.f3)(je.TransformComponentManager),hO(mO=(hf=(wO=function(){function n(){(0,Pr.Z)(this,n),Gr(this,"mesh",xO,this),Gr(this,"cullable",bO,this),Gr(this,"geometry",_O,this),Gr(this,"hierarchy",SO,this),Gr(this,"transform",EO,this),this.planes=void 0}return(0,Fr.Z)(n,[{key:"setFrustumPlanes",value:function(t){this.planes=t}},{key:"execute",value:function(){var e=(0,Fn.Z)(Ir().mark(function r(i){var a,o,s,l,u,c,f,h,d,g,p,m,_,S,M,R,F,V,nt,at,xt;return Ir().wrap(function(Tt){for(;;)switch(Tt.prev=Tt.next){case 0:a=CO(i);try{for(a.s();!(o=a.n()).done;){s=o.value,l=s.getScene(),u=s.getCamera(),c=CO(l.getEntities());try{for(c.s();!(f=c.n()).done;)h=f.value,d=this.mesh.getComponentByEntity(h),d&&(g=this.hierarchy.getComponentByEntity(h),p=this.cullable.getComponentByEntity(h),m=d.geometry,_=this.transform.getComponentByEntity(h),m&&m.aabb&&_&&d.aabbDirty&&(S=_.worldTransform,M=m.aabb,R=M.center,F=M.halfExtents,V=$f(zn(),R,S),nt=oJ(S,ra.create()),at=Eo(zn(),F,nt),d.aabb.update(V,at),d.aabbDirty=!1),p&&m&&(xt=this.cullable.getComponentByEntity((g==null?void 0:g.parentID)||-1),p.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(d.aabb,(xt==null?void 0:xt.visibilityPlaneMask)||Fu.INDETERMINATE,this.planes||u.getFrustum().planes),p.visible=p.visibilityPlaneMask!==Fu.OUTSIDE))}catch(Ct){c.e(Ct)}finally{c.f()}}}catch(Ct){a.e(Ct)}finally{a.f()}case 2:case"end":return Tt.stop()}},r,this)}));function t(r){return e.apply(this,arguments)}return t}()},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(t,r,i){if(r===Fu.OUTSIDE||r===Fu.INSIDE)return r;for(var a=Fu.INSIDE,o=0,s=i.length;o<s;++o){var l=o<31?1<<o:0;if(!(o<31&&(r&l)==0)){var u=i[o],c=u.normal,f=u.distance;if(As(c,t.getNegativeFarPoint(i[o]))+f>0)return Fu.OUTSIDE;As(c,t.getPositiveFarPoint(i[o]))+f>0&&(a|=l)}}return a}}]),n}(),wO),xO=zr(hf.prototype,"mesh",[dO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bO=zr(hf.prototype,"cullable",[vO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_O=zr(hf.prototype,"geometry",[gO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),SO=zr(hf.prototype,"hierarchy",[pO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),EO=zr(hf.prototype,"transform",[yO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hf))||mO);function po(){var n=new Ei.WT(16);return Ei.WT!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n}function cJ(n){var e=new Ei.WT(16);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e}function x_(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function Nst(n,e,t,r,i,a,o,s,l,u,c,f,h,d,g,p){var m=new glMatrix.ARRAY_TYPE(16);return m[0]=n,m[1]=e,m[2]=t,m[3]=r,m[4]=i,m[5]=a,m[6]=o,m[7]=s,m[8]=l,m[9]=u,m[10]=c,m[11]=f,m[12]=h,m[13]=d,m[14]=g,m[15]=p,m}function kst(n,e,t,r,i,a,o,s,l,u,c,f,h,d,g,p,m){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n[4]=a,n[5]=o,n[6]=s,n[7]=l,n[8]=u,n[9]=c,n[10]=f,n[11]=h,n[12]=d,n[13]=g,n[14]=p,n[15]=m,n}function AO(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Bst(n,e){if(n===e){var t=e[1],r=e[2],i=e[3],a=e[6],o=e[7],s=e[11];n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=t,n[6]=e[9],n[7]=e[13],n[8]=r,n[9]=a,n[11]=e[14],n[12]=i,n[13]=o,n[14]=s}else n[0]=e[0],n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=e[1],n[5]=e[5],n[6]=e[9],n[7]=e[13],n[8]=e[2],n[9]=e[6],n[10]=e[10],n[11]=e[14],n[12]=e[3],n[13]=e[7],n[14]=e[11],n[15]=e[15];return n}function Qy(n,e){var t=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],d=e[11],g=e[12],p=e[13],m=e[14],_=e[15],S=t*s-r*o,M=t*l-i*o,R=t*u-a*o,F=r*l-i*s,V=r*u-a*s,nt=i*u-a*l,at=c*p-f*g,xt=c*m-h*g,gt=c*_-d*g,Tt=f*m-h*p,Ct=f*_-d*p,te=h*_-d*m,Kt=S*te-M*Ct+R*Tt+F*gt-V*xt+nt*at;return Kt?(Kt=1/Kt,n[0]=(s*te-l*Ct+u*Tt)*Kt,n[1]=(i*Ct-r*te-a*Tt)*Kt,n[2]=(p*nt-m*V+_*F)*Kt,n[3]=(h*V-f*nt-d*F)*Kt,n[4]=(l*gt-o*te-u*xt)*Kt,n[5]=(t*te-i*gt+a*xt)*Kt,n[6]=(m*R-g*nt-_*M)*Kt,n[7]=(c*nt-h*R+d*M)*Kt,n[8]=(o*Ct-s*gt+u*at)*Kt,n[9]=(r*gt-t*Ct-a*at)*Kt,n[10]=(g*V-p*R+_*S)*Kt,n[11]=(f*R-c*V-d*S)*Kt,n[12]=(s*xt-o*Tt-l*at)*Kt,n[13]=(t*Tt-r*xt+i*at)*Kt,n[14]=(p*M-g*F-m*S)*Kt,n[15]=(c*F-f*M+h*S)*Kt,n):null}function Fst(n,e){var t=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],d=e[11],g=e[12],p=e[13],m=e[14],_=e[15];return n[0]=s*(h*_-d*m)-f*(l*_-u*m)+p*(l*d-u*h),n[1]=-(r*(h*_-d*m)-f*(i*_-a*m)+p*(i*d-a*h)),n[2]=r*(l*_-u*m)-s*(i*_-a*m)+p*(i*u-a*l),n[3]=-(r*(l*d-u*h)-s*(i*d-a*h)+f*(i*u-a*l)),n[4]=-(o*(h*_-d*m)-c*(l*_-u*m)+g*(l*d-u*h)),n[5]=t*(h*_-d*m)-c*(i*_-a*m)+g*(i*d-a*h),n[6]=-(t*(l*_-u*m)-o*(i*_-a*m)+g*(i*u-a*l)),n[7]=t*(l*d-u*h)-o*(i*d-a*h)+c*(i*u-a*l),n[8]=o*(f*_-d*p)-c*(s*_-u*p)+g*(s*d-u*f),n[9]=-(t*(f*_-d*p)-c*(r*_-a*p)+g*(r*d-a*f)),n[10]=t*(s*_-u*p)-o*(r*_-a*p)+g*(r*u-a*s),n[11]=-(t*(s*d-u*f)-o*(r*d-a*f)+c*(r*u-a*s)),n[12]=-(o*(f*m-h*p)-c*(s*m-l*p)+g*(s*h-l*f)),n[13]=t*(f*m-h*p)-c*(r*m-i*p)+g*(r*h-i*f),n[14]=-(t*(s*m-l*p)-o*(r*m-i*p)+g*(r*l-i*s)),n[15]=t*(s*h-l*f)-o*(r*h-i*f)+c*(r*l-i*s),n}function Gst(n){var e=n[0],t=n[1],r=n[2],i=n[3],a=n[4],o=n[5],s=n[6],l=n[7],u=n[8],c=n[9],f=n[10],h=n[11],d=n[12],g=n[13],p=n[14],m=n[15],_=e*o-t*a,S=e*s-r*a,M=e*l-i*a,R=t*s-r*o,F=t*l-i*o,V=r*l-i*s,nt=u*g-c*d,at=u*p-f*d,xt=u*m-h*d,gt=c*p-f*g,Tt=c*m-h*g,Ct=f*m-h*p;return _*Ct-S*Tt+M*gt+R*xt-F*at+V*nt}function df(n,e,t){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],h=e[9],d=e[10],g=e[11],p=e[12],m=e[13],_=e[14],S=e[15],M=t[0],R=t[1],F=t[2],V=t[3];return n[0]=M*r+R*s+F*f+V*p,n[1]=M*i+R*l+F*h+V*m,n[2]=M*a+R*u+F*d+V*_,n[3]=M*o+R*c+F*g+V*S,M=t[4],R=t[5],F=t[6],V=t[7],n[4]=M*r+R*s+F*f+V*p,n[5]=M*i+R*l+F*h+V*m,n[6]=M*a+R*u+F*d+V*_,n[7]=M*o+R*c+F*g+V*S,M=t[8],R=t[9],F=t[10],V=t[11],n[8]=M*r+R*s+F*f+V*p,n[9]=M*i+R*l+F*h+V*m,n[10]=M*a+R*u+F*d+V*_,n[11]=M*o+R*c+F*g+V*S,M=t[12],R=t[13],F=t[14],V=t[15],n[12]=M*r+R*s+F*f+V*p,n[13]=M*i+R*l+F*h+V*m,n[14]=M*a+R*u+F*d+V*_,n[15]=M*o+R*c+F*g+V*S,n}function Fg(n,e,t){var r=t[0],i=t[1],a=t[2],o,s,l,u,c,f,h,d,g,p,m,_;return e===n?(n[12]=e[0]*r+e[4]*i+e[8]*a+e[12],n[13]=e[1]*r+e[5]*i+e[9]*a+e[13],n[14]=e[2]*r+e[6]*i+e[10]*a+e[14],n[15]=e[3]*r+e[7]*i+e[11]*a+e[15]):(o=e[0],s=e[1],l=e[2],u=e[3],c=e[4],f=e[5],h=e[6],d=e[7],g=e[8],p=e[9],m=e[10],_=e[11],n[0]=o,n[1]=s,n[2]=l,n[3]=u,n[4]=c,n[5]=f,n[6]=h,n[7]=d,n[8]=g,n[9]=p,n[10]=m,n[11]=_,n[12]=o*r+c*i+g*a+e[12],n[13]=s*r+f*i+p*a+e[13],n[14]=l*r+h*i+m*a+e[14],n[15]=u*r+d*i+_*a+e[15]),n}function zst(n,e,t){var r=t[0],i=t[1],a=t[2];return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n[3]=e[3]*r,n[4]=e[4]*i,n[5]=e[5]*i,n[6]=e[6]*i,n[7]=e[7]*i,n[8]=e[8]*a,n[9]=e[9]*a,n[10]=e[10]*a,n[11]=e[11]*a,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function Ust(n,e,t,r){var i=r[0],a=r[1],o=r[2],s=Math.hypot(i,a,o),l,u,c,f,h,d,g,p,m,_,S,M,R,F,V,nt,at,xt,gt,Tt,Ct,te,Kt,ne;return s<glMatrix.EPSILON?null:(s=1/s,i*=s,a*=s,o*=s,l=Math.sin(t),u=Math.cos(t),c=1-u,f=e[0],h=e[1],d=e[2],g=e[3],p=e[4],m=e[5],_=e[6],S=e[7],M=e[8],R=e[9],F=e[10],V=e[11],nt=i*i*c+u,at=a*i*c+o*l,xt=o*i*c-a*l,gt=i*a*c-o*l,Tt=a*a*c+u,Ct=o*a*c+i*l,te=i*o*c+a*l,Kt=a*o*c-i*l,ne=o*o*c+u,n[0]=f*nt+p*at+M*xt,n[1]=h*nt+m*at+R*xt,n[2]=d*nt+_*at+F*xt,n[3]=g*nt+S*at+V*xt,n[4]=f*gt+p*Tt+M*Ct,n[5]=h*gt+m*Tt+R*Ct,n[6]=d*gt+_*Tt+F*Ct,n[7]=g*gt+S*Tt+V*Ct,n[8]=f*te+p*Kt+M*ne,n[9]=h*te+m*Kt+R*ne,n[10]=d*te+_*Kt+F*ne,n[11]=g*te+S*Kt+V*ne,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n)}function fJ(n,e,t){var r=Math.sin(t),i=Math.cos(t),a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],h=e[11];return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[4]=a*i+u*r,n[5]=o*i+c*r,n[6]=s*i+f*r,n[7]=l*i+h*r,n[8]=u*i-a*r,n[9]=c*i-o*r,n[10]=f*i-s*r,n[11]=h*i-l*r,n}function hJ(n,e,t){var r=Math.sin(t),i=Math.cos(t),a=e[0],o=e[1],s=e[2],l=e[3],u=e[8],c=e[9],f=e[10],h=e[11];return e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=a*i-u*r,n[1]=o*i-c*r,n[2]=s*i-f*r,n[3]=l*i-h*r,n[8]=a*r+u*i,n[9]=o*r+c*i,n[10]=s*r+f*i,n[11]=l*r+h*i,n}function Wst(n,e,t){var r=Math.sin(t),i=Math.cos(t),a=e[0],o=e[1],s=e[2],l=e[3],u=e[4],c=e[5],f=e[6],h=e[7];return e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=a*i+u*r,n[1]=o*i+c*r,n[2]=s*i+f*r,n[3]=l*i+h*r,n[4]=u*i-a*r,n[5]=c*i-o*r,n[6]=f*i-s*r,n[7]=h*i-l*r,n}function Vst(n,e){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n}function Xst(n,e){return n[0]=e[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=e[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=e[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Yst(n,e,t){var r=t[0],i=t[1],a=t[2],o=Math.hypot(r,i,a),s,l,u;return o<glMatrix.EPSILON?null:(o=1/o,r*=o,i*=o,a*=o,s=Math.sin(e),l=Math.cos(e),u=1-l,n[0]=r*r*u+l,n[1]=i*r*u+a*s,n[2]=a*r*u-i*s,n[3]=0,n[4]=r*i*u-a*s,n[5]=i*i*u+l,n[6]=a*i*u+r*s,n[7]=0,n[8]=r*a*u+i*s,n[9]=i*a*u-r*s,n[10]=a*a*u+l,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n)}function Hst(n,e){var t=Math.sin(e),r=Math.cos(e);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=r,n[6]=t,n[7]=0,n[8]=0,n[9]=-t,n[10]=r,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function jst(n,e){var t=Math.sin(e),r=Math.cos(e);return n[0]=r,n[1]=0,n[2]=-t,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=t,n[9]=0,n[10]=r,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Zst(n,e){var t=Math.sin(e),r=Math.cos(e);return n[0]=r,n[1]=t,n[2]=0,n[3]=0,n[4]=-t,n[5]=r,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function dJ(n,e,t){var r=e[0],i=e[1],a=e[2],o=e[3],s=r+r,l=i+i,u=a+a,c=r*s,f=r*l,h=r*u,d=i*l,g=i*u,p=a*u,m=o*s,_=o*l,S=o*u;return n[0]=1-(d+p),n[1]=f+S,n[2]=h-_,n[3]=0,n[4]=f-S,n[5]=1-(c+p),n[6]=g+m,n[7]=0,n[8]=h+_,n[9]=g-m,n[10]=1-(c+d),n[11]=0,n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=1,n}function Kst(n,e){var t=new glMatrix.ARRAY_TYPE(3),r=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=r*r+i*i+a*a+o*o;return f>0?(t[0]=(s*o+c*r+l*a-u*i)*2/f,t[1]=(l*o+c*i+u*r-s*a)*2/f,t[2]=(u*o+c*a+s*i-l*r)*2/f):(t[0]=(s*o+c*r+l*a-u*i)*2,t[1]=(l*o+c*i+u*r-s*a)*2,t[2]=(u*o+c*a+s*i-l*r)*2),dJ(n,e,t),n}function Gg(n,e){return n[0]=e[12],n[1]=e[13],n[2]=e[14],n}function rd(n,e){var t=e[0],r=e[1],i=e[2],a=e[4],o=e[5],s=e[6],l=e[8],u=e[9],c=e[10];return n[0]=Math.hypot(t,r,i),n[1]=Math.hypot(a,o,s),n[2]=Math.hypot(l,u,c),n}function zg(n,e){var t=new Ei.WT(3);rd(t,e);var r=1/t[0],i=1/t[1],a=1/t[2],o=e[0]*r,s=e[1]*i,l=e[2]*a,u=e[4]*r,c=e[5]*i,f=e[6]*a,h=e[8]*r,d=e[9]*i,g=e[10]*a,p=o+c+g,m=0;return p>0?(m=Math.sqrt(p+1)*2,n[3]=.25*m,n[0]=(f-d)/m,n[1]=(h-l)/m,n[2]=(s-u)/m):o>c&&o>g?(m=Math.sqrt(1+o-c-g)*2,n[3]=(f-d)/m,n[0]=.25*m,n[1]=(s+u)/m,n[2]=(h+l)/m):c>g?(m=Math.sqrt(1+c-o-g)*2,n[3]=(h-l)/m,n[0]=(s+u)/m,n[1]=.25*m,n[2]=(f+d)/m):(m=Math.sqrt(1+g-o-c)*2,n[3]=(s-u)/m,n[0]=(h+l)/m,n[1]=(f+d)/m,n[2]=.25*m),n}function vJ(n,e,t,r){var i=e[0],a=e[1],o=e[2],s=e[3],l=i+i,u=a+a,c=o+o,f=i*l,h=i*u,d=i*c,g=a*u,p=a*c,m=o*c,_=s*l,S=s*u,M=s*c,R=r[0],F=r[1],V=r[2];return n[0]=(1-(g+m))*R,n[1]=(h+M)*R,n[2]=(d-S)*R,n[3]=0,n[4]=(h-M)*F,n[5]=(1-(f+m))*F,n[6]=(p+_)*F,n[7]=0,n[8]=(d+S)*V,n[9]=(p-_)*V,n[10]=(1-(f+g))*V,n[11]=0,n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=1,n}function $st(n,e,t,r,i){var a=e[0],o=e[1],s=e[2],l=e[3],u=a+a,c=o+o,f=s+s,h=a*u,d=a*c,g=a*f,p=o*c,m=o*f,_=s*f,S=l*u,M=l*c,R=l*f,F=r[0],V=r[1],nt=r[2],at=i[0],xt=i[1],gt=i[2],Tt=(1-(p+_))*F,Ct=(d+R)*F,te=(g-M)*F,Kt=(d-R)*V,ne=(1-(h+_))*V,ee=(m+S)*V,ve=(g+M)*nt,ie=(m-S)*nt,ye=(1-(h+p))*nt;return n[0]=Tt,n[1]=Ct,n[2]=te,n[3]=0,n[4]=Kt,n[5]=ne,n[6]=ee,n[7]=0,n[8]=ve,n[9]=ie,n[10]=ye,n[11]=0,n[12]=t[0]+at-(Tt*at+Kt*xt+ve*gt),n[13]=t[1]+xt-(Ct*at+ne*xt+ie*gt),n[14]=t[2]+gt-(te*at+ee*xt+ye*gt),n[15]=1,n}function TO(n,e){var t=e[0],r=e[1],i=e[2],a=e[3],o=t+t,s=r+r,l=i+i,u=t*o,c=r*o,f=r*s,h=i*o,d=i*s,g=i*l,p=a*o,m=a*s,_=a*l;return n[0]=1-f-g,n[1]=c+_,n[2]=h-m,n[3]=0,n[4]=c-_,n[5]=1-u-g,n[6]=d+p,n[7]=0,n[8]=h+m,n[9]=d-p,n[10]=1-u-f,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Qst(n,e,t,r,i,a,o){var s=1/(t-e),l=1/(i-r),u=1/(a-o);return n[0]=a*2*s,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=a*2*l,n[6]=0,n[7]=0,n[8]=(t+e)*s,n[9]=(i+r)*l,n[10]=(o+a)*u,n[11]=-1,n[12]=0,n[13]=0,n[14]=o*a*2*u,n[15]=0,n}function gJ(n,e,t,r,i){var a=1/Math.tan(e/2),o;return n[0]=a/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=a,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,i!=null&&i!==Infinity?(o=1/(r-i),n[10]=(i+r)*o,n[14]=2*i*r*o):(n[10]=-1,n[14]=-2*r),n}function Jst(n,e,t,r){var i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+s),u=2/(i+a);return n[0]=l,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=u,n[6]=0,n[7]=0,n[8]=-((o-s)*l*.5),n[9]=(i-a)*u*.5,n[10]=r/(t-r),n[11]=-1,n[12]=0,n[13]=0,n[14]=r*t/(t-r),n[15]=0,n}function pJ(n,e,t,r,i,a,o){var s=1/(e-t),l=1/(r-i),u=1/(a-o);return n[0]=-2*s,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*l,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*u,n[11]=0,n[12]=(e+t)*s,n[13]=(i+r)*l,n[14]=(o+a)*u,n[15]=1,n}function yJ(n,e,t,r){var i,a,o,s,l,u,c,f,h,d,g=e[0],p=e[1],m=e[2],_=r[0],S=r[1],M=r[2],R=t[0],F=t[1],V=t[2];return Math.abs(g-R)<Ei.Ib&&Math.abs(p-F)<Ei.Ib&&Math.abs(m-V)<Ei.Ib?AO(n):(c=g-R,f=p-F,h=m-V,d=1/Math.hypot(c,f,h),c*=d,f*=d,h*=d,i=S*h-M*f,a=M*c-_*h,o=_*f-S*c,d=Math.hypot(i,a,o),d?(d=1/d,i*=d,a*=d,o*=d):(i=0,a=0,o=0),s=f*o-h*a,l=h*i-c*o,u=c*a-f*i,d=Math.hypot(s,l,u),d?(d=1/d,s*=d,l*=d,u*=d):(s=0,l=0,u=0),n[0]=i,n[1]=s,n[2]=c,n[3]=0,n[4]=a,n[5]=l,n[6]=f,n[7]=0,n[8]=o,n[9]=u,n[10]=h,n[11]=0,n[12]=-(i*g+a*p+o*m),n[13]=-(s*g+l*p+u*m),n[14]=-(c*g+f*p+h*m),n[15]=1,n)}function qst(n,e,t,r){var i=e[0],a=e[1],o=e[2],s=r[0],l=r[1],u=r[2],c=i-t[0],f=a-t[1],h=o-t[2],d=c*c+f*f+h*h;d>0&&(d=1/Math.sqrt(d),c*=d,f*=d,h*=d);var g=l*h-u*f,p=u*c-s*h,m=s*f-l*c;return d=g*g+p*p+m*m,d>0&&(d=1/Math.sqrt(d),g*=d,p*=d,m*=d),n[0]=g,n[1]=p,n[2]=m,n[3]=0,n[4]=f*m-h*p,n[5]=h*g-c*m,n[6]=c*p-f*g,n[7]=0,n[8]=c,n[9]=f,n[10]=h,n[11]=0,n[12]=i,n[13]=a,n[14]=o,n[15]=1,n}function tlt(n){return"mat4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+", "+n[9]+", "+n[10]+", "+n[11]+", "+n[12]+", "+n[13]+", "+n[14]+", "+n[15]+")"}function elt(n){return Math.hypot(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15])}function rlt(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n[4]=e[4]+t[4],n[5]=e[5]+t[5],n[6]=e[6]+t[6],n[7]=e[7]+t[7],n[8]=e[8]+t[8],n[9]=e[9]+t[9],n[10]=e[10]+t[10],n[11]=e[11]+t[11],n[12]=e[12]+t[12],n[13]=e[13]+t[13],n[14]=e[14]+t[14],n[15]=e[15]+t[15],n}function nlt(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n[4]=e[4]-t[4],n[5]=e[5]-t[5],n[6]=e[6]-t[6],n[7]=e[7]-t[7],n[8]=e[8]-t[8],n[9]=e[9]-t[9],n[10]=e[10]-t[10],n[11]=e[11]-t[11],n[12]=e[12]-t[12],n[13]=e[13]-t[13],n[14]=e[14]-t[14],n[15]=e[15]-t[15],n}function ilt(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n[9]=e[9]*t,n[10]=e[10]*t,n[11]=e[11]*t,n[12]=e[12]*t,n[13]=e[13]*t,n[14]=e[14]*t,n[15]=e[15]*t,n}function alt(n,e,t,r){return n[0]=e[0]+t[0]*r,n[1]=e[1]+t[1]*r,n[2]=e[2]+t[2]*r,n[3]=e[3]+t[3]*r,n[4]=e[4]+t[4]*r,n[5]=e[5]+t[5]*r,n[6]=e[6]+t[6]*r,n[7]=e[7]+t[7]*r,n[8]=e[8]+t[8]*r,n[9]=e[9]+t[9]*r,n[10]=e[10]+t[10]*r,n[11]=e[11]+t[11]*r,n[12]=e[12]+t[12]*r,n[13]=e[13]+t[13]*r,n[14]=e[14]+t[14]*r,n[15]=e[15]+t[15]*r,n}function olt(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]&&n[3]===e[3]&&n[4]===e[4]&&n[5]===e[5]&&n[6]===e[6]&&n[7]===e[7]&&n[8]===e[8]&&n[9]===e[9]&&n[10]===e[10]&&n[11]===e[11]&&n[12]===e[12]&&n[13]===e[13]&&n[14]===e[14]&&n[15]===e[15]}function slt(n,e){var t=n[0],r=n[1],i=n[2],a=n[3],o=n[4],s=n[5],l=n[6],u=n[7],c=n[8],f=n[9],h=n[10],d=n[11],g=n[12],p=n[13],m=n[14],_=n[15],S=e[0],M=e[1],R=e[2],F=e[3],V=e[4],nt=e[5],at=e[6],xt=e[7],gt=e[8],Tt=e[9],Ct=e[10],te=e[11],Kt=e[12],ne=e[13],ee=e[14],ve=e[15];return Math.abs(t-S)<=glMatrix.EPSILON*Math.max(1,Math.abs(t),Math.abs(S))&&Math.abs(r-M)<=glMatrix.EPSILON*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(i-R)<=glMatrix.EPSILON*Math.max(1,Math.abs(i),Math.abs(R))&&Math.abs(a-F)<=glMatrix.EPSILON*Math.max(1,Math.abs(a),Math.abs(F))&&Math.abs(o-V)<=glMatrix.EPSILON*Math.max(1,Math.abs(o),Math.abs(V))&&Math.abs(s-nt)<=glMatrix.EPSILON*Math.max(1,Math.abs(s),Math.abs(nt))&&Math.abs(l-at)<=glMatrix.EPSILON*Math.max(1,Math.abs(l),Math.abs(at))&&Math.abs(u-xt)<=glMatrix.EPSILON*Math.max(1,Math.abs(u),Math.abs(xt))&&Math.abs(c-gt)<=glMatrix.EPSILON*Math.max(1,Math.abs(c),Math.abs(gt))&&Math.abs(f-Tt)<=glMatrix.EPSILON*Math.max(1,Math.abs(f),Math.abs(Tt))&&Math.abs(h-Ct)<=glMatrix.EPSILON*Math.max(1,Math.abs(h),Math.abs(Ct))&&Math.abs(d-te)<=glMatrix.EPSILON*Math.max(1,Math.abs(d),Math.abs(te))&&Math.abs(g-Kt)<=glMatrix.EPSILON*Math.max(1,Math.abs(g),Math.abs(Kt))&&Math.abs(p-ne)<=glMatrix.EPSILON*Math.max(1,Math.abs(p),Math.abs(ne))&&Math.abs(m-ee)<=glMatrix.EPSILON*Math.max(1,Math.abs(m),Math.abs(ee))&&Math.abs(_-ve)<=glMatrix.EPSILON*Math.max(1,Math.abs(_),Math.abs(ve))}var llt=null,ult=null,IO,OO,PO,DO,LO,RO,NO,kO,BO,FO,GO,zO,xs,UO,WO,VO,XO,YO,HO,jO,ZO,KO,$O,QO;function Jy(n,e){var t;if(typeof Symbol=="undefined"||n[Symbol.iterator]==null){if(Array.isArray(n)||(t=mJ(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function mJ(n,e){if(!!n){if(typeof n=="string")return JO(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return JO(n,e)}}function JO(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var nd=(IO=(0,ur.b2)(),OO=(0,ur.f3)(je.MeshComponentManager),PO=(0,ur.f3)(je.GeometryComponentManager),DO=(0,ur.f3)(je.MaterialComponentManager),LO=(0,ur.f3)(je.CullableComponentManager),RO=(0,ur.f3)(je.TransformComponentManager),NO=(0,ur.f3)(je.HierarchyComponentManager),kO=(0,ur.f3)(je.Systems),BO=(0,ur.t6)(je.FrameGraphSystem),FO=(0,ur.f3)(je.RenderEngine),GO=(0,ur.f3)(je.ResourcePool),IO(zO=(xs=(QO=$O=function(){function n(){var e=this;(0,Pr.Z)(this,n),Gr(this,"mesh",UO,this),Gr(this,"geometry",WO,this),Gr(this,"material",VO,this),Gr(this,"cullable",XO,this),Gr(this,"transform",YO,this),Gr(this,"hierarchy",HO,this),Gr(this,"frameGraphSystem",jO,this),Gr(this,"engine",ZO,this),Gr(this,"resourcePool",KO,this),this.modelCache={},this.setup=function(t,r,i){var a=t.createRenderTarget(r,"color buffer",{width:1,height:1,usage:me.RENDER_ATTACHMENT|me.SAMPLED|me.COPY_SRC});i.data={output:r.write(t,a)}},this.execute=function(){var t=(0,Fn.Z)(Ir().mark(function r(i,a,o){var s,l,u,c,f,h;return Ir().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:s=i.getResourceNode(a.data.output),l=e.resourcePool.getOrCreateResource(s.resource),u=Jy(o),g.prev=3,u.s();case 5:if((c=u.n()).done){g.next=11;break}return f=c.value,g.next=9,e.initView(f);case 9:g.next=5;break;case 11:g.next=16;break;case 13:g.prev=13,g.t0=g.catch(3),u.e(g.t0);case 16:return g.prev=16,u.f(),g.finish(16);case 19:h=e.engine.getCanvas(),l.resize({width:h.width,height:h.height}),e.engine.setScissor({enable:!1}),e.engine.clear({framebuffer:l,color:o[0].getClearColor(),depth:1}),e.engine.useFramebuffer(l,function(){var p=Jy(o),m;try{for(p.s();!(m=p.n()).done;){var _=m.value;e.renderView(_)}}catch(S){p.e(S)}finally{p.f()}});case 24:case"end":return g.stop()}},r,null,[[3,13,16,19]])}));return function(r,i,a){return t.apply(this,arguments)}}()}return(0,Fr.Z)(n,[{key:"renderView",value:function(t){var r=t.getScene(),i=t.getCamera(),a=i.getViewTransform(),o=df(po(),i.getPerspective(),a);i.getFrustum().extractFromVPMatrix(o);var s=t.getViewport(),l=s.x,u=s.y,c=s.width,f=s.height;this.engine.viewport({x:l,y:u,width:c,height:f});var h=Jy(r.getEntities()),d;try{for(h.s();!(d=h.n()).done;){var g=d.value;this.renderMesh(g,{camera:i,view:t,viewMatrix:a})}}catch(p){h.e(p)}finally{h.f()}}},{key:"renderMesh",value:function(t,r){var i=r.camera,a=r.view,o=r.viewMatrix,s=this.mesh.getComponentByEntity(t);if(!(!s||!s.visible)){var l=s.material,u=s.geometry;if(!(!u||u.dirty||!l)){var c=this.transform.getComponentByEntity(t),f=df(po(),o,c.worldTransform),h=a.getViewport(),d=h.width,g=h.height;l.setUniform({projectionMatrix:i.getPerspective(),modelViewMatrix:f,modelMatrix:c.worldTransform,viewMatrix:o,cameraPosition:i.getPosition(),u_viewport:[d,g]}),s.model&&(s.model.draw({uniforms:l.uniforms.reduce(function(p,m){return p[m.name]=m.data,p},{})}),l.uniforms.forEach(function(p){p.dirty=!1}),l.dirty=!1)}}}},{key:"initMesh",value:function(){var e=(0,Fn.Z)(Ir().mark(function r(i,a){var o,s,l,u,c,f,h,d;return Ir().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(o=this.mesh.getComponentByEntity(i),o){p.next=3;break}return p.abrupt("return");case 3:if(s=o.material,l=o.geometry,!(!l||l.dirty||!s)){p.next=7;break}return p.abrupt("return");case 7:if(o.model){p.next=24;break}if(u="m-".concat(s.entity,"-g-").concat(l.entity),!this.modelCache[u]){p.next=12;break}return o.model=this.modelCache[u],p.abrupt("return");case 12:return s.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),c=this.engine,f=c.createModel,h=c.createAttribute,d={vs:s.vertexShaderGLSL,fs:s.fragmentShaderGLSL,defines:s.defines,attributes:l.attributes.reduce(function(m,_){return _.data&&_.buffer&&(m[_.name]=h({buffer:_.buffer,attributes:_.attributes,arrayStride:_.arrayStride,stepMode:_.stepMode,divisor:_.stepMode==="vertex"?0:1})),m},{}),uniforms:s.uniforms.reduce(function(m,_){return m[_.name]=_.data,m},{}),scissor:{enable:!0,box:function(){return a.getViewport()}}},s.cull&&(d.cull=s.cull),s.depth&&(d.depth=s.depth),s.blend&&(d.blend=s.blend),l.indicesBuffer&&(d.elements=l.indicesBuffer),l.maxInstancedCount&&(d.instances=l.maxInstancedCount,d.count=l.vertexCount||3),p.next=22,f(d);case 22:o.model=p.sent,this.modelCache[u]=o.model;case 24:case"end":return p.stop()}},r,this)}));function t(r,i){return e.apply(this,arguments)}return t}()},{key:"initView",value:function(){var e=(0,Fn.Z)(Ir().mark(function r(i){var a,o,s,l;return Ir().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:a=i.getScene(),o=Jy(a.getEntities()),c.prev=2,o.s();case 4:if((s=o.n()).done){c.next=10;break}return l=s.value,c.next=8,this.initMesh(l,i);case 8:c.next=4;break;case 10:c.next=15;break;case 12:c.prev=12,c.t0=c.catch(2),o.e(c.t0);case 15:return c.prev=15,o.f(),c.finish(15);case 18:case"end":return c.stop()}},r,this,[[2,12,15,18]])}));function t(r){return e.apply(this,arguments)}return t}()}]),n}(),$O.IDENTIFIER="Render Pass",QO),UO=zr(xs.prototype,"mesh",[OO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),WO=zr(xs.prototype,"geometry",[PO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),VO=zr(xs.prototype,"material",[DO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),XO=zr(xs.prototype,"cullable",[LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),YO=zr(xs.prototype,"transform",[RO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),HO=zr(xs.prototype,"hierarchy",[NO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jO=zr(xs.prototype,"frameGraphSystem",[kO,BO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ZO=zr(xs.prototype,"engine",[FO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),KO=zr(xs.prototype,"resourcePool",[GO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xs))||zO),qO,tP,eP,rP,nP,iP,id,aP,oP,sP,lP,uP,cP;function b_(n,e){var t;if(typeof Symbol=="undefined"||n[Symbol.iterator]==null){if(Array.isArray(n)||(t=xJ(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function xJ(n,e){if(!!n){if(typeof n=="string")return fP(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return fP(n,e)}}function fP(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var __={NONE:0,ENCODE:1,HIGHLIGHT:2},S_=(qO=(0,ur.b2)(),tP=(0,ur.f3)(je.RenderEngine),eP=(0,ur.f3)(je.ResourcePool),rP=(0,ur.f3)(je.RenderPassFactory),nP=(0,ur.f3)(je.MeshComponentManager),qO(iP=(id=(cP=uP=function(){function n(){var e=this;(0,Pr.Z)(this,n),Gr(this,"engine",aP,this),Gr(this,"resourcePool",oP,this),Gr(this,"renderPassFactory",sP,this),Gr(this,"mesh",lP,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(t,r,i){var a=t.createRenderTarget(r,"picking fbo",{width:1,height:1});i.data={output:r.write(t,a)},r.hasSideEffect=!0},this.execute=function(){var t=(0,Fn.Z)(Ir().mark(function r(i,a,o){var s,l,u;return Ir().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(e.views=o,!e.alreadyInRendering){f.next=3;break}return f.abrupt("return");case 3:s=b_(o);try{for(u=function(){var d=l.value,g=d.getViewport(),p=g.width,m=g.height;e.alreadyInRendering=!0;var _=i.getResourceNode(a.data.output);e.pickingFBO=e.resourcePool.getOrCreateResource(_.resource),e.pickingFBO.resize({width:p,height:m}),e.engine.useFramebuffer(e.pickingFBO,function(){e.engine.clear({framebuffer:e.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var S=e.renderPassFactory(nd.IDENTIFIER),M=[],R=d.getScene(),F=b_(R.getEntities()),V;try{for(F.s();!(V=F.n()).done;){var nt=V.value,at=e.mesh.getComponentByEntity(nt),xt=at.material;xt.setUniform("u_PickingStage",__.ENCODE),M.push(at)}}catch(gt){F.e(gt)}finally{F.f()}S.renderView(d),M.forEach(function(gt){var Tt=gt.material;Tt.setUniform("u_PickingStage",__.HIGHLIGHT)}),e.alreadyInRendering=!1})},s.s();!(l=s.n()).done;)u()}catch(h){s.e(h)}finally{s.f()}case 5:case"end":return f.stop()}},r)}));return function(r,i,a){return t.apply(this,arguments)}}(),this.pick=function(t,r){var i=t.x,a=t.y,o=e.engine,s=o.readPixels,l=o.useFramebuffer,u=r.getViewport(),c=u.width,f=u.height,h=i*window.devicePixelRatio,d=a*window.devicePixelRatio;if(!(h>c||h<0||d>f||d<0)){var g,p;return l(e.pickingFBO,function(){g=s({x:Math.round(h),y:Math.round(f-(a+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:e.pickingFBO}),(g[0]!==0||g[1]!==0||g[2]!==0)&&(p=sJ(g),e.highlightEnabled&&e.highlightPickedFeature(g,r))}),p}}}return(0,Fr.Z)(n,[{key:"enableHighlight",value:function(t){this.highlightEnabled=t}},{key:"setHighlightColor",value:function(t){this.highlightColor=t}},{key:"highlightPickedFeature",value:function(t,r){if(t){var i=b_(r.getScene().getEntities()),a;try{for(i.s();!(a=i.n()).done;){var o=a.value,s=this.mesh.getComponentByEntity(o),l=s.material;l.setUniform("u_PickingStage",__.HIGHLIGHT),l.setUniform("u_PickingColor",[t[0],t[1],t[2]]),l.setUniform("u_HighlightColor",this.highlightColor)}}catch(u){i.e(u)}finally{i.f()}}}}]),n}(),uP.IDENTIFIER="PixelPicking Pass",cP),aP=zr(id.prototype,"engine",[tP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oP=zr(id.prototype,"resourcePool",[eP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sP=zr(id.prototype,"renderPassFactory",[rP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lP=zr(id.prototype,"mesh",[nP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),id))||iP),hP,dP,vP,gP,qy,pP,yP,mP,xP,bJ=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,_J=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,SJ=`layout(set = 0, binding = 0) uniform sampler u_TextureSampler;
layout(set = 0, binding = 1) uniform texture2D u_Texture;

layout(location = 0) in vec2 v_UV;
layout(location = 0) out vec4 outColor;

void main() {
  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);
}`,EJ=`layout(location = 0) in vec2 a_Position;
layout(location = 0) out vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,tm=(hP=(0,ur.b2)(),dP=(0,ur.f3)(je.RenderEngine),vP=(0,ur.f3)(je.ResourcePool),hP(gP=(qy=(xP=mP=function n(){var e=this;(0,Pr.Z)(this,n),Gr(this,"engine",pP,this),Gr(this,"resourcePool",yP,this),this.model=void 0,this.setup=function(t,r,i){var a=t.getPass(nd.IDENTIFIER);if(a){var o=t.createRenderTarget(r,"render to screen",{width:1,height:1});i.data={input:r.read(a.data.output),output:r.write(t,o)}}},this.execute=function(){var t=(0,Fn.Z)(Ir().mark(function r(i,a){var o,s,l,u,c,f,h;return Ir().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(o=e.engine,s=o.createModel,l=o.createAttribute,u=o.createBuffer,e.model){g.next=6;break}return g.next=4,s({vs:e.engine.supportWebGPU?EJ:_J,fs:e.engine.supportWebGPU?SJ:bJ,attributes:{a_Position:l({buffer:u({data:[-4,-4,4,-4,0,4],type:me.FLOAT}),size:2,arrayStride:2*4,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:c=g.sent,e.model=c;case 6:f=i.getResourceNode(a.data.input),h=e.resourcePool.getOrCreateResource(f.resource),e.engine.useFramebuffer(null,function(){e.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),e.model.draw({uniforms:{u_Texture:h}})});case 9:case"end":return g.stop()}},r)}));return function(r,i){return t.apply(this,arguments)}}(),this.tearDown=function(){e.model=void 0}},mP.IDENTIFIER="Copy Pass",xP),pP=zr(qy.prototype,"engine",[dP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yP=zr(qy.prototype,"resourcePool",[vP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qy))||gP),bP,_P,SP,EP,wP,CP,MP,ad,AP,TP,IP,OP,PP,wJ=(bP=(0,ur.b2)(),_P=(0,ur.f3)(je.Systems),SP=(0,ur.t6)(je.FrameGraphSystem),EP=(0,ur.f3)(je.RenderPassFactory),wP=(0,ur.f3)(je.ConfigService),CP=(0,ur.f3)(je.ResourcePool),bP(MP=(ad=(PP=function(){function n(){(0,Pr.Z)(this,n),Gr(this,"frameGraphSystem",AP,this),Gr(this,"renderPassFactory",TP,this),Gr(this,"configService",IP,this),Gr(this,"resourcePool",OP,this)}return(0,Fr.Z)(n,[{key:"execute",value:function(){var e=(0,Fn.Z)(Ir().mark(function r(i){var a,o,s,l,u,c,f,h,d;return Ir().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:a=this.renderPassFactory(nd.IDENTIFIER),o=a.setup,s=a.execute,l=this.frameGraphSystem.addPass(nd.IDENTIFIER,o,s),u=this.renderPassFactory(tm.IDENTIFIER),c=u.setup,f=u.execute,h=u.tearDown,d=this.frameGraphSystem.addPass(tm.IDENTIFIER,c,f,h),this.frameGraphSystem.present(d.data.output);case 5:case"end":return p.stop()}},r,this)}));function t(r){return e.apply(this,arguments)}return t}()},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(t,r){var i=this.renderPassFactory(S_.IDENTIFIER);return i.pick(t,r)}}]),n}(),PP),AP=zr(ad.prototype,"frameGraphSystem",[_P,SP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),TP=zr(ad.prototype,"renderPassFactory",[EP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),IP=zr(ad.prototype,"configService",[wP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),OP=zr(ad.prototype,"resourcePool",[CP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ad))||MP);function CJ(n){var e=MJ();return function(){var r=(0,Jn.Z)(n),i;if(e){var a=(0,Jn.Z)(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return(0,Oa.Z)(this,i)}}function MJ(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var AJ=function(n){(0,wa.Z)(t,n);var e=CJ(t);function t(r){var i;return(0,Pr.Z)(this,t),i=e.call(this,r),i.parentID=void 0,Object.assign((0,Zi.Z)(i),r),i}return t}(cf),DP,LP,RP,NP,kP,Ug,BP,FP,GP,zP,TJ=(DP=(0,ur.b2)(),LP=(0,ur.f3)(je.HierarchyComponentManager),RP=(0,ur.f3)(je.TransformComponentManager),NP=(0,ur.f3)(je.MeshComponentManager),DP(kP=(Ug=(zP=function(){function n(){(0,Pr.Z)(this,n),Gr(this,"hierarchy",BP,this),Gr(this,"transform",FP,this),Gr(this,"mesh",GP,this)}return(0,Fr.Z)(n,[{key:"execute",value:function(){var e=(0,Fn.Z)(Ir().mark(function r(){return Ir().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return a.stop()}},r,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var t=this;this.transform.forEach(function(r,i){(i.isDirty()||i.isLocalDirty())&&(t.setMeshAABBDirty(t.mesh.getComponentByEntity(r)),i.updateTransform())})}},{key:"runHierarchyUpdateSystem",value:function(){var t=this;this.hierarchy.forEach(function(r,i){var a=t.transform.getComponentByEntity(r),o=t.transform.getComponentByEntity(i.parentID);a!==null&&o!==null&&a.updateTransformWithParent(o)})}},{key:"attach",value:function(t,r,i){this.hierarchy.contains(t)&&this.detach(t),this.hierarchy.create(t,{parentID:r});var a=this.mesh.getComponentByEntity(r);if(this.setMeshAABBDirty(a),a&&a.children.indexOf(t)===-1&&a.children.push(t),this.hierarchy.getCount()>1)for(var o=this.hierarchy.getCount()-1;o>0;--o)for(var s=this.hierarchy.getEntity(o),l=0;l<o;++l){var u=this.hierarchy.getComponent(l);if(u.parentID===s){this.hierarchy.moveItem(o,l),++o;break}}var c=this.hierarchy.getComponentByEntity(t),f=this.transform.getComponentByEntity(r);f===null&&(f=this.transform.create(r));var h=this.transform.getComponentByEntity(t);h===null&&(h=this.transform.create(t),f=this.transform.getComponentByEntity(r)),h.parent=f,!i&&f&&(h.matrixTransform(Qy(po(),f.worldTransform)),h.updateTransform()),f&&h.updateTransformWithParent(f)}},{key:"detach",value:function(t){var r=this.hierarchy.getComponentByEntity(t);if(r!==null){var i=this.transform.getComponentByEntity(t);i!==null&&(i.parent=null,i.applyTransform()),this.hierarchy.removeKeepSorted(t);var a=this.mesh.getComponentByEntity(r.parentID);if(a){var o=a.children.indexOf(t);a.children.splice(o,1)}this.setMeshAABBDirty(a)}}},{key:"detachChildren",value:function(t){var r=this.mesh.getComponentByEntity(t);r&&(r.children=[]);for(var i=0;i<this.hierarchy.getCount();){var a;if(((a=this.hierarchy.getComponent(i))===null||a===void 0?void 0:a.parentID)===t){var o=this.hierarchy.getEntity(i);this.detach(o)}else++i}}},{key:"setMeshAABBDirty",value:function(t){t&&(t.aabbDirty=!0)}}]),n}(),zP),BP=zr(Ug.prototype,"hierarchy",[LP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),FP=zr(Ug.prototype,"transform",[RP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),GP=zr(Ug.prototype,"mesh",[NP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ug))||kP);function ga(){var n=new Ei.WT(4);return Ei.WT!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function clt(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n}function vf(n,e,t){t=t*.5;var r=Math.sin(t);return n[0]=r*e[0],n[1]=r*e[1],n[2]=r*e[2],n[3]=Math.cos(t),n}function flt(n,e){var t=Math.acos(e[3])*2,r=Math.sin(t/2);return r>glMatrix.EPSILON?(n[0]=e[0]/r,n[1]=e[1]/r,n[2]=e[2]/r):(n[0]=1,n[1]=0,n[2]=0),t}function hlt(n,e){var t=RJ(n,e);return Math.acos(2*t*t-1)}function ts(n,e,t){var r=e[0],i=e[1],a=e[2],o=e[3],s=t[0],l=t[1],u=t[2],c=t[3];return n[0]=r*c+o*s+i*u-a*l,n[1]=i*c+o*l+a*s-r*u,n[2]=a*c+o*u+r*l-i*s,n[3]=o*c-r*s-i*l-a*u,n}function dlt(n,e,t){t*=.5;var r=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(t),l=Math.cos(t);return n[0]=r*l+o*s,n[1]=i*l+a*s,n[2]=a*l-i*s,n[3]=o*l-r*s,n}function vlt(n,e,t){t*=.5;var r=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(t),l=Math.cos(t);return n[0]=r*l-a*s,n[1]=i*l+o*s,n[2]=a*l+r*s,n[3]=o*l-i*s,n}function glt(n,e,t){t*=.5;var r=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(t),l=Math.cos(t);return n[0]=r*l+i*s,n[1]=i*l-r*s,n[2]=a*l+o*s,n[3]=o*l-a*s,n}function plt(n,e){var t=e[0],r=e[1],i=e[2];return n[0]=t,n[1]=r,n[2]=i,n[3]=Math.sqrt(Math.abs(1-t*t-r*r-i*i)),n}function IJ(n,e){var t=e[0],r=e[1],i=e[2],a=e[3],o=Math.sqrt(t*t+r*r+i*i),s=Math.exp(a),l=o>0?s*Math.sin(o)/o:0;return n[0]=t*l,n[1]=r*l,n[2]=i*l,n[3]=s*Math.cos(o),n}function OJ(n,e){var t=e[0],r=e[1],i=e[2],a=e[3],o=Math.sqrt(t*t+r*r+i*i),s=o>0?Math.atan2(o,a)/o:0;return n[0]=t*s,n[1]=r*s,n[2]=i*s,n[3]=.5*Math.log(t*t+r*r+i*i+a*a),n}function ylt(n,e,t){return OJ(n,e),LJ(n,n,t),IJ(n,n),n}function em(n,e,t,r){var i=e[0],a=e[1],o=e[2],s=e[3],l=t[0],u=t[1],c=t[2],f=t[3],h,d,g,p,m;return d=i*l+a*u+o*c+s*f,d<0&&(d=-d,l=-l,u=-u,c=-c,f=-f),1-d>Ei.Ib?(h=Math.acos(d),g=Math.sin(h),p=Math.sin((1-r)*h)/g,m=Math.sin(r*h)/g):(p=1-r,m=r),n[0]=p*i+m*l,n[1]=p*a+m*u,n[2]=p*o+m*c,n[3]=p*s+m*f,n}function mlt(n){var e=glMatrix.RANDOM(),t=glMatrix.RANDOM(),r=glMatrix.RANDOM(),i=Math.sqrt(1-e),a=Math.sqrt(e);return n[0]=i*Math.sin(2*Math.PI*t),n[1]=i*Math.cos(2*Math.PI*t),n[2]=a*Math.sin(2*Math.PI*r),n[3]=a*Math.cos(2*Math.PI*r),n}function UP(n,e){var t=e[0],r=e[1],i=e[2],a=e[3],o=t*t+r*r+i*i+a*a,s=o?1/o:0;return n[0]=-t*s,n[1]=-r*s,n[2]=-i*s,n[3]=a*s,n}function xlt(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3],n}function PJ(n,e){var t=e[0]+e[4]+e[8],r;if(t>0)r=Math.sqrt(t+1),n[3]=.5*r,r=.5/r,n[0]=(e[5]-e[7])*r,n[1]=(e[6]-e[2])*r,n[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;r=Math.sqrt(e[i*3+i]-e[a*3+a]-e[o*3+o]+1),n[i]=.5*r,r=.5/r,n[3]=(e[a*3+o]-e[o*3+a])*r,n[a]=(e[a*3+i]+e[i*3+a])*r,n[o]=(e[o*3+i]+e[i*3+o])*r}return n}function E_(n,e,t,r){var i=.5*Math.PI/180;e*=i,t*=i,r*=i;var a=Math.sin(e),o=Math.cos(e),s=Math.sin(t),l=Math.cos(t),u=Math.sin(r),c=Math.cos(r);return n[0]=a*l*c-o*s*u,n[1]=o*s*c+a*l*u,n[2]=o*l*u-a*s*c,n[3]=o*l*c+a*s*u,n}function blt(n){return"quat("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"}var _lt=rQ,w_=WI,Wg=nQ,Slt=iQ,Elt=aQ,DJ=ts,LJ=oQ,RJ=cQ,wlt=fQ,Clt=sQ,Mlt=null,Alt=lQ,Tlt=null,od=uQ,Ilt=hQ,Olt=dQ,Plt=function(){var n=zn(),e=nn(1,0,0),t=nn(0,1,0);return function(r,i,a){var o=As(i,a);return o<-.999999?(nv(n,e,i),sv(n)<1e-6&&nv(n,t,i),xc(n,n),vf(r,n,Math.PI),r):o>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(nv(n,i,a),r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=1+o,od(r,r))}}(),Dlt=function(){var n=ga(),e=ga();return function(t,r,i,a,o,s){return em(n,r,o,s),em(e,i,a,s),em(t,n,e,2*s*(1-s)),t}}(),Llt=function(){var n=ra.create();return function(e,t,r,i){return n[0]=r[0],n[3]=r[1],n[6]=r[2],n[1]=i[0],n[4]=i[1],n[7]=i[2],n[2]=-t[0],n[5]=-t[1],n[8]=-t[2],od(e,PJ(e,n))}}();function NJ(n){var e=kJ();return function(){var r=(0,Jn.Z)(n),i;if(e){var a=(0,Jn.Z)(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return(0,Oa.Z)(this,i)}}function kJ(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var WP=function(n){(0,wa.Z)(t,n);var e=NJ(t);function t(r){var i;return(0,Pr.Z)(this,t),i=e.call(this,r),i.dirtyFlag=void 0,i.localDirtyFlag=void 0,i.parent=null,i.localPosition=nn(0,0,0),i.localRotation=w_(0,0,0,1),i.localScale=nn(1,1,1),i.localTransform=po(),i.position=nn(0,0,0),i.rotation=w_(0,0,0,1),i.scaling=nn(1,1,1),i.worldTransform=po(),i.matrixTransform=function(){var a=po();return function(o){df(a,i.getLocalTransform(),o),rd(i.localScale,a),Gg(i.localPosition,a),zg(i.localRotation,a)}}(),i.rotateRollPitchYaw=function(){var a=ga(),o=ga(),s=ga();return function(l,u,c){i.setDirty(),E_(a,l,0,0),E_(o,0,u,0),E_(s,0,0,c),ts(i.localRotation,a,i.localRotation),ts(i.localRotation,i.localRotation,o),ts(i.localRotation,s,i.localRotation),od(i.localRotation,i.localRotation)}}(),i.lerp=function(){var a=zn(),o=ga(),s=zn(),l=zn(),u=ga(),c=zn();return function(f,h,d){i.setDirty(),rd(a,f.worldTransform),Gg(s,f.worldTransform),zg(o,f.worldTransform),rd(l,h.worldTransform),Gg(c,h.worldTransform),zg(u,h.worldTransform),Ua(i.localScale,a,l,d),em(i.localRotation,o,u,d),Ua(i.localPosition,s,c,d)}}(),i.translate=function(){var a=zn();return function(o){return za(a,i.getPosition(),o),i.setPosition(a),i.setDirty(!0),(0,Zi.Z)(i)}}(),i.translateLocal=function(){return function(a){return Ep(a,a,i.localRotation),za(i.localPosition,i.localPosition,a),i.setLocalDirty(!0),(0,Zi.Z)(i)}}(),i.setPosition=function(){var a=po();return function(o){return i.position=o,i.setLocalDirty(!0),i.parent===null?ea(i.localPosition,o):(x_(a,i.parent.worldTransform),Qy(a,a),$f(i.localPosition,o,a)),(0,Zi.Z)(i)}}(),i.rotate=function(){var a=ga();return function(o){if(i.parent===null)ts(i.localRotation,i.localRotation,o),od(i.localRotation,i.localRotation);else{var s=i.getRotation(),l=i.parent.getRotation();Wg(a,l),UP(a,a),ts(a,a,o),ts(i.localRotation,o,s),od(i.localRotation,i.localRotation)}return i.setLocalDirty(),(0,Zi.Z)(i)}}(),i.rotateLocal=function(){return function(a){return ts(i.localRotation,i.localRotation,a),od(i.localRotation,i.localRotation),i.setLocalDirty(!0),(0,Zi.Z)(i)}}(),i.setRotation=function(){var a=ga();return function(o){return i.parent===null?Wg(i.localRotation,o):(Wg(a,i.parent.getRotation()),UP(a,a),Wg(i.localRotation,a),DJ(i.localRotation,i.localRotation,o)),i.setLocalDirty(!0),(0,Zi.Z)(i)}}(),i}return(0,Fr.Z)(t,[{key:"setLocalPosition",value:function(i){ea(this.localPosition,i),this.setLocalDirty(!0)}},{key:"setLocalScale",value:function(i){ea(this.localScale,i),this.setLocalDirty(!0)}},{key:"setLocalRotation",value:function(i){return Wg(this.localRotation,i),this.setLocalDirty(!0),this}},{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;i?this.dirtyFlag|=t.DIRTY:this.dirtyFlag&=~t.DIRTY}},{key:"isLocalDirty",value:function(){return this.localDirtyFlag}},{key:"setLocalDirty",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;i?(this.localDirtyFlag|=t.DIRTY,this.setDirty(!0)):this.localDirtyFlag&=~t.DIRTY}},{key:"updateTransform",value:function(){this.isLocalDirty()&&this.getLocalTransform(),this.isDirty()&&this.parent===null&&(x_(this.worldTransform,this.getLocalTransform()),this.setDirty(!1))}},{key:"updateTransformWithParent",value:function(i){df(this.worldTransform,i.worldTransform,this.getLocalTransform())}},{key:"applyTransform",value:function(){this.setDirty(),rd(this.localScale,this.worldTransform),Gg(this.localPosition,this.worldTransform),zg(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localPosition=nn(0,0,0),this.localRotation=w_(0,0,0,1),this.localScale=nn(1,1,1)}},{key:"scaleLocal",value:function(i){return this.setLocalDirty(),Sp(this.localScale,this.localScale,i),this}},{key:"getLocalPosition",value:function(){return this.localPosition}},{key:"getLocalRotation",value:function(){return this.localRotation}},{key:"getLocalScale",value:function(){return this.localScale}},{key:"getLocalTransform",value:function(){return this.localDirtyFlag&&(vJ(this.localTransform,this.localRotation,this.localPosition,this.localScale),this.setLocalDirty(!1)),this.localTransform}},{key:"getWorldTransform",value:function(){return!this.isLocalDirty()&&!this.isDirty()?this.worldTransform:(this.parent&&this.parent.getWorldTransform(),this.updateTransform(),this.worldTransform)}},{key:"getPosition",value:function(){return Gg(this.position,this.worldTransform),this.position}},{key:"getRotation",value:function(){return zg(this.rotation,this.worldTransform),this.rotation}},{key:"getScale",value:function(){return rd(this.scaling,this.worldTransform),this.scaling}}]),t}(cf);WP.DIRTY=1<<0;var BJ=x(11922),VP,XP,YP,C_,HP,jP,FJ=(VP=(0,ur.b2)(),XP=(0,ur.f3)(je.RenderEngine),VP(YP=(C_=(jP=function(){function n(){(0,Pr.Z)(this,n),Gr(this,"engine",HP,this),this.resourcePool={}}return(0,Fr.Z)(n,[{key:"getOrCreateResource",value:function(t){if(!this.resourcePool[t.name]){var r=t.descriptor,i=r.width,a=r.height,o=r.usage;this.resourcePool[t.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:i,height:a,wrapS:me.CLAMP_TO_EDGE,wrapT:me.CLAMP_TO_EDGE,usage:o})})}return this.resourcePool[t.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),n}(),jP),HP=zr(C_.prototype,"engine",[XP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C_))||YP);function GJ(n){var e=zJ();return function(){var r=(0,Jn.Z)(n),i;if(e){var a=(0,Jn.Z)(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return(0,Oa.Z)(this,i)}}function zJ(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var UJ=function(n){(0,wa.Z)(t,n);var e=GJ(t);function t(r){var i;return(0,Pr.Z)(this,t),i=e.call(this,r),i.name=void 0,i.name=r.name||"",i}return t}(cf),ZP,KP,$P,WJ=(ZP=(0,ur.b2)(),ZP(KP=($P=function(){function n(){(0,Pr.Z)(this,n),this.config=void 0}return(0,Fr.Z)(n,[{key:"get",value:function(){return this.config}},{key:"set",value:function(t){this.config=t}}]),n}(),$P))||KP),QP,JP,qP;(function(n){n.PANSTART="PANSTART",n.PANEND="PANEND",n.PANMOVE="PANMOVE",n.PINCH="PINCH",n.KEYDOWN="KEYDOWN",n.KEYUP="KEYUP",n.HOVER="HOVER"})(qP||(qP={}));var VJ=(QP=(0,ur.b2)(),QP(JP=function(){function n(){(0,Pr.Z)(this,n)}return(0,Fr.Z)(n,[{key:"listen",value:function(t){}},{key:"on",value:function(t,r){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),n}())||JP);function XJ(n){var e=0;switch(n){case"vec2":case"ivec2":e=2;break;case"vec3":case"ivec3":e=3;break;case"vec4":case"ivec4":case"mat2":e=4;break;case"mat3":e=9;break;case"mat4":e=16;break;default:}return e}var YJ=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function tD(n){var e={};return n=n.replace(YJ,function(t,r,i){var a=i.split(":"),o=a[0].trim(),s="";switch(a.length>1&&(s=a[1].trim()),r){case"bool":s=s==="true";break;case"float":case"int":s=Number(s);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":s?s=s.replace("[","").replace("]","").split(",").reduce(function(l,u){return l.push(Number(u.trim())),l},[]):s=new Array(XJ(r)).fill(0);break;default:}return e[o]=s,"uniform ".concat(r," ").concat(o,`;
`)}),{content:n,uniforms:e}}function HJ(n){return n.filter(function(e,t,r){return r.indexOf(e)===t})}var eD,rD,nD;function iD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Vg(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?iD(Object(t),!0).forEach(function(r){(0,Fe.Z)(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):iD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var jJ=`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color) {
  bool selected = bool(v_PickingResult.a);

  if (selected) {
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(resultRGB, color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  return filterPickingColor(filterHighlightColor(color));
}
`,ZJ=`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  // compares only in highlight stage
  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}`,KJ=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}`,$J=/precision\s+(high|low|medium)p\s+float/,QJ=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,JJ=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,qJ=(eD=(0,ur.b2)(),eD(rD=(nD=function(){function n(){(0,Pr.Z)(this,n),this.moduleCache={},this.rawContentCache={}}return(0,Fr.Z)(n,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:ZJ,fs:jJ}),this.registerModule("sdf2d",{vs:"",fs:KJ})}},{key:"registerModule",value:function(t,r){if(!this.rawContentCache[t]){var i=r.vs,a=i===void 0?"":i,o=r.fs,s=o===void 0?"":o,l=r.uniforms,u=tD(a),c=u.content,f=u.uniforms,h=tD(s),d=h.content,g=h.uniforms;this.rawContentCache[t]={fs:d,uniforms:Vg(Vg(Vg({},f),g),l),vs:c}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(t){var r=this;if(this.moduleCache[t])return this.moduleCache[t];var i=this.rawContentCache[t].vs||"",a=this.rawContentCache[t].fs||"",o=this.processModule(i,[],"vs"),s=o.content,l=o.includeList,u=this.processModule(a,[],"fs"),c=u.content,f=u.includeList,h=c,d=HJ(l.concat(f).concat(t)).reduce(function(g,p){return Vg(Vg({},g),r.rawContentCache[p].uniforms)},{});return $J.test(c)||(h=QJ+c),this.moduleCache[t]={fs:h.trim(),uniforms:d,vs:s.trim()},this.moduleCache[t]}},{key:"processModule",value:function(t,r,i){var a=this,o=t.replace(JJ,function(s,l){var u=l.split(" "),c=u[0].replace(/"/g,"");if(r.indexOf(c)>-1)return"";var f=a.rawContentCache[c][i];r.push(c);var h=a.processModule(f||"",r,i),d=h.content;return d});return{content:o,includeList:r}}}]),n}(),nD))||rD),Zs=new ur.W2,aD=(0,BJ.Z)(Zs,!1),Rlt=function(e){var t=aD.lazyInject(e);return function(r,i,a){t.call(this,r,i),a&&(a.initializer=function(){return r[i]})}},Nlt=function(e){var t=aD.lazyMultiInject(e);return function(r,i,a){t.call(this,r,i),a&&(a.initializer=function(){return r[i]})}};Zs.bind(je.ShaderModuleService).to(qJ).inSingletonScope(),Zs.bind(je.NameComponentManager).toConstantValue(new ff(UJ)),Zs.bind(je.HierarchyComponentManager).toConstantValue(new ff(AJ)),Zs.bind(je.TransformComponentManager).toConstantValue(new ff(WP)),Zs.bind(je.MeshComponentManager).toConstantValue(new ff(nJ)),Zs.bind(je.CullableComponentManager).toConstantValue(new ff(tJ)),Zs.bind(je.GeometryComponentManager).toConstantValue(new ff(HQ)),Zs.bind(je.MaterialComponentManager).toConstantValue(new ff($Q));function tq(){var n=new ur.W2;return n.parent=Zs,n.bind(je.Systems).to(TJ).inSingletonScope().whenTargetNamed(je.SceneGraphSystem),n.bind(je.Systems).to(eQ).inSingletonScope().whenTargetNamed(je.FrameGraphSystem),n.bind(je.Systems).to(uJ).inSingletonScope().whenTargetNamed(je.MeshSystem),n.bind(je.Systems).to(jQ).inSingletonScope().whenTargetNamed(je.GeometrySystem),n.bind(je.Systems).to(QQ).inSingletonScope().whenTargetNamed(je.MaterialSystem),n.bind(je.Systems).to(wJ).inSingletonScope().whenTargetNamed(je.RendererSystem),n.bind(je.ResourcePool).to(FJ).inSingletonScope(),n.bind(je.ConfigService).to(WJ).inSingletonScope(),n.bind(je.InteractorService).to(VJ).inSingletonScope(),n.bind(je.RenderPass).to(nd).inSingletonScope().whenTargetNamed(nd.IDENTIFIER),n.bind(je.RenderPass).to(tm).inSingletonScope().whenTargetNamed(tm.IDENTIFIER),n.bind(je.RenderPass).to(S_).inSingletonScope().whenTargetNamed(S_.IDENTIFIER),n.bind(je.RenderPassFactory).toFactory(function(e){return function(t){return e.container.getNamed(je.RenderPass,t)}}),n}function M_(n){for(var e=new m_,t=nn(n[0],n[1],n[2]),r=nn(n[0],n[1],n[2]),i=3;i<n.length;){var a=n[i++],o=n[i++],s=n[i++];a<t[0]&&(t[0]=a),o<t[1]&&(t[1]=o),s<t[2]&&(t[2]=s),a>r[0]&&(r[0]=a),o>r[1]&&(r[1]=o),s>r[2]&&(r[2]=s)}return e.setMinMax(t,r),e}var yo=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),klt=zn(),Blt=null,Flt=zn(),Glt=zn(),zlt=zn(),Ult=zn(),Wlt=zn(),Vlt=null,Xlt=x(62697),Ylt=x(71894),Hlt=x(71186),jlt=x(25275),Zlt=x(72862),Klt=x(49633),oD;(function(n){n.Normal="normal",n.PostProcessing="post-processing"})(oD||(oD={}));var $lt=x(17222),Qlt=x(25965),Jlt=x(32391),qlt=x(13945),tut=x(27294),eut=x(89586),gf;(function(n){n.Void="Void",n.Boolean="Boolean",n.Float="Float",n.Uint32="Uint32",n.Int32="Int32",n.Vector="Vector",n.Vector2Float="vec2<f32>",n.Vector3Float="vec3<f32>",n.Vector4Float="vec4<f32>",n.Vector2Boolean="vec2<bool>",n.Vector3Boolean="vec3<bool>",n.Vector4Boolean="vec4<bool>",n.Vector2Uint="vec2<u32>",n.Vector3Uint="vec3<u32>",n.Vector4Uint="vec4<u32>",n.Vector2Int="vec2<i32>",n.Vector3Int="vec3<i32>",n.Vector4Int="vec4<i32>",n.Matrix="Matrix",n.Matrix3x3Float="mat3x3<f32>",n.Matrix4x4Float="mat4x4<i32>",n.Struct="Struct",n.FloatArray="Float[]",n.Vector4FloatArray="vec4<f32>[]"})(gf||(gf={}));var sD;(function(n){n.Program="Program",n.Identifier="Identifier",n.VariableDeclaration="VariableDeclaration",n.BlockStatement="BlockStatement",n.ReturnStatement="ReturnStatement",n.FunctionDeclaration="FunctionDeclaration",n.VariableDeclarator="VariableDeclarator",n.AssignmentExpression="AssignmentExpression",n.LogicalExpression="LogicalExpression",n.BinaryExpression="BinaryExpression",n.ArrayExpression="ArrayExpression",n.UnaryExpression="UnaryExpression",n.UpdateExpression="UpdateExpression",n.FunctionExpression="FunctionExpression",n.MemberExpression="MemberExpression",n.ConditionalExpression="ConditionalExpression",n.ExpressionStatement="ExpressionStatement",n.CallExpression="CallExpression",n.NumThreadStatement="NumThreadStatement",n.StorageStatement="StorageStatement",n.DoWhileStatement="DoWhileStatement",n.WhileStatement="WhileStatement",n.ForStatement="ForStatement",n.BreakStatement="BreakStatement",n.ContinueStatement="ContinueStatement",n.IfStatement="IfStatement",n.ImportedFunctionStatement="ImportedFunctionStatement"})(sD||(sD={}));var Gu;(function(n){n.Input="Input",n.Output="Output",n.Uniform="Uniform",n.Workgroup="Workgroup",n.UniformConstant="UniformConstant",n.Image="Image",n.StorageBuffer="StorageBuffer",n.Private="Private",n.Function="Function"})(Gu||(Gu={}));var Xg;(function(n){n.GLSL100="GLSL100",n.GLSL450="GLSL450",n.WGSL="WGSL"})(Xg||(Xg={}));var eq="__DefineValuePlaceholder__";function A_(n){return typeof n=="number"}function Rl(n){return n===void 0?0:n>360||n<-360?n%360:n}function pf(n,e,t){return A_(n)?nn(n,e,t):n.length===3?Go(n):nn(n[0],n[1],n[2])}var lD=function(){function n(e,t){(0,Pr.Z)(this,n),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=e,this.matrix=cJ(t.matrix),this.right=Go(t.right),this.up=Go(t.up),this.forward=Go(t.forward),this.position=Go(t.position),this.focalPoint=Go(t.focalPoint),this.distanceVector=Go(t.distanceVector),this.azimuth=t.azimuth,this.elevation=t.elevation,this.roll=t.roll,this.relAzimuth=t.relAzimuth,this.relElevation=t.relElevation,this.relRoll=t.relRoll,this.dollyingStep=t.dollyingStep,this.distance=t.distance}return(0,Fr.Z)(n,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(t){t.matrix=x_(t.matrix,this.matrix),t.right=ea(t.right,this.right),t.up=ea(t.up,this.up),t.forward=ea(t.forward,this.forward),t.position=ea(t.position,this.position),t.focalPoint=ea(t.focalPoint,this.focalPoint),t.distanceVector=ea(t.distanceVector,this.distanceVector),t.azimuth=this.azimuth,t.elevation=this.elevation,t.roll=this.roll,t.relAzimuth=this.relAzimuth,t.relElevation=this.relElevation,t.relRoll=this.relRoll,t.dollyingStep=this.dollyingStep,t.distance=this.distance}}]),n}(),uD,cD,fD,T_,hD,dD,vD,ii;(function(n){n.ORBITING="ORBITING",n.EXPLORING="EXPLORING",n.TRACKING="TRACKING"})(ii||(ii={}));var rm;(function(n){n.DEFAULT="DEFAULT",n.ROTATIONAL="ROTATIONAL",n.TRANSLATIONAL="TRANSLATIONAL",n.CINEMATIC="CINEMATIC"})(rm||(rm={}));var yf;(function(n){n.ORTHOGRAPHIC="ORTHOGRAPHIC",n.PERSPECTIVE="PERSPECTIVE"})(yf||(yf={}));var Nl=Math.PI/180,zu=180/Math.PI,gD=(uD=(0,ur.b2)(),cD=(0,ur.f3)(je.InteractorService),uD(fD=(T_=(vD=dD=function(){function n(){(0,Pr.Z)(this,n),this.matrix=po(),this.right=nn(1,0,0),this.up=nn(0,1,0),this.forward=nn(0,0,1),this.position=nn(0,0,1),this.focalPoint=nn(0,0,0),this.distanceVector=nn(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=Infinity,this.minDistance=-Infinity,this.rotateWorld=!1,Gr(this,"interactor",hD,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=po(),this.view=void 0,this.following=void 0,this.type=ii.EXPLORING,this.trackingMode=rm.DEFAULT,this.projectionMode=yf.PERSPECTIVE,this.frustum=new aJ,this.landmarks=[],this.landmarkAnimationID=void 0}return(0,Fr.Z)(n,[{key:"clone",value:function(){var t=new n;return t.setType(this.type,void 0),t.interactor=this.interactor,t}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(t,r){return this.type=t,this.type===ii.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===ii.TRACKING&&r!==void 0&&this.setTrackingMode(r),this}},{key:"setProjectionMode",value:function(t){return this.projectionMode=t,this}},{key:"setTrackingMode",value:function(t){if(this.type!==ii.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this}},{key:"setWorldRotation",value:function(t){this.rotateWorld=t,this._getAngles()}},{key:"getViewTransform",value:function(){return Qy(po(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"setMatrix",value:function(t){return this.matrix=t,this._update(),this}},{key:"setAspect",value:function(t){return this.setPerspective(this.near,this.far,this.fov,t),this}},{key:"setViewOffset",value:function(t,r,i,a,o,s){return this.aspect=t/r,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=r,this.view.offsetX=i,this.view.offsetY=a,this.view.width=o,this.view.height=s,this.projectionMode===yf.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===yf.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(t,r,i,a){return this.projectionMode=yf.PERSPECTIVE,this.fov=i,this.near=t,this.far=r,this.aspect=a,gJ(this.perspective,this.fov*Nl,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(t,r,i,a,o,s){this.projectionMode=yf.ORTHOGRAPHIC,this.rright=r,this.left=t,this.top=i,this.bottom=a,this.near=o,this.far=s;var l=(this.rright-this.left)/(2*this.zoom),u=(this.top-this.bottom)/(2*this.zoom),c=(this.rright+this.left)/2,f=(this.top+this.bottom)/2,h=c-l,d=c+l,g=f+u,p=f-u;if(this.view!==void 0&&this.view.enabled){var m=(this.rright-this.left)/this.view.fullWidth/this.zoom,_=(this.top-this.bottom)/this.view.fullHeight/this.zoom;h+=m*this.view.offsetX,d=h+m*this.view.width,g-=_*this.view.offsetY,p=g-_*this.view.height}return pJ(this.perspective,h,d,g,p,o,s),this}},{key:"setPosition",value:function(t,r,i){return this._setPosition(t,r,i),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(t,r,i){var a=nn(0,1,0);if(this.focalPoint=pf(t,r,i),this.trackingMode===rm.CINEMATIC){var o=Yi(zn(),this.focalPoint,this.position);t=o[0],r=o[1],i=o[2];var s=yc(o),l=Math.asin(r/s)*zu,u=90+Math.atan2(i,t)*zu,c=po();hJ(c,c,u*Nl),fJ(c,c,l*Nl),a=$f(zn(),[0,1,0],c)}return Qy(this.matrix,yJ(po(),this.position,this.focalPoint,a)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(t){if(!(this.distance===t||t<0)){this.distance=t,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var r=zn();t=this.distance;var i=this.forward,a=this.focalPoint;return r[0]=t*i[0]+a[0],r[1]=t*i[1]+a[1],r[2]=t*i[2]+a[2],this._setPosition(r),this}}},{key:"setMaxDistance",value:function(t){return this.maxDistance=t,this}},{key:"setMinDistance",value:function(t){return this.minDistance=t,this}},{key:"changeAzimuth",value:function(t){return this.setAzimuth(this.azimuth+t),this}},{key:"changeElevation",value:function(t){return this.setElevation(this.elevation+t),this}},{key:"changeRoll",value:function(t){return this.setRoll(this.roll+t),this}},{key:"setAzimuth",value:function(t){return this.azimuth=Rl(t),this.computeMatrix(),this._getAxes(),this.type===ii.ORBITING||this.type===ii.EXPLORING?this._getPosition():this.type===ii.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(t){return this.elevation=Rl(t),this.computeMatrix(),this._getAxes(),this.type===ii.ORBITING||this.type===ii.EXPLORING?this._getPosition():this.type===ii.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(t){return this.roll=Rl(t),this.computeMatrix(),this._getAxes(),this.type===ii.ORBITING||this.type===ii.EXPLORING?this._getPosition():this.type===ii.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(t,r,i){if(this.type===ii.EXPLORING){t=Rl(t),r=Rl(r),i=Rl(i);var a=vf(ga(),[1,0,0],(this.rotateWorld?1:-1)*r*Nl),o=vf(ga(),[0,1,0],(this.rotateWorld?1:-1)*t*Nl),s=vf(ga(),[0,0,1],i*Nl),l=ts(ga(),o,a);l=ts(ga(),l,s);var u=TO(po(),l);Fg(this.matrix,this.matrix,[0,0,-this.distance]),df(this.matrix,this.matrix,u),Fg(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+r)>90)return;this.relElevation=Rl(r),this.relAzimuth=Rl(t),this.relRoll=Rl(i),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===ii.ORBITING||this.type===ii.EXPLORING?this._getPosition():this.type===ii.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(t,r){var i=pf(t,r,0),a=Go(this.position);return za(a,a,mc(zn(),this.right,i[0])),za(a,a,mc(zn(),this.up,i[1])),this._setPosition(a),this}},{key:"dolly",value:function(t){var r=this.forward,i=Go(this.position),a=t*this.dollyingStep,o=this.distance+t*this.dollyingStep;return a=Math.max(Math.min(o,this.maxDistance),this.minDistance)-this.distance,i[0]+=a*r[0],i[1]+=a*r[1],i[2]+=a*r[2],this._setPosition(i),this.type===ii.ORBITING||this.type===ii.EXPLORING?this._getDistance():this.type===ii.TRACKING&&za(this.focalPoint,i,this.distanceVector),this}},{key:"createLandmark",value:function(t,r){var i=this.clone();i.setPosition(r.position),i.setFocalPoint(r.focalPoint),r.roll!==void 0&&i.setRoll(r.roll);var a=new lD(t,i);return this.landmarks.push(a),a}},{key:"setLandmark",value:function(t){var r=new lD(t,this);return this.landmarks.push(r),this}},{key:"gotoLandmark",value:function(t){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,a=this.landmarks.find(function(f){return f.name===t});if(a){if(i===0){a.retrieve(this);return}this.landmarkAnimationID!==void 0&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var o=a.getPosition(),s=a.getFocalPoint(),l=a.getRoll(),u,c=function f(h){u===void 0&&(u=h);var d=h-u,g=(1-Math.cos(d/i*Math.PI))/2,p=zn(),m=zn(),_=0;Ua(p,r.focalPoint,s,g),Ua(m,r.position,o,g),_=r.roll*(1-g)+l*g,r.setFocalPoint(p),r.setPosition(m),r.setRoll(_),r.computeMatrix();var S=ov(p,s)+ov(m,o);if(!(S>.01)){r.setFocalPoint(p),r.setPosition(m),r.setRoll(_),r.computeMatrix(),r.interactor.connect();return}d<i&&(r.landmarkAnimationID=window.requestAnimationFrame(f))};window.requestAnimationFrame(c)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var t,r,i=vf(ga(),[0,0,1],this.roll*Nl);AO(this.matrix),t=vf(ga(),[1,0,0],(this.rotateWorld&&this.type!==ii.TRACKING||this.type===ii.TRACKING?1:-1)*this.elevation*Nl),r=vf(ga(),[0,1,0],(this.rotateWorld&&this.type!==ii.TRACKING||this.type===ii.TRACKING?1:-1)*this.azimuth*Nl);var a=ts(ga(),r,t);a=ts(ga(),a,i);var o=TO(po(),a);this.type===ii.ORBITING||this.type===ii.EXPLORING?(Fg(this.matrix,this.matrix,this.focalPoint),df(this.matrix,this.matrix,o),Fg(this.matrix,this.matrix,[0,0,this.distance])):this.type===ii.TRACKING&&(Fg(this.matrix,this.matrix,this.position),df(this.matrix,this.matrix,o))}},{key:"_setPosition",value:function(t,r,i){this.position=pf(t,r,i);var a=this.matrix;a[12]=this.position[0],a[13]=this.position[1],a[14]=this.position[2],a[15]=1}},{key:"_getAxes",value:function(){ea(this.right,pf(kg(Ng(),[1,0,0,0],this.matrix))),ea(this.up,pf(kg(Ng(),[0,1,0,0],this.matrix))),ea(this.forward,pf(kg(Ng(),[0,0,1,0],this.matrix))),xc(this.right,this.right),xc(this.up,this.up),xc(this.forward,this.forward)}},{key:"_getAngles",value:function(){var t=this.distanceVector[0],r=this.distanceVector[1],i=this.distanceVector[2],a=yc(this.distanceVector);if(a===0){this.elevation=0,this.azimuth=0;return}this.type===ii.TRACKING?(this.elevation=Math.asin(r/a)*zu,this.azimuth=Math.atan2(-t,-i)*zu):this.rotateWorld?(this.elevation=Math.asin(r/a)*zu,this.azimuth=Math.atan2(-t,-i)*zu):(this.elevation=-Math.asin(r/a)*zu,this.azimuth=-Math.atan2(-t,-i)*zu)}},{key:"_getPosition",value:function(){ea(this.position,pf(kg(Ng(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){Eo(this.distanceVector,[0,0,-this.distance],ra.fromMat4(ra.create(),this.matrix)),za(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=Yi(zn(),this.focalPoint,this.position),this.distance=yc(this.distanceVector),this.dollyingStep=this.distance/100}}]),n}(),dD.ProjectionMode={ORTHOGRAPHIC:"ORTHOGRAPHIC",PERSPECTIVE:"PERSPECTIVE"},vD),hD=zr(T_.prototype,"interactor",[cD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T_))||fD),pD,yD,mD,I_,xD,Yg,bD,Uu=(pD=(0,ur.b2)(),yD=(0,ur.f3)(je.GeometryComponentManager),pD(mD=(I_=(bD=Yg=function(){function n(){(0,Pr.Z)(this,n),this.config=void 0,Gr(this,"geometry",xD,this),this.entity=void 0,this.component=void 0}return(0,Fr.Z)(n,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(t){this.config=t}},{key:"setEntity",value:function(t){this.entity=t,this.component=this.geometry.create(t),this.component.entity=t,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),n}(),Yg.BOX="box",Yg.SPHERE="sphere",Yg.PLANE="plane",Yg.MERGED="merged",bD),xD=zr(I_.prototype,"geometry",[yD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I_))||mD),pr=x(98344);function _D(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}var rq={}.toString,nq=function(e,t){return rq.call(e)==="[object "+t+"]"},iq=nq,aq=function(n){return Array.isArray?Array.isArray(n):iq(n,"Array")},oq=9007199254740991,sq="[object Arguments]",lq="[object Array]",uq="[object Boolean]",cq="[object Date]",fq="[object Error]",hq="[object Function]",dq="[object Map]",vq="[object Number]",gq="[object Object]",pq="[object RegExp]",yq="[object Set]",mq="[object String]",xq="[object WeakMap]",bq="[object ArrayBuffer]",_q="[object DataView]",Sq="[object Float32Array]",Eq="[object Float64Array]",wq="[object Int8Array]",Cq="[object Int16Array]",Mq="[object Int32Array]",Aq="[object Uint8Array]",Tq="[object Uint8ClampedArray]",Iq="[object Uint16Array]",Oq="[object Uint32Array]",Ii={};Ii[Sq]=Ii[Eq]=Ii[wq]=Ii[Cq]=Ii[Mq]=Ii[Aq]=Ii[Tq]=Ii[Iq]=Ii[Oq]=!0,Ii[sq]=Ii[lq]=Ii[bq]=Ii[uq]=Ii[_q]=Ii[cq]=Ii[fq]=Ii[hq]=Ii[dq]=Ii[vq]=Ii[gq]=Ii[pq]=Ii[yq]=Ii[mq]=Ii[xq]=!1;function rut(n){return function(e){return n(e)}}var Pq=Object.prototype,Dq=Pq.toString;function Lq(n){return Nq(n)&&Rq(n.length)&&!!Ii[Dq.call(n)]}function Rq(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=oq}function Nq(n){return!!n&&(0,ed.Z)(n)==="object"}var SD=Lq,ED,wD,CD,MD,nm,AD,TD,ID;function OD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function PD(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?OD(Object(t),!0).forEach(function(r){(0,Fe.Z)(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):OD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var DD=(ED=(0,ur.b2)(),wD=(0,ur.f3)(je.RenderEngine),CD=(0,ur.f3)(je.ConfigService),ED(MD=(nm=(ID=function(){function n(){(0,Pr.Z)(this,n),Gr(this,"engine",AD,this),Gr(this,"configService",TD,this),this.entity=js(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return(0,Fr.Z)(n,[{key:"init",value:function(){var t=this.configService.get(),r=t.canvas,i=t.engineOptions;this.initPromise=this.engine.init(PD({canvas:r||_D(),swapChainFormat:pr.EV.BGRA8Unorm,antialiasing:!1},i))}},{key:"setBundle",value:function(t){this.compiledBundle=JSON.parse(JSON.stringify(t))}},{key:"setDispatch",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=t),this}},{key:"setMaxIteration",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=t),this}},{key:"setBinding",value:function(t,r){var i=this;if(typeof t=="string"){var a=A_(r)||SD(r)||aq(r);if(this.compiledBundle&&this.compiledBundle.context){var o=this.compiledBundle.context.defines.find(function(l){return l.name===t});if(o)return o.value=r,this;var s=this.compiledBundle.context.uniforms.find(function(l){return l.name===t});s&&(a?(s.data=r,s.isReferer=!1,s.storageClass===Gu.Uniform?this.model&&this.model.updateUniform(t,r):this.model&&this.model.updateBuffer(t,r)):(s.isReferer=!0,s.data=r))}}else Object.keys(t).forEach(function(l){i.setBinding(l,t[l])});return this}},{key:"execute",value:function(){var e=(0,Fn.Z)(Ir().mark(function r(){var i=this,a,o,s=arguments;return Ir().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(a=s.length>0&&s[0]!==void 0?s[0]:1,!this.dirty){u.next=6;break}return this.compiledBundle.context&&(a>1?this.compiledBundle.context.maxIteration=a:this.compiledBundle.context.maxIteration++),u.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(c){var f=c.isReferer;return f}).forEach(function(c){var f=c.data,h=c.name;i.model.confirmInput(f.model,h)}),o=0;o<a;o++)this.model.run();return this.engine.endFrame(),u.abrupt("return",this);case 12:case"end":return u.stop()}},r,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getOutput",value:function(){var e=(0,Fn.Z)(Ir().mark(function r(){return Ir().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",this.model.readData());case 1:case"end":return a.stop()}},r,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"compile",value:function(){var e=(0,Fn.Z)(Ir().mark(function r(){var i,a,o;return Ir().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.initPromise;case 2:return i=PD({},this.compiledBundle.context),a=this.engine.supportWebGPU?this.engine.useWGSL?Xg.WGSL:Xg.GLSL450:Xg.GLSL100,o=this.compiledBundle.shaders[a],i.defines.filter(function(u){return u.runtime}).forEach(function(u){var c="".concat(eq).concat(u.name);o=o.replace(c,"".concat(u.value))}),i.shader=o,i.uniforms.forEach(function(u){if(!u.data&&u.storageClass===Gu.StorageBuffer){var c=1;u.type===gf.FloatArray?c=1:u.type===gf.Vector4FloatArray&&(c=4),u.data=new Float32Array(i.output.length*c).fill(0)}}),this.compiledBundle.context=i,l.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=l.sent;case 12:case"end":return l.stop()}},r,this)}));function t(){return e.apply(this,arguments)}return t}()}]),n}(),ID),AD=zr(nm.prototype,"engine",[wD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),TD=zr(nm.prototype,"configService",[CD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nm))||MD),LD,RD,ND,O_,kD,BD,FD,GD=(LD=(0,ur.b2)(),RD=(0,ur.f3)(je.MaterialComponentManager),LD(ND=(O_=(FD=BD=function(){function n(){(0,Pr.Z)(this,n),this.config=void 0,Gr(this,"material",kD,this),this.entity=void 0,this.component=void 0}return(0,Fr.Z)(n,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(t){this.config=t}},{key:"setEntity",value:function(t,r){this.entity=t,this.component=this.material.create(t),this.component.entity=t,this.component.type=r,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),n}(),BD.BASIC="basic",FD),kD=zr(O_.prototype,"material",[RD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O_))||ND),zD,UD,WD,VD,XD,YD,HD,sd,jD,ZD,KD,$D,im,QD,Wu=(zD=(0,ur.b2)(),UD=(0,ur.f3)(je.MeshComponentManager),WD=(0,ur.f3)(je.CullableComponentManager),VD=(0,ur.f3)(je.TransformComponentManager),XD=(0,ur.f3)(je.Systems),YD=(0,ur.t6)(je.SceneGraphSystem),zD(HD=(sd=(QD=im=function(){function n(){(0,Pr.Z)(this,n),this.attributes={},this.config=void 0,Gr(this,"mesh",jD,this),Gr(this,"cullable",ZD,this),Gr(this,"transform",KD,this),Gr(this,"sceneGraphSystem",$D,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return(0,Fr.Z)(n,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(t){this.config=t}},{key:"setEntity",value:function(t){this.entity=t,this.cullable.create(t),this.meshComponent=this.mesh.create(t),this.transformComponent=this.transform.create(t),this.onEntityCreated()}},{key:"setMaterial",value:function(t){return this.meshComponent.material=t,this}},{key:"setGeometry",value:function(t){return this.meshComponent.geometry=t,this}},{key:"setAttributes",value:function(t){var r=this;Object.keys(t).forEach(function(i){t[i]!==void 0&&t[i]!==r.attributes[i]&&(r.onAttributeChanged({name:i,data:t[i]}),r.attributes[i]=t[i])})}},{key:"setVisible",value:function(t){var r=this;return this.meshComponent.visible=t,this.meshComponent.children.forEach(function(i){var a=r.mesh.getComponentByEntity(i);a&&(a.visible=t)}),this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(t){return this.sceneGraphSystem.attach(this.entity,t.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(t){var r=t.name,i=t.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(r),i)}},{key:"convertAttributeName2UniformName",value:function(t){return t}}]),n}(),im.POINT="point",im.LINE="line",im.GRID="grid",QD),jD=zr(sd.prototype,"mesh",[UD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ZD=zr(sd.prototype,"cullable",[WD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),KD=zr(sd.prototype,"transform",[VD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$D=zr(sd.prototype,"sceneGraphSystem",[XD,YD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sd))||HD),kq=x(96377),Bq=x.n(kq),Fq=function(){function n(e,t){(0,Pr.Z)(this,n),this.attribute=void 0,this.buffer=void 0;var r=t.buffer,i=t.offset,a=t.stride,o=t.normalized,s=t.size,l=t.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:i||0,stride:a||0,normalized:o||!1,divisor:l||0},s&&(this.attribute.size=s)}return(0,Fr.Z)(n,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),n}(),kl,Hg,Bl,es,jg,Vu,Zg,am,Ks,mf,Pa,$s,Qs,om,Gq=(kl={},(0,Fe.Z)(kl,me.POINTS,"points"),(0,Fe.Z)(kl,me.LINES,"lines"),(0,Fe.Z)(kl,me.LINE_LOOP,"line loop"),(0,Fe.Z)(kl,me.LINE_STRIP,"line strip"),(0,Fe.Z)(kl,me.TRIANGLES,"triangles"),(0,Fe.Z)(kl,me.TRIANGLE_FAN,"triangle fan"),(0,Fe.Z)(kl,me.TRIANGLE_STRIP,"triangle strip"),kl),JD=(Hg={},(0,Fe.Z)(Hg,me.STATIC_DRAW,"static"),(0,Fe.Z)(Hg,me.DYNAMIC_DRAW,"dynamic"),(0,Fe.Z)(Hg,me.STREAM_DRAW,"stream"),Hg),P_=(Bl={},(0,Fe.Z)(Bl,me.BYTE,"int8"),(0,Fe.Z)(Bl,me.UNSIGNED_INT,"int16"),(0,Fe.Z)(Bl,me.INT,"int32"),(0,Fe.Z)(Bl,me.UNSIGNED_BYTE,"uint8"),(0,Fe.Z)(Bl,me.UNSIGNED_SHORT,"uint16"),(0,Fe.Z)(Bl,me.UNSIGNED_INT,"uint32"),(0,Fe.Z)(Bl,me.FLOAT,"float"),Bl),zq=(es={},(0,Fe.Z)(es,me.ALPHA,"alpha"),(0,Fe.Z)(es,me.LUMINANCE,"luminance"),(0,Fe.Z)(es,me.LUMINANCE_ALPHA,"luminance alpha"),(0,Fe.Z)(es,me.RGB,"rgb"),(0,Fe.Z)(es,me.RGBA,"rgba"),(0,Fe.Z)(es,me.RGBA4,"rgba4"),(0,Fe.Z)(es,me.RGB5_A1,"rgb5 a1"),(0,Fe.Z)(es,me.RGB565,"rgb565"),(0,Fe.Z)(es,me.DEPTH_COMPONENT,"depth"),(0,Fe.Z)(es,me.DEPTH_STENCIL,"depth stencil"),es),Uq=(jg={},(0,Fe.Z)(jg,me.DONT_CARE,"dont care"),(0,Fe.Z)(jg,me.NICEST,"nice"),(0,Fe.Z)(jg,me.FASTEST,"fast"),jg),qD=(Vu={},(0,Fe.Z)(Vu,me.NEAREST,"nearest"),(0,Fe.Z)(Vu,me.LINEAR,"linear"),(0,Fe.Z)(Vu,me.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,Fe.Z)(Vu,me.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,Fe.Z)(Vu,me.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,Fe.Z)(Vu,me.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Vu),tL=(Zg={},(0,Fe.Z)(Zg,me.REPEAT,"repeat"),(0,Fe.Z)(Zg,me.CLAMP_TO_EDGE,"clamp"),(0,Fe.Z)(Zg,me.MIRRORED_REPEAT,"mirror"),Zg),Wq=(am={},(0,Fe.Z)(am,me.NONE,"none"),(0,Fe.Z)(am,me.BROWSER_DEFAULT_WEBGL,"browser"),am),Vq=(Ks={},(0,Fe.Z)(Ks,me.NEVER,"never"),(0,Fe.Z)(Ks,me.ALWAYS,"always"),(0,Fe.Z)(Ks,me.LESS,"less"),(0,Fe.Z)(Ks,me.LEQUAL,"lequal"),(0,Fe.Z)(Ks,me.GREATER,"greater"),(0,Fe.Z)(Ks,me.GEQUAL,"gequal"),(0,Fe.Z)(Ks,me.EQUAL,"equal"),(0,Fe.Z)(Ks,me.NOTEQUAL,"notequal"),Ks),eL=(mf={},(0,Fe.Z)(mf,me.FUNC_ADD,"add"),(0,Fe.Z)(mf,me.MIN_EXT,"min"),(0,Fe.Z)(mf,me.MAX_EXT,"max"),(0,Fe.Z)(mf,me.FUNC_SUBTRACT,"subtract"),(0,Fe.Z)(mf,me.FUNC_REVERSE_SUBTRACT,"reverse subtract"),mf),sm=(Pa={},(0,Fe.Z)(Pa,me.ZERO,"zero"),(0,Fe.Z)(Pa,me.ONE,"one"),(0,Fe.Z)(Pa,me.SRC_COLOR,"src color"),(0,Fe.Z)(Pa,me.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,Fe.Z)(Pa,me.SRC_ALPHA,"src alpha"),(0,Fe.Z)(Pa,me.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,Fe.Z)(Pa,me.DST_COLOR,"dst color"),(0,Fe.Z)(Pa,me.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,Fe.Z)(Pa,me.DST_ALPHA,"dst alpha"),(0,Fe.Z)(Pa,me.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,Fe.Z)(Pa,me.CONSTANT_COLOR,"constant color"),(0,Fe.Z)(Pa,me.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,Fe.Z)(Pa,me.CONSTANT_ALPHA,"constant alpha"),(0,Fe.Z)(Pa,me.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,Fe.Z)(Pa,me.SRC_ALPHA_SATURATE,"src alpha saturate"),Pa),Xq=($s={},(0,Fe.Z)($s,me.NEVER,"never"),(0,Fe.Z)($s,me.ALWAYS,"always"),(0,Fe.Z)($s,me.LESS,"less"),(0,Fe.Z)($s,me.LEQUAL,"lequal"),(0,Fe.Z)($s,me.GREATER,"greater"),(0,Fe.Z)($s,me.GEQUAL,"gequal"),(0,Fe.Z)($s,me.EQUAL,"equal"),(0,Fe.Z)($s,me.NOTEQUAL,"notequal"),$s),ld=(Qs={},(0,Fe.Z)(Qs,me.ZERO,"zero"),(0,Fe.Z)(Qs,me.KEEP,"keep"),(0,Fe.Z)(Qs,me.REPLACE,"replace"),(0,Fe.Z)(Qs,me.INVERT,"invert"),(0,Fe.Z)(Qs,me.INCR,"increment"),(0,Fe.Z)(Qs,me.DECR,"decrement"),(0,Fe.Z)(Qs,me.INCR_WRAP,"increment wrap"),(0,Fe.Z)(Qs,me.DECR_WRAP,"decrement wrap"),Qs),Yq=(om={},(0,Fe.Z)(om,me.FRONT,"front"),(0,Fe.Z)(om,me.BACK,"back"),om),Hq=function(){function n(e,t){(0,Pr.Z)(this,n),this.buffer=void 0;var r=t.data,i=t.usage,a=t.type;this.buffer=e.buffer({data:r,usage:JD[i||me.STATIC_DRAW],type:P_[a||me.UNSIGNED_BYTE]})}return(0,Fr.Z)(n,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(t){var r=t.data,i=t.offset;this.buffer.subdata(r,i)}}]),n}(),Ji=x(76184),jq=9007199254740991,Zq="[object Arguments]",Kq="[object Array]",$q="[object Boolean]",Qq="[object Date]",Jq="[object Error]",qq="[object Function]",ttt="[object Map]",ett="[object Number]",rtt="[object Object]",ntt="[object RegExp]",itt="[object Set]",att="[object String]",ott="[object WeakMap]",stt="[object ArrayBuffer]",ltt="[object DataView]",utt="[object Float32Array]",ctt="[object Float64Array]",ftt="[object Int8Array]",htt="[object Int16Array]",dtt="[object Int32Array]",vtt="[object Uint8Array]",gtt="[object Uint8ClampedArray]",ptt="[object Uint16Array]",ytt="[object Uint32Array]",Oi={};Oi[utt]=Oi[ctt]=Oi[ftt]=Oi[htt]=Oi[dtt]=Oi[vtt]=Oi[gtt]=Oi[ptt]=Oi[ytt]=!0,Oi[Zq]=Oi[Kq]=Oi[stt]=Oi[$q]=Oi[ltt]=Oi[Qq]=Oi[Jq]=Oi[qq]=Oi[ttt]=Oi[ett]=Oi[rtt]=Oi[ntt]=Oi[itt]=Oi[att]=Oi[ott]=!1;function nut(n){return function(e){return n(e)}}var mtt=Object.prototype,xtt=mtt.toString;function btt(n){return Stt(n)&&_tt(n.length)&&!!Oi[xtt.call(n)]}function _tt(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=jq}function Stt(n){return!!n&&(0,ed.Z)(n)==="object"}var D_=btt;function rL(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function nL(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rL(Object(t),!0).forEach(function(r){(0,Fe.Z)(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):rL(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Ett=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,iL=0,lm=!1,wtt=function(){function n(e,t){var r=this;(0,Pr.Z)(this,n),this.reGl=e,this.context=t,this.entity=js(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var i={};this.context.uniforms.forEach(function(u){var c=u.name,f=u.type,h=u.data,d=u.isReferer,g=u.storageClass;if(g===Gu.StorageBuffer){if(d)r.textureCache[c]={data:void 0},i["".concat(c,"Size")]=function(){return h.compiledBundle.context.output.textureSize};else{r.textureCache[c]=r.calcDataTexture(c,f,h);var p=r.textureCache[c],m=p.textureWidth,_=p.isOutput;i["".concat(c,"Size")]=[m,m],_&&(r.outputTextureName=c,r.context.needPingpong&&(r.outputTextureName="".concat(c,"Output"),r.textureCache[r.outputTextureName]=r.calcDataTexture(c,f,h)))}i[c]=function(){return lm&&console.log("[".concat(r.entity,"]: ").concat(c," ").concat(r.textureCache[c].id)),r.textureCache[c].texture}}else if(g===Gu.Uniform){if(h&&(Array.isArray(h)||D_(h))&&h.length>16)throw new Error("invalid data type ".concat(f));i[c]=function(){return u.data}}});var a=this.getOuputDataTexture(),o=a.textureWidth,s=a.texelCount;i.u_OutputTextureSize=[o,o],i.u_OutputTexelCount=s,this.context.output.textureSize=[o,o];var l={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:i,vert:Ett,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(l)}return(0,Fr.Z)(n,[{key:"run",value:function(){var t=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){t.computeCommand()}),lm&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var e=(0,Fn.Z)(Ir().mark(function r(){var i=this,a,o,s,l,u,c,f,h;return Ir().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){a=i.reGl.read()}),!a){g.next=6;break}if(o=this.getOuputDataTexture(),s=o.originalDataLength,l=o.elementsPerTexel,u=o.typedArrayConstructor,c=u===void 0?Float32Array:u,f=[],l!==4)for(h=0;h<a.length;h+=4)l===1?f.push(a[h]):l===2?f.push(a[h],a[h+1]):f.push(a[h],a[h+1],a[h+2]);else f=a;return g.abrupt("return",new c(f.slice(0,s)));case 6:return g.abrupt("return",new Float32Array);case 7:case"end":return g.stop()}},r,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"confirmInput",value:function(t,r){var i;this.entity===t.entity?(this.dynamicPingpong=!0,i=this):i=t,this.textureCache[r].id=i.getOuputDataTexture().id,this.textureCache[r].texture=i.getOuputDataTexture().texture,lm&&console.log("[".concat(this.entity,"]: confirm input ").concat(r," from model ").concat(i.entity,", ").concat(i.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=this.context.uniforms.find(function(u){var c=u.name;return c===t});if(a){var o=this.calcDataTexture(t,a.type,r),s=o.texture,l=o.data;this.textureCache[t].data=l,this.textureCache[t].texture=s}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var t=this.context.output.name;this.textureCache[t].id=this.getOuputDataTexture().id,this.textureCache[t].texture=this.getOuputDataTexture().texture}var r=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=r,lm&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var t=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=t}},{key:"cloneDataTexture",value:function(t){var r=t.data,i=t.textureWidth;return nL(nL({},t),{},{id:iL++,texture:this.reGl.texture({width:i,height:i,data:r,type:"float"})})}},{key:"calcDataTexture",value:function(t,r,i){var a=1;r===gf.Vector4FloatArray&&(a=4);for(var o=[],s=0;s<i.length;s+=a)a===1?o.push(i[s],0,0,0):a===2?o.push(i[s],i[s+1],0,0):a===3?o.push(i[s],i[s+1],i[s+2],0):a===4&&o.push(i[s],i[s+1],i[s+2],i[s+3]);var l=i.length,u=Math.ceil(l/a),c=Math.ceil(Math.sqrt(u)),f=c*c;u<f&&o.push.apply(o,(0,Ji.Z)(new Array((f-u)*4).fill(0)));var h=this.reGl.texture({width:c,height:c,data:o,type:"float"});return{id:iL++,data:o,originalDataLength:l,typedArrayConstructor:D_(i)?i.constructor:void 0,textureWidth:c,texture:h,texelCount:u,elementsPerTexel:a,isOutput:t===this.context.output.name}}}]),n}(),Ctt=function(){function n(e,t){(0,Pr.Z)(this,n),this.elements=void 0;var r=t.data,i=t.usage,a=t.type,o=t.count;this.elements=e.elements({data:r,usage:JD[i||me.STATIC_DRAW],type:P_[a||me.UNSIGNED_BYTE],count:o})}return(0,Fr.Z)(n,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(t){var r=t.data;this.elements.subdata(r)}},{key:"destroy",value:function(){this.elements.destroy()}}]),n}(),Mtt=function(){function n(e,t){(0,Pr.Z)(this,n),this.framebuffer=void 0;var r=t.width,i=t.height,a=t.color,o=t.colors,s=t.depth,l=t.stencil,u={width:r,height:i};Array.isArray(o)&&(u.colors=o.map(function(c){return c.get()})),a&&typeof a!="boolean"&&(u.color=a.get()),this.framebuffer=e.framebuffer(u)}return(0,Fr.Z)(n,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(t){var r=t.width,i=t.height;this.framebuffer.resize(r,i)}}]),n}();function Att(n){var e=(0,ed.Z)(n);return n!=null&&(e==="object"||e==="function")}function Kg(n){var e={};return Object.keys(n).forEach(function(t){L_(t,n[t],e,"")}),e}function L_(n,e,t,r){if(e===null||typeof e=="number"||typeof e=="boolean"||Array.isArray(e)&&typeof e[0]=="number"||D_(e)||e===""||e.resize!==void 0){t["".concat(r&&r+".").concat(n)]=e;return}Att(e)&&Object.keys(e).forEach(function(i){L_(i,e[i],t,"".concat(r&&r+".").concat(n))}),Array.isArray(e)&&e.forEach(function(i,a){Object.keys(i).forEach(function(o){L_(o,i[o],t,"".concat(r&&r+".").concat(n,"[").concat(a,"]"))})})}function aL(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ud(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?aL(Object(t),!0).forEach(function(r){(0,Fe.Z)(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):aL(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Ttt=function(){function n(e,t){(0,Pr.Z)(this,n),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=e;var r=t.vs,i=t.fs,a=t.defines,o=t.attributes,s=t.uniforms,l=t.primitive,u=t.count,c=t.elements,f=t.depth,h=t.blend,d=t.stencil,g=t.cull,p=t.instances,m=t.scissor,_=t.viewport,S={};s&&(this.uniforms=Kg(s),Object.keys(s).forEach(function(V){S[V]=e.prop(V)}));var M={};Object.keys(o).forEach(function(V){M[V]=o[V].get()});var R=a&&this.generateDefines(a)||"",F={attributes:M,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(R,`
`).concat(i),uniforms:S,vert:`
`.concat(R,`
`).concat(r),primitive:Gq[l===void 0?me.TRIANGLES:l]};p&&(F.instances=p),u&&(F.count=u),c&&(F.elements=c.get()),m&&(F.scissor=m),_&&(F.viewport=_),this.initDepthDrawParams({depth:f},F),this.initBlendDrawParams({blend:h},F),this.initStencilDrawParams({stencil:d},F),this.initCullDrawParams({cull:g},F),this.drawCommand=e(F)}return(0,Fr.Z)(n,[{key:"addUniforms",value:function(t){this.uniforms=ud(ud({},this.uniforms),Kg(t))}},{key:"draw",value:function(t){var r=ud(ud({},this.uniforms),Kg(t.uniforms||{})),i={};Object.keys(r).forEach(function(a){var o=(0,ed.Z)(r[a]);o==="boolean"||o==="number"||Array.isArray(r[a])||r[a].BYTES_PER_ELEMENT?i[a]=r[a]:o==="string"||(i[a]=r[a].get())}),this.drawCommand(i)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(t,r){var i=t.depth;i&&(r.depth={enable:i.enable===void 0?!0:!!i.enable,mask:i.mask===void 0?!0:!!i.mask,func:Vq[i.func||me.LESS],range:i.range||[0,1]})}},{key:"initBlendDrawParams",value:function(t,r){var i=t.blend;if(i){var a=i.enable,o=i.func,s=i.equation,l=i.color,u=l===void 0?[0,0,0,0]:l;r.blend={enable:!!a,func:{srcRGB:sm[o&&o.srcRGB||me.SRC_ALPHA],srcAlpha:sm[o&&o.srcAlpha||me.SRC_ALPHA],dstRGB:sm[o&&o.dstRGB||me.ONE_MINUS_SRC_ALPHA],dstAlpha:sm[o&&o.dstAlpha||me.ONE_MINUS_SRC_ALPHA]},equation:{rgb:eL[s&&s.rgb||me.FUNC_ADD],alpha:eL[s&&s.alpha||me.FUNC_ADD]},color:u}}}},{key:"initStencilDrawParams",value:function(t,r){var i=t.stencil;if(i){var a=i.enable,o=i.mask,s=o===void 0?-1:o,l=i.func,u=l===void 0?{cmp:me.ALWAYS,ref:0,mask:-1}:l,c=i.opFront,f=c===void 0?{fail:me.KEEP,zfail:me.KEEP,zpass:me.KEEP}:c,h=i.opBack,d=h===void 0?{fail:me.KEEP,zfail:me.KEEP,zpass:me.KEEP}:h;r.stencil={enable:!!a,mask:s,func:ud(ud({},u),{},{cmp:Xq[u.cmp]}),opFront:{fail:ld[f.fail],zfail:ld[f.zfail],zpass:ld[f.zpass]},opBack:{fail:ld[d.fail],zfail:ld[d.zfail],zpass:ld[d.zpass]}}}}},{key:"initCullDrawParams",value:function(t,r){var i=t.cull;if(i){var a=i.enable,o=i.face,s=o===void 0?me.BACK:o;r.cull={enable:!!a,face:Yq[s]}}}},{key:"generateDefines",value:function(t){return Object.keys(t).map(function(r){return"#define ".concat(r," ").concat(Number(t[r]))}).join(`
`)}}]),n}(),Itt=function(){function n(e,t){(0,Pr.Z)(this,n),this.texture=void 0,this.width=void 0,this.height=void 0;var r=t.data,i=t.type,a=i===void 0?me.UNSIGNED_BYTE:i,o=t.width,s=t.height,l=t.flipY,u=l===void 0?!1:l,c=t.format,f=c===void 0?me.RGBA:c,h=t.mipmap,d=h===void 0?!1:h,g=t.wrapS,p=g===void 0?me.CLAMP_TO_EDGE:g,m=t.wrapT,_=m===void 0?me.CLAMP_TO_EDGE:m,S=t.aniso,M=S===void 0?0:S,R=t.alignment,F=R===void 0?1:R,V=t.premultiplyAlpha,nt=V===void 0?!1:V,at=t.mag,xt=at===void 0?me.NEAREST:at,gt=t.min,Tt=gt===void 0?me.NEAREST:gt,Ct=t.colorSpace,te=Ct===void 0?me.BROWSER_DEFAULT_WEBGL:Ct;this.width=o,this.height=s;var Kt={width:o,height:s,type:P_[a],format:zq[f],wrapS:tL[p],wrapT:tL[_],mag:qD[xt],min:qD[Tt],alignment:F,flipY:u,colorSpace:Wq[te],premultiplyAlpha:nt,aniso:M};r&&(Kt.data=r),typeof d=="number"?Kt.mipmap=Uq[d]:typeof d=="boolean"&&(Kt.mipmap=d),this.texture=e.texture(Kt)}return(0,Fr.Z)(n,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(t){var r=t.width,i=t.height;this.texture.resize(r,i),this.width=r,this.height=i}},{key:"destroy",value:function(){this.texture.destroy()}}]),n}(),oL,sL,lL,Ott=(oL=(0,ur.b2)(),oL(sL=(lL=function(){function n(){var e=this;(0,Pr.Z)(this,n),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var t=(0,Fn.Z)(Ir().mark(function r(i){return Ir().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!i.uniforms){o.next=3;break}return o.next=3,Promise.all(Object.keys(i.uniforms).map(function(){var s=(0,Fn.Z)(Ir().mark(function l(u){var c;return Ir().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(i.uniforms[u]&&i.uniforms[u].load!==void 0)){h.next=5;break}return h.next=3,i.uniforms[u].load();case 3:c=h.sent,i.uniforms[u]=c;case 5:case"end":return h.stop()}},l)}));return function(l){return s.apply(this,arguments)}}()));case 3:return o.abrupt("return",new Ttt(e.gl,i));case 4:case"end":return o.stop()}},r)}));return function(r){return t.apply(this,arguments)}}(),this.createAttribute=function(t){return new Fq(e.gl,t)},this.createBuffer=function(t){return new Hq(e.gl,t)},this.createElements=function(t){return new Ctt(e.gl,t)},this.createTexture2D=function(t){return new Itt(e.gl,t)},this.createFramebuffer=function(t){return new Mtt(e.gl,t)},this.useFramebuffer=function(t,r){e.gl({framebuffer:t?t.get():null})(r)},this.createComputeModel=function(){var t=(0,Fn.Z)(Ir().mark(function r(i){return Ir().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",new wtt(e.gl,i));case 1:case"end":return o.stop()}},r)}));return function(r){return t.apply(this,arguments)}}(),this.clear=function(t){var r=t.color,i=t.depth,a=t.stencil,o=t.framebuffer,s=o===void 0?null:o,l={color:r,depth:i,stencil:a};l.framebuffer=s===null?s:s.get(),e.gl.clear(l)},this.setScissor=function(t){e.gl&&e.gl._gl&&(t.enable&&t.box?(e.gl._gl.enable(me.SCISSOR_TEST),e.gl._gl.scissor(t.box.x,t.box.y,t.box.width,t.box.height)):e.gl._gl.disable(me.SCISSOR_TEST),e.gl._refresh())},this.viewport=function(t){var r=t.x,i=t.y,a=t.width,o=t.height;e.gl&&e.gl._gl&&(e.gl._gl.viewport(r,i,a,o),e.gl._refresh())},this.readPixels=function(t){var r=t.framebuffer,i=t.x,a=t.y,o=t.width,s=t.height,l={x:i,y:a,width:o,height:s};return r&&(l.framebuffer=r.get()),e.gl.read(l)},this.getCanvas=function(){return e.$canvas},this.getGLContext=function(){return e.gl._gl},this.destroy=function(){e.gl&&(e.gl.destroy(),e.inited=!1)}}return(0,Fr.Z)(n,[{key:"init",value:function(){var e=(0,Fn.Z)(Ir().mark(function r(i){return Ir().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!this.inited){o.next=2;break}return o.abrupt("return");case 2:return this.$canvas=i.canvas,o.next=5,new Promise(function(s,l){Bq()({canvas:i.canvas,attributes:{alpha:!0,antialias:i.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(c,f){(c||!f)&&l(c),s(f)}})});case 5:this.gl=o.sent,this.inited=!0;case 7:case"end":return o.stop()}},r,this)}));function t(r){return e.apply(this,arguments)}return t}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),n}(),lL))||sL);function Ptt(){return typeof window!="undefined"}function Dtt(n,e,t,r){if(!!Ptt()){var i=document.getElementsByTagName("head")[0],a=document.createElement("script");a.setAttribute("type","text/javascript"),a.setAttribute("src",n),r&&(a.id=r),a.onload=function(){e&&e()},a.onerror=function(o){t&&t("Unable to load script '".concat(n,"'"),o)},i.appendChild(a)}}function Ltt(n,e){return new Promise(function(t,r){Dtt(n,function(){t()},function(i,a){r(a)})})}var um;function Rtt(){return R_.apply(this,arguments)}function R_(){return R_=(0,Fn.Z)(Ir().mark(function n(){return Ir().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!um){t.next=2;break}return t.abrupt("return",um);case 2:return t.next=4,Ltt("https://preview.babylonjs.com/glslang/glslang.js");case 4:return um=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),t.abrupt("return",um);case 6:case"end":return t.stop()}},n)})),R_.apply(this,arguments)}var Ntt=function(){function n(e,t){(0,Pr.Z)(this,n),this.engine=e,this.options=t,this.attribute=void 0,this.buffer=void 0;var r=t,i=r.buffer,a=r.offset,o=r.stride,s=r.normalized,l=r.size,u=r.divisor,c=r.arrayStride,f=r.attributes,h=r.stepMode;this.buffer=i,this.attribute={buffer:i.get(),offset:a||0,stride:o||0,normalized:s||!1,divisor:u||0,arrayStride:c||0,attributes:f,stepMode:h||"vertex"},l&&(this.attribute.size=l)}return(0,Fr.Z)(n,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),n}(),cd=function(){function n(e,t){(0,Pr.Z)(this,n),this.engine=e,this.options=t,this.buffer=void 0;var r=t,i=r.data,a=r.usage,o=r.type;this.buffer=this.createBuffer(i instanceof Array?new Float32Array(i):i,a||pr.FB.Vertex|pr.FB.CopyDst)}return(0,Fr.Z)(n,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(t){var r=t.data,i=t.offset;this.setSubData(this.buffer,i,r instanceof Array?new Float32Array(r):r)}},{key:"createBuffer",value:function(t,r){var i=t.byteLength%4,a={size:t.byteLength+i,usage:r},o=this.engine.device.createBuffer(a);return this.setSubData(o,0,t),o}},{key:"setSubData",value:function(t,r,i){var a=yo?this.engine.device.getQueue():this.engine.device.defaultQueue;a.writeBuffer(t,r,i)}}]),n}();function ktt(n){return typeof n=="number"}var Btt=function(){function n(e,t){(0,Pr.Z)(this,n),this.engine=e,this.context=t,this.entity=js(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}return(0,Fr.Z)(n,[{key:"init",value:function(){var e=(0,Fn.Z)(Ir().mark(function r(){var i=this,a,o,s,l,u,c,f;return Ir().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:a=d.sent,o=a.computeStage,s=this.context.uniforms.filter(function(g){return g.storageClass===Gu.StorageBuffer}),l=this.context.uniforms.filter(function(g){return g.storageClass===Gu.Uniform}),u=l.length?1:0,this.bindGroupEntries=[],u&&(c=0,f=[],l.forEach(function(g){if(ktt(g.data))i.uniformGPUBufferLayout.push({name:g.name,offset:c}),c+=4,f.push(g.data);else{var p,m=((p=g.data)===null||p===void 0?void 0:p.length)||1;m===3&&(m=4,g.data.push(0));var _=c/4%4;if(_>0){var S=4-_;if(m>1&&m<=S)m===2&&(S===3&&(c+=4,f.push(0)),f.push.apply(f,(0,Ji.Z)(g.data)),i.uniformGPUBufferLayout.push({name:g.name,offset:c}));else{for(var M=0;M<S;M++)c+=4,f.push(0);f.push.apply(f,(0,Ji.Z)(g.data)),i.uniformGPUBufferLayout.push({name:g.name,offset:c})}}c+=4*m}}),this.uniformBuffer=new cd(this.engine,{data:f instanceof Array?new Float32Array(f):f,usage:pr.FB.Uniform|pr.FB.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),s.forEach(function(g){if(g.data!==null&&(g.type===gf.Vector4FloatArray||g.type===gf.FloatArray)){var p;g.name===i.context.output.name?(p=new cd(i.engine,{data:isFinite(Number(g.data))?[g.data]:g.data,usage:pr.FB.Storage|pr.FB.CopyDst|pr.FB.CopySrc}),i.outputBuffer=p,i.context.output={name:g.name,length:isFinite(Number(g.data))?1:g.data.length,typedArrayConstructor:Float32Array,gpuBuffer:p.get()}):g.isReferer?g.data.model&&g.data.model.outputBuffer&&(p=g.data.model.outputBuffer):p=new cd(i.engine,{data:isFinite(Number(g.data))?[g.data]:g.data,usage:pr.FB.Storage|pr.FB.CopyDst|pr.FB.CopySrc}),i.vertexBuffers[g.name]=p,i.bindGroupEntries.push({binding:u,resource:{name:g.name,refer:p?void 0:g.data,buffer:p?p.get():void 0}}),u++}}),this.computePipeline=this.engine.device.createComputePipeline({computeStage:o}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return d.stop()}},r,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"destroy",value:function(){var t=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach(function(r){return t.vertexBuffers[r].destroy()})}},{key:"readData",value:function(){var e=(0,Fn.Z)(Ir().mark(function r(){var i,a,o,s,l,u,c,f,h,d;return Ir().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(i=this.context.output,!i){p.next=16;break}if(a=i.length,o=i.typedArrayConstructor,s=i.gpuBuffer,!s){p.next=16;break}return l=a*o.BYTES_PER_ELEMENT,u=this.engine.device.createBuffer({size:l,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),c=this.engine.device.createCommandEncoder(),c.copyBufferToBuffer(s,0,u,0,l),f=yo?this.engine.device.getQueue():this.engine.device.defaultQueue,f.submit([c.finish()]),p.next=12,u.mapAsync(pr.gc.Read);case 12:return h=u.getMappedRange(),d=new o(h.slice(0)),u.unmap(),p.abrupt("return",d);case 16:return p.abrupt("return",new Float32Array);case 17:case"end":return p.stop()}},r,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"run",value:function(){if(this.engine.currentComputePass){var t;this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(t=this.engine.currentComputePass).dispatch.apply(t,(0,Ji.Z)(this.context.dispatch))}}},{key:"updateBuffer",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=this.vertexBuffers[t];a&&a.subData({data:r,offset:i})}},{key:"updateUniform",value:function(t,r){var i=this.uniformGPUBufferLayout.find(function(a){return a.name===t});i&&this.uniformBuffer.subData({data:Number.isFinite(r)?new Float32Array([r]):new Float32Array(r),offset:i.offset})}},{key:"confirmInput",value:function(t,r){var i=this.vertexBuffers[r],a=t.outputBuffer;if(i&&a&&i!==a){var o=this.engine.device.createCommandEncoder(),s=t.context.output,l=s.length,u=s.typedArrayConstructor,c=l*u.BYTES_PER_ELEMENT;o.copyBufferToBuffer(a.get(),0,i.get(),0,c);var f=yo?this.engine.device.getQueue():this.engine.device.defaultQueue;f.submit([o.finish()])}}},{key:"compileShaderToSpirV",value:function(t,r,i){return this.compileRawShaderToSpirV(i+t,r)}},{key:"compileRawShaderToSpirV",value:function(t,r){return this.engine.glslang.compileGLSL(t,r)}},{key:"compileComputePipelineStageDescriptor",value:function(){var e=(0,Fn.Z)(Ir().mark(function r(i){var a,o;return Ir().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(a=i,o=`#version 450
`,this.engine.options.useWGSL){l.next=6;break}return l.next=5,this.compileShaderToSpirV(i,"compute",o);case 5:a=l.sent;case 6:return l.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:a,isWHLSL:yo}),entryPoint:"main"}});case 7:case"end":return l.stop()}},r,this)}));function t(r){return e.apply(this,arguments)}return t}()}]),n}(),Ftt=function(){function n(e,t){(0,Pr.Z)(this,n),this.engine=e,this.options=t,this.indexCount=void 0,this.buffer=void 0;var r=t,i=r.data,a=r.usage,o=r.type,s=r.count;this.indexCount=s||0,this.buffer=new cd(e,{data:i instanceof Array?new Uint16Array(i):i,usage:pr.FB.Index|pr.FB.CopyDst})}return(0,Fr.Z)(n,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),n}(),Gtt=function(){function n(e,t){(0,Pr.Z)(this,n),this.engine=e,this.options=t,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var r=t,i=r.width,a=r.height,o=r.color,s=r.colors,l=r.depth,u=r.stencil;o&&(this.colorTexture=o),l&&(this.depthTexture=l)}return(0,Fr.Z)(n,[{key:"get",value:function(){var t,r;return{color:(t=this.colorTexture)===null||t===void 0?void 0:t.get(),depth:(r=this.depthTexture)===null||r===void 0?void 0:r.get()}}},{key:"destroy",value:function(){var t,r;(t=this.colorTexture)===null||t===void 0||t.destroy(),(r=this.depthTexture)===null||r===void 0||r.destroy()}},{key:"resize",value:function(t){var r=t.width,i=t.height;if(r!==this.width||i!==this.height){var a,o;(a=this.colorTexture)===null||a===void 0||a.resize({width:r,height:i}),(o=this.depthTexture)===null||o===void 0||o.resize({width:r,height:i})}this.width=r,this.height=i}}]),n}(),Fl,Js,xf,oo,fd,cm,$g,ztt=(Fl={},(0,Fe.Z)(Fl,me.POINTS,pr.YV.PointList),(0,Fe.Z)(Fl,me.LINES,pr.YV.LineList),(0,Fe.Z)(Fl,me.LINE_LOOP,pr.YV.LineList),(0,Fe.Z)(Fl,me.LINE_STRIP,pr.YV.LineStrip),(0,Fe.Z)(Fl,me.TRIANGLES,pr.YV.TriangleList),(0,Fe.Z)(Fl,me.TRIANGLE_FAN,pr.YV.TriangleList),(0,Fe.Z)(Fl,me.TRIANGLE_STRIP,pr.YV.TriangleStrip),Fl),Utt=(Js={},(0,Fe.Z)(Js,me.NEVER,pr.wb.Never),(0,Fe.Z)(Js,me.ALWAYS,pr.wb.Always),(0,Fe.Z)(Js,me.LESS,pr.wb.Less),(0,Fe.Z)(Js,me.LEQUAL,pr.wb.LessEqual),(0,Fe.Z)(Js,me.GREATER,pr.wb.Greater),(0,Fe.Z)(Js,me.GEQUAL,pr.wb.GreaterEqual),(0,Fe.Z)(Js,me.EQUAL,pr.wb.Equal),(0,Fe.Z)(Js,me.NOTEQUAL,pr.wb.NotEqual),Js),uL=(xf={},(0,Fe.Z)(xf,me.FUNC_ADD,pr.db.Add),(0,Fe.Z)(xf,me.MIN_EXT,pr.db.Min),(0,Fe.Z)(xf,me.MAX_EXT,pr.db.Max),(0,Fe.Z)(xf,me.FUNC_SUBTRACT,pr.db.Subtract),(0,Fe.Z)(xf,me.FUNC_REVERSE_SUBTRACT,pr.db.ReverseSubtract),xf),fm=(oo={},(0,Fe.Z)(oo,me.ZERO,pr.zi.Zero),(0,Fe.Z)(oo,me.ONE,pr.zi.One),(0,Fe.Z)(oo,me.SRC_COLOR,pr.zi.SrcColor),(0,Fe.Z)(oo,me.ONE_MINUS_SRC_COLOR,pr.zi.OneMinusSrcColor),(0,Fe.Z)(oo,me.SRC_ALPHA,pr.zi.SrcAlpha),(0,Fe.Z)(oo,me.ONE_MINUS_SRC_ALPHA,pr.zi.OneMinusSrcAlpha),(0,Fe.Z)(oo,me.DST_COLOR,pr.zi.DstColor),(0,Fe.Z)(oo,me.ONE_MINUS_DST_COLOR,pr.zi.OneMinusDstColor),(0,Fe.Z)(oo,me.DST_ALPHA,pr.zi.DstAlpha),(0,Fe.Z)(oo,me.ONE_MINUS_DST_ALPHA,pr.zi.OneMinusDstAlpha),(0,Fe.Z)(oo,me.CONSTANT_COLOR,pr.zi.BlendColor),(0,Fe.Z)(oo,me.ONE_MINUS_CONSTANT_COLOR,pr.zi.OneMinusBlendColor),(0,Fe.Z)(oo,me.SRC_ALPHA_SATURATE,pr.zi.SrcAlphaSaturated),oo),Wtt=(fd={},(0,Fe.Z)(fd,me.ALPHA,"r8unorm"),(0,Fe.Z)(fd,me.RGBA,"rgba8unorm"),(0,Fe.Z)(fd,me.DEPTH_COMPONENT,"depth32float"),(0,Fe.Z)(fd,me.DEPTH_STENCIL,"depth24plus-stencil8"),fd),cL=(cm={},(0,Fe.Z)(cm,me.NEAREST,"nearest"),(0,Fe.Z)(cm,me.LINEAR,"linear"),cm),N_=($g={},(0,Fe.Z)($g,me.REPEAT,"repeat"),(0,Fe.Z)($g,me.CLAMP_TO_EDGE,"clamp-to-edge"),(0,Fe.Z)($g,me.MIRRORED_REPEAT,"mirror-repeat"),$g);function Vtt(n){var e=n.cull;if(!e||!e.enable)return pr.Wf.None;if(e.face)return e.face===me.FRONT?pr.Wf.Front:pr.Wf.Back}function Xtt(n){var e=n.depth,t=n.stencil,r={compare:pr.wb.Always,depthFailOp:pr.xS.Keep,failOp:pr.xS.Keep,passOp:pr.xS.Keep};return{depthWriteEnabled:e&&e.enable,depthCompare:Utt[(e==null?void 0:e.func)||me.ALWAYS],format:pr.EV.Depth24PlusStencil8,stencilFront:r,stencilBack:r,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function Ytt(n,e){var t=n.blend;return[{format:e,alphaBlend:{srcFactor:fm[t&&t.func&&t.func.srcAlpha||me.ONE],dstFactor:fm[t&&t.func&&t.func.dstAlpha||me.ZERO],operation:uL[t&&t.equation&&t.equation.alpha||me.FUNC_ADD]},colorBlend:{srcFactor:fm[t&&t.func&&t.func.srcRGB||me.ONE],dstFactor:fm[t&&t.func&&t.func.dstRGB||me.ZERO],operation:uL[t&&t.equation&&t.equation.rgb||me.FUNC_ADD]},writeMask:pr.Yw.All}]}function fL(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function hd(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fL(Object(t),!0).forEach(function(r){(0,Fe.Z)(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):fL(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Htt(n){for(var e=0,t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];e+=s.length}for(var l=new n(e),u=0,c=0,f=r;c<f.length;c++){var h=f[c];l.set(h,u),u+=h.length}return l}var jtt=function(){function n(e,t){(0,Pr.Z)(this,n),this.engine=e,this.options=t,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}return(0,Fr.Z)(n,[{key:"init",value:function(){var e=(0,Fn.Z)(Ir().mark(function r(){var i=this,a,o,s,l,u,c,f,h,d,g,p,m,_,S,M,R,F,V;return Ir().wrap(function(at){for(;;)switch(at.prev=at.next){case 0:return a=this.options,o=a.vs,s=a.fs,l=a.attributes,u=a.uniforms,c=a.primitive,f=a.count,h=a.elements,d=a.depth,g=a.blend,p=a.stencil,m=a.cull,_=a.instances,at.next=3,this.compilePipelineStageDescriptor(o,s,null);case 3:S=at.sent,M=S.vertexStage,R=S.fragmentStage,u&&this.buildUniformBindGroup(u),h&&(this.indexBuffer=h.get(),this.indexCount=h.indexCount),F={vertexBuffers:Object.keys(l).map(function(xt,gt){var Tt=l[xt],Ct=Tt.get(),te=Ct.arrayStride,Kt=Ct.stepMode,ne=Ct.attributes;return i.attributeCache[xt]=Tt,{arrayStride:te,stepMode:Kt,attributes:ne}})},V={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:ztt[c||me.TRIANGLES],rasterizationState:hd(hd({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:Vtt({cull:m})}),depthStencilState:Xtt({depth:d,stencil:p}),colorStates:Ytt({blend:g},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:M,fragmentStage:R,vertexState:F},this.renderPipeline=this.engine.device.createRenderPipeline(V);case 11:case"end":return at.stop()}},r,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"addUniforms",value:function(t){this.uniforms=hd(hd({},this.uniforms),Kg(t))}},{key:"draw",value:function(t){var r=this,i=this.engine.getCurrentRenderPass(),a=hd(hd({},this.uniforms),Kg(t.uniforms||{})),o=[];Object.keys(a).forEach(function(s){var l=(0,ed.Z)(a[s]);if(l==="boolean"||l==="number"||Array.isArray(a[s])||a[s].BYTES_PER_ELEMENT){var u,c=(u=r.uniformGPUBufferLayout.find(function(_){var S=_.name;return S===s}))===null||u===void 0?void 0:u.offset;c!==null&&r.uniformBuffer.subData({data:a[s],offset:c})}else{var f,h=(f=r.uniformGPUBufferLayout.find(function(_){var S=_.name;return S===s}))===null||f===void 0?void 0:f.offset;if(h!==null){var d=a[s].get(),g=d.color||d,p=g.texture,m=g.sampler;m&&(o.push({binding:h,resource:m}),h++),o.push({binding:h,resource:p.createView()})}}}),this.uniformBuffer&&(o[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:o}),this.renderPipeline&&i.setPipeline(this.renderPipeline),i.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&i.setIndexBuffer(this.indexBuffer.get(),pr.iD.Uint32,0),Object.keys(this.attributeCache).forEach(function(s,l){i.setVertexBuffer(0+l,r.attributeCache[s].get().buffer,0)}),this.indexBuffer?i.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):i.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:function(){var e=(0,Fn.Z)(Ir().mark(function r(i,a,o){var s,l,u;return Ir().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(s=`#version 450
`,l=i,u=a,this.engine.options.useWGSL){f.next=10;break}return f.next=6,this.compileShaderToSpirV(i,"vertex",s);case 6:return l=f.sent,f.next=9,this.compileShaderToSpirV(a,"fragment",s);case 9:u=f.sent;case 10:return f.abrupt("return",this.createPipelineStageDescriptor(l,u));case 11:case"end":return f.stop()}},r,this)}));function t(r,i,a){return e.apply(this,arguments)}return t}()},{key:"compileShaderToSpirV",value:function(t,r,i){return this.compileRawShaderToSpirV(i+t,r)}},{key:"compileRawShaderToSpirV",value:function(t,r){return this.engine.glslang.compileGLSL(t,r)}},{key:"createPipelineStageDescriptor",value:function(t,r){return{vertexStage:{module:this.engine.device.createShaderModule({code:t,isWHLSL:yo}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:r,isWHLSL:yo}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:pr.zX.CCW,cullMode:pr.Wf.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(t){var r=this,i=0,a=Htt.apply(void 0,[Float32Array].concat((0,Ji.Z)(Object.keys(t).map(function(l){return t[l]?(r.uniformGPUBufferLayout.push({name:l,offset:i}),i+=(t[l].length||1)*4,t[l]):[]})))),o=[],s=!1;a.length&&(s=!0,o.push({binding:0,visibility:pr.$X.Fragment|pr.$X.Vertex,type:pr.$l.UniformBuffer})),Object.keys(t).filter(function(l){return t[l]===null}).forEach(function(l,u){r.uniformGPUBufferLayout.push({name:l,offset:u*2+(s?1:0)}),o.push({binding:u*2+(s?1:0),visibility:pr.$X.Fragment,type:pr.$l.Sampler},{binding:u*2+(s?1:0)+1,visibility:pr.$X.Fragment,type:pr.$l.SampledTexture})}),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:o}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),s&&(this.uniformBuffer=new cd(this.engine,{data:a instanceof Array?new Float32Array(a):a,usage:pr.FB.Uniform|pr.FB.CopyDst}))}}]),n}(),Ztt=function(){function n(e,t){(0,Pr.Z)(this,n),this.engine=e,this.options=t,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return(0,Fr.Z)(n,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(t){var r=t.width,i=t.height;(r!==this.width||i!==this.height)&&(this.destroy(),this.createTexture()),this.width=r,this.height=i}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var t=this.options,r=t.data,i=t.type,a=i===void 0?me.UNSIGNED_BYTE:i,o=t.width,s=t.height,l=t.flipY,u=l===void 0?!1:l,c=t.format,f=c===void 0?me.RGBA:c,h=t.mipmap,d=h===void 0?!1:h,g=t.wrapS,p=g===void 0?me.CLAMP_TO_EDGE:g,m=t.wrapT,_=m===void 0?me.CLAMP_TO_EDGE:m,S=t.aniso,M=S===void 0?0:S,R=t.alignment,F=R===void 0?1:R,V=t.premultiplyAlpha,nt=V===void 0?!1:V,at=t.mag,xt=at===void 0?me.NEAREST:at,gt=t.min,Tt=gt===void 0?me.NEAREST:gt,Ct=t.colorSpace,te=Ct===void 0?me.BROWSER_DEFAULT_WEBGL:Ct,Kt=t.usage;this.width=o,this.height=s,this.texture=this.engine.device.createTexture({size:[o,s,1],mipLevelCount:1,sampleCount:1,dimension:pr.kd.E2d,format:Wtt[f],usage:Kt||pr.v2.Sampled|pr.v2.CopyDst}),(!Kt||Kt&pr.v2.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:N_[p],addressModeV:N_[_],addressModeW:N_[p],magFilter:cL[xt],minFilter:cL[Tt],maxAnisotropy:M}))}}]),n}(),hL,dL,vL,Ktt=(hL=(0,ur.b2)(),hL(dL=(vL=function(){function n(){var e=this;(0,Pr.Z)(this,n),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:Infinity,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(t){var r=t.framebuffer,i=t.color,a=t.depth,o=t.stencil;e.options.supportCompute&&e.startComputePass(),e.currentRenderTarget?(e.currentRenderPass&&e.endRenderTargetRenderPass(),e.startRenderTargetRenderPass(e.currentRenderTarget,i||null,!!a,!!o)):(e.mainColorAttachments[0].loadValue=i||pr.Ws.Load,e.mainDepthAttachment.depthLoadValue=a||pr.Ws.Load,e.mainDepthAttachment.stencilLoadValue=o?e.clearStencilValue:pr.Ws.Load,e.mainRenderPass&&e.endMainRenderPass(),e.startMainRenderPass())},this.createModel=function(){var t=(0,Fn.Z)(Ir().mark(function r(i){var a;return Ir().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a=new jtt(e,i),s.next=3,a.init();case 3:return s.abrupt("return",a);case 4:case"end":return s.stop()}},r)}));return function(r){return t.apply(this,arguments)}}(),this.createAttribute=function(t){return new Ntt(e,t)},this.createBuffer=function(t){return new cd(e,t)},this.createElements=function(t){return new Ftt(e,t)},this.createTexture2D=function(t){return new Ztt(e,t)},this.createFramebuffer=function(t){return new Gtt(e,t)},this.useFramebuffer=function(t,r){e.currentRenderTarget&&e.unbindFramebuffer(e.currentRenderTarget),e.currentRenderTarget=t,e.currentRenderTargetViewDescriptor={dimension:pr.p_.E2d,arrayLayerCount:1,aspect:pr.H7.All},e.currentRenderPass=null,r()},this.createComputeModel=function(){var t=(0,Fn.Z)(Ir().mark(function r(i){var a;return Ir().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a=new Btt(e,i),s.next=3,a.init();case 3:return s.abrupt("return",a);case 4:case"end":return s.stop()}},r)}));return function(r){return t.apply(this,arguments)}}(),this.getCanvas=function(){return e.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(t){var r=t.x,i=t.y,a=t.width,o=t.height;if(!e.currentRenderPass)e.transientViewport={x:r,y:i,width:a,height:o};else if(e.transientViewport.x!==Infinity){var s=e.getCurrentRenderPass();s.setViewport(e.transientViewport.x,e.transientViewport.y,e.transientViewport.width,e.transientViewport.height,0,1)}else if(r!==e.cachedViewport.x||i!==e.cachedViewport.y||a!==e.cachedViewport.width||o!==e.cachedViewport.height){e.cachedViewport={x:r,y:i,width:a,height:o};var l=e.getCurrentRenderPass();l.setViewport(r,i,a,o,0,1)}},this.readPixels=function(t){throw new Error("Method not implemented.")}}return(0,Fr.Z)(n,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:function(){var e=(0,Fn.Z)(Ir().mark(function r(i){return Ir().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return this.canvas=i.canvas,this.options=i,this.useWGSL=!!i.useWGSL,this.mainPassSampleCount=i.antialiasing?this.defaultSampleCount:1,o.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return o.stop()}},r,this)}));function t(r){return e.apply(this,arguments)}return t}()},{key:"setScissor",value:function(t){throw new Error("Method not implemented.")}},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach(function(t){return t.destroy()}),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),yo?this.device.getQueue().submit(this.commandBuffers.filter(function(t){return t})):this.device.defaultQueue.submit(this.commandBuffers.filter(function(t){return t}))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:function(){var e=(0,Fn.Z)(Ir().mark(function r(){var i,a;return Ir().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Rtt();case 2:return this.glslang=s.sent,s.next=5,(i=navigator)===null||i===void 0||(a=i.gpu)===null||a===void 0?void 0:a.requestAdapter();case 5:return this.adapter=s.sent,s.next=8,this.adapter.requestDevice();case 8:this.device=s.sent;case 9:case"end":return s.stop()}},r,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext(yo?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:pr.v2.OutputAttachment|pr.v2.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var t={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:pr.kd.E2d,format:pr.EV.BGRA8Unorm,usage:pr.v2.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(t),this.mainColorAttachments=[{attachment:yo?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:pr.EG.Store}]}else this.mainColorAttachments=[{attachment:yo?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:pr.EG.Store}];var r={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:pr.kd.E2d,format:yo?"depth32float-stencil8":pr.EV.Depth24PlusStencil8,usage:pr.v2.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(r),this.mainDepthAttachment={attachment:yo?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:pr.EG.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:pr.EG.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=yo?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=yo?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(t,r,i){var a,o,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,l=(a=t.get().color)===null||a===void 0?void 0:a.texture,u;l&&(u=l.createView(this.currentRenderTargetViewDescriptor));var c=(o=t.get().depth)===null||o===void 0?void 0:o.texture,f;c&&(f=c.createView());var h=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:u,loadValue:r!==null?r:pr.Ws.Load,storeOp:pr.EG.Store}],depthStencilAttachment:c&&f?{attachment:f,depthLoadValue:i?this.clearDepthValue:pr.Ws.Load,depthStoreOp:pr.EG.Store,stencilLoadValue:s?this.clearStencilValue:pr.Ws.Load,stencilStoreOp:pr.EG.Store}:void 0});this.currentRenderPass=h,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&this.currentRenderPass!==null&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(t){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=Infinity,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),n}(),vL))||dL),gL,pL;function $tt(n){var e=Qtt();return function(){var r=(0,Jn.Z)(n),i;if(e){var a=(0,Jn.Z)(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return(0,Oa.Z)(this,i)}}function Qtt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var k_=4/64,yL=1-k_*2,Jtt=(gL=(0,ur.b2)(),gL(pL=function(n){(0,wa.Z)(t,n);var e=$tt(t);function t(){return(0,Pr.Z)(this,t),e.apply(this,arguments)}return(0,Fr.Z)(t,[{key:"onEntityCreated",value:function(){var i=this.config,a=i.widthSegments,o=a===void 0?1:a,s=i.heightSegments,l=s===void 0?1:s,u=i.depthSegments,c=u===void 0?1:u,f=i.halfExtents,h=f===void 0?nn(.5,.5,.5):f,d=o,g=l,p=c,m=(0,Ky.Z)(h,3),_=m[0],S=m[1],M=m[2],R=[nn(-_,-S,M),nn(_,-S,M),nn(_,S,M),nn(-_,S,M),nn(_,-S,-M),nn(-_,-S,-M),nn(-_,S,-M),nn(_,S,-M)],F=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],V=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],nt={FRONT:0,BACK:1,TOP:2,BOTTOM:3,RIGHT:4,LEFT:5},at=[],xt=[],gt=[],Tt=[],Ct=[],te=0,Kt=function(ie,ye,Ee){var we,Pe,Ve,he;for(Ve=0;Ve<=ye;Ve++)for(he=0;he<=Ee;he++){var Te=zn(),Je=zn(),Ze=zn(),ar=zn();Ua(Te,R[F[ie][0]],R[F[ie][1]],Ve/ye),Ua(Je,R[F[ie][0]],R[F[ie][2]],he/Ee),bc(Ze,Je,R[F[ie][0]]),za(ar,Te,Ze),we=Ve/ye,Pe=he/Ee,at.push(ar[0],ar[1],ar[2]),xt.push(V[ie][0],V[ie][1],V[ie][2]),gt.push(we,Pe),we/=3,Pe/=3,we=we*yL+k_,Pe=Pe*yL+k_,we+=ie%3/3,Pe+=Math.floor(ie/3)/3,Tt.push(we,Pe),Ve<ye&&he<Ee&&(Ct.push(te+Ee+1,te+1,te),Ct.push(te+Ee+1,te+Ee+2,te+1)),te++}};Kt(nt.FRONT,d,g),Kt(nt.BACK,d,g),Kt(nt.TOP,d,p),Kt(nt.BOTTOM,d,p),Kt(nt.RIGHT,p,g),Kt(nt.LEFT,p,g);var ne=M_(at),ee=this.getComponent();ee.indices=Uint32Array.from(Ct),ee.aabb=ne,ee.vertexCount=te,ee.attributes=[{dirty:!0,name:"position",data:Float32Array.from(at),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(xt),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(gt),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),t}(Uu))||pL);function qtt(n,e){if(!n&&!e)throw new Error("Please specify valid arguments for parameters a and b.");if(!e||e.length===0)return n;if(!n||n.length===0)return e;if(Object.prototype.toString.call(n)!==Object.prototype.toString.call(e))throw new Error("The types of the two arguments passed for parameters a and b do not match.");var t=new n.constructor(n.length+e.length);return t.set(n),t.set(e,n.length),t}var mL,xL;function tet(n){var e=eet();return function(){var r=(0,Jn.Z)(n),i;if(e){var a=(0,Jn.Z)(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return(0,Oa.Z)(this,i)}}function eet(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var ret=(mL=(0,ur.b2)(),mL(xL=function(n){(0,wa.Z)(t,n);var e=tet(t);function t(){return(0,Pr.Z)(this,t),e.apply(this,arguments)}return(0,Fr.Z)(t,[{key:"onEntityCreated",value:function(){var i=this.config.geometries,a=i===void 0?[]:i,o=this.getComponent();o.aabb=new m_;var s=[],l=[],u=0;a.forEach(function(c){var f=c.aabb,h=c.indices,d=c.vertexCount,g=c.attributes;o.aabb.add(f),o.vertexCount+=d,h&&l.push.apply(l,(0,Ji.Z)(h.map(function(p){return p+u}))),u+=d,g.forEach(function(p,m){s[m]?p.data&&(A_(p.data)?s[m].push(p.data):SD(p.data)?s[m].data=qtt(s[m].data,p.data):s[m].data=s[m].data.concat(p.data)):(s[m]=p,s[m].dirty=!0)})}),o.attributes=s,o.indices=Uint32Array.from(l),o.dirty=!0}}]),t}(Uu))||xL),bL,_L;function net(n){var e=iet();return function(){var r=(0,Jn.Z)(n),i;if(e){var a=(0,Jn.Z)(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return(0,Oa.Z)(this,i)}}function iet(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var aet=(bL=(0,ur.b2)(),bL(_L=function(n){(0,wa.Z)(t,n);var e=net(t);function t(){return(0,Pr.Z)(this,t),e.apply(this,arguments)}return(0,Fr.Z)(t,[{key:"onEntityCreated",value:function(){for(var i=this.config,a=i.halfExtents,o=a===void 0?[.5,.5]:a,s=i.widthSegments,l=s===void 0?5:s,u=i.lengthSegments,c=u===void 0?5:u,f=[],h=[],d=[],g=[],p=0,m=0;m<=l;m++)for(var _=0;_<=c;_++){var S=-o[0]+2*o[0]*m/l,M=0,R=-(-o[1]+2*o[1]*_/c),F=m/l,V=_/c;f.push(S,M,R),h.push(0,1,0),d.push(F,V),m<l&&_<c&&(g.push(p+c+1,p+1,p),g.push(p+c+1,p+c+2,p+1)),p++}var nt=M_(f),at=this.getComponent();at.indices=Uint32Array.from(g),at.aabb=nt,at.vertexCount=p,at.attributes=[{dirty:!0,name:"position",data:Float32Array.from(f),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(h),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(d),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),t}(Uu))||_L),SL,EL;function oet(n){var e=set();return function(){var r=(0,Jn.Z)(n),i;if(e){var a=(0,Jn.Z)(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return(0,Oa.Z)(this,i)}}function set(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var uet=(SL=(0,ur.b2)(),SL(EL=function(n){(0,wa.Z)(t,n);var e=oet(t);function t(){return(0,Pr.Z)(this,t),e.apply(this,arguments)}return(0,Fr.Z)(t,[{key:"onEntityCreated",value:function(){for(var i=this.config,a=i.radius,o=a===void 0?.5:a,s=i.latitudeBands,l=s===void 0?16:s,u=i.longitudeBands,c=u===void 0?16:u,f=[],h=[],d=[],g=[],p=0;p<=l;p++)for(var m=p*Math.PI/l,_=Math.sin(m),S=Math.cos(m),M=0;M<=c;M++){var R=M*2*Math.PI/c-Math.PI/2,F=Math.sin(R),V=Math.cos(R),nt=V*_,at=S,xt=F*_,gt=1-M/c,Tt=1-p/l;f.push(nt*o,at*o,xt*o),h.push(nt,at,xt),d.push(gt,Tt)}for(var Ct=0;Ct<l;++Ct)for(var te=0;te<c;++te){var Kt=Ct*(c+1)+te,ne=Kt+c+1;g.push(Kt+1,ne,Kt),g.push(Kt+1,ne+1,ne)}var ee=M_(f),ve=this.getComponent();ve.indices=Uint32Array.from(g),ve.aabb=ee,ve.vertexCount=f.length/3,ve.attributes=[{dirty:!0,name:"position",data:Float32Array.from(f),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(h),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(d),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),t}(Uu))||EL),wL,CL,ML,AL,hm,TL,IL,OL;function cet(n){var e=fet();return function(){var r=(0,Jn.Z)(n),i;if(e){var a=(0,Jn.Z)(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return(0,Oa.Z)(this,i)}}function fet(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var het=`varying vec4 fragColor;

#pragma include "uv.frag.declaration"
#pragma include "map.frag.declaration"

void main() {
  vec4 diffuseColor = fragColor;

  #pragma include "map.frag.main"

  gl_FragColor = diffuseColor;
}`,det=`attribute vec3 position;
attribute vec3 normal;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform vec4 color;

varying vec4 fragColor;

#pragma include "uv.vert.declaration"

void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  fragColor = color;

  #pragma include "uv.vert.main"
}`,vet=`// layout(set = 0, binding = 1) uniform WireframeUniforms {
//   float lineWidth;
//   vec4 lineColor;
// } wireframe;

layout(location = 0) in vec4 fragColor;
// layout(location = 1) in vec3 v_Barycentric;

layout(location = 0) out vec4 outColor;

// wireframe
// float edgeFactor() {
//   vec3 d = fwidth(v_Barycentric);
//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);
//   return min(min(a3.x, a3.y), a3.z);
// }

void main() {
  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));
  outColor = fragColor;
}`,get=`layout(set = 0, binding = 0) uniform Uniforms {
  vec4 color;
  mat4 projectionMatrix;
  mat4 modelViewMatrix;
} uniforms;

layout(location = 0) in vec3 position;
// layout(location = 1) in vec3 barycentric;

layout(location = 0) out vec4 fragColor;
// layout(location = 1) out vec3 v_Barycentric;

void main() {
  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);
  fragColor = uniforms.color;
  // v_Barycentric = barycentric;
}`,pet=(wL=(0,ur.b2)(),CL=(0,ur.f3)(je.RenderEngine),ML=(0,ur.f3)(je.ShaderModuleService),wL(AL=(hm=(OL=function(n){(0,wa.Z)(t,n);var e=cet(t);function t(){var r;(0,Pr.Z)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),Gr(r,"engine",TL,(0,Zi.Z)(r)),Gr(r,"shaderModuleService",IL,(0,Zi.Z)(r)),r}return(0,Fr.Z)(t,[{key:"onEntityCreated",value:function(){var i=this.getComponent(),a=this.engine.supportWebGPU?get:det,o=this.engine.supportWebGPU?vet:het;this.shaderModuleService.registerModule("material-basic",{vs:a,fs:o});var s=this.shaderModuleService.getModule("material-basic"),l=s.vs,u=s.fs,c=s.uniforms;i.vertexShaderGLSL=l,i.fragmentShaderGLSL=u,i.setUniform(c),this.config.map&&(i.setDefines({USE_UV:1,USE_MAP:1}),i.setUniform({map:this.config.map,uvTransform:ra.create()}))}}]),t}(GD),OL),TL=zr(hm.prototype,"engine",[CL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),IL=zr(hm.prototype,"shaderModuleService",[ML],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hm))||AL),PL,DL,LL,RL,NL,kL,BL,Qg,FL,GL,zL,UL;function yet(n){var e=met();return function(){var r=(0,Jn.Z)(n),i;if(e){var a=(0,Jn.Z)(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return(0,Oa.Z)(this,i)}}function met(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var xet=`// generate grid, borrow from clay.gl viewer
// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl
#extension GL_OES_standard_derivatives : enable

varying vec3 v_Position;
// varying vec3 v_Normal;

uniform float u_GridSize : 5;
uniform float u_GridSize2 : .5;
uniform vec4 u_GridColor : [0, 0, 0, 1];
uniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];
uniform bool u_GridEnabled : true;

// uniform vec3 u_LightDirection;
// uniform vec3 u_LightColor;
// uniform vec3 u_Camera;

void main() {
  // vec3 n = v_Normal;
  // vec3 l = normalize(u_LightDirection);
  // float NdotL = clamp(dot(n, l), 0.001, 1.0);

  gl_FragColor = vec4(1.);

  if (u_GridEnabled) {
    float wx = v_Position.x;
    float wz = v_Position.z;
    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;
    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;

    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;
    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;

    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);
    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);
    // if (v0 > 0.1) {
        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);
    // }
    // else {
        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);
    // }
  }

  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);
  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;

  // gl_FragColor.rgb *= diffuseColor;
}`,bet=`attribute vec3 a_Position;

varying vec3 v_Position;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

void main() {
  v_Position = a_Position;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);
}`,_et=(PL=(0,ur.b2)(),DL=(0,ur.f3)(je.Systems),LL=(0,ur.t6)(je.MaterialSystem),RL=(0,ur.f3)(je.Systems),NL=(0,ur.t6)(je.GeometrySystem),kL=(0,ur.f3)(je.ShaderModuleService),PL(BL=(Qg=(UL=function(n){(0,wa.Z)(t,n);var e=yet(t);function t(){var r;(0,Pr.Z)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),Gr(r,"materialSystem",FL,(0,Zi.Z)(r)),Gr(r,"geometrySystem",GL,(0,Zi.Z)(r)),Gr(r,"shaderModuleService",zL,(0,Zi.Z)(r)),r}return(0,Fr.Z)(t,[{key:"onAttributeChanged",value:function(i){var a=i.name,o=i.data,s=this.getMeshComponent();s&&s.material&&(a==="gridColor"?(s.material.setUniform("u_GridColor",o),s.material.setUniform("u_GridColor2",o)):a==="gridSize"&&(s.material.setUniform("u_GridSize",o),s.material.setUniform("u_GridSize2",o)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:bet,fs:xet});var i=this.shaderModuleService.getModule("grid"),a=i.vs,o=i.fs,s=i.uniforms,l=this.materialSystem.createShaderMaterial({vertexShader:a,fragmentShader:o});this.setMaterial(l);var u=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(u),l.setCull({enable:!1,face:me.BACK}).setDepth({enable:!0,func:me.LESS}),l.setUniform(s),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),u.setIndex([0,3,2,2,1,0]),u.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),t}(Wu),UL),FL=zr(Qg.prototype,"materialSystem",[DL,LL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),GL=zr(Qg.prototype,"geometrySystem",[RL,NL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zL=zr(Qg.prototype,"shaderModuleService",[kL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qg))||BL),dm=x(81602),bf=x(91739);function vm(n,e,t,r,i){Jg(e,r,-i),Jg(e,r,i),n.push(t),n.push(t)}function Jg(n,e,t){n.push([[e[0],e[1]],t])}function Eet(n,e,t){var r=[0,0],i=[0,0],a=[0,0],o=[0,0],s=-1,l=!1,u=null,c=(0,dm.create)(),f=t||0,h=3,d=[],g=[],p=[],m=[0,0];e&&(n=n.slice(),n.push(n[0]));for(var _=n.length,S=1;S<_;S++){var M=f,R=n[S-1],F=n[S],V=S<n.length-1?n[S+1]:null;if(m.push(S/_,S/_),(0,bf.o7)(r,F,R),u||(u=[0,0],(0,bf.mJ)(u,r)),l||(l=!0,vm(g,d,R,u,1)),p.push([M+0,M+1,M+2]),!V)(0,bf.mJ)(u,r),vm(g,d,F,u,1),p.push(s===1?[M,M+2,M+3]:[M+2,M+1,M+3]),f+=2;else{(0,bf.o7)(i,V,F);var nt=(0,bf.x7)(a,o,r,i,1),at=(0,dm.dot)(a,u)<0?-1:1,xt=nt>h;if(!isFinite(nt)){(0,bf.mJ)(u,r),vm(g,d,F,u,1),p.push(s===1?[M,M+2,M+3]:[M+2,M+1,M+3]),f+=2,s=at;continue}xt?(nt=h,m.push(S/_),Jg(d,u,-at),g.push(F),Jg(d,o,nt*at),g.push(F),p.push(s!==-at?[M,M+2,M+3]:[M+2,M+1,M+3]),p.push([M+2,M+3,M+4]),(0,bf.mJ)(c,i),(0,dm.copy)(u,c),Jg(d,u,-at),g.push(F),f+=3):(vm(g,d,F,o,nt),p.push(s===1?[M,M+2,M+3]:[M+2,M+1,M+3]),at=-1,(0,dm.copy)(u,o),f+=2),s=at}}return{normals:d,attrIndex:p,attrPos:g,attrCounters:m}}var WL,VL,XL,YL,HL,jL,ZL,qg,KL,$L,QL,JL;function wet(n){var e=Cet();return function(){var r=(0,Jn.Z)(n),i;if(e){var a=(0,Jn.Z)(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return(0,Oa.Z)(this,i)}}function Cet(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var Met=`uniform float u_dash_array : 0.02;
uniform float u_dash_offset : 0;
uniform float u_dash_ratio : 0;
uniform float u_thickness : 0.02;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
    float blur = 1. - smoothstep(0.98, 1., length(v_normal));

    gl_FragColor = v_color;
    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));
}`,Aet=`attribute vec2 a_pos;
attribute vec4 a_color;
attribute float a_line_miter;
attribute vec2 a_line_normal;
attribute float a_counters;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform float u_thickness : 0.02;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
  v_color = a_color;
  v_counters = a_counters;

  vec3 normal = normalize(vec3(a_line_normal, 0.0));

  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);

  v_normal = vec2(normal * sign(a_line_miter));

  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;
}
`,Tet=(WL=(0,ur.b2)(),VL=(0,ur.f3)(je.Systems),XL=(0,ur.t6)(je.MaterialSystem),YL=(0,ur.f3)(je.Systems),HL=(0,ur.t6)(je.GeometrySystem),jL=(0,ur.f3)(je.ShaderModuleService),WL(ZL=(qg=(JL=function(n){(0,wa.Z)(t,n);var e=wet(t);function t(){var r;(0,Pr.Z)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),Gr(r,"materialSystem",KL,(0,Zi.Z)(r)),Gr(r,"geometrySystem",$L,(0,Zi.Z)(r)),Gr(r,"shaderModuleService",QL,(0,Zi.Z)(r)),r.vertexCount=void 0,r}return(0,Fr.Z)(t,[{key:"onAttributeChanged",value:function(i){var a=i.name,o=i.data,s=this.getMeshComponent();if(s&&s.material)switch(a){case"dashArray":s.material.setUniform("u_dash_array",o);break;case"dashOffset":s.material.setUniform("u_dash_offset",o);break;case"dashRatio":s.material.setUniform("u_dash_ratio",o);break;case"thickness":s.material.setUniform("u_thickness",o);break;case"color":var l=new Array(this.vertexCount).fill(void 0).map(function(){return o}).reduce(function(u,c){return[].concat((0,Ji.Z)(u),(0,Ji.Z)(c))},[]);s.geometry.setAttribute("a_color",Float32Array.from(l),{arrayStride:4*4,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]});break}}},{key:"onEntityCreated",value:function(){var i=this;this.shaderModuleService.registerModule("line",{vs:Aet,fs:Met});var a=this.shaderModuleService.getModule("line"),o=a.vs,s=a.fs,l=a.uniforms,u=this.materialSystem.createShaderMaterial({vertexShader:o,fragmentShader:s}),c=Eet(this.config.points,!1),f=c.normals,h=c.attrIndex,d=c.attrPos,g=c.attrCounters,p=d.length;this.vertexCount=p;var m=this.geometrySystem.createBufferGeometry({vertexCount:p});this.setMaterial(u),this.setGeometry(m),u.setCull({enable:!1,face:me.BACK}).setUniform(l),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var _=[],S=[];f.forEach(function(R){var F=R[0],V=R[1];_.push([F[0],F[1]]),S.push(V)}),m.setIndex(h.reduce(function(R,F){return[].concat((0,Ji.Z)(R),(0,Ji.Z)(F))},[])),m.setAttribute("a_pos",Float32Array.from(d.reduce(function(R,F){return[].concat((0,Ji.Z)(R),(0,Ji.Z)(F))},[])),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var M=new Array(p).fill(void 0).map(function(){return(0,Ji.Z)(i.config.color)}).reduce(function(R,F){return[].concat((0,Ji.Z)(R),(0,Ji.Z)(F))},[]);m.setAttribute("a_color",Float32Array.from(M),{arrayStride:4*4,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),m.setAttribute("a_line_miter",Float32Array.from(S),{arrayStride:4*1,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),m.setAttribute("a_line_normal",Float32Array.from(_.reduce(function(R,F){return[].concat((0,Ji.Z)(R),(0,Ji.Z)(F))},[])),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),m.setAttribute("a_counters",Float32Array.from(g),{arrayStride:4*1,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),t}(Wu),JL),KL=zr(qg.prototype,"materialSystem",[VL,XL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$L=zr(qg.prototype,"geometrySystem",[YL,HL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),QL=zr(qg.prototype,"shaderModuleService",[jL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qg))||ZL);function Iet(n){return[n+1&255,n+1>>8&255,n+1>>8>>8&255]}var qL,tR,eR,rR,nR,iR,aR,tp,oR,sR,lR,uR;function cR(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Oet(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cR(Object(t),!0).forEach(function(r){(0,Fe.Z)(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):cR(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Pet(n){var e=Det();return function(){var r=(0,Jn.Z)(n),i;if(e){var a=(0,Jn.Z)(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return(0,Oa.Z)(this,i)}}function Det(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var Let=`uniform float u_blur : 0.05;
uniform float u_opacity : 0.7;
uniform float u_stroke_width : 0.01;
uniform vec4 u_stroke_color : [0, 0, 0, 0];
uniform float u_stroke_opacity : 1;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "sdf2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  float antialiasblur = v_data.z;
  float antialiased_blur = -max(u_blur, antialiasblur);
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  // if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  // } else if (shape == 1) {
  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  // } else if (shape == 2) {
  //   outer_df = sdBox(v_data.xy, vec2(1.));
  //   inner_df = sdBox(v_data.xy, vec2(r));
  // } else if (shape == 3) {
  //   outer_df = sdPentagon(v_data.xy, 0.8);
  //   inner_df = sdPentagon(v_data.xy, r * 0.8);
  // } else if (shape == 4) {
  //   outer_df = sdHexagon(v_data.xy, 0.8);
  //   inner_df = sdHexagon(v_data.xy, r * 0.8);
  // } else if (shape == 5) {
  //   outer_df = sdOctogon(v_data.xy, 1.0);
  //   inner_df = sdOctogon(v_data.xy, r);
  // } else if (shape == 6) {
  //   outer_df = sdHexagram(v_data.xy, 0.52);
  //   inner_df = sdHexagram(v_data.xy, r * 0.52);
  // } else if (shape == 7) {
  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));
  //   inner_df = sdRhombus(v_data.xy, vec2(r));
  // } else if (shape == 8) {
  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);
  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  // }

  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiased_blur,
    0.0,
    inner_df
  );
  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;

  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor.a = gl_FragColor.a * opacity_t;

  gl_FragColor = filterColor(gl_FragColor);
}`,Ret=`attribute vec2 position;
attribute vec4 color;
attribute float shape;
attribute vec2 offset;
attribute float size;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

uniform float u_stroke_width : 0.01;
uniform float u_device_pixel_ratio;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "picking"

void main() {
  v_color = color;
  v_radius = size;

  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);

  // construct point coords
  v_data = vec4(position, antialiasblur, shape);

  gl_Position = projectionMatrix * modelViewMatrix
    * vec4(position * size + offset, 0.0, 1.0);

  setPickingColor(a_PickingColor);
}`,Net=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],ket=(qL=(0,ur.b2)(),tR=(0,ur.f3)(je.Systems),eR=(0,ur.t6)(je.MaterialSystem),rR=(0,ur.f3)(je.Systems),nR=(0,ur.t6)(je.GeometrySystem),iR=(0,ur.f3)(je.ShaderModuleService),qL(aR=(tp=(uR=function(n){(0,wa.Z)(t,n);var e=Pet(t);function t(){var r;(0,Pr.Z)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),Gr(r,"materialSystem",oR,(0,Zi.Z)(r)),Gr(r,"geometrySystem",sR,(0,Zi.Z)(r)),Gr(r,"shaderModuleService",lR,(0,Zi.Z)(r)),r}return(0,Fr.Z)(t,[{key:"onAttributeChanged",value:function(i){var a=i.name,o=i.data,s=this.getMeshComponent();s&&s.material&&(a==="strokeWidth"?s.material.setUniform("u_stroke_width",o):a==="strokeColor"?s.material.setUniform("u_stroke_color",o):a==="strokeOpacity"?s.material.setUniform("u_stroke_opacity",o):a==="opacity"?s.material.setUniform("u_opacity",o):a==="blur"&&s.material.setUniform("u_blur",o))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:Ret,fs:Let});var i=this.shaderModuleService.getModule("grid"),a=i.vs,o=i.fs,s=i.uniforms,l=this.materialSystem.createShaderMaterial({vertexShader:a,fragmentShader:o,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:me.SRC_ALPHA,dstRGB:me.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});l.setUniform(Oet({u_device_pixel_ratio:window.devicePixelRatio},s));var u=this.buildAttributes(),c=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:u.instancedOffsets.length/2,vertexCount:6});c.setIndex([0,2,1,0,3,2]),c.setAttribute("position",Float32Array.from(u.positions),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),c.setAttribute("offset",Float32Array.from(u.instancedOffsets),{arrayStride:4*2,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),c.setAttribute("color",Float32Array.from(u.instancedColors),{arrayStride:4*4,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),c.setAttribute("size",Float32Array.from(u.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),c.setAttribute("shape",Float32Array.from(u.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),c.setAttribute("a_PickingColor",Float32Array.from(u.instancedPickingColors),{arrayStride:4*3,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(l),this.setGeometry(c)}},{key:"buildAttribute",value:function(i,a,o){var s,l,u,c;(s=a.instancedPickingColors).push.apply(s,(0,Ji.Z)(Iet(i.id||o))),a.instancedShapes.push(Net.indexOf(i.shape||"circle")),(l=a.instancedColors).push.apply(l,(0,Ji.Z)(i.color||[1,0,0,1])),(u=a.instancedOffsets).push.apply(u,(0,Ji.Z)(i.position||[0,0])),(c=a.instancedSizes).push.apply(c,(0,Ji.Z)(i.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var i=this,a={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach(function(o,s){i.buildAttribute(o,a,s)}):this.buildAttribute(this.config,a,0),a}}]),t}(Wu),uR),oR=zr(tp.prototype,"materialSystem",[tR,eR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sR=zr(tp.prototype,"geometrySystem",[rR,nR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lR=zr(tp.prototype,"shaderModuleService",[iR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tp))||aR),fR,hR,dR,vR,gR,ep,pR,yR,mR,xR;function bR(n,e){var t;if(typeof Symbol=="undefined"||n[Symbol.iterator]==null){if(Array.isArray(n)||(t=Bet(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function Bet(n,e){if(!!n){if(typeof n=="string")return _R(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _R(n,e)}}function _R(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var Fet=`#ifdef USE_MAP
  uniform sampler2D map;
#endif`,Get=`#ifdef USE_MAP
  vec4 texelColor = texture2D(map, vUv);
  // texelColor = mapTexelToLinear(texelColor);
  diffuseColor *= texelColor;
#endif`,zet=`#if (defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ))
  varying vec2 vUv;
#endif`,Uet=`#ifdef USE_UV
  attribute vec2 uv;
	#ifdef UVS_VERTEX_ONLY
    vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,Wet=`#ifdef USE_UV
  vUv = (uvTransform * vec3(uv, 1)).xy;
#endif`,SR=(fR=(0,ur.b2)(),hR=(0,ur.f3)(je.RenderEngine),dR=(0,ur.f3)(je.ShaderModuleService),vR=(0,ur.f3)(je.ConfigService),fR(gR=(ep=(xR=function(){function n(){(0,Pr.Z)(this,n),this.container=void 0,Gr(this,"engine",pR,this),Gr(this,"shaderModule",yR,this),Gr(this,"configService",mR,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0}return(0,Fr.Z)(n,[{key:"init",value:function(){var e=(0,Fn.Z)(Ir().mark(function r(){var i,a,o,s,l;return Ir().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.shaderModule.registerBuiltinModules(),this.shaderModule.registerModule("uv.vert.declaration",{vs:Uet}),this.shaderModule.registerModule("uv.vert.main",{vs:Wet}),this.shaderModule.registerModule("uv.frag.declaration",{fs:zet}),this.shaderModule.registerModule("map.frag.declaration",{fs:Fet}),this.shaderModule.registerModule("map.frag.main",{fs:Get}),i=this.container.getAll(je.Systems),a=this.configService.get(),!a.canvas){c.next=30;break}return c.next=11,this.engine.init({canvas:a.canvas,swapChainFormat:pr.EV.BGRA8Unorm,antialiasing:!1});case 11:o=bR(i),c.prev=12,o.s();case 14:if((s=o.n()).done){c.next=21;break}if(l=s.value,!l.initialize){c.next=19;break}return c.next=19,l.initialize();case 19:c.next=14;break;case 21:c.next=26;break;case 23:c.prev=23,c.t0=c.catch(12),o.e(c.t0);case 26:return c.prev=26,o.f(),c.finish(26);case 29:this.inited=!0;case 30:case"end":return c.stop()}},r,this,[[12,23,26,29]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"render",value:function(){var e=(0,Fn.Z)(Ir().mark(function r(){var i,a,o,s,l,u,c,f=arguments;return Ir().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(!this.inited||this.rendering)){d.next=2;break}return d.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach(function(g){g()}),this.rendering=!0,this.engine.beginFrame(),i=this.container.getAll(je.Systems),a=f.length,o=new Array(a),s=0;s<a;s++)o[s]=f[s];l=bR(i),d.prev=8,l.s();case 10:if((u=l.n()).done){d.next=17;break}if(c=u.value,!c.execute){d.next=15;break}return d.next=15,c.execute(o);case 15:d.next=10;break;case 17:d.next=22;break;case 19:d.prev=19,d.t0=d.catch(8),l.e(d.t0);case 22:return d.prev=22,l.f(),d.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return d.stop()}},r,this,[[8,19,22,25]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"clear",value:function(t){var r=this;return this.inited?this.engine.clear(t):this.pendings.unshift(function(){r.engine.clear(t),r.pendings.shift()}),this}},{key:"setSize",value:function(t){var r=t.width,i=t.height,a=this.engine.getCanvas();return this.size={width:r,height:i},a.width=r,a.height=i,this}},{key:"getSize",value:function(){return this.size}}]),n}(),xR),pR=zr(ep.prototype,"engine",[hR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yR=zr(ep.prototype,"shaderModule",[dR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mR=zr(ep.prototype,"configService",[vR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ep))||gR),ER,wR,CR,MR=(ER=(0,ur.b2)(),ER(wR=(CR=function(){function n(){(0,Pr.Z)(this,n),this.entities=[]}return(0,Fr.Z)(n,[{key:"getEntities",value:function(){return this.entities}},{key:"addRenderable",value:function(t){return this.addEntity(t.getEntity()),this}},{key:"removeRenderable",value:function(t){return this.removeEntity(t.getEntity()),this}},{key:"addLight",value:function(){}},{key:"addEntity",value:function(t){return this.entities.indexOf(t)===-1&&this.entities.push(t),this}},{key:"removeEntity",value:function(t){var r=this.entities.indexOf(t);return this.entities.splice(r,1),this}}]),n}(),CR))||wR),AR,TR,IR,OR=(AR=(0,ur.b2)(),AR(TR=(IR=function(){function n(){(0,Pr.Z)(this,n),this.cache={}}return(0,Fr.Z)(n,[{key:"get",value:function(t){return this.cache[t]}},{key:"set",value:function(t,r){this.cache[t]=r}}]),n}(),IR))||TR),PR,DR,LR,RR,gm,NR,kR,BR;function FR(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function GR(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?FR(Object(t),!0).forEach(function(r){(0,Fe.Z)(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):FR(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var zR=(PR=(0,ur.b2)(),DR=(0,ur.f3)(OR),LR=(0,ur.f3)(je.RenderEngine),PR(RR=(gm=(BR=function(){function n(){(0,Pr.Z)(this,n),Gr(this,"textureCache",NR,this),Gr(this,"engine",kR,this),this.config=void 0,this.loaded=!1,this.texture=void 0}return(0,Fr.Z)(n,[{key:"setConfig",value:function(t){this.config=t}},{key:"isLoaded",value:function(){return this.loaded}},{key:"load",value:function(){var e=(0,Fn.Z)(Ir().mark(function r(){var i=this;return Ir().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!this.config.url){o.next=4;break}return o.abrupt("return",new Promise(function(s,l){var u=i.textureCache.get(i.config.url);if(u)s(u);else{var c=new Image;c.crossOrigin="Anonymous",c.src=i.config.url,c.onload=function(){var f=i.engine.createTexture2D(GR(GR({},i.config),{},{data:c,width:c.width,height:c.height,flipY:!0}));i.textureCache.set(i.config.url,f),i.texture=f,i.loaded=!0,s(f)},c.onerror=function(){l()}}}));case 4:return this.loaded=!0,this.texture=this.engine.createTexture2D(this.config),o.abrupt("return",this.texture);case 7:case"end":return o.stop()}},r,this)}));function t(){return e.apply(this,arguments)}return t}()}]),n}(),BR),NR=zr(gm.prototype,"textureCache",[DR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kR=zr(gm.prototype,"engine",[LR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gm))||RR),UR,WR,VR,XR,B_,YR,HR,jR=(UR=(0,ur.b2)(),WR=(0,ur.f3)(je.Systems),VR=(0,ur.t6)(je.RendererSystem),UR(XR=(B_=(HR=function(){function n(){(0,Pr.Z)(this,n),Gr(this,"rendererSystem",YR,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return(0,Fr.Z)(n,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(t){return this.camera=t,this}},{key:"setScene",value:function(t){return this.scene=t,this}},{key:"setViewport",value:function(t){return this.viewport=t,this}},{key:"setClearColor",value:function(t){return this.clearColor=t,this}},{key:"pick",value:function(t){return this.rendererSystem.pick(t,this)}}]),n}(),HR),YR=zr(B_.prototype,"rendererSystem",[WR,VR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B_))||XR),ZR,KR,$R,F_,QR,JR;function qR(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Vet(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qR(Object(t),!0).forEach(function(r){(0,Fe.Z)(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):qR(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var pm=(ZR=(0,ur.b2)(),KR=(0,ur.f3)(je.ConfigService),ZR($R=(F_=(JR=function(){function n(){(0,Pr.Z)(this,n),Gr(this,"configService",QR,this),this.container=void 0}return(0,Fr.Z)(n,[{key:"getEngine",value:function(){var e=(0,Fn.Z)(Ir().mark(function r(){var i,a,o,s;return Ir().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return i=this.container.get(je.RenderEngine),a=this.configService.get(),o=a.canvas,s=a.engineOptions,u.next=4,i.init(Vet({canvas:o||_D(),swapChainFormat:pr.EV.BGRA8Unorm,antialiasing:!1},s));case 4:return u.abrupt("return",i);case 5:case"end":return u.stop()}},r,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getTransformComponent",value:function(t){var r=this.container.get(je.TransformComponentManager);return r.getComponentByEntity(t)}},{key:"getMeshComponent",value:function(t){var r=this.container.get(je.MeshComponentManager);return r.getComponentByEntity(t)}},{key:"setConfig",value:function(t){this.configService.set(t)}},{key:"setContainer",value:function(t){this.container=t}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return js()}},{key:"createScene",value:function(){return this.container.get(MR)}},{key:"createCamera",value:function(){return this.container.get(gD)}},{key:"createView",value:function(){return this.container.get(jR)}},{key:"createRenderable",value:function(t,r){var i=t?this.container.getNamed(je.Renderable,t):this.container.get(Wu),a=js();return i.setConfig(r||{}),i.setEntity(a),i}},{key:"createGeometry",value:function(t,r){var i=this.container.getNamed(je.Geometry,t),a=js();return i.setConfig(r||{}),i.setEntity(a),i.getComponent()}},{key:"createMaterial",value:function(t,r){var i=this.container.getNamed(je.Material,t),a=js();return i.setConfig(r||{}),i.setEntity(a,t),i.getComponent()}},{key:"createTexture2D",value:function(t){var r=this.container.get(zR);return r.setConfig(t),r}},{key:"createBufferGeometry",value:function(t){var r=this.container.getNamed(je.Systems,je.GeometrySystem);return r.createBufferGeometry(t)}},{key:"createInstancedBufferGeometry",value:function(t){var r=this.container.getNamed(je.Systems,je.GeometrySystem);return r.createInstancedBufferGeometry(t)}},{key:"createShaderMaterial",value:function(t){var r=this.container.getNamed(je.Systems,je.MaterialSystem);return r.createShaderMaterial(t)}},{key:"createKernel",value:function(t){var r=this.container.get(DD);return typeof t=="string"?r.setBundle(JSON.parse(t)):r.setBundle(t),r.init(),r}},{key:"createRenderer",value:function(){var t=this.container.get(SR);return t.container=this.container,t.init(),t}},{key:"destroy",value:function(){var t=this.container.getAll(je.Systems);t.forEach(function(a){a.tearDown&&a.tearDown()});var r=this.container.get(je.RenderEngine);r.destroy();var i=this.container.get(je.InteractorService);i.destroy()}}],[{key:"create",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=tq(),i=navigator.gpu?Ktt:Ott;r.isBound(je.RenderEngine)||r.bind(je.RenderEngine).to(i).inSingletonScope(),r.bind(SR).toSelf(),r.bind(DD).toSelf(),r.bind(Wu).toSelf(),r.bind(jR).toSelf(),r.bind(gD).toSelf(),r.bind(MR).toSelf(),r.bind(n).toSelf(),r.bind(OR).toSelf(),r.bind(zR).toSelf(),r.bind(je.Geometry).to(Jtt).whenTargetNamed(Uu.BOX),r.bind(je.Geometry).to(uet).whenTargetNamed(Uu.SPHERE),r.bind(je.Geometry).to(aet).whenTargetNamed(Uu.PLANE),r.bind(je.Geometry).to(ret).whenTargetNamed(Uu.MERGED),r.bind(je.Material).to(pet).whenTargetNamed(GD.BASIC),r.bind(je.Renderable).to(ket).whenTargetNamed(Wu.POINT),r.bind(je.Renderable).to(Tet).whenTargetNamed(Wu.LINE),r.bind(je.Renderable).to(_et).whenTargetNamed(Wu.GRID);var a=r.get(n);return a.setContainer(r),a.setConfig(t),a}}]),n}(),JR),QR=zr(F_.prototype,"configService",[KR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F_))||$R);const dd=(n,e)=>{let t;return n?Mr(n)?t=()=>n:t=n:t=()=>e||1,t},Xet=(n,e)=>{const t=[],r=[],i={};let a=0;for(a=0;a<n.length;a++){const s=n[a];i[s.id]=a,t.push(s.x),t.push(s.y),t.push(0),t.push(0),r.push([])}for(a=0;a<e.length;a++){const s=e[a];r[i[s.source]].push(i[s.target]),r[i[s.target]].push(i[s.source])}let o=0;for(a=0;a<n.length;a++){const s=t.length,l=r[a],u=l.length;t[a*4+2]=s,t[a*4+3]=l.length,o=Math.max(o,l.length);for(let c=0;c<u;++c){const f=l[c];t.push(+f)}}for(;t.length%4!=0;)t.push(0);return{maxEdgePerVetex:o,array:new Float32Array(t)}},Yet=(n,e,t,r)=>{const i=[],a=[],o={};let s=0;for(s=0;s<n.length;s++){const u=n[s];o[u.id]=s,i.push(u.x),i.push(u.y),i.push(0),i.push(0),a.push([])}for(s=0;s<e.length;s++){const u=e[s];a[o[u.source]].push(o[u.target]),a[o[u.source]].push(t(u)),a[o[u.source]].push(r(u)),a[o[u.source]].push(0),a[o[u.target]].push(o[u.source]),a[o[u.target]].push(t(u)),a[o[u.target]].push(r(u)),a[o[u.target]].push(0)}let l=0;for(s=0;s<n.length;s++){const u=i.length,c=a[s],f=c.length;i[s*4+2]=u+1048576*f/4,i[s*4+3]=0,l=Math.max(l,f/4);for(let h=0;h<f;++h){const d=c[h];i.push(+d)}}for(;i.length%4!=0;)i.push(0);return{maxEdgePerVetex:l,array:new Float32Array(i)}},Het=(n,e)=>{const t=[],r=n.length,i={};return e.forEach(a=>{n.forEach((o,s)=>{if(i[a[o]]===void 0&&(i[a[o]]=Object.keys(i).length),t.push(i[a[o]]),s===r-1)for(;t.length%4!=0;)t.push(0)})}),{array:new Float32Array(t),count:Object.keys(i).length}},tN=n=>{const e=[],t=n.length,r=n[0].length;for(let i=0;i<r;i++)n.forEach((a,o)=>{if(e.push(a[i]),o===t-1)for(;e.length%4!=0;)e.push(0)});return new Float32Array(e)},iut=null,jet='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_K : f32;\\n  [[offset 4]] u_K2 : f32;\\n  [[offset 8]] u_Center : vec2<f32>;\\n  [[offset 16]] u_Gravity : f32;\\n  [[offset 20]] u_ClusterGravity : f32;\\n  [[offset 24]] u_Speed : f32;\\n  [[offset 28]] u_MaxDisplace : f32;\\n  [[offset 32]] u_Clustering : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx = dx + param * xDist;\\ndy = dy + param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\ndx = dx + param * std::sign;\\ndy = dy + param * std::sign;}}}}\\nreturn vec2<f32>(dx, dy);}\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nvar cvx : f32 = currentNode.x - center.x;\\nvar cvy : f32 = currentNode.y - center.y;\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx = dx + parma * cvx;\\ndy = dy + parma * cvy;}\\nreturn vec2<f32>(dx, dy);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + i32(p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\ndy = dy - yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\ndx = dx - std::sign * attractiveF;\\ndy = dy - std::sign * attractiveF;}}}\\nreturn vec2<f32>(dx, dy);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\ndx = dx + repulsive.x;\\ndy = dy + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\ndx = dx + attractive.x;\\ndy = dy + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\ndx = dx - gravity.x;\\ndy = dy - gravity.y;\\ndx = dx * gWebGPUUniformParams.u_Speed;\\ndy = dy * gWebGPUUniformParams.u_Speed;\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_K;\\n  float u_K2;\\n  vec2 u_Center;\\n  float u_Gravity;\\n  float u_ClusterGravity;\\n  float u_Speed;\\n  float u_MaxDisplace;\\n  float u_Clustering;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AttributeArray[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= gWebGPUUniformParams.u_Speed;\\ndy *= gWebGPUUniformParams.u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',aut=null,Zet='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\n\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\nvar sumx : f32 = 0.0;\\nvar sumy : f32 = 0.0;\\nvar count : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\nvar clusterIdx : i32 = i32(attributes.x);\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\nsumy = sumy + vertex.y;\\ncount = count + 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\n\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_NodeAttributes[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {int i = globalInvocationID.x;\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}';var ym=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(n,e||[])).next())})};class Ket extends ro{constructor(e){super();this.maxIteration=1e3,this.gravity=10,this.speed=1,this.clustering=!1,this.clusterField="cluster",this.clusterGravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(e)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}execute(){return ym(this,void 0,void 0,function*(){const e=this,t=e.nodes;if(!t||t.length===0){e.onLayoutEnd&&e.onLayoutEnd();return}!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);const r=e.center;if(t.length===1){t[0].x=r[0],t[0].y=r[1],e.onLayoutEnd&&e.onLayoutEnd();return}const i={},a={};t.forEach((o,s)=>{Mr(o.x)||(o.x=Math.random()*this.width),Mr(o.y)||(o.y=Math.random()*this.height),i[o.id]=o,a[o.id]=s}),e.nodeMap=i,e.nodeIdxMap=a,yield e.run()})}executeWithWorker(e,t){return ym(this,void 0,void 0,function*(){const r=this,i=r.nodes,a=r.center;if(!i||i.length===0)return;if(i.length===1){i[0].x=a[0],i[0].y=a[1];return}const o={},s={};i.forEach((l,u)=>{Mr(l.x)||(l.x=Math.random()*this.width),Mr(l.y)||(l.y=Math.random()*this.height),o[l.id]=l,s[l.id]=u}),r.nodeMap=o,r.nodeIdxMap=s,yield r.run(e,t)})}run(e,t){return ym(this,void 0,void 0,function*(){const r=this,i=r.nodes,a=r.edges,o=r.maxIteration,s=r.center,l=r.height*r.width;let u=Math.sqrt(l)/10;const c=l/(i.length+1),f=Math.sqrt(c),h=r.speed,d=r.clustering,{array:g,count:p}=Het([r.clusterField],i);i.forEach((gt,Tt)=>{let Ct=0,te=0;Mr(gt.fx)&&Mr(gt.fy)&&(Ct=gt.fx||.001,te=gt.fy||.001),g[4*Tt+1]=Ct,g[4*Tt+2]=te});const m=i.length,{maxEdgePerVetex:_,array:S}=Xet(i,a),M=r.workerEnabled;let R;M?R=pm.create({canvas:e,engineOptions:{supportCompute:!0}}):R=pm.create({engineOptions:{supportCompute:!0}});const F=r.onLayoutEnd,V=[];for(let gt=0;gt<p;gt++)V.push(0,0,0,0);const nt=R.createKernel(jet).setDispatch([m,1,1]).setBinding({u_Data:S,u_K:f,u_K2:c,u_Gravity:r.gravity,u_ClusterGravity:r.clusterGravity||r.gravity||1,u_Speed:h,u_MaxDisplace:u,u_Clustering:d?1:0,u_Center:s,u_AttributeArray:g,u_ClusterCenters:V,MAX_EDGE_PER_VERTEX:_,VERTEX_COUNT:m});let at;d&&(at=R.createKernel(Zet).setDispatch([p,1,1]).setBinding({u_Data:S,u_NodeAttributes:g,u_ClusterCenters:V,VERTEX_COUNT:m,CLUSTER_COUNT:p})),yield(()=>ym(this,void 0,void 0,function*(){for(let Tt=0;Tt<o;Tt++)yield nt.execute(),d&&(at.setBinding({u_Data:nt}),yield at.execute(),nt.setBinding({u_ClusterCenters:at})),nt.setBinding({u_MaxDisplace:u*=.99});const gt=yield nt.getOutput();e?t.postMessage({type:g_.GPUEND,vertexEdgeData:gt}):i.forEach((Tt,Ct)=>{const te=gt[4*Ct],Kt=gt[4*Ct+1];Tt.x=te,Tt.y=Kt}),F&&F()}))()})}getType(){return"fruchterman-gpu"}}const out=null,$et='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_damping : f32;\\n  [[offset 4]] u_maxSpeed : f32;\\n  [[offset 8]] u_minMovement : f32;\\n  \\n  [[offset 12]] u_coulombDisScale : f32;\\n  [[offset 16]] u_factor : f32;\\n  \\n  \\n  [[offset 20]] u_interval : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\ntype GWebGPUBuffer3 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\nvar v0 : i32 = packedIntValue / 1048576;\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar vx : f32 = currentNode.x - nextNode.x;\\nvar vy : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar n_dist : f32 = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nvar massi : f32 = attributesi.x;\\nvar nodeStrengthi : f32 = attributesi.z;\\nvar nodeStrengthj : f32 = attributesj.z;\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\nvar param : f32 = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax = ax + direx * param;\\nay = ay + direy * param;}}\\nreturn vec2<f32>(ax, ay);}\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\nvar vy : f32 = currentNode.y - attributes2.y;\\nvar ax : f32 = vx * attributes2.z;\\nvar ay : f32 = vy * attributes2.z;\\nreturn vec2<f32>(ax, ay);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\nvar length : i32 = compressed.x;\\nvar arr_offset : i32 = compressed.y;\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + (4 * p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = node_buffer.x;\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar vx : f32 = nextNode.x - currentNode.x;\\nvar vy : f32 = nextNode.y - currentNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar edgeLength : f32 = node_buffer.y;\\nvar edgeStrength : f32 = node_buffer.z;\\nvar diff : f32 = edgeLength - dist;\\nvar param : f32 = (diff * edgeStrength) / mass;\\nax = ax - direx * param;\\nay = ay - direy * param;}\\nreturn vec2<f32>(ax, ay);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\nax = ax + repulsive.x;\\nay = ay + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\nax = ax + attractive.x;\\nay = ay + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\nax = ax - gravity.x;\\nay = ay - gravity.y;\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nvar vx : f32 = ax * param;\\nvar vy : f32 = ay * param;\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_damping;\\n  float u_maxSpeed;\\n  float u_minMovement;\\n  \\n  float u_coulombDisScale;\\n  float u_factor;\\n  \\n  \\n  float u_interval;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_NodeAttributeArray1[];\\n} gWebGPUBuffer2;\\n\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\n  vec4 u_NodeAttributeArray2[];\\n} gWebGPUBuffer3;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {gl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',sut=null,Qet='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_iter : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var movement : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nmovement = movement + vertex.w;}\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_iter;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {float movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}';var G_=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(n,e||[])).next())})};class Jet extends ro{constructor(e){super();this.maxIteration=1e3,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(e)}getDefaultCfg(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}execute(){return G_(this,void 0,void 0,function*(){const e=this,t=e.nodes;if(!t||t.length===0){e.onLayoutEnd&&e.onLayoutEnd();return}!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);const r=e.center;if(t.length===1){t[0].x=r[0],t[0].y=r[1],e.onLayoutEnd&&e.onLayoutEnd();return}const i={},a={};t.forEach((o,s)=>{Mr(o.x)||(o.x=Math.random()*e.width),Mr(o.y)||(o.y=Math.random()*e.height),i[o.id]=o,a[o.id]=s}),e.nodeMap=i,e.nodeIdxMap=a,e.nodeStrength=dd(e.nodeStrength,1),e.edgeStrength=dd(e.edgeStrength,1),yield e.run()})}executeWithWorker(e,t){const r=this,i=r.nodes,a=r.center;if(!i||i.length===0)return;if(i.length===1){i[0].x=a[0],i[0].y=a[1];return}const o={},s={};i.forEach((l,u)=>{Mr(l.x)||(l.x=Math.random()*r.width),Mr(l.y)||(l.y=Math.random()*r.height),o[l.id]=l,s[l.id]=u}),r.nodeMap=o,r.nodeIdxMap=s,r.nodeStrength=dd(r.nodeStrength,1),r.edgeStrength=dd(r.edgeStrength,1),r.run(e,t)}run(e,t){return G_(this,void 0,void 0,function*(){const r=this,i=r.nodes,a=r.edges,o=r.maxIteration;!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight);const s=i.length;r.linkDistance=dd(r.linkDistance),r.edgeStrength=dd(r.edgeStrength);const{maxEdgePerVetex:l,array:u}=Yet(i,a,r.linkDistance,r.edgeStrength);r.degrees=Og(i.length,r.nodeIdxMap,a);const c=[],f=[],h=[],d=[],g=[],p=[],m=[];r.getMass||(r.getMass=Ct=>r.degrees[r.nodeIdxMap[Ct.id]]||1);const _=r.gravity,S=r.center;i.forEach((Ct,te)=>{c.push(r.getMass(Ct)),f.push(r.nodeStrength(Ct)),r.degrees[te]||(r.degrees[te]=0);let Kt=[S[0],S[1],_];if(r.getCenter){const ne=r.getCenter(Ct,r.degrees[te]);ne&&Mr(ne[0])&&Mr(ne[1])&&Mr(ne[2])&&(Kt=ne)}h.push(Kt[0]),d.push(Kt[1]),g.push(Kt[2]),Mr(Ct.fx)&&Mr(Ct.fy)?(p.push(Ct.fx||.001),m.push(Ct.fy||.001)):(p.push(0),m.push(0))});const M=tN([c,r.degrees,f,p]),R=tN([h,d,g,m]),F=r.workerEnabled;let V;F?V=pm.create({canvas:e,engineOptions:{supportCompute:!0}}):V=pm.create({engineOptions:{supportCompute:!0}});const nt=r.onLayoutEnd,at=[];u.forEach(Ct=>{at.push(Ct)});for(let Ct=0;Ct<4;Ct++)at.push(0);const xt=V.createKernel($et).setDispatch([s,1,1]).setBinding({u_Data:u,u_damping:r.damping,u_maxSpeed:r.maxSpeed,u_minMovement:r.minMovement,u_coulombDisScale:r.coulombDisScale,u_factor:r.factor,u_NodeAttributeArray1:M,u_NodeAttributeArray2:R,MAX_EDGE_PER_VERTEX:l,VERTEX_COUNT:s,u_AveMovement:at,u_interval:r.interval}),gt=V.createKernel(Qet).setDispatch([1,1,1]).setBinding({u_Data:u,VERTEX_COUNT:s,u_AveMovement:[0,0,0,0]});yield(()=>G_(this,void 0,void 0,function*(){for(let te=0;te<o;te++){yield xt.execute(),gt.setBinding({u_Data:xt}),yield gt.execute();const Kt=Math.max(.02,r.interval-te*.002);xt.setBinding({u_interval:Kt,u_AveMovement:gt})}const Ct=yield xt.getOutput();e?t.postMessage({type:g_.GPUEND,vertexEdgeData:Ct}):i.forEach((te,Kt)=>{const ne=Ct[4*Kt],ee=Ct[4*Kt+1];te.x=ne,te.y=ee}),nt&&nt()}))()})}getType(){return"gForce-gpu"}}class qet extends ro{constructor(e){super();this.center=[0,0],this.maxIteration=100,this.gravity=10,this.comboGravity=10,this.linkDistance=10,this.alpha=1,this.alphaMin=.001,this.alphaDecay=1-Math.pow(this.alphaMin,1/300),this.alphaTarget=0,this.velocityDecay=.6,this.edgeStrength=.6,this.nodeStrength=30,this.preventOverlap=!1,this.preventNodeOverlap=!1,this.preventComboOverlap=!1,this.collideStrength=void 0,this.nodeCollideStrength=.5,this.comboCollideStrength=.5,this.comboSpacing=20,this.comboPadding=10,this.optimizeRangeFactor=1,this.onTick=()=>{},this.onLayoutEnd=()=>{},this.depthAttractiveForceScale=1,this.depthRepulsiveForceScale=2,this.nodes=[],this.edges=[],this.combos=[],this.comboTrees=[],this.width=300,this.height=300,this.bias=[],this.nodeMap={},this.oriComboMap={},this.indexMap={},this.comboMap={},this.previousLayouted=!1,this.updateCfg(e)}getDefaultCfg(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}execute(){const e=this,t=e.nodes,r=e.center;if(e.comboTree={id:"comboTreeRoot",depth:-1,children:e.comboTrees},!t||t.length===0){e.onLayoutEnd&&e.onLayoutEnd();return}if(t.length===1){t[0].x=r[0],t[0].y=r[1],e.onLayoutEnd&&e.onLayoutEnd();return}e.initVals(),e.run(),e.onLayoutEnd&&e.onLayoutEnd()}run(){const e=this,t=e.nodes,r=e.previousLayouted?e.maxIteration/5:e.maxIteration;!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight);const i=e.center,a=e.velocityDecay,o=e.comboMap;e.previousLayouted||e.initPos(o);for(let u=0;u<r;u++){const c=[];t.forEach((f,h)=>{c[h]={x:0,y:0}}),e.applyCalculate(c),e.applyComboCenterForce(c),t.forEach((f,h)=>{!Mr(f.x)||!Mr(f.y)||(f.x+=c[h].x*a,f.y+=c[h].y*a)}),e.alpha+=(e.alphaTarget-e.alpha)*e.alphaDecay,e.onTick()}const s=[0,0];t.forEach(u=>{!Mr(u.x)||!Mr(u.y)||(s[0]+=u.x,s[1]+=u.y)}),s[0]/=t.length,s[1]/=t.length;const l=[i[0]-s[0],i[1]-s[1]];t.forEach((u,c)=>{!Mr(u.x)||!Mr(u.y)||(u.x+=l[0],u.y+=l[1])}),e.combos.forEach(u=>{const c=o[u.id];c&&c.empty&&(u.x=c.cx||u.x,u.y=c.cy||u.y)}),e.previousLayouted=!0}initVals(){const e=this,t=e.edges,r=e.nodes,i=e.combos,a={},o={},s={};r.forEach((gt,Tt)=>{o[gt.id]=gt,s[gt.id]=Tt}),e.nodeMap=o,e.indexMap=s;const l={};i.forEach(gt=>{l[gt.id]=gt}),e.oriComboMap=l,e.comboMap=e.getComboMap();const u=e.preventOverlap;e.preventComboOverlap=e.preventComboOverlap||u,e.preventNodeOverlap=e.preventNodeOverlap||u;const c=e.collideStrength;c&&(e.comboCollideStrength=c,e.nodeCollideStrength=c),e.comboCollideStrength=e.comboCollideStrength?e.comboCollideStrength:0,e.nodeCollideStrength=e.nodeCollideStrength?e.nodeCollideStrength:0;for(let gt=0;gt<t.length;++gt)a[t[gt].source]?a[t[gt].source]++:a[t[gt].source]=1,a[t[gt].target]?a[t[gt].target]++:a[t[gt].target]=1;const f=[];for(let gt=0;gt<t.length;++gt)f[gt]=a[t[gt].source]/(a[t[gt].source]+a[t[gt].target]);this.bias=f;const h=e.nodeSize,d=e.nodeSpacing;let g,p;if(Mr(d)?p=()=>d:ku(d)?p=d:p=()=>0,this.nodeSpacing=p,!h)g=gt=>gt.size?Ia(gt.size)?(gt.size[0]>gt.size[1]?gt.size[0]:gt.size[1])/2:gt.size/2:10;else if(ku(h))g=gt=>h(gt);else if(Ia(h)){const Tt=(h[0]>h[1]?h[0]:h[1])/2;g=Ct=>Tt}else{const gt=h/2;g=Tt=>gt}this.nodeSize=g;const m=e.comboSpacing;let _;Mr(m)?_=()=>m:ku(m)?_=m:_=()=>0,this.comboSpacing=_;const S=e.comboPadding;let M;Mr(S)?M=()=>S:Ia(S)?M=()=>Math.max.apply(null,S):ku(S)?M=S:M=()=>0,this.comboPadding=M;let R=this.linkDistance,F;R||(R=10),Mr(R)?F=gt=>R:F=R,this.linkDistance=F;let V=this.edgeStrength,nt;V||(V=1),Mr(V)?nt=gt=>V:nt=V,this.edgeStrength=nt;let at=this.nodeStrength,xt;at||(at=30),Mr(at)?xt=gt=>at:xt=at,this.nodeStrength=xt}initPos(e){this.nodes.forEach((i,a)=>{const o=i.comboId,s=e[o];o&&s?(i.x=s.cx+100/(a+1),i.y=s.cy+100/(a+1)):(i.x=100/(a+1),i.y=100/(a+1))})}getComboMap(){const e=this,t=e.nodeMap,r=e.indexMap,i=e.comboTrees,a=e.oriComboMap,o={};return(i||[]).forEach(s=>{const l=[];Gy(s,u=>{if(u.itemType==="node"||!a[u.id])return!0;if(o[u.id]===void 0){const h={id:u.id,name:u.id,cx:0,cy:0,count:0,depth:e.oriComboMap[u.id].depth||0,children:[]};o[u.id]=h}const c=u.children;c&&c.forEach(h=>{if(!o[h.id]&&!t[h.id])return!0;l.push(h)});const f=o[u.id];if(f.cx=0,f.cy=0,l.length===0){f.empty=!0;const h=a[u.id],d=Object.keys(t).length,g=`${u.id}-visual-child-${d}`,p={id:g,x:h.x,y:h.y,depth:f.depth+1,itemType:"node"};e.nodes.push(p),t[g]=p,r[g]=d,f.cx=h.x,f.cy=h.y,l.push(p)}return l.forEach(h=>{if(f.count++,h.itemType!=="node"){const g=o[h.id];Mr(g.cx)&&(f.cx+=g.cx),Mr(g.cy)&&(f.cy+=g.cy);return}const d=t[h.id];!d||(Mr(d.x)&&(f.cx+=d.x),Mr(d.y)&&(f.cy+=d.y))}),f.cx/=f.count,f.cy/=f.count,f.children=l,!0})}),o}applyComboCenterForce(e){const t=this,r=t.gravity,i=t.comboGravity||r,a=this.alpha,o=t.comboTrees,s=t.indexMap,l=t.nodeMap,u=t.comboMap;(o||[]).forEach(c=>{Gy(c,f=>{if(f.itemType==="node"||!u[f.id])return!0;const d=u[f.id],g=(d.depth+1)/10*.5,p=d.cx,m=d.cy;return d.cx=0,d.cy=0,d.children.forEach(_=>{if(_.itemType!=="node"){const at=u[_.id];at&&Mr(at.cx)&&(d.cx+=at.cx),at&&Mr(at.cy)&&(d.cy+=at.cy);return}const S=l[_.id],M=S.x-p||.005,R=S.y-m||.005,F=Math.sqrt(M*M+R*R),V=s[S.id],nt=i*a/F*g;e[V].x-=M*nt,e[V].y-=R*nt,Mr(S.x)&&(d.cx+=S.x),Mr(S.y)&&(d.cy+=S.y)}),d.cx/=d.count,d.cy/=d.count,!0})})}applyCalculate(e){const t=this,r=t.comboMap,i=t.nodes,a={};i.forEach((s,l)=>{i.forEach((u,c)=>{if(l<c)return;const f=s.x-u.x||.005,h=s.y-u.y||.005;let d=f*f+h*h;const g=Math.sqrt(d);d<1&&(d=g),a[`${s.id}-${u.id}`]={vx:f,vy:h,vl2:d,vl:g},a[`${u.id}-${s.id}`]={vl2:d,vl:g,vx:-f,vy:-h}})}),t.updateComboSizes(r),t.calRepulsive(e,a),t.calAttractive(e,a),t.preventComboOverlap&&t.comboNonOverlapping(e,r)}updateComboSizes(e){const t=this,r=t.comboTrees,i=t.nodeMap,a=t.nodeSize,o=t.comboSpacing,s=t.comboPadding;(r||[]).forEach(l=>{const u=[];Gy(l,c=>{if(c.itemType==="node")return!0;const f=e[c.id];if(!f)return!1;const h=c.children;h&&h.forEach(p=>{!e[p.id]&&!i[p.id]||u.push(p)}),f.minX=Infinity,f.minY=Infinity,f.maxX=-Infinity,f.maxY=-Infinity,u.forEach(p=>{if(p.itemType!=="node")return!0;const m=i[p.id];if(!m)return!0;const _=a(m),S=m.x-_,M=m.y-_,R=m.x+_,F=m.y+_;f.minX>S&&(f.minX=S),f.minY>M&&(f.minY=M),f.maxX<R&&(f.maxX=R),f.maxY<F&&(f.maxY=F)});let d=t.oriComboMap[c.id].size||10;Ia(d)&&(d=d[0]);const g=Math.max(f.maxX-f.minX,f.maxY-f.minY,d);return f.r=g/2+o(f)/2+s(f),!0})})}comboNonOverlapping(e,t){const r=this,i=r.comboTree,a=r.comboCollideStrength,o=r.indexMap,s=r.nodeMap;Gy(i,l=>{if(!t[l.id]&&!s[l.id]&&l.id!=="comboTreeRoot")return!1;const u=l.children;return u&&u.length>1&&u.forEach((c,f)=>{if(c.itemType==="node")return!1;const h=t[c.id];!h||u.forEach((d,g)=>{if(f<=g||d.itemType==="node")return!1;const p=t[d.id];if(!p)return!1;const m=h.cx-p.cx||.005,_=h.cy-p.cy||.005,S=m*m+_*_,M=h.r||1,R=p.r||1,F=M+R,V=R*R,nt=M*M;if(S<F*F){const at=c.children;if(!at||at.length===0)return!1;const xt=d.children;if(!xt||xt.length===0)return!1;const gt=Math.sqrt(S),Tt=(F-gt)/gt*a,Ct=m*Tt,te=_*Tt,Kt=V/(nt+V),ne=1-Kt;at.forEach(ee=>{if(ee.itemType!=="node")return!1;if(!s[ee.id])return;const ve=o[ee.id];xt.forEach(ie=>{if(ie.itemType!=="node"||!s[ie.id])return!1;const ye=o[ie.id];e[ve].x+=Ct*Kt,e[ve].y+=te*Kt,e[ye].x-=Ct*ne,e[ye].y-=te*ne})})}})}),!0})}calRepulsive(e,t){const r=this,i=r.nodes,a=r.width*r.optimizeRangeFactor,o=r.nodeStrength,s=r.alpha,l=r.nodeCollideStrength,u=r.preventNodeOverlap,c=r.nodeSize,f=r.nodeSpacing,h=r.depthRepulsiveForceScale,d=r.center;i.forEach((g,p)=>{if(!(!g.x||!g.y)){if(d){const m=r.gravity,_=g.x-d[0]||.005,S=g.y-d[1]||.005,M=Math.sqrt(_*_+S*S);e[p].x-=_*m*s/M,e[p].y-=S*m*s/M}i.forEach((m,_)=>{if(p===_||!m.x||!m.y)return;const{vl2:S,vl:M}=t[`${g.id}-${m.id}`];if(M>a)return;const{vx:R,vy:F}=t[`${g.id}-${m.id}`];let V=Math.log(Math.abs(m.depth-g.depth)/10)+1||1;V=V<1?1:V,m.comboId!==g.comboId&&(V+=1);const nt=V?Math.pow(h,V):1,at=o(m)*s/S*nt;if(e[p].x+=R*at,e[p].y+=F*at,p<_&&u){const xt=c(g)+f(g)||1,gt=c(m)+f(m)||1,Tt=xt+gt;if(S<Tt*Tt){const Ct=(Tt-M)/M*l,te=gt*gt;let Kt=te/(xt*xt+te);const ne=R*Ct,ee=F*Ct;e[p].x+=ne*Kt,e[p].y+=ee*Kt,Kt=1-Kt,e[_].x-=ne*Kt,e[_].y-=ee*Kt}}})}})}calAttractive(e,t){const r=this,i=r.edges,a=r.linkDistance,o=r.alpha,s=r.edgeStrength,l=r.bias,u=r.depthAttractiveForceScale;i.forEach((c,f)=>{if(!c.source||!c.target||c.source===c.target)return;const h=r.indexMap[c.source],d=r.indexMap[c.target],g=r.nodeMap[c.source],p=r.nodeMap[c.target];if(!g||!p)return;let m=g.depth===p.depth?0:Math.log(Math.abs(g.depth-p.depth)/10);g.comboId===p.comboId&&(m=m/2);let _=m?Math.pow(u,m):1;if(g.comboId!==p.comboId&&_===1?_=u/2:g.comboId===p.comboId&&(_=2),!Mr(p.x)||!Mr(g.x)||!Mr(p.y)||!Mr(g.y))return;const{vl:S,vx:M,vy:R}=t[`${c.target}-${c.source}`],F=(S-a(c))/S*o*s(c)*_,V=M*F,nt=R*F,at=l[f];e[d].x-=V*at,e[d].y-=nt*at,e[h].x+=V*(1-at),e[h].y+=nt*(1-at)})}getType(){return"comboForce"}}class z_{constructor(e){this.id=e.id||0,this.rx=e.rx,this.ry=e.ry,this.fx=0,this.fy=0,this.mass=e.mass,this.degree=e.degree,this.g=e.g||0}distanceTo(e){const t=this.rx-e.rx,r=this.ry-e.ry;return Math.hypot(t,r)}setPos(e,t){this.rx=e,this.ry=t}resetForce(){this.fx=0,this.fy=0}addForce(e){const t=e.rx-this.rx,r=e.ry-this.ry;let i=Math.hypot(t,r);i=i<1e-4?1e-4:i;const a=this.g*(this.degree+1)*(e.degree+1)/i;this.fx+=a*t/i,this.fy+=a*r/i}in(e){return e.contains(this.rx,this.ry)}add(e){const t=this.mass+e.mass,r=(this.rx*this.mass+e.rx*e.mass)/t,i=(this.ry*this.mass+e.ry*e.mass)/t,a=this.degree+e.degree,o={rx:r,ry:i,mass:t,degree:a};return new z_(o)}}class vd{constructor(e){this.xmid=e.xmid,this.ymid=e.ymid,this.length=e.length,this.massCenter=e.massCenter||[0,0],this.mass=e.mass||1}getLength(){return this.length}contains(e,t){const r=this.length/2;return e<=this.xmid+r&&e>=this.xmid-r&&t<=this.ymid+r&&t>=this.ymid-r}NW(){const e=this.xmid-this.length/4,t=this.ymid+this.length/4,r=this.length/2,i={xmid:e,ymid:t,length:r};return new vd(i)}NE(){const e=this.xmid+this.length/4,t=this.ymid+this.length/4,r=this.length/2,i={xmid:e,ymid:t,length:r};return new vd(i)}SW(){const e=this.xmid-this.length/4,t=this.ymid-this.length/4,r=this.length/2,i={xmid:e,ymid:t,length:r};return new vd(i)}SE(){const e=this.xmid+this.length/4,t=this.ymid-this.length/4,r=this.length/2,i={xmid:e,ymid:t,length:r};return new vd(i)}}class gd{constructor(e){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,e!=null&&(this.quad=e)}insert(e){if(this.body==null){this.body=e;return}this._isExternal()?(this.quad&&(this.NW=new gd(this.quad.NW()),this.NE=new gd(this.quad.NE()),this.SW=new gd(this.quad.SW()),this.SE=new gd(this.quad.SE())),this._putBody(this.body),this._putBody(e),this.body=this.body.add(e)):(this.body=this.body.add(e),this._putBody(e))}_putBody(e){!this.quad||(e.in(this.quad.NW())&&this.NW?this.NW.insert(e):e.in(this.quad.NE())&&this.NE?this.NE.insert(e):e.in(this.quad.SW())&&this.SW?this.SW.insert(e):e.in(this.quad.SE())&&this.SE&&this.SE.insert(e))}_isExternal(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}updateForce(e){if(!(this.body==null||e===this.body))if(this._isExternal())e.addForce(this.body);else{const t=this.quad?this.quad.getLength():0,r=this.body.distanceTo(e);t/r<this.theta?e.addForce(this.body):(this.NW&&this.NW.updateForce(e),this.NE&&this.NE.updateForce(e),this.SW&&this.SW.updateForce(e),this.SE&&this.SE.updateForce(e))}}}class trt extends ro{constructor(e){super();this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.kr=5,this.kg=1,this.mode="normal",this.preventOverlap=!1,this.dissuadeHubs=!1,this.barnesHut=!1,this.maxIteration=0,this.ks=.1,this.ksmax=10,this.tao=.1,this.onLayoutEnd=()=>{},this.prune=!1,this.updateCfg(e)}getDefaultCfg(){return{}}execute(){const e=this;let{nodes:t,maxIteration:r,onLayoutEnd:i,prune:a}=e;!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight);const o=[],s=t.length;for(let l=0;l<s;l+=1){const u=t[l];let c=10,f=10;Mr(u.size)&&(c=u.size,f=u.size),Ia(u.size)&&(isNaN(u.size[0])||(c=u.size[0]),isNaN(u.size[1])||(f=u.size[1])),e.getWidth&&!isNaN(e.getWidth(u))&&(f=e.getWidth(u)),e.getHeight&&!isNaN(e.getHeight(u))&&(c=e.getHeight(u));const h=Math.max(c,f);o.push(h)}!e.barnesHut&&s>250&&(e.barnesHut=!0),!e.prune&&s>100&&(e.prune=!0),this.maxIteration===0&&!e.prune?(r=250,s<=200&&s>100?r=1e3:s>200&&(r=1200),this.maxIteration=r):this.maxIteration===0&&a&&(r=100,s<=200&&s>100?r=500:s>200&&(r=950),this.maxIteration=r),e.kr||(e.kr=50,s>100&&s<=500?e.kr=20:s>500&&(e.kr=1)),e.kg||(e.kg=20,s>100&&s<=500?e.kg=10:s>500&&(e.kg=1)),this.nodes=e.updateNodesByForces(o),i()}updateNodesByForces(e){const t=this;let{nodes:r,edges:i,maxIteration:a}=t;const o=i.filter(g=>g.source!==g.target),s=r.length,l=o.length,u=[],c={},f={},h=[];for(let g=0;g<s;g+=1)c[r[g].id]=g,u[g]=0,(r[g].x===void 0||isNaN(r[g].x))&&(r[g].x=Math.random()*1e3),(r[g].y===void 0||isNaN(r[g].y))&&(r[g].y=Math.random()*1e3),h.push({x:r[g].x,y:r[g].y});for(let g=0;g<l;g+=1){let p,m,_=0,S=0;for(let M=0;M<s;M+=1)r[M].id===o[g].source?(p=r[M],_=M):r[M].id===o[g].target&&(m=r[M],S=M),f[g]={sourceIdx:_,targetIdx:S};p&&(u[c[p.id]]+=1),m&&(u[c[m.id]]+=1)}let d=a;if(r=this.iterate(d,c,f,l,u,e),t.prune){for(let g=0;g<l;g+=1)u[f[g].sourceIdx]<=1?(r[f[g].sourceIdx].x=r[f[g].targetIdx].x,r[f[g].sourceIdx].y=r[f[g].targetIdx].y):u[f[g].targetIdx]<=1&&(r[f[g].targetIdx].x=r[f[g].sourceIdx].x,r[f[g].targetIdx].y=r[f[g].sourceIdx].y);t.prune=!1,t.barnesHut=!1,d=100,r=this.iterate(d,c,f,l,u,e)}return r}iterate(e,t,r,i,a,o){const s=this;let{nodes:l,kr:u,preventOverlap:c,barnesHut:f}=s;const h=l.length;let d=0;const g=100;let p=e;const m=50;let _=[];const S=[],M=[];for(let R=0;R<h;R+=1)if(_[2*R]=0,_[2*R+1]=0,f){let F={id:R,rx:l[R].x,ry:l[R].y,mass:1,g:u,degree:a[R]};M[R]=new z_(F)}for(;p>0;){for(let F=0;F<h;F+=1)S[2*F]=_[2*F],S[2*F+1]=_[2*F+1],_[2*F]=0,_[2*F+1]=0;_=this.getAttrForces(p,m,i,t,r,a,o,_),f&&(c&&p>m||!c)?_=this.getOptRepGraForces(_,M,a):_=this.getRepGraForces(p,m,_,g,o,a);const R=this.updatePos(_,S,d,a);l=R.nodes,d=R.sg,p--,s.tick&&s.tick()}return l}getAttrForces(e,t,r,i,a,o,s,l){const u=this,{nodes:c,preventOverlap:f,dissuadeHubs:h,mode:d,prune:g}=u;for(let p=0;p<r;p+=1){const m=c[a[p].sourceIdx],_=a[p].sourceIdx,S=c[a[p].targetIdx],M=a[p].targetIdx;if(g&&(o[_]<=1||o[M]<=1))continue;let R=[S.x-m.x,S.y-m.y],F=Math.hypot(R[0],R[1]);F=F<1e-4?1e-4:F,R[0]=R[0]/F,R[1]=R[1]/F,f&&e<t&&(F=F-s[_]-s[M]);let V=F,nt=V;d==="linlog"&&(V=Math.log(1+F),nt=V),h&&(V=F/o[_],nt=F/o[M]),f&&e<t&&F<=0?(V=0,nt=0):f&&e<t&&F>0&&(V=F,nt=F),l[2*i[m.id]]+=V*R[0],l[2*i[S.id]]-=nt*R[0],l[2*i[m.id]+1]+=V*R[1],l[2*i[S.id]+1]-=nt*R[1]}return l}getRepGraForces(e,t,r,i,a,o){const s=this,{nodes:l,preventOverlap:u,kr:c,kg:f,center:h,prune:d}=s,g=l.length;for(let p=0;p<g;p+=1){for(let M=p+1;M<g;M+=1){if(d&&(o[p]<=1||o[M]<=1))continue;let R=[l[M].x-l[p].x,l[M].y-l[p].y],F=Math.hypot(R[0],R[1]);F=F<1e-4?1e-4:F,R[0]=R[0]/F,R[1]=R[1]/F,u&&e<t&&(F=F-a[p]-a[M]);let V=c*(o[p]+1)*(o[M]+1)/F;u&&e<t&&F<0?V=i*(o[p]+1)*(o[M]+1):u&&e<t&&F===0?V=0:u&&e<t&&F>0&&(V=c*(o[p]+1)*(o[M]+1)/F),r[2*p]-=V*R[0],r[2*M]+=V*R[0],r[2*p+1]-=V*R[1],r[2*M+1]+=V*R[1]}let m=[l[p].x-h[0],l[p].y-h[1]];const _=Math.hypot(m[0],m[1]);m[0]=m[0]/_,m[1]=m[1]/_;const S=f*(o[p]+1);r[2*p]-=S*m[0],r[2*p+1]-=S*m[1]}return r}getOptRepGraForces(e,t,r){const i=this,{nodes:a,kg:o,center:s,prune:l}=i,u=a.length;let c=9e10,f=-9e10,h=9e10,d=-9e10;for(let S=0;S<u;S+=1)l&&r[S]<=1||(t[S].setPos(a[S].x,a[S].y),a[S].x>=f&&(f=a[S].x),a[S].x<=c&&(c=a[S].x),a[S].y>=d&&(d=a[S].y),a[S].y<=h&&(h=a[S].y));let g=Math.max(f-c,d-h),p={xmid:(f+c)/2,ymid:(d+h)/2,length:g,massCenter:s,mass:u},m=new vd(p),_=new gd(m);for(let S=0;S<u;S+=1)l&&r[S]<=1||t[S].in(m)&&_.insert(t[S]);for(let S=0;S<u;S+=1){if(l&&r[S]<=1)continue;t[S].resetForce(),_.updateForce(t[S]),e[2*S]-=t[S].fx,e[2*S+1]-=t[S].fy;let M=[a[S].x-s[0],a[S].y-s[1]],R=Math.hypot(M[0],M[1]);R=R<1e-4?1e-4:R,M[0]=M[0]/R,M[1]=M[1]/R;let F=o*(r[S]+1);e[2*S]-=F*M[0],e[2*S+1]-=F*M[1]}return e}updatePos(e,t,r,i){const a=this;let{nodes:o,ks:s,tao:l,prune:u,ksmax:c}=a;const f=o.length;let h=[],d=[],g=0,p=0;for(let _=0;_<f;_+=1){if(u&&i[_]<=1)continue;const S=[e[2*_]-t[2*_],e[2*_+1]-t[2*_+1]],M=Math.hypot(S[0],S[1]),R=[e[2*_]+t[2*_],e[2*_+1]+t[2*_+1]],F=Math.hypot(R[0],R[1]);h[_]=M,d[_]=F/2,g+=(i[_]+1)*h[_],p+=(i[_]+1)*d[_]}let m=r;r=l*p/g,m!==0&&(r=r>1.5*m?1.5*m:r);for(let _=0;_<f;_+=1){if(u&&i[_]<=1)continue;let S=s*r/(1+r*Math.sqrt(h[_])),M=Math.hypot(e[2*_],e[2*_+1]);M=M<1e-4?1e-4:M;const R=c/M;S=S>R?R:S;const F=S*e[2*_],V=S*e[2*_+1];o[_].x+=F,o[_].y+=V}return{nodes:o,sg:r}}}class lut{constructor(e){const t=getLayoutByName(e.type);this.layoutInstance=new t(e)}layout(e){return this.layoutInstance.layout(e)}updateCfg(e){this.layoutInstance.updateCfg(e)}init(e){this.layoutInstance.init(e)}execute(){this.layoutInstance.execute()}getDefaultCfg(){return this.layoutInstance.getDefaultCfg()}destroy(){return this.layoutInstance.destroy()}}const U_=new Proxy({},{get:(n,e)=>oK(e),set:(n,e,t)=>(Ha(e,t),!0)});var ert=x(51036),mm=x.n(ert),eN=Jo.traverseTree,rrt=function(e,t){var r;return e?(0,v.isNumber)(e)?r=function(a){return e}:r=e:r=function(a){return t||1},r},nrt=function(e,t){var r=[],i=[],a={},o=0;for(o=0;o<e.length;o++){var s=e[o];a[s.id]=o,r.push(s.x),r.push(s.y),r.push(0),r.push(0),i.push([])}for(o=0;o<t.length;o++){var l=t[o];i[a[l.source]].push(a[l.target]),i[a[l.target]].push(a[l.source])}var u=0;for(o=0;o<e.length;o++){var c=r.length,f=i[o],h=f.length;r[o*4+2]=c,r[o*4+3]=f.length,u=Math.max(u,f.length);for(var d=0;d<h;++d){var g=f[d];r.push(+g)}}for(;r.length%4!=0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:u}},irt=function(e,t,r){var i=[],a=[],o={},s=0;for(s=0;s<e.length;s++){var l=e[s];o[l.id]=s,i.push(l.x),i.push(l.y),i.push(0),i.push(0),a.push([])}for(s=0;s<t.length;s++){var u=t[s];a[o[u.source]].push(o[u.target]),a[o[u.source]].push(r(u)),a[o[u.target]].push(o[u.source]),a[o[u.target]].push(r(u))}var c=0;for(s=0;s<e.length;s++){var f=i.length,h=a[s],d=h.length;i[s*4+2]=f,i[s*4+3]=d/2,c=Math.max(c,d/2);for(var g=0;g<d;++g){var p=h[g];i.push(+p)}}for(;i.length%4!=0;)i.push(0);return{array:new Float32Array(i),maxEdgePerVetex:c}},art=function(e,t,r,i){var a=[],o=[],s={},l=0;for(l=0;l<e.length;l++){var u=e[l];s[u.id]=l,a.push(u.x),a.push(u.y),a.push(0),a.push(0),o.push([])}for(l=0;l<t.length;l++){var c=t[l];o[s[c.source]].push(s[c.target]),o[s[c.source]].push(r(c)),o[s[c.source]].push(i(c)),o[s[c.source]].push(0),o[s[c.target]].push(s[c.source]),o[s[c.target]].push(r(c)),o[s[c.target]].push(i(c)),o[s[c.target]].push(0)}var f=0;for(l=0;l<e.length;l++){var h=a.length,d=o[l],g=d.length;a[l*4+2]=h+1048576*g/4,a[l*4+3]=0,f=Math.max(f,g/4);for(var p=0;p<g;++p){var m=d[p];a.push(+m)}}for(;a.length%4!=0;)a.push(0);return{array:new Float32Array(a),maxEdgePerVetex:f}},ort=function(e,t){var r=[],i=e.length,a={};return t.forEach(function(o){e.forEach(function(s,l){if(a[o[s]]===void 0&&(a[o[s]]=Object.keys(a).length),r.push(a[o[s]]),l===i-1)for(;r.length%4!=0;)r.push(0)})}),{array:new Float32Array(r),count:Object.keys(a).length}},srt=function(e){for(var t=[],r=e.length,i=e[0].length,a=function(l){e.forEach(function(u,c){if(t.push(u[l]),c===r-1)for(;t.length%4!=0;)t.push(0)})},o=0;o<i;o++)a(o);return new Float32Array(t)},lrt=function(e,t){var r=["V","TB","BT"],i={x:Infinity,y:Infinity},a={x:-Infinity,y:-Infinity},o="x",s="y";t&&r.indexOf(t)>=0&&(s="x",o="y");var l=0;eN(e,function(f){return l++,f.x>a.x&&(a.x=f.x),f.x<i.x&&(i.x=f.x),f.y>a.y&&(a.y=f.y),f.y<i.y&&(i.y=f.y),!0});var u=Math.PI*2/l,c=a[s]-i[s];return c===0||eN(e,function(f){var h=(f[s]-i[s])/c*(Math.PI*2-u)+u,d=Math.abs(o==="x"?f.x-e.x:f.y-e.y);return f.x=d*Math.cos(h),f.y=d*Math.sin(h),!0}),e},rN=function n(){return typeof window=="undefined"||typeof document=="undefined"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl")))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),t},addGetWebGLMessage:function(t){t=t||{};var r=t.parent!==void 0?t.parent:document.body,i=t.id!==void 0?t.id:"oldie",a=n().getWebGLErrorMessage();a.id=i,r.appendChild(a)}}},urt=(0,b.__assign)((0,b.__assign)((0,b.__assign)((0,b.__assign)({},Jo),j),Q),lt),Gl=urt,crt=Gl.radialLayout,frt=function(){function n(e){this.type=e.type,this.radial=e.radial,this.config=e}return n.prototype.init=function(e){var t=this;if(this.data=e,this.radial){this.layoutMethod=function(r){var i=mm()[t.type](r,t.config);return crt(i),i};return}this.layoutMethod=function(r){return mm()[t.type](r,t.config)}},n.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},n.prototype.layout=function(e){return this.init(e),this.execute()},n}(),hrt=frt;Ha("grid",sK),Ha("random",lK),Ha("force",ZK),Ha("circular",t$),Ha("dagre",r$),Ha("radial",z$),Ha("concentric",U$),Ha("mds",W$),Ha("fruchterman",X$),Ha("fruchterman-gpu",Ket),Ha("gForce",uK),Ha("gForce-gpu",Jet),Ha("comboForce",qet),Ha("forceAtlas2",trt);var drt=function(e,t){t.isCustomLayout=!0,Ha(e,t)},vrt=function(){function n(e,t){var r=e.toString(),i=new Blob(["importScripts('"+t+"');("+r+")()"],{type:"text/javascript"});return new Worker(URL.createObjectURL(i))}return n}(),grt=vrt,prt=function(e){e===void 0&&(e="https://unpkg.com/@antv/layout@latest/dist/layout.min.js");function t(){var i={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout);function a(s){var l=s.data.type;return l===i.RUN||l===i.GPURUN}function o(s){var l=this,u=s.data.type;switch(u){case i.RUN:{var c=s.data,f=c.nodes,h=c.edges,d=c.layoutCfg,g=d===void 0?{}:d,p=g.type,m=layout.getLayoutByName(p);if(!m){this.postMessage({type:i.ERROR,message:"layout "+p+" not found"});break}var _;g.onLayoutEnd=function(){l.postMessage({type:i.END,nodes:f}),_==null||_.destroy()},_=new m(g),_.init({nodes:f,edges:h}),_.execute();break}case i.GPURUN:{var S=s.data,M=S.nodes,h=S.edges,R=S.layoutCfg,g=R===void 0?{}:R,F=S.canvas,p=g.type,m=layout.getLayoutByName(p);if(!m){this.postMessage({type:i.ERROR,message:"layout "+p+" not found"});break}if(p.split("-")[1]!=="gpu"){this.postMessage({type:i.ERROR,message:"layout "+p+" does not support GPU"});break}var V=new m(g);V.init({nodes:M,edges:h}),V.executeWithWorker(F,this);break}default:break}}onmessage=function(l){a(l)&&o(l)}}var r=new grt(t,e);return r},pd={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};function xm(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?xm=function(t){return typeof t}:xm=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xm(n)}var nN=function(e){return setTimeout(e,16)},iN=function(e){return clearTimeout(e)},bm={requestAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||nN;return t(e)},cancelAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||iN;return t(e)}},aN=["fruchterman","gForce"],yrt=["force","grid","circular"],mrt=function(n){(0,b.__extends)(e,n);function e(t){var r=n.call(this,t)||this;return r.graph=t,r.layoutCfg=t.get("layout")||{},r.layoutType=r.getLayoutType(),r.worker=null,r.workerData={},r.initLayout(),r}return e.prototype.initLayout=function(){},e.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=prt(this.layoutCfg.workerScriptURL),this.worker)},e.prototype.stopWorker=function(){var t=this.workerData;!this.worker||(this.worker.terminate(),this.worker=null,t.requestId&&(bm.cancelAnimationFrame(t.requestId),t.requestId=null),t.requestId2&&(bm.cancelAnimationFrame(t.requestId2),t.requestId2=null))},e.prototype.execLayoutMethod=function(t,r){var i=this;return new Promise(function(a,o){var s=i.graph,l=t.type;t.onLayoutEnd=function(){s.emit("aftersublayout",{type:l}),a()},l&&i.isGPU&&(i.hasGPUVersion(l)?l=l+"-gpu":console.warn("The '"+l+"' layout does not support GPU calculation for now, it will run in CPU."));var u=l==="force"||l==="g6force"||l==="gForce";if(u){var c=t.onTick,f=function(){c&&c(),s.refreshPositions()};t.tick=f}else t.type==="comboForce"&&(t.comboTrees=s.get("comboTrees"));var h=!1,d;try{d=new U_[l](t)}catch(m){console.warn("The layout method: '"+l+"' does not exist! Please specify it first."),o()}if(h=d.enableTick,h){var g=t.onTick,f=function(){g&&g(),s.refreshPositions()};d.tick=f}var p=i.filterLayoutData(i.data,t);Srt(p,r),d.init(p),s.emit("beforesublayout",{type:l}),d.execute(),d.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),i.layoutMethods[r]=d})},e.prototype.updateLayoutMethod=function(t,r){var i=this;return new Promise(function(a,o){var s=i.graph,l=r==null?void 0:r.type;r.onLayoutEnd=function(){s.emit("aftersublayout",{type:l}),a()};var u=i.filterLayoutData(i.data,r);t.init(u),t.updateCfg(r),s.emit("beforesublayout",{type:l}),t.execute(),t.isCustomLayout&&r.onLayoutEnd&&r.onLayoutEnd()})},e.prototype.layout=function(t){var r=this,i=this.graph;this.data=this.setDataFromGraph();var a=this.data,o=a.nodes,s=a.hiddenNodes;if(!o)return!1;var l=i.get("width"),u=i.get("height"),c={};Object.assign(c,{width:l,height:u,center:[l/2,u/2]},this.layoutCfg),this.layoutCfg=c,this.destoryLayoutMethods(),i.emit("beforelayout"),this.initPositions(c.center,o),this.initPositions(c.center,s);var f=c.type;f&&f.split("-")[1]==="gpu"&&(f=f.split("-")[0],c.gpuEnabled=!0);var h=!1;c.gpuEnabled&&(h=!0,rN().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),h=!1)),this.isGPU=h;var d=c.onLayoutEnd,g=c.layoutEndFormatted,p=c.adjust;if(g||(c.layoutEndFormatted=!0,c.onAllLayoutEnd=function(){return(0,b.__awaiter)(r,void 0,void 0,function(){return(0,b.__generator)(this,function(_){switch(_.label){case 0:return d&&d(),this.refreshLayout(),p&&c.pipes?[4,this.adjustPipesBox(this.data,p)]:[3,2];case 1:_.sent(),this.refreshLayout(),_.label=2;case 2:return i.emit("afterlayout"),[2]}})})}),this.stopWorker(),c.workerEnabled&&this.layoutWithWorker(this.data))return!0;var m=Promise.resolve();return c.type?m=m.then(function(){return r.execLayoutMethod(c,0)}):c.pipes&&c.pipes.forEach(function(_,S){m=m.then(function(){return r.execLayoutMethod(_,S)})}),m.then(function(){c.onAllLayoutEnd&&c.onAllLayoutEnd(),t&&t()}).catch(function(_){console.warn("graph layout failed,",_)}),!1},e.prototype.layoutWithWorker=function(t){var r=this,i=this,a=i.layoutCfg,o=i.graph,s=this.getWorker(),l=this.workerData;if(!s)return!1;l.requestId=null,l.requestId2=null,l.currentTick=null,l.currentTickData=null,o.emit("beforelayout");var u=Promise.resolve();if(a.type)u=u.then(function(){return r.runWebworker(s,t,a)});else if(a.pipes)for(var c=function(p){u=u.then(function(){return r.runWebworker(s,t,p)})},f=0,h=a.pipes;f<h.length;f++){var d=h[f];c(d)}return u.then(function(){a.onAllLayoutEnd&&a.onAllLayoutEnd()}).catch(function(g){console.error("layout failed",g)}),!0},e.prototype.runWebworker=function(t,r,i){var a=this,o=this.isGPU,s=this.filterLayoutData(r,i),l=s.nodes,u=s.edges,c=document.createElement("canvas"),f=o&&typeof window!="undefined"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in c,h=brt(i,function(g){return typeof g!="function"});if(!f)t.postMessage({type:pd.RUN,nodes:l,edges:u,layoutCfg:h});else{var d=c.transferControlToOffscreen();h.type=h.type+"-gpu",t.postMessage({type:pd.GPURUN,nodes:l,edges:u,layoutCfg:h,canvas:d},[d])}return new Promise(function(g,p){t.onmessage=function(m){a.handleWorkerMessage(g,p,m,s,i)}})},e.prototype.handleWorkerMessage=function(t,r,i,a,o){var s=this,l=s.graph,u=s.workerData,c=i.data,f=c.type,h=function(){o.onTick&&o.onTick()};switch(f){case pd.TICK:u.currentTick=c.currentTick,u.currentTickData=c,u.requestId||(u.requestId=bm.requestAnimationFrame(function(){W_(a,c),l.refreshPositions(),h(),c.currentTick===c.totalTicks?t():u.currentTick===c.totalTicks&&(u.requestId2=bm.requestAnimationFrame(function(){W_(a,u.currentTickData),l.refreshPositions(),u.requestId2=null,h(),t()})),u.requestId=null}));break;case pd.END:u.currentTick==null&&(W_(a,c),t());break;case pd.GPUEND:u.currentTick==null&&(_rt(a,c),t());break;case pd.ERROR:console.warn("Web-Worker layout error!",c.message),r();break;default:r();break}},e.prototype.updateLayoutCfg=function(t){var r=this,i=this,a=i.graph,o=i.layoutMethods,s=(0,v.mix)({},this.layoutCfg,t);if(this.layoutCfg=s,!(o==null?void 0:o.length)){this.layout();return}if(this.data=this.setDataFromGraph(),this.stopWorker(),!(t.workerEnabled&&this.layoutWithWorker(this.data))){a.emit("beforelayout");var l=Promise.resolve();o.length===1?l=l.then(function(){return r.updateLayoutMethod(o[0],s)}):o==null||o.forEach(function(u,c){var f=s.pipes[c];l=l.then(function(){return r.updateLayoutMethod(u,f)})}),l.then(function(){s.onAllLayoutEnd&&s.onAllLayoutEnd()}).catch(function(u){console.warn("layout failed",u)})}},e.prototype.adjustPipesBox=function(t,r){var i=this;return new Promise(function(a){var o=t.nodes;(o==null?void 0:o.length)||a(),yrt.includes(r)||(console.warn("The adjust type "+r+" is not supported yet, please assign it with 'force', 'grid', or 'circular'."),a());var s={center:i.layoutCfg.center,nodeSize:function(g){return Math.max(g.height,g.width)},preventOverlap:!0,onLayoutEnd:function(){}},l=i.getLayoutBBox(o),u=l.groupNodes,c=l.layoutNodes,f=(0,v.clone)(c);s.onLayoutEnd=function(){c==null||c.forEach(function(d,g){var p,m,_,S=d.x-((p=f[g])===null||p===void 0?void 0:p.x),M=d.y-((m=f[g])===null||m===void 0?void 0:m.y);(_=u[g])===null||_===void 0||_.forEach(function(R){R.x+=S,R.y+=M})}),a()};var h=new U_[r](s);h.layout({nodes:c})})},e.prototype.hasGPUVersion=function(t){for(var r=aN.length,i=0;i<r;i++)if(aN[i]===t)return!0;return!1},e.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},e}(JT),xrt=mrt;function W_(n,e){for(var t=n.nodes,r=e.nodes,i=t.length,a=0;a<i;a++){var o=t[a];o.x=r[a].x,o.y=r[a].y}}function brt(n,e){var t={};return n&&xm(n)==="object"?(Object.keys(n).forEach(function(r){n.hasOwnProperty(r)&&e(n[r])&&(t[r]=n[r])}),t):n}function _rt(n,e){for(var t=n.nodes,r=e.vertexEdgeData,i=t.length,a=0;a<i;a++){var o=t[a],s=r[4*a],l=r[4*a+1];o.x=s,o.y=l}}function Srt(n,e){var t;if(!!((t=n==null?void 0:n.nodes)===null||t===void 0?void 0:t.length)){var r=n.nodes;r.forEach(function(i){i.layoutOrder=e})}}var oN=Ry,Ert="svg",wrt=function(n){(0,b.__extends)(e,n);function e(t){var r=n.call(this,t)||this,i=r.get("defaultNode");return i||r.set("defaultNode",{type:"circle"}),i.type||(i.type="circle",r.set("defaultNode",i)),r.destroyed=!1,r}return e.prototype.initLayoutController=function(){var t=new xrt(this);this.set({layoutController:t})},e.prototype.initEventController=function(){var t=new eK(this);this.set({eventController:t})},e.prototype.initCanvas=function(){var t=this.get("container");if(typeof t=="string"&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var r=t.clientWidth,i=t.clientHeight,a=this.get("width")||r,o=this.get("height")||i;!this.get("width")&&!this.get("height")&&(this.set("width",r),this.set("height",i));var s=this.get("renderer"),l;if(s===Ert)l=new Ph({container:t,width:a,height:o});else{var u={container:t,width:a,height:o},c=this.get("pixelRatio");c&&(u.pixelRatio=c),l=new Al(u)}this.set("canvas",l)},e.prototype.initPlugins=function(){var t=this;(0,v.each)(t.get("plugins"),function(r){!r.destroyed&&r.initPlugin&&r.initPlugin(t)})},e.prototype.downloadImageWatermark=function(t,r,i,a){return(0,b.__awaiter)(this,void 0,void 0,function(){var o,s,l;return(0,b.__generator)(this,function(u){switch(u.label){case 0:return o=t.style.backgroundImage,s=o.slice(5,o.length-2),l=new Image,l.src=s,[4,new Promise(function(c){l.onload=function(){var f=r.createPattern(l,"repeat");r.rect(0,0,i,a),r.fillStyle=f,r.fill(),c("")}})];case 1:return u.sent(),[2]}})})},e.prototype.asyncToDataUrl=function(t,r,i,a,o,s){var l=this,u=document.querySelector(".g6-graph-watermarker"),c=this.get("canvas"),f=c.getRenderer(),h=s||c.get("el"),d="";t||(t="image/png"),setTimeout(function(){return(0,b.__awaiter)(l,void 0,void 0,function(){var g,p,m,_,S,M,R,F,V,nt;return(0,b.__generator)(this,function(at){switch(at.label){case 0:return f!=="svg"?[3,1]:(g=h.cloneNode(!0),p=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),m=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",p),m.replaceChild(g,m.documentElement),_=new XMLSerializer().serializeToString(m),d="data:image/svg+xml;charset=utf8,"+encodeURIComponent(_),[3,4]);case 1:return S=void 0,M=h.getContext("2d"),R=a||this.get("width"),F=o||this.get("height"),V=void 0,u?[4,this.downloadImageWatermark(u,M,R,F)]:[3,3];case 2:at.sent(),at.label=3;case 3:r&&(nt=typeof window!="undefined"?window.devicePixelRatio:1,S=M.getImageData(0,0,R*nt,F*nt),V=M.globalCompositeOperation,M.globalCompositeOperation="destination-over",M.fillStyle=r,M.fillRect(0,0,R,F)),d=h.toDataURL(t),r&&(M.clearRect(0,0,R,F),M.putImageData(S,0,0),M.globalCompositeOperation=V),at.label=4;case 4:return i&&i(d),[2]}})})},16)},e.prototype.toDataURL=function(t,r){var i=this.get("canvas"),a=i.getRenderer(),o=i.get("el");t||(t="image/png");var s="";if(a==="svg"){var l=o.cloneNode(!0),u=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),c=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",u);c.replaceChild(l,c.documentElement);var f=new XMLSerializer().serializeToString(c);s="data:image/svg+xml;charset=utf8,"+encodeURIComponent(f)}else{var h=void 0,d=o.getContext("2d"),g=this.get("width"),p=this.get("height"),m=void 0;if(r){var _=typeof window!="undefined"?window.devicePixelRatio:1;h=d.getImageData(0,0,g*_,p*_),m=d.globalCompositeOperation,d.globalCompositeOperation="destination-over",d.fillStyle=r,d.fillRect(0,0,g,p)}s=o.toDataURL(t),r&&(d.clearRect(0,0,g,p),d.putImageData(h,0,0),d.globalCompositeOperation=m)}return s},e.prototype.toFullDataURL=function(t,r,i){var a=this.get("group").getCanvasBBox(),o=a.height,s=a.width,l=this.get("renderer"),u=rt('<id="virtual-image"></div>'),c=i?i.backgroundColor:void 0,f=i?i.padding:void 0;f?(0,v.isNumber)(f)&&(f=[f,f,f,f]):f=[0,0,0,0];var h=o+f[0]+f[2],d=s+f[1]+f[3],g={container:u,height:h,width:d,quickHit:!0},p=l==="svg"?new Ph(g):new Al(g),m=this.get("group"),_=m.clone(),S=(0,v.clone)(_.getMatrix());S||(S=[1,0,0,0,1,0,0,0,1]);var M=(a.maxX+a.minX)/2,R=(a.maxY+a.minY)/2;S=oN(S,[["t",-M,-R],["t",s/2+f[3],o/2+f[0]]]),_.resetMatrix(),_.setMatrix(S),p.add(_);var F=p.get("el"),V="";r||(r="image/png"),setTimeout(function(){if(l==="svg"){var nt=F.cloneNode(!0),at=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),xt=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",at);xt.replaceChild(nt,xt.documentElement);var gt=new XMLSerializer().serializeToString(xt);V="data:image/svg+xml;charset=utf8,"+encodeURIComponent(gt)}else{var Tt=void 0,Ct=F.getContext("2d"),te=void 0;if(c){var Kt=typeof window!="undefined"?window.devicePixelRatio:1;Tt=Ct.getImageData(0,0,d*Kt,h*Kt),te=Ct.globalCompositeOperation,Ct.globalCompositeOperation="destination-over",Ct.fillStyle=c,Ct.fillRect(0,0,d,h)}V=F.toDataURL(r),c&&(Ct.clearRect(0,0,d,h),Ct.putImageData(Tt,0,0),Ct.globalCompositeOperation=te)}t&&t(V)},16)},e.prototype.downloadFullImage=function(t,r,i){var a=this,o=this.get("group").getCanvasBBox(),s=o.height,l=o.width,u=this.get("renderer"),c=rt('<id="virtual-image"></div>'),f=document.querySelector(".g6-graph-watermarker"),h=i?i.backgroundColor:void 0,d=i?i.padding:void 0;d?(0,v.isNumber)(d)&&(d=[d,d,d,d]):d=[0,0,0,0];var g=s+d[0]+d[2],p=l+d[1]+d[3];if(f){var m=this.get("graphWaterMarker").cfg||{},_=m.width,S=m.height;g=Math.ceil(g/S)*S,p=Math.ceil(p/_)*_}var M={container:c,height:g,width:p},R=u==="svg"?new Ph(M):new Al(M),F=this.get("group"),V=F.clone(),nt=(0,v.clone)(V.getMatrix());nt||(nt=[1,0,0,0,1,0,0,0,1]);var at=(o.maxX+o.minX)/2,xt=(o.maxY+o.minY)/2;nt=oN(nt,[["t",-at,-xt],["t",l/2+d[3],s/2+d[0]]]),V.resetMatrix(),V.setMatrix(nt),R.add(V);var gt=R.get("el");r||(r="image/png"),this.asyncToDataUrl(r,h,function(Tt){var Ct=document.createElement("a"),te=(t||"graph")+(u==="svg"?".svg":"."+r.split("/")[1]);a.dataURLToImage(Tt,u,Ct,te);var Kt=document.createEvent("MouseEvents");Kt.initEvent("click",!1,!1),Ct.dispatchEvent(Kt)},p,g,gt)},e.prototype.downloadImage=function(t,r,i){var a=this,o=this;o.isAnimating()&&o.stopAnimate();var s=o.get("canvas"),l=s.getRenderer();r||(r="image/png");var u=(t||"graph")+(l==="svg"?".svg":r.split("/")[1]),c=document.createElement("a");o.asyncToDataUrl(r,i,function(f){a.dataURLToImage(f,l,c,u);var h=document.createEvent("MouseEvents");h.initEvent("click",!1,!1),c.dispatchEvent(h)})},e.prototype.dataURLToImage=function(t,r,i,a){if(typeof window!="undefined")if(window.Blob&&window.URL&&r!=="svg"){var o=t.split(","),s="";if(o&&o.length>0){var l=o[0].match(/:(.*?);/);l&&l.length>=2&&(s=l[1])}for(var u=atob(o[1]),c=u.length,f=new Uint8Array(c);c--;)f[c]=u.charCodeAt(c);var h=new Blob([f],{type:s});window.navigator.msSaveBlob?window.navigator.msSaveBlob(h,a):i.addEventListener("click",function(){i.download=a,i.href=window.URL.createObjectURL(h)})}else i.addEventListener("click",function(){i.download=a,i.href=t})},e.prototype.addPlugin=function(t){var r=this;t.destroyed||(r.get("plugins").push(t),t.initPlugin(r))},e.prototype.removePlugin=function(t){var r=this.get("plugins"),i=r.indexOf(t);i>=0&&(t.destroyPlugin(),r.splice(i,1))},e.prototype.setImageWaterMarker=function(t,r){t===void 0&&(t=sf.waterMarkerImage);var i=this.get("container");(0,v.isString)(i)&&(i=document.getElementById(i)),i.style.position||(i.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,v.deepMix)({},sf.imageWaterMarkerConfig,r),s=o.width,l=o.height,u=o.compatible,c=o.image;if(!a){var f={container:i,width:s,height:l,capture:!1},h=this.get("pixelRatio");h&&(f.pixelRatio=h),a=new Al(f),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var d=a.get("context"),g=c.rotate,p=c.x,m=c.y;d.rotate(-g*Math.PI/180);var _=new Image;_.crossOrigin="anonymous",_.src=t,_.onload=function(){if(d.drawImage(_,p,m,c.width,c.height),d.rotate(g*Math.PI/180),u)i.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var S=document.querySelector(".g6-graph-watermarker");S||(S=document.createElement("div"),S.className="g6-graph-watermarker"),S.className="g6-graph-watermarker",a.destroyed||(S.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;",i.appendChild(S))}}},e.prototype.setTextWaterMarker=function(t,r){var i=this.get("container");(0,v.isString)(i)&&(i=document.getElementById(i)),i.style.position||(i.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,v.deepMix)({},sf.textWaterMarkerConfig,r),s=o.width,l=o.height,u=o.compatible,c=o.text;if(!a){var f={container:i,width:s,height:l,capture:!1},h=this.get("pixelRatio");h&&(f.pixelRatio=h),a=new Al(f),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var d=a.get("context"),g=c.rotate,p=c.fill,m=c.fontFamily,_=c.fontSize,S=c.baseline,M=c.x,R=c.y,F=c.lineHeight;d.rotate(-g*Math.PI/180),d.font=_+"px "+m,d.fillStyle=p,d.textBaseline=S;for(var V=t.length-1;V>=0;V--)d.fillText(t[V],M,R+V*F);if(d.rotate(g*Math.PI/180),u)i.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var nt=document.querySelector(".g6-graph-watermarker");nt||(nt=document.createElement("div"),nt.className="g6-graph-watermarker"),nt.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;",i.appendChild(nt)}},e.prototype.destroy=function(){(0,v.each)(this.get("plugins"),function(o){o.destroyPlugin()});var t=this.get("tooltips");if(t)for(var r=0;r<t.length;r++){var i=t[r];if(!!i){var a=i.parentElement;!a||a.removeChild(i)}}this.get("eventController").destroy(),this.get("layoutController").destroy(),this.get("graphWaterMarker")&&this.get("graphWaterMarker").destroy(),document.querySelector(".g6-graph-watermarker")&&document.querySelector(".g6-graph-watermarker").remove(),n.prototype.destroy.call(this)},e}(jT),sN=wrt,Crt=Gl.radialLayout,Mrt=Gl.traverseTree,Art=function(n){(0,b.__extends)(e,n);function e(t){var r=n.call(this,t)||this;return r.layoutAnimating=!1,r.set("removeList",[]),r.set("layoutMethod",r.getLayout()),r}return e.prototype.getLayout=function(){var t=this.get("layout");return t?typeof t=="function"?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction="TB"),t.radial?function(r){var i=mm()[t.type](r,t);return Crt(i),i}:function(r){return mm()[t.type](r,t)}):null},e.indexOfChild=function(t,r){var i=-1;return(0,v.each)(t,function(a,o){if(r===a.id)return i=o,!1}),i},e.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return t.animate=!0,t},e.prototype.innerAddChild=function(t,r,i){var a=this,o=t.data;o&&(o.x=t.x,o.y=t.y,o.depth=t.depth);var s=a.addItem("node",o,!1);if(r){if(s.set("parent",r),i){var l=r.get("originAttrs");if(l)s.set("originAttrs",l);else{var u=r.getModel();s.set("originAttrs",{x:u.x,y:u.y})}}var c=r.get("children");c?c.push(s):r.set("children",[s]),a.addItem("edge",{source:r.get("id"),target:s.get("id"),id:r.get("id")+":"+s.get("id")},!1)}return(0,v.each)(t.children||[],function(f){a.innerAddChild(f,s,i)}),a.emit("afteraddchild",{item:s,parent:r}),s},e.prototype.innerUpdateChild=function(t,r,i){var a=this,o=a.findById(t.id);if(!o){a.innerAddChild(t,r,i);return}(0,v.each)(t.children||[],function(g){a.innerUpdateChild(g,o,i)});var s=o.get("children");if(s){var l=s.length;if(l>0)for(var u=s.length-1;u>=0;u--){var c=s[u].getModel();e.indexOfChild(t.children||[],c.id)===-1&&(a.innerRemoveChild(c.id,{x:t.x,y:t.y},i),s.splice(u,1))}}var f,h;o.get("originAttrs")&&(f=o.get("originAttrs").x,h=o.get("originAttrs").y);var d=o.getModel();i&&o.set("originAttrs",{x:d.x,y:d.y}),o.set("model",t.data),(f!==t.x||h!==t.y)&&o.updatePosition({x:t.x,y:t.y})},e.prototype.innerRemoveChild=function(t,r,i){var a=this,o=a.findById(t);if(!!o)if((0,v.each)(o.get("children"),function(l){a.innerRemoveChild(l.getModel().id,r,i)}),i){var s=o.getModel();o.set("to",r),o.set("originAttrs",{x:s.x,y:s.y}),a.get("removeList").push(o)}else a.removeItem(o,!1)},e.prototype.changeData=function(t){var r=this;this.getNodes().map(function(i){return r.clearItemStates(i)}),this.getEdges().map(function(i){return r.clearItemStates(i)}),t?(r.data(t),r.render()):r.layout(this.get("fitView"))},e.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var r=this;r.updateLayout(t)},e.prototype.updateLayout=function(t){var r=this;if(!t){console.warn("layout cannot be null");return}r.set("layout",t),r.set("layoutMethod",r.getLayout()),r.layout()},e.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var r=this;r.layout(t)},e.prototype.layout=function(t){var r=this,i=r.get("data"),a=r.get("layoutMethod"),o=a?a(i,r.get("layout")):i,s=r.get("animate");if(r.emit("beforerefreshlayout",{data:i,layoutData:o}),r.emit("beforelayout"),r.innerUpdateChild(o,void 0,s),t){var l=r.get("viewController");l.fitView()}s?r.layoutAnimate(o):(r.refresh(),r.paint()),r.emit("afterrefreshlayout",{data:i,layoutData:o}),r.emit("afterlayout")},e.prototype.addChild=function(t,r){var i=this;i.emit("beforeaddchild",{model:t,parent:r}),(0,v.isString)(r)||(r=r.get("id"));var a=i.findDataById(r);a&&(a.children||(a.children=[]),a.children.push(t),i.changeData())},e.prototype.updateChildren=function(t,r){var i=this;if(!r||!i.findById(r)){console.warn("Update children failed! There is no node with id '"+r+"'");return}var a=i.findDataById(r);a.children=t,i.changeData()},e.prototype.updateChild=function(t,r){var i=this;if(!r||!i.findById(r)){i.changeData(t);return}var a=i.findDataById(r),o=i.findById(t.id);if(a.children||(a.children=[]),!o)a.children.push(t);else{var s=e.indexOfChild(a.children,t.id);a.children[s]=t}i.changeData()},e.prototype.removeChild=function(t){var r=this,i=r.findById(t);if(!!i){var a=i.get("parent");if(a&&!a.destroyed){var o=r.findDataById(a.get("id")),s=o&&o.children||[],l=i.getModel(),u=e.indexOfChild(s,l.id);s.splice(u,1)}r.changeData()}},e.prototype.findDataById=function(t,r){var i=this;if(r||(r=i.get("data")),t===r.id)return r;var a=null;return(0,v.each)(r.children||[],function(o){if(o.id===t)return a=o,!1;if(a=i.findDataById(t,o),a)return!1}),a},e.prototype.layoutAnimate=function(t,r){var i=this,a=this.get("animateCfg");i.emit("beforeanimate",{data:t}),i.getEdges().forEach(function(o){var s=o.get("model");s.sourceAnchor||(s.sourceAnchor=o.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(o){Mrt(t,function(s){var l=i.findById(s.id);if(l){var u=l.get("originAttrs"),c=l.get("model");if(u||(u={x:c.x,y:c.y},l.set("originAttrs",u)),r){var f=r(l,o,u,t);l.set("model",Object.assign(c,f))}else c.x=u.x+(s.x-u.x)*o,c.y=u.y+(s.y-u.y)*o}return!0}),(0,v.each)(i.get("removeList"),function(s){var l=s.getModel(),u=s.get("originAttrs"),c=s.get("to");l.x=u.x+(c.x-u.x)*o,l.y=u.y+(c.y-u.y)*o}),i.refreshPositions()},{duration:a.duration,easing:a.ease,callback:function(){(0,v.each)(i.getNodes(),function(s){s.set("originAttrs",null)}),(0,v.each)(i.get("removeList"),function(s){i.removeItem(s)}),i.set("removeList",[]),a.callback&&a.callback(),i.emit("afteranimate",{data:t})},delay:a.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(){var t=this,r=t.get("data");if(!r||!(0,v.isObject)(r)||!Object.keys(r).length)throw new Error("data must be defined first");t.clear(),t.emit("beforerender"),t.layout(this.get("fitView")),t.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e}(sN),Trt=Art,Irt=function(){function n(e){this._cfgs=(0,v.deepMix)(this.getDefaultCfgs(),e),this._events={},this.destroyed=!1}return n.prototype.getDefaultCfgs=function(){return{}},n.prototype.initPlugin=function(e){var t=this;t.set("graph",e);var r=t.getEvents(),i={};(0,v.each)(r,function(a,o){var s=(0,v.wrapBehavior)(t,a);i[o]=s,e.on(o,s)}),this._events=i,this.init()},n.prototype.getEvents=function(){return{}},n.prototype.get=function(e){return this._cfgs[e]},n.prototype.set=function(e,t){this._cfgs[e]=t},n.prototype.destroy=function(){},n.prototype.destroyPlugin=function(){this.destroy();var e=this.get("graph"),t=this._events;(0,v.each)(t,function(r,i){e.off(i,r)}),this._events=null,this._cfgs=null,this.destroyed=!0},n}(),Oo=Irt,Ort=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),lN="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",Prt=function(n){Ort(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfgs=function(){return{img:lN,follow:!0}},e.prototype.init=function(){var t=this.get("graph"),r=t.get("container"),i=t.get("canvas").get("el"),a=this.get("img")||lN,o=rt(`<div class='g6-grid-container' style="position:absolute;overflow:hidden;z-index: -1;"></div>`),s=rt(`<div
        class='g6-grid'
        style='position:absolute;
        background-image: `+a+`;
        user-select: none
        '></div>`);this.set("container",o),this.set("gridContainer",s),this.positionInit(),o.appendChild(s),r.insertBefore(o,i)},e.prototype.positionInit=function(){var t=this.get("graph"),r=t.get("minZoom"),i=t.get("width"),a=t.get("height");ct(this.get("container"),{width:i+"px",height:a+"px"});var o=i*80/r,s=a*80/r;ct(this.get("gridContainer"),{width:o+"px",height:s+"px",left:"-"+o/2+"px",top:"-"+s/2+"px"})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(t){var r=this.get("gridContainer"),i=t.matrix;i||(i=[1,0,0,0,1,0,0,0,1]);var a=this.get("follow"),o="matrix("+i[0]+", "+i[1]+", "+i[3]+", "+i[4]+", "+(a?i[6]:"0")+", "+(a?i[7]:"0")+")";ct(r,{transform:o})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t=this.get("graph"),r=t.get("container"),i=this.get("container");r.removeChild(i)},e}(Oo),Drt=Prt,Lrt=x(34508),V_=x.n(Lrt),Rrt=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();V_()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var Nrt=function(n){Rrt(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(r){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(r){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=this.get("className"),r=rt("<div class="+(t||"g6-component-contextmenu")+"></div>");ct(r,{top:"0px",position:"absolute",visibility:"hidden"});var i=this.get("container");i||(i=this.get("graph").get("container")),(0,v.isString)(i)&&(i=document.getElementById(i)),i.appendChild(r),this.set("menu",r)},e.prototype.onMenuShow=function(t){var r=this;t.preventDefault(),t.stopPropagation();var i=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&i.indexOf(t.item.getType())===-1){r.onMenuHide();return}}else if(i.indexOf("canvas")===-1){r.onMenuHide();return}var a=this.get("shouldBegin");if(!!a(t)){var o=this.get("menu"),s=this.get("getContent"),l=this.get("graph"),u=s(t,l);(0,v.isString)(u)?o.innerHTML=u:o.innerHTML=u.outerHTML,this.removeMenuEventListener();var c=this.get("handleMenuClick");if(c){var f=function(at){c(at.target,t.item,l)};this.set("handleMenuClickWrapper",f),o.addEventListener("click",f)}var h=l.get("width"),d=l.get("height"),g=o.getBoundingClientRect(),p=this.get("offsetX")||0,m=this.get("offsetY")||0,_=l.getContainer().offsetTop,S=l.getContainer().offsetLeft,M=t.canvasX+S+p,R=t.canvasY+_+m;M+g.width>h&&(M=t.canvasX-g.width-p+S),R+g.height>d&&(R=t.canvasY-g.height-m+_),ct(o,{top:R+"px",left:M+"px",visibility:"visible"});var F=this.get("trigger")==="click",V=function(at){if(F){F=!1;return}r.onMenuHide()};document.body.addEventListener("click",V),this.set("handler",V)}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),r=this.get("handler");if(t){var i=this.get("menu");i.removeEventListener("click",t),this.set("handleMenuClickWrapper",null)}r&&document.body.removeEventListener("click",r)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&ct(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,v.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(Oo),krt=Nrt,Brt=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),X_=function(){return X_=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},X_.apply(this,arguments)},uN=Math.max,Frt=Ry,Grt="default",zrt="keyShape",Urt="delegate",cN="svg",Wrt=function(n){Brt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.handleUpdateCanvas=(0,v.debounce)(function(r){var i=t;i.destroyed||i.updateCanvas()},100,!1),t}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,i=r.size,a=r.graph;if(!this.destroyed){var o=this.get("canvas"),s=o.get("container"),l=rt(`
      <div
        class=`+r.viewportClassName+`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff'
        draggable=true>
      </div>`),u=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,c=0,f=0,h=!1,d=0,g=0,p=0,m=0,_=0,S=0;l.addEventListener("dragstart",function(M){var R,F;if(M.dataTransfer){var V=new Image;V.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(F=(R=M.dataTransfer).setDragImage)===null||F===void 0||F.call(R,V,0,0);try{M.dataTransfer.setData("text/html","view-port-minimap")}catch(at){M.dataTransfer.setData("text","view-port-minimap")}}if(r.refresh=!1,M.target===l){var nt=l.style;d=parseInt(nt.left,10),g=parseInt(nt.top,10),p=parseInt(nt.width,10),m=parseInt(nt.height,10),!(p>i[0]||m>i[1])&&(S=a.getZoom(),_=t.get("ratio"),h=!0,c=M.clientX,f=M.clientY)}},!1),l.addEventListener(u?"dragover":"drag",function(M){if(!(!h||(0,v.isNil)(M.clientX)||(0,v.isNil)(M.clientY))){var R=c-M.clientX,F=f-M.clientY;(d-R<0||d-R+p>=i[0])&&(R=0),(g-F<0||g-F+m>=i[1])&&(F=0),d-=R,g-=F,ct(l,{left:d+"px",top:g+"px"}),a.translate(R*S/_,F*S/_),c=M.clientX,f=M.clientY}},!1),l.addEventListener("dragend",function(){h=!1,r.refresh=!0},!1),this.set("viewport",l),s.appendChild(l)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("dx"),i=this.get("dy"),a=this.get("totaldx"),o=this.get("totaldy"),s=this.get("graph"),l=this.get("size"),u=s.get("width"),c=s.get("height"),f=s.getPointByCanvas(0,0),h=s.getPointByCanvas(u,c),d=this.get("viewport");d||this.initViewport();var g=(h.x-f.x)*t,p=(h.y-f.y)*t,m=f.x*t+a,_=f.y*t+o,S=m+g,M=_+p;m<0&&(g+=m,m=0),S>l[0]&&(g=g-(S-l[0])),_<0&&(p+=_,_=0),M>l[1]&&(p=p-(M-l[1])),this.set("ratio",t);var R=m+"px",F=_+"px";ct(d,{left:R,top:F,width:g+"px",height:p+"px"})}},e.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,r=this.get("canvas"),i=t.get("group");if(!i.destroyed){var a=i.clone();a.resetMatrix(),r.clear(),r.add(a);var o=t.get("renderer");o===cN&&this.updateVisible(a)}},e.prototype.updateVisible=function(t){var r=this;if(!t.isGroup()&&!t.get("visible"))t.hide();else{var i=t.get("children");if(!i||!i.length)return;i.forEach(function(a){a.get("visible")||a.hide(),r.updateVisible(a)})}},e.prototype.updateKeyShapes=function(){var t=this,r=this._cfgs.graph,i=this.get("canvas"),a=i.get("children")[0]||i.addGroup();(0,v.each)(r.getEdges(),function(l){t.updateOneEdgeKeyShape(l,a)}),(0,v.each)(r.getNodes(),function(l){t.updateOneNodeKeyShape(l,a)});var o=r.getCombos();if(o&&o.length){var s=a.find(function(l){return l.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){(0,v.each)(o,function(l){t.updateOneComboKeyShape(l,s)}),s.sort(),s.toBack()},250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(t,r){var i=this.get("itemMap")||{},a=i[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),l=s.attr(),u={x:o.centerX,y:o.centerY};a?u=Object.assign(l,u):(a=s,r.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(u.x=o.minX,u.y=o.minY),a.attr(u),t.isVisible()?a.show():a.hide(),a.exist=!0;var f=t.getModel().depth;isNaN(f)||a.set("zIndex",f),i[t.get("id")]=a,this.set("itemMap",i)},e.prototype.updateOneNodeKeyShape=function(t,r){var i=this.get("itemMap")||{},a=i[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),l=s.attr(),u={x:o.centerX,y:o.centerY};a?u=Object.assign(l,u):(a=s,r.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(u.x=o.minX,u.y=o.minY),a.attr(u),t.isVisible()?a.show():a.hide(),a.exist=!0;var f=t.getModel().depth;isNaN(f)||a.set("zIndex",f),i[t.get("id")]=a,this.set("itemMap",i)},e.prototype.updateDelegateShapes=function(){var t=this,r=this._cfgs.graph,i=this.get("canvas"),a=i.get("children")[0]||i.addGroup();(0,v.each)(r.getEdges(),function(l){t.updateOneEdgeKeyShape(l,a)}),(0,v.each)(r.getNodes(),function(l){t.updateOneNodeDelegateShape(l,a)});var o=r.getCombos();if(o&&o.length){var s=a.find(function(l){return l.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){(0,v.each)(o,function(l){t.updateOneComboKeyShape(l,s)}),s.sort(),s.toBack()},250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},r=Object.keys(t);if(!(!r||r.length===0))for(var i=r.length-1;i>=0;i--){var a=t[r[i]],o=a.exist;a.exist=!1,o||(a.remove(),delete t[r[i]])}},e.prototype.updateOneEdgeKeyShape=function(t,r){var i=this.get("itemMap")||{},a=i[t.get("id")];if(a){var o=t.get("keyShape").attr("path");a.attr("path",o)}else a=t.get("keyShape").clone(),r.add(a);t.isVisible()?a.show():a.hide(),a.exist=!0,i[t.get("id")]=a,this.set("itemMap",i)},e.prototype.updateOneNodeDelegateShape=function(t,r){var i=this.get("delegateStyle"),a=this.get("itemMap")||{},o=a[t.get("id")],s=t.getBBox();if(o){var l={x:s.minX,y:s.minY,width:s.width,height:s.height};o.attr(l)}else o=r.addShape("rect",{attrs:X_({x:s.minX,y:s.minY,width:s.width,height:s.height},i),name:"minimap-node-shape"});t.isVisible()?o.show():o.hide(),o.exist=!0,a[t.get("id")]=o,this.set("itemMap",a)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),i=t.get("size"),a=t.get("className"),o=t.get("container"),s=rt("<div class='"+a+"' style='width: "+i[0]+"px; height: "+i[1]+"px; overflow: hidden'></div>");(0,v.isString)(o)&&(o=document.getElementById(o)),o?o.appendChild(s):r.get("container").appendChild(s),t.set("container",s);var l=rt('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(l),l.addEventListener("dragenter",function(f){f.preventDefault()}),l.addEventListener("dragover",function(f){f.preventDefault()});var u,c=r.get("renderer");c===cN?u=new Ph({container:l,width:i[0],height:i[1]}):u=new Al({container:l,width:i[0],height:i[1]}),t.set("canvas",u),t.updateCanvas()},e.prototype.updateCanvas=function(){var t=this.get("refresh");if(!!t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var i=this.get("size"),a=this.get("canvas"),o=this.get("type"),s=this.get("padding");if(!a.destroyed){switch(o){case Grt:this.updateGraphShapes();break;case zrt:this.updateKeyShapes();break;case Urt:this.updateDelegateShapes();break;default:break}var l=a.get("children")[0];if(!!l){l.resetMatrix();var u=l.getCanvasBBox(),c=r.get("canvas").getCanvasBBox(),f=r.getZoom()||1,h=c.width/f,d=c.height/f;Number.isFinite(u.width)&&(h=uN(u.width,h),d=uN(u.height,d)),h+=2*s,d+=2*s;var g=Math.min(i[0]/h,i[1]/d),p=[1,0,0,0,1,0,0,0,1],m=0,_=0;Number.isFinite(u.minX)&&(m=-u.minX),Number.isFinite(u.minY)&&(_=-u.minY);var S=(i[0]-(h-2*s)*g)/2,M=(i[1]-(d-2*s)*g)/2;p=Frt(p,[["t",m,_],["s",g,g],["t",S,M]]),l.setMatrix(p),this.set("ratio",g),this.set("totaldx",S+m*g),this.set("totaldy",M+_*g),this.set("dx",S),this.set("dy",M),this.updateViewport()}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){this.get("canvas").destroy();var t=this.get("container");t.parentNode.removeChild(t)},e}(Oo),Vrt=Wrt,Xrt=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function qs(n,e,t){var r=n.x-e.x,i=n.y-e.y;return!t||Math.abs(r)>t||Math.abs(i)>t?Math.sqrt(r*r+i*i):t}function Yrt(n,e){return n.x*e.x+n.y*e.y}function fN(n,e){var t=(e.source.y-e.target.y)/(e.source.x-e.target.x),r=(t*t*e.source.x+t*(n.y-e.source.y)+n.x)/(t*t+1),i=t*(r-e.source.x)+e.source.y;return{x:r,y:i}}var Hrt=function(n){Xrt(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var t=this.get("graph"),r=this.get("onTick"),i=function(){r&&r(),t.refreshPositions()};this.set("tick",i)},e.prototype.bundling=function(t){var r=this;if(r.set("data",t),!r.isTicking()){var i=t.edges||[],a=t.nodes||[],o={},s=!1;if(a.forEach(function(R){(R.x===null||!R.y===null||R.x===void 0||!R.y===void 0)&&(s=!0),o[R.id]=R}),s)throw new Error("please layout the graph or assign x and y for nodes first");r.set("nodeIdMap",o);var l=r.get("divisions"),u=r.get("divRate"),c=r.divideEdges(l);r.set("edgePoints",c);var f=r.getEdgeBundles();r.set("edgeBundles",f);for(var h=r.get("cycles"),d=r.get("iterations"),g=r.get("iterRate"),p=r.get("lambda"),m=0;m<h;m++){for(var _=function(F){var V=[];i.forEach(function(nt,at){if(nt.source!==nt.target){var xt=o[nt.source],gt=o[nt.target];V[at]=r.getEdgeForces({source:xt,target:gt},at,l,p);for(var Tt=0;Tt<l+1;Tt++)c[at][Tt].x+=V[at][Tt].x,c[at][Tt].y+=V[at][Tt].y}})},S=0;S<d;S++)_(S);p=p/2,l*=u,d*=g,c=r.divideEdges(l),r.set("edgePoints",c)}i.forEach(function(R,F){R.source!==R.target&&(R.type="polyline",R.controlPoints=c[F].slice(1,c[F].length-1))});var M=r.get("graph");M.refresh()}},e.prototype.updateBundling=function(t){var r=this,i=t.data;if(i&&r.set("data",i),r.get("ticking")&&r.set("ticking",!1),Object.keys(t).forEach(function(o){r.set(o,t[o])}),t.onTick){var a=this.get("graph");r.set("tick",function(){t.onTick(),a.refresh()})}r.bundling(i)},e.prototype.divideEdges=function(t){var r=this,i=r.get("data").edges,a=r.get("nodeIdMap"),o=r.get("edgePoints");return(!o||o===void 0)&&(o=[]),i.forEach(function(s,l){(!o[l]||o[l]===void 0)&&(o[l]=[]);var u=a[s.source],c=a[s.target];if(t===1)o[l].push({x:u.x,y:u.y}),o[l].push({x:.5*(u.x+c.x),y:.5*(u.y+c.y)}),o[l].push({x:c.x,y:c.y});else{var f=0;!o[l]||o[l]===[]?f=qs({x:u.x,y:u.y},{x:c.x,y:c.y}):f=r.getEdgeLength(o[l]);var h=f/(t+1),d=h,g=[{x:u.x,y:u.y}];o[l].forEach(function(p,m){if(m!==0){for(var _=qs(p,o[l][m-1]);_>d;){var S=d/_,M={x:o[l][m-1].x,y:o[l][m-1].y};M.x+=S*(p.x-o[l][m-1].x),M.y+=S*(p.y-o[l][m-1].y),g.push(M),_-=d,d=h}d-=_}}),g.push({x:c.x,y:c.y}),o[l]=g}}),o},e.prototype.getEdgeLength=function(t){var r=0;return t.forEach(function(i,a){a!==0&&(r+=qs(i,t[a-1]))}),r},e.prototype.getEdgeBundles=function(){var t=this,r=t.get("data"),i=r.edges||[],a=t.get("bundleThreshold"),o=t.get("nodeIdMap"),s=t.get("edgeBundles");return s||(s=[]),i.forEach(function(l,u){(!s[u]||s[u]===void 0)&&(s[u]=[])}),i.forEach(function(l,u){var c=o[l.source],f=o[l.target];i.forEach(function(h,d){if(!(d<=u)){var g=o[h.source],p=o[h.target],m=t.getBundleScore({source:c,target:f},{source:g,target:p});m>=a&&(s[u].push(d),s[d].push(u))}})}),s},e.prototype.getBundleScore=function(t,r){var i=this;t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,r.vx=r.target.x-r.source.x,r.vy=r.target.y-r.source.y,t.length=qs({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),r.length=qs({x:r.source.x,y:r.source.y},{x:r.target.x,y:r.target.y});var a=i.getAngleScore(t,r),o=i.getScaleScore(t,r),s=i.getPositionScore(t,r),l=i.getVisibilityScore(t,r);return a*o*s*l},e.prototype.getAngleScore=function(t,r){var i=Yrt({x:t.vx,y:t.vy},{x:r.vx,y:r.vy});return i/(t.length*r.length)},e.prototype.getScaleScore=function(t,r){var i=(t.length+r.length)/2,a=2/(i/Math.min(t.length,r.length)+Math.max(t.length,r.length)/i);return a},e.prototype.getPositionScore=function(t,r){var i=(t.length+r.length)/2,a={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},o={x:(r.source.x+r.target.x)/2,y:(r.source.y+r.target.y)/2},s=qs(a,o);return i/(i+s)},e.prototype.getVisibilityScore=function(t,r){var i=this.getEdgeVisibility(t,r),a=this.getEdgeVisibility(r,t);return i<a?i:a},e.prototype.getEdgeVisibility=function(t,r){var i=fN(r.source,t),a=fN(r.target,t),o={x:(i.x+a.x)/2,y:(i.y+a.y)/2},s={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*qs(o,s)/qs(i,a))},e.prototype.getEdgeForces=function(t,r,i,a){for(var o=this,s=o.get("edgePoints"),l=o.get("K"),u=l/(qs(t.source,t.target)*(i+1)),c=[{x:0,y:0}],f=1;f<i;f++){var h={x:0,y:0},d=o.getSpringForce({pre:s[r][f-1],cur:s[r][f],next:s[r][f+1]},u),g=o.getElectrostaticForce(f,r);h.x=a*(d.x+g.x),h.y=a*(d.y+g.y),c.push(h)}return c.push({x:0,y:0}),c},e.prototype.getSpringForce=function(t,r){var i=t.pre.x+t.next.x-2*t.cur.x,a=t.pre.y+t.next.y-2*t.cur.y;return i*=r,a*=r,{x:i,y:a}},e.prototype.getElectrostaticForce=function(t,r){var i=this,a=i.get("eps"),o=i.get("edgeBundles"),s=i.get("edgePoints"),l=o[r],u={x:0,y:0};return l.forEach(function(c){var f={x:s[c][t].x-s[r][t].x,y:s[c][t].y-s[r][t].y};if(Math.abs(f.x)>a||Math.abs(f.y)>a){var h=qs(s[c][t],s[r][t]),d=1/h;u.x+=f.x*d,u.y+=f.y*d}}),u},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),n.prototype.destroy.call(this)},e}(Oo),jrt=Hrt,Zrt=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Y_=function(){return Y_=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Y_.apply(this,arguments)},_m=.05,hN={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},Krt=function(n){Zrt(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,v.clone)(hN),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"};break}return t},e.prototype.init=function(){var t=this,r=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",r*r);var i=t.get("d");t.set("molecularParam",(i+1)*r)},e.prototype.createDelegate=function(t){var r=this,i=this,a=i.get("delegate");(!a||a.destroyed)&&(i.magnify(t),a=i.get("delegate"),a.on("dragstart",function(o){i.set("delegateCenterDiff",{x:a.attr("x")-o.x,y:a.attr("y")-o.y})}),a.on("drag",function(o){i.magnify(o)}),this.get("scaleDBy")==="wheel"&&a.on("mousewheel",function(o){r.scaleDByWheel(o)}),this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(o){i.scaleRByWheel(o)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var i=r.get("graph"),a,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,l=s||i.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-_m:a=1/(1-_m);var u=r.get("maxR"),c=r.get("minR"),f=r.get("r");(f>(u||i.get("height"))&&a>1||f<(c||i.get("height")*.05)&&a<1)&&(a=1),f*=a,r.set("r",f),r.set("r2",f*f);var h=r.get("d");r.set("molecularParam",(h+1)*f),r.set("delegateCenterDiff",void 0),r.magnify(t,l)}},e.prototype.scaleRByDrag=function(t){var r=this;if(!!t){var i=r.get("dragPrePos"),a=r.get("graph"),o,s=a.getPointByClient(t.clientX,t.clientY);t.x-i.x<0?o=1-_m:o=1/(1-_m);var l=r.get("maxR"),u=r.get("minR"),c=r.get("r");(c>(l||a.get("height"))&&o>1||c<(u||a.get("height")*.05)&&o<1)&&(o=1),c*=o,r.set("r",c),r.set("r2",c*c);var f=r.get("d");r.set("molecularParam",(f+1)*c),r.magnify(t,s),r.set("dragPrePos",{x:t.x,y:t.y})}},e.prototype.scaleDByWheel=function(t){var r=this;if(!(!t&&!t.originalEvent)){t.preventDefault&&t.preventDefault();var i=0;t.originalEvent.wheelDelta<0?i=-.1:i=.1;var a=r.get("d"),o=a+i,s=r.get("maxD"),l=r.get("minD");if(o<s&&o>l){r.set("d",o);var u=r.get("r");r.set("molecularParam",(o+1)*u);var c=r.get("delegate"),f=c?{x:c.attr("x"),y:c.attr("y")}:void 0;r.set("delegateCenterDiff",void 0),r.magnify(t,f)}}},e.prototype.scaleDByDrag=function(t){var r=this,i=r.get("dragPrePos"),a=t.x-i.x>0?.1:-.1,o=r.get("d"),s=o+a,l=r.get("maxD"),u=r.get("minD");if(s<l&&s>u){r.set("d",s);var c=r.get("r");r.set("molecularParam",(s+1)*c),r.magnify(t)}r.set("dragPrePos",{x:t.x,y:t.y})},e.prototype.magnify=function(t,r){var i=this;i.restoreCache();var a=i.get("graph"),o=i.get("cachedMagnifiedModels"),s=i.get("cachedOriginPositions"),l=i.get("showLabel"),u=i.get("r"),c=i.get("r2"),f=i.get("d"),h=i.get("molecularParam"),d=a.getNodes(),g=d.length,p=r?{x:r.x,y:r.y}:{x:t.x,y:t.y};i.get("dragging")&&(i.get("trigger")==="mousemove"||i.get("trigger")==="click")&&(p=i.get("cacheCenter"));var m=i.get("delegateCenterDiff");m&&(p.x+=m.x,p.y+=m.y),i.updateDelegate(p,u);for(var _=0;_<g;_++){var S=d[_].getModel(),M=S.x,R=S.y;if(!(isNaN(M)||isNaN(R))){var F=(M-p.x)*(M-p.x)+(R-p.y)*(R-p.y);if(!isNaN(F)&&F<c&&F!==0){var V=Math.sqrt(F),nt=h*V/(f*V+u),at=(M-p.x)/V,xt=(R-p.y)/V;if(S.x=at*nt+p.x,S.y=xt*nt+p.y,s[S.id]||(s[S.id]={x:M,y:R,texts:[]}),o.push(S),l&&2*V<u)for(var gt=d[_],Tt=gt.getContainer(),Ct=Tt.getChildren(),te=Ct.length,Kt=0;Kt<te;Kt++){var ne=Ct[Kt];ne.get("type")==="text"&&(s[S.id].texts.push({visible:ne.get("visible"),shape:ne}),ne.set("visible",!0))}}}}a.refreshPositions()},e.prototype.restoreCache=function(){for(var t=this,r=t.get("cachedMagnifiedModels"),i=t.get("cachedOriginPositions"),a=r.length,o=0;o<a;o++){var s=r[o],l=s.id,u=i[l];s.x=u.x,s.y=u.y;for(var c=u.texts.length,f=0;f<c;f++){var h=u.texts[f];h.shape.set("visible",h.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},e.prototype.updateParams=function(t){var r=this,i=t.r,a=t.d,o=t.trigger,s=t.minD,l=t.maxD,u=t.minR,c=t.maxR,f=t.scaleDBy,h=t.scaleRBy;isNaN(t.r)||(r.set("r",i),r.set("r2",i*i)),isNaN(a)||r.set("d",a),isNaN(l)||r.set("maxD",l),isNaN(s)||r.set("minD",s),isNaN(c)||r.set("maxR",c),isNaN(u)||r.set("minR",u);var d=r.get("d"),g=r.get("r");if(r.set("molecularParam",(d+1)*g),(o==="mousemove"||o==="click"||o==="drag")&&r.set("trigger",o),f==="drag"||f==="wheel"||f==="unset"){r.set("scaleDBy",f),r.get("delegate").remove(),r.get("delegate").destroy();var p=r.get("dPercentText");p&&(p.remove(),p.destroy())}if(h==="drag"||h==="wheel"||h==="unset"){r.set("scaleRBy",h),r.get("delegate").remove(),r.get("delegate").destroy();var p=r.get("dPercentText");p&&(p.remove(),p.destroy())}},e.prototype.updateDelegate=function(t,r){var i=this,a=this,o=a.get("graph"),s=a.get("delegate");if(!s||s.destroyed){var l=o.get("group"),u=a.get("delegateStyle")||hN;s=l.addShape("circle",{attrs:Y_({r:r/1.5,x:t.x,y:t.y},u),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?s.on("mousewheel",function(g){a.scaleRByWheel(g)}):this.get("scaleRBy")==="drag"&&(s.on("dragstart",function(g){a.set("dragging",!0),a.set("cacheCenter",{x:g.x,y:g.y}),a.set("dragPrePos",{x:g.x,y:g.y})}),s.on("drag",function(g){a.scaleRByDrag(g)}),s.on("dragend",function(g){a.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?s.on("mousewheel",function(g){i.scaleDByWheel(g)}):this.get("scaleDBy")==="drag"&&(s.on("dragstart",function(g){a.set("dragging",!0),a.set("cacheCenter",{x:g.x,y:g.y}),a.set("dragPrePos",{x:g.x,y:g.y})}),s.on("drag",function(g){i.scaleDByDrag(g)}),s.on("dragend",function(g){a.set("dragging",!1)})))}else s.attr({x:t.x,y:t.y,r:r/1.5});if(a.get("showDPercent")){var c=Math.round((a.get("d")-a.get("minD"))/(a.get("maxD")-a.get("minD"))*100),f=a.get("dPercentText"),h=t.y+r/1.5+16;if(!f||f.destroyed){var d=o.get("group");f=d.addShape("text",{attrs:{text:c+"%",x:t.x,y:h,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),a.set("dPercentText",f)}else f.attr({text:c+"%",x:t.x,y:h})}a.set("delegate",s)},e.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var r=this.get("delegate");r&&!r.destroyed&&(r.remove(),r.destroy());var i=this.get("dPercentText");i&&!i.destroyed&&(i.remove(),i.destroy())},e.prototype.destroy=function(){this.clear()},e}(Oo),$rt=Krt,Qrt=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dN=.05;V_()(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var Jrt=function(e){if(!e)return[];if(e.composedPath)return e.composedPath();for(var t=[],r=e.target;r;){if(t.push(r),r.tagName==="HTML")return t.push(document,window),t;r=r.parentElement}return t},qrt=function(n){Qrt(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(r){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},e.prototype.init=function(){var t=this,r=this.get("graph"),i=this.get("getContent"),a=i(r),o=a;(0,v.isString)(a)&&(o=rt(a));var s=this.get("className");o.setAttribute("class",s||"g6-component-toolbar");var l=this.get("container");l||(l=this.get("graph").get("container")),(0,v.isString)(l)&&(l=document.getElementById(l)),l.appendChild(o),this.set("toolBar",o);var u=this.get("handleClick");o.addEventListener("click",function(f){var h=Jrt(f).filter(function(g){return g.nodeName==="LI"});if(h.length!==0){var d=h[0].getAttribute("code");!d||(u?u(d,r):t.handleDefaultOperator(d,r))}});var c=this.get("position");c&&ct(o,{top:c.y+"px",left:c.x+"px"}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var t=this.get("graph"),r=document.querySelector('.g6-component-toolbar li[code="undo"]'),i=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),a=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!r||!i||!a||!o||t.on("stackchange",function(s){var l=s.undoStack,u=s.redoStack,c=l.length,f=u.length;c===1?(r.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4")):(r.removeAttribute("style"),i.removeAttribute("style")),f===0?(a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(a.removeAttribute("style"),o.removeAttribute("style"))})},e.prototype.undo=function(){var t=this.get("graph"),r=t.getUndoStack();if(!(!r||r.length===1)){var i=r.pop();if(i){var a=i.action;t.pushStack(a,(0,v.clone)(i.data),"redo");var o=i.data.before;if(a==="add"&&(o=i.data.after),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){var c=t.findById(u.id);u.visible?t.showItem(c,!1):t.hideItem(c,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){t.updateItem(u.id,u,!1)})});break;case"changedata":t.changeData(o,!1);break;case"delete":{Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){var c=u.itemType;delete u.itemType,t.addItem(c,u,!1)})});break}case"add":Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){t.removeItem(u.id,!1)})});break;case"updateComboTree":Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){t.updateComboTree(u.id,u.parentId,!1)})});break;default:}}}},e.prototype.redo=function(){var t=this.get("graph"),r=t.getRedoStack();if(!(!r||r.length===0)){var i=r.pop();if(i){var a=i.action,o=i.data.after;if(t.pushStack(a,(0,v.clone)(i.data)),a==="delete"&&(o=i.data.before),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){var c=t.findById(u.id);u.visible?t.showItem(c,!1):t.hideItem(c,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){t.updateItem(u.id,u,!1)})});break;case"changedata":t.changeData(o,!1);break;case"delete":o.edges&&o.edges.forEach(function(s){t.removeItem(s.id,!1)}),o.nodes&&o.nodes.forEach(function(s){t.removeItem(s.id,!1)}),o.combos&&o.combos.forEach(function(s){t.removeItem(s.id,!1)});break;case"add":{Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){var c=u.itemType;delete u.itemType,t.addItem(c,u,!1)})});break}case"updateComboTree":Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){t.updateComboTree(u.id,u.parentId,!1)})});break;default:}}}},e.prototype.handleDefaultOperator=function(t,r){var i=r.getZoom();switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":{var a=1/(1-dN*this.get("zoomSensitivity")),o=this.get("maxZoom")||r.get("maxZoom");if(a*i>o)return;r.zoomTo(i*a);break}case"zoomIn":{var s=1-dN*this.get("zoomSensitivity"),l=this.get("minZoom")||r.get("minZoom");if(s*i<l)return;r.zoomTo(i*s);break}case"realZoom":r.zoomTo(1);break;case"autoZoom":r.fitView([20,20]);break;default:}},e.prototype.destroy=function(){var t=this.get("toolBar");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,v.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}var i=this.get("handleClick");i&&t.removeEventListener("click",i)},e}(Oo),tnt=qrt,ent=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();V_()(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var rnt=function(n){ent(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(r){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`+r.item.getType()+`</h4>
          <span class='tooltip-id'>ID\uFF1A`+r.item.getID()+`</span>
        `},shouldBegin:function(r){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this,r=t.get("className")||"g6-component-tooltip",i=rt("<div class="+r+"></div>"),a=t.get("container");a||(a=t.get("graph").get("container")),(0,v.isString)(a)&&(a=document.getElementById(a)),ct(i,{position:"absolute",visibility:"hidden",display:"none"}),a.appendChild(i),t.get("trigger")!=="click"&&(i.addEventListener("mouseenter",function(o){ct(i,{visibility:"visible",display:"unset"})}),i.addEventListener("mouseleave",function(o){t.hideTooltip()})),t.set("tooltip",i)},e.prototype.onClick=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var i=t.item,a=this.get("graph");this.currentTarget===i?(this.currentTarget=null,this.hideTooltip(),a.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=i,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"}))}},e.prototype.onMouseEnter=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var i=t.item,a=this.get("graph");this.currentTarget=i,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"})}},e.prototype.onMouseMove=function(t){var r=this.get("itemTypes");t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1||!this.currentTarget||t.item!==this.currentTarget||this.showTooltip(t)},e.prototype.onMouseLeave=function(){this.hideTooltip();var t=this.get("graph");t.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.showTooltip=function(t){if(!!t.item){var r=this.get("itemTypes");if(!(t.item.getType&&r.indexOf(t.item.getType())===-1)){var i=this.get("tooltip"),a=this.get("getContent"),o=a(t);(0,v.isString)(o)?i.innerHTML=o:i.innerHTML=o.outerHTML,this.updatePosition(t)}}},e.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&ct(t,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(t){var r=this.get("shouldBegin"),i=this.get("tooltip");if(!r(t)){ct(i,{visibility:"hidden",display:"none"});return}var a=this.get("graph"),o=a.get("width"),s=a.get("height"),l=this.get("offsetX")||0,u=this.get("offsetY")||0,c=a.getPointByClient(t.clientX,t.clientY),f=this.get("fixToNode"),h=t.item;if(h.getType&&h.getType()==="node"&&f&&(0,v.isArray)(f)&&f.length>=2){var d=h.getBBox();c={x:d.minX+d.width*f[0],y:d.minY+d.height*f[1]}}var g=a.getCanvasByPoint(c.x,c.y),p=g.x,m=g.y,_=a.getContainer(),S={x:p+_.offsetLeft+l,y:m+_.offsetTop+u};ct(i,{visibility:"visible",display:"unset"});var M=i.getBoundingClientRect();p+M.width+l>o&&(S.x-=M.width+l),m+M.height+u>s&&(S.y-=M.height+u),ct(i,{left:S.x+"px",top:S.y+"px"})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var t=this.get("tooltip");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,v.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(Oo),nnt=rnt,int=function(n,e){for(var t=0,r=e.length,i=n.length;t<r;t++,i++)n[i]=e[t];return n};function ant(n){return(0,v.map)(n,function(e,t){var r=t===0?"M":"L",i=e[0],a=e[1];return[r,i,a]})}function vN(n){return ant(n)}function ont(n){if(n.length<=2)return vN(n);var e=[];(0,v.each)(n,function(o){(0,v.isEqual)(o,e.slice(e.length-2))||e.push(o[0],o[1])});var t=Ma.e9(e,!1),r=(0,v.head)(n),i=r[0],a=r[1];return t.unshift(["M",i,a]),t}function snt(n,e,t,r){r===void 0&&(r=!0);var i=new ls({values:n}),a=new ns({values:(0,v.map)(n,function(s,l){return l})}),o=(0,v.map)(n,function(s,l){return[a.scale(l)*e,t-i.scale(s)*t]});return r?ont(o):vN(o)}function lnt(n,e,t,r){r===void 0&&(r=5);for(var i=new ls({values:n}),a=new ns({values:(0,v.map)(n,function(h,d){return d})}),o=(0,v.map)(n,function(h,d){return[a.scale(d)*e,t-i.scale(h)*t]}),s=[],l=0;l<o.length;l++){var u=o[l],c={x:u[0],y:u[1],y0:t,size:r},f=fnt(c);s.push.apply(s,f)}return hnt(s)}function unt(n,e){var t=new ls({values:n}),r=Math.max(0,t.min);return e-t.scale(r)*e}function cnt(n,e,t,r){var i=int([],n),a=unt(r,t);return i.push(["L",e,a]),i.push(["L",0,a]),i.push(["Z"]),i}function fnt(n){var e=n.x,t=n.y,r=n.y0,i=n.size,a,o;(0,v.isArray)(t)?(a=t[0],o=t[1]):(a=r,o=t);var s,l;(0,v.isArray)(e)?(s=e[0],l=e[1]):(s=e-i/2,l=e+i/2);var u=[{x:s,y:a},{x:s,y:o}];return u.push({x:l,y:o},{x:l,y:a}),u}function hnt(n,e){e===void 0&&(e=!0);var t=[],r=n[0];t.push(["M",r.x,r.y]);for(var i=1,a=n.length;i<a;i++)t.push(["L",n[i].x,n[i].y]);return e&&(t.push(["L",r.x,r.y]),t.push(["z"])),t}var rp=function(){return rp=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},rp.apply(this,arguments)},dnt={stroke:"#C5C5C5",strokeOpacity:.85},vnt={fill:"#CACED4",opacity:.85},gnt=function(){function n(e){var t=e.x,r=t===void 0?0:t,i=e.y,a=i===void 0?0:i,o=e.width,s=o===void 0?200:o,l=e.height,u=l===void 0?26:l,c=e.smooth,f=c===void 0?!0:c,h=e.isArea,d=h===void 0?!1:h,g=e.data,p=g===void 0?[]:g,m=e.lineStyle,_=e.areaStyle,S=e.group,M=e.interval,R=M===void 0?null:M;this.group=S,this.x=r,this.y=a,this.width=s,this.height=u,this.data=p,this.smooth=f,this.isArea=d,this.lineStyle=Object.assign({},dnt,m),this.areaStyle=Object.assign({},vnt,_),this.intervalConfig=R,this.renderLine()}return n.prototype.renderLine=function(){var e=this,t=e.x,r=e.y,i=e.width,a=e.height,o=e.barWidth,s=e.data,l=e.smooth,u=e.isArea,c=e.lineStyle,f=e.areaStyle,h=this.group.addGroup({name:"trend-group"});if(s){var d=snt(s,i,a,l);if(h.addShape("path",{attrs:rp({path:d},c)}),u){var g=cnt(d,i,a,s);h.addShape("path",{attrs:rp({path:g},f)})}}this.intervalConfig&&h.addShape("path",{attrs:rp({path:lnt(this.intervalConfig.data,i,a,this.intervalConfig.style.barWidth)},this.intervalConfig.style)}),h.move(t,r)},n.prototype.destory=function(){this.group.destroy()},n}(),pnt=gnt,yd=function(){return yd=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},yd.apply(this,arguments)},ynt={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},mnt={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},xnt=function(){function n(e){var t=e.group,r=e.name,i=e.type,a=e.x,o=a===void 0?0:a,s=e.y,l=s===void 0?0:s,u=e.width,c=u===void 0?2:u,f=e.height,h=f===void 0?24:f,d=e.style,g=d===void 0?{}:d;this.group=t,this.name=r,this.handleType=i,this.x=o,this.y=l,this.width=c,this.height=h,i==="trend"?this.style=yd(yd({},ynt),g):i==="simple"&&(this.style=yd(yd({},mnt),g)),this.renderHandle()}return n.prototype.setX=function(e){this.setXY(e,void 0)},n.prototype.setY=function(e){this.setXY(void 0,e)},n.prototype.setXY=function(e,t){(0,v.isNumber)(e)&&(this.x=e),(0,v.isNumber)(t)&&(this.y=t),this.updateXY()},n.prototype.renderHandle=function(){var e=this,t=e.width,r=e.height,i=e.style,a=e.name,o=i.fill,s=i.stroke,l=i.radius,u=i.opacity,c=i.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:r,fill:o,stroke:s,radius:l,opacity:u,cursor:c},name:a+"-handler"}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:o,stroke:s,radius:l,opacity:u,cursor:c},name:a+"-handler"}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r,r:2*t,fill:o,stroke:s,radius:l,opacity:u,cursor:c},name:a+"-handler"})):this.handleType==="simple"&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r/2,r:2*t,fill:o,stroke:s,radius:l,opacity:u,cursor:c,lineWidth:2},name:a+"-handler"})),this.updateXY(),this.handleType==="trend"?this.bindTrendEvents():this.handleType==="simple"&&this.bindSimpleEvents()},n.prototype.bindSimpleEvents=function(){var e=this,t=this.name;this.handleGroup.on(t+"-handler:mouseenter",function(){var r=e.style.highLightFill;e.topCircle.attr("fill",r)}),this.handleGroup.on(t+"-handler:mouseleave",function(){var r=e.style.fill;e.topCircle.attr("fill",r)})},n.prototype.bindTrendEvents=function(){var e=this,t=this.name;this.handleGroup.on(t+"-handler:mouseenter",function(){var r=e.style.highLightFill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)}),this.handleGroup.on(t+"-handler:mouseleave",function(){var r=e.style.fill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)})},n.prototype.show=function(){this.handleGroup.show()},n.prototype.hide=function(){this.handleGroup.hide()},n.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},n}(),gN=xnt,pN="timebarstartplay",yN="timebarendplay",tl="valuechange",_f="timebarConfigChanged",Xu="playPauseBtn",np="nextStepBtn",ip="preStepBtn",H_=function(){return H_=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},H_.apply(this,arguments)},bnt=function(){function n(e){this.config=(0,v.deepMix)({},e),this.init()}return n.prototype.update=function(e){this.config=(0,v.deepMix)({},this.config,e),this.updateElement(),this.renderMarker()},n.prototype.init=function(){this.initElement(),this.renderMarker()},n.prototype.initElement=function(){var e=this.config,t=e.group,r=e.style,i=r.scale,a=i===void 0?1:i,o=r.offsetX,s=o===void 0?0:o,l=r.offsetY,u=l===void 0?0:l,c=this.config.x+s,f=this.config.y+u,h=t.addGroup({name:Xu});this.startMarkerGroup=h.addGroup({name:Xu}),this.circle=t.addShape("circle",{attrs:H_({x:c,y:f,r:this.config.r*a},r),name:Xu}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(c,f,a),fill:r.stroke||"#aaa"}}),this.pauseMarkerGroup=h.addGroup({name:Xu});var d=.25*this.config.r*a,g=.5*this.config.r*Math.sqrt(3)*a;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c-.375*this.config.r*a,y:f-g/2,width:d,height:g,fill:r.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c+1/8*this.config.r*a,y:f-g/2,width:d,height:g,fill:r.stroke||"#aaa",lineWidth:0}})},n.prototype.updateElement=function(){var e=this.config.style,t=e.scale,r=t===void 0?1:t,i=e.offsetX,a=i===void 0?0:i,o=e.offsetY,s=o===void 0?0:o,l=this.config.x+a,u=this.config.y+s;this.circle.attr("x",l),this.circle.attr("y",u),this.circle.attr("r",this.config.r*r),this.startMarker.attr("path",this.getStartMarkerPath(l,u,r));var c=.25*this.config.r*r,f=.5*this.config.r*Math.sqrt(3)*r;this.pauseLeftMarker.attr("x",l-(1/4+1/8)*this.config.r*r),this.pauseLeftMarker.attr("y",u-f/2),this.pauseLeftMarker.attr("width",c),this.pauseLeftMarker.attr("height",f),this.pauseRightMarker.attr("x",l+1/8*this.config.r*r),this.pauseRightMarker.attr("y",u-f/2),this.pauseRightMarker.attr("width",c),this.pauseRightMarker.attr("height",f)},n.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},n.prototype.getStartMarkerPath=function(e,t,r){var i=.5*this.config.r*Math.sqrt(3)*r;return[["M",e-i/Math.sqrt(3)/2,t-i/2],["L",e+i/Math.sqrt(3),t],["L",e-i/Math.sqrt(3)/2,t+i/2]]},n}(),_nt=bnt,aa=function(){return aa=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},aa.apply(this,arguments)},ap=Ry,Snt="#aaa",Ent="green",wnt={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},Cnt={fill:"#fff"},Mnt={fill:"green"},mN={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},xN={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},Ant={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:mN,timeTypeControllerStyle:xN},j_=110,Yu=50,Tnt=function(){function n(e){this.controllerCfg=(0,v.deepMix)({},Ant,e),this.group=e.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType="range",this.fontFamily=e.fontFamily||"Arial, sans-serif",this.init()}return n.prototype.init=function(){this.renderPlayButton()},n.prototype.getNextMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e+r,t],["L",e,t+r],["Z",e,t-r],["M",e,t],["L",e-r,t-r],["L",e-r,t+r],["Z"]]},n.prototype.getPreMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e-r,t],["L",e,t+r],["L",e,t-r],["M",e,t],["L",e+r,t-r],["L",e+r,t+r],["Z"]]},n.prototype.renderPlayButton=function(){var e=this.controllerCfg,t=e.width,r=e.height,i=e.x,a=e.y,o=e.hideTimeTypeController,s=e.fill,l=s===void 0?Snt:s,u=e.stroke,c=u===void 0?Ent:u,f=aa(aa({},wnt),e.playBtnStyle||{}),h=aa(aa({},Cnt),e.preBtnStyle||{}),d=aa(aa({},Mnt),e.nextBtnStyle||{}),g=r/2-5,p=a+10,m=this.controllerGroup.addShape("rect",{attrs:{x:i,y:p,width:t,height:r,stroke:c,fill:l},name:"container-rect"});this.playButton?this.playButton.update({x:t/2,y:p,r:g}):this.playButton=new _nt({group:this.controllerGroup,x:t/2,y:p+g+5,r:g,isPlay:this.isPlay,style:f});var _=h.offsetX||0,S=h.offsetY||0,M=(h.scale||1)*g;this.controllerGroup.addShape("path",{attrs:aa({path:this.getPreMarkerPath(t/2-5*g+_,p+g+5+S,M*.5)},h),name:ip});var R=d.offsetX||0,F=d.offsetY||0,V=(d.scale||1)*g;this.controllerGroup.addShape("path",{attrs:aa({path:this.getNextMarkerPath(t/2+5*g+R,p+g+5+F,V*.5)},d),name:np}),m.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var nt=this.controllerCfg.scale,at=nt===void 0?1:nt,xt=this.controllerGroup.getCanvasBBox(),gt=(xt.maxX+xt.minX)/2,Tt=(xt.maxY+xt.minY)/2,Ct=ap([1,0,0,0,1,0,0,0,1],[["t",-gt,-Tt],["s",at,at],["t",gt,Tt]]);this.controllerGroup.setMatrix(Ct)},n.prototype.renderSpeedBtn=function(){var e=this.controllerCfg,t=e.y,r=e.width,i=e.hideTimeTypeController,a=aa(aa({},mN),this.controllerCfg.speedControllerStyle||{}),o=a.scroller,s=o===void 0?{}:o,l=a.text,u=l===void 0?{}:l,c=a.pointer,f=c===void 0?{}:c,h=a.scale,d=h===void 0?1:h,g=a.offsetX,p=g===void 0?0:g,m=a.offsetY,_=m===void 0?0:m,S=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=S;var M=[],R=5;this.speedAxisY=[19,22,26,32,39];for(var F=0;F<5;F++){var V=t+this.speedAxisY[F],nt=r-(i?Yu:j_);S.addShape("line",{attrs:aa({x1:nt,x2:nt+15,y1:V,y2:V},s),speed:R,name:"speed-rect"}),this.speedAxisY[F]=V,M.push(R),R=R-1}this.speedText=S.addShape("text",{attrs:aa({x:r-(i?Yu:j_)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},u)}),this.speedPoint=S.addShape("path",{attrs:aa({path:this.getPointerPath(r-(i?Yu:j_),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},f)});var at=this.speedGroup.getCanvasBBox(),xt=(at.maxX+at.minX)/2,gt=(at.maxY+at.minY)/2,Tt=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];Tt=ap(Tt,[["t",-xt,-gt],["s",d,d],["t",xt+p*d,gt+_*d]]),this.speedGroup.setMatrix(Tt)},n.prototype.getPointerPath=function(e,t){return[["M",e,t],["L",e-10,t-4],["L",e-10,t+4],["Z"]]},n.prototype.renderToggleTime=function(){var e,t=this.controllerCfg.width,r=aa(aa({},xN),this.controllerCfg.timeTypeControllerStyle||{}),i=r.scale,a=i===void 0?1:i,o=r.offsetX,s=o===void 0?0:o,l=r.offsetY,u=l===void 0?0:l,c=r.box,f=c===void 0?{}:c,h=r.check,d=h===void 0?{}:h,g=r.text,p=g===void 0?{}:g;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"}),this.toggleGroup.addShape("rect",{attrs:aa({x:t-Yu,y:this.speedAxisY[0]+3.5},f),isChecked:!1,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:aa({path:[["M",t-Yu+3,this.speedAxisY[1]+6],["L",t-Yu+7,this.speedAxisY[1]+10],["L",t-Yu+12,this.speedAxisY[1]+4]]},d),capture:!1}),this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:aa({text:((e=this.controllerCfg)===null||e===void 0?void 0:e.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4",x:t-Yu+15,y:this.speedAxisY[0]+4,fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},p)});var m=this.toggleGroup.getCanvasBBox(),_=(m.maxX+m.minX)/2,S=(m.maxY+m.minY)/2,M=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];M=ap(M,[["t",-_,-S],["s",a,a],["t",_+s*a,S+u*a]]),this.toggleGroup.setMatrix(M)},n.prototype.bindEvent=function(){var e=this;this.speedGroup.on("speed-rect:click",function(t){var r=t.target.attr("y1"),i=e.speedPoint.attr("matrix"),a=e.speedAxisY.indexOf(i[7]||0),o=e.speedAxisY.indexOf(r),s=e.speedAxisY[o]-e.speedAxisY[a];i=ap(i,[["t",0,s]]),e.speedPoint.setMatrix(i),e.currentSpeed=e.speedAxisY.length-o,e.speedText.attr("text",e.currentSpeed+".0X"),e.group.emit(_f,{speed:e.currentSpeed,type:e.currentType})}),this.speedGroup.on("mousewheel",function(t){t.preventDefault();var r=e.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],i=r[7],a=e.speedAxisY.indexOf(i);if(a===-1){var o=Infinity;e.speedAxisY.forEach(function(l,u){var c=Math.abs(l-i);o>c&&(o=c,a=u)})}t.originalEvent.deltaY>0?a=Math.max(0,a-1):a=Math.min(e.speedAxisY.length-1,a+1);var s=e.speedAxisY[a]-i;r=ap(r,[["t",0,s]]),e.speedPoint.setMatrix(r),e.currentSpeed=e.speedAxisY.length-a,e.speedText.attr("text",e.currentSpeed+".0X"),e.group.emit(_f,{speed:e.currentSpeed,type:e.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(t){var r,i,a=t.target.get("isChecked");a?(e.checkedIcon.hide(),e.checkedText.attr("text",((i=e.controllerCfg)===null||i===void 0?void 0:i.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4"),e.currentType="range"):(e.checkedIcon.show(),e.checkedText.attr("text",((r=e.controllerCfg)===null||r===void 0?void 0:r.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4"),e.currentType="single"),t.target.set("isChecked",!a),e.group.emit(_f,{type:e.currentType,speed:e.currentSpeed})})},n.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},n}(),bN=Tnt,di=function(){return di=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},di.apply(this,arguments)},Int={fill:"#416180",opacity:.05},Ont={fill:"#416180",opacity:.15,radius:5},Pnt={fill:"#5B8FF9",opacity:.3,cursor:"grab"},Z_=2,Dnt={width:Z_,height:24},Lnt={textBaseline:"middle",fill:"#000",opacity:.45},Rnt={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},Nnt={lineWidth:1,stroke:"#ccc"},knt=function(){function n(e){var t=this;this.prevX=0,this.onMouseDown=function(we){return function(Pe){t.currentHandler=we;var Ve=Pe.originalEvent;Ve.stopPropagation(),Ve.preventDefault(),t.prevX=(0,v.get)(Ve,"touches.0.pageX",Ve.pageX);var he=t.canvas.get("container");he.addEventListener("mousemove",t.onMouseMove),he.addEventListener("mouseup",t.onMouseUp),he.addEventListener("mouseleave",t.onMouseUp),he.addEventListener("touchmove",t.onMouseMove),he.addEventListener("touchend",t.onMouseUp),he.addEventListener("touchcancel",t.onMouseUp)}},this.onMouseMove=function(we){we.stopPropagation(),we.preventDefault();var Pe=(0,v.get)(we,"touches.0.pageX",we.pageX),Ve=Pe-t.prevX,he=t.adjustOffsetRange(Ve/t.width);t.updateStartEnd(he),t.updateUI(),t.prevX=Pe},this.onMouseUp=function(){t.currentHandler&&(t.currentHandler=void 0);var we=t.canvas.get("container");we&&(we.removeEventListener("mousemove",t.onMouseMove),we.removeEventListener("mouseup",t.onMouseUp),we.removeEventListener("mouseleave",t.onMouseUp),we.removeEventListener("touchmove",t.onMouseMove),we.removeEventListener("touchend",t.onMouseUp),we.removeEventListener("touchcancel",t.onMouseUp))};var r=e.x,i=r===void 0?0:r,a=e.y,o=a===void 0?0:a,s=e.width,l=s===void 0?100:s,u=e.height,c=e.padding,f=c===void 0?10:c,h=e.trendCfg,d=e.controllerCfg,g=d===void 0?{speed:1}:d,p=e.backgroundStyle,m=p===void 0?{}:p,_=e.foregroundStyle,S=_===void 0?{}:_,M=e.handlerStyle,R=M===void 0?{}:M,F=e.textStyle,V=F===void 0?{}:F,nt=e.start,at=nt===void 0?0:nt,xt=e.end,gt=xt===void 0?1:xt,Tt=e.minText,Ct=Tt===void 0?"":Tt,te=e.maxText,Kt=te===void 0?"":te,ne=e.group,ee=e.graph,ve=e.canvas,ie=e.tick,ye=ie===void 0?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(Pe){return Pe},ticks:[]}:ie,Ee=e.type;this.graph=ee,this.canvas=ve,this.group=ne,this.timeBarType=Ee,this.x=i,this.y=o,this.width=l,this.height=u,this.padding=f,this.ticks=ye.ticks,this.trendCfg=h,this.controllerCfg=g,this.currentSpeed=g.speed||1,this.tickLabelFormatter=ye.tickLabelFormatter,Ee==="trend"?this.backgroundStyle=di(di({},Int),m):Ee==="simple"&&(this.backgroundStyle=di(di({},Ont),m)),this.foregroundStyle=di(di({},Pnt),S),this.handlerStyle=di(di({},Dnt),R),this.textStyle=di(di({},Lnt),V),this.tickLabelStyle=di(di({},Rnt),ye.tickLabelStyle),this.tickLineStyle=di(di({},Nnt),ye.tickLineStyle),this.currentMode="range",this.start=at,this.end=gt,this.minText=Ct,this.maxText=Kt,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return n.prototype.update=function(e){var t=e.x,r=e.y,i=e.width,a=e.height,o=e.minText,s=e.maxText,l=e.start,u=e.end;this.start=Math.min(1,Math.max(l,0)),this.end=Math.min(1,Math.max(u,0)),(0,v.assign)(this,{x:t,y:r,width:i,height:a,minText:o,maxText:s}),this.updateUI()},n.prototype.setText=function(e,t){this.minTextShape.attr("text",e),this.maxTextShape.attr("text",t)},n.prototype.renderSlider=function(){var e=this,t=this,r=t.width,i=t.height,a=t.timeBarType;if(a==="trend"&&(0,v.size)((0,v.get)(this.trendCfg,"data"))){var o=new pnt(di(di({x:this.x,y:this.y,width:r,height:i},this.trendCfg),{group:this.group}));this.trendComponent=o}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:di({x:0,y:0,width:r,height:i},this.backgroundStyle)});var l=this.group.addGroup();a==="trend"?(this.minTextShape=l.addShape("text",{attrs:di({x:0,y:i/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1}),this.maxTextShape=l.addShape("text",{attrs:di({y:i/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1})):(this.minTextShape=l.addShape("text",{attrs:di({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1}),this.maxTextShape=l.addShape("text",{attrs:di({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:di({x:0,y:this.y,height:i},this.foregroundStyle)}),this.foregroundShape.on("mousedown",function(m){m.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(m){m.target.attr("cursor",e.foregroundStyle.cursor||"grab")});var u=(0,v.get)(this.handlerStyle,"width",2),c=(0,v.get)(this.handlerStyle,"height",24),f=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new gN({name:"minHandlerShape",group:f,type:a,x:this.x,y:this.y,width:u,height:c,style:this.handlerStyle});var h=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new gN({name:"maxHandlerShape",group:h,type:a,x:this.x,y:this.y,width:u,height:c,style:this.handlerStyle});var d=this.ticks,g=r/(d.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(m){m.destroy()});var p=-Infinity;this.textList=d.map(function(m,_){e.tickPosList.push(e.x+_*g);var S;e.tickLabelFormatter?(S=e.tickLabelFormatter(m),!(0,v.isString)(S)&&S&&(S=m.date)):S=m.date;var M=e.group.addShape("text",{attrs:di({x:e.x+_*g,y:e.y+i+5,text:S,fontFamily:e.fontFamily||"Arial, sans-serif"},e.tickLabelStyle)}),R=e.group.addShape("line",{attrs:di({x1:e.x+_*g,y1:e.y+i+2,x2:e.x+_*g,y2:e.y+i+6},e.tickLineStyle)});R.toBack();var F=M.getBBox();return F.minX>p?(M.show(),R.show(),p=F.minX+F.width+10):(M.hide(),R.hide()),M}),this.controllerBtnGroup=new bN(di({group:this.group,x:this.x,y:this.y+i+25,width:r,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),s.move(this.x,this.y),this.bindEvents()},n.prototype.bindEvents=function(){var e=this,t=this.group.find(function(i){return i.get("name")==="minHandlerShape"});t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var r=this.group.find(function(i){return i.get("name")==="maxHandlerShape"});r&&(r.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),r.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on(Xu+":click",function(){e.isPlay=!e.isPlay,e.currentHandler=e.maxHandlerShape,e.changePlayStatus()}),this.group.on(np+":click",function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(.01),e.updateUI()}),this.group.on(ip+":click",function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(-.01),e.updateUI()}),this.group.on(_f,function(i){var a=i.type,o=i.speed;e.currentSpeed=o,e.currentMode=a,a==="single"?(e.minHandlerShape.hide(),e.foregroundShape.hide(),e.minTextShape.hide()):a==="range"&&(e.minHandlerShape.show(),e.foregroundShape.show(),e.minTextShape.show())})},n.prototype.adjustTickIndex=function(e){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=e&&e<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-e)<Math.abs(e-this.tickPosList[t+1])?t:t+1;return 0},n.prototype.adjustOffsetRange=function(e){switch(this.currentHandler){case this.minHandlerShape:{var t=0-this.start,r=1-this.start;return Math.min(r,Math.max(t,e))}case this.maxHandlerShape:{var t=0-this.end,r=1-this.end;return Math.min(r,Math.max(t,e))}case this.foregroundShape:{var t=0-this.start,r=1-this.end;return Math.min(r,Math.max(t,e))}default:return 0}},n.prototype.updateStartEnd=function(e){var t=this.ticks[this.adjustTickIndex(this.start*this.width)],r=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler){this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;return}switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=e,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;case this.foregroundShape:this.start+=e,this.end+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;default:break}},n.prototype.updateUI=function(){var e=this;this.start<0&&(this.start=0),this.end>1&&(this.end=1);var t=this.x+this.start*this.width,r=this.x+this.end*this.width;this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",r-t);var i=(0,v.get)(this.handlerStyle,"width",Z_);this.setText(this.minText,this.maxText);var a=this.dodgeText([t,r]),o=a[0],s=a[1];this.minHandlerShape.setX(t-i/2),(0,v.each)(o,function(l,u){return e.minTextShape.attr(u,l)}),this.maxHandlerShape.setX(r-i/2),(0,v.each)(s,function(l,u){return e.maxTextShape.attr(u,l)}),this.currentMode==="range"?this.graph.emit(tl,{value:[this.start,this.end].sort()}):this.currentMode==="single"&&this.graph.emit(tl,{value:[this.end,this.end]})},n.prototype.dodgeText=function(e){var t,r,i=2,a=(0,v.get)(this.handlerStyle,"width",Z_),o=this.minTextShape,s=this.maxTextShape,l=e[0],u=e[1],c=!1;l>u&&(t=[u,l],l=t[0],u=t[1],r=[s,o],o=r[0],s=r[1],c=!0);var f=o.getBBox(),h=s.getBBox(),d=null,g=null;return this.timeBarType==="trend"?(d=l-f.width<this.x+i?{x:l+a/2+i,textAlign:"left"}:{x:l-a/2-i,textAlign:"right"},g=u+h.width>this.x+this.width?{x:u-a/2-i,textAlign:"right"}:{x:u+a/2+i,textAlign:"left"}):this.timeBarType==="simple"&&(d=f.width>l-i?{x:l+a/2+i,textAlign:"center"}:{x:l-a/2-i,textAlign:"center"},g=h.width>this.width-u-i?{x:u-a/2-i,textAlign:"center"}:{x:u+a/2+i,textAlign:"center"}),c?[g,d]:[d,g]},n.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e,r=t.ticks,i=t.width,a=e.currentSpeed,o=i/r.length,s=o/((10-a)*1e3/60),l=e.adjustOffsetRange(s/e.width);e.updateStartEnd(l),e.updateUI(),e.isPlay&&(e.playHandler=e.startPlay())}):void 0},n.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(pN,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(yN,null))},n.prototype.destory=function(){this.graph.off(tl);var e=this.group,t=e.find(function(i){return i.get("name")==="minHandlerShape"});t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy());var r=e.find(function(i){return i.get("name")==="maxHandlerShape"});r&&(r.off("maxHandlerShape-handler:mousedown"),r.off("maxHandlerShape-handler:touchstart"),r.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),e.off(Xu+":click"),e.off(np+":click"),e.off(ip+":click"),e.off(_f),e.destroy(),this.trendComponent&&this.trendComponent.destory()},n}(),Bnt=knt,uut={opacity:.5,fill:"#000"},cut={opacity:.5,fill:"#000",r:5},fut={fill:"#fff",fontSize:12},Fnt=function(){function n(e){var t=e.x,r=t===void 0?0:t,i=e.y,a=i===void 0?0:i,o=e.container,s=e.text,l=e.padding,u=l===void 0?[4,4,4,4]:l,c=e.className,f=c===void 0?"g6-component-timebar-tooltip":c,h=e.backgroundColor,d=h===void 0?"#000":h,g=e.textColor,p=g===void 0?"#fff":g,m=e.opacity,_=m===void 0?.8:m,S=e.fontSize,M=S===void 0?12:S;this.container=o,this.className=f,this.backgroundColor=d,this.textColor=p,this.x=r,this.y=a,this.text=s,this.padding=u,this.opacity=_,this.fontSize=M,this.render()}return n.prototype.render=function(){var e=this,t=e.className,r=e.x,i=e.y,a=e.backgroundColor,o=e.textColor,s=e.text,l=e.padding,u=e.opacity,c=e.fontSize,f=e.container,h=rt("<div class='"+t+`' style="position: absolute; width: fit-content; height: fit-content; opacity: `+u+'"></div>');(0,v.isString)(f)&&(f=document.getElementById(f)),f.appendChild(h),e.parentHeight=f.offsetHeight,e.parentWidth=f.offsetWidth,ct(h,{visibility:"hidden",top:0,left:0});var d=rt(`
      <div style='position: absolute; white-space:nowrap; background-color: `+a+"; font-size: "+c+"px; border-radius: 4px; width: fit-content; height: fit-content; color: "+o+"; padding: "+l[0]+"px "+l[1]+"px "+l[2]+"px "+l[3]+"px'></div>");d.innerHTML=s,h.appendChild(d),e.backgroundDOM=d;var g=rt("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid "+a+"'></div>");h.appendChild(g),e.arrowDOM=g,e.container=h},n.prototype.show=function(e){var t=this,r=e.text,i=e.x,a=e.y,o=e.clientX,s=e.clientY;t.backgroundDOM.innerHTML=r;var l=t.backgroundDOM.offsetWidth,u=t.backgroundDOM.offsetHeight,c=t.arrowDOM.offsetWidth,f=t.arrowDOM.offsetHeight;ct(t.container,{top:-u-f+"px",left:i+"px",visibility:"visible"}),ct(t.backgroundDOM,{marginLeft:-l/2+"px"}),ct(t.arrowDOM,{marginLeft:-c/2+"px",top:u+"px"});var h=i-l/2,d=i+l/2;h<0?ct(t.backgroundDOM,{marginLeft:-l/2-h+"px"}):d>t.parentWidth&&ct(t.backgroundDOM,{marginLeft:-l/2-d+t.parentWidth+12+"px"})},n.prototype.hide=function(){ct(this.container,{top:0,left:0,visibility:"hidden"})},n}(),Gnt=Fnt,K_=function(){return K_=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},K_.apply(this,arguments)},znt={fill:"#5B8FF9"},Unt={fill:"#e6e8e9"},Wnt=function(){function n(e){this.frameCount=0,this.fontFamily="Arial, sans-serif";var t=e.graph,r=e.canvas,i=e.group,a=e.width,o=e.height,s=e.padding,l=e.data,u=e.start,c=e.end,f=e.x,h=f===void 0?0:f,d=e.y,g=d===void 0?0:d,p=e.tickLabelFormatter,m=e.selectedTickStyle,_=m===void 0?znt:m,S=e.unselectedTickStyle,M=S===void 0?Unt:S,R=e.tooltipBackgroundColor,F=e.tooltipFomatter;this.graph=t,this.group=i,this.sliceGroup=i.addGroup({name:"slice-group"}),this.canvas=r,this.width=a,this.height=o,this.padding=s,this.data=l,this.start=u,this.end=c,this.tickLabelFormatter=p,this.selectedTickStyle=_,this.unselectedTickStyle=M,this.x=h,this.y=g,this.tooltipBackgroundColor=R,this.tooltipFomatter=F,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return n.prototype.renderSlices=function(){var e=this,t=this,r=t.width,i=t.height,a=t.padding,o=t.data,s=t.start,l=t.end,u=t.tickLabelFormatter,c=t.selectedTickStyle,f=t.unselectedTickStyle,h=r-2*a,d=10,g=4,p=3*a+g+d,m=i-p-2*a,_=2,S=o.length,M=(h-_*(S-1))/S;this.tickWidth=M;var R=this.sliceGroup,F=[],V=[],nt=Math.round(S*s),at=Math.round(S*l);this.startTickRectId=nt,this.endTickRectId=at,o.forEach(function(gt,Tt){var Ct=Tt>=nt&&Tt<=at,te=Ct?c:f,Kt=R.addShape("rect",{attrs:K_({x:a+Tt*(M+_),y:a,width:M,height:m},te),draggable:!0,name:"tick-rect-"+Tt}),ne=R.addShape("rect",{attrs:{x:a+Tt*M+_*(2*Tt-1)/2,y:a,width:Tt===0||Tt===S-1?M+_/2:M+_,height:m,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-"+Tt});ne.toFront();var ee=Kt.getBBox(),ve=(ee.minX+ee.maxX)/2;F.push({rect:Kt,pickRect:ne,value:gt.date,x:ve,y:ee.minY});var ie;if(u?(ie=u(gt),!(0,v.isString)(ie)&&ie&&(ie=gt.date)):Tt%Math.round(S/10)==0&&(ie=gt.date),ie){V.push(ie);var ye=ee.maxY+a*2;R.addShape("line",{attrs:{stroke:"#BFBFBF",x1:ve,y1:ye,x2:ve,y2:ye+g}});var Ee=ye+g+a,we=R.addShape("text",{attrs:{fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:ve,y:Ee,textAlign:"center",text:ie,textBaseline:"top",fontSize:10,fontFamily:e.fontFamily||"Arial, sans-serif"},capture:!1}),Pe=we.getBBox();Pe.maxX>r?we.attr("textAlign","right"):Pe.minX<0&&we.attr("textAlign","left")}}),this.tickRects=F;var xt=this.group;this.currentSpeed=1,this.controllerBtnGroup=new bN({group:xt,x:this.x,y:this.y+i+5,width:r,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"})},n.prototype.initEvent=function(){var e=this,t=this.sliceGroup;t.on("click",function(c){var f=c.target;if(!(f.get("type")!=="rect"||!f.get("name"))){var h=parseInt(f.get("name").split("-")[2],10);if(!isNaN(h)){var d=e.tickRects,g=e.unselectedTickStyle;d.forEach(function(S){S.rect.attr(g)});var p=e.selectedTickStyle;d[h].rect.attr(p),e.startTickRectId=h,e.endTickRectId=h;var m=d.length,_=h/m;e.graph.emit(tl,{value:[_,_]})}}}),t.on("dragstart",function(c){var f=e.tickRects,h=e.unselectedTickStyle;f.forEach(function(S){S.rect.attr(h)});var d=c.target,g=parseInt(d.get("name").split("-")[2],10),p=e.selectedTickStyle;f[g].rect.attr(p),e.startTickRectId=g;var m=f.length,_=g/m;e.graph.emit(tl,{value:[_,_]}),e.dragging=!0}),t.on("dragover",function(c){if(!!e.dragging&&c.target.get("type")==="rect"){for(var f=parseInt(c.target.get("name").split("-")[2],10),h=e.startTickRectId,d=e.tickRects,g=e.selectedTickStyle,p=e.unselectedTickStyle,m=0;m<d.length;m++){var _=m>=h&&m<=f?g:p;d[m].rect.attr(_)}var S=d.length;e.endTickRectId=f;var M=h/S,R=f/S;e.graph.emit(tl,{value:[M,R]})}}),t.on("drop",function(c){if(!!e.dragging&&(e.dragging=!1,c.target.get("type")==="rect")){var f=e.startTickRectId,h=parseInt(c.target.get("name").split("-")[2],10);if(!(h<f)){var d=e.selectedTickStyle,g=e.tickRects;g[h].rect.attr(d),e.endTickRectId=h;var p=g.length,m=f/p,_=h/p;e.graph.emit(tl,{value:[m,_]})}}});var r=this,i=r.tooltipBackgroundColor,a=r.tooltipFomatter,o=r.canvas,s=new Gnt({container:o.get("container"),backgroundColor:i}),l=this.tickRects;l.forEach(function(c){var f=c.pickRect;f.on("mouseenter",function(h){var d=h.target;if(d.get("type")==="rect"){var g=parseInt(d.get("name").split("-")[2],10),p=o.getClientByPoint(l[g].x,l[g].y);s.show({x:l[g].x,y:l[g].y,clientX:p.x,clientY:p.y,text:a?a(l[g].value):l[g].value})}}),f.on("mouseleave",function(h){s.hide()})});var u=this.group;u.on(Xu+":click",function(){e.isPlay=!e.isPlay,e.changePlayStatus()}),u.on(np+":click",function(){e.updateStartEnd(1)}),u.on(ip+":click",function(){e.updateStartEnd(-1)}),u.on(_f,function(c){var f=c.type,h=c.speed;e.currentSpeed=h})},n.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(pN,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(yN,null))},n.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e.currentSpeed;e.frameCount%(60/t)==0&&(e.frameCount=0,e.updateStartEnd(1)),e.frameCount++,e.isPlay&&(e.playHandler=e.startPlay())}):void 0},n.prototype.updateStartEnd=function(e){var t=this,r=this.tickRects,i=r.length,a=this.unselectedTickStyle,o=this.selectedTickStyle,s=t.endTickRectId;if(e>0?t.endTickRectId++:(r[t.endTickRectId].rect.attr(a),t.endTickRectId--),s!==t.startTickRectId)t.endTickRectId<t.startTickRectId&&(t.startTickRectId=t.endTickRectId);else{for(var l=t.startTickRectId;l<=t.endTickRectId-1;l++)r[l].rect.attr(a);t.startTickRectId=t.endTickRectId}if(r[t.endTickRectId]){r[t.endTickRectId].rect.attr(o);var u=t.startTickRectId/i,c=t.endTickRectId/i;this.graph.emit(tl,{value:[u,c]})}},n.prototype.destory=function(){this.graph.off(tl);var e=this.sliceGroup;e.off("click"),e.off("dragstart"),e.off("dragover"),e.off("drop"),this.tickRects.forEach(function(t){var r=t.pickRect;r.off("mouseenter"),r.off("mouseleave")}),this.tickRects.length=0,e.off(Xu+":click"),e.off(np+":click"),e.off(ip+":click"),e.off(_f),this.sliceGroup.destroy()},n}(),Vnt=Wnt,Xnt=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zl=function(){return zl=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},zl.apply(this,arguments)},Ynt=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},Hnt=4,jnt=26,Znt=function(n){Xnt(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1}},e.prototype.initContainer=function(){var t=this.get("graph"),r=this._cfgs,i=r.width,a=r.height,o=this.get("className")||"g6-component-timebar",s=this.get("container"),l=this.get("graph").get("container"),u;s?((0,v.isString)(s)&&(s=document.getElementById(s)),u=s):(u=rt("<div class='"+o+"'></div>"),ct(u,{position:"relative"})),l.appendChild(u),this.set("timeBarContainer",u);var c,f=t.get("renderer");f==="SVG"?c=new Ph({container:u,width:i,height:a}):c=new Al({container:u,width:i,height:a}),this.set("canvas",c)},e.prototype.init=function(){this.initContainer();var t=this.get("canvas"),r=t.addGroup({name:"timebar-group"});this.set("timeBarGroup",r),this.renderTrend(),this.initEvent();var i=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",i)},e.prototype.renderTrend=function(){var t=this._cfgs,r=t.width,i=t.x,a=t.y,o=t.padding,s=t.type,l=t.trend,u=t.slider,c=t.controllerCfg,f=t.textStyle,h=t.tick,d=t.backgroundStyle,g=t.foregroundStyle,p=l.data,m=Ynt(l,["data"]),_=r-2*o,S=s==="trend"?jnt:Hnt,M=this.get("graph"),R=this.get("timeBarGroup"),F=this.get("canvas"),V=null;s==="trend"||s==="simple"?V=new Bnt(zl(zl({graph:M,canvas:F,group:R,type:s,x:i+o,y:s==="trend"?a+o:a+o+15,width:_,height:S,padding:o,backgroundStyle:d,foregroundStyle:g,trendCfg:zl(zl({},m),{data:p.map(function(nt){return nt.value})})},u),{tick:{ticks:p,tickLabelFormatter:h.tickLabelFormatter,tickLabelStyle:h.tickLabelStyle,tickLineStyle:h.tickLineStyle},handlerStyle:zl(zl({},u.handlerStyle),{height:u.height||S}),controllerCfg:c,textStyle:f})):s==="tick"&&(V=new Vnt(zl({graph:M,canvas:F,group:R,x:i+o,y:a+o},h))),this.set("timebar",V)},e.prototype.filterData=function(t){var r,i=t.value,a=null,o=this._cfgs.type;if(o==="trend"||o==="simple"?a=this._cfgs.trend.data:o==="tick"&&(a=this._cfgs.tick.data),!a||a.length===0){console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E");return}var s=this.get("rangeChange"),l=this.get("graph"),u=Math.round(a.length*i[0]),c=Math.round(a.length*i[1]);c=c>=a.length?a.length-1:c,u=u>=a.length?a.length-1:u;var f=(r=this._cfgs.tick)===null||r===void 0?void 0:r.tickLabelFormatter,h=f?f(a[u]):a[u].date,d=f?f(a[c]):a[c].date;if(o!=="tick"){var g=this.get("timebar");g.setText(h,d)}if(s)s(l,h,d);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=l.get("data"));var p=this.cacheGraphData.nodes.filter(function(S){return S.date>=a[u].date&&S.date<=a[c].date}),m=p.map(function(S){return S.id}),_=[];this.cacheGraphData.edges&&(_=this.cacheGraphData.edges.filter(function(S){return m.includes(S.source)&&m.includes(S.target)}),this.get("filterEdge")&&(_=_.filter(function(S){return S.date>=a[u].date&&S.date<=a[c].date}))),l.changeData({nodes:p,edges:_})}},e.prototype.initEvent=function(){var t=this,r=0,i=0,a=this._cfgs.type;!a||a==="trend"||a==="simple"?(r=this._cfgs.slider.start,i=this._cfgs.slider.end):a==="tick"&&(r=this._cfgs.tick.start,i=this._cfgs.tick.end);var o=this.get("graph");o.on("afterrender",function(s){t.filterData({value:[r,i]})}),o.on(tl,(0,v.throttle)(function(s){t.filterData(s)},200,{trailing:!0,leading:!0}))},e.prototype.destroy=function(){var t=this.get("timebar");t&&t.destory&&t.destory(),n.prototype.destroy.call(this);var r=this.get("timeBarContainer");if(r){var i=this.get("container");i||(i=this.get("graph").get("container")),(0,v.isString)(i)&&(i=document.getElementById(i)),i.removeChild(r)}},e}(Oo),Knt=Znt,$nt=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Qnt=Jo.applyMatrix;function Jnt(n,e){var t,r;if(n.naturalWidth)t=n.naturalWidth,r=n.naturalHeight;else{var i=new Image;i.src=n.src,i.onload=function(){e&&e(i.width,i.height)}}return[t,r]}var qnt=function(n){$nt(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,i=r.graph;if(!this.destroyed){var a=this.get("container");(0,v.isString)(a)&&(a=document.getElementById(a));var o=rt("<div class="+r.viewportClassName+`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff'>
      </div>`),s=0,l=0,u=!1,c=0,f=0,h=0,d=0,g=0,p=0;a.addEventListener("mousedown",function(m){if(r.refresh=!1,m.target===o){var _=o.style;h=parseInt(_.width,10),d=parseInt(_.height,10);var S=t.get("width"),M=t.get("height");h>S||d>M||(p=i.getZoom(),g=t.get("ratio"),u=!0,s=m.clientX,l=m.clientY)}},!1),a.addEventListener("mousemove",function(m){if(!(!u||(0,v.isNil)(m.clientX)||(0,v.isNil)(m.clientY))){var _=t.get("width"),S=t.get("height"),M=o.style;c=parseInt(M.left,10),f=parseInt(M.top,10),h=parseInt(M.width,10),d=parseInt(M.height,10);var R=s-m.clientX,F=l-m.clientY;c-R<0?R=c:c-R+h>=_&&(R=0),f-F<0?F=f:f-F+d>=S&&(F=0),c-=R,f-=F,ct(o,{left:c+"px",top:f+"px"}),i.translate(R*p/g,F*p/g),s=m.clientX,l=m.clientY}},!1),a.addEventListener("mouseleave",function(){u=!1,r.refresh=!0},!1),a.addEventListener("mouseup",function(){u=!1,r.refresh=!0},!1),this.set("viewport",o),a.appendChild(o)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("width"),i=this.get("height"),a=this.get("graph"),o=a.get("width"),s=a.get("height"),l=o/s,u=a.getGroup(),c=u.getCanvasBBox(),f=[(c.minX+c.maxX)/2,(c.minY+c.maxY)/2],h=[c.maxX-c.minX,c.maxY-c.minY],d={centerX:f[0],centerY:f[1],width:0,height:0,minX:0,minY:0};c[0]/c[1]>l?(d.width=h[0],d.height=d.width/l):(d.height=h[1],d.width=d.height*l),d.minX=f[0]-d.width/2,d.minY=f[1]-d.height/2;var g=u.getMatrix();g||(g=[1,0,0,0,1,0,0,0,1]);var p=ra.invert([1,0,0,0,1,0,0,0,1],g),m=Qnt({x:d.minX,y:d.minY},p),_=a.getCanvasByPoint(m.x,m.y),S=this.get("viewport");S||this.initViewport();var M=o/d.width,R=M*r,F=M*i,V=r*-_.x/d.width,nt=i*-_.y/d.height,at=V+R,xt=nt+F;V<0&&(R+=V,V=0),at>r&&(R=R-(at-r)),nt<0&&(F+=nt,nt=0),xt>i&&(F=F-(xt-i)),this.set("ratio",t);var gt=V+"px",Tt=nt+"px";ct(S,{left:gt,top:Tt,width:R+"px",height:F+"px"})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),i=r.get("width"),a=r.get("height"),o=a/i,s=t.get("className"),l=t.get("container"),u=t.get("width"),c=t.get("height");!u&&!c&&(u=200),u?(c=o*u,t.set("height",c)):(u=1/o*c,t.set("width",u));var f=rt("<div class='"+s+"' style='width: "+u+"px; height: "+c+"px; overflow: hidden; position: relative;'></div>");(0,v.isString)(l)&&(l=document.getElementById(l)),l?l.appendChild(f):r.get("container").appendChild(f),t.set("container",f);var h=rt('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');f.appendChild(h);var d=rt('<span style="display: table-cell; vertical-align: middle; "></span>');h.appendChild(d),t.set("containerDOM",h),t.set("containerSpan",d);var g=rt('<img alt="" src="'+this.get("graphImg")+'" style="display: inline-block; user-select: none;" draggable="false" />');t.set("imgDOM",g),t.updateImgSize(),d.appendChild(g),t.updateCanvas()},e.prototype.updateImgSize=function(){var t=this,r=t.get("imgDOM"),i=t.get("width"),a=t.get("height");r.onload=function(){var o=Jnt(r);o[0]>o[1]?r.width=i:r.height=a}},e.prototype.updateCanvas=function(){var t=this.get("refresh");if(!!t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var i=this.get("width"),a=r.get("canvas").getCanvasBBox(),o=a.width,s=i/o;this.set("ratio",s),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(t){var r=this,i=r.get("imgDOM");i.remove(),r.set("graphImg",t);var a=rt('<img alt="" src="'+t+'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>');r.set("imgDOM",a),a.src=t,r.updateImgSize();var o=r.get("containerSpan");o.appendChild(a),r.updateCanvas()},e.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},e}(Oo),tit=qnt,eit=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$_=function(){return $_=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},$_.apply(this,arguments)},rit=Jo.distance,_N=.05,SN={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},nit=function(n){eit(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,v.clone)(SN),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"};break}return t},e.prototype.init=function(){var t=this,r=t.get("showLabel"),i=r==="node"||r==="both",a=r==="edge"||r==="both";t.set("showNodeLabel",i),t.set("showEdgeLabel",a);var o=t.get("shouldShow");o||t.set("shouldShow",function(){return!0})},e.prototype.createDelegate=function(t){var r=this,i=r.get("delegate");(!i||i.destroyed)&&(r.filter(t),i=r.get("delegate"),i.on("dragstart",function(a){}),i.on("drag",function(a){r.filter(a)}),this.get("scaleRBy")==="wheel"&&i.on("mousewheel",function(a){r.scaleRByWheel(a)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var i=r.get("graph"),a,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,l=s||i.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-_N:a=1/(1-_N);var u=r.get("maxR"),c=r.get("minR"),f=r.get("r");(f>(u||i.get("height"))&&a>1||f<(c||i.get("height")*.05)&&a<1)&&(a=1),f*=a,r.set("r",f),r.filter(t)}},e.prototype.filter=function(t){var r=this,i=r.get("graph"),a=i.getNodes(),o={},s=r.get("r"),l=r.get("type"),u={x:t.x,y:t.y};r.updateDelegate(u,s);var c=r.get("shouldShow"),f=r.get("vShapes");f&&f.forEach(function(_){_.remove(),_.destroy()}),f=[],a.forEach(function(_){var S=_.getModel(),M=S.x,R=S.y;rit({x:M,y:R},u)<s&&(o[S.id]=_)});var h=i.getEdges(),d=[];h.forEach(function(_){var S=_.getModel(),M=S.source,R=S.target;c(S)&&(l==="only-source"||l==="one"?o[M]&&!o[R]&&d.push(_):l==="only-target"||l==="one"?o[R]&&!o[M]&&d.push(_):l==="both"&&o[M]&&o[R]&&d.push(_))});var g=r.get("showNodeLabel"),p=r.get("showEdgelabel"),m=i.get("group");d.forEach(function(_){var S=_.get("group").get("children");S.forEach(function(M){var R=M.get("type"),F=m.addShape(R,{attrs:M.attr()});f.push(F),g&&R==="text"&&F.set("visible",!0)})}),Object.keys(o).forEach(function(_){var S=o[_],M=S.get("group").clone();if(m.add(M),f.push(M),p)for(var R=M.get("children"),F=0;F<R.length;F++){var V=R[F];V.get("type")==="text"&&V.set("visible",!0)}}),r.set("vShapes",f)},e.prototype.updateParams=function(t){var r=this,i=t.r,a=t.trigger,o=t.minR,s=t.maxR,l=t.scaleRBy,u=t.showLabel,c=t.shouldShow;if(isNaN(t.r)||r.set("r",i),isNaN(s)||r.set("maxR",s),isNaN(o)||r.set("minR",o),(a==="mousemove"||a==="click")&&r.set("trigger",a),l==="wheel"||l==="unset"){r.set("scaleRBy",l),r.get("delegate").remove(),r.get("delegate").destroy();var f=r.get("dPercentText");f&&(f.remove(),f.destroy())}(u==="node"||u==="both")&&r.set("showNodeLabel",!0),(u==="edge"||u==="both")&&r.set("showEdgeLabel",!0),c&&r.set("shouldShow",c)},e.prototype.updateDelegate=function(t,r){var i=this,a=i.get("graph"),o=i.get("delegate");if(!o||o.destroyed){var s=a.get("group"),l=i.get("delegateStyle")||SN;o=s.addShape("circle",{attrs:$_({r,x:t.x,y:t.y},l),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&o.on("mousewheel",function(u){i.scaleRByWheel(u)})}else o.attr({x:t.x,y:t.y,r});i.set("delegate",o)},e.prototype.clear=function(){var t=this,r=t.get("vShapes");r&&r.forEach(function(a){a.remove(),a.destroy()}),r=[],t.set("vShapes",r);var i=t.get("delegate");i&&!i.destroyed&&(i.remove(),i.destroy())},e.prototype.destroy=function(){this.clear()},e}(Oo),iit=nit,ait=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),oit=Jo.pointLineDistance,sit={stroke:"#FA8C16",lineWidth:1},lit=function(n){ait(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{line:sit,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(t){var r=t.item,i=r.get("delegateShape")||r,a=i.getBBox(),o=r.getModel(),s=o.x-a.x,l=o.y-a.y;this.show({x:a.minX+s,y:a.minY+l},{width:a.width,height:a.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var t=this._cfgs,r=t.horizontalLines,i=t.verticalLines,a=t.itemAlignType,o=this.get("graph"),s=o.getNodes();s.forEach(function(l){var u=l.getBBox(),c=l.get("id");a===!0||a==="horizontal"?(r[c+"tltr"]=[u.minX,u.minY,u.maxX,u.minY,l],r[c+"lcrc"]=[u.minX,u.centerY,u.maxX,u.centerY,l],r[c+"blbr"]=[u.minX,u.maxY,u.maxX,u.maxY,l]):a==="center"&&(r[c+"lcrc"]=[u.minX,u.centerY,u.maxX,u.centerY,l]),a===!0||a==="vertical"?(i[c+"tlbl"]=[u.minX,u.minY,u.minX,u.maxY,l],i[c+"tcbc"]=[u.centerX,u.minY,u.centerX,u.maxY,l],i[c+"trbr"]=[u.maxX,u.minY,u.maxX,u.maxY,l]):a==="center"&&(i[c+"tcbc"]=[u.centerX,u.minY,u.centerX,u.maxY,l])})},e.prototype.show=function(t,r){var i=(0,v.mix)({},t);return this.itemAlign(t,r,i),t},e.prototype.itemAlign=function(t,r,i){var a=this,o=this._cfgs,s=o.horizontalLines,l=o.verticalLines,u=o.tolerance,c={x:i.x+r.width/2,y:i.y},f={x:i.x+r.width/2,y:i.y+r.height/2},h={x:i.x+r.width/2,y:i.y+r.height},d={x:i.x,y:i.y+r.height/2},g={x:i.x+r.width,y:i.y+r.height/2},p=[],m=[],_=null;if(this.clearAlignLine(),(0,v.each)(s,function(M){M[4].isVisible&&(p.push(a.getLineDisObject(M,c)),p.push(a.getLineDisObject(M,f)),p.push(a.getLineDisObject(M,h)))}),(0,v.each)(l,function(M){M[4].isVisible&&(m.push(a.getLineDisObject(M,d)),m.push(a.getLineDisObject(M,f)),m.push(a.getLineDisObject(M,g)))}),p.sort(function(M,R){return M.dis-R.dis}),m.sort(function(M,R){return M.dis-R.dis}),p.length!==0&&p[0].dis<u){t.y=p[0].line[1]-p[0].point.y+i.y,_={type:"item",horizontals:[p[0]]};for(var S=1;S<3;S++)p[0].dis===p[S].dis&&_.horizontals.push(p[S])}if(m.length!==0&&m[0].dis<u){t.x=m[0].line[0]-m[0].point.x+i.x,_?_.verticals=[m[0]]:_={type:"item",verticals:[m[0]]};for(var S=1;S<3;S++)m[0].dis===m[S].dis&&_.verticals.push(m[S])}_&&(_.bbox=r,this.addAlignLine(_))},e.prototype.addAlignLine=function(t){var r=t.bbox,i=t.type,a=t.horizontals,o=t.verticals,s=this._cfgs,l=s.line,u=s.alignLines,c=this.get("graph"),f=c.get("group");i==="item"&&(a&&(0,v.each)(a,function(h){var d=h.line,g=h.point,p=(d[0]+d[2])/2,m,_;g.x<p?(m=g.x-r.width/2,_=Math.max(d[0],d[2])):(m=g.x+r.width/2,_=Math.min(d[0],d[2]));var S=(0,v.mix)({x1:m,y1:d[1],x2:_,y2:d[1]},l),M=f.addShape("line",{attrs:S,capture:!1});u.push(M)}),o&&(0,v.each)(o,function(h){var d=h.line,g=h.point,p=(d[1]+d[3])/2,m,_;g.y<p?(m=g.y-r.height/2,_=Math.max(d[1],d[3])):(m=g.y+r.height/2,_=Math.min(d[1],d[3]));var S=(0,v.mix)({x1:d[0],y1:m,x2:d[0],y2:_},l),M=f.addShape("line",{attrs:S,capture:!1});u.push(M)}))},e.prototype.getLineDisObject=function(t,r){return{line:t,point:r,dis:oit(t,r)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;(0,v.each)(t,function(r){r.remove()}),t.length=0},e.prototype.destory=function(){var t=this._cfgs,r=t.horizontalLines,i=t.verticalLines,a=this.get("graph"),o=a.getNodes();o.forEach(function(s){var l=s.get("id");delete r[l+"tltr"],delete r[l+"lcrc"],delete r[l+"blbr"],delete i[l+"tlbl"],delete i[l+"tcbc"],delete i[l+"trbr"]}),this.clearAlignLine()},e}(Oo),uit=lit,cit=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ni=function(){return Ni=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Ni.apply(this,arguments)},fit=["click","mouseenter"],hit=function(n){cit(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{},r=t.multiple;r&&t.trigger==="mouseenter"&&this.set("multiple",!1);var i=this.get("align");if(!i){var a=this.get("position").split("-");a.includes("left")&&(i="left"),a.includes("right")?i="right":i="center",this.set("align",i)}var o=this.get("graph"),s=o.get("container"),l=rt(`<div class='g6-legend-container' style="position: absolute;"></div>`);s.appendChild(l),this.set("container",l);var u=this.render();ct(l,this.getContainerPos(u)),this.bindEvents()},e.prototype.getContainerPos=function(t){t===void 0&&(t=[0,0]);var r=this,i=r.get("graph"),a=this.get("offsetX"),o=this.get("offsetY"),s=this.get("margin"),l=this.get("position").split("-"),u={top:0,right:1,bottom:2,left:3},c=0,f=0,h={left:(i.getWidth()-t[0])/2+c,top:(i.getHeight()-t[1])/2+f};return l.forEach(function(d){var g=s[u[d]],p=d;switch(d){case"top":g+=f;break;case"left":g+=c;break;case"bottom":g=i.getHeight()-t[1]-g+f,p="top";break;default:g=i.getWidth()-t[0]-g+c,p="left";break}h[p]=g}),h.top+=o+i.getContainer().offsetTop,h.left+=a+i.getContainer().offsetLeft,Object.keys(h).forEach(function(d){h[d]=h[d]+"px"}),h},e.prototype.bindEvents=function(){var t=this,r=t.get("filter");if(!(!r||!r.enable)){var i=r.trigger||"click";fit.includes(i)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),i="click");var a=t.get("legendCanvas");i==="mouseenter"?(a.on("node-container:mouseenter",function(o){return t.filterData(o)}),a.on("node-container:mouseleave",function(o){t.clearFilter(),t.clearActiveLegend()})):(a.on("node-container:click",function(o){return t.filterData(o)}),a.on("click",function(o){o.target&&o.target.isCanvas&&o.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())}))}},e.prototype.changeData=function(t){this.set("data",t);var r=this.render();ct(this.get("container"),this.getContainerPos(r))},e.prototype.activateLegend=function(t){var r=this.get("filter"),i=r==null?void 0:r.multiple;i||this.clearActiveLegend();var a=t.get("parent");a.get("active")?(a.set("active",!1),this.findLegendItemsByState("active").length&&a.set("inactive",!0)):(a.set("inactive",!1),a.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(f){f.set("inactive",!0)}):this.clearActiveLegend();var o=(r==null?void 0:r.lengedStateStyles)||{},s=(o==null?void 0:o.inactive)||{opacity:.5,"text-shape":{opacity:.5}},l=s["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(f){var h=f.get("children"),d=h[0],g=h[1];d.attr(Ni(Ni({},d.get("oriAttrs")),s)),g.attr(Ni(Ni({},g.get("oriAttrs")),l))});var u=(o==null?void 0:o.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},c=u["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(f){var h=f.get("children"),d=h[0],g=h[1];d.attr(Ni(Ni({},d.get("oriAttrs")),u)),g.attr(Ni(Ni({},g.get("oriAttrs")),c))})},e.prototype.findLegendItemsByState=function(t,r,i){r===void 0&&(r="all"),i===void 0&&(i=!0);var a=this.get("legendCanvas").find(function(l){return l.get("name")==="root"}),o=a.find(function(l){return l.get("name")==="node-group"}),s=a.find(function(l){return l.get("name")==="edge-group"});return r==="node"?o.get("children").filter(function(l){return!!l.get(t)===i}):r==="edge"?s.get("children").filter(function(l){return!!l.get(t)===i}):o.get("children").filter(function(l){return!!l.get(t)===i}).concat(s.get("children").filter(function(l){return!!l.get(t)===i}))},e.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas"),r=t.find(function(a){return a.get("name")==="root"}),i=[r.find(function(a){return a.get("name")==="node-group"}),r.find(function(a){return a.get("name")==="edge-group"})];i.forEach(function(a){a.get("children").forEach(function(o){o.set("active",!1),o.set("inactive",!1);var s=o.get("children"),l=s[0],u=s[1];l.attr(l.get("oriAttrs")),u.attr(u.get("oriAttrs"))})})},e.prototype.filterData=function(t){var r=this.get("filter"),i=r==null?void 0:r.filterFunctions;if(!(!r||!i)){var a=this.get("legendCanvas"),o=this.get("graph"),s=r.graphActiveState||"active",l=r.graphInactiveState||"inactive",u=r.multiple;this.clearFilter(),u||this.clearActiveLegend(),this.activateLegend(t.target);var c=a.find(function(_){return _.get("name")==="root"}),f=c.find(function(_){return _.get("name")==="node-group"}),h=c.find(function(_){return _.get("name")==="edge-group"}),d=f.get("children").filter(function(_){return _.get("active")}),g=h.get("children").filter(function(_){return _.get("active")}),p=0,m=["getNodes","getEdges"];m.forEach(function(_){o[_]().forEach(function(S){var M=!1,R=_==="getNodes"?d:g;R.forEach(function(F){var V=i[F.get("id")];M=M||V(S.getModel())}),M?(o.setItemState(S,l,!1),o.setItemState(S,s,!0),p++):(o.setItemState(S,s,!1),o.setItemState(S,l,!0))})}),p||m.forEach(function(_){o[_]().forEach(function(S){o.clearItemStates(S,[l])})})}},e.prototype.clearFilter=function(){var t=this.get("graph"),r=this.get("filter");if(!!r){var i=r.graphActiveState||"active",a=r.graphInactiveState||"inactive";t.getNodes().forEach(function(o){t.clearItemStates(o,[i,a])}),t.getEdges().forEach(function(o){t.clearItemStates(o,[i,a])})}},e.prototype.render=function(){var t=this;this.processData();var r=this.get("legendCanvas");if(!r){r=new Al({container:this.get("container"),width:200,height:200});var i=r.addGroup({name:"root"});i.addGroup({name:"node-group"}),i.addGroup({name:"edge-group"}),this.set("legendCanvas",r)}var a=r.find(function(ve){return ve.get("name")==="root"}),o=a.find(function(ve){return ve.get("name")==="node-group"}),s=a.find(function(ve){return ve.get("name")==="edge-group"}),l=this.get("itemsData"),u=["nodes","edges"],c=[o,s];u.forEach(function(ve,ie){l[ve].forEach(function(ye){var Ee,we=c[ie].addGroup({id:ye.id,name:"node-container"}),Pe,Ve=ye.type,he=t.getShapeSize(ye),Te=he.width,Je=he.height,Ze=he.r,ar=t.getStyle(ve.substr(0,4),ye);switch(ye.type){case"circle":Pe={r:Ze,x:0,y:0};break;case"rect":Pe={width:Te,height:Je,x:-Te/2,y:-Je/2};break;case"ellipse":Pe={r1:Te,r2:Je,x:0,y:0};break;case"line":Pe={x1:-Te/2,y1:0,x2:Te/2,y2:0},Ve="line";break;case"quadratic":Pe={path:[["M",-Te/2,0],["Q",0,Te/2,Te/2,0]]},Ve="path";break;case"cubic":Pe={path:[["M",-Te/2,0],["C",-Te/6,Te/2,Te/6,-Te/2,Te/2,0]]},Ve="path";break;default:Pe={r:Ze,x:0,y:0};break}var cr=we.addShape(Ve,{attrs:Ni(Ni({},Pe),ar),name:ye.type+"-node-keyShape",oriAttrs:Ni({opacity:1},ar)});if(ye.label){var Dr=cr.getBBox(),sn=((Ee=ye.labelCfg)===null||Ee===void 0?void 0:Ee.style)||{},Wr=Ni({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},sn);we.addShape("text",{attrs:Ni({x:Dr.maxX+4,y:0,text:ye.label},Wr),className:"legend-label",name:ye.type+"-node-text",oriAttrs:Wr})}})});var f=this.get("padding"),h,d=a.find(function(ve){return ve.get("name")==="title-container"}),g={height:0,maxY:0,width:0};if(this.get("title")){d||(d=a.addGroup({name:"title-container"}));var p={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:f[0]},m=this.get("titleConfig")||{},_=Object.assign(p,m.style||{});h=d.addShape("text",{attrs:Ni({text:this.get("title")},_)}),g=d.getCanvasBBox(),d.setMatrix([1,0,0,0,1,0,m.offsetX,m.offsetY,1])}this.layoutItems();var S=a.getCanvasBBox(),M=o.getCanvasBBox(),R=M.minX<0?Math.abs(M.minX)+f[3]:f[3],F=g.maxY<M.minY?Math.abs(g.maxY-M.minY)+f[0]:g.maxY+f[0],V=[1,0,0,0,1,0,R,F,1];o.setMatrix(V),S=a.getCanvasBBox();var nt=[S.minX+S.width+f[1],S.minY+S.height+f[2]];if(h){var m=Ni({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));g=d.getCanvasBBox();var at=d.getMatrix()||[1,0,0,0,1,0,0,0,1];m.position==="center"?at[6]=nt[0]/2+m.offsetX:m.position==="right"?(at[6]=nt[0]-f[3]+m.offsetX,h.attr({textAlign:"right"})):(at[6]=f[3]+m.offsetX,h.attr({textAlign:"left"})),d.setMatrix(at),g=d.getCanvasBBox(),R=M.minX<0?Math.abs(M.minX)+f[3]:f[3],F=M.minY<g.maxY?Math.abs(g.maxY-M.minY)+f[0]:g.maxY+f[0],V=[1,0,0,0,1,0,R,F,1],o.setMatrix(V);var xt=[1,0,0,0,1,0,R,F,1];this.get("layout")==="vertical"?xt[6]+=M.maxX+this.get("horiSep"):xt[7]+=M.maxY+this.get("vertiSep"),s.setMatrix(xt)}else{M=o.getCanvasBBox();var gt=[1,0,0,0,1,0,0,0,1];this.get("layout")==="vertical"?gt[6]+=V[6]+M.maxX+this.get("horiSep"):gt[7]+=V[7]+M.maxY+this.get("vertiSep"),s.setMatrix(gt)}S=a.getCanvasBBox(),M=o.getCanvasBBox(),V=o.getMatrix()||[1,0,0,0,1,0,0,0,1];var Tt=s.getMatrix()||[1,0,0,0,1,0,0,0,1],Ct=s.getCanvasBBox();nt=[Math.max(M.width+V[6],Ct.width+Tt[6])+f[1],Math.max(M.height+V[7],Ct.height+Tt[7])+f[2]],r.changeSize(nt[0],nt[1]);var te=this.get("containerStyle"),Kt=a.getMatrix()||[1,0,0,0,1,0,0,0,1],ne=Jo.invertMatrix({x:0,y:0},Kt),ee=a.addShape("rect",{attrs:Ni({x:ne.x+(te.lineWidth||1),y:ne.y+(te.lineWidth||1),width:nt[0]-2*(te.lineWidth||1),height:nt[1]-2*(te.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},te),name:"legend-back-rect",capture:!1});return ee.toBack(),nt},e.prototype.layoutItems=function(){var t=this.get("legendCanvas"),r=this.get("horiSep"),i=this.get("vertiSep"),a=this.get("layout"),o=this.get("align"),s=[0,0],l=t.find(function(R){return R.get("name")==="root"}),u=l.find(function(R){return R.get("name")==="node-group"}),c=l.find(function(R){return R.get("name")==="edge-group"}),f={min:0,max:-Infinity},h=-Infinity;u.get("children").forEach(function(R,F){F===0&&(f.min=s[0]);var V=R.get("children")[0],nt=R.getCanvasBBox(),at=V.getBBox(),xt=at.width,gt=at.height,Tt=0,Ct=0,te=0;a==="vertical"?(Ct=s[1],te=s[0]+xt/2,s[0]=te+nt.height+i,Tt=nt.maxX+Ct+xt/2):(Ct=s[0]+xt/2,te=s[1],s[0]=Ct+nt.width+r,Tt=nt.maxY+te+gt/2),s[0]>f.max&&(f.max=s[0]),Tt>h&&(h=Tt),R.setMatrix([1,0,0,0,1,0,Ct,te,1])});var d=f.max-f.min,g={min:0,max:-Infinity},p=u.getCanvasBBox();s[0]=0,s[1]=a==="vertical"?p.maxX+r:p.maxY+i,c.get("children").forEach(function(R,F){F===0&&(g.min=s[0]);var V=R.get("children")[0],nt=R.getCanvasBBox(),at=V.getBBox(),xt=at.width,gt=at.height,Tt=0,Ct=0;a==="vertical"?(Tt=s[1],Ct=s[0],s[0]=Ct+nt.height+i,R.setMatrix([1,0,0,0,1,0,0,Ct+gt/2,1])):(Tt=s[0],Ct=s[1],s[0]=Tt+nt.width+r,R.setMatrix([1,0,0,0,1,0,Tt+xt/2,0,1])),s[0]>g.max&&(g.max=s[0])});var m=g.max-g.min;if(o&&o!==""&&o!=="left"){var _=d-m,S=o==="center"?Math.abs(_)/2:Math.abs(_),M=_<0?u:c;M.get("children").forEach(function(R){var F=R.getMatrix()||[1,0,0,0,1,0,0,0,1];a==="vertical"?F[7]+=S:F[6]+=S,R.setMatrix(F)})}},e.prototype.processData=function(){var t=this.get("data"),r={nodes:[],edges:[]};t.nodes&&(t.nodes.sort(function(i,a){return i.order-a.order}),t.nodes.forEach(function(i){var a,o,s,l,u,c=i.size||[((a=i.style)===null||a===void 0?void 0:a.width)||((o=i.style)===null||o===void 0?void 0:o.r)||8,((s=i.style)===null||s===void 0?void 0:s.height)||((l=i.style)===null||l===void 0?void 0:l.r)||8],f=((u=i.labelCfg)===null||u===void 0?void 0:u.style)||{};r.nodes.push({id:i.id||(0,v.uniqueId)(),type:i.type||"circle",style:Ni({},i.style),order:i.order,label:i.label,itemType:"node",size:c,labelCfg:{position:"right",style:Ni({fontFamily:"Arial"},f)}})})),t.edges&&(t.edges.sort(function(i,a){return i.order-a.order}),t.edges.forEach(function(i){var a,o,s=i.type||"line";i.type==="cubic-horizontal"&&(s="cubic");var l=((a=i.labelCfg)===null||a===void 0?void 0:a.style)||{},u=i.size||[((o=i.style)===null||o===void 0?void 0:o.width)||8,1];r.edges.push({id:i.id||(0,v.uniqueId)(),type:s,size:u,style:Ni({lineWidth:(0,v.isArray)(u)?u[1]:1},i.style),order:i.order,label:i.label,itemType:"edge",labelCfg:{position:"right",style:Ni({fontFamily:"Arial"},l)}})})),this.set("itemsData",r)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(t){var r=this.get(t);if((0,v.isNumber)(r))this.set(t,[r,r,r,r]);else if((0,v.isArray)(r))switch(r.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[r[0],r[0],r[0],r[0]]);break;case 2:this.set(t,[r[0],r[1],r[0],r[1]]);break;case 3:this.set(t,[r[0],r[1],r[2],r[1]]);break;default:break}return this.get(t)},e.prototype.getShapeSize=function(t){var r,i,a;return t.size&&((0,v.isArray)(t.size)?(r=t.size[0],i=t.size[1]||t.size[0],a=t.size[0]/2):(0,v.isNumber)(t.size)&&(r=t.size,i=t.size,a=t.size/2)),t.style&&(t.style.width&&(r=t.style.width),t.style.height&&(i=t.style.height),t.style.r&&(a=t.style.r)),a||(a=5),r||(r=a),i||(i=a),{width:r,height:i,r:a}},e.prototype.getStyle=function(t,r){var i=t==="node"?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1};return Ni(Ni({},i),r.style||{})},e.prototype.destroy=function(){var t=this.get("graph"),r=t.get("container"),i=this.get("container");r.removeChild(i)},e}(Oo),dit=hit,vit={PluginBase:Oo,Menu:krt,Grid:Drt,Minimap:Vrt,Bundling:jrt,ToolBar:tnt,Tooltip:nnt,Fisheye:$rt,TimeBar:Knt,ImageMinimap:tit,EdgeFilterLens:iit,SnapLine:uit,Legend:dit},git=vit,pa=git;Ll("circle",{options:{size:Sr.defaultNode.size,style:{x:0,y:0,stroke:Sr.defaultNode.style.stroke,fill:Sr.defaultNode.style.fill,lineWidth:Sr.defaultNode.style.lineWidth},labelCfg:{style:{fill:Sr.nodeLabel.style.fill,fontSize:Sr.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Sr.defaultNode.linkPoints.size,lineWidth:Sr.defaultNode.linkPoints.lineWidth,fill:Sr.defaultNode.linkPoints.fill,stroke:Sr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.__assign)({},Sr.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=this.getOptions(e).icon,i=r===void 0?{}:r,a=this.getShapeStyle(e),o=(0,v.deepMix)({},i,e.icon),s=t.addShape("circle",{attrs:a,className:this.type+"-keyShape",draggable:!0}),l=o.width,u=o.height,c=o.show,f=o.text;return c&&(f?t.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):t.addShape("image",{attrs:(0,b.__assign)({x:-l/2,y:-u/2},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(e,t),s},drawLinkPoints:function(e,t){var r=this.getOptions(e).linkPoints,i=r===void 0?{}:r,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=(0,b.__rest)(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0]/2;o&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},f),{x:-d,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},f),{x:d,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},f),{x:0,y:-d,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),l&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},f),{x:0,y:d,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(e){var t=this.getOptions(e).style,r={stroke:e.color},i=(0,v.deepMix)({},t,r),a=this.getSize(e),o=a[0]/2,s=(0,b.__assign)({x:0,y:0,r:o},i);return s},update:function(e,t){var r=t.getContainer(),i=this.getSize(e),a={stroke:e.color,r:i[0]/2},o=t.get("keyShape"),s=(0,v.deepMix)({},o.attr(),a,e.style);this.updateShape(e,t,s,!0),this.updateLinkPoints(e,r)}},"single-node"),Ll("rect",{options:{size:[100,30],style:{radius:0,stroke:Sr.defaultNode.style.stroke,fill:Sr.defaultNode.style.fill,lineWidth:Sr.defaultNode.style.lineWidth},labelCfg:{style:{fill:Sr.nodeLabel.style.fill,fontSize:Sr.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Sr.defaultNode.linkPoints.size,lineWidth:Sr.defaultNode.linkPoints.lineWidth,fill:Sr.defaultNode.linkPoints.fill,stroke:Sr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,b.__assign)({},Sr.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),i=t.addShape("rect",{attrs:r,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawLinkPoints(e,t),i},drawLinkPoints:function(e,t){var r=this.getOptions(e).linkPoints,i=r===void 0?{}:r,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=(0,b.__rest)(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0],g=h[1];o&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},f),{x:-d/2,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},f),{x:d/2,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},f),{x:0,y:-g/2,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),l&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},f),{x:0,y:g/2,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(e){var t=this.getOptions(e).style,r={stroke:e.color},i=(0,v.mix)({},t,r),a=this.getSize(e),o=i.width||a[0],s=i.height||a[1],l=(0,b.__assign)({x:-o/2,y:-s/2,width:o,height:s},i);return l},update:function(e,t){var r=t.getContainer(),i=this.getOptions({}).style,a=this.getSize(e),o=t.get("keyShape");e.size||(a[0]=o.attr("width")||i.width,a[1]=o.attr("height")||i.height);var s={stroke:e.color,x:-a[0]/2,y:-a[1]/2,width:a[0],height:a[1]},l=(0,v.mix)({},i,o.attr(),s);l=(0,v.mix)(l,e.style),this.updateShape(e,t,l,!1),this.updateLinkPoints(e,r)}},"single-node"),Ll("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:Sr.defaultNode.style.stroke,fill:Sr.defaultNode.style.fill,lineWidth:Sr.defaultNode.style.lineWidth},labelCfg:{style:{fill:Sr.nodeLabel.style.fill,fontSize:Sr.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Sr.defaultNode.linkPoints.size,lineWidth:Sr.defaultNode.linkPoints.lineWidth,fill:Sr.defaultNode.linkPoints.fill,stroke:Sr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.__assign)({},Sr.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(e,t){var r=this.getOptions(e).icon,i=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("ellipse",{attrs:a,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0}),s=i.width,l=i.height,u=i.show,c=i.text;return u&&(c?t.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):t.addShape("image",{attrs:(0,b.__assign)({x:-s/2,y:-l/2},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=this.getOptions(e).linkPoints,i=r===void 0?{}:r,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=(0,b.__rest)(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0]/2,g=h[1]/2;o&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},f),{x:-d,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},f),{x:d,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},f),{x:0,y:-g,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),l&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},f),{x:0,y:g,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(e){var t=this.getOptions(e).style,r={stroke:e.color},i=(0,v.mix)({},t,r),a=this.getSize(e),o=a[0]/2,s=a[1]/2,l=(0,b.__assign)({x:0,y:0,rx:o,ry:s},i);return l},update:function(e,t){var r=t.getContainer(),i=this.getOptions({}).style,a=this.getSize(e),o={stroke:e.color,rx:a[0]/2,ry:a[1]/2},s=t.get("keyShape"),l=(0,v.mix)({},i,s.attr(),o);l=(0,v.mix)(l,e.style),this.updateShape(e,t,l,!0),this.updateLinkPoints(e,r)}},"single-node"),Ll("diamond",{options:{size:[80,80],style:{stroke:Sr.defaultNode.style.stroke,fill:Sr.defaultNode.style.fill,lineWidth:Sr.defaultNode.style.lineWidth},labelCfg:{style:{fill:Sr.nodeLabel.style.fill,fontSize:Sr.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Sr.defaultNode.linkPoints.size,lineWidth:Sr.defaultNode.linkPoints.lineWidth,fill:Sr.defaultNode.linkPoints.fill,stroke:Sr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.__assign)({},Sr.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(e,t){var r=this.getOptions(e).icon,i=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),s=i.width,l=i.height,u=i.show,c=i.text;return u&&(c?t.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):t.addShape("image",{attrs:(0,b.__assign)({x:-s/2,y:-l/2},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=this.getOptions(e).linkPoints,i=r===void 0?{}:r,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=(0,b.__rest)(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0],g=h[1];o&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},f),{x:-d/2,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},f),{x:d/2,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},f),{x:0,y:-g/2,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),l&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},f),{x:0,y:g/2,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getPath:function(e){var t=this.getSize(e),r=t[0],i=t[1],a=[["M",0,-i/2],["L",r/2,0],["L",0,i/2],["L",-r/2,0],["Z"]];return a},getShapeStyle:function(e){var t=this.getOptions(e).style,r={stroke:e.color},i=(0,v.mix)({},t,r),a=this.getPath(e),o=(0,b.__assign)({path:a},i);return o},update:function(e,t){var r=t.getContainer(),i=this.getOptions({}).style,a=this.getPath(e),o={stroke:e.color,path:a},s=t.get("keyShape"),l=(0,v.mix)({},i,s.attr(),o);l=(0,v.mix)(l,e.style),this.updateShape(e,t,l,!0),this.updateLinkPoints(e,r)}},"single-node"),Ll("triangle",{options:{size:40,direction:"up",style:{stroke:Sr.defaultNode.style.stroke,fill:Sr.defaultNode.style.fill,lineWidth:Sr.defaultNode.style.lineWidth},labelCfg:{style:{fill:Sr.nodeLabel.style.fill,fontSize:Sr.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Sr.defaultNode.linkPoints.size,lineWidth:Sr.defaultNode.linkPoints.lineWidth,fill:Sr.defaultNode.linkPoints.fill,stroke:Sr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,b.__assign)({},Sr.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(e,t){var r=this.getOptions(e),i=r.icon,a=i===void 0?{}:i,o=r.direction,s=this.getShapeStyle(e),l=e.direction||o,u=t.addShape("path",{attrs:s,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),c=a.width,f=a.height,h=a.show,d=a.offset,g=a.text;if(h)if(g)t.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:this.type+"-icon",name:this.type+"-icon",draggable:!0});else{var p=-c/2,m=-f/2;(l==="up"||l==="down")&&(m+=d),(l==="left"||l==="right")&&(p+=d),t.addShape("image",{attrs:(0,b.__assign)({x:p,y:m},a),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})}return this.drawLinkPoints(e,t),u},drawLinkPoints:function(e,t){var r=this.getOptions(e),i=r.linkPoints,a=i===void 0?{}:i,o=r.direction,s=e.direction||o,l=a.top,u=a.left,c=a.right,f=a.bottom,h=a.size,d=a.r,g=(0,b.__rest)(a,["top","left","right","bottom","size","r"]),p=this.getSize(e),m=p[0];if(u){var _=null,S=m*Math.sin(1/3*Math.PI),M=m*Math.sin(1/3*Math.PI);s==="up"?_=[-M,S]:s==="down"?_=[-M,-S]:s==="left"&&(_=[-M,M-S]),_&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},g),{x:_[0],y:_[1],r:h/2||d||5}),className:"link-point-left",name:"link-point-left"})}if(c){var R=null,S=m*Math.sin(1/3*Math.PI),M=m*Math.sin(1/3*Math.PI);s==="up"?R=[M,S]:s==="down"?R=[M,-S]:s==="right"&&(R=[M,M-S]),R&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},g),{x:R[0],y:R[1],r:h/2||d||5}),className:"link-point-right",name:"link-point-right"})}if(l){var F=null,S=m*Math.sin(1/3*Math.PI),M=m*Math.sin(1/3*Math.PI);s==="up"?F=[M-S,-S]:s==="left"?F=[M,-S]:s==="right"&&(F=[-M,-S]),F&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},g),{x:F[0],y:F[1],r:h/2||d||5}),className:"link-point-top",name:"link-point-top"})}if(f){var V=null,S=m*Math.sin(1/3*Math.PI),M=m*Math.sin(1/3*Math.PI);s==="down"?V=[-M+S,S]:s==="left"?V=[M,S]:s==="right"&&(V=[-M,S]),V&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},g),{x:V[0],y:V[1],r:h/2||d||5}),className:"link-point-bottom",name:"link-point-bottom"})}},getPath:function(e){var t=this.getOptions(e).direction,r=e.direction||t,i=this.getSize(e),a=i[0],o=a*Math.sin(1/3*Math.PI),s=a*Math.sin(1/3*Math.PI),l=[["M",-s,o],["L",0,-o],["L",s,o],["Z"]];return r==="down"?l=[["M",-s,-o],["L",s,-o],["L",0,o],["Z"]]:r==="left"?l=[["M",-s,s-o],["L",s,-s],["L",s,s],["Z"]]:r==="right"&&(l=[["M",s,s-o],["L",-s,s],["L",-s,-s],["Z"]]),l},getShapeStyle:function(e){var t=this.getOptions(e).style,r={stroke:e.color},i=(0,v.mix)({},t,r),a=this.getPath(e),o=(0,b.__assign)({path:a},i);return o},update:function(e,t){var r=t.getContainer(),i=this.getOptions({}).style,a=this.getPath(e),o={stroke:e.color,path:a},s=t.get("keyShape"),l=(0,v.mix)({},i,s.attr(),o);l=(0,v.mix)(l,e.style),this.updateShape(e,t,l,!0),this.updateLinkPoints(e,r)},updateLinkPoints:function(e,t){var r=this.getOptions({}),i=r.linkPoints,a=r.direction,o=e.direction||a,s=t.find(function(ee){return ee.get("className")==="link-point-left"}),l=t.find(function(ee){return ee.get("className")==="link-point-right"}),u=t.find(function(ee){return ee.get("className")==="link-point-top"}),c=t.find(function(ee){return ee.get("className")==="link-point-bottom"}),f=i,h=s||l||u||c;h&&(f=h.attr());var d=(0,v.mix)({},f,e.linkPoints),g=d.fill,p=d.stroke,m=d.lineWidth,_=d.size/2;_||(_=d.r);var S=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},M=S.left,R=S.right,F=S.top,V=S.bottom,nt=this.getSize(e),at=nt[0],xt={r:_,fill:g,stroke:p,lineWidth:m},gt=null,Tt=at*Math.sin(1/3*Math.PI),Ct=at*Math.sin(1/3*Math.PI);o==="up"?gt=[-Ct,Tt]:o==="down"?gt=[-Ct,-Tt]:o==="left"&&(gt=[-Ct,Ct-Tt]),gt&&(s?!M&&M!==void 0?s.remove():s.attr((0,b.__assign)((0,b.__assign)({},xt),{x:gt[0],y:gt[1]})):M&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},xt),{x:gt[0],y:gt[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}));var te=null;o==="up"?te=[Ct,Tt]:o==="down"?te=[Ct,-Tt]:o==="right"&&(te=[Ct,Ct-Tt]),te&&(l?!R&&R!==void 0?l.remove():l.attr((0,b.__assign)((0,b.__assign)({},xt),{x:te[0],y:te[1]})):R&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},xt),{x:te[0],y:te[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}));var Kt=null;o==="up"?Kt=[Ct-Tt,-Tt]:o==="left"?Kt=[Ct,-Tt]:o==="right"&&(Kt=[-Ct,-Tt]),Kt&&(u?!F&&F!==void 0?u.remove():u.attr((0,b.__assign)((0,b.__assign)({},xt),{x:Kt[0],y:Kt[1]})):F&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},xt),{x:Kt[0],y:Kt[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}));var ne=null;o==="down"?ne=[-Ct+Tt,Tt]:o==="left"?ne=[Ct,Tt]:o==="right"&&(ne=[-Ct,Tt]),ne&&(c?!V&&V!==void 0?c.remove():c.attr((0,b.__assign)((0,b.__assign)({},xt),{x:ne[0],y:ne[1]})):V&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},xt),{x:ne[0],y:ne[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))}},"single-node"),Ll("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:Sr.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf"},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(e,t){var r=this.getOptions(e).preRect,i=r===void 0?{}:r,a=this.getShapeStyle(e),o=this.getSize(e),s=o[0],l=o[1],u=t.addShape("rect",{attrs:a,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),c=i.show,f=(0,b.__rest)(i,["show"]);return c&&t.addShape("rect",{attrs:(0,b.__assign)({x:-s/2,y:-l/2,height:l},f),className:"pre-rect",name:"pre-rect",draggable:!0}),this.drawLogoIcon(e,t),this.drawStateIcon(e,t),this.drawLinkPoints(e,t),u},drawLogoIcon:function(e,t){var r=this.getOptions(e).logoIcon,i=r===void 0?{}:r,a=this.getSize(e),o=a[0];if(i.show){var s=i.width,l=i.height,u=i.x,c=i.y,f=i.offset,h=i.text,d=(0,b.__rest)(i,["width","height","x","y","offset","text"]);h?t.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},d),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):t.addShape("image",{attrs:(0,b.__assign)((0,b.__assign)({},d),{x:u||-o/2+s+f,y:c||-l/2,width:s,height:l}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(e,t){var r=this.getOptions(e).stateIcon,i=r===void 0?{}:r,a=this.getSize(e),o=a[0];if(i.show){var s=i.width,l=i.height,u=i.x,c=i.y,f=i.offset,h=i.text,d=(0,b.__rest)(i,["width","height","x","y","offset","text"]);h?t.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},d),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):t.addShape("image",{attrs:(0,b.__assign)((0,b.__assign)({},d),{x:u||o/2-s+f,y:c||-l/2,width:s,height:l}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(e,t){var r=this.getOptions(e).linkPoints,i=r===void 0?{}:r,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=(0,b.__rest)(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0],g=h[1];o&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},f),{x:-d/2,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},f),{x:d/2,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},f),{x:0,y:-g/2,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),l&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},f),{x:0,y:g/2,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},drawLabel:function(e,t){var r=this.getOptions(e),i=r.labelCfg,a=i===void 0?{}:i,o=r.logoIcon,s=o===void 0?{}:o,l=r.descriptionCfg,u=l===void 0?{}:l,c=this.getSize(e),f=c[0],h=null,d=s.show,g=s.width,p=-f/2+a.offset;d&&(p=-f/2+g+a.offset);var m=a.style,_=u.style,S=u.paddingTop;return(0,v.isString)(e.description)?(h=t.addShape("text",{attrs:(0,b.__assign)((0,b.__assign)({},m),{x:p,y:-5,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0}),t.addShape("text",{attrs:(0,b.__assign)((0,b.__assign)({},_),{x:p,y:17+(S||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0})):h=t.addShape("text",{attrs:(0,b.__assign)((0,b.__assign)({},m),{x:p,y:7,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0}),h},getShapeStyle:function(e){var t=this.getOptions(e).style,r={stroke:e.color},i=(0,v.mix)({},t,r),a=this.getSize(e),o=i.width||a[0],s=i.height||a[1],l=(0,b.__assign)({x:-o/2,y:-s/2,width:o,height:s},i);return l},update:function(e,t){var r=this.getOptions(e),i=r.style,a=i===void 0?{}:i,o=r.labelCfg,s=o===void 0?{}:o,l=r.descriptionCfg,u=l===void 0?{}:l,c=this.getSize(e),f=c[0],h=c[1],d=t.get("keyShape");d.attr((0,b.__assign)((0,b.__assign)({},a),{x:-f/2,y:-h/2,width:f,height:h}));var g=t.getContainer(),p=g.find(function(Je){return Je.get("className")==="rect-logo-icon"}),m=p?p.attr():{},_=(0,v.mix)({},m,e.logoIcon),S=_.width;S===void 0&&(S=this.options.logoIcon.width);var M=e.logoIcon?e.logoIcon.show:void 0,R=s.offset,F=-f/2+S+R;!M&&M!==void 0&&(F=-f/2+R);var V=g.find(function(Je){return Je.get("className")==="node-label"}),nt=g.find(function(Je){return Je.get("className")==="rect-description"});if(e.label)if(!V)g.addShape("text",{attrs:(0,b.__assign)((0,b.__assign)({},s.style),{x:F,y:e.description?-5:7,text:e.label}),className:"node-label",name:"node-label",draggable:!0});else{var at=e.labelCfg?e.labelCfg.style:{},xt=(0,v.mix)({},V.attr(),at);e.label&&(xt.text=e.label),xt.x=F,(0,v.isString)(e.description)&&(xt.y=-5),nt&&(nt.resetMatrix(),nt.attr({x:F})),V.resetMatrix(),V.attr(xt)}if((0,v.isString)(e.description)){var gt=u.paddingTop;if(!nt)g.addShape("text",{attrs:(0,b.__assign)((0,b.__assign)({},u.style),{x:F,y:17+(gt||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0});else{var at=e.descriptionCfg?e.descriptionCfg.style:{},Tt=(0,v.mix)({},nt.attr(),at);(0,v.isString)(e.description)&&(Tt.text=e.description),Tt.x=F,nt.resetMatrix(),nt.attr((0,b.__assign)((0,b.__assign)({},Tt),{y:17+(gt||0)}))}}var Ct=g.find(function(Je){return Je.get("className")==="pre-rect"});if(Ct){var te=(0,v.mix)({},Ct.attr(),e.preRect);Ct.attr((0,b.__assign)((0,b.__assign)({},te),{x:-f/2,y:-h/2,height:h}))}if(p)if(!M&&M!==void 0)p.remove();else{var Kt=_.width,ne=_.height,ee=_.x,ve=_.y,ie=_.offset,ye=(0,b.__rest)(_,["width","height","x","y","offset"]);p.attr((0,b.__assign)((0,b.__assign)({},ye),{x:ee||-f/2+Kt+ie,y:ve||-ne/2,width:Kt,height:ne}))}else M&&this.drawLogoIcon(e,g);var Ee=g.find(function(Je){return Je.get("className")==="rect-state-icon"}),we=Ee?Ee.attr():{},Pe=(0,v.mix)({},we,e.stateIcon);if(Ee){!Pe.show&&Pe.show!==void 0&&Ee.remove();var Ve=Pe.width,ne=Pe.height,ee=Pe.x,ve=Pe.y,he=Pe.offset,Te=(0,b.__rest)(Pe,["width","height","x","y","offset"]);Ee.attr((0,b.__assign)((0,b.__assign)({},Te),{x:ee||f/2-Ve+he,y:ve||-ne/2,width:Ve,height:ne}))}else Pe.show&&this.drawStateIcon(e,g);this.updateLinkPoints(e,g)}},"single-node"),Ll("star",{options:{size:60,style:{stroke:Sr.defaultNode.style.stroke,fill:Sr.defaultNode.style.fill,lineWidth:Sr.defaultNode.style.lineWidth},labelCfg:{style:{fill:Sr.nodeLabel.style.fill,fontSize:Sr.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Sr.defaultNode.linkPoints.size,lineWidth:Sr.defaultNode.linkPoints.lineWidth,fill:Sr.defaultNode.linkPoints.fill,stroke:Sr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.__assign)({},Sr.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(e,t){var r=this.getOptions(e).icon,i=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),s=i.width,l=i.height,u=i.show,c=i.text;return u&&(c?t.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):t.addShape("image",{attrs:(0,b.__assign)({x:-s/2,y:-l/2},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=this.getOptions(e).linkPoints,i=r===void 0?{}:r,a=i.top,o=i.left,s=i.right,l=i.leftBottom,u=i.rightBottom,c=i.size,f=i.r,h=(0,b.__rest)(i,["top","left","right","leftBottom","rightBottom","size","r"]),d=this.getSize(e),g=d[0];if(s){var p=Math.cos((18+72*0)/180*Math.PI)*g,m=Math.sin((18+72*0)/180*Math.PI)*g;t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},h),{x:p,y:-m,r:c/2||f||5}),className:"link-point-right",name:"link-point-right"})}if(a){var p=Math.cos((18+72*1)/180*Math.PI)*g,m=Math.sin((18+72*1)/180*Math.PI)*g;t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},h),{x:p,y:-m,r:c/2||f||5}),className:"link-point-top",name:"link-point-top"})}if(o){var p=Math.cos((18+72*2)/180*Math.PI)*g,m=Math.sin((18+72*2)/180*Math.PI)*g;t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},h),{x:p,y:-m,r:c/2||f||5}),className:"link-point-left",name:"link-point-left"})}if(l){var p=Math.cos((18+72*3)/180*Math.PI)*g,m=Math.sin((18+72*3)/180*Math.PI)*g;t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},h),{x:p,y:-m,r:c/2||f||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(u){var p=Math.cos((18+72*4)/180*Math.PI)*g,m=Math.sin((18+72*4)/180*Math.PI)*g;t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},h),{x:p,y:-m,r:c/2||f||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(e){for(var t=this.getSize(e),r=t[0],i=r*3/8,a=e.innerR||i,o=[],s=0;s<5;s++){var l=Math.cos((18+72*s)/180*Math.PI)*r,u=Math.sin((18+72*s)/180*Math.PI)*r,c=Math.cos((54+72*s)/180*Math.PI)*a,f=Math.sin((54+72*s)/180*Math.PI)*a;s===0?o.push(["M",l,-u]):o.push(["L",l,-u]),o.push(["L",c,-f])}return o.push(["Z"]),o},getShapeStyle:function(e){var t=this.getOptions(e).style,r={stroke:e.color},i=(0,v.mix)({},t,r),a=this.getPath(e),o=(0,b.__assign)({path:a},i);return o},update:function(e,t){var r=t.getContainer(),i=this.getOptions({}).style,a=this.getPath(e),o={stroke:e.color,path:a},s=t.get("keyShape"),l=(0,v.mix)({},i,s.attr(),o);l=(0,v.mix)(l,e.style),this.updateShape(e,t,l,!0),this.updateLinkPoints(e,r)},updateLinkPoints:function(e,t){var r=this.getOptions({}).linkPoints,i=t.find(function(Tt){return Tt.get("className")==="link-point-left"}),a=t.find(function(Tt){return Tt.get("className")==="link-point-right"}),o=t.find(function(Tt){return Tt.get("className")==="link-point-top"}),s=t.find(function(Tt){return Tt.get("className")==="link-point-left-bottom"}),l=t.find(function(Tt){return Tt.get("className")==="link-point-right-bottom"}),u=r,c=i||a||o||s||l;c&&(u=c.attr());var f=(0,v.mix)({},u,e.linkPoints),h=f.fill,d=f.stroke,g=f.lineWidth,p=f.size/2;p||(p=f.r);var m=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},_=m.left,S=m.right,M=m.top,R=m.leftBottom,F=m.rightBottom,V=this.getSize(e),nt=V[0],at={r:p,fill:h,stroke:d,lineWidth:g},xt=Math.cos((18+72*0)/180*Math.PI)*nt,gt=Math.sin((18+72*0)/180*Math.PI)*nt;a?!S&&S!==void 0?a.remove():a.attr((0,b.__assign)((0,b.__assign)({},at),{x:xt,y:-gt})):S&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},at),{x:xt,y:-gt}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),xt=Math.cos((18+72*1)/180*Math.PI)*nt,gt=Math.sin((18+72*1)/180*Math.PI)*nt,o?!M&&M!==void 0?o.remove():o.attr((0,b.__assign)((0,b.__assign)({},at),{x:xt,y:-gt})):M&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},at),{x:xt,y:-gt}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),xt=Math.cos((18+72*2)/180*Math.PI)*nt,gt=Math.sin((18+72*2)/180*Math.PI)*nt,i?!_&&_!==void 0?i.remove():i.attr((0,b.__assign)((0,b.__assign)({},at),{x:xt,y:-gt})):_&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},at),{x:xt,y:-gt}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),xt=Math.cos((18+72*3)/180*Math.PI)*nt,gt=Math.sin((18+72*3)/180*Math.PI)*nt,s?!R&&R!==void 0?s.remove():s.attr((0,b.__assign)((0,b.__assign)({},at),{x:xt,y:-gt})):R&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},at),{x:xt,y:-gt}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0}),xt=Math.cos((18+72*4)/180*Math.PI)*nt,gt=Math.sin((18+72*4)/180*Math.PI)*nt,l?!F&&F!==void 0?s.remove():l.attr((0,b.__assign)((0,b.__assign)({},at),{x:xt,y:-gt})):F&&t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},at),{x:xt,y:-gt}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0})}},"single-node");var op=Jo.defaultSubjectColors;Ll("donut",{options:{size:Sr.defaultNode.size,style:{x:0,y:0,stroke:Sr.defaultNode.style.stroke,fill:Sr.defaultNode.style.fill,lineWidth:Sr.defaultNode.style.lineWidth},labelCfg:{style:{fill:Sr.nodeLabel.style.fill,fontSize:Sr.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Sr.defaultNode.linkPoints.size,lineWidth:Sr.defaultNode.linkPoints.lineWidth,fill:Sr.defaultNode.linkPoints.fill,stroke:Sr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.__assign)({},Sr.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=this.getOptions(e).icon,i=r===void 0?{}:r,a=this.getShapeStyle(e),o=(0,v.deepMix)({},i,e.icon),s=t.addShape("circle",{attrs:a,className:this.type+"-keyShape",draggable:!0,name:this.type+"-keyShape"}),l=o.width,u=o.height,c=o.show,f=o.text;c&&(f?t.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):t.addShape("image",{attrs:(0,b.__assign)({x:-l/2,y:-u/2},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}));var h=s.attr("r"),d=.6*h,g=(h+d)/2,p=e,m=p.donutAttrs,_=m===void 0?{}:m,S=p.donutColorMap,M=S===void 0?{}:S,R=Object.keys(_).length;if(_&&R>1){var F=[],V=0;if(Object.keys(_).forEach(function(gt){var Tt=_[gt]||0;!(0,v.isNumber)(Tt)||(F.push({key:gt,value:Tt,color:M[gt]}),V+=Tt)}),V){var nt=h-d;if(R===1){t.addShape("circle",{attrs:{r:g,x:0,y:0,stroke:F[0].color||op[0],lineWidth:nt},name:"fan-shape-0"});return}var at=[g,0],xt=0;F.forEach(function(gt,Tt){var Ct=gt.value/V;if(!(Ct<.001)){if(Ct>.999&&(Ct=1),Ct===1){t.addShape("circle",{attrs:{r:g,x:0,y:0,stroke:gt.color||op[Tt%op.length],lineWidth:nt},name:"fan-shape-"+Tt});return}gt.percent=Ct,gt.angle=Ct*Math.PI*2,gt.beginAgnle=xt,xt+=gt.angle,gt.endAngle=xt,gt.arcBegin=at,gt.arcEnd=[g*Math.cos(gt.endAngle),-g*Math.sin(gt.endAngle)];var te=gt.angle>Math.PI?1:0,Kt=[["M",gt.arcBegin[0],gt.arcBegin[1]],["A",g,g,0,te,0,gt.arcEnd[0],gt.arcEnd[1]],["L",gt.arcEnd[0],gt.arcEnd[1]]];t.addShape("path",{attrs:{path:Kt,lineWidth:nt,stroke:gt.color||op[Tt%op.length]},name:"fan-shape-"+Tt}),at=gt.arcEnd}})}}return this.drawLinkPoints(e,t),s},update:void 0},"circle");var Sm=function(e){var t=e.x,r=e.y;return{x:t,y:r,centerX:t,centerY:r,minX:t,minY:r,maxX:t,maxY:r,height:0,width:0}},pit=function(e){e===void 0&&(e=[]);var t=[],r=[];e.forEach(function(l){t.push(l.x),r.push(l.y)});var i=Math.min.apply(Math,t),a=Math.max.apply(Math,t),o=Math.min.apply(Math,r),s=Math.max.apply(Math,r);return{centerX:(i+a)/2,centerY:(o+s)/2,maxX:a,maxY:s,minX:i,minY:o,height:s-o,width:a-i}},hut=function(e,t){return Math.abs(e.centerX-t.centerX)*2<e.width+t.width&&Math.abs(e.centerY-t.centerY)*2<e.height+t.height},Q_=function(e){for(var t=[],r={},i=e.length,a=i-1;a>=0;a--){var o=e[a];o.id=o.x+"|||"+o.y,r[o.id]=o,t.push(o)}return t},EN=function(e){return Q_(e)},dut=function(e,t){return[e,{x:e.x,y:t.y},t]},Em=function(e,t){return e.width||e.height?{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}:e},yit=function(e,t){var r=Math.abs(e.x-t.centerX),i=Math.abs(e.y-t.centerY);return r===0&&i===0?0:r/t.width>i/t.height},J_=function(e,t,r){var i=yit(t,e);if(i===0){var a=e.centerX,o=e.centerY;return r.y<t.y?o=e.minY:r.x>t.x?a=e.maxX:r.x<t.x?a=e.minX:r.x===t.x&&(o=e.maxY),{x:a,y:o}}return i?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}},wN=function(e,t){var r=Math.min(e.minX,t.minX),i=Math.min(e.minY,t.minY),a=Math.max(e.maxX,t.maxX),o=Math.max(e.maxY,t.maxY);return{centerX:(r+a)/2,centerY:(i+o)/2,minX:r,minY:i,maxX:a,maxY:o,height:o-i,width:a-r}},q_=function(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]},wm=function(e,t){var r=e.x,i=e.y;return r<t.minX||r>t.maxX||i<t.minY||i>t.maxY},mit=function(e,t){return t<e.minX||t>e.maxX?[]:[{x:t,y:e.minY},{x:t,y:e.maxY}]},xit=function(e,t){return t<e.minY||t>e.maxY?[]:[{x:e.minX,y:t},{x:e.maxX,y:t}]},bit=function(e,t){return mit(e,t.x).concat(xit(e,t.y))},sp=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},_it=function(e,t){var r=-2,i=0;return t.forEach(function(a){a&&(e.x===a.x&&(i+=r),e.y===a.y&&(i+=r))}),i},CN=function(e,t,r,i,a){return sp(e,t)+sp(e,r)+_it(e,[t,r,i,a])},Sit=function n(e,t,r,i,a){a===void 0&&(a=0),e.unshift(t[i]),r[i]&&r[i]!==i&&a<=100&&n(e,t,r,r[i],a+1)},Eit=function(e,t){var r=e.indexOf(t);r>-1&&e.splice(r,1)},Cm=function(e,t,r,i){var a=r.x-e.x,o=r.y-e.y,s=i.x-e.x,l=i.y-e.y,u=r.x-t.x,c=r.y-t.y,f=i.x-t.x,h=i.y-t.y,d=a*l-o*s,g=u*h-c*f,p=a*c-o*u,m=s*h-l*f;return d*g<=0&&p*m<=0},tS=function(e,t,r){if(r.width||r.height){var i=q_(r),a=i[0],o=i[1],s=i[2],l=i[3];return Cm(e,t,a,o)||Cm(e,t,a,l)||Cm(e,t,o,s)||Cm(e,t,s,l)}return!1},wit=function(e,t,r,i){var a=[];return e.forEach(function(o){if(o!==t&&(o.x===t.x||o.y===t.y)){if(tS(o,t,r)||tS(o,t,i))return;a.push(o)}}),Q_(a)},Cit=function(e,t,r,i,a,o,s){var l=[],u=[t],c={},f={},h={};f[t.id]=0,h[t.id]=CN(t,r,t);var d={};e.forEach(function(_){d[_.id]=_});for(var g,p;u.length;){if(g=void 0,p=Infinity,u.forEach(function(_){h[_.id]<=p&&(p=h[_.id],g=_)}),g===r){var m=[];return Sit(m,d,c,r.id),m}Eit(u,g),l.push(g),wit(e,g,i,a).forEach(function(_){if(l.indexOf(_)===-1){u.indexOf(_)===-1&&u.push(_);var S=h[g.id]+sp(g,_);f[_.id]&&S>=f[_.id]||(c[_.id]=g.id,f[_.id]=S,h[_.id]=f[_.id]+CN(_,r,t,o,s))}})}return[t,r]},Mit=function(e,t,r){return!(e.x===t.x&&t.x===r.x||e.y===t.y&&t.y===r.y)},Ait=function(e,t,r,i){var a=sp(e,t),o=sp(r,t);a<i&&(i=a),o<i&&(i=o);var s={x:t.x-i/a*(t.x-e.x),y:t.y-i/a*(t.y-e.y)},l={x:t.x-i/o*(t.x-r.x),y:t.y-i/o*(t.y-r.y)};return[s,l]},MN=function(e,t){var r=[],i=e[0];return r.push("M"+i.x+" "+i.y),e.forEach(function(a,o){var s=e[o+1],l=e[o+2];if(s&&l)if(Mit(a,s,l)){var u=Ait(a,s,l,t),c=u[0],f=u[1];r.push("L"+c.x+" "+c.y),r.push("Q"+s.x+" "+s.y+" "+f.x+" "+f.y),r.push("L"+f.x+" "+f.y)}else r.push("L"+s.x+" "+s.y);else s&&r.push("L"+s.x+" "+s.y)}),r.join("")},AN=function(e,t,r,i,a){var o,s;if(!r||!r.getType())o=Sm(e);else if(r.getType()==="combo"){var l=r.getKeyShape();o=l.getCanvasBBox()||Sm(e),o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=r.getBBox();if(!i||!i.getType())s=Sm(t);else if(i.getType()==="combo"){var u=i.getKeyShape().getBBox();if(u){var c=i.getModel(),f=c.x,h=c.y;s={x:f,y:h,width:u.width,height:u.height,minX:u.minX+f,maxX:u.maxX+f,minY:u.minY+h,maxY:u.maxY+h},s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=Sm(t)}else s=i&&i.getBBox();var d=Em(o,a),g=Em(s,a),p=J_(d,e,t),m=J_(g,t,e),_=pit([p,m]),S=wN(d,_),M=wN(g,_),R=[];R=R.concat(q_(S)).concat(q_(M));var F={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[_,S,M].forEach(function(nt){R=R.concat(bit(nt,F).filter(function(at){return wm(at,d)&&wm(at,g)}))}),[{x:p.x,y:m.y},{x:m.x,y:p.y}].forEach(function(nt){wm(nt,d)&&wm(nt,g)&&R.push(nt)}),R.unshift(p),R.push(m),R=Q_(R);var V=Cit(R,p,m,o,s,e,t);return V.unshift(e),V.push(t),EN(V)},Tit=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},Iit=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},Oit=function(e,t){return[e,t]},Pit=function(e,t,r,i,a){return EN(AN(e,t,r,i,a.offset))},Dit={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:Tit,fallbackRoute:Pit},vut={maxAllowedDirectionChange:Math.PI/4,directions:[{stepX:1,stepY:0},{stepX:1,stepY:1},{stepX:0,stepY:1},{stepX:-1,stepY:1},{stepX:-1,stepY:0},{stepX:-1,stepY:-1},{stepX:0,stepY:-1},{stepX:1,stepY:-1}],distFunc:Iit,fallbackRoute:Oit},Ul=function(e,t){var r=Math.round(Math.abs(e/t)),i=e<0?-1:1;return r<0?0:i*r},Lit=function(e,t,r){var i={};return e.forEach(function(a){if(!!a)for(var o=Em(a.getBBox(),r),s=Ul(o.minX,t);s<=Ul(o.maxX,t);s+=1)for(var l=Ul(o.minY,t);l<=Ul(o.maxY,t);l+=1)i[s+"|||"+l]=!0}),i},eS=function(e,t){var r=t.x-e.x,i=t.y-e.y;return r||i?Math.atan2(i,r):0},TN=function(e,t){var r=Math.abs(e-t);return r>Math.PI?2*Math.PI-r:r},IN=function(e,t,r){for(var i=Infinity,a=0,o=t.length;a<o;a++){var s=r(e,t[a]);s<i&&(i=s)}return i},ON=function(e,t,r,i,a){var o=[];if(!r)return[e];var s=a.directions,l=a.offset,u=r.getBBox(),c=t.x>u.minX&&t.x<u.maxX&&t.y>u.minY&&t.y<u.maxY,f=Em(u,l);for(var h in f)f[h]=Ul(f[h],a.gridSize);if(c){for(var d=0,g=s;d<g.length;d++)for(var p=g[d],m=[[{x:f.minX,y:f.minY},{x:f.maxX,y:f.minY}],[{x:f.minX,y:f.minY},{x:f.minX,y:f.maxY}],[{x:f.maxX,y:f.minY},{x:f.maxX,y:f.maxY}],[{x:f.minX,y:f.maxY},{x:f.maxX,y:f.maxY}]],h=0;h<4;h++){var _=m[h],S=Jo.getLineIntersect(e,{x:e.x+p.stepX*f.width,y:e.y+p.stepY*f.height},_[0],_[1]);S&&!tS(e,S,u)&&(S.id=S.x+"|||"+S.y,o.push(S))}return o}var M=J_(f,e,i);return M.id=M.x+"|||"+M.y,[M]},rS=function(e,t,r,i){var a=eS(e,t);if(!r[e.id]){var o=eS(i,e);return TN(o,a)}var s=eS({x:r[e.id].x,y:r[e.id].y},e);return TN(s,a)},Rit=function(e,t,r,i,a,o,s){var l=[i],u=e.id,c=e.x,f=e.y,h={x:c,y:f,id:u};for(rS(h,o,t,r)&&l.unshift({x:o.x===i.x?i.x:h.x*s,y:o.y===i.y?i.y:h.y*s});t[u]&&t[u].id!==u;){var d={x:c,y:f,id:u},g=t[u].id,p=t[u].x,m=t[u].y,_={x:p,y:m,id:g},S=rS(_,d,t,r);S&&l.unshift({x:_.x===d.x?l[0].x:_.x*s,y:_.y===d.y?l[0].y:_.y*s}),u=g,c=p,f=m}var M={x:c,y:f,id:u};return l[0].x=M.x===r.x?a.x:l[0].x,l[0].y=M.y===r.y?a.y:l[0].y,l.unshift(a),l},Nit=function(e,t,r,i,a){if(isNaN(e.x)||isNaN(t.x))return[];var o=(0,v.deepMix)(Dit,a);o.obstacles=o.obstacles||[];var s=o.gridSize,l=Lit(o.obstacles.concat([r,i]),s,o.offset),u={x:Ul(e.x,s),y:Ul(e.y,s)},c={x:Ul(t.x,s),y:Ul(t.y,s)};e.id=u.x+"|||"+u.y,t.id=c.x+"|||"+c.y;var f=ON(u,e,r,c,o),h=ON(c,t,i,u,o);f.forEach(function(te){delete l[te.id]}),h.forEach(function(te){delete l[te.id]});for(var d={},g={},p={},m={},_={},S=0;S<f.length;S++){var M=f[S];d[M.id]=M,m[M.id]=0,_[M.id]=IN(M,h,o.distFunc)}for(var R=o.maximumLoops,F=o.penalties,V,nt,at,xt,gt,Tt,Ct;Object.keys(d).length>0&&R>0&&(V=void 0,nt=Infinity,Object.keys(d).forEach(function(te){var Kt=d[te].id;_[Kt]<=nt&&(nt=_[Kt],V=d[Kt])}),!!V);){if(h.findIndex(function(te){return te.x===V.x&&te.y===V.y})>-1)return Rit(V,p,u,t,e,c,s);delete d[V.id],g[V.id]=!0;for(var S=0;S<o.directions.length;S++)at=o.directions[S],xt={x:V.x+at.stepX,y:V.y+at.stepY,id:Math.round(V.x)+at.stepX+"|||"+(Math.round(V.y)+at.stepY)},!g[xt.id]&&(Ct=rS(V,xt,p,u),!(Ct>o.maxAllowedDirectionChange)&&(l[xt.id]||(d[xt.id]||(d[xt.id]=xt),gt=o.distFunc(V,xt)+(isNaN(F[Ct])?s:F[Ct]),Tt=m[V.id]+gt,!(m[xt.id]&&Tt>=m[xt.id])&&(p[xt.id]=V,m[xt.id]=Tt,_[xt.id]=Tt+IN(xt,h,o.distFunc)))));R-=1}return o.fallbackRoute(e,t,r,i,o)};tI("polyline",{options:{color:Sr.defaultEdge.color,size:Sr.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:Sr.defaultEdge.style.stroke,lineAppendWidth:Sr.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Sr.edgeLabel.style.fill,fontSize:Sr.edgeLabel.style.fontSize}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:(0,b.__assign)({},Sr.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e);r.radius===0&&delete r.radius;var i=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:r});return i},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},i=(0,v.mix)({},t,r,e.style);e=this.getPathPoints(e),this.radius=i.radius,this.offset=i.offset;var a=e.startPoint,o=e.endPoint,s=this.getControlPoints(e),l=[a];s&&(l=l.concat(s)),l.push(o);var u=e.sourceNode,c=e.targetNode,f=i.radius,h=this.options.routeCfg,d=(0,v.mix)({},h,e.routeCfg);d.offset=i.offset;var g=this.getPath(l,u,c,f,d);((0,v.isArray)(g)&&g.length<=1||(0,v.isString)(g)&&g.indexOf("L")===-1)&&(g="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(o.x)||isNaN(o.y))&&(g="M0 0, L0 0");var p=(0,v.mix)({},Sr.defaultEdge.style,i,{lineWidth:e.size,path:g});return p},updateShapeStyle:function(e,t){var r=t.getContainer();if(!!t.isVisible()){var i={stroke:e.color},a=r.find(function(R){return R.get("className")==="edge-shape"})||t.getKeyShape(),o=e.size;e=this.getPathPoints(e);var s=e.startPoint,l=e.endPoint,u=this.getControlPoints(e),c=[s];u&&(c=c.concat(u)),c.push(l);var f=a.attr(),h=(0,v.mix)({},i,f,e.style),d=e.sourceNode,g=e.targetNode,p=h.radius,m=this.options.routeCfg,_=(0,v.mix)({},m,e.routeCfg);_.offset=h.offset;var S=this.getPath(c,d,g,p,_);((0,v.isArray)(S)&&S.length<=1||(0,v.isString)(S)&&S.indexOf("L")===-1)&&(S="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(l.x)||isNaN(l.y))&&(S="M0 0, L0 0"),f.endArrow&&h.endArrow===!1&&(e.style.endArrow={path:""}),f.startArrow&&h.startArrow===!1&&(e.style.startArrow={path:""});var M=(0,v.mix)(i,a.attr(),{lineWidth:o,path:S},e.style);a&&a.attr(M)}},getPath:function(e,t,r,i,a){var o=a.offset,s=a.simple;if(!o||e.length>2){if(i)return MN(e,i);var l=[];return(0,v.each)(e,function(h,d){d===0?l.push(["M",h.x,h.y]):l.push(["L",h.x,h.y])}),l}var u=s?AN(e[e.length-1],e[0],r,t,o):Nit(e[0],e[e.length-1],t,r,a);if(!u||!u.length)return"M0 0, L0 0";if(i){var c=MN(u,i);return c}var f=Jo.pointsToPolygon(u);return f}},"single-edge");var PN=Gl.cloneEvent,DN=Gl.isNaN,LN=Math.abs,kit=10,Bit=["shift","ctrl","alt","control"],Fit={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(e){var t=this.origin,r=+e.clientX,i=+e.clientY;if(!(DN(r)||DN(i))){var a=r-t.x,o=i-t.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(a=0),this.origin={x:r,y:i};var s=this.graph.get("width"),l=this.graph.get("height"),u=this.graph.get("canvas").getCanvasBBox(),c=this.scalableRange,f=this.scalableRange;c<1&&c>-1&&(c=s*c,f=l*f),(u.minX<=s+c&&u.minX+a>s+c||u.maxX+c>=0&&u.maxX+c+a<0)&&(a=0),(u.minY<=l+f&&u.minY+o>l+f||u.maxY+f>=0&&u.maxY+f+o<0)&&(o=0),this.graph.translate(a,o)}},onTouchStart:function(e){var t=this,r=e.originalEvent.touches,i=r[0],a=r[1];i&&a||(e.preventDefault(),t.onMouseDown(e))},onMouseDown:function(e){var t=this,r=e.originalEvent;if(!(r&&e.name!==Ly.TOUCHSTART&&r.button!==0)&&!(e.name!==Ly.TOUCHSTART&&typeof window!="undefined"&&window.event&&!window.event.buttons&&!window.event.button)&&!!this.shouldBegin.call(this,e)&&!t.keydown){var i=e.target,a=i&&i.isCanvas&&i.isCanvas();if(!(!this.allowDragOnItem&&!a)&&(t.origin={x:e.clientX,y:e.clientY},t.dragging=!1,this.enableOptimize)){for(var o=this.graph,s=o.getEdges(),l=0,u=s.length;l<u;l++){var c=s[l].get("group").get("children");!c||c.forEach(function(R){R.set("ori-visibility",R.get("ori-visibility")||R.get("visible")),R.hide()})}for(var f=o.getNodes(),h=0,d=f.length;h<d;h++)for(var g=f[h].getContainer(),p=g.get("children"),m=0,_=p;m<_.length;m++){var S=_[m],M=S.get("isKeyShape");M||(S.set("ori-visibility",S.get("ori-visibility")||S.get("visible")),S.hide())}}}},onTouchMove:function(e){var t=this,r=e.originalEvent.touches,i=r[0],a=r[1];if(i&&a){this.onMouseUp(e);return}e.preventDefault(),t.onMouseMove(e)},onMouseMove:function(e){var t=this.graph;if(!this.keydown){var r=e.target,i=r&&r.isCanvas&&r.isCanvas();if(!(!this.allowDragOnItem&&!i)&&(e=PN(e),!!this.origin)){if(this.dragging)e.type="drag",t.emit("canvas:drag",e);else{if(LN(this.origin.x-e.clientX)+LN(this.origin.y-e.clientY)<kit)return;this.shouldBegin.call(this,e)&&(e.type="dragstart",t.emit("canvas:dragstart",e),this.dragging=!0)}this.shouldUpdate.call(this,e)&&this.updateViewport(e)}}},onMouseUp:function(e){var t,r,i=this.graph;if(!this.keydown){var a=i.getZoom(),o=i.get("modeController"),s=(r=(t=o==null?void 0:o.modes[o.mode])===null||t===void 0?void 0:t.filter(function(nt){return nt.type==="zoom-canvas"}))===null||r===void 0?void 0:r[0],l=s?s.optimizeZoom||.1:0;if(this.enableOptimize){for(var u=i.getEdges(),c=0,f=u.length;c<f;c++){var h=u[c].get("group").get("children");!h||h.forEach(function(nt){var at=nt.get("ori-visibility");at&&nt.show()})}if(a>l)for(var d=i.getNodes(),g=0,p=d.length;g<p;g++)for(var m=d[g].getContainer(),_=m.get("children"),S=0,M=_;S<M.length;S++){var R=M[S],F=R.get("isKeyShape");if(!F){var V=R.get("ori-visibility");V&&R.show()}}}if(!this.dragging){this.origin=null;return}e=PN(e),this.shouldEnd.call(this,e)&&this.updateViewport(e),e.type="dragend",i.emit("canvas:dragend",e),this.endDrag()}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1},onKeyDown:function(e){var t=this,r=e.key;!r||(Bit.indexOf(r.toLowerCase())>-1?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1}},Git={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1}},getEvents:function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas","node:touchstart":"onTouchStart","node:touchmove":"onTouchMove","node:touchend":"onDragEnd"}},validationCombo:function(e){if(!this.origin||!e||e.destroyed)return!1;var t=e.getType();return t==="combo"},onTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,i=r[0],a=r[1];if(i&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.onDragStart(e)},onTouchMove:function(e){var t=this;try{var r=e.originalEvent.touches,i=r[0],a=r[1];if(i&&a){t.onDragEnd(e);return}e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.onDrag(e)},onDragStart:function(e){var t=this;if(!!this.shouldBegin.call(this,e)){var r=e.item;if(!(!r||r.destroyed||r.hasLocked())){var i=r.getContainer();i.set("capture",!1);var a=e.target;if(a){var o=a.get("isAnchorPoint");if(o)return}var s=this.graph;this.targets=[],this.targetCombo=null;var l=s.findAllByState("node",this.selectedState),u=r.get("id"),c=l.filter(function(h){var d=h.get("id");return u===d});c.length===0?this.targets.push(r):l.length>1?l.forEach(function(h){var d=h.hasLocked();d||t.targets.push(h)}):this.targets.push(r);var f=[];this.targets.forEach(function(h){f.push((0,v.clone)(h.getModel()))}),this.set("beforeDragNodes",f),this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(h){var d=h.getEdges();d.forEach(function(g){!g.isVisible()||(t.hidenEdge[g.getID()]=!0,g.hide())})}),this.origin={x:e.x,y:e.y},this.point={},this.originPoint={}}}},onDrag:function(e){var t=this;!this.origin||!this.shouldUpdate(this,e)||(this.get("enableDelegate")?this.updateDelegate(e):this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge")}):this.targets.map(function(r){t.update(r,e)}))},onDragEnd:function(e){var t=this;if(!(!this.origin||!this.shouldEnd.call(this,e))){var r=e.item;if(r){var i=r.getContainer();i.set("capture",!0)}this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.updatePositions(e),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(s){var l=s.getEdges();l.forEach(function(u){t.hidenEdge[u.getID()]&&u.show(),u.refresh()})}),this.hidenEdge={};var a=this.graph;if(a.get("enabledStack")){var o={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(s){o.before.nodes.push({id:s.id,x:s.x,y:s.y})}),this.targets.forEach(function(s){var l=s.getModel();o.after.nodes.push({id:l.id,x:l.x,y:l.y})}),a.pushStack("update",(0,v.clone)(o))}a.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(e){var t=e.item;if(!!this.validationCombo(t)){this.updatePositions(e);var r=this.graph;if(this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)r.updateCombos();else{var i=t.getModel();this.targets.map(function(a){var o=a.getModel();o.comboId!==i.id&&r.updateComboTree(a,i.id)}),r.updateCombo(t)}r.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(e){var t=this.graph;!this.targets||this.targets.length===0||(this.updatePositions(e),this.onlyChangeComboSize?t.updateCombos():this.targets.map(function(r){var i=r.getModel();i.comboId&&t.updateComboTree(r)}))},onDropNode:function(e){if(!(!this.targets||this.targets.length===0)){var t=this,r=e.item;this.updatePositions(e);var i=t.graph,a=r.getModel().comboId;if(a)if(this.onlyChangeComboSize)i.updateCombos();else{var o=i.findById(a);t.comboActiveState&&i.setItemState(o,t.comboActiveState,!1),this.targets.map(function(s){var l=s.getModel();a!==l.comboId&&i.updateComboTree(s,a)}),i.updateCombo(o)}else this.targets.map(function(s){var l=s.getModel();l.comboId&&i.updateComboTree(s)});i.emit("dragnodeend",{items:this.targets,targetItem:r})}},onDragEnter:function(e){var t=e.item;if(!!this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!0)}},onDragLeave:function(e){var t=e.item;if(!!this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1)}},updatePositions:function(e){var t=this;!this.targets||this.targets.length===0||this.get("enableDelegate")&&(this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),updateFunc:this.update}):this.targets.map(function(r){return t.update(r,e)}))},update:function(e,t){var r=this.origin,i=e.get("model"),a=e.get("id");this.point[a]||(this.point[a]={x:i.x||0,y:i.y||0});var o=t.x-r.x+this.point[a].x,s=t.y-r.y+this.point[a].y,l={x:o,y:s};this.get("updateEdge")?this.graph.updateItem(e,l,!1):e.updatePosition(l)},debounceUpdate:(0,v.debounce)(function(n){var e=n.targets,t=n.graph,r=n.point,i=n.origin,a=n.evt,o=n.updateEdge,s=n.updateFunc;e.map(function(l){var u=l.get("model"),c=l.get("id");r[c]||(r[c]={x:u.x||0,y:u.y||0});var f=a.x-i.x+r[c].x,h=a.y-i.y+r[c].y,d={x:f,y:h};o?t.updateItem(l,d,!1):l.updatePosition(d)})},50,!0),updateDelegate:function(e){var t=this.graph;if(this.delegateRect){var h=e.x-this.origin.x+this.originPoint.minX,d=e.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:h,y:d})}else{var r=t.get("group"),i=(0,v.deepMix)({},sf.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(e),o=a.x,s=a.y,l=a.width,u=a.height,c=a.minX,f=a.minY;this.originPoint={x:o,y:s,width:l,height:u,minX:c,minY:f},this.delegateRect=r.addShape("rect",{attrs:(0,b.__assign)({width:l,height:u,x:o,y:s},i),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(e){var t=this.targets;t.length===0&&t.push(e.item);for(var r=Infinity,i=-Infinity,a=Infinity,o=-Infinity,s=0;s<t.length;s++){var l=t[s],u=l.getBBox(),c=u.minX,f=u.minY,h=u.maxX,d=u.maxY;c<r&&(r=c),f<a&&(a=f),h>i&&(i=h),d>o&&(o=d)}var g=Math.floor(r),p=Math.floor(a),m=Math.ceil(i)-Math.floor(r),_=Math.ceil(o)-Math.floor(a);return{x:g,y:p,width:m,height:_,minX:r,minY:a}}},zit={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,i=r[0],a=r[1];if(i&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.setAllItemStates(e)},clearOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,i=r[0],a=r[1];if(i&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.clearActiveState(e)},setAllItemStates:function(e){var t=e.item,r=this.graph;if(this.item=t,!!this.shouldUpdate(e.item,{event:e,action:"activate"})){for(var i=this,a=this.activeState,o=this.inactiveState,s=r.getNodes(),l=r.getCombos(),u=r.getEdges(),c=r.get("vedges"),f=s.length,h=l.length,d=u.length,g=c.length,p=0;p<f;p++){var m=s[p],_=m.hasState("selected");i.resetSelected&&_&&r.setItemState(m,"selected",!1),r.setItemState(m,a,!1),o&&r.setItemState(m,o,!0)}for(var p=0;p<h;p++){var S=l[p],_=S.hasState("selected");i.resetSelected&&_&&r.setItemState(S,"selected",!1),r.setItemState(S,a,!1),o&&r.setItemState(S,o,!0)}for(var p=0;p<d;p++){var M=u[p];r.setItemState(M,a,!1),o&&r.setItemState(M,o,!0)}for(var p=0;p<g;p++){var R=c[p];r.setItemState(R,a,!1),o&&r.setItemState(R,o,!0)}o&&r.setItemState(t,o,!1),r.setItemState(t,a,!0);for(var F=t.getEdges(),V=F.length,p=0;p<V;p++){var M=F[p],nt=void 0;M.getSource()===t?nt=M.getTarget():nt=M.getSource(),o&&r.setItemState(nt,o,!1),r.setItemState(nt,a,!0),r.setItemState(M,o,!1),r.setItemState(M,a,!0),M.toFront()}r.emit("afteractivaterelations",{item:e.item,action:"activate"})}},clearActiveState:function(e){var t=this,r=t.get("graph");if(!!t.shouldUpdate(e.item,{event:e,action:"deactivate"})){var i=this.activeState,a=this.inactiveState,o=r.get("autoPaint");r.setAutoPaint(!1);for(var s=r.getNodes()||[],l=r.getCombos()||[],u=r.getEdges()||[],c=r.get("vedges")||[],f=s.length,h=l.length,d=u.length,g=c.length,p=0;p<f;p++){var m=s[p];r.clearItemStates(m,[i,a])}for(var p=0;p<h;p++){var _=l[p];r.clearItemStates(_,[i,a])}for(var p=0;p<d;p++){var S=u[p];r.clearItemStates(S,[i,a,"deactivate"])}for(var p=0;p<g;p++){var M=c[p];r.clearItemStates(M,[i,a,"deactivate"])}r.paint(),r.setAutoPaint(o),r.emit("afteractivaterelations",{item:e.item||t.get("item"),action:"deactivate"})}}},Mm=Math.min,RN=Math.max,NN=Math.abs,kN="shift",Uit=["drag","shift","ctrl","alt","control"],Wit={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:kN,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return Uit.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=kN,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(e){var t=e.item,r=this.brush;t||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),r||(r=this.createBrush()),this.originPoint={x:e.canvasX,y:e.canvasY},r.attr({width:0,height:0}),r.show(),this.dragging=!0)},onMouseMove:function(e){!this.dragging||this.trigger!=="drag"&&!this.keydown||this.updateBrush(e)},onMouseUp:function(e){var t=this.graph;!this.brush&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(e),this.dragging=!1)},clearStates:function(){var e=this,t=e.graph,r=e.selectedState,i=t.findAllByState("node",r),a=t.findAllByState("edge",r);i.forEach(function(o){return t.setItemState(o,r,!1)}),a.forEach(function(o){return t.setItemState(o,r,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedNodes:function(e){var t=this,r=this,i=r.graph,a=r.originPoint,o=r.shouldUpdate,s=this.selectedState,l={x:e.x,y:e.y},u=i.getPointByCanvas(a.x,a.y),c=Mm(l.x,u.x),f=RN(l.x,u.x),h=Mm(l.y,u.y),d=RN(l.y,u.y),g=[],p=[];i.getNodes().forEach(function(_){if(!!_.isVisible()){var S=_.getBBox();if(S.centerX>=c&&S.centerX<=f&&S.centerY>=h&&S.centerY<=d&&o(_,"select")){g.push(_);var M=_.getModel();p.push(M.id),i.setItemState(_,s,!0)}}});var m=[];this.includeEdges&&g.forEach(function(_){var S=_.getOutEdges();S.forEach(function(M){if(!!M.isVisible()){var R=M.getModel(),F=R.source,V=R.target;p.includes(F)&&p.includes(V)&&o(M,"select")&&(m.push(M),i.setItemState(M,t.selectedState,!0))}})}),this.selectedEdges=m,this.selectedNodes=g,this.onSelect&&this.onSelect(g,m),i.emit("nodeselectchange",{selectedItems:{nodes:g,edges:m},select:!0})},createBrush:function(){var e=this,t=e.graph.get("canvas").addShape("rect",{attrs:e.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,this.delegate=t,t},updateBrush:function(e){var t=this.originPoint;this.brush.attr({width:NN(e.canvasX-t.x),height:NN(e.canvasY-t.y),x:Mm(e.canvasX,t.x),y:Mm(e.canvasY,t.y)})},onKeyDown:function(e){var t=e.key;if(!!t){var r=this.trigger.toLowerCase(),i=t.toLowerCase();i===r||i==="control"&&r==="ctrl"||i==="ctrl"&&r==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},BN="shift",Vit=["shift","ctrl","alt","control"],Xit={getDefaultCfg:function(){return{multiple:!0,trigger:BN,selectedState:"selected"}},getEvents:function(){var e=this;return Vit.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=BN,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),e.multiple?{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(e){var t=this,r=e.item;if(!(!r||r.destroyed)){var i=r.getType(),a=t.graph,o=t.keydown,s=t.multiple,l=t.shouldUpdate,u=t.shouldBegin;if(!!u.call(t,e)){if(!o||!s){var c=a.findAllByState("node",t.selectedState).concat(a.findAllByState("combo",t.selectedState));(0,v.each)(c,function(d){d!==r&&a.setItemState(d,t.selectedState,!1)})}if(r.hasState(t.selectedState)){l.call(t,e)&&a.setItemState(r,t.selectedState,!1);var f=a.findAllByState("node",t.selectedState),h=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:f,combos:h},select:!1})}else{l.call(t,e)&&a.setItemState(r,t.selectedState,!0);var f=a.findAllByState("node",t.selectedState),h=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:f,combos:h},select:!0})}}}},onCanvasClick:function(){var e=this,t=this.graph,r=t.findAllByState("node",this.selectedState);(0,v.each)(r,function(a){t.setItemState(a,e.selectedState,!1)});var i=t.findAllByState("combo",this.selectedState);(0,v.each)(i,function(a){t.setItemState(a,e.selectedState,!1)}),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},onKeyDown:function(e){var t=this,r=e.key;!r||(r.toLowerCase()===this.trigger.toLowerCase()||r.toLowerCase()==="control"?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.keydown=!1}},Yit=Ry,FN=.05,Hit={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"}}},getEvents:function(){var e=this.fixSelectedItems;return e.fixState||(e.fixState="selected"),e.fixAll&&(e.fixLineWidth=!0,e.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(e){var t=e.originalEvent.touches,r=t[0],i=t[1];e.preventDefault(),!!i&&(this.shouldBegin&&!this.shouldBegin.call(this,e)||(this.startPoint={pageX:r.pageX,pageY:r.pageY},this.moveable=!0,i&&(this.endPoint={pageX:i.pageX,pageY:i.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(e){if(!!this.moveable){e.preventDefault();var t=e.originalEvent.touches,r=t[0],i=t[1];if(!!i){this.endPoint||(this.endPoint={pageX:i.pageX,pageY:i.pageY});var a=function(d,g){return Math.hypot(g.x-d.x,g.y-d.y)},o=a({x:r.pageX,y:r.pageY},{x:i.pageX,y:i.pageY})/a({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),s=this.originScale*o;this.currentScale=s;var l=this.get("minZoom")||this.graph.get("minZoom"),u=this.get("maxZoom")||this.graph.get("maxZoom");if(!(s>u||s<l)){var c=this.graph.get("canvas"),f=c.getPointByClient(e.clientX,e.clientY);this.graph.zoomTo(s,{x:f.x,y:f.y}),this.graph.emit("wheelzoom",e)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(e){var t=this,r=this,i=r.graph,a=r.fixSelectedItems;if(!(this.shouldBegin&&!this.shouldBegin.call(this,e))&&!!this.shouldUpdate.call(this,e)){e.preventDefault();var o=i.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),l=this.get("sensitivity"),u=i.getZoom(),c=u,f=u;e.wheelDelta<0?c=1-FN*l:c=1/(1-FN*l),f=u*c;var h=this.get("minZoom")||i.get("minZoom"),d=this.get("maxZoom")||i.get("maxZoom");if(!(f>d||f<h)){var g=this.get("enableOptimize");if(g){var p=this.get("optimizeZoom"),m=this.get("optimized"),_=i.getNodes(),S=i.getEdges(),M=_.length,R=S.length;if(!m){for(var F=0;F<M;F++){var V=_[F];if(!V.destroyed)for(var nt=V.get("group").get("children"),at=nt.length,xt=0;xt<at;xt++){var gt=nt[xt];!gt.destoryed&&!gt.get("isKeyShape")&&(gt.set("ori-visibility",gt.get("ori-visibility")||gt.get("visible")),gt.hide())}}for(var Tt=0;Tt<R;Tt++)for(var Ct=S[Tt],nt=Ct.get("group").get("children"),at=nt.length,xt=0;xt<at;xt++){var gt=nt[xt];gt.set("ori-visibility",gt.get("ori-visibility")||gt.get("visible")),gt.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var te=setTimeout(function(){var Kn=i.getZoom(),xn=t.get("optimized");if(xn){t.set("optimized",!1);for(var oi=0;oi<M;oi++){var ln=_[oi],si=ln.get("group").get("children"),Xn=si.length;if(Kn<p){var oa=ln.getKeyShape(),Gn=oa.get("ori-visibility");Gn&&oa.show()}else for(var cn=0;cn<Xn;cn++){var ei=si[cn],Gn=ei.get("ori-visibility");!ei.get("visible")&&Gn&&Gn&&ei.show()}}for(var Cr=0;Cr<R;Cr++){var qn=S[Cr],si=qn.get("group").get("children"),Xn=si.length;if(Kn<p){var oa=qn.getKeyShape(),Gn=oa.get("ori-visibility");Gn&&oa.show()}else for(var cn=0;cn<Xn;cn++){var ei=si[cn];if(!ei.get("visible")){var Gn=ei.get("ori-visibility");Gn&&ei.show()}}}}},100);this.set("timeout",te)}if(u<=1){var Kt=void 0,ne=void 0;if(a.fixAll||a.fixLineWidth||a.fixLabel){Kt=i.findAllByState("node",a.fixState),ne=i.findAllByState("edge",a.fixState);for(var ee=u/f,ve=Kt.length,ie=0;ie<ve;ie++){var V=Kt[ie],ye=V.getContainer(),Ee=V.getModel(),we=V.getOriginStyle(),Pe=V.getStateStyle(a.fixState),Ve=V.get("shapeFactory").getShape(Ee.type).getStateStyle(a.fixState,V)[a.fixState];if(a.fixAll){if(f<=1){var he=(0,v.clone)(ye.getMatrix());he||(he=[1,0,0,0,1,0,0,0,1]);var Te=V.getModel(),Je=Te.x,Ze=Te.y;he=Yit(he,[["t",-Je,-Ze],["s",ee,ee],["t",Je,Ze]]),ye.setMatrix(he)}}else for(var nt=ye.get("children"),at=nt.length,xt=0;xt<at;xt++){var gt=nt[xt],ar=void 0,cr=void 0;if(a.fixLabel){var Dr=gt.get("type");if(Dr==="text"){ar=gt.attr("fontSize")||12;var sn=Pe[gt.get("name")],Wr=Ve[gt.get("name")],ai=sn?sn.fontSize:12,Ln=Wr?Wr.fontSize:12,gi=ai||Ln||12;if(f<=1&&gt.attr("fontSize",gi/f),cr)break}}if(a.fixLineWidth&&gt.get("isKeyShape")){cr=gt.attr("lineWidth")||0;var Po=Pe.lineWidth||Ve.lineWidth||we.lineWidth||0;if(f<=1&&gt.attr("lineWidth",Po/f),ar)break}}}for(var Vn=ne.length,ti=0;ti<Vn;ti++)for(var Ct=ne[ti],ye=Ct.getContainer(),nt=ye.get("children"),Ee=Ct.getModel(),Pe=Ct.getStateStyle(a.fixState),Ve=Ct.get("shapeFactory").getShape(Ee.type).getStateStyle(a.fixState,Ct)[a.fixState],at=nt.length,xt=0;xt<at;xt++){var gt=nt[xt],ar=void 0,cr=void 0;if(a.fixLabel||a.fixAll){var Dr=gt.get("type");if(Dr==="text"){ar=gt.attr("fontSize")||12;var sn=Pe[gt.get("name")],Wr=Ve[gt.get("name")],ai=sn?sn.fontSize:12,Ln=Wr?Wr.fontSize:12,gi=ai||Ln||12;if(f<=1&&gt.attr("fontSize",gi/f),cr)break}}if((a.fixLineWidth||a.fixAll)&&gt.get("isKeyShape")){cr=gt.attr("lineWidth")||0;var Po=Pe.lineWidth||Ve.lineWidth||1;if(f<=1&&gt.attr("lineWidth",Po/f),ar)break}}}}i.zoomTo(f,{x:s.x,y:s.y}),i.emit("wheelzoom",e)}}}},GN={onMouseEnter:function(e){var t=e.item;this.currentTarget=t,this.showTooltip(e),this.graph.emit("tooltipchange",{item:e.item,action:"show"})},onMouseMove:function(e){if(!this.shouldUpdate(e)){this.hideTooltip();return}!this.currentTarget||e.item!==this.currentTarget||this.updatePosition(e)},onMouseLeave:function(e){!this.shouldEnd(e)||(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(e){var t=this.container;if(!(!e.item||e.item.destroyed)){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var r=this.formatText(e.item.get("model"),e);t.innerHTML=r,ct(this.container,{visibility:"visible"}),this.updatePosition(e)}},hideTooltip:function(){ct(this.container,{visibility:"hidden"})},updatePosition:function(e){var t=this.get("shouldBegin"),r=this,i=r.width,a=r.height,o=r.container,s=r.graph;if(!t(e)){ct(o,{visibility:"hidden"});return}var l=s.getPointByClient(e.clientX,e.clientY),u=s.getCanvasByPoint(l.x,l.y),c=u.x,f=u.y,h=o.getBoundingClientRect();c>i/2?c-=h.width:c+=this.offset,f>a/2?f-=h.height:f+=this.offset;var d=c+"px",g=f+"px";ct(this.container,{left:d,top:g,visibility:"visible"})},createTooltip:function(e){var t=e.get("el");t.style.position="relative";var r=rt('<div class="g6-tooltip g6-'+this.item+'-tooltip"></div>');return t.parentNode.appendChild(r),ct(r,{position:"absolute",visibility:"visible"}),this.width=e.get("width"),this.height=e.get("height"),this.container=r,this.graph.get("tooltips").push(r),r}},jit=(0,b.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},GN),Zit=(0,b.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: "+t.source+" target: "+t.target}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},GN),zN="click",Kit=["click","dblclick"],$it={getDefaultCfg:function(){return{trigger:zN,onChange:function(){}}},getEvents:function(){var e,t;return Kit.includes(this.trigger)?t=this.trigger:(t=zN,console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["node:"+t]="onNodeClick",e.touchstart="onNodeClick",e},onNodeClick:function(e){var t=e.item;if(!!t){var r=this.graph.findDataById(t.get("id"));if(!!r){var i=r.children;if(!(!i||i.length===0)){var a=!r.collapsed;!this.shouldBegin(e,a)||(r.collapsed=a,t.getModel().collapsed=a,this.graph.emit("itemcollapsed",{item:e.item,collapsed:a}),!!this.shouldUpdate(e,a)&&(this.onChange(t,a),this.graph.layout()))}}}}},Qit=Gl.calculationItemsBBox,Jit=function n(e,t){if(t(e)!==!1&&e){var r=e.get("combos");if(r.length===0)return!1;(0,v.each)(r,function(i){n(i,t)})}},qit={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected"}},getEvents:function(){return{"combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(e){var t=e.item;if(!t||t.destroyed||!this.shouldUpdate(this,e))return!1;var r=t.getType();return r==="combo"},onDragStart:function(e){var t=this,r=this.graph,i=e.item;if(!!this.validationCombo(e)){this.targets=[];var a=r.findAllByState("combo",this.selectedState),o=i.get("id"),s=a.filter(function(l){var u=l.get("id");return o===u});s.length===0?this.targets.push(i):this.targets=a,this.activeState&&this.targets.map(function(l){var u=l.getModel();if(u.parentId){var c=r.findById(u.parentId);c&&r.setItemState(c,t.activeState,!0)}}),this.point={},this.originPoint={},this.origin={x:e.x,y:e.y},this.currentItemChildCombos=[],Jit(i,function(l){if(l.destroyed)return!1;var u=l.getModel();return t.currentItemChildCombos.push(u.id),!0})}},onDrag:function(e){var t=this;if(!!this.origin&&!!this.validationCombo(e))if(this.enableDelegate)this.updateDelegate(e);else{if(this.activeState){var r=this.graph,i=e.item,a=i.getModel(),o=r.getCombos(),s=i.getBBox(),l=s.centerX,u=s.centerY,c=s.width,f=o.filter(function(h){var d=h.getModel();return a.parentId,d.id!==a.id&&!t.currentItemChildCombos.includes(d.id)});f.map(function(h){var d=h.getBBox(),g=d.centerX,p=d.centerY,m=d.width,_=l-g,S=u-p,M=2*Math.sqrt(_*_+S*S);c+m-M>.8*c?r.setItemState(h,t.activeState,!0):r.setItemState(h,t.activeState,!1)})}(0,v.each)(this.targets,function(h){t.updateCombo(h,e)})}},updatePositions:function(e){var t=this;this.enableDelegate&&(0,v.each)(this.targets,function(r){t.updateCombo(r,e)})},onDrop:function(e){var t=this,r=e.item;if(!(!r||!this.targets||r.destroyed)){this.updatePositions(e);var i=this.graph,a=r.getModel();this.targets.map(function(o){var s=o.getModel();s.parentId!==a.id?(t.activeState&&i.setItemState(r,t.activeState,!1),t.onlyChangeComboSize?i.updateCombo(o):i.updateComboTree(o,a.id)):i.updateCombo(r)}),this.end(r,e),this.endComparison=!0}},onNodeDrop:function(e){var t=this;if(!(!this.targets||this.targets.length===0)){this.updatePositions(e);var r=this.graph,i=e.item,a=i.getModel().comboId,o;if(a){if(this.activeState){var s=r.findById(a);r.setItemState(s,this.activeState,!1)}this.targets.map(function(l){t.onlyChangeComboSize?r.updateCombo(l):a!==l.getID()&&(o=r.findById(a),a!==l.getModel().parentId&&r.updateComboTree(l,a))})}else this.targets.map(function(l){if(t.onlyChangeComboSize)r.updateCombo(l);else{var u=l.getModel();u.comboId&&r.updateComboTree(l)}});this.endComparison=!0,this.end(o,e)}},onDragEnter:function(e){if(!!this.origin&&!!this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!0)}},onDragLeave:function(e){if(!!this.origin&&!!this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!1)}},onDragEnd:function(e){if(!(!this.targets||this.targets.length===0)){var t=e.item;this.updatePositions(e);var r=this.getParentCombo(t.getModel().parentId),i=this.graph;r&&this.activeState&&i.setItemState(r,this.activeState,!1),this.end(void 0,e)}},end:function(e,t){var r=this;if(!!this.origin){var i=this.graph;if(this.delegateShape){var a=i.get("delegateGroup");a.clear(),this.delegateShape=null}e&&this.activeState&&i.setItemState(e,this.activeState,!1),e||this.targets.map(function(o){r.onlyChangeComboSize?i.updateCombo(o):i.updateComboTree(o)}),this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(e,t){var r=this;if(t(e)!==!1&&e){var i=e.get("combos");(0,v.each)(i,function(o){r.traverse(o,t)});var a=e.get("nodes");(0,v.each)(a,function(o){r.traverse(o,t)})}},updateCombo:function(e,t){var r=this;this.traverse(e,function(i){return i.destroyed?!1:(r.updateSignleItem(i,t),!0)})},updateSignleItem:function(e,t){var r=this.origin,i=this.graph,a=e.getModel(),o=e.get("id");this.point[o]||(this.point[o]={x:a.x,y:a.y});var s=t.x-r.x+this.point[o].x,l=t.y-r.y+this.point[o].y;i.updateItem(e,{x:s,y:l})},getParentCombo:function(e){var t=this.graph;if(!!e){var r=t.findById(e);if(!!r)return r}},updateDelegate:function(e){var t=this.graph;if(this.delegateShape){var h=e.x-this.origin.x+this.originPoint.minX,d=e.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:h,y:d})}else{var r=t.get("delegateGroup"),i=null;this.targets.length>1?i=Qit(this.targets):i=this.targets[0].getBBox();var a=i.x,o=i.y,s=i.width,l=i.height,u=i.minX,c=i.minY;this.originPoint={x:a,y:o,width:s,height:l,minX:u,minY:c};var f=(0,b.__assign)((0,b.__assign)({},sf.delegateStyle),this.delegateStyle);this.delegateShape=r.addShape("rect",{attrs:(0,b.__assign)({width:i.width,height:i.height,x:i.x,y:i.y},f),name:"combo-delegate-shape"}),this.delegate=this.delegateShape}}},UN="dblclick",tat=["click","dblclick"],eat={getDefaultCfg:function(){return{trigger:UN,relayout:!0}},getEvents:function(){var e,t;return tat.includes(this.trigger)?t=this.trigger:(t=UN,console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["combo:"+t]="onComboClick",e},onComboClick:function(e){var t=e.item,r=this,i=r.graph,a=r.relayout;if(!(!t||t.destroyed||t.getType()!=="combo")){var o=t.getModel(),s=o.id;!s||(i.collapseExpandCombo(s),a&&i.get("layout")?i.layout():i.refreshPositions())}}},rat=Gl.isPolygonsIntersect,nat=Gl.pathToPoints,WN="shift",iat=["drag","shift","ctrl","alt","control"],aat=function(e,t){var r,i=e.getKeyShape();if(e.get("type")==="path")r=nat(i.attr("path"));else{var a=i.getCanvasBBox();r=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}return rat(t,r)},oat={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:WN,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return iat.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=WN,console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(e){var t=this.lasso,r=e.item;r||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:e.x,y:e.y},this.points.push(this.originPoint),t.show())},onDragMove:function(e){!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push({x:e.x,y:e.y}),this.updateLasso(e))},onDragEnd:function(e){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var e=this.points,t=[];return e.length&&(e.forEach(function(r,i){i===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t.push(["L",e[0].x,e[0].y])),t},clearStates:function(){var e=this,t=e.graph,r=e.selectedState,i=t.findAllByState("node",r),a=t.findAllByState("edge",r);i.forEach(function(o){return t.setItemState(o,r,!1)}),a.forEach(function(o){return t.setItemState(o,r,!1)}),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var e=this,t=this,r=t.graph,i=t.shouldUpdate,a=this.points.map(function(c){return[r.getCanvasByPoint(c.x,c.y).x,r.getCanvasByPoint(c.x,c.y).y]}),o=this.selectedState,s=[],l=[];r.getNodes().forEach(function(c){if(!!c.isVisible()&&aat(c,a)&&i(c,"select")){s.push(c);var f=c.getModel();l.push(f.id),r.setItemState(c,o,!0)}});var u=[];this.includeEdges&&s.forEach(function(c){var f=c.getOutEdges();f.forEach(function(h){if(!!h.isVisible()){var d=h.getModel(),g=d.source,p=d.target;l.includes(g)&&l.includes(p)&&i(h,"select")&&(u.push(h),r.setItemState(h,e.selectedState,!0))}})}),this.selectedEdges=u,this.selectedNodes=s,this.onSelect&&this.onSelect(s,u),r.emit("nodeselectchange",{selectedItems:{nodes:s,edges:u},select:!0})},createLasso:function(){var e=this,t=e.graph.get("delegateGroup").addShape("path",{attrs:(0,b.__assign)({path:[]},e.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.delegate=t,this.points=[],t},updateLasso:function(e){var t=this;this.lasso.attr({path:t.getLassoPath()})},onKeyDown:function(e){var t=e.key;!t||(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},VN="click",sat=["click","drag"],XN=void 0,lat=["shift","ctrl","control","alt","meta",void 0],uat={getDefaultCfg:function(){return{trigger:VN,key:XN,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var e=this;sat.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=VN,console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),e.key&&lat.indexOf(e.key.toLowerCase())===-1&&(e.trigger=XN,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined"));var t;return e.trigger==="drag"?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:e.trigger==="click"&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),e.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item;(!r||r.getID()===t.source||r.getType()!=="node")&&t.cancelCreating({item:t.edge,x:e.x,y:e.y})}},onClick:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item,i=t.graph,a=r.getModel(),o=t.getEdgeConfig;if(t.addingEdge&&t.edge){if(!t.shouldEnd.call(t,e))return;var s=void 0;o&&(0,v.isFunction)(o)?s=o({source:t.source,target:a.id}):s=t.edgeConfig;var l=(0,b.__assign)({target:a.id},s);if(t.source===a.id&&(l.type="loop"),i.emit("beforecreateedge",{}),i.updateItem(t.edge,l,!1),i.get("enabledStack")){var u=(0,b.__assign)((0,b.__assign)({},t.edge.getModel()),{itemType:"edge"}),c={};c.edges=[u],i.pushStack("add",{before:{},after:c})}i.emit("aftercreateedge",{edge:t.edge}),t.edge.getKeyShape().set("capture",!0),t.edge=null,t.addingEdge=!1}else{if(!t.shouldBegin.call(t,e))return;var s=void 0;o&&(0,v.isFunction)(o)?s=o({source:a.id,target:a.id}):s=t.edgeConfig,t.edge=i.addItem("edge",(0,b.__assign)({source:a.id,target:a.id},s),!1),t.source=a.id,t.addingEdge=!0,t.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(e){var t=this;if(!(t.key&&!t.keydown)){var r={x:e.x,y:e.y};if(!t.graph.findById(t.source)){t.addingEdge=!1;return}t.addingEdge&&t.edge&&t.graph.updateItem(t.edge,{target:r},!1)}},cancelCreating:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=t.graph,i=e.item;if(t.addingEdge&&e.target&&e.target.isCanvas&&e.target.isCanvas()){r.removeItem(t.edge,!1),t.edge=null,t.addingEdge=!1;return}t.addingEdge&&t.edge===i&&(r.removeItem(t.edge,!1),t.edge=null,t.addingEdge=!1)}},onKeyDown:function(e){var t=this,r=e.key;!r||(r.toLowerCase()===t.key.toLowerCase()?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.addingEdge&&e.edge&&(e.graph.removeItem(e.edge,!1),e.addingEdge=!1,e.edge=null),this.keydown=!1}},YN="ctrl",cat=["shift","ctrl","alt","control"],fat="1",hat={getDefaultCfg:function(){return{trigger:YN,combinedKey:fat,functionName:"fitView",functionParams:[]}},getEvents:function(){return cat.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=YN,console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '"+this.trigger+"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(e){var t=e.key;if(!!t){var r=this.trigger.toLowerCase(),i=t.toLowerCase();this.triggerKeydown||(i===r||i==="control"&&r==="ctrl"||i==="ctrl"&&r==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var a=this.graph;if(!a[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '"+this.functionName+"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D"),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]();return}var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(i===o||i==="control"&&o==="ctrl"||i==="ctrl"&&o==="control")&&(this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},dat=["shift","ctrl","alt","control"],vat={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0}},getEvents:function(){return(!this.zoomKey||dat.indexOf(this.zoomKey)===-1)&&(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(e){var t=this,r=this.graph,i=e[this.zoomKey+"Key"];if(this.zoomKey==="control"&&(i=e.ctrlKey),i){var a=r.get("canvas"),o=a.getPointByClient(e.clientX,e.clientY),s=r.getZoom();e.wheelDelta>0?s=s+s*.05:s=s-s*.05,r.zoomTo(s,{x:o.x,y:o.y})}else{var l=e.deltaX||e.movementX,u=e.deltaY||e.movementY;!u&&navigator.userAgent.indexOf("Firefox")>-1&&(u=-e.wheelDelta*125/3);var c=this.graph.get("width"),f=this.graph.get("height"),h=this.graph.get("canvas").getCanvasBBox(),d=this.scalableRange,g=this.scalableRange;d<1&&d>-1&&(d=c*d,g=f*g),(h.minX<=c+d&&h.minX+l>c+d||h.maxX+d>=0&&h.maxX+d+l<0)&&(l=0),(h.minY<=f+g&&h.minY+u>f+g||h.maxY+g>=0&&h.maxY+g+u<0)&&(u=0),this.get("direction")==="x"?u=0:this.get("direction")==="y"&&(l=0),r.translate(-l,-u)}e.preventDefault();var p=this.get("enableOptimize");if(p){var m=this.get("optimizeZoom"),_=this.get("optimized"),S=r.getNodes(),M=r.getEdges(),R=S.length,F=M.length;if(!_){for(var V=0;V<R;V++){var nt=S[V];if(!nt.destroyed)for(var at=nt.get("group").get("children"),xt=at.length,gt=0;gt<xt;gt++){var Tt=at[gt];!Tt.destoryed&&!Tt.get("isKeyShape")&&(Tt.set("ori-visibility",Tt.get("ori-visibility")||Tt.get("visible")),Tt.hide())}}for(var Ct=0;Ct<F;Ct++)for(var te=M[Ct],at=te.get("group").get("children"),xt=at.length,gt=0;gt<xt;gt++){var Tt=at[gt];Tt.set("ori-visibility",Tt.get("ori-visibility")||Tt.get("visible")),Tt.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Kt=setTimeout(function(){var ne=r.getZoom(),ee=t.get("optimized");if(ee){t.set("optimized",!1);for(var ve=0;ve<R;ve++){var ie=S[ve],ye=ie.get("group").get("children"),Ee=ye.length;if(ne<m){var we=ie.getKeyShape(),Pe=we.get("ori-visibility");Pe&&we.show()}else for(var Ve=0;Ve<Ee;Ve++){var he=ye[Ve],Pe=he.get("ori-visibility");!he.get("visible")&&Pe&&Pe&&he.show()}}for(var Te=0;Te<F;Te++){var Je=M[Te],ye=Je.get("group").get("children"),Ee=ye.length;if(ne<m){var we=Je.getKeyShape(),Pe=we.get("ori-visibility");Pe&&we.show()}else for(var Ve=0;Ve<Ee;Ve++){var he=ye[Ve];if(!he.get("visible")){var Pe=he.get("ori-visibility");Pe&&he.show()}}}}},100);this.set("timeout",Kt)}}},gat={"drag-canvas":Fit,"zoom-canvas":Hit,"drag-node":Git,"activate-relations":zit,"brush-select":Wit,"click-select":Xit,"lasso-select":oat,tooltip:jit,"edge-tooltip":Zit,"collapse-expand":$it,"drag-combo":qit,"collapse-expand-combo":eat,"create-edge":uat,"shortcuts-call":hat,"scroll-canvas":vat};(0,v.each)(gat,function(n,e){eI(e,n)});var pat=(0,b.__assign)((0,b.__assign)({},U),NZ),gut=pa.Grid,put=pa.Minimap,yut=pa.Bundling,mut=pa.Menu,yat=pa.Fisheye,xut=pa.ToolBar,but=pa.Tooltip,mat=pa.TimeBar,xat=pa.ImageMinimap,bat=pa.EdgeFilterLens,_at=pa.SnapLine,_ut=pa.Legend,HN={version:sf.version,Graph:sN,TreeGraph:Trt,Util:Gl,Layout:U_,TreeLayout:hrt,registerLayout:drt,Global:sf,registerBehavior:eI,registerCombo:RZ,registerEdge:tI,registerNode:Ll,Minimap:pa.Minimap,Grid:pa.Grid,Bundling:pa.Bundling,Menu:pa.Menu,ToolBar:pa.ToolBar,Tooltip:pa.Tooltip,Legend:pa.Legend,TimeBar:mat,SnapLine:_at,Fisheye:yat,ImageMinimap:xat,EdgeFilterLens:bat,Algorithm:pat,Arrow:$T,Marker:QT,Shape:Nu};HN.version="4.3.4";var vi=HN,Sut="4.3.4",Hu=function(){return Hu=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Hu.apply(this,arguments)},Sat={show:!1,size:[150,100],type:"keyShape"},lp=function(n,e,t){var r,i;return t&&t.current&&(r=t.current.offsetWidth,i=t.current.offsetHeight||500),!n&&!r||!e&&!i?(console.warn("\u8BF7\u4E3A Graph \u6307\u5B9A width \u4E0E height\uFF01\u5426\u5219\u5C06\u4F7F\u7528\u9ED8\u8BA4\u503C 500 * 500"),[500,500]):[n||r||500,e||i||500]},up=function(n,e){if(!(!e||e.destroyed)){if(n&&n.show){var t=Object.assign(Sat,n),r=new vi.Minimap(Hu({},t));return e.addPlugin(r),r}return null}},Eat=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var e=Math.random()*16|0,t=n=="x"?e:e&3|8;return t.toString(16)})},Am=function(n){return n.current||(n.current="IndentedTreeGraph-"+Eat()),n.current},nS=function(n,e,t){var r=bg(e);n.data(r),n.render(),t?n.fitView():n.fitCenter()},Tm=function(n,e){var t=e.handleEdgeClick,r=e.handleEdgeHover,i=e.handleEdgeUnHover,a=e.handleNodeClick,o=e.handleNodeHover,s=e.handleNodeUnHover,l=e.handleCanvasClick;n.on("edge:mouseenter",function(u){var c=u.item;n.setItemState(c,"hover",!0),r==null||r(c,n)}),n.on("edge:mouseleave",function(u){var c=u.item;n.setItemState(c,"hover",!1),i==null||i(c,n)}),n.on("edge:click",function(u){var c=u.item;t==null||t(c,n)}),n.on("edge:touchstart",function(u){var c=u.item;t==null||t(c,n)}),n.on("node:mouseenter",function(u){var c=u.item;n.setItemState(c,"hover",!0),o==null||o(c,n)}),n.on("node:mouseleave",function(u){var c=u.item;n.setItemState(c,"hover",!1),s==null||s(c,n)}),n.on("node:click",function(u){var c=u.item;a==null||a(c,n)}),n.on("canvas:click",function(){l==null||l(n)}),n.on("canvas:touchstart",function(){l==null||l(n)})},Im=function(n,e){return Hu(Hu(Hu({},e),n),{layout:Hu(Hu({},e==null?void 0:e.layout),n==null?void 0:n.layout)})};function Sf(n,e,t){var r=(0,z.useRef)(),i=e.data,a=e.nodeStyle,o=e.nodeAnchorPoints,s=e.nodeType,l=e.edgeType,u=e.edgeStyle,c=e.width,f=e.height,h=e.layout,d=e.minimapCfg,g=e.behaviors,p=e.nodeLabelCfg,m=e.edgeLabelCfg,_=e.autoFit,S=_===void 0?!0:_,M;return(0,z.useEffect)(function(){n&&!n.destroyed&&(n.changeData(i),S?n.fitView():n.fitCenter())},[i]),(0,z.useEffect)(function(){n&&!n.destroyed&&n.getNodes().forEach(function(R){n.updateItem(R,{type:s,style:a,anchorPoints:o,labelCfg:p})})},[a,o,s]),(0,z.useEffect)(function(){n&&!n.destroyed&&n.getEdges().forEach(function(R){n.updateItem(R,{type:l,style:u,labelCfg:m})})},[u,l]),(0,z.useEffect)(function(){if(n&&!n.destroyed){var R=lp(c,f,t);n.changeSize(R[0],R[1])}},[t,c,f]),(0,z.useEffect)(function(){n&&!n.destroyed&&n.updateLayout(h)},[h]),(0,z.useEffect)(function(){if(!(!d||!n||n.destroyed))if(d.show)M=up(d,n),M==null||M.updateCanvas();else{var R=n.get("plugins")[0];R&&n.removePlugin(R)}},[d]),(0,z.useEffect)(function(){if(n&&!n.destroyed){var R=n.get("modes").default,F=[];R.forEach(function(V){(0,v.isObject)(V)?F.push(V.type):(0,v.isString)(V)&&F.push(V)}),n.removeBehaviors(F,"default"),n.addBehaviors(g,"default")}},[g]),(0,z.useEffect)(function(){return r.current=n,function(){n&&!n.destroyed&&(n.destroy(),n=void 0)}},[]),{graphHook:r}}var Da=function(){return Da=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Da.apply(this,arguments)},wat=function(){vi.registerNode("card-node",{draw:function(n,e){var t;n===void 0&&(n={});var r=n.size||[100,30];typeof r=="number"&&(r=[r,r]);var i=Da({radius:2,fill:"#fff"},n.style),a=i.stroke||n.color||"#5B8FF9",o=i.radius||0,s=e.addShape("rect",{attrs:Da({x:0,y:0,width:r[0],height:r[1],stroke:a},i),name:"main-box",draggable:!0}),l=n.title||n.label,u,c=((t=n.labelCfg)===null||t===void 0?void 0:t.style)||{};if(l){var f=Da({fill:"#fff"},c);u=e.addShape("text",{attrs:Da(Da({textBaseline:"top",x:8,y:2,text:l},f),{fill:"#fff"}),name:"title"})}var h=u?u.getBBox():{height:r[1]/2},d=e.addShape("rect",{attrs:{x:0,y:0,width:r[0],height:h.height+4,fill:a,radius:[o,o,0,0]},name:"title-rect",draggable:!0});u==null||u.toFront();var g;(n==null?void 0:n.children)&&(g=e.addShape("marker",{attrs:{x:r[0]/2,y:0,r:6,cursor:"pointer",symbol:n.collapsed?vi.Marker.expand:vi.Marker.collapse,stroke:a,lineWidth:1,fill:"#fff"},name:"collapse-icon"}));var p=n&&n.description?n.description:void 0,m=d.getBBox(),_;if(p&&(_=e.addShape("text",{attrs:Da({textBaseline:"top",x:8,y:m.height+8,text:p},c),name:"description"})),_){var S=_.getBBox(),M=m.height+16+S.height,R=r[0]>S.width+16?r[0]:S.width+16;s.attr({width:R,height:M}),d==null||d.attr("width",R),g==null||g.attr({x:R,y:M/2})}return s},update:void 0},"single-node"),vi.registerNode("round-rect",{drawShape:function(n,e){n===void 0&&(n={});var t=n.size||[100,30];typeof t=="number"&&(t=[t,t]);var r=n.style||{},i=r.stroke||n.color||"#5B8FF9",a=r.fill||"#fff";r=Da({width:t[0],height:t[1],radius:t[1]/2,fill:a,lineWidth:1.2,stroke:i},r);var o=e.addShape("rect",{attrs:Da({x:-t[0]/2,y:-t[1]/2},r),name:"rect-shape"});return e.addShape("circle",{attrs:{x:-t[0]/2,y:0,r:3,fill:r.stroke},name:"circle-shape"}),e.addShape("circle",{attrs:{x:t[0]/2,y:0,r:3,fill:r.stroke},name:"circle-shape2"}),o},getAnchorPoints:function(){return[[0,.5],[1,.5]]},update:function(e,t){var r;e===void 0&&(e={});var i=t.getContainer(),a=i.get("children"),o=a[0],s=a[1],l=a[2],u=((r=e.style)===null||r===void 0?void 0:r.stroke)||"#5B8FF9";u&&(o.attr("stroke",u),s.attr("fill",u),l.attr("fill",u))}},"single-node"),vi.registerEdge("fund-polyline",{draw:function(e,t){var r;e===void 0&&(e={});var i=e.startPoint,a=e.endPoint,o=a.y-i.y,s=o!==0?Math.min(500/Math.abs(o),20):0,l=s>15?0:16,u=o<0?l:-l,c={x:i.x+s,y:a.y+u},f={x:c.x+l,y:a.y},h={x:(c.x-i.x)*(a.y-i.y)/(c.y-i.y)+i.x,y:a.y},d=[["M",i.x,i.y],["L",c.x,c.y],["Q",h.x,h.y,f.x,f.y],["L",a.x,a.y]];Math.abs(o)<=5&&(d=[["M",i.x,i.y],["L",a.x,a.y]]);var g=e.style,p=g.stroke||(e==null?void 0:e.colorMap)&&e.colorMap[e.dataType]?(e==null?void 0:e.colorMap)[e==null?void 0:e.dataType]:"#5B8FF9",m=((r=e.style)===null||r===void 0?void 0:r.endArrow)||!1;(0,v.isObject)(m)&&(m.fill=p);var _=t.addShape("path",{attrs:{path:d,stroke:p,lineWidth:g.lineWidth||1.2,endArrow:m},name:"path-shape"}),S=0,M=8,R,F=f.x+S;if((e==null?void 0:e.label)&&(R=t.addShape("text",{attrs:{text:e.label,x:F,y:a.y-M-2,fontSize:14,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-label"})),e==null?void 0:e.dataType){var V=R?R.getBBox():{height:0};t.addShape("text",{attrs:{text:e.dataType,x:F,y:a.y-M-V.height-2,fontSize:10,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-type"})}return(e==null?void 0:e.subLabel)&&t.addShape("text",{attrs:{text:e.subLabel,x:F,y:a.y+M+4,fontSize:12,fontWeight:300,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-sub-label"}),_},update:void 0},"single-edge"),vi.registerEdge("flow-line",{draw:function(n,e){n===void 0&&(n={});var t=n.startPoint,r=n.endPoint,i=n.style,a=i===void 0?{}:i,o=e.addShape("path",{attrs:{stroke:a.stroke,endArrow:a.endArrow,path:[["M",t.x,t.y],["L",t.x,(t.y+r.y)/2],["L",r.x,(t.y+r.y)/2],["L",r.x,r.y]]}});return o}})},Cat=function(n){vi.registerNode("icon-node",{options:{size:[60,20],stroke:"#91d5ff",fill:"#91d5ff"},draw:function(e,t){e===void 0&&(e={});var r=this.getShapeStyle(e),i=e.labelCfg,a=i===void 0?{}:i,o=t.addShape("rect",{attrs:Da(Da({},r),{x:0,y:0})}),s={fill:"#e6fffb"},l="https://g.alicdn.com/cm-design/arms-trace/1.0.155/styles/armsTrace/images/TAIR.png";return e.leftIcon&&(s=Da(Da({},s),e.leftIcon.style),l=e.leftIcon.img),t.addShape("rect",{attrs:Da({x:1,y:1,width:38,height:r.height-2},s)}),t.addShape("image",{attrs:{x:8,y:8,width:24,height:24,img:l},name:"image-shape"}),n.enableEdit&&(t.addShape("marker",{attrs:{x:r.width/3,y:r.height+6,r:6,stroke:"#73d13d",cursor:"pointer",symbol:vi.Marker.expand},name:"add-item"}),t.addShape("marker",{attrs:{x:r.width*2/3,y:r.height+6,r:6,stroke:"#ff4d4f",cursor:"pointer",symbol:vi.Marker.collapse},name:"remove-item"})),e.label&&t.addShape("text",{attrs:Da(Da({},a.style),{text:e.label,x:r.width/2,y:r.height/1.5})}),o}},"rect")},el={style:{fill:"#000",fontSize:12}},Om={stroke:"#91d5ff",endArrow:{path:vi.Arrow.vee(10,10)}},Pm=[[.5,0],[.5,1]],ja={hover:{stroke:"#1890ff",lineWidth:2}},Dm=[120,40],jN={fill:"#91d5ff",stroke:"#40a9ff",radius:2},ZN={stroke:"#91d5ff",endArrow:{path:"M 0,0 L 12, 6 L 9,0 L 12, -6 Z",fill:"#91d5ff",d:-20}},KN={type:"compactBox",direction:"TB",getId:function(e){return e.id},getHeight:function(){return 16},getWidth:function(){return 16},getVGap:function(){return 40},getHGap:function(){return 70}},Mat={nodeType:"rect",edgeType:"flow-line",collapseExpand:!1,nodeSize:[120,40],nodeLabelCfg:el,edgeLabelCfg:el,layout:KN,enableEdit:!1,nodeStyle:jN,edgeStyle:ZN,nodeStateStyles:ja,edgeStateStyles:ja,autoFit:!0},md={},Aat=function(n){var e=Im(n,Mat),t=e.data,r=e.className,i=e.style,a=e.width,o=e.height,s=e.nodeType,l=s===void 0?"rect":s,u=e.edgeType,c=u===void 0?"flow-line":u,f=e.collapseExpand,h=f===void 0?!1:f,d=e.nodeSize,g=d===void 0?[120,40]:d,p=e.nodeLabelCfg,m=p===void 0?el:p,_=e.edgeLabelCfg,S=_===void 0?el:_,M=e.layout,R=M===void 0?KN:M,F=e.enableEdit,V=F===void 0?!1:F,nt=e.minimapCfg,at=e.nodeStyle,xt=at===void 0?jN:at,gt=e.edgeStyle,Tt=gt===void 0?ZN:gt,Ct=e.nodeStateStyles,te=Ct===void 0?ja:Ct,Kt=e.edgeStateStyles,ne=Kt===void 0?ja:Kt,ee=e.autoFit,ve=ee===void 0?!0:ee,ie=e.graphRef,ye=e.onReady,Ee=e.loading,we=e.loadingTemplate,Pe=e.errorTemplate,Ve=z.useRef(null),he=z.useRef(null),Te=Am(he);return Sf(md[Te],e,Ve),(0,z.useEffect)(function(){var Je=lp(a,o,Ve);l==="icon-node"&&Cat({enableEdit:V});var Ze=md[Te];return Ze||(Ze=new vi.TreeGraph({container:Ve.current,width:Je[0],height:Je[1],linkCenter:!0,modes:{default:["drag-canvas","zoom-canvas"]},defaultNode:{type:l,size:g,style:xt,labelCfg:m},defaultEdge:{type:c,style:Tt,labelCfg:S},nodeStateStyles:te,edgeStateStyles:ne,layout:R}),md[Te]=Ze),ie&&(ie.current=Ze),up(nt,Ze),nS(Ze,t,ve),ye&&ye(Ze),h&&Ze.addBehaviors({type:"collapse-expand"},"default"),Tm(Ze,n),function(){md[Te]&&(md[Te].destroy(),delete md[Te])}},[]),z.createElement(bn,{errorTemplate:Pe},Ee&&z.createElement(_n,{loadingTemplate:we}),z.createElement("div",{className:r,style:i,ref:Ve}))},$N=Aat,QN={stroke:"#40a9ff"},JN={type:"dagre",rankdir:"TB",nodesepFunc:function(){return 0},ranksepFunc:function(){return 0},controlPoints:!0},Tat={nodeType:"modelRect",edgeType:"polyline",behaviors:["zoom-canvas","drag-canvas"],nodeSize:Dm,nodeLabelCfg:el,edgeLabelCfg:el,nodeAnchorPoints:Pm,layout:JN,nodeStyle:QN,edgeStyle:Om,nodeStateStyles:ja,edgeStateStyles:ja,autoFit:!0},xd={},Iat=function(n){var e=Im(n,Tat),t=e.data,r=e.className,i=e.style,a=e.width,o=e.height,s=e.nodeType,l=s===void 0?"modelRect":s,u=e.edgeType,c=u===void 0?"polyline":u,f=e.behaviors,h=f===void 0?["zoom-canvas","drag-canvas"]:f,d=e.nodeSize,g=d===void 0?Dm:d,p=e.nodeLabelCfg,m=p===void 0?el:p,_=e.edgeLabelCfg,S=_===void 0?el:_,M=e.nodeAnchorPoints,R=M===void 0?Pm:M,F=e.layout,V=F===void 0?JN:F,nt=e.minimapCfg,at=e.nodeStyle,xt=at===void 0?QN:at,gt=e.edgeStyle,Tt=gt===void 0?Om:gt,Ct=e.nodeStateStyles,te=Ct===void 0?ja:Ct,Kt=e.edgeStateStyles,ne=Kt===void 0?ja:Kt,ee=e.autoFit,ve=ee===void 0?!0:ee,ie=e.graphRef,ye=e.onReady,Ee=e.loading,we=e.loadingTemplate,Pe=e.errorTemplate,Ve=z.useRef(null),he=z.useRef(null),Te=Am(he);return Sf(xd[Te],e,Ve),(0,z.useEffect)(function(){var Je=lp(a,o,Ve),Ze=xd[Te];return Ze||(Ze=new vi.Graph({container:Ve.current,width:Je[0],height:Je[1],modes:{default:h},defaultNode:{type:l,size:g,style:xt,anchorPoints:R,labelCfg:m},defaultEdge:{type:c,style:Tt,labelCfg:S},nodeStateStyles:te,edgeStateStyles:ne,layout:V,fitView:!0}),xd[Te]=Ze),ie&&(ie.current=Ze),up(nt,Ze),nS(Ze,t,ve),ye&&ye(Ze),Tm(Ze,n),function(){xd[Te]&&(xd[Te].destroy(),delete xd[Te])}},[]),z.createElement(bn,{errorTemplate:Pe},Ee&&z.createElement(_n,{loadingTemplate:we}),z.createElement("div",{className:r,style:i,ref:Ve}))},qN=Iat;wat();var tk={stroke:"#40a9ff"},ek=[[0,.5],[1,.5]],rk={stroke:"#ccc",endArrow:{path:vi.Arrow.vee(10,10),fill:"#ccc"}},nk={type:"indented",direction:"LR",dropCap:!1,indent:250,getHeight:function(){return 60},getWidth:function(){return 100}},Oat={nodeType:"card-node",edgeType:"cubic-horizontal",behaviors:["zoom-canvas","drag-canvas"],nodeSize:Dm,nodeLabelCfg:el,nodeAnchorPoints:ek,layout:nk,nodeStyle:tk,edgeStyle:rk,nodeStateStyles:ja,edgeStateStyles:ja,collapseExpand:!0,autoFit:!0},bd={},Pat=function(n){var e=Im(n,Oat),t=e.data,r=e.className,i=e.style,a=e.width,o=e.height,s=e.nodeType,l=s===void 0?"card-node":s,u=e.edgeType,c=u===void 0?"cubic-horizontal":u,f=e.behaviors,h=f===void 0?["zoom-canvas","drag-canvas"]:f,d=e.nodeSize,g=d===void 0?Dm:d,p=e.nodeLabelCfg,m=p===void 0?el:p,_=e.nodeAnchorPoints,S=_===void 0?ek:_,M=e.layout,R=M===void 0?nk:M,F=e.minimapCfg,V=e.nodeStyle,nt=V===void 0?tk:V,at=e.edgeStyle,xt=at===void 0?rk:at,gt=e.nodeStateStyles,Tt=gt===void 0?ja:gt,Ct=e.edgeStateStyles,te=Ct===void 0?ja:Ct,Kt=e.collapseExpand,ne=Kt===void 0?!0:Kt,ee=e.autoFit,ve=ee===void 0?!0:ee,ie=e.handleNodeClick,ye=e.graphRef,Ee=e.onReady,we=e.loading,Pe=e.loadingTemplate,Ve=e.errorTemplate,he=z.useRef(null),Te=Am(he),Je=z.useRef(null);return Sf(bd[Te],e,Je),(0,z.useEffect)(function(){var Ze=lp(a,o,Je),ar=bd[Te];if(ar||(ar=new vi.TreeGraph({container:Je.current,width:Ze[0],height:Ze[1],modes:{default:h},defaultNode:{type:l,size:g,style:nt,anchorPoints:S,labelCfg:m},defaultEdge:{type:c,style:xt},nodeStateStyles:Tt,edgeStateStyles:te,layout:R}),bd[Te]=ar),ye&&(ye.current=ar),up(F,ar),nS(ar,t,ve),Ee&&Ee(ar),ne){var cr=function(Dr){var sn=Dr.item;Dr.target.get("name")==="collapse-icon"?(ar.updateItem(sn,{collapsed:!sn.getModel().collapsed}),ar.layout()):ie&&ie(sn,ar)};ar.on("node:click",function(Dr){cr(Dr)}),ar.on("node:touchstart",function(Dr){cr(Dr)})}return Tm(ar,n),function(){bd[Te]&&(bd[Te].destroy(),delete bd[Te])}},[]),z.createElement(bn,{errorTemplate:Ve},we&&z.createElement(_n,{loadingTemplate:Pe}),z.createElement("div",{className:r,style:i,ref:Je}))},ik=Pat,ak=[150,30],ok={stroke:"#72CC4A",fill:"#f00"},sk={type:"dagre",rankdir:"LR",nodesep:30,ranksep:50},Lm={style:{fill:"#000000A6",fontSize:10}},Dat={nodeType:"round-rect",edgeType:"fund-polyline",behaviors:["zoom-canvas","drag-canvas"],nodeSize:ak,nodeLabelCfg:Lm,edgeLabelCfg:Lm,nodeAnchorPoints:Pm,layout:sk,nodeStyle:ok,edgeStyle:Om,nodeStateStyles:ja,edgeStateStyles:ja,colorMap:{},autoFit:!0},_d={},Lat=function(n){var e=Im(n,Dat),t=e.data,r=e.className,i=e.style,a=e.width,o=e.height,s=e.nodeType,l=s===void 0?"round-rect":s,u=e.edgeType,c=u===void 0?"fund-polyline":u,f=e.behaviors,h=f===void 0?["zoom-canvas","drag-canvas"]:f,d=e.nodeSize,g=d===void 0?ak:d,p=e.nodeLabelCfg,m=p===void 0?Lm:p,_=e.edgeLabelCfg,S=_===void 0?Lm:_,M=e.nodeAnchorPoints,R=M===void 0?Pm:M,F=e.layout,V=F===void 0?sk:F,nt=e.minimapCfg,at=e.nodeStyle,xt=at===void 0?ok:at,gt=e.edgeStyle,Tt=gt===void 0?Om:gt,Ct=e.nodeStateStyles,te=Ct===void 0?ja:Ct,Kt=e.edgeStateStyles,ne=Kt===void 0?ja:Kt,ee=e.colorMap,ve=ee===void 0?{}:ee,ie=e.autoFit,ye=ie===void 0?!0:ie,Ee=e.graphRef,we=e.onReady,Pe=e.loading,Ve=e.loadingTemplate,he=e.errorTemplate,Te=z.useRef(null),Je=z.useRef(null),Ze=Am(Je);return Sf(_d[Ze],e,Te),(0,z.useEffect)(function(){var ar=lp(a,o,Te),cr=_d[Ze];cr||(cr=new vi.Graph({container:Te.current,width:ar[0],height:ar[1],modes:{default:h},defaultNode:{type:l,size:g,style:xt,anchorPoints:R,labelCfg:m},defaultEdge:{type:c,style:Tt,colorMap:ve,labelCfg:S},nodeStateStyles:te,edgeStateStyles:ne,layout:V,fitView:!0}),_d[Ze]=cr),Ee&&(Ee.current=cr),up(nt,cr);var Dr=bg(t);cr.data(Dr),cr.render(),we&&we(cr);var sn=cr.getEdges();return sn.forEach(function(Wr){var ai=Wr.getKeyShape(),Ln=ai.attr("stroke"),gi=Wr.getTarget();gi.update({style:{stroke:Ln}})}),ye?cr.fitView():cr.fitCenter(),Tm(cr,n),function(){_d[Ze]&&(_d[Ze].destroy(),delete _d[Ze])}},[]),z.createElement(bn,{errorTemplate:he},Pe&&z.createElement(_n,{loadingTemplate:Ve}),z.createElement("div",{className:r,style:i,ref:Te}))},lk=Lat,rs={hover:{stroke:"#1890ff",lineWidth:2}},Rm=[120,40],uk={stroke:"#40a9ff"},Nm=[[0,.5],[1,.5]],rl=6,Rat={fill:"#fff",fontSize:12},iS=2,km={fill:"#000",fontSize:12},Nat={show:!1,size:[150,100],type:"keyShape"},Eut={style:{fill:"#000",fontSize:12}},wut={style:{stroke:"#ccc"}},ju=function(){return ju=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ju.apply(this,arguments)},aS=function(n,e,t){var r,i;return t&&t.current&&(r=t.current.offsetWidth,i=t.current.offsetHeight||500),!n&&!r||!e&&!i?(console.warn("\u8BF7\u4E3A Graph \u6307\u5B9A width \u4E0E height\uFF01\u5426\u5219\u5C06\u4F7F\u7528\u9ED8\u8BA4\u503C 500 * 500"),[500,500]):[n||r||500,e||i||500]},kat=function(n,e){if(e){var t=function(r){var i=r.item;r.target.get("name")==="collapse-icon"&&(n.updateItem(i,{collapsed:!i.getModel().collapsed}),n.layout())};n.on("node:click",function(r){t(r)}),n.on("node:touchstart",function(r){t(r)})}},oS=function(n,e,t){return n===void 0&&(n=0),e===void 0&&(e="vee"),t===void 0&&(t="#ccc"),{endArrow:{path:vi.Arrow[e](10,10,n),fill:t,d:n}}},Bm=function(n){if(typeof n=="string"||typeof n=="number")return{text:n};var e=n.content,t=n.style;return{text:e,style:t}},Wl=function(n,e,t){return typeof n=="function"?n(e,t):n||{}},Bat=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var e=Math.random()*16|0,t=n=="x"?e:e&3|8;return t.toString(16)})},sS=function(n){return n.current||(n.current="IndentedTreeGraph-"+Bat()),n.current},lS=function(n,e,t){var r=bg(e);n.data(r),n.render(),t?n.fitView():n.fitCenter()},Fat=function(n,e){if(n===void 0&&(n={}),!(!e||e.destroyed)){if(n.show){var t=Object.assign(Nat,n),r=new vi.Minimap(ju({},t));return e.addPlugin(r),r}return null}},ck=function(n,e){n===void 0&&(n="right");var t=e[0],r=e[1],i=0,a=0;switch(n){case"top":i=t/2,a=0;break;case"right":i=t,a=r/2;break;case"bottom":i=t/2,a=r;break;case"left":i=0,a=r/2;break}return{x:i,y:a}},uS=function(n,e){return ju(ju(ju({},e),n),{layout:ju(ju({},e==null?void 0:e.layout),n==null?void 0:n.layout)})},ui=function(){return ui=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ui.apply(this,arguments)},Gat=function(){vi.registerNode("card",{draw:function(n,e){var t;n===void 0&&(n={});var r=n.title,i=n.body,a=n.footer,o=n.collapseExpand,s=n.children,l=n.markerPosition,u=n.size||[100,30],c=0;typeof u=="number"&&(u=[u,u]);var f=ui({radius:2,fill:"#fff"},n.style),h=f.stroke||n.color||"#5B8FF9",d=f.radius,g=e.addShape("rect",{attrs:ui({x:0,y:0,width:u[0],height:u[1],stroke:h},f),name:"main-box",draggable:!0}),p;if(r){var m=Bm(r),_=m.text,S=m.style,M=S===void 0?n.titleStyle:S;p=e.addShape("text",{attrs:ui(ui({textBaseline:"top",x:rl,y:iS,text:_},Rat),Wl(M,e)),name:"title"})}var R=(p?p.getBBox():{height:u[1]/2}).height,F=e.addShape("rect",{attrs:{x:0,y:0,width:u[0],height:R+2*iS,fill:h,radius:[d,d,0,0]},name:"title-rect",draggable:!0});p==null||p.toFront();var V;o&&s&&(V=e.addShape("marker",{attrs:ui(ui(ui({},ck(l,u)),{r:6,cursor:"pointer",symbol:n.collapsed?vi.Marker.expand:vi.Marker.collapse,stroke:h,lineWidth:1,fill:"#fff"}),Wl(n.markerStyle,e,ui(ui({},n),{name:"collapse-icon"}))),name:"collapse-icon"}));var nt=F.getBBox().height;c+=nt;var at;if(i){var xt=Bm(i),_=xt.text,gt=xt.style,Tt=gt===void 0?n.bodyStyle:gt;at=e.addShape("text",{attrs:ui(ui({textBaseline:"top",x:rl,y:c+rl,text:_},km),Wl(Tt,e)),name:"body"}),c+=at.getBBox().height}var Ct;if(a){at&&(c+=rl);var te=Bm(a),Kt=te.text,ne=te.style,ee=ne===void 0?n.footerStyle:ne;Ct=e.addShape("text",{attrs:ui(ui({textBaseline:"top",x:rl,y:c+rl,text:Kt},km),Wl(ee,e)),name:"footer-label"});var ve=Ct.getBBox(),ie=ve.width,ye=ve.height,Ee=0;if(typeof n.footer=="object"&&((t=n.footer)===null||t===void 0?void 0:t.value)){var we=Bm({content:n.footer.value,style:n.footer.valueStyle}),Pe=we.text,Ve=we.style,he=Ve===void 0?n.footerValueStyle||n.footerStyle:Ve,Te=e.addShape("text",{attrs:ui(ui({textBaseline:"top",x:ie+rl*2,y:c+rl,text:Pe},km),Wl(he,e)),name:"footer-value"}),Je=Te.getBBox().height;Ee=Je}c+=Math.max(ye,Ee)}if(at){var Ze=at.getBBox();console.log(R);var ie=u[0]>Ze.width+16?u[0]:Ze.width+16;g.attr({width:ie,height:c+16}),F==null||F.attr("width",ie),V==null||V.attr(ui({},ck(l,[ie,c+R+2*iS])))}return g},update:void 0},"single-node")},zat=function(){vi.registerNode("icon-node",{options:{size:[60,20],stroke:"#91d5ff",fill:"#91d5ff"},draw:function(n,e){n===void 0&&(n={});var t=this.getShapeStyle(n),r=n.labelCfg,i=r===void 0?{}:r,a=n.labelStyle,o=n.label,s=n.markerStyle,l=n.showMarker,u=n.title,c=n.titleStyle,f=e.addShape("rect",{attrs:ui(ui({},t),{x:0,y:0})}),h=f.getBBox().height,d;if(n.leftIcon){var g=n.leftIcon,p=g.x,m=p===void 0?8:p,_=g.y,S=g.width,M=S===void 0?24:S,R=g.height,F=R===void 0?24:R,V=g.style;V&&e.addShape("rect",{attrs:ui({x:1,y:1,width:38,height:t.height-2},V)}),d=e.addShape("image",{attrs:{x:m,y:_||h/2-F/2,width:M,height:F,img:n.leftIcon.img},name:"image-shape"})}if(l&&(e.addShape("marker",{attrs:ui({x:t.width/3,y:t.height+6,r:6,stroke:"#73d13d",cursor:"pointer",symbol:vi.Marker.expand},Wl(s,e,ui(ui({},n),{name:"add-item"}))),name:"add-item"}),e.addShape("marker",{attrs:ui({x:t.width*2/3,y:t.height+6,r:6,stroke:"#ff4d4f",cursor:"pointer",symbol:vi.Marker.collapse},Wl(s,e,ui(ui({},n),{name:"remove-item"}))),name:"remove-item"})),o){var nt=a?Wl(a,e,n):i.style,_=u?t.height/2-(nt.fontSize*1||12)-rl/2:t.height/2;e.addShape("text",{attrs:ui({text:o,x:t.width/2,y:_,textAlign:d?"start":"center",textBaseline:u?"top":"middle"},nt)})}if(u){var at=c?Wl(c,e,n):i.style;e.addShape("text",{attrs:ui({text:u,x:t.width/2,y:t.height/2+rl/2,textAlign:d?"start":"center",textBaseline:"top"},at)})}return f}},"rect")},Sd=function(){return Sd=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Sd.apply(this,arguments)},Ed={};Gat();var Uat={type:"compactBox",direction:"LR",getId:function(n){return n.id},getHeight:function(){return 60},getWidth:function(){return 16},getVGap:function(){return 16},getHGap:function(){return 100}},Wat={nodeType:"card",edgeType:"cubic-horizontal",behaviors:["zoom-canvas","drag-canvas"],nodeAnchorPoints:Nm,nodeSize:Rm,layout:Uat,animate:!0,markerPosition:"right",nodeStateStyles:rs,edgeStateStyles:rs,collapseExpand:!0,showArrow:!0,arrowType:"vee",autoFit:!0},Vat=function(n){var e=uS(n,Wat),t=e.data,r=e.className,i=e.style,a=e.width,o=e.height,s=e.nodeType,l=s===void 0?"card":s,u=e.edgeType,c=u===void 0?"cubic-horizontal":u,f=e.behaviors,h=f===void 0?["zoom-canvas","drag-canvas"]:f,d=e.nodeAnchorPoints,g=d===void 0?Nm:d,p=e.nodeSize,m=p===void 0?Rm:p,_=e.layout,S=e.animate,M=S===void 0?!0:S,R=e.nodeStyle,F=e.edgeStyle,V=e.edgeCfg,nt=e.markerStyle,at=e.markerPosition,xt=at===void 0?"right":at,gt=e.nodeStateStyles,Tt=gt===void 0?rs:gt,Ct=e.edgeStateStyles,te=Ct===void 0?rs:Ct,Kt=e.collapseExpand,ne=Kt===void 0?!0:Kt,ee=e.titleStyle,ve=e.bodyStyle,ie=e.footerStyle,ye=e.footerValueStyle,Ee=e.showArrow,we=Ee===void 0?!0:Ee,Pe=e.arrowType,Ve=Pe===void 0?"vee":Pe,he=e.autoFit,Te=he===void 0?!0:he,Je=e.onReady,Ze=e.loading,ar=e.loadingTemplate,cr=e.errorTemplate,Dr=z.useRef(null),sn=z.useRef(null),Wr=sS(sn);return Sf(Ed[Wr],e,Dr),(0,z.useEffect)(function(){var ai=aS(a,o,Dr),Ln=Ed[Wr];return Ln||(Ln=new vi.TreeGraph({container:Dr.current,width:ai[0],height:ai[1],animate:M,modes:{default:h},defaultNode:{type:l,size:m,anchorPoints:g,titleStyle:ee,bodyStyle:ve,footerStyle:ie,footerValueStyle:ye,markerStyle:nt,collapseExpand:ne,markerPosition:xt},defaultEdge:{type:c},nodeStateStyles:Tt,edgeStateStyles:te,layout:_}),Ed[Wr]=Ln),Ln.node(function(gi){return typeof R=="function"?{style:R(gi,Ln)}:{style:Sd(Sd({},uk),R)}}),Ln.edge(function(gi){return V?typeof V=="function"?V(gi,Ln):V:typeof F=="function"?{style:F(gi,Ln)}:{style:Sd(Sd({stroke:"#ccc"},we&&oS(0,Ve)),F)}}),ne&&kat(Ln,ne),lS(Ln,t,Te),Je&&Je(Ln),function(){Ed[Wr]&&(Ed[Wr].destroy(),delete Ed[Wr])}},[]),z.createElement(bn,{errorTemplate:cr},Ze&&z.createElement(_n,{loadingTemplate:ar}),z.createElement("div",{className:r,style:i,ref:Dr}))},fk=Vat,Zu=function(){return Zu=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Zu.apply(this,arguments)},Xat={fill:"#91d5ff",stroke:"#40a9ff",radius:2},hk={type:"compactBox",direction:"TB",getId:function(e){return e.id},getHeight:function(){return 16},getWidth:function(){return 16},getVGap:function(){return 40},getHGap:function(){return 70}},Yat={animate:!0,nodeType:"rect",edgeType:"flow-line",nodeSize:Rm,behaviors:["drag-canvas","zoom-canvas"],nodeLabelCfg:{style:km},layout:hk,showMarker:!1,showArrow:!0,arrowType:"triangle",nodeStateStyles:rs,edgeStateStyles:rs,autoFit:!0},wd={},Hat=function(n){var e=uS(n,Yat),t=e.data,r=e.className,i=e.style,a=e.width,o=e.height,s=e.animate,l=s===void 0?!0:s,u=e.nodeType,c=u===void 0?"rect":u,f=e.edgeType,h=f===void 0?"flow-line":f,d=e.nodeSize,g=d===void 0?Rm:d,p=e.behaviors,m=p===void 0?["drag-canvas","zoom-canvas"]:p,_=e.nodeLabelCfg,S=e.nodeCfg,M=e.layout,R=M===void 0?hk:M,F=e.showMarker,V=F===void 0?!1:F,nt=e.showArrow,at=nt===void 0?!0:nt,xt=e.arrowType,gt=xt===void 0?"triangle":xt,Tt=e.minimapCfg,Ct=e.edgeCfg,te=e.markerStyle,Kt=e.nodeStateStyles,ne=Kt===void 0?rs:Kt,ee=e.edgeStateStyles,ve=ee===void 0?rs:ee,ie=e.autoFit,ye=ie===void 0?!0:ie,Ee=e.onReady,we=e.loading,Pe=e.loadingTemplate,Ve=e.errorTemplate,he=z.useRef(null),Te=z.useRef(null),Je=sS(Te);Sf(wd[Je],e,he);var Ze=(Array.isArray(g)?g[1]:g)/2;return(0,z.useEffect)(function(){var ar=aS(a,o,he);c==="icon-node"&&zat();var cr=wd[Je];return cr||(cr=new vi.TreeGraph({container:he.current,width:ar[0],height:ar[1],linkCenter:!0,animate:l,modes:{default:m},defaultNode:{type:c,size:g,labelCfg:_,markerStyle:te,showMarker:V},defaultEdge:{type:h},nodeStateStyles:ne,edgeStateStyles:ve,layout:R}),wd[Je]=cr),cr.node(function(Dr){return typeof S=="function"?S(Dr,cr):{style:Zu(Zu({},Xat),S==null?void 0:S.style)}}),cr.edge(function(Dr){return typeof Ct=="function"?Ct(Dr,cr):Zu(Zu({},Ct),{style:Zu(Zu({stroke:"#91d5ff"},at&&oS(Ze,gt,"#91d5ff")),Ct==null?void 0:Ct.style)})}),Fat(Tt,cr),lS(cr,t,ye),Ee&&Ee(cr),function(){wd[Je]&&(wd[Je].destroy(),delete wd[Je])}},[]),z.createElement(bn,{errorTemplate:Ve},we&&z.createElement(_n,{loadingTemplate:Pe}),z.createElement("div",{className:r,style:i,ref:he}))},dk=Hat,Ku=function(){return Ku=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Ku.apply(this,arguments)},Cd={},jat={type:"dendrogram",direction:"LR",nodeSep:20,rankSep:100,radial:!0},Zat={nodeType:"circle",linkCenter:!0,edgeType:"line",behaviors:["zoom-canvas","drag-canvas"],nodeAnchorPoints:Nm,nodeSize:30,layout:jat,animate:!0,nodeStateStyles:rs,edgeStateStyles:rs,showArrow:!1,arrowType:"triangle",autoFit:!0},Kat=function(n){var e=uS(n,Zat),t=e.data,r=e.className,i=e.style,a=e.width,o=e.height,s=e.nodeType,l=s===void 0?"circle":s,u=e.linkCenter,c=u===void 0?!0:u,f=e.edgeType,h=f===void 0?"line":f,d=e.behaviors,g=d===void 0?["zoom-canvas","drag-canvas"]:d,p=e.nodeAnchorPoints,m=p===void 0?Nm:p,_=e.nodeSize,S=_===void 0?30:_,M=e.layout,R=e.animate,F=R===void 0?!0:R,V=e.nodeCfg,nt=e.edgeCfg,at=e.nodeStateStyles,xt=at===void 0?rs:at,gt=e.edgeStateStyles,Tt=gt===void 0?rs:gt,Ct=e.showArrow,te=Ct===void 0?!1:Ct,Kt=e.arrowType,ne=Kt===void 0?"triangle":Kt,ee=e.autoFit,ve=ee===void 0?!0:ee,ie=e.onReady,ye=e.loading,Ee=e.loadingTemplate,we=e.errorTemplate,Pe=z.useRef(null),Ve=z.useRef(null),he=sS(Ve);Sf(Cd[he],e,Pe);var Te=(Array.isArray(S)?S[0]:S)/2;return(0,z.useEffect)(function(){var Je=aS(a,o,Pe),Ze=Cd[he];return Ze||(Ze=new vi.TreeGraph({container:Pe.current,width:Je[0],height:Je[1],animate:F,linkCenter:c,modes:{default:g},defaultNode:{type:l,size:S,anchorPoints:m},defaultEdge:{type:h},nodeStateStyles:xt,edgeStateStyles:Tt,layout:M}),Cd[he]=Ze),Ze.node(function(ar){return typeof V=="function"?V(ar,Ze):Ku(Ku({},V),{style:Ku(Ku({},uk),V==null?void 0:V.style)})}),Ze.edge(function(ar){return typeof nt=="function"?nt(ar,Ze):{style:Ku(Ku({stroke:"#ccc"},te&&oS(Te,ne)),nt==null?void 0:nt.style)}}),lS(Ze,t,ve),ie&&ie(Ze),function(){Cd[he]&&(Cd[he].destroy(),delete Cd[he])}},[]),z.createElement(bn,{errorTemplate:we},ye&&z.createElement(_n,{loadingTemplate:Ee}),z.createElement("div",{className:r,style:i,ref:Pe}))},vk=Kat,$at={Area:WM,Bar:VM,Box:KM,Bullet:XM,Column:YM,Funnel:HM,Histogram:jM,Line:ZM,Liquid:$M,Heatmap:QM,Pie:JM,Progress:tA,Radar:eA,Facet:mA,RingProgress:rA,Rose:nA,Chord:iA,Scatter:aA,TinyArea:oA,TinyColumn:sA,TinyLine:uA,Waterfall:cA,WordCloud:fA,Sunburst:hA,DualAxes:lA,Stock:dA,RadialBar:vA,Gauge:qM,Sankey:gA,Treemap:pA,Violin:yA,MultiView:iy,Mix:iy,BidirectionalBar:xA,OrganizationTreeGraph:$N,DagreGraph:qN,IndentedTree:ik,DagreFundFlowGraph:lk,IndentedTreeGraph:fk,OrganizationalGraph:dk,RadialGraph:vk,G2:G,flow:Xr,measureTextWidth:cC,adaptors:GM}},26973:function(ut,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var x=function(N,w){var E=N.nodes,A=N.edges,O=[],I={};if(!E)throw new Error("invalid nodes data!");return E&&E.forEach(function(C,T){I[C.id]=T;var D=[];O.push(D)}),A&&A.forEach(function(C){var T=C.source,D=C.target,B=I[T],G=I[D];!B&&B!==0||!G&&G!==0||(O[B][G]=1,w||(O[G][B]=1))}),O},y=x;L.default=y},6578:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),Object.defineProperty(L,"getAdjMatrixAsync",{enumerable:!0,get:function(){return y.getAdjMatrixAsync}}),Object.defineProperty(L,"connectedComponentAsync",{enumerable:!0,get:function(){return y.connectedComponentAsync}}),Object.defineProperty(L,"getDegreeAsync",{enumerable:!0,get:function(){return y.getDegreeAsync}}),Object.defineProperty(L,"getInDegreeAsync",{enumerable:!0,get:function(){return y.getInDegreeAsync}}),Object.defineProperty(L,"getOutDegreeAsync",{enumerable:!0,get:function(){return y.getOutDegreeAsync}}),Object.defineProperty(L,"detectCycleAsync",{enumerable:!0,get:function(){return y.detectCycleAsync}}),Object.defineProperty(L,"detectAllCyclesAsync",{enumerable:!0,get:function(){return y.detectAllCyclesAsync}}),Object.defineProperty(L,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return y.detectAllDirectedCycleAsync}}),Object.defineProperty(L,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return y.detectAllUndirectedCycleAsync}}),Object.defineProperty(L,"dijkstraAsync",{enumerable:!0,get:function(){return y.dijkstraAsync}}),Object.defineProperty(L,"findAllPathAsync",{enumerable:!0,get:function(){return y.findAllPathAsync}}),Object.defineProperty(L,"findShortestPathAsync",{enumerable:!0,get:function(){return y.findShortestPathAsync}}),Object.defineProperty(L,"floydWarshallAsync",{enumerable:!0,get:function(){return y.floydWarshallAsync}}),Object.defineProperty(L,"labelPropagationAsync",{enumerable:!0,get:function(){return y.labelPropagationAsync}}),Object.defineProperty(L,"louvainAsync",{enumerable:!0,get:function(){return y.louvainAsync}}),Object.defineProperty(L,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return y.minimumSpanningTreeAsync}}),Object.defineProperty(L,"pageRankAsync",{enumerable:!0,get:function(){return y.pageRankAsync}}),Object.defineProperty(L,"getNeighborsAsync",{enumerable:!0,get:function(){return y.getNeighborsAsync}}),Object.defineProperty(L,"GADDIAsync",{enumerable:!0,get:function(){return y.GADDIAsync}}),L.default=L.detectDirectedCycleAsync=void 0;var y=x(20524),P=y.detectCycleAsync;L.detectDirectedCycleAsync=P;var N={getAdjMatrixAsync:y.getAdjMatrixAsync,connectedComponentAsync:y.connectedComponentAsync,getDegreeAsync:y.getDegreeAsync,getInDegreeAsync:y.getInDegreeAsync,getOutDegreeAsync:y.getOutDegreeAsync,detectCycleAsync:y.detectCycleAsync,detectDirectedCycleAsync:P,detectAllCyclesAsync:y.detectAllCyclesAsync,detectAllDirectedCycleAsync:y.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:y.detectAllUndirectedCycleAsync,dijkstraAsync:y.dijkstraAsync,findAllPathAsync:y.findAllPathAsync,findShortestPathAsync:y.findShortestPathAsync,floydWarshallAsync:y.floydWarshallAsync,labelPropagationAsync:y.labelPropagationAsync,louvainAsync:y.louvainAsync,minimumSpanningTreeAsync:y.minimumSpanningTreeAsync,pageRankAsync:y.pageRankAsync,getNeighborsAsync:y.getNeighborsAsync,GADDIAsync:y.GADDIAsync};L.default=N},30278:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var y=N(x(33699)),P=x(7348);function N(O){return O&&O.__esModule?O:{default:O}}function w(O){O===void 0&&(O={});var I=O,C=function(){},T=function(){var D={};return function(B){var G=B.next,k=G;return D[k]?!1:(D[k]=!0,!0)}}();return I.allowTraversal=O.allowTraversal||T,I.enter=O.enter||C,I.leave=O.leave||C,I}var E=function(I,C,T){var D=w(T),B=new y.default,G=I.edges,k=G===void 0?[]:G;B.enqueue(C);for(var U="",Y=function(){var J=B.dequeue();D.enter({current:J,previous:U}),(0,P.getNeighbors)(J,k,"target").forEach(function(q){D.allowTraversal({previous:U,current:J,next:q})&&B.enqueue(q)}),D.leave({current:J,previous:U}),U=J};!B.isEmpty();)Y()},A=E;L.default=A},99414:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=w,L.detectStrongConnectComponents=L.detectConnectedComponents=void 0;var y=x(7348),P=function(A){for(var O=A.nodes,I=O===void 0?[]:O,C=A.edges,T=C===void 0?[]:C,D=[],B={},G=[],k=function J(q){G.push(q),B[q.id]=!0;for(var X=(0,y.getNeighbors)(q.id,T),j=function(z){var b=X[z];if(!B[b]){var v=I.filter(function($){return $.id===b});v.length>0&&J(v[0])}},Q=0;Q<X.length;++Q)j(Q)},U=0;U<I.length;U++){var Y=I[U];if(!B[Y.id]){k(Y);for(var K=[];G.length>0;)K.push(G.pop());D.push(K)}}return D};L.detectConnectedComponents=P;var N=function(A){for(var O=A.nodes,I=O===void 0?[]:O,C=A.edges,T=C===void 0?[]:C,D=[],B={},G={},k={},U=[],Y=0,K=function j(Q){G[Q.id]=Y,k[Q.id]=Y,Y+=1,D.push(Q),B[Q.id]=!0;for(var lt=(0,y.getNeighbors)(Q.id,T,"target").filter(function(et){return I.map(function(Z){return Z.id}).indexOf(et)>-1}),z=function(Z){var pt=lt[Z];if(!G[pt]&&G[pt]!==0){var _t=I.filter(function(It){return It.id===pt});_t.length>0&&j(_t[0]),k[Q.id]=Math.min(k[Q.id],k[pt])}else B[pt]&&(k[Q.id]=Math.min(k[Q.id],G[pt]))},b=0;b<lt.length;b++)z(b);if(k[Q.id]===G[Q.id]){for(var v=[];D.length>0;){var $=D.pop();if(B[$.id]=!1,v.push($),$===Q)break}v.length>0&&U.push(v)}},J=0,q=I;J<q.length;J++){var X=q[J];!G[X.id]&&G[X.id]!==0&&K(X)}return U};L.detectStrongConnectComponents=N;function w(E,A){return A?N(E):P(E)}},37193:function(ut,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.getOutDegree=L.getInDegree=L.default=void 0;var x=function(E){var A={},O=E.nodes,I=O===void 0?[]:O,C=E.edges,T=C===void 0?[]:C;return I.forEach(function(D){A[D.id]={degree:0,inDegree:0,outDegree:0}}),T.forEach(function(D){A[D.source].degree++,A[D.source].outDegree++,A[D.target].degree++,A[D.target].inDegree++}),A},y=x;L.default=y;var P=function(E,A){var O=x(E);return O[A]?x(E)[A].inDegree:0};L.getInDegree=P;var N=function(E,A){var O=x(E);return O[A]?x(E)[A].outDegree:0};L.getOutDegree=N},64298:function(ut,L,x){"use strict";function y(G){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?y=function(U){return typeof U}:y=function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},y(G)}Object.defineProperty(L,"__esModule",{value:!0}),L.default=L.detectAllCycles=L.detectAllDirectedCycle=L.detectAllUndirectedCycle=void 0;var P=O(x(76607)),N=A(x(99414)),w=x(7348);function E(){if(typeof WeakMap!="function")return null;var G=new WeakMap;return E=function(){return G},G}function A(G){if(G&&G.__esModule)return G;if(G===null||y(G)!=="object"&&typeof G!="function")return{default:G};var k=E();if(k&&k.has(G))return k.get(G);var U={},Y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var K in G)if(Object.prototype.hasOwnProperty.call(G,K)){var J=Y?Object.getOwnPropertyDescriptor(G,K):null;J&&(J.get||J.set)?Object.defineProperty(U,K,J):U[K]=G[K]}return U.default=G,k&&k.set(G,U),U}function O(G){return G&&G.__esModule?G:{default:G}}var I=function(k){var U=null,Y=k.nodes,K=Y===void 0?[]:Y,J={},q={},X={},j={};K.forEach(function(z){q[z.id]=z});for(var Q={enter:function(b){var v=b.current,$=b.previous;if(X[v]){U={};for(var et=v,Z=$;Z!==v;)U[et]=Z,et=Z,Z=J[Z];U[et]=Z}else X[v]=v,delete q[v],J[v]=$},leave:function(b){var v=b.current;j[v]=v,delete X[v]},allowTraversal:function(b){var v=b.next;return U?!1:!j[v]}};Object.keys(q).length;){var lt=Object.keys(q)[0];(0,P.default)(k,lt,Q)}return U},C=function(k,U,Y){var K,J;Y===void 0&&(Y=!0);for(var q=[],X=(0,N.default)(k,!1),j=0,Q=X;j<Q.length;j++){var lt=Q[j];if(!!lt.length)for(var z=lt[0],b=z.id,v=[z],$=(K={},K[b]=z,K),et=(J={},J[b]=new Set,J);v.length>0;)for(var Z=v.pop(),pt=Z.id,_t=(0,w.getNeighbors)(pt,k.edges),It=function(ot){var St,Ut=_t[ot],ae=k.nodes.find(function(Lt){return Lt.id===Ut});if(Ut===pt)q.push((St={},St[Ut]=Z,St));else if(!(Ut in et))$[Ut]=Z,v.push(ae),et[Ut]=new Set([Z]);else if(!et[pt].has(ae)){for(var bt=!0,wt=[ae,Z],ft=$[pt];et[Ut].size&&!et[Ut].has(ft)&&(wt.push(ft),ft!==$[ft.id]);)ft=$[ft.id];if(wt.push(ft),U&&Y?(bt=!1,wt.findIndex(function(Lt){return U.indexOf(Lt.id)>-1})>-1&&(bt=!0)):U&&!Y&&wt.findIndex(function(Lt){return U.indexOf(Lt.id)>-1})>-1&&(bt=!1),bt){for(var ht={},Pt=1;Pt<wt.length;Pt+=1)ht[wt[Pt-1].id]=wt[Pt];wt.length&&(ht[wt[wt.length-1].id]=wt[0]),q.push(ht)}et[Ut].add(Z)}},Rt=0;Rt<_t.length;Rt+=1)It(Rt)}return q};L.detectAllUndirectedCycle=C;var T=function(k,U,Y){Y===void 0&&(Y=!0);for(var K=[],J=new Set,q=[],X=[],j={},Q={},lt=function(ft){for(var ht=[ft];ht.length>0;){var Pt=ht.pop();J.has(Pt)&&(J.delete(Pt),q[Pt.id].forEach(function(Lt){ht.push(Lt)}),q[Pt.id].clear())}},z=function wt(ft,ht,Pt){var Lt=!1;if(U&&Y===!1&&U.indexOf(ft.id)>-1)return Lt;K.push(ft),J.add(ft);for(var jt=Pt[ft.id],mt=0;mt<jt.length;mt+=1){var W=j[jt[mt]];if(W===ht){for(var rt={},ct=1;ct<K.length;ct+=1)rt[K[ct-1].id]=K[ct];K.length&&(rt[K[K.length-1].id]=K[0]),X.push(rt),Lt=!0}else J.has(W)||wt(W,ht,Pt)&&(Lt=!0)}if(Lt)lt(ft);else for(var mt=0;mt<jt.length;mt+=1){var W=j[jt[mt]];q[W.id].has(ft)||q[W.id].add(ft)}return K.pop(),Lt},b=k.nodes,v=b===void 0?[]:b,$=0;$<v.length;$+=1){var et=v[$],Z=et.id;Q[Z]=$,j[$]=et}if(U&&Y)for(var pt=function(ft){var ht=U[ft];Q[v[ft].id]=Q[ht],Q[ht]=0,j[0]=v.find(function(Pt){return Pt.id===ht}),j[Q[v[ft].id]]=v[ft]},$=0;$<U.length;$++)pt($);for(var _t=function(ft){for(var ht,Pt,Lt=Infinity,jt=0;jt<ft.length;jt+=1)for(var mt=ft[jt],W=0;W<mt.length;W++){var rt=Q[mt[W].id];rt<Lt&&(Lt=rt,Pt=jt)}for(var ct=ft[Pt],At=[],jt=0;jt<ct.length;jt+=1){var tt=ct[jt];At[tt.id]=[];for(var dt=0,Et=(0,w.getNeighbors)(tt.id,k.edges,"target").filter(function(st){return ct.map(function(Qt){return Qt.id}).indexOf(st)>-1});dt<Et.length;dt++){var Ot=Et[dt];Ot===tt.id&&!(Y===!1&&U.indexOf(tt.id)>-1)?X.push((ht={},ht[tt.id]=tt,ht)):At[tt.id].push(Q[Ot])}}return{component:ct,adjList:At,minIdx:Lt}},It=0;It<v.length;){var Rt=v.filter(function(wt){return Q[wt.id]>=It}),H=(0,N.detectStrongConnectComponents)({nodes:Rt,edges:k.edges}).filter(function(wt){return wt.length>1});if(H.length===0)break;var ot=_t(H),St=ot.minIdx,Ut=ot.adjList,ae=ot.component;if(ae.length>1){ae.forEach(function(wt){q[wt.id]=new Set});var bt=j[St];if(U&&Y&&U.indexOf(bt.id)===-1)return X;z(bt,bt,Ut),It=St+1}else break}return X};L.detectAllDirectedCycle=T;var D=function(k,U,Y,K){return K===void 0&&(K=!0),U?T(k,Y,K):C(k,Y,K)};L.detectAllCycles=D;var B=I;L.default=B},76607:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=w;var y=x(7348);function P(E){E===void 0&&(E={});var A=E,O=function(){},I=function(){var C={};return function(T){var D=T.next;return C[D]?!1:(C[D]=!0,!0)}}();return A.allowTraversal=E.allowTraversal||I,A.enter=E.enter||O,A.leave=E.leave||O,A}function N(E,A,O,I){I.enter({current:A,previous:O});var C=E.edges,T=C===void 0?[]:C;(0,y.getNeighbors)(A,T,"target").forEach(function(D){I.allowTraversal({previous:O,current:A,next:D})&&N(E,D,A,I)}),I.leave({current:A,previous:O})}function w(E,A,O){N(E,A,"",P(O))}},56419:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var y=x(50029),P=x(6802),N=x(7348),w=function(C,T,D){for(var B=Infinity,G,k=0;k<T.length;k++){var U=T[k].id;!D[U]&&C[U]<=B&&(B=C[U],G=T[k])}return G},E=function(C,T,D,B){var G=C.nodes,k=G===void 0?[]:G,U=C.edges,Y=U===void 0?[]:U,K=[],J={},q={},X={};k.forEach(function($,et){var Z=$.id;K.push(Z),q[Z]=Infinity,Z===T&&(q[Z]=0)});for(var j=k.length,Q=function(et){var Z=w(q,k,J),pt=Z.id;if(J[pt]=!0,q[pt]===Infinity)return"continue";var _t=[];D?_t=(0,N.getOutEdgesNodeId)(pt,Y):_t=(0,N.getEdgesByNodeId)(pt,Y),_t.forEach(function(It){var Rt=It.target,H=It.source,ot=Rt===pt?H:Rt,St=B&&It[B]?It[B]:1;q[ot]>q[Z.id]+St?(q[ot]=q[Z.id]+St,X[ot]=[Z.id]):q[ot]===q[Z.id]+St&&X[ot].push(Z.id)})},lt=0;lt<j;lt++)Q(lt);X[T]=[T];var z={};for(var b in q)q[b]!==Infinity&&O(T,b,X,z);var v={};for(var b in z)v[b]=z[b][0];return{length:q,path:v,allPath:z}},A=E;L.default=A;function O(I,C,T,D){if(I===C)return[I];if(D[C])return D[C];for(var B=[],G=0,k=T[C];G<k.length;G++){var U=k[G],Y=O(I,U,T,D);if(!Y)return;for(var K=0,J=Y;K<J.length;K++){var q=J[K];(0,P.isArray)(q)?B.push((0,y.__spreadArray)((0,y.__spreadArray)([],q),[C])):B.push([q,C])}}return D[C]=B,D[C]}},59820:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.findAllPath=L.findShortestPath=void 0;var y=N(x(56419)),P=x(7348);function N(A){return A&&A.__esModule?A:{default:A}}var w=function(O,I,C,T,D){var B=(0,y.default)(O,I,T,D),G=B.length,k=B.path,U=B.allPath;return{length:G[C],path:k[C],allPath:U[C]}};L.findShortestPath=w;var E=function(O,I,C,T){var D;if(I===C)return[[I]];var B=O.edges,G=B===void 0?[]:B,k=[I],U=(D={},D[I]=!0,D),Y=[],K=[],J=T?(0,P.getNeighbors)(I,G,"target"):(0,P.getNeighbors)(I,G);for(Y.push(J);k.length>0&&Y.length>0;){var q=Y[Y.length-1];if(q.length){var X=q.shift();X&&(k.push(X),U[X]=!0,J=T?(0,P.getNeighbors)(X,G,"target"):(0,P.getNeighbors)(X,G),Y.push(J.filter(function(lt){return!U[lt]})))}else{var j=k.pop();U[j]=!1,Y.pop();continue}if(k[k.length-1]===C){var Q=k.map(function(z){return z});K.push(Q);var j=k.pop();U[j]=!1,Y.pop()}}return K};L.findAllPath=E},24769:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var y=P(x(26973));function P(E){return E&&E.__esModule?E:{default:E}}var N=function(A,O){for(var I=(0,y.default)(A,O),C=[],T=I.length,D=0;D<T;D+=1){C[D]=[];for(var B=0;B<T;B+=1)D===B?C[D][B]=0:I[D][B]===0||!I[D][B]?C[D][B]=Infinity:C[D][B]=I[D][B]}for(var G=0;G<T;G+=1)for(var D=0;D<T;D+=1)for(var B=0;B<T;B+=1)C[D][B]>C[D][G]+C[G][B]&&(C[D][B]=C[D][G]+C[G][B]);return C},w=N;L.default=w},49215:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var y=x(6802),P=x(61907),N=function(){function B(G,k,U,Y,K){this.fromNode=G,this.toNode=k,this.nodeEdgeNodeLabel={nodeLabel1:U||P.VACANT_NODE_LABEL,edgeLabel:Y||P.VACANT_EDGE_LABEL,nodeLabel2:K||P.VACANT_NODE_LABEL}}return B.prototype.equalTo=function(G){return this.fromNode===G.formNode&&this.toNode===G.toNode&&this.nodeEdgeNodeLabel===G.nodeEdgeNodeLabel},B.prototype.notEqualTo=function(G){return!this.equalTo(G)},B}(),w=function(){function B(){this.rmpath=[],this.dfsEdgeList=[]}return B.prototype.equalTo=function(G){var k=this.dfsEdgeList.length,U=G.length;if(k!==U)return!1;for(var Y=0;Y<k;Y++)if(this.dfsEdgeList[Y]!==G[Y])return!1;return!0},B.prototype.notEqualTo=function(G){return!this.equalTo(G)},B.prototype.pushBack=function(G,k,U,Y,K){return this.dfsEdgeList.push(new N(G,k,U,Y,K)),this.dfsEdgeList},B.prototype.toGraph=function(G,k){G===void 0&&(G=P.VACANT_GRAPH_ID),k===void 0&&(k=!1);var U=new P.Graph(G,!0,k);return this.dfsEdgeList.forEach(function(Y){var K=Y.fromNode,J=Y.toNode,q=Y.nodeEdgeNodeLabel,X=q.nodeLabel1,j=q.edgeLabel,Q=q.nodeLabel2;X!==P.VACANT_NODE_LABEL&&U.addNode(K,X),Q!==P.VACANT_NODE_LABEL&&U.addNode(J,Q),U.addEdge(void 0,K,J,j)}),U},B.prototype.buildRmpath=function(){this.rmpath=[];for(var G=void 0,k=this.dfsEdgeList.length,U=k-1;U>=0;U--){var Y=this.dfsEdgeList[U],K=Y.fromNode,J=Y.toNode;K<J&&(G===void 0||J===G)&&(this.rmpath.push(U),G=K)}return this.rmpath},B.prototype.getNodeNum=function(){var G={};return this.dfsEdgeList.forEach(function(k){G[k.fromNode]||(G[k.fromNode]=!0),G[k.toNode]||(G[k.toNode]=!0)}),Object.keys(G).length},B}(),E=function(){function B(G){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!G){for(;G;){var k=G.edge;this.edges.push(k),this.nodesUsed[k.from]=1,this.nodesUsed[k.to]=1,this.edgesUsed[k.id]=1,G=G.preNode}this.edges=this.edges.reverse()}}return B.prototype.hasNode=function(G){return this.nodesUsed[G.id]===1},B.prototype.hasEdge=function(G){return this.edgesUsed[G.id]===1},B}(),A=function(){function B(G){var k=G.graphs,U=G.minSupport,Y=U===void 0?2:U,K=G.minNodeNum,J=K===void 0?1:K,q=G.maxNodeNum,X=q===void 0?4:q,j=G.top,Q=j===void 0?10:j,lt=G.directed,z=lt===void 0?!1:lt,b=G.verbose,v=b===void 0?!1:b;this.graphs=k,this.dfsCode=new w,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=Y,this.top=Q,this.directed=z,this.counter=0,this.maxNodeNum=X,this.minNodeNum=J,this.verbose=v,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return B.prototype.findForwardRootEdges=function(G,k){var U=this,Y=[],K=G.nodeMap;return k.edges.forEach(function(J){(U.directed||k.label<=K[J.to].label)&&Y.push(J)}),Y},B.prototype.findBackwardEdge=function(G,k,U,Y){if(!this.directed&&k===U)return null;for(var K=G.nodeMap,J=K[U.to],q=J.edges,X=q.length,j=0;j<X;j++){var Q=q[j];if(!(Y.hasEdge(Q)||Q.to!==k.from)){if(this.directed){if(K[k.from].label<K[U.to].label||K[k.from].label===K[U.to].label&&k.label<=Q.label)return Q}else if(k.label<Q.label||k.label===Q.label&&K[k.to].label<=K[U.to].label)return Q}}return null},B.prototype.findForwardPureEdges=function(G,k,U,Y){for(var K=[],J=k.to,q=G.nodeMap[J].edges,X=q.length,j=0;j<X;j++){var Q=q[j],lt=G.nodeMap[Q.to];U<=lt.label&&!Y.hasNode(lt)&&K.push(Q)}return K},B.prototype.findForwardRmpathEdges=function(G,k,U,Y){for(var K=[],J=G.nodeMap,q=J[k.to].label,X=J[k.from],j=X.edges,Q=j.length,lt=0;lt<Q;lt++){var z=j[lt],b=J[z.to].label;k.to===z.to||U>b||Y.hasNode(J[z.to])||(k.label<z.label||k.label===z.label&&q<=b)&&K.push(z)}return K},B.prototype.getSupport=function(G){var k={};return G.forEach(function(U){k[U.graphId]||(k[U.graphId]=!0)}),Object.keys(k).length},B.prototype.findMinLabel=function(G){var k=void 0;return Object.keys(G).forEach(function(U){var Y=G[U],K=Y.nodeLabel1,J=Y.edgeLabel,q=Y.nodeLabel2;if(!k){k={nodeLabel1:K,edgeLabel:J,nodeLabel2:q};return}(K<k.nodeLabel1||K===k.nodeLabel1&&J<k.edgeLabel||K===k.nodeLabel1&&J===k.edgeLabel&&q<k.nodeLabel2)&&(k={nodeLabel1:K,edgeLabel:J,nodeLabel2:q})}),k},B.prototype.isMin=function(){var G=this,k=this.dfsCode;if(this.verbose&&console.log("isMin checking",k),k.dfsEdgeList.length===1)return!0;var U=this.directed,Y=k.toGraph(P.VACANT_GRAPH_ID,U),K=Y.nodeMap,J=new w,q={};Y.nodes.forEach(function(lt){var z=G.findForwardRootEdges(Y,lt);z.forEach(function(b){var v=K[b.to],$=lt.label+"-"+b.label+"-"+v.label;q[$]||(q[$]={projected:[],nodeLabel1:lt.label,edgeLabel:b.label,nodeLabel2:v.label});var et={graphId:Y.id,edge:b,preNode:null};q[$].projected.push(et)})});var X=this.findMinLabel(q);J.dfsEdgeList.push(new N(0,1,X.nodeLabel1,X.edgeLabel,X.nodeLabel2));var j=function lt(z){for(var b=J.buildRmpath(),v=J.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,$=J.dfsEdgeList[b[0]].toNode,et={},Z=!1,pt=0,_t=U?-1:0,It=function(jt){if(Z)return"break";z.forEach(function(mt){var W=new E(mt),rt=G.findBackwardEdge(Y,W.edges[b[jt]],W.edges[b[0]],W);rt&&(et[rt.label]||(et[rt.label]={projected:[],edgeLabel:rt.label}),et[rt.label].projected.push({graphId:Y.id,edge:et,preNode:mt}),pt=J.dfsEdgeList[b[jt]].fromNode,Z=!0)})},Rt=b.length-1;Rt>_t;Rt--){var H=It(Rt);if(H==="break")break}if(Z){var ot=G.findMinLabel(et);J.dfsEdgeList.push(new N($,pt,P.VACANT_NODE_LABEL,ot.edgeLabel,P.VACANT_NODE_LABEL));var St=J.dfsEdgeList.length-1;return G.dfsCode.dfsEdgeList[St]!==J.dfsEdgeList[St]?!1:lt(et[ot.edgeLabel].projected)}var Ut={};Z=!1;var ae=0;z.forEach(function(Lt){var jt=new E(Lt),mt=G.findForwardPureEdges(Y,jt.edges[b[0]],v,jt);mt.length>0&&(Z=!0,ae=$,mt.forEach(function(W){var rt=W.label+"-"+K[W.to].label;Ut[rt]||(Ut[rt]={projected:[],edgeLabel:W.label,nodeLabel2:K[W.to].label}),Ut[rt].projected.push({graphId:Y.id,edge:W,preNode:Lt})}))});for(var bt=b.length,wt=function(jt){if(Z)return"break";var mt=b[jt];z.forEach(function(W){var rt=new E(W),ct=G.findForwardRmpathEdges(Y,rt.edges[mt],v,rt);ct.length>0&&(Z=!0,ae=J.dfsEdgeList[mt].fromNode,ct.forEach(function(At){var tt=At.label+"-"+K[At.to].label;Ut[tt]||(Ut[tt]={projected:[],edgeLabel:At.label,nodeLabel2:K[At.to].label}),Ut[tt].projected.push({graphId:Y.id,edge:At,preNode:W})}))})},Rt=0;Rt<bt;Rt++){var ft=wt(Rt);if(ft==="break")break}if(!Z)return!0;var ht=G.findMinLabel(Ut);J.dfsEdgeList.push(new N(ae,$+1,P.VACANT_NODE_LABEL,ht.edgeLabel,ht.nodeLabel2));var Pt=J.dfsEdgeList.length-1;return k.dfsEdgeList[Pt]!==J.dfsEdgeList[Pt]?!1:lt(Ut[ht.edgeLabel+"-"+ht.nodeLabel2].projected)},Q=X.nodeLabel1+"-"+X.edgeLabel+"-"+X.nodeLabel2;return j(q[Q].projected)},B.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var G=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,y.clone)(G))}},B.prototype.subGraphMining=function(G){var k=this,U=this.getSupport(G);if(!(U<this.minSupport)&&!!this.isMin()){this.report();var Y=this.dfsCode.getNodeNum(),K=this.dfsCode.buildRmpath(),J=this.dfsCode.dfsEdgeList[K[0]].toNode,q=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,X={},j={};G.forEach(function(Q){for(var lt=k.graphs[Q.graphId],z=lt.nodeMap,b=new E(Q),v=K.length-1;v>=0;v--){var $=k.findBackwardEdge(lt,b.edges[K[v]],b.edges[K[0]],b);if($){var et=k.dfsCode.dfsEdgeList[K[v]].fromNode+"-"+$.label;j[et]||(j[et]={projected:[],toNodeId:k.dfsCode.dfsEdgeList[K[v]].fromNode,edgeLabel:$.label}),j[et].projected.push({graphId:Q.graphId,edge:$,preNode:Q})}}if(!(Y>=k.maxNodeNum)){var Z=k.findForwardPureEdges(lt,b.edges[K[0]],q,b);Z.forEach(function(_t){var It=J+"-"+_t.label+"-"+z[_t.to].label;X[It]||(X[It]={projected:[],fromNodeId:J,edgeLabel:_t.label,nodeLabel2:z[_t.to].label}),X[It].projected.push({graphId:Q.graphId,edge:_t,preNode:Q})});for(var pt=function(It){var Rt=k.findForwardRmpathEdges(lt,b.edges[K[It]],q,b);Rt.forEach(function(H){var ot=k.dfsCode.dfsEdgeList[K[It]].fromNode+"-"+H.label+"-"+z[H.to].label;X[ot]||(X[ot]={projected:[],fromNodeId:k.dfsCode.dfsEdgeList[K[It]].fromNode,edgeLabel:H.label,nodeLabel2:z[H.to].label}),X[ot].projected.push({graphId:Q.graphId,edge:H,preNode:Q})})},v=0;v<K.length;v++)pt(v)}}),Object.keys(j).forEach(function(Q){var lt=j[Q],z=lt.toNodeId,b=lt.edgeLabel;k.dfsCode.dfsEdgeList.push(new N(J,z,"-1",b,"-1")),k.subGraphMining(j[Q].projected),k.dfsCode.dfsEdgeList.pop()}),Object.keys(X).forEach(function(Q){var lt=X[Q],z=lt.fromNodeId,b=lt.edgeLabel,v=lt.nodeLabel2;k.dfsCode.dfsEdgeList.push(new N(z,J+1,P.VACANT_NODE_LABEL,b,v)),k.subGraphMining(X[Q].projected),k.dfsCode.dfsEdgeList.pop()})}},B.prototype.generate1EdgeFrequentSubGraphs=function(){var G=this.graphs,k=this.directed,U=this.minSupport,Y=this.frequentSize1Subgraphs,K={},J={},q={},X={};return Object.keys(G).forEach(function(j){var Q=G[j],lt=Q.nodeMap;Q.nodes.forEach(function(z,b){var v=z.label,$=j+"-"+v;if(!q[$]){var et=K[v]||0;et++,K[v]=et}q[$]={graphKey:j,label:v},z.edges.forEach(function(Z){var pt=v,_t=lt[Z.to].label;if(!k&&pt>_t){var It=_t;_t=pt,pt=It}var Rt=Z.label,H=j+"-"+pt+"-"+Rt+"-"+_t,ot=pt+"-"+Rt+"-"+_t;if(!J[ot]){var St=J[ot]||0;St++,J[ot]=St}X[H]={graphId:j,nodeLabel1:pt,edgeLabel:Rt,nodeLabel2:_t}})})}),Object.keys(K).forEach(function(j){var Q=K[j];if(!(Q<U)){var lt={nodes:[],edges:[]};lt.nodes.push({id:"0",label:j}),Y.push(lt)}}),Y},B.prototype.run=function(){var G=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var k=this.graphs,U=this.directed,Y={};Object.keys(k).forEach(function(K){var J=k[K],q=J.nodeMap;J.nodes.forEach(function(X){var j=G.findForwardRootEdges(J,X);j.forEach(function(Q){var lt=q[Q.to],z=X.label+"-"+Q.label+"-"+lt.label;Y[z]||(Y[z]={projected:[],nodeLabel1:X.label,edgeLabel:Q.label,nodeLabel2:lt.label});var b={graphId:K,edge:Q,preNode:null};Y[z].projected.push(b)})})}),Object.keys(Y).forEach(function(K){var J=Y[K],q=J.projected,X=J.nodeLabel1,j=J.edgeLabel,Q=J.nodeLabel2;G.dfsCode.dfsEdgeList.push(new N(0,1,X,j,Q)),G.subGraphMining(q),G.dfsCode.dfsEdgeList.pop()})}},B}(),O=function(G,k,U,Y){var K={};return Object.keys(G).forEach(function(J,q){var X=G[J],j=new P.Graph(q,!0,k),Q={};X.nodes.forEach(function(lt,z){j.addNode(z,lt[U]),Q[lt.id]=z}),X.edges.forEach(function(lt,z){var b=Q[lt.source],v=Q[lt.target];j.addEdge(-1,b,v,lt[Y])}),j&&j.getNodeNum()&&(K[j.id]=j)}),K},I=function(G,k,U){var Y=[];return G.forEach(function(K){var J={nodes:[],edges:[]};K.nodes.forEach(function(q){var X;J.nodes.push((X={id:""+q.id},X[k]=q.label,X))}),K.edges.forEach(function(q){var X;J.edges.push((X={source:""+q.from,target:""+q.to},X[U]=q.label,X))}),Y.push(J)}),Y},C="cluster",T=function(G){var k=G.graphs,U=G.directed,Y=U===void 0?!1:U,K=G.nodeLabelProp,J=K===void 0?C:K,q=G.edgeLabelProp,X=q===void 0?C:q,j=O(k,Y,J,X),Q=G.minSupport,lt=G.maxNodeNum,z=G.minNodeNum,b=G.verbose,v=G.top,$={graphs:j,minSupport:Q,maxNodeNum:lt,minNodeNum:z,top:v,verbose:b,directed:Y},et=new A($);et.run();var Z=I(et.frequentSubgraphs,J,X);return Z},D=T;L.default=D},61907:function(ut,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Graph=L.Node=L.Edge=L.AUTO_EDGE_ID=L.VACANT_GRAPH_ID=L.VACANT_NODE_LABEL=L.VACANT_EDGE_LABEL=L.VACANT_NODE_ID=L.VACANT_EDGE_ID=void 0;var x=-1;L.VACANT_EDGE_ID=x;var y=-1;L.VACANT_NODE_ID=y;var P="-1";L.VACANT_EDGE_LABEL=P;var N="-1";L.VACANT_NODE_LABEL=N;var w=-1;L.VACANT_GRAPH_ID=w;var E="-1";L.AUTO_EDGE_ID=E;var A=function(){function C(T,D,B,G){T===void 0&&(T=x),D===void 0&&(D=y),B===void 0&&(B=y),G===void 0&&(G=P),this.id=T,this.from=D,this.to=B,this.label=G}return C}();L.Edge=A;var O=function(){function C(T,D){T===void 0&&(T=y),D===void 0&&(D=N),this.id=T,this.label=D,this.edges=[],this.edgeMap={}}return C.prototype.addEdge=function(T){this.edges.push(T),this.edgeMap[T.id]=T},C}();L.Node=O;var I=function(){function C(T,D,B){T===void 0&&(T=y),D===void 0&&(D=!0),B===void 0&&(B=!1),this.id=T,this.edgeIdAutoIncrease=D,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=B}return C.prototype.getNodeNum=function(){return this.nodes.length},C.prototype.addNode=function(T,D){if(!this.nodeMap[T]){var B=new O(T,D);this.nodes.push(B),this.nodeMap[T]=B,this.nodeLabelMap[D]||(this.nodeLabelMap[D]=[]),this.nodeLabelMap[D].push(T)}},C.prototype.addEdge=function(T,D,B,G){if((this.edgeIdAutoIncrease||T===void 0)&&(T=this.counter++),!(this.nodeMap[D]&&this.nodeMap[B]&&this.nodeMap[B].edgeMap[T])){var k=new A(T,D,B,G);if(this.edges.push(k),this.edgeMap[T]=k,this.nodeMap[D].addEdge(k),this.edgeLabelMap[G]||(this.edgeLabelMap[G]=[]),this.edgeLabelMap[G].push(k),!this.directed){var U=new A(T,B,D,G);this.nodeMap[B].addEdge(U),this.edgeLabelMap[G].push(U)}}},C}();L.Graph=I},85935:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var y=x(50029),P=A(x(24769)),N=A(x(49215)),w=A(x(56419)),E=x(7348);function A(X){return X&&X.__esModule?X:{default:X}}function O(X){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?O=function(Q){return typeof Q}:O=function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},O(X)}var I=function(j,Q,lt,z){lt===void 0&&(lt="cluster"),z===void 0&&(z=2);var b=[],v=j.nodes;return Q.forEach(function($,et){b.push(C(v,$,et,lt,z))}),b},C=function(j,Q,lt,z,b){var v=[lt],$=[],et={};return Q.forEach(function(Z,pt){if(Z<=b&&lt!==pt){v.push(pt),$.push(j[pt]);var _t=j[pt][z];et[_t]?(et[_t].count++,et[_t].dists.push(Z)):et[_t]={count:1,dists:[Z]}}}),Object.keys(et).forEach(function(Z){et[Z].dists=et[Z].dists.sort(function(pt,_t){return pt-_t})}),{nodeIdx:lt,nodeId:j[lt].id,nodeIdxs:v,neighbors:$,neighborNum:v.length-1,nodeLabelCountMap:et}},T=function(j,Q,lt,z,b){var v=Math.ceil(lt/Q),$={},et=0;return z.forEach(function(Z,pt){for(var _t=0,It=0,Rt=Z.nodeIdxs,H=Z.neighborNum-1;_t<v;){for(var ot=Rt[1+Math.floor(Math.random()*H)],St=0;($[pt+"-"+ot]||$[ot+"-"+pt])&&(ot=Math.floor(Math.random()*Q),St++,!(St>2*Q)););if(St<2*Q&&($[pt+"-"+ot]={start:pt,end:ot,distance:b[pt][ot]},_t++,et++,et>=lt))return $;if(It++,It>2*Q)break}if(_t<v){var Ut=v-_t;v=(v+Ut)/(Q-pt-1)}}),$},D=function(j,Q,lt,z){var b=lt.nodes;return z||(z={}),Object.keys(j).forEach(function(v){var $,et;if(!(z&&z[v])){z[v]={nodes:[],edges:[]};var Z=j[v],pt=($=Q[Z.start])===null||$===void 0?void 0:$.nodeIdxs,_t=(et=Q[Z.end])===null||et===void 0?void 0:et.nodeIdxs;if(!(!pt||!_t)){var It=new Set(_t),Rt=pt.filter(function(ae){return It.has(ae)});if(!(!Rt||!Rt.length)){for(var H={},ot=Rt.length,St=0;St<ot;St++){var Ut=b[Rt[St]];z[v].nodes.push(Ut),H[Ut.id]=!0}lt.edges.forEach(function(ae){H[ae.source]&&H[ae.target]&&z[v].edges.push(ae)})}}}}),z},B=function(j,Q,lt,z){var b={};j.nodes.forEach(function($){b[$.id]=$});var v=0;return j.edges.forEach(function($){var et=b[$.source][lt],Z=b[$.target][lt],pt=Q.nodes[0][lt],_t=Q.nodes[1][lt],It=Q.edges[0][z];$[z]===It&&(et===pt&&Z===_t||et===_t&&Z===pt)&&v++}),v},G=function(j,Q,lt){for(var z=Infinity,b=0,v=function(Z){var pt=j[Z],_t=Object.keys(pt).sort(function(ae,bt){return pt[ae]-pt[bt]}),It=10,Rt=[];_t.forEach(function(ae,bt){Rt[bt%It]||(Rt[bt%It]={graphs:[],totalCount:0,aveCount:0}),Rt[bt%It].graphs.push(ae),Rt[bt%It].totalCount+=pt[ae]});var H=0,ot=[];Rt.forEach(function(ae){var bt=ae.totalCount/ae.graphs.length;ae.aveCount=bt,ot.push(bt);var wt=0,ft=ae.length;ae.graphs.forEach(function(ht,Pt){var Lt=pt[ht];ae.graphs.forEach(function(jt,mt){Pt!==mt&&(wt+=Math.abs(Lt-pt[jt]))})}),wt/=ft*(ft-1)/2,H+=wt}),H/=Rt.length;var St=0;ot.forEach(function(ae,bt){ot.forEach(function(wt,ft){bt!==ft&&(St+=Math.abs(ae-wt))}),St/=ot.length*(ot.length-1)/2});var Ut=St-H;z<Ut&&(z=Ut,b=Z)},$=0;$<Q;$++)v($);return{structure:lt[b],structureCountMap:j[b]}},k=function(j,Q){var lt={},z={};return j.forEach(function(b,v){lt[b.id]={idx:v,node:b,degree:0};var $=b[Q];z[$]||(z[$]=[]),z[$].push(b)}),{nodeMap:lt,nodeLabelMap:z}},U=function(j,Q,lt){var z={},b={};return j.forEach(function(v,$){z[""+E.uniqueId]={idx:$,edge:v};var et=v[Q];b[et]||(b[et]=[]),b[et].push(v);var Z=lt[v.source];Z&&Z.degree++;var pt=lt[v.target];pt&&pt.degree++}),{edgeMap:z,edgeLabelMap:b}},Y=function(j,Q,lt){var z=Q.length,b={};return Q.forEach(function(v,$){for(var et=lt?0:$+1,Z=j[$].id,pt=et;pt<z;pt++)if($!==pt){var _t=j[pt].id,It=v[pt];b[Z+"-"+_t]=It,lt||(b[_t+"-"+Z]=It)}}),b},K=function(j,Q,lt,z,b,v,$,et,Z,pt,_t){var It,Rt=Q.id+"-"+lt.id;if(pt&&pt[Rt])return pt[Rt];var H=_t?_t[Rt]:void 0;if(!H){var ot=(It={},It[Rt]={start:z[Q.id].idx,end:z[lt.id].idx,distance:b},It);_t=D(ot,v,j,_t),H=_t[Rt]}return B(H,$,et,Z)},J=function(j,Q,lt,z,b,v,$){if(lt===void 0&&(lt=!1),v===void 0&&(v="cluster"),$===void 0&&($="cluster"),!(!j||!j.nodes)){var et=j.nodes.length;if(!!et){var Z=(0,P.default)(j,lt),pt=(0,P.default)(Q,lt),_t=Y(j.nodes,Z,lt),It=Y(Q.nodes,pt,lt),Rt=k(j.nodes,v),H=Rt.nodeMap,ot=Rt.nodeLabelMap,St=k(Q.nodes,v),Ut=St.nodeMap,ae=St.nodeLabelMap;U(j.edges,$,H);var bt=U(Q.edges,$,Ut).edgeLabelMap;b||(b=Math.max.apply(Math,(0,y.__spreadArray)((0,y.__spreadArray)([],pt[0]),[2]))),z||(z=b);var wt=I(j,Z,v,z),ft=I(Q,pt,v,z),ht=Math.min(100,et*(et-1)/2),Pt=T(z,et,ht,ft,Z),Lt=D(Pt,wt,j),jt=10,mt=1,W=1,rt=4,ct={graphs:Lt,nodeLabelProp:v,edgeLabelProp:$,minSupport:mt,minNodeNum:W,maxNodeNum:rt,directed:lt},At=(0,N.default)(ct).slice(0,jt),tt=At.length,dt=[];At.forEach(function(sr,Tr){dt[Tr]={},Object.keys(Lt).forEach(function(qr){var fn=Lt[qr],Rn=B(fn,sr,v,$);dt[Tr][qr]=Rn})});var Et=G(dt,tt,At),Ot=Et.structure,$t=Et.structureCountMap,st=Q.nodes[0],Qt=st[v],vt=ot[Qt],yt={},zt={},oe={},Ie={},Gt={};Object.keys(ae).forEach(function(sr,Tr){Gt[sr]=[];var qr=-Infinity,fn=ae[sr],Rn={};fn.forEach(function(vn){var $r=It[st.id+"-"+vn.id];$r&&Gt[sr].push($r),qr<$r&&(qr=$r),Rn[st.id+"-"+vn.id]={start:0,end:Ut[vn.id].idx,distance:$r}}),Gt[sr]=Gt[sr].sort(function(vn,$r){return vn-$r}),zt=D(Rn,ft,Q,zt);var Yr=[];if(Object.keys(Rn).forEach(function(vn){if(oe[vn]){Yr.push(oe[vn]);return}var $r=zt[vn];oe[vn]=B($r,Ot,v,$),Yr.push(oe[vn])}),Yr=Yr.sort(function(vn,$r){return $r-vn}),Ie[st.id+"-"+sr]=Yr,sr!==Qt)for(var Nn=vt.length,Vr=function($r){var En=vt[$r],In=wt[H[En.id].idx],On=In.nodeLabelCountMap[sr],ta=ae[sr].length;if(!On||On.count<ta)return vt.splice($r,1),"continue";for(var Wi=!1,kn=0;kn<ta;kn++)if(On.dists[kn]>Gt[sr][kn]){Wi=!0;break}if(Wi)return vt.splice($r,1),"continue";var Bi={};In.neighbors.forEach(function(fi){var pi=_t[En.id+"-"+fi.id];Bi[En.id+"-"+fi.id]={start:H[En.id].idx,end:H[fi.id].idx,distance:pi}}),Lt=D(Bi,wt,j,Lt);var gn=[];Object.keys(Bi).forEach(function(fi){if($t[fi]){gn.push($t[fi]);return}var pi=Lt[fi];$t[fi]=B(pi,Ot,v,$),gn.push($t[fi])}),gn=gn.sort(function(fi,pi){return pi-fi});for(var ci=!1,kn=0;kn<ta;kn++)if(gn[kn]<Yr[kn]){ci=!0;break}if(ci)return vt.splice($r,1),"continue"},ki=Nn-1;ki>=0;ki--)Vr(ki)});var Wt=[];vt.forEach(function(sr){for(var Tr=H[sr.id].idx,qr=C(j.nodes,Z[Tr],Tr,v,b),fn=qr.neighbors,Rn=fn.length,Yr=!1,Nn=function($r){if(fn.length+1<Q.nodes.length)return Yr=!0,{value:void 0};var En=fn[$r],In=En[v];if(!ae[In]||!ae[In].length)return fn.splice($r,1),"continue";var On=sr.id+"-"+En.id;if(!Gt[In]||!Gt[In].length)return fn.splice($r,1),"continue";var ta=_t[On],Wi=Gt[In][Gt[In].length-1];if(ta>Wi)return fn.splice($r,1),"continue";var kn=$t[On]?$t[On]:K(j,sr,En,H,ta,wt,Ot,v,$,$t,Lt),Bi=st.id+"-"+In,gn=Ie[Bi][Ie[Bi].length-1];if(kn<gn)return fn.splice($r,1),"continue";var ci=yt[In];if(ci===void 0&&(ci=Infinity,ae[In].forEach(function(fi){var pi=Ut[fi.id].degree;ci>pi&&(ci=pi)}),yt[In]=ci),H[En.id].degree<ci)return fn.splice($r,1),"continue"},Vr=Rn-1;Vr>=0;Vr--){var ki=Nn(Vr);if(O(ki)==="object")return ki.value}Yr||Wt.push({nodes:[sr].concat(fn)})});var Ht=(0,w.default)(Q,st.id,!1).length,de={};lt?(Object.keys(Ht).forEach(function(sr){var Tr=Ut[sr].node[v];de[Tr]?de[Tr].push(Ht[sr]):de[Tr]=[Ht[sr]]}),Object.keys(de).forEach(function(sr){de[sr].sort(function(Tr,qr){return Tr-qr})})):de=Gt;for(var Ge=Wt.length,Re=function(Tr){var qr=Wt[Tr],fn=qr.nodes[0],Rn={},Yr={};qr.nodes.forEach(function($n,Vi){Yr[$n.id]={idx:Vi,node:$n,degree:0};var Fi=$n[v];Rn[Fi]?Rn[Fi]++:Rn[Fi]=1});var Nn=[],Vr={};j.edges.forEach(function($n){Yr[$n.source]&&Yr[$n.target]&&(Nn.push($n),Vr[$n[$]]?Vr[$n[$]]++:Vr[$n[$]]=1,Yr[$n.source].degree++,Yr[$n.target].degree++)});for(var ki=Object.keys(bt).length,vn=!1,$r=0;$r<ki;$r++){var En=Object.keys(bt)[$r];if(!Vr[En]||Vr[En]<bt[En].length){vn=!0;break}}if(vn)return Wt.splice(Tr,1),"continue";var In=Nn.length;if(In<Q.edges.length)return Wt.splice(Tr,1),"break";for(var On=!1,ta=function(Vi){var Fi=Nn[Vi],Xi=Fi[$],$a=bt[Xi];if(!$a||!$a.length)return Vr[Xi]--,$a&&Vr[Xi]<$a.length?(On=!0,"break"):(Nn.splice(Vi,1),Yr[Fi.source].degree--,Yr[Fi.target].degree--,"continue");var Ss=Yr[Fi.source].node[v],Es=Yr[Fi.target].node[v],sl=!1;if($a.forEach(function(Vl){var Xl=Ut[Vl.source].node,ws=Ut[Vl.target].node;Xl[v]===Ss&&ws[v]===Es&&(sl=!0),!lt&&Xl[v]===Es&&ws[v]===Ss&&(sl=!0)}),!sl)return Vr[Xi]--,$a&&Vr[Xi]<$a.length?(On=!0,"break"):(Nn.splice(Vi,1),Yr[Fi.source].degree--,Yr[Fi.target].degree--,"continue")},$r=In-1;$r>=0;$r--){var Wi=ta($r);if(Wi==="break")break}if(On)return Wt.splice(Tr,1),"continue";qr.edges=Nn;var kn=(0,w.default)(qr,qr.nodes[0].id,!1).length;if(Object.keys(kn).reverse().forEach(function($n){if(!($n===qr.nodes[0].id||On)){if(kn[$n]===Infinity){var Vi=Yr[$n].node[v];if(Rn[Vi]--,Rn[Vi]<ae[Vi].length){On=!0;return}var Fi=qr.nodes.indexOf(Yr[$n].node);qr.nodes.splice(Fi,1),Yr[$n]=void 0;return}var Xi=H[$n].node[v];if(!de[Xi]||!de[Xi].length||kn[$n]>de[Xi][de[Xi].length-1]){var Vi=Yr[$n].node[v];if(Rn[Vi]--,Rn[Vi]<ae[Vi].length){On=!0;return}var Fi=qr.nodes.indexOf(Yr[$n].node);qr.nodes.splice(Fi,1),Yr[$n]=void 0}}}),On)return Wt.splice(Tr,1),"continue";for(var Bi=!0,gn=0;Bi&&!On;){if(Bi=!1,Yr[fn.id].degree<Ut[st.id].degree){On=!0;break}if(Rn[fn[v]]<ae[fn[v]].length){On=!0;break}for(var ci=qr.nodes.length,fi=ci-1;fi>=0;fi--){var pi=qr.nodes[fi],mo=Yr[pi.id].degree,ka=pi[v];if(mo<yt[ka]){if(Rn[pi[v]]--,Rn[pi[v]]<ae[pi[v]].length){On=!0;break}qr.nodes.splice(fi,1),Yr[pi.id]=void 0,Bi=!0}}if(On||!Bi&&gn!==0)break;In=Nn.length;for(var lo=In-1;lo>=0;lo--){var Ca=Nn[lo];if(!Yr[Ca.source]||!Yr[Ca.target]){Nn.splice(lo,1);var Lo=Ca[$];if(Vr[Lo]--,Yr[Ca.source]&&Yr[Ca.source].degree--,Yr[Ca.target]&&Yr[Ca.target].degree--,bt[Lo]&&Vr[Lo]<bt[Lo].length){On=!0;break}Bi=!0}}gn++}if(On||On||qr.nodes.length<Q.nodes.length||Nn.length<Q.edges.length)return Wt.splice(Tr,1),"continue"},Ke=Ge-1;Ke>=0;Ke--){var ze=Re(Ke);if(ze==="break")break}for(var Ce=Wt.length,dr=function(Tr){var qr=Wt[Tr],fn={};qr.edges.forEach(function(Nn){var Vr=Nn.source+"-"+Nn.target+"-"+Nn.label;fn[Vr]?fn[Vr]++:fn[Vr]=1});for(var Rn=function(Vr){var ki=Wt[Vr],vn={};ki.edges.forEach(function(En){var In=En.source+"-"+En.target+"-"+En.label;vn[In]?vn[In]++:vn[In]=1});var $r=!0;Object.keys(vn).length!==Object.keys(fn).length?$r=!1:Object.keys(fn).forEach(function(En){vn[En]!==fn[En]&&($r=!1)}),$r&&Wt.splice(Vr,1)},Yr=Ce-1;Yr>Tr;Yr--)Rn(Yr);Ce=Wt.length},Ke=0;Ke<=Ce-1;Ke++)dr(Ke);return Wt}}},q=J;L.default=q},33763:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var y=N(x(26973)),P=x(7348);function N(A){return A&&A.__esModule?A:{default:A}}var w=function(O,I,C,T){I===void 0&&(I=!1),C===void 0&&(C="weight"),T===void 0&&(T=1e3);var D=O.nodes,B=D===void 0?[]:D,G=O.edges,k=G===void 0?[]:G,U={},Y={};B.forEach(function(v,$){var et=(0,P.uniqueId)();v.clusterId=et,U[et]={id:et,nodes:[v]},Y[v.id]={node:v,idx:$}});var K=(0,y.default)(O,I),J=[],q={};K.forEach(function(v,$){var et=0,Z=B[$].id;q[Z]={},v.forEach(function(pt,_t){if(!!pt){et+=pt;var It=B[_t].id;q[Z][It]=pt}}),J.push(et)});for(var X=0,j=function(){var $=!1;if(B.forEach(function(et){var Z={};Object.keys(q[et.id]).forEach(function(Ut){var ae=q[et.id][Ut],bt=Y[Ut].node,wt=bt.clusterId;Z[wt]||(Z[wt]=0),Z[wt]+=ae});var pt=-Infinity,_t=[];if(Object.keys(Z).forEach(function(Ut){pt<Z[Ut]?(pt=Z[Ut],_t=[Ut]):pt===Z[Ut]&&_t.push(Ut)}),!(_t.length===1&&_t[0]===et.clusterId)){var It=_t.indexOf(et.clusterId);if(It>=0&&_t.splice(It,1),_t&&_t.length){$=!0;var Rt=U[et.clusterId],H=Rt.nodes.indexOf(et);Rt.nodes.splice(H,1);var ot=Math.floor(Math.random()*_t.length),St=U[_t[ot]];St.nodes.push(et),et.clusterId=St.id}}}),!$)return"break";X++};X<T;){var Q=j();if(Q==="break")break}Object.keys(U).forEach(function(v){var $=U[v];(!$.nodes||!$.nodes.length)&&delete U[v]});var lt=[],z={};k.forEach(function(v){var $=v.source,et=v.target,Z=v[C]||1,pt=Y[$].node.clusterId,_t=Y[et].node.clusterId,It=pt+"---"+_t;if(z[It])z[It].weight+=Z,z[It].count++;else{var Rt={source:pt,target:_t,weight:Z,count:1};z[It]=Rt,lt.push(Rt)}});var b=[];return Object.keys(U).forEach(function(v){b.push(U[v])}),{clusters:b,clusterEdges:lt}},E=w;L.default=E},5121:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var y=P(x(26973));function P(A){return A&&A.__esModule?A:{default:A}}var N=function(O,I,C,T){for(var D=I.length,B=2*T,G=0,k=0;k<D;k++)for(var U=O[k].clusterId,Y=0;Y<D;Y++){var K=O[Y].clusterId;if(U===K){var J=I[k][Y]||0,q=C[k]||0,X=C[Y]||0;G+=J-q*X/B}}return G*=1/B,G},w=function(O,I,C,T){I===void 0&&(I=!1),C===void 0&&(C="weight"),T===void 0&&(T=1e-4);var D=O.nodes,B=D===void 0?[]:D,G=O.edges,k=G===void 0?[]:G,U=1,Y={},K={};B.forEach(function(pt,_t){var It=String(U++);pt.clusterId=It,Y[It]={id:It,nodes:[pt]},K[pt.id]={node:pt,idx:_t}});var J=(0,y.default)(O,I),q=[],X={},j=0;J.forEach(function(pt,_t){var It=0,Rt=B[_t].id;X[Rt]={},pt.forEach(function(H,ot){if(!!H){It+=H;var St=B[ot].id;X[Rt][St]=H,j+=H}}),q.push(It)}),j/=2;for(var Q=Infinity,lt=Infinity,z=0;Q=N(B,J,q,j),!(Math.abs(Q-lt)<T||z>100);)lt=Q,z++,Object.keys(Y).forEach(function(pt){var _t=0;k.forEach(function(It){var Rt=It.source,H=It.target,ot=K[Rt].node.clusterId,St=K[H].node.clusterId;(ot===pt&&St!==pt||St===pt&&ot!==pt)&&(_t=_t+(It[C]||1))}),Y[pt].sumTot=_t}),B.forEach(function(pt,_t){var It=Y[pt.clusterId],Rt=0,H,ot=q[_t]/(2*j),St=0,Ut=It.nodes;Ut.forEach(function(Lt){var jt=K[Lt.id].idx;St+=J[_t][jt]||0});var ae=St-It.sumTot*ot,bt=X[pt.id];if(Object.keys(bt).forEach(function(Lt){var jt=K[Lt].node,mt=jt.clusterId;if(mt!==pt.clusterId){var W=Y[mt],rt=W.nodes;if(!(!rt||!rt.length)){var ct=0;rt.forEach(function(dt){var Et=K[dt.id].idx;ct+=J[_t][Et]||0});var At=ct-W.sumTot*ot,tt=At-ae;tt>Rt&&(Rt=tt,H=W)}}}),Rt>0){H.nodes.push(pt);var wt=pt.clusterId;pt.clusterId=H.id;var ft=It.nodes.indexOf(pt);It.nodes.splice(ft,1);var ht=0,Pt=0;k.forEach(function(Lt){var jt=Lt.source,mt=Lt.target,W=K[jt].node.clusterId,rt=K[mt].node.clusterId;(W===H.id&&rt!==H.id||rt===H.id&&W!==H.id)&&(ht=ht+(Lt[C]||1)),(W===wt&&rt!==wt||rt===wt&&W!==wt)&&(Pt=Pt+(Lt[C]||1))}),H.sumTot=ht,It.sumTot=Pt}});var b={},v=0;Object.keys(Y).forEach(function(pt){var _t=Y[pt];if(!_t.nodes||!_t.nodes.length){delete Y[pt];return}var It=String(v+1);It!==pt&&(_t.id=It,_t.nodes=_t.nodes.map(function(Rt){return{id:Rt.id,clusterId:It}}),Y[It]=_t,b[pt]=It,delete Y[pt],v++)}),B.forEach(function(pt){pt.clusterId&&b[pt.clusterId]&&(pt.clusterId=b[pt.clusterId])});var $=[],et={};k.forEach(function(pt){var _t=pt.source,It=pt.target,Rt=pt[C]||1,H=K[_t].node.clusterId,ot=K[It].node.clusterId,St=H+"---"+ot;if(et[St])et[St].weight+=Rt,et[St].count++;else{var Ut={source:H,target:ot,weight:Rt,count:1};et[St]=Ut,$.push(Ut)}});var Z=[];return Object.keys(Y).forEach(function(pt){Z.push(Y[pt])}),{clusters:Z,clusterEdges:$}},E=w;L.default=E},66034:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var y=w(x(31802)),P=w(x(9342)),N=x(7348);function w(C){return C&&C.__esModule?C:{default:C}}var E=function(T,D){var B=[],G=T.nodes,k=G===void 0?[]:G,U=T.edges,Y=U===void 0?[]:U;if(k.length===0)return B;var K=k[0],J=new Set;J.add(K);var q=function(b,v){return D?b.weight-v.weight:0},X=new P.default(q);for((0,N.getEdgesByNodeId)(K.id,Y).forEach(function(z){X.insert(z)});!X.isEmpty();){var j=X.delMin(),Q=j.source,lt=j.target;J.has(Q)&&J.has(lt)||(B.push(j),J.has(Q)||(J.add(Q),(0,N.getEdgesByNodeId)(Q,Y).forEach(function(z){X.insert(z)})),J.has(lt)||(J.add(lt),(0,N.getEdgesByNodeId)(lt,Y).forEach(function(z){X.insert(z)})))}return B},A=function(T,D){var B=[],G=T.nodes,k=G===void 0?[]:G,U=T.edges,Y=U===void 0?[]:U;if(k.length===0)return B;var K=Y.map(function(Q){return Q});D&&K.sort(function(Q,lt){return Q.weight-lt.weight});for(var J=new y.default(k.map(function(Q){return Q.id}));K.length>0;){var q=K.shift(),X=q.source,j=q.target;J.connected(X,j)||(B.push(q),J.union(X,j))}return B},O=function(T,D,B){var G={prim:E,kruskal:A};return B?G[B](T,D):A(T,D)},I=O;L.default=I},68650:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var y=N(x(37193)),P=x(7348);function N(A){return A&&A.__esModule?A:{default:A}}var w=function(O,I,C){typeof I!="number"&&(I=1e-6),typeof C!="number"&&(C=.85);for(var T=1,D=0,B=1e3,G=O.nodes,k=G===void 0?[]:G,U=O.edges,Y=U===void 0?[]:U,K=k.length,J,q={},X={},j=0;j<K;++j){var Q=k[j],lt=Q.id;q[lt]=1/K,X[lt]=1/K}for(var z=(0,y.default)(O);B>0&&T>I;){D=0;for(var j=0;j<K;++j){var Q=k[j],lt=Q.id;if(J=0,z[Q.id].inDegree===0)q[lt]=0;else{for(var b=(0,P.getNeighbors)(lt,Y,"source"),v=0;v<b.length;++v){var $=b[v],et=z[$].outDegree;et>0&&(J+=X[$]/et)}q[lt]=C*J,D+=q[lt]}}D=(1-D)/K,T=0;for(var j=0;j<K;++j){var Q=k[j],lt=Q.id;J=q[lt]+D,T+=Math.abs(J-X[lt]),X[lt]=J}B-=1}return X},E=w;L.default=E},9342:function(ut,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var x=function(w,E){return w-E},y=function(){function N(w){w===void 0&&(w=x),this.compareFn=w,this.list=[]}return N.prototype.getLeft=function(w){return 2*w+1},N.prototype.getRight=function(w){return 2*w+2},N.prototype.getParent=function(w){return w===0?null:Math.floor((w-1)/2)},N.prototype.isEmpty=function(){return this.list.length<=0},N.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},N.prototype.delMin=function(){var w=this.top(),E=this.list.pop();return this.list.length>0&&(this.list[0]=E,this.moveDown(0)),w},N.prototype.insert=function(w){if(w!==null){this.list.push(w);var E=this.list.length-1;return this.moveUp(E),!0}return!1},N.prototype.moveUp=function(w){for(var E=this.getParent(w);w&&w>0&&this.compareFn(this.list[E],this.list[w])>0;){var A=this.list[E];this.list[E]=this.list[w],this.list[w]=A,w=E,E=this.getParent(w)}},N.prototype.moveDown=function(w){var E,A=w,O=this.getLeft(w),I=this.getRight(w),C=this.list.length;O!==null&&O<C&&this.compareFn(this.list[A],this.list[O])>0?A=O:I!==null&&I<C&&this.compareFn(this.list[A],this.list[I])>0&&(A=I),w!==A&&(E=[this.list[A],this.list[w]],this.list[w]=E[0],this.list[A]=E[1],this.moveDown(A))},N}(),P=y;L.default=P},1859:function(ut,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=L.LinkedListNode=void 0;var x=function(E,A){return E===A},y=function(){function w(E,A){A===void 0&&(A=null),this.value=E,this.next=A}return w.prototype.toString=function(E){return E?E(this.value):""+this.value},w}();L.LinkedListNode=y;var P=function(){function w(E){E===void 0&&(E=x),this.head=null,this.tail=null,this.compare=E}return w.prototype.prepend=function(E){var A=new y(E,this.head);return this.head=A,this.tail||(this.tail=A),this},w.prototype.append=function(E){var A=new y(E);return this.head?(this.tail.next=A,this.tail=A,this):(this.head=A,this.tail=A,this)},w.prototype.delete=function(E){if(!this.head)return null;for(var A=null;this.head&&this.compare(this.head.value,E);)A=this.head,this.head=this.head.next;var O=this.head;if(O!==null)for(;O.next;)this.compare(O.next.value,E)?(A=O.next,O.next=O.next.next):O=O.next;return this.compare(this.tail.value,E)&&(this.tail=O),A},w.prototype.find=function(E){var A=E.value,O=A===void 0?void 0:A,I=E.callback,C=I===void 0?void 0:I;if(!this.head)return null;for(var T=this.head;T;){if(C&&C(T.value)||O!==void 0&&this.compare(T.value,O))return T;T=T.next}return null},w.prototype.deleteTail=function(){var E=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,E;for(var A=this.head;A.next;)A.next.next?A=A.next:A.next=null;return this.tail=A,E},w.prototype.deleteHead=function(){if(!this.head)return null;var E=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),E},w.prototype.fromArray=function(E){var A=this;return E.forEach(function(O){return A.append(O)}),this},w.prototype.toArray=function(){for(var E=[],A=this.head;A;)E.push(A),A=A.next;return E},w.prototype.reverse=function(){for(var E=this.head,A=null,O=null;E;)O=E.next,E.next=A,A=E,E=O;this.tail=this.head,this.head=A},w.prototype.toString=function(E){return E===void 0&&(E=void 0),this.toArray().map(function(A){return A.toString(E)}).toString()},w}(),N=P;L.default=N},33699:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var y=P(x(1859));function P(E){return E&&E.__esModule?E:{default:E}}var N=function(){function E(){this.linkedList=new y.default}return E.prototype.isEmpty=function(){return!this.linkedList.head},E.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},E.prototype.enqueue=function(A){this.linkedList.append(A)},E.prototype.dequeue=function(){var A=this.linkedList.deleteHead();return A?A.value:null},E.prototype.toString=function(A){return this.linkedList.toString(A)},E}(),w=N;L.default=w},31802:function(ut,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var x=function(){function P(N){this.count=N.length,this.parent={};for(var w=0,E=N;w<E.length;w++){var A=E[w];this.parent[A]=A}}return P.prototype.find=function(N){for(;this.parent[N]!==N;)N=this.parent[N];return N},P.prototype.union=function(N,w){var E=this.find(N),A=this.find(w);E!==A&&(E<A?(this.parent[w]!==w&&this.union(this.parent[w],N),this.parent[w]=this.parent[N]):(this.parent[N]!==N&&this.union(this.parent[N],w),this.parent[N]=this.parent[w]))},P.prototype.connected=function(N,w){return this.find(N)===this.find(w)},P}(),y=x;L.default=y},7348:function(ut,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.uniqueId=L.getEdgesByNodeId=L.getOutEdgesNodeId=L.getNeighbors=void 0;var x=function(E,A,O){A===void 0&&(A=[]);var I=A.filter(function(B){return B.source===E||B.target===E});if(O==="target"){var C=function(G){return G.source===E};return I.filter(C).map(function(B){return B.target})}if(O==="source"){var T=function(G){return G.target===E};return I.filter(T).map(function(B){return B.source})}var D=function(G){return G.source===E?G.target:G.source};return I.map(D)};L.getNeighbors=x;var y=function(E,A){return A.filter(function(O){return O.source===E})};L.getOutEdgesNodeId=y;var P=function(E,A){return A.filter(function(O){return O.source===E||O.target===E})};L.getEdgesByNodeId=P;var N=function(E){E===void 0&&(E=0);var A=(""+Math.random()).split(".")[1].substr(0,5),O=(""+Math.random()).split(".")[1].substr(0,5);return E+"-"+A+O};L.uniqueId=N},65270:function(ut,L,x){"use strict";function y(X){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?y=function(Q){return typeof Q}:y=function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},y(X)}Object.defineProperty(L,"__esModule",{value:!0}),Object.defineProperty(L,"getAdjMatrix",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(L,"breadthFirstSearch",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(L,"connectedComponent",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(L,"getDegree",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(L,"getInDegree",{enumerable:!0,get:function(){return E.getInDegree}}),Object.defineProperty(L,"getOutDegree",{enumerable:!0,get:function(){return E.getOutDegree}}),Object.defineProperty(L,"detectCycle",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(L,"depthFirstSearch",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(L,"dijkstra",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(L,"findAllPath",{enumerable:!0,get:function(){return C.findAllPath}}),Object.defineProperty(L,"findShortestPath",{enumerable:!0,get:function(){return C.findShortestPath}}),Object.defineProperty(L,"floydWarshall",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(L,"labelPropagation",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(L,"louvain",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(L,"minimumSpanningTree",{enumerable:!0,get:function(){return G.default}}),Object.defineProperty(L,"pageRank",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(L,"GADDI",{enumerable:!0,get:function(){return U.default}}),Object.defineProperty(L,"getNeighbors",{enumerable:!0,get:function(){return Y.getNeighbors}});var P=q(x(26973)),N=q(x(30278)),w=q(x(99414)),E=J(x(37193)),A=q(x(64298)),O=q(x(76607)),I=q(x(56419)),C=x(59820),T=q(x(24769)),D=q(x(33763)),B=q(x(5121)),G=q(x(66034)),k=q(x(68650)),U=q(x(85935)),Y=x(7348);function K(){if(typeof WeakMap!="function")return null;var X=new WeakMap;return K=function(){return X},X}function J(X){if(X&&X.__esModule)return X;if(X===null||y(X)!=="object"&&typeof X!="function")return{default:X};var j=K();if(j&&j.has(X))return j.get(X);var Q={},lt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var z in X)if(Object.prototype.hasOwnProperty.call(X,z)){var b=lt?Object.getOwnPropertyDescriptor(X,z):null;b&&(b.get||b.set)?Object.defineProperty(Q,z,b):Q[z]=X[z]}return Q.default=X,j&&j.set(X,Q),Q}function q(X){return X&&X.__esModule?X:{default:X}}},76469:function(ut,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.MESSAGE=L.ALGORITHM=void 0;var x={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};L.ALGORITHM=x;var y={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};L.MESSAGE=y},3594:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var y=x(76469),P=N(x(90844));function N(A){return A&&A.__esModule?A:{default:A}}var w=function(O){return function(){for(var I=[],C=0;C<arguments.length;C++)I[C]=arguments[C];return new Promise(function(T,D){var B=new P.default;B.postMessage({_algorithmType:O,data:I}),B.onmessage=function(G){var k=G.data,U=k.data,Y=k._algorithmType;y.MESSAGE.SUCCESS===Y?T(U):D(),B.terminate()}})}},E=w;L.default=E},20524:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.GADDIAsync=L.getNeighborsAsync=L.pageRankAsync=L.minimumSpanningTreeAsync=L.louvainAsync=L.labelPropagationAsync=L.floydWarshallAsync=L.findShortestPathAsync=L.findAllPathAsync=L.dijkstraAsync=L.detectAllUndirectedCycleAsync=L.detectAllDirectedCycleAsync=L.detectAllCyclesAsync=L.detectCycleAsync=L.getOutDegreeAsync=L.getInDegreeAsync=L.getDegreeAsync=L.connectedComponentAsync=L.getAdjMatrixAsync=void 0;var y=N(x(3594)),P=x(76469);function N(lt){return lt&&lt.__esModule?lt:{default:lt}}var w=function(z,b){return(0,y.default)(P.ALGORITHM.getAdjMatrix).apply(void 0,[z,b])};L.getAdjMatrixAsync=w;var E=function(z,b){return(0,y.default)(P.ALGORITHM.connectedComponent).apply(void 0,[z,b])};L.connectedComponentAsync=E;var A=function(z){return(0,y.default)(P.ALGORITHM.getDegree)(z)};L.getDegreeAsync=A;var O=function(z,b){return(0,y.default)(P.ALGORITHM.getInDegree)(z,b)};L.getInDegreeAsync=O;var I=function(z,b){return(0,y.default)(P.ALGORITHM.getOutDegree)(z,b)};L.getOutDegreeAsync=I;var C=function(z){return(0,y.default)(P.ALGORITHM.detectCycle)(z)};L.detectCycleAsync=C;var T=function(z){return(0,y.default)(P.ALGORITHM.detectAllCycles)(z)};L.detectAllCyclesAsync=T;var D=function(z){return(0,y.default)(P.ALGORITHM.detectAllDirectedCycle)(z)};L.detectAllDirectedCycleAsync=D;var B=function(z){return(0,y.default)(P.ALGORITHM.detectAllUndirectedCycle)(z)};L.detectAllUndirectedCycleAsync=B;var G=function(z,b,v,$){return(0,y.default)(P.ALGORITHM.dijkstra).apply(void 0,[z,b,v,$])};L.dijkstraAsync=G;var k=function(z,b,v,$){return(0,y.default)(P.ALGORITHM.findAllPath).apply(void 0,[z,b,v,$])};L.findAllPathAsync=k;var U=function(z,b,v,$,et){return(0,y.default)(P.ALGORITHM.findShortestPath).apply(void 0,[z,b,v,$,et])};L.findShortestPathAsync=U;var Y=function(z,b){return(0,y.default)(P.ALGORITHM.floydWarshall).apply(void 0,[z,b])};L.floydWarshallAsync=Y;var K=function(z,b,v,$){return $===void 0&&($=1e3),(0,y.default)(P.ALGORITHM.labelPropagation)(z,b,v,$)};L.labelPropagationAsync=K;var J=function(z,b,v,$){return(0,y.default)(P.ALGORITHM.louvain)(z,b,v,$)};L.louvainAsync=J;var q=function(z,b,v){return(0,y.default)(P.ALGORITHM.minimumSpanningTree).apply(void 0,[z,b,v])};L.minimumSpanningTreeAsync=q;var X=function(z,b,v){return(0,y.default)(P.ALGORITHM.pageRank).apply(void 0,[z,b,v])};L.pageRankAsync=X;var j=function(z,b,v){return(0,y.default)(P.ALGORITHM.getNeighbors).apply(void 0,[z,b,v])};L.getNeighborsAsync=j;var Q=function(z,b,v,$,et,Z,pt){return v===void 0&&(v=!1),Z===void 0&&(Z="cluster"),pt===void 0&&(pt="cluster"),(0,y.default)(P.ALGORITHM.GADDI).apply(void 0,[z,b,v,$,et,Z,pt])};L.GADDIAsync=Q},90844:function(ut,L,x){"use strict";function y(I){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?y=function(T){return typeof T}:y=function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},y(I)}Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var P=E(x(65270)),N=x(76469);function w(){if(typeof WeakMap!="function")return null;var I=new WeakMap;return w=function(){return I},I}function E(I){if(I&&I.__esModule)return I;if(I===null||y(I)!=="object"&&typeof I!="function")return{default:I};var C=w();if(C&&C.has(I))return C.get(I);var T={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in I)if(Object.prototype.hasOwnProperty.call(I,B)){var G=D?Object.getOwnPropertyDescriptor(I,B):null;G&&(G.get||G.set)?Object.defineProperty(T,B,G):T[B]=I[B]}return T.default=I,C&&C.set(I,T),T}var A=self;A.onmessage=function(I){var C=I.data,T=C._algorithmType,D=C.data;if(!!T){if(typeof P[T]=="function"){var B=P[T].apply(P,D);A.postMessage({_algorithmType:N.MESSAGE.SUCCESS,data:B});return}A.postMessage({_algorithmType:N.MESSAGE.FAILURE})}};var O=null;L.default=O},95472:function(ut,L){"use strict";var x="*",y=function(){function P(){this._events={}}return P.prototype.on=function(N,w,E){return this._events[N]||(this._events[N]=[]),this._events[N].push({callback:w,once:!!E}),this},P.prototype.once=function(N,w){return this.on(N,w,!0),this},P.prototype.emit=function(N){for(var w=this,E=[],A=1;A<arguments.length;A++)E[A-1]=arguments[A];var O=this._events[N]||[],I=this._events[x]||[],C=function(T){for(var D=T.length,B=0;B<D;B++)if(!!T[B]){var G=T[B],k=G.callback,U=G.once;U&&(T.splice(B,1),T.length===0&&delete w._events[N],D--,B--),k.apply(w,E)}};C(O),C(I)},P.prototype.off=function(N,w){if(!N)this._events={};else if(!w)delete this._events[N];else{for(var E=this._events[N]||[],A=E.length,O=0;O<A;O++)E[O].callback===w&&(E.splice(O,1),A--,O--);E.length===0&&delete this._events[N]}return this},P.prototype.getEvents=function(){return this._events},P}();L.Z=y},32382:function(ut,L,x){"use strict";var y=x(50029),P=x(95472),N=x(64753),w=function(E){(0,y.__extends)(A,E);function A(O){var I=E.call(this)||this;I.destroyed=!1;var C=I.getDefaultCfg();return I.cfg=(0,N.CD)(C,O),I}return A.prototype.getDefaultCfg=function(){return{}},A.prototype.get=function(O){return this.cfg[O]},A.prototype.set=function(O,I){this.cfg[O]=I},A.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},A}(P.Z);L.Z=w},23051:function(ut,L,x){"use strict";x.d(L,{Z:function(){return It}});var y=x(50029),P=x(23752),N=x(84282),w=x(64753),E=x(6802),A=x(7802),O=x(65650),I=x(50710),C=x(39751),T=x(41489),D=function(Rt){return["fill","stroke","fillStyle","strokeStyle"].includes(Rt)},B=function(Rt){return/^[r,R,L,l]{1}[\s]*\(/.test(Rt)},G=[1,0,0,0,1,0,0,0,1];function k(Rt,H,ot){var St={},Ut=H.fromAttrs,ae=H.toAttrs;if(!Rt.destroyed){var bt;for(var wt in ae)if(!(0,E.isEqual)(Ut[wt],ae[wt]))if(wt==="path"){var ft=ae[wt],ht=Ut[wt];ft.length>ht.length?(ft=T.parsePathString(ae[wt]),ht=T.parsePathString(Ut[wt]),ht=T.fillPathByDiff(ht,ft),ht=T.formatPath(ht,ft),H.fromAttrs.path=ht,H.toAttrs.path=ft):H.pathFormatted||(ft=T.parsePathString(ae[wt]),ht=T.parsePathString(Ut[wt]),ht=T.formatPath(ht,ft),H.fromAttrs.path=ht,H.toAttrs.path=ft,H.pathFormatted=!0),St[wt]=[];for(var Pt=0;Pt<ft.length;Pt++){for(var Lt=ft[Pt],jt=ht[Pt],mt=[],W=0;W<Lt.length;W++)(0,E.isNumber)(Lt[W])&&jt&&(0,E.isNumber)(jt[W])?(bt=(0,I.Z)(jt[W],Lt[W]),mt.push(bt(ot))):mt.push(Lt[W]);St[wt].push(mt)}}else if(wt==="matrix"){var rt=(0,C.Z)(Ut[wt]||G,ae[wt]||G),ct=rt(ot);St[wt]=ct}else D(wt)&&B(ae[wt])?St[wt]=ae[wt]:(0,E.isFunction)(ae[wt])||(bt=(0,I.Z)(Ut[wt],ae[wt]),St[wt]=bt(ot));Rt.attr(St)}}function U(Rt,H,ot){var St=H.startTime,Ut=H.delay;if(ot<St+Ut||H._paused)return!1;var ae,bt=H.duration,wt=H.easing;if(ot=ot-St-H.delay,H.repeat)ae=ot%bt/bt,ae=O[wt](ae);else if(ae=ot/bt,ae<1)ae=O[wt](ae);else return H.onFrame?Rt.attr(H.onFrame(1)):Rt.attr(H.toAttrs),!0;if(H.onFrame){var ft=H.onFrame(ae);Rt.attr(ft)}else k(Rt,H,ae);return!1}var Y=function(){function Rt(H){this.animators=[],this.current=0,this.timer=null,this.canvas=H}return Rt.prototype.initTimer=function(){var H=this,ot=!1,St,Ut,ae;this.timer=A.HT(function(bt){if(H.current=bt,H.animators.length>0){for(var wt=H.animators.length-1;wt>=0;wt--){if(St=H.animators[wt],St.destroyed){H.removeAnimator(wt);continue}if(!St.isAnimatePaused()){Ut=St.get("animations");for(var ft=Ut.length-1;ft>=0;ft--)ae=Ut[ft],ot=U(St,ae,bt),ot&&(Ut.splice(ft,1),ot=!1,ae.callback&&ae.callback())}Ut.length===0&&H.removeAnimator(wt)}var ht=H.canvas.get("autoDraw");ht||H.canvas.draw()}})},Rt.prototype.addAnimator=function(H){this.animators.push(H)},Rt.prototype.removeAnimator=function(H){this.animators.splice(H,1)},Rt.prototype.isAnimating=function(){return!!this.animators.length},Rt.prototype.stop=function(){this.timer&&this.timer.stop()},Rt.prototype.stopAllAnimations=function(H){H===void 0&&(H=!0),this.animators.forEach(function(ot){ot.stopAnimate(H)}),this.animators=[],this.canvas.draw()},Rt.prototype.getTime=function(){return this.current},Rt}(),K=Y,J=x(84443),q=40,X=0,j=":",Q=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function lt(Rt,H){for(var ot in Rt)if(Rt.hasOwnProperty(ot)&&ot.indexOf(j+H)>=0)return!0;return!1}function z(Rt,H,ot){ot.name=H,ot.target=Rt,ot.currentTarget=Rt,ot.delegateTarget=Rt,Rt.emit(H,ot)}function b(Rt,H,ot){if(ot.bubbles){var St=void 0,Ut=!1;if(H==="mouseenter"?(St=ot.fromShape,Ut=!0):H==="mouseleave"&&(Ut=!0,St=ot.toShape),Rt.isCanvas()&&Ut)return;if(St&&(0,w.UY)(Rt,St)){ot.bubbles=!1;return}ot.name=H,ot.currentTarget=Rt,ot.delegateTarget=Rt,Rt.emit(H,ot)}}var v=function(){function Rt(H){var ot=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(St){var Ut=St.type;ot._triggerEvent(Ut,St)},this._onDocumentMove=function(St){var Ut=ot.canvas,ae=Ut.get("el");if(ae!==St.target&&(ot.dragging||ot.currentShape)){var bt=ot._getPointInfo(St);ot.dragging&&ot._emitEvent("drag",St,bt,ot.draggingShape)}},this._onDocumentMouseUp=function(St){var Ut=ot.canvas,ae=Ut.get("el");if(ae!==St.target&&ot.dragging){var bt=ot._getPointInfo(St);ot.draggingShape&&ot._emitEvent("drop",St,bt,null),ot._emitEvent("dragend",St,bt,ot.draggingShape),ot._afterDrag(ot.draggingShape,bt,St)}},this.canvas=H.canvas}return Rt.prototype.init=function(){this._bindEvents()},Rt.prototype._bindEvents=function(){var H=this,ot=this.canvas.get("el");(0,w.S6)(Q,function(St){ot.addEventListener(St,H._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},Rt.prototype._clearEvents=function(){var H=this,ot=this.canvas.get("el");(0,w.S6)(Q,function(St){ot.removeEventListener(St,H._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},Rt.prototype._getEventObj=function(H,ot,St,Ut,ae,bt){var wt=new J.Z(H,ot);return wt.fromShape=ae,wt.toShape=bt,wt.x=St.x,wt.y=St.y,wt.clientX=St.clientX,wt.clientY=St.clientY,wt.propagationPath.push(Ut),wt},Rt.prototype._getShape=function(H,ot){return this.canvas.getShape(H.x,H.y,ot)},Rt.prototype._getPointInfo=function(H){var ot=this.canvas,St=ot.getClientByEvent(H),Ut=ot.getPointByEvent(H);return{x:Ut.x,y:Ut.y,clientX:St.x,clientY:St.y}},Rt.prototype._triggerEvent=function(H,ot){var St=this._getPointInfo(ot),Ut=this._getShape(St,ot),ae=this["_on"+H],bt=!1;if(ae)ae.call(this,St,Ut,ot);else{var wt=this.currentShape;H==="mouseenter"||H==="dragenter"||H==="mouseover"?(this._emitEvent(H,ot,St,null,null,Ut),Ut&&this._emitEvent(H,ot,St,Ut,null,Ut),H==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",ot,St,null)):H==="mouseleave"||H==="dragleave"||H==="mouseout"?(bt=!0,wt&&this._emitEvent(H,ot,St,wt,wt,null),this._emitEvent(H,ot,St,null,wt,null),H==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",ot,St,null)):this._emitEvent(H,ot,St,Ut,null,null)}if(bt||(this.currentShape=Ut),Ut&&!Ut.get("destroyed")){var ft=this.canvas,ht=ft.get("el");ht.style.cursor=Ut.attr("cursor")||ft.get("cursor")}},Rt.prototype._onmousedown=function(H,ot,St){St.button===X&&(this.mousedownShape=ot,this.mousedownPoint=H,this.mousedownTimeStamp=St.timeStamp),this._emitEvent("mousedown",St,H,ot,null,null)},Rt.prototype._emitMouseoverEvents=function(H,ot,St,Ut){var ae=this.canvas.get("el");St!==Ut&&(St&&(this._emitEvent("mouseout",H,ot,St,St,Ut),this._emitEvent("mouseleave",H,ot,St,St,Ut),(!Ut||Ut.get("destroyed"))&&(ae.style.cursor=this.canvas.get("cursor"))),Ut&&(this._emitEvent("mouseover",H,ot,Ut,St,Ut),this._emitEvent("mouseenter",H,ot,Ut,St,Ut)))},Rt.prototype._emitDragoverEvents=function(H,ot,St,Ut,ae){Ut?(Ut!==St&&(St&&this._emitEvent("dragleave",H,ot,St,St,Ut),this._emitEvent("dragenter",H,ot,Ut,St,Ut)),ae||this._emitEvent("dragover",H,ot,Ut)):St&&this._emitEvent("dragleave",H,ot,St,St,Ut),ae&&this._emitEvent("dragover",H,ot,Ut)},Rt.prototype._afterDrag=function(H,ot,St){H&&(H.set("capture",!0),this.draggingShape=null),this.dragging=!1;var Ut=this._getShape(ot,St);Ut!==H&&this._emitMouseoverEvents(St,ot,H,Ut),this.currentShape=Ut},Rt.prototype._onmouseup=function(H,ot,St){if(St.button===X){var Ut=this.draggingShape;this.dragging?(Ut&&this._emitEvent("drop",St,H,ot),this._emitEvent("dragend",St,H,Ut),this._afterDrag(Ut,H,St)):(this._emitEvent("mouseup",St,H,ot),ot===this.mousedownShape&&this._emitEvent("click",St,H,ot),this.mousedownShape=null,this.mousedownPoint=null)}},Rt.prototype._ondragover=function(H,ot,St){St.preventDefault();var Ut=this.currentShape;this._emitDragoverEvents(St,H,Ut,ot,!0)},Rt.prototype._onmousemove=function(H,ot,St){var Ut=this.canvas,ae=this.currentShape,bt=this.draggingShape;if(this.dragging)bt&&this._emitDragoverEvents(St,H,ae,ot,!1),this._emitEvent("drag",St,H,bt);else{var wt=this.mousedownPoint;if(wt){var ft=this.mousedownShape,ht=St.timeStamp,Pt=ht-this.mousedownTimeStamp,Lt=wt.clientX-H.clientX,jt=wt.clientY-H.clientY,mt=Lt*Lt+jt*jt;Pt>120||mt>q?ft&&ft.get("draggable")?(bt=this.mousedownShape,bt.set("capture",!1),this.draggingShape=bt,this.dragging=!0,this._emitEvent("dragstart",St,H,bt),this.mousedownShape=null,this.mousedownPoint=null):!ft&&Ut.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",St,H,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(St,H,ae,ot),this._emitEvent("mousemove",St,H,ot)):(this._emitMouseoverEvents(St,H,ae,ot),this._emitEvent("mousemove",St,H,ot))}else this._emitMouseoverEvents(St,H,ae,ot),this._emitEvent("mousemove",St,H,ot)}},Rt.prototype._emitEvent=function(H,ot,St,Ut,ae,bt){var wt=this._getEventObj(H,ot,St,Ut,ae,bt);if(Ut){wt.shape=Ut,z(Ut,H,wt);for(var ft=Ut.getParent();ft;)ft.emitDelegation(H,wt),wt.propagationStopped||b(ft,H,wt),wt.propagationPath.push(ft),ft=ft.getParent()}else{var ht=this.canvas;z(ht,H,wt)}},Rt.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},Rt}(),$=v,et="px",Z=(0,P.qY)(),pt=Z&&Z.name==="firefox",_t=function(Rt){(0,y.__extends)(H,Rt);function H(ot){var St=Rt.call(this,ot)||this;return St.initContainer(),St.initDom(),St.initEvents(),St.initTimeline(),St}return H.prototype.getDefaultCfg=function(){var ot=Rt.prototype.getDefaultCfg.call(this);return ot.cursor="default",ot.supportCSSTransform=!1,ot},H.prototype.initContainer=function(){var ot=this.get("container");(0,w.HD)(ot)&&(ot=document.getElementById(ot),this.set("container",ot))},H.prototype.initDom=function(){var ot=this.createDom();this.set("el",ot);var St=this.get("container");St.appendChild(ot),this.setDOMSize(this.get("width"),this.get("height"))},H.prototype.initEvents=function(){var ot=new $({canvas:this});ot.init(),this.set("eventController",ot)},H.prototype.initTimeline=function(){var ot=new K(this);this.set("timeline",ot)},H.prototype.setDOMSize=function(ot,St){var Ut=this.get("el");w.jU&&(Ut.style.width=ot+et,Ut.style.height=St+et)},H.prototype.changeSize=function(ot,St){this.setDOMSize(ot,St),this.set("width",ot),this.set("height",St),this.onCanvasChange("changeSize")},H.prototype.getRenderer=function(){return this.get("renderer")},H.prototype.getCursor=function(){return this.get("cursor")},H.prototype.setCursor=function(ot){this.set("cursor",ot);var St=this.get("el");w.jU&&St&&(St.style.cursor=ot)},H.prototype.getPointByEvent=function(ot){var St=this.get("supportCSSTransform");if(St){if(pt&&!(0,w.kK)(ot.layerX)&&ot.layerX!==ot.offsetX)return{x:ot.layerX,y:ot.layerY};if(!(0,w.kK)(ot.offsetX))return{x:ot.offsetX,y:ot.offsetY}}var Ut=this.getClientByEvent(ot),ae=Ut.x,bt=Ut.y;return this.getPointByClient(ae,bt)},H.prototype.getClientByEvent=function(ot){var St=ot;return ot.touches&&(ot.type==="touchend"?St=ot.changedTouches[0]:St=ot.touches[0]),{x:St.clientX,y:St.clientY}},H.prototype.getPointByClient=function(ot,St){var Ut=this.get("el"),ae=Ut.getBoundingClientRect();return{x:ot-ae.left,y:St-ae.top}},H.prototype.getClientByPoint=function(ot,St){var Ut=this.get("el"),ae=Ut.getBoundingClientRect();return{x:ot+ae.left,y:St+ae.top}},H.prototype.draw=function(){},H.prototype.removeDom=function(){var ot=this.get("el");ot.parentNode.removeChild(ot)},H.prototype.clearEvents=function(){var ot=this.get("eventController");ot.destroy()},H.prototype.isCanvas=function(){return!0},H.prototype.getParent=function(){return null},H.prototype.destroy=function(){var ot=this.get("timeline");this.get("destroyed")||(this.clear(),ot&&ot.stop(),this.clearEvents(),this.removeDom(),Rt.prototype.destroy.call(this))},H}(N.Z),It=_t},84282:function(ut,L,x){"use strict";var y=x(50029),P=x(6802),N=x(6574),w=x(64753),E={},A="_INDEX";function O(G,k){if(G.set("canvas",k),G.isGroup()){var U=G.get("children");U.length&&U.forEach(function(Y){O(Y,k)})}}function I(G,k){if(G.set("timeline",k),G.isGroup()){var U=G.get("children");U.length&&U.forEach(function(Y){I(Y,k)})}}function C(G,k){var U=G.getChildren();return U.indexOf(k)>=0}function T(G,k,U){U===void 0&&(U=!0),U?k.destroy():(k.set("parent",null),k.set("canvas",null)),(0,w.As)(G.getChildren(),k)}function D(G){return function(k,U){var Y=G(k,U);return Y===0?k[A]-U[A]:Y}}var B=function(G){(0,y.__extends)(k,G);function k(){return G!==null&&G.apply(this,arguments)||this}return k.prototype.isCanvas=function(){return!1},k.prototype.getBBox=function(){var U=Infinity,Y=-Infinity,K=Infinity,J=-Infinity,q=[],X=[],j=this.getChildren().filter(function(lt){return lt.get("visible")&&(!lt.isGroup()||lt.isGroup()&&lt.getChildren().length>0)});j.length>0?((0,w.S6)(j,function(lt){var z=lt.getBBox();q.push(z.minX,z.maxX),X.push(z.minY,z.maxY)}),U=(0,P.min)(q),Y=(0,P.max)(q),K=(0,P.min)(X),J=(0,P.max)(X)):(U=0,Y=0,K=0,J=0);var Q={x:U,y:K,minX:U,minY:K,maxX:Y,maxY:J,width:Y-U,height:J-K};return Q},k.prototype.getCanvasBBox=function(){var U=Infinity,Y=-Infinity,K=Infinity,J=-Infinity,q=[],X=[],j=this.getChildren().filter(function(lt){return lt.get("visible")&&(!lt.isGroup()||lt.isGroup()&&lt.getChildren().length>0)});j.length>0?((0,w.S6)(j,function(lt){var z=lt.getCanvasBBox();q.push(z.minX,z.maxX),X.push(z.minY,z.maxY)}),U=(0,P.min)(q),Y=(0,P.max)(q),K=(0,P.min)(X),J=(0,P.max)(X)):(U=0,Y=0,K=0,J=0);var Q={x:U,y:K,minX:U,minY:K,maxX:Y,maxY:J,width:Y-U,height:J-K};return Q},k.prototype.getDefaultCfg=function(){var U=G.prototype.getDefaultCfg.call(this);return U.children=[],U},k.prototype.onAttrChange=function(U,Y,K){if(G.prototype.onAttrChange.call(this,U,Y,K),U==="matrix"){var J=this.getTotalMatrix();this._applyChildrenMarix(J)}},k.prototype.applyMatrix=function(U){var Y=this.getTotalMatrix();G.prototype.applyMatrix.call(this,U);var K=this.getTotalMatrix();K!==Y&&this._applyChildrenMarix(K)},k.prototype._applyChildrenMarix=function(U){var Y=this.getChildren();(0,w.S6)(Y,function(K){K.applyMatrix(U)})},k.prototype.addShape=function(){for(var U=[],Y=0;Y<arguments.length;Y++)U[Y]=arguments[Y];var K=U[0],J=U[1];(0,w.Kn)(K)?J=K:J.type=K;var q=E[J.type];q||(q=(0,w.jC)(J.type),E[J.type]=q);var X=this.getShapeBase(),j=new X[q](J);return this.add(j),j},k.prototype.addGroup=function(){for(var U=[],Y=0;Y<arguments.length;Y++)U[Y]=arguments[Y];var K=U[0],J=U[1],q;if((0,w.mf)(K))J?q=new K(J):q=new K({parent:this});else{var X=K||{},j=this.getGroupBase();q=new j(X)}return this.add(q),q},k.prototype.getCanvas=function(){var U;return this.isCanvas()?U=this:U=this.get("canvas"),U},k.prototype.getShape=function(U,Y,K){if(!(0,w.pP)(this))return null;var J=this.getChildren(),q;if(this.isCanvas())q=this._findShape(J,U,Y,K);else{var X=[U,Y,1];X=this.invertFromMatrix(X),this.isClipped(X[0],X[1])||(q=this._findShape(J,X[0],X[1],K))}return q},k.prototype._findShape=function(U,Y,K,J){for(var q=null,X=U.length-1;X>=0;X--){var j=U[X];if((0,w.pP)(j)&&(j.isGroup()?q=j.getShape(Y,K,J):j.isHit(Y,K)&&(q=j)),q)break}return q},k.prototype.add=function(U){var Y=this.getCanvas(),K=this.getChildren(),J=this.get("timeline"),q=U.getParent();q&&T(q,U,!1),U.set("parent",this),Y&&O(U,Y),J&&I(U,J),K.push(U),U.onCanvasChange("add"),this._applyElementMatrix(U)},k.prototype._applyElementMatrix=function(U){var Y=this.getTotalMatrix();Y&&U.applyMatrix(Y)},k.prototype.getChildren=function(){return this.get("children")},k.prototype.sort=function(){var U=this.getChildren();(0,w.S6)(U,function(Y,K){return Y[A]=K,Y}),U.sort(D(function(Y,K){return Y.get("zIndex")-K.get("zIndex")})),this.onCanvasChange("sort")},k.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var U=this.getChildren(),Y=U.length-1;Y>=0;Y--)U[Y].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},k.prototype.destroy=function(){this.get("destroyed")||(this.clear(),G.prototype.destroy.call(this))},k.prototype.getFirst=function(){return this.getChildByIndex(0)},k.prototype.getLast=function(){var U=this.getChildren();return this.getChildByIndex(U.length-1)},k.prototype.getChildByIndex=function(U){var Y=this.getChildren();return Y[U]},k.prototype.getCount=function(){var U=this.getChildren();return U.length},k.prototype.contain=function(U){var Y=this.getChildren();return Y.indexOf(U)>-1},k.prototype.removeChild=function(U,Y){Y===void 0&&(Y=!0),this.contain(U)&&U.remove(Y)},k.prototype.findAll=function(U){var Y=[],K=this.getChildren();return(0,w.S6)(K,function(J){U(J)&&Y.push(J),J.isGroup()&&(Y=Y.concat(J.findAll(U)))}),Y},k.prototype.find=function(U){var Y=null,K=this.getChildren();return(0,w.S6)(K,function(J){if(U(J)?Y=J:J.isGroup()&&(Y=J.find(U)),Y)return!1}),Y},k.prototype.findById=function(U){return this.find(function(Y){return Y.get("id")===U})},k.prototype.findByClassName=function(U){return this.find(function(Y){return Y.get("className")===U})},k.prototype.findAllByName=function(U){return this.findAll(function(Y){return Y.get("name")===U})},k}(N.Z);L.Z=B},6574:function(ut,L,x){"use strict";var y=x(50029),P=x(6802),N=x(27881),w=x(64753),E=x(91760),A=x(32382),O=N.vs,I="matrix",C=["zIndex","capture","visible","type"],T=["repeat"],D=":",B="*";function G(J){for(var q=[],X=0;X<J.length;X++)(0,P.isArray)(J[X])?q.push([].concat(J[X])):q.push(J[X]);return q}function k(J,q){var X={},j=q.attrs;for(var Q in J)X[Q]=j[Q];return X}function U(J,q){var X={},j=q.attr();return(0,P.each)(J,function(Q,lt){T.indexOf(lt)===-1&&!(0,P.isEqual)(j[lt],Q)&&(X[lt]=Q)}),X}function Y(J,q){if(q.onFrame)return J;var X=q.startTime,j=q.delay,Q=q.duration,lt=Object.prototype.hasOwnProperty;return(0,P.each)(J,function(z){X+j<z.startTime+z.delay+z.duration&&Q>z.delay&&(0,P.each)(q.toAttrs,function(b,v){lt.call(z.toAttrs,v)&&(delete z.toAttrs[v],delete z.fromAttrs[v])})}),J}var K=function(J){(0,y.__extends)(q,J);function q(X){var j=J.call(this,X)||this;j.attrs={};var Q=j.getDefaultAttrs();return(0,P.mix)(Q,X.attrs),j.attrs=Q,j.initAttrs(Q),j.initAnimate(),j}return q.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},q.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},q.prototype.onCanvasChange=function(X){},q.prototype.initAttrs=function(X){},q.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},q.prototype.isGroup=function(){return!1},q.prototype.getParent=function(){return this.get("parent")},q.prototype.getCanvas=function(){return this.get("canvas")},q.prototype.attr=function(){for(var X,j=[],Q=0;Q<arguments.length;Q++)j[Q]=arguments[Q];var lt=j[0],z=j[1];if(!lt)return this.attrs;if((0,P.isObject)(lt)){for(var b in lt)this.setAttr(b,lt[b]);return this.afterAttrsChange(lt),this}return j.length===2?(this.setAttr(lt,z),this.afterAttrsChange((X={},X[lt]=z,X)),this):this.attrs[lt]},q.prototype.isClipped=function(X,j){var Q=this.getClip();return Q&&!Q.isHit(X,j)},q.prototype.setAttr=function(X,j){var Q=this.attrs[X];Q!==j&&(this.attrs[X]=j,this.onAttrChange(X,j,Q))},q.prototype.onAttrChange=function(X,j,Q){X==="matrix"&&this.set("totalMatrix",null)},q.prototype.afterAttrsChange=function(X){if(this.cfg.isClipShape){var j=this.cfg.applyTo;j&&j.onCanvasChange("clip")}else this.onCanvasChange("attr")},q.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},q.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},q.prototype.setZIndex=function(X){this.set("zIndex",X);var j=this.getParent();return j&&j.sort(),this},q.prototype.toFront=function(){var X=this.getParent();if(!!X){var j=X.getChildren(),Q=this.get("el"),lt=j.indexOf(this);j.splice(lt,1),j.push(this),this.onCanvasChange("zIndex")}},q.prototype.toBack=function(){var X=this.getParent();if(!!X){var j=X.getChildren(),Q=this.get("el"),lt=j.indexOf(this);j.splice(lt,1),j.unshift(this),this.onCanvasChange("zIndex")}},q.prototype.remove=function(X){X===void 0&&(X=!0);var j=this.getParent();j?((0,w.As)(j.getChildren(),this),j.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),X&&this.destroy()},q.prototype.resetMatrix=function(){this.attr(I,this.getDefaultMatrix()),this.onCanvasChange("matrix")},q.prototype.getMatrix=function(){return this.attr(I)},q.prototype.setMatrix=function(X){this.attr(I,X),this.onCanvasChange("matrix")},q.prototype.getTotalMatrix=function(){var X=this.cfg.totalMatrix;if(!X){var j=this.attr("matrix"),Q=this.cfg.parentMatrix;Q&&j?X=(0,E.xq)(Q,j):X=j||Q,this.set("totalMatrix",X)}return X},q.prototype.applyMatrix=function(X){var j=this.attr("matrix"),Q=null;X&&j?Q=(0,E.xq)(X,j):Q=j||X,this.set("totalMatrix",Q),this.set("parentMatrix",X)},q.prototype.getDefaultMatrix=function(){return null},q.prototype.applyToMatrix=function(X){var j=this.attr("matrix");return j?(0,E.rG)(j,X):X},q.prototype.invertFromMatrix=function(X){var j=this.attr("matrix");if(j){var Q=(0,E.U_)(j);if(Q)return(0,E.rG)(Q,X)}return X},q.prototype.setClip=function(X){var j=this.getCanvas(),Q=null;if(X){var lt=this.getShapeBase(),z=(0,P.upperFirst)(X.type),b=lt[z];b&&(Q=new b({type:X.type,isClipShape:!0,applyTo:this,attrs:X.attrs,canvas:j}))}return this.set("clipShape",Q),this.onCanvasChange("clip"),Q},q.prototype.getClip=function(){var X=this.cfg.clipShape;return X||null},q.prototype.clone=function(){var X=this,j=this.attrs,Q={};(0,P.each)(j,function(b,v){(0,P.isArray)(j[v])?Q[v]=G(j[v]):Q[v]=j[v]});var lt=this.constructor,z=new lt({attrs:Q});return(0,P.each)(C,function(b){z.set(b,X.get(b))}),z},q.prototype.destroy=function(){var X=this.destroyed;X||(this.attrs={},J.prototype.destroy.call(this))},q.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},q.prototype.animate=function(){for(var X=[],j=0;j<arguments.length;j++)X[j]=arguments[j];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var Q=this.get("timeline");Q||(Q=this.get("canvas").get("timeline"),this.set("timeline",Q));var lt=this.get("animations")||[];Q.timer||Q.initTimer();var z=X[0],b=X[1],v=X[2],$=v===void 0?"easeLinear":v,et=X[3],Z=et===void 0?P.noop:et,pt=X[4],_t=pt===void 0?0:pt,It,Rt,H,ot,St;(0,P.isFunction)(z)?(It=z,z={}):(0,P.isObject)(z)&&z.onFrame&&(It=z.onFrame,Rt=z.repeat),(0,P.isObject)(b)?(St=b,b=St.duration,$=St.easing||"easeLinear",_t=St.delay||0,Rt=St.repeat||Rt||!1,Z=St.callback||P.noop,H=St.pauseCallback||P.noop,ot=St.resumeCallback||P.noop):((0,P.isNumber)(Z)&&(_t=Z,Z=null),(0,P.isFunction)($)?(Z=$,$="easeLinear"):$=$||"easeLinear");var Ut=U(z,this),ae={fromAttrs:k(Ut,this),toAttrs:Ut,duration:b,easing:$,repeat:Rt,callback:Z,pauseCallback:H,resumeCallback:ot,delay:_t,startTime:Q.getTime(),id:(0,P.uniqueId)(),onFrame:It,pathFormatted:!1};lt.length>0?lt=Y(lt,ae):Q.addAnimator(this),lt.push(ae),this.set("animations",lt),this.set("_pause",{isPaused:!1})}},q.prototype.stopAnimate=function(X){var j=this;X===void 0&&(X=!0);var Q=this.get("animations");(0,P.each)(Q,function(lt){X&&(lt.onFrame?j.attr(lt.onFrame(1)):j.attr(lt.toAttrs)),lt.callback&&lt.callback()}),this.set("animating",!1),this.set("animations",[])},q.prototype.pauseAnimate=function(){var X=this.get("timeline"),j=this.get("animations"),Q=X.getTime();return(0,P.each)(j,function(lt){lt._paused=!0,lt._pauseTime=Q,lt.pauseCallback&&lt.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:Q}),this},q.prototype.resumeAnimate=function(){var X=this.get("timeline"),j=X.getTime(),Q=this.get("animations"),lt=this.get("_pause").pauseTime;return(0,P.each)(Q,function(z){z.startTime=z.startTime+(j-lt),z._paused=!1,z._pauseTime=null,z.resumeCallback&&z.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",Q),this},q.prototype.emitDelegation=function(X,j){var Q=this,lt=j.propagationPath,z=this.getEvents(),b;X==="mouseenter"?b=j.fromShape:X==="mouseleave"&&(b=j.toShape);for(var v=function(pt){var _t=lt[pt],It=_t.get("name");if(It){if((_t.isGroup()||_t.isCanvas&&_t.isCanvas())&&b&&(0,w.UY)(_t,b))return"break";(0,P.isArray)(It)?(0,P.each)(It,function(Rt){Q.emitDelegateEvent(_t,Rt,j)}):$.emitDelegateEvent(_t,It,j)}},$=this,et=0;et<lt.length;et++){var Z=v(et);if(Z==="break")break}},q.prototype.emitDelegateEvent=function(X,j,Q){var lt=this.getEvents(),z=j+D+Q.type;(lt[z]||lt[B])&&(Q.name=z,Q.currentTarget=X,Q.delegateTarget=this,Q.delegateObject=X.get("delegateObject"),this.emit(z,Q))},q.prototype.translate=function(X,j){X===void 0&&(X=0),j===void 0&&(j=0);var Q=this.getMatrix(),lt=O(Q,[["t",X,j]]);return this.setMatrix(lt),this},q.prototype.move=function(X,j){var Q=this.attr("x")||0,lt=this.attr("y")||0;return this.translate(X-Q,j-lt),this},q.prototype.moveTo=function(X,j){return this.move(X,j)},q.prototype.scale=function(X,j){var Q=this.getMatrix(),lt=O(Q,[["s",X,j||X]]);return this.setMatrix(lt),this},q.prototype.rotate=function(X){var j=this.getMatrix(),Q=O(j,[["r",X]]);return this.setMatrix(Q),this},q.prototype.rotateAtStart=function(X){var j=this.attr(),Q=j.x,lt=j.y,z=this.getMatrix(),b=O(z,[["t",-Q,-lt],["r",X],["t",Q,lt]]);return this.setMatrix(b),this},q.prototype.rotateAtPoint=function(X,j,Q){var lt=this.getMatrix(),z=O(lt,[["t",-X,-j],["r",Q],["t",X,j]]);return this.setMatrix(z),this},q}(A.Z);L.Z=K},64758:function(ut,L,x){"use strict";var y=x(50029),P=x(84282),N=function(w){(0,y.__extends)(E,w);function E(){return w!==null&&w.apply(this,arguments)||this}return E.prototype.isGroup=function(){return!0},E.prototype.isEntityGroup=function(){return!1},E.prototype.clone=function(){for(var A=w.prototype.clone.call(this),O=this.getChildren(),I=0;I<O.length;I++){var C=O[I];A.add(C.clone())}return A},E}(P.Z);L.Z=N},72818:function(ut,L,x){"use strict";var y=x(50029),P=x(6574),N=x(91760),w=function(E){(0,y.__extends)(A,E);function A(O){return E.call(this,O)||this}return A.prototype._isInBBox=function(O,I){var C=this.getBBox();return C.minX<=O&&C.maxX>=O&&C.minY<=I&&C.maxY>=I},A.prototype.afterAttrsChange=function(O){E.prototype.afterAttrsChange.call(this,O),this.clearCacheBBox()},A.prototype.getBBox=function(){var O=this.cfg.bbox;return O||(O=this.calculateBBox(),this.set("bbox",O)),O},A.prototype.getCanvasBBox=function(){var O=this.cfg.canvasBBox;return O||(O=this.calculateCanvasBBox(),this.set("canvasBBox",O)),O},A.prototype.applyMatrix=function(O){E.prototype.applyMatrix.call(this,O),this.set("canvasBBox",null)},A.prototype.calculateCanvasBBox=function(){var O=this.getBBox(),I=this.getTotalMatrix(),C=O.minX,T=O.minY,D=O.maxX,B=O.maxY;if(I){var G=(0,N.rG)(I,[O.minX,O.minY]),k=(0,N.rG)(I,[O.maxX,O.minY]),U=(0,N.rG)(I,[O.minX,O.maxY]),Y=(0,N.rG)(I,[O.maxX,O.maxY]);C=Math.min(G[0],k[0],U[0],Y[0]),D=Math.max(G[0],k[0],U[0],Y[0]),T=Math.min(G[1],k[1],U[1],Y[1]),B=Math.max(G[1],k[1],U[1],Y[1])}var K=this.attrs;if(K.shadowColor){var J=K.shadowBlur,q=J===void 0?0:J,X=K.shadowOffsetX,j=X===void 0?0:X,Q=K.shadowOffsetY,lt=Q===void 0?0:Q,z=C-q+j,b=D+q+j,v=T-q+lt,$=B+q+lt;C=Math.min(C,z),D=Math.max(D,b),T=Math.min(T,v),B=Math.max(B,$)}return{x:C,y:T,minX:C,minY:T,maxX:D,maxY:B,width:D-C,height:B-T}},A.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},A.prototype.isClipShape=function(){return this.get("isClipShape")},A.prototype.isInShape=function(O,I){return!1},A.prototype.isOnlyHitBox=function(){return!1},A.prototype.isHit=function(O,I){var C=this.get("startArrowShape"),T=this.get("endArrowShape"),D=[O,I,1];D=this.invertFromMatrix(D);var B=D[0],G=D[1],k=this._isInBBox(B,G);return this.isOnlyHitBox()?k:!!(k&&!this.isClipped(B,G)&&(this.isInShape(B,G)||C&&C.isHit(B,G)||T&&T.isHit(B,G)))},A}(P.Z);L.Z=w},98548:function(ut,L,x){"use strict";x.d(L,{b:function(){return N}});var y=new Map;function P(X,j){y.set(X,j)}function N(X){return y.get(X)}function w(X){var j=X.attr(),Q=j.x,lt=j.y,z=j.width,b=j.height;return{x:Q,y:lt,width:z,height:b}}function E(X){var j=X.attr(),Q=j.x,lt=j.y,z=j.r;return{x:Q-z,y:lt-z,width:z*2,height:z*2}}var A=x(51824);function O(X,j){return!X||!j?X||j:{minX:Math.min(X.minX,j.minX),minY:Math.min(X.minY,j.minY),maxX:Math.max(X.maxX,j.maxX),maxY:Math.max(X.maxY,j.maxY)}}function I(X,j){var Q=X.get("startArrowShape"),lt=X.get("endArrowShape"),z=null,b=null;return Q&&(z=Q.getCanvasBBox(),j=O(j,z)),lt&&(b=lt.getCanvasBBox(),j=O(j,b)),j}function C(X){for(var j=X.attr(),Q=j.points,lt=[],z=[],b=0;b<Q.length;b++){var v=Q[b];lt.push(v[0]),z.push(v[1])}var $=A.Zr.getBBoxByArray(lt,z),et=$.x,Z=$.y,pt=$.width,_t=$.height,It={minX:et,minY:Z,maxX:et+pt,maxY:Z+_t};return It=I(X,It),{x:It.minX,y:It.minY,width:It.maxX-It.minX,height:It.maxY-It.minY}}function T(X){for(var j=X.attr(),Q=j.points,lt=[],z=[],b=0;b<Q.length;b++){var v=Q[b];lt.push(v[0]),z.push(v[1])}return A.Zr.getBBoxByArray(lt,z)}var D=x(83421);function B(X){var j=X.attr(),Q=j.x,lt=j.y,z=j.text,b=j.fontSize,v=j.lineHeight,$=j.font;$||($=(0,D.$O)(j));var et=(0,D.mY)(z,$),Z;if(!et)Z={x:Q,y:lt,width:0,height:0};else{var pt=j.textAlign,_t=j.textBaseline,It=(0,D.FE)(z,b,v),Rt={x:Q,y:lt-It};pt&&(pt==="end"||pt==="right"?Rt.x-=et:pt==="center"&&(Rt.x-=et/2)),_t&&(_t==="top"?Rt.y+=It:_t==="middle"&&(Rt.y+=It/2)),Z={x:Rt.x,y:Rt.y,width:et,height:It}}return Z}var G=x(99291),k=x(6802);function U(X,j){for(var Q=[],lt=[],z=[],b=0;b<X.length;b++){var v=X[b],$=v.currentPoint,et=v.params,Z=v.prePoint,pt=void 0;switch(v.command){case"Q":pt=A.lD.box(Z[0],Z[1],et[1],et[2],et[3],et[4]);break;case"C":pt=A.Ll.box(Z[0],Z[1],et[1],et[2],et[3],et[4],et[5],et[6]);break;case"A":var _t=v.arcParams;pt=A.wN.box(_t.cx,_t.cy,_t.rx,_t.ry,_t.xRotation,_t.startAngle,_t.endAngle);break;default:Q.push($[0]),lt.push($[1]);break}pt&&(v.box=pt,Q.push(pt.x,pt.x+pt.width),lt.push(pt.y,pt.y+pt.height)),j&&(v.command==="L"||v.command==="M")&&v.prePoint&&v.nextPoint&&z.push(v)}Q=Q.filter(function(Ut){return!Number.isNaN(Ut)}),lt=lt.filter(function(Ut){return!Number.isNaN(Ut)});var It=(0,k.min)(Q),Rt=(0,k.min)(lt),H=(0,k.max)(Q),ot=(0,k.max)(lt);if(z.length===0)return{x:It,y:Rt,width:H-It,height:ot-Rt};for(var b=0;b<z.length;b++){var v=z[b],$=v.currentPoint,St=void 0;$[0]===It?(St=Y(v,j),It=It-St.xExtra):$[0]===H&&(St=Y(v,j),H=H+St.xExtra),$[1]===Rt?(St=Y(v,j),Rt=Rt-St.yExtra):$[1]===ot&&(St=Y(v,j),ot=ot+St.yExtra)}return{x:It,y:Rt,width:H-It,height:ot-Rt}}function Y(X,j){var Q=X.prePoint,lt=X.currentPoint,z=X.nextPoint,b=Math.pow(lt[0]-Q[0],2)+Math.pow(lt[1]-Q[1],2),v=Math.pow(lt[0]-z[0],2)+Math.pow(lt[1]-z[1],2),$=Math.pow(Q[0]-z[0],2)+Math.pow(Q[1]-z[1],2),et=Math.acos((b+v-$)/(2*Math.sqrt(b)*Math.sqrt(v)));if(!et||Math.sin(et)===0||(0,k.isNumberEqual)(et,0))return{xExtra:0,yExtra:0};var Z=Math.abs(Math.atan2(z[1]-lt[1],z[0]-lt[0])),pt=Math.abs(Math.atan2(z[0]-lt[0],z[1]-lt[1]));Z=Z>Math.PI/2?Math.PI-Z:Z,pt=pt>Math.PI/2?Math.PI-pt:pt;var _t={xExtra:Math.cos(et/2-Z)*(j/2*(1/Math.sin(et/2)))-j/2||0,yExtra:Math.cos(pt-et/2)*(j/2*(1/Math.sin(et/2)))-j/2||0};return _t}function K(X){var j=X.attr(),Q=j.path,lt=j.stroke,z=lt?j.lineWidth:0,b=X.get("segments")||(0,G.zx)(Q),v=U(b,z),$=v.x,et=v.y,Z=v.width,pt=v.height,_t={minX:$,minY:et,maxX:$+Z,maxY:et+pt};return _t=I(X,_t),{x:_t.minX,y:_t.minY,width:_t.maxX-_t.minX,height:_t.maxY-_t.minY}}function J(X){var j=X.attr(),Q=j.x1,lt=j.y1,z=j.x2,b=j.y2,v=Math.min(Q,z),$=Math.max(Q,z),et=Math.min(lt,b),Z=Math.max(lt,b),pt={minX:v,maxX:$,minY:et,maxY:Z};return pt=I(X,pt),{x:pt.minX,y:pt.minY,width:pt.maxX-pt.minX,height:pt.maxY-pt.minY}}function q(X){var j=X.attr(),Q=j.x,lt=j.y,z=j.rx,b=j.ry;return{x:Q-z,y:lt-b,width:z*2,height:b*2}}P("rect",w),P("image",w),P("circle",E),P("marker",E),P("polyline",C),P("polygon",T),P("text",B),P("path",K),P("line",J),P("ellipse",q)},84443:function(ut,L){"use strict";var x=function(){function y(P,N){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=P,this.name=P,this.originalEvent=N,this.timeStamp=N.timeStamp}return y.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},y.prototype.stopPropagation=function(){this.propagationStopped=!0},y.prototype.toString=function(){var P=this.type;return"[Event (type="+P+")]"},y.prototype.save=function(){},y.prototype.restore=function(){},y}();L.Z=x},26691:function(ut,L,x){"use strict";x.r(L),x.d(L,{Event:function(){return I.Z},Base:function(){return C.Z},AbstractCanvas:function(){return T.Z},AbstractGroup:function(){return D.Z},AbstractShape:function(){return B.Z},PathUtil:function(){return y},getBBoxMethod:function(){return G.b},getTextHeight:function(){return k.FE},assembleFont:function(){return k.$O},isAllowCapture:function(){return U.pP},multiplyVec2:function(){return Y.rG},invert:function(){return Y.U_},getOffScreenContext:function(){return K.L},version:function(){return J}});var y=x(41489),P=x(57272),N=x.n(P),w={};for(var E in P)["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","version"].indexOf(E)<0&&(w[E]=function(q){return P[q]}.bind(0,E));x.d(L,w);var A=x(32512),O=x.n(A),w={};for(var E in A)["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","version"].indexOf(E)<0&&(w[E]=function(X){return A[X]}.bind(0,E));x.d(L,w);var I=x(84443),C=x(32382),T=x(23051),D=x(64758),B=x(72818),G=x(98548),k=x(83421),U=x(64753),Y=x(91760),K=x(38479),J="0.5.6"},32512:function(){},57272:function(){},91760:function(ut,L,x){"use strict";x.d(L,{xq:function(){return y},rG:function(){return P},U_:function(){return N}});function y(w,E){var A=[],O=w[0],I=w[1],C=w[2],T=w[3],D=w[4],B=w[5],G=w[6],k=w[7],U=w[8],Y=E[0],K=E[1],J=E[2],q=E[3],X=E[4],j=E[5],Q=E[6],lt=E[7],z=E[8];return A[0]=Y*O+K*T+J*G,A[1]=Y*I+K*D+J*k,A[2]=Y*C+K*B+J*U,A[3]=q*O+X*T+j*G,A[4]=q*I+X*D+j*k,A[5]=q*C+X*B+j*U,A[6]=Q*O+lt*T+z*G,A[7]=Q*I+lt*D+z*k,A[8]=Q*C+lt*B+z*U,A}function P(w,E){var A=[],O=E[0],I=E[1];return A[0]=w[0]*O+w[3]*I+w[6],A[1]=w[1]*O+w[4]*I+w[7],A}function N(w){var E=[],A=w[0],O=w[1],I=w[2],C=w[3],T=w[4],D=w[5],B=w[6],G=w[7],k=w[8],U=k*T-D*G,Y=-k*C+D*B,K=G*C-T*B,J=A*U+O*Y+I*K;return J?(J=1/J,E[0]=U*J,E[1]=(-k*O+I*G)*J,E[2]=(D*O-I*T)*J,E[3]=Y*J,E[4]=(k*A-I*B)*J,E[5]=(-D*A+I*C)*J,E[6]=K*J,E[7]=(-G*A+O*B)*J,E[8]=(T*A-O*C)*J,E):null}},38479:function(ut,L,x){"use strict";x.d(L,{L:function(){return P}});var y=null;function P(){if(!y){var N=document.createElement("canvas");N.width=1,N.height=1,y=N.getContext("2d")}return y}},41489:function(ut,L,x){"use strict";x.r(L),x.d(L,{catmullRomToBezier:function(){return A},fillPath:function(){return _t},fillPathByDiff:function(){return ot},formatPath:function(){return ae},intersection:function(){return $},parsePathArray:function(){return k},parsePathString:function(){return E},pathToAbsolute:function(){return I},pathToCurve:function(){return B},rectPath:function(){return X}});var y=x(6802),P=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,N=new RegExp("([a-z])["+P+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+P+"]*,?["+P+"]*)+)","ig"),w=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+P+"]*,?["+P+"]*","ig"),E=function(bt){if(!bt)return null;if((0,y.isArray)(bt))return bt;var wt={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},ft=[];return String(bt).replace(N,function(ht,Pt,Lt){var jt=[],mt=Pt.toLowerCase();if(Lt.replace(w,function(W,rt){rt&&jt.push(+rt)}),mt==="m"&&jt.length>2&&(ft.push([Pt].concat(jt.splice(0,2))),mt="l",Pt=Pt==="m"?"l":"L"),mt==="o"&&jt.length===1&&ft.push([Pt,jt[0]]),mt==="r")ft.push([Pt].concat(jt));else for(;jt.length>=wt[mt]&&(ft.push([Pt].concat(jt.splice(0,wt[mt]))),!!wt[mt]););return bt}),ft},A=function(bt,wt){for(var ft=[],ht=0,Pt=bt.length;Pt-2*!wt>ht;ht+=2){var Lt=[{x:+bt[ht-2],y:+bt[ht-1]},{x:+bt[ht],y:+bt[ht+1]},{x:+bt[ht+2],y:+bt[ht+3]},{x:+bt[ht+4],y:+bt[ht+5]}];wt?ht?Pt-4===ht?Lt[3]={x:+bt[0],y:+bt[1]}:Pt-2===ht&&(Lt[2]={x:+bt[0],y:+bt[1]},Lt[3]={x:+bt[2],y:+bt[3]}):Lt[0]={x:+bt[Pt-2],y:+bt[Pt-1]}:Pt-4===ht?Lt[3]=Lt[2]:ht||(Lt[0]={x:+bt[ht],y:+bt[ht+1]}),ft.push(["C",(-Lt[0].x+6*Lt[1].x+Lt[2].x)/6,(-Lt[0].y+6*Lt[1].y+Lt[2].y)/6,(Lt[1].x+6*Lt[2].x-Lt[3].x)/6,(Lt[1].y+6*Lt[2].y-Lt[3].y)/6,Lt[2].x,Lt[2].y])}return ft},O=function(bt,wt,ft,ht,Pt){var Lt=[];if(Pt===null&&ht===null&&(ht=ft),bt=+bt,wt=+wt,ft=+ft,ht=+ht,Pt!==null){var jt=Math.PI/180,mt=bt+ft*Math.cos(-ht*jt),W=bt+ft*Math.cos(-Pt*jt),rt=wt+ft*Math.sin(-ht*jt),ct=wt+ft*Math.sin(-Pt*jt);Lt=[["M",mt,rt],["A",ft,ft,0,+(Pt-ht>180),0,W,ct]]}else Lt=[["M",bt,wt],["m",0,-ht],["a",ft,ht,0,1,1,0,2*ht],["a",ft,ht,0,1,1,0,-2*ht],["z"]];return Lt},I=function(bt){if(bt=E(bt),!bt||!bt.length)return[["M",0,0]];var wt=[],ft=0,ht=0,Pt=0,Lt=0,jt=0,mt,W;bt[0][0]==="M"&&(ft=+bt[0][1],ht=+bt[0][2],Pt=ft,Lt=ht,jt++,wt[0]=["M",ft,ht]);for(var rt=bt.length===3&&bt[0][0]==="M"&&bt[1][0].toUpperCase()==="R"&&bt[2][0].toUpperCase()==="Z",ct=void 0,At=void 0,tt=jt,dt=bt.length;tt<dt;tt++){if(wt.push(ct=[]),At=bt[tt],mt=At[0],mt!==mt.toUpperCase())switch(ct[0]=mt.toUpperCase(),ct[0]){case"A":ct[1]=At[1],ct[2]=At[2],ct[3]=At[3],ct[4]=At[4],ct[5]=At[5],ct[6]=+At[6]+ft,ct[7]=+At[7]+ht;break;case"V":ct[1]=+At[1]+ht;break;case"H":ct[1]=+At[1]+ft;break;case"R":W=[ft,ht].concat(At.slice(1));for(var Et=2,Ot=W.length;Et<Ot;Et++)W[Et]=+W[Et]+ft,W[++Et]=+W[Et]+ht;wt.pop(),wt=wt.concat(A(W,rt));break;case"O":wt.pop(),W=O(ft,ht,At[1],At[2]),W.push(W[0]),wt=wt.concat(W);break;case"U":wt.pop(),wt=wt.concat(O(ft,ht,At[1],At[2],At[3])),ct=["U"].concat(wt[wt.length-1].slice(-2));break;case"M":Pt=+At[1]+ft,Lt=+At[2]+ht;break;default:for(var Et=1,Ot=At.length;Et<Ot;Et++)ct[Et]=+At[Et]+(Et%2?ft:ht)}else if(mt==="R")W=[ft,ht].concat(At.slice(1)),wt.pop(),wt=wt.concat(A(W,rt)),ct=["R"].concat(At.slice(-2));else if(mt==="O")wt.pop(),W=O(ft,ht,At[1],At[2]),W.push(W[0]),wt=wt.concat(W);else if(mt==="U")wt.pop(),wt=wt.concat(O(ft,ht,At[1],At[2],At[3])),ct=["U"].concat(wt[wt.length-1].slice(-2));else for(var $t=0,st=At.length;$t<st;$t++)ct[$t]=At[$t];if(mt=mt.toUpperCase(),mt!=="O")switch(ct[0]){case"Z":ft=+Pt,ht=+Lt;break;case"H":ft=ct[1];break;case"V":ht=ct[1];break;case"M":Pt=ct[ct.length-2],Lt=ct[ct.length-1];break;default:ft=ct[ct.length-2],ht=ct[ct.length-1]}}return wt},C=function(bt,wt,ft,ht){return[bt,wt,ft,ht,ft,ht]},T=function(bt,wt,ft,ht,Pt,Lt){var jt=1/3,mt=2/3;return[jt*bt+mt*ft,jt*wt+mt*ht,jt*Pt+mt*ft,jt*Lt+mt*ht,Pt,Lt]},D=function(bt,wt,ft,ht,Pt,Lt,jt,mt,W,rt){ft===ht&&(ft+=1);var ct=Math.PI*120/180,At=Math.PI/180*(+Pt||0),tt=[],dt,Et,Ot,$t,st,Qt=function(vn,$r,En){var In=vn*Math.cos(En)-$r*Math.sin(En),On=vn*Math.sin(En)+$r*Math.cos(En);return{x:In,y:On}};if(rt)Et=rt[0],Ot=rt[1],$t=rt[2],st=rt[3];else{dt=Qt(bt,wt,-At),bt=dt.x,wt=dt.y,dt=Qt(mt,W,-At),mt=dt.x,W=dt.y,bt===mt&&wt===W&&(mt+=1,W+=1);var vt=(bt-mt)/2,yt=(wt-W)/2,zt=vt*vt/(ft*ft)+yt*yt/(ht*ht);zt>1&&(zt=Math.sqrt(zt),ft=zt*ft,ht=zt*ht);var oe=ft*ft,Ie=ht*ht,Gt=(Lt===jt?-1:1)*Math.sqrt(Math.abs((oe*Ie-oe*yt*yt-Ie*vt*vt)/(oe*yt*yt+Ie*vt*vt)));$t=Gt*ft*yt/ht+(bt+mt)/2,st=Gt*-ht*vt/ft+(wt+W)/2,Et=Math.asin(((wt-st)/ht).toFixed(9)),Ot=Math.asin(((W-st)/ht).toFixed(9)),Et=bt<$t?Math.PI-Et:Et,Ot=mt<$t?Math.PI-Ot:Ot,Et<0&&(Et=Math.PI*2+Et),Ot<0&&(Ot=Math.PI*2+Ot),jt&&Et>Ot&&(Et=Et-Math.PI*2),!jt&&Ot>Et&&(Ot=Ot-Math.PI*2)}var Wt=Ot-Et;if(Math.abs(Wt)>ct){var Ht=Ot,de=mt,Ge=W;Ot=Et+ct*(jt&&Ot>Et?1:-1),mt=$t+ft*Math.cos(Ot),W=st+ht*Math.sin(Ot),tt=D(mt,W,ft,ht,Pt,0,jt,de,Ge,[Ot,Ht,$t,st])}Wt=Ot-Et;var Re=Math.cos(Et),Ke=Math.sin(Et),ze=Math.cos(Ot),Ce=Math.sin(Ot),dr=Math.tan(Wt/4),sr=4/3*ft*dr,Tr=4/3*ht*dr,qr=[bt,wt],fn=[bt+sr*Ke,wt-Tr*Re],Rn=[mt+sr*Ce,W-Tr*ze],Yr=[mt,W];if(fn[0]=2*qr[0]-fn[0],fn[1]=2*qr[1]-fn[1],rt)return[fn,Rn,Yr].concat(tt);tt=[fn,Rn,Yr].concat(tt).join().split(",");for(var Nn=[],Vr=0,ki=tt.length;Vr<ki;Vr++)Nn[Vr]=Vr%2?Qt(tt[Vr-1],tt[Vr],At).y:Qt(tt[Vr],tt[Vr+1],At).x;return Nn},B=function(bt,wt){var ft=I(bt),ht=wt&&I(wt),Pt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Lt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},jt=[],mt=[],W="",rt="",ct,At=function(vt,yt,zt){var oe,Ie;if(!vt)return["C",yt.x,yt.y,yt.x,yt.y,yt.x,yt.y];switch(!(vt[0]in{T:1,Q:1})&&(yt.qx=yt.qy=null),vt[0]){case"M":yt.X=vt[1],yt.Y=vt[2];break;case"A":vt=["C"].concat(D.apply(0,[yt.x,yt.y].concat(vt.slice(1))));break;case"S":zt==="C"||zt==="S"?(oe=yt.x*2-yt.bx,Ie=yt.y*2-yt.by):(oe=yt.x,Ie=yt.y),vt=["C",oe,Ie].concat(vt.slice(1));break;case"T":zt==="Q"||zt==="T"?(yt.qx=yt.x*2-yt.qx,yt.qy=yt.y*2-yt.qy):(yt.qx=yt.x,yt.qy=yt.y),vt=["C"].concat(T(yt.x,yt.y,yt.qx,yt.qy,vt[1],vt[2]));break;case"Q":yt.qx=vt[1],yt.qy=vt[2],vt=["C"].concat(T(yt.x,yt.y,vt[1],vt[2],vt[3],vt[4]));break;case"L":vt=["C"].concat(C(yt.x,yt.y,vt[1],vt[2]));break;case"H":vt=["C"].concat(C(yt.x,yt.y,vt[1],yt.y));break;case"V":vt=["C"].concat(C(yt.x,yt.y,yt.x,vt[1]));break;case"Z":vt=["C"].concat(C(yt.x,yt.y,yt.X,yt.Y));break;default:break}return vt},tt=function(vt,yt){if(vt[yt].length>7){vt[yt].shift();for(var zt=vt[yt];zt.length;)jt[yt]="A",ht&&(mt[yt]="A"),vt.splice(yt++,0,["C"].concat(zt.splice(0,6)));vt.splice(yt,1),ct=Math.max(ft.length,ht&&ht.length||0)}},dt=function(vt,yt,zt,oe,Ie){vt&&yt&&vt[Ie][0]==="M"&&yt[Ie][0]!=="M"&&(yt.splice(Ie,0,["M",oe.x,oe.y]),zt.bx=0,zt.by=0,zt.x=vt[Ie][1],zt.y=vt[Ie][2],ct=Math.max(ft.length,ht&&ht.length||0))};ct=Math.max(ft.length,ht&&ht.length||0);for(var Et=0;Et<ct;Et++){ft[Et]&&(W=ft[Et][0]),W!=="C"&&(jt[Et]=W,Et&&(rt=jt[Et-1])),ft[Et]=At(ft[Et],Pt,rt),jt[Et]!=="A"&&W==="C"&&(jt[Et]="C"),tt(ft,Et),ht&&(ht[Et]&&(W=ht[Et][0]),W!=="C"&&(mt[Et]=W,Et&&(rt=mt[Et-1])),ht[Et]=At(ht[Et],Lt,rt),mt[Et]!=="A"&&W==="C"&&(mt[Et]="C"),tt(ht,Et)),dt(ft,ht,Pt,Lt,Et),dt(ht,ft,Lt,Pt,Et);var Ot=ft[Et],$t=ht&&ht[Et],st=Ot.length,Qt=ht&&$t.length;Pt.x=Ot[st-2],Pt.y=Ot[st-1],Pt.bx=parseFloat(Ot[st-4])||Pt.x,Pt.by=parseFloat(Ot[st-3])||Pt.y,Lt.bx=ht&&(parseFloat($t[Qt-4])||Lt.x),Lt.by=ht&&(parseFloat($t[Qt-3])||Lt.y),Lt.x=ht&&$t[Qt-2],Lt.y=ht&&$t[Qt-1]}return ht?[ft,ht]:ft},G=/,?([a-z]),?/gi,k=function(bt){return bt.join(",").replace(G,"$1")},U=function(bt,wt,ft,ht,Pt){var Lt=-3*wt+9*ft-9*ht+3*Pt,jt=bt*Lt+6*wt-12*ft+6*ht;return bt*jt-3*wt+3*ft},Y=function(bt,wt,ft,ht,Pt,Lt,jt,mt,W){W===null&&(W=1),W=W>1?1:W<0?0:W;for(var rt=W/2,ct=12,At=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],tt=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],dt=0,Et=0;Et<ct;Et++){var Ot=rt*At[Et]+rt,$t=U(Ot,bt,ft,Pt,jt),st=U(Ot,wt,ht,Lt,mt),Qt=$t*$t+st*st;dt+=tt[Et]*Math.sqrt(Qt)}return rt*dt},K=function(bt,wt,ft,ht,Pt,Lt,jt,mt){for(var W=[],rt=[[],[]],ct,At,tt,dt,Et=0;Et<2;++Et){if(Et===0?(At=6*bt-12*ft+6*Pt,ct=-3*bt+9*ft-9*Pt+3*jt,tt=3*ft-3*bt):(At=6*wt-12*ht+6*Lt,ct=-3*wt+9*ht-9*Lt+3*mt,tt=3*ht-3*wt),Math.abs(ct)<1e-12){if(Math.abs(At)<1e-12)continue;dt=-tt/At,dt>0&&dt<1&&W.push(dt);continue}var Ot=At*At-4*tt*ct,$t=Math.sqrt(Ot);if(!(Ot<0)){var st=(-At+$t)/(2*ct);st>0&&st<1&&W.push(st);var Qt=(-At-$t)/(2*ct);Qt>0&&Qt<1&&W.push(Qt)}}for(var vt=W.length,yt=vt,zt;vt--;)dt=W[vt],zt=1-dt,rt[0][vt]=zt*zt*zt*bt+3*zt*zt*dt*ft+3*zt*dt*dt*Pt+dt*dt*dt*jt,rt[1][vt]=zt*zt*zt*wt+3*zt*zt*dt*ht+3*zt*dt*dt*Lt+dt*dt*dt*mt;return rt[0][yt]=bt,rt[1][yt]=wt,rt[0][yt+1]=jt,rt[1][yt+1]=mt,rt[0].length=rt[1].length=yt+2,{min:{x:Math.min.apply(0,rt[0]),y:Math.min.apply(0,rt[1])},max:{x:Math.max.apply(0,rt[0]),y:Math.max.apply(0,rt[1])}}},J=function(bt,wt,ft,ht,Pt,Lt,jt,mt){if(!(Math.max(bt,ft)<Math.min(Pt,jt)||Math.min(bt,ft)>Math.max(Pt,jt)||Math.max(wt,ht)<Math.min(Lt,mt)||Math.min(wt,ht)>Math.max(Lt,mt))){var W=(bt*ht-wt*ft)*(Pt-jt)-(bt-ft)*(Pt*mt-Lt*jt),rt=(bt*ht-wt*ft)*(Lt-mt)-(wt-ht)*(Pt*mt-Lt*jt),ct=(bt-ft)*(Lt-mt)-(wt-ht)*(Pt-jt);if(!!ct){var At=W/ct,tt=rt/ct,dt=+At.toFixed(2),Et=+tt.toFixed(2);if(!(dt<+Math.min(bt,ft).toFixed(2)||dt>+Math.max(bt,ft).toFixed(2)||dt<+Math.min(Pt,jt).toFixed(2)||dt>+Math.max(Pt,jt).toFixed(2)||Et<+Math.min(wt,ht).toFixed(2)||Et>+Math.max(wt,ht).toFixed(2)||Et<+Math.min(Lt,mt).toFixed(2)||Et>+Math.max(Lt,mt).toFixed(2)))return{x:At,y:tt}}}},q=function(bt,wt,ft){return wt>=bt.x&&wt<=bt.x+bt.width&&ft>=bt.y&&ft<=bt.y+bt.height},X=function(bt,wt,ft,ht,Pt){if(Pt)return[["M",+bt+ +Pt,wt],["l",ft-Pt*2,0],["a",Pt,Pt,0,0,1,Pt,Pt],["l",0,ht-Pt*2],["a",Pt,Pt,0,0,1,-Pt,Pt],["l",Pt*2-ft,0],["a",Pt,Pt,0,0,1,-Pt,-Pt],["l",0,Pt*2-ht],["a",Pt,Pt,0,0,1,Pt,-Pt],["z"]];var Lt=[["M",bt,wt],["l",ft,0],["l",0,ht],["l",-ft,0],["z"]];return Lt.parsePathArray=k,Lt},j=function(bt,wt,ft,ht){return bt===null&&(bt=wt=ft=ht=0),wt===null&&(wt=bt.y,ft=bt.width,ht=bt.height,bt=bt.x),{x:bt,y:wt,width:ft,w:ft,height:ht,h:ht,x2:bt+ft,y2:wt+ht,cx:bt+ft/2,cy:wt+ht/2,r1:Math.min(ft,ht)/2,r2:Math.max(ft,ht)/2,r0:Math.sqrt(ft*ft+ht*ht)/2,path:X(bt,wt,ft,ht),vb:[bt,wt,ft,ht].join(" ")}},Q=function(bt,wt){return bt=j(bt),wt=j(wt),q(wt,bt.x,bt.y)||q(wt,bt.x2,bt.y)||q(wt,bt.x,bt.y2)||q(wt,bt.x2,bt.y2)||q(bt,wt.x,wt.y)||q(bt,wt.x2,wt.y)||q(bt,wt.x,wt.y2)||q(bt,wt.x2,wt.y2)||(bt.x<wt.x2&&bt.x>wt.x||wt.x<bt.x2&&wt.x>bt.x)&&(bt.y<wt.y2&&bt.y>wt.y||wt.y<bt.y2&&wt.y>bt.y)},lt=function(bt,wt,ft,ht,Pt,Lt,jt,mt){(0,y.isArray)(bt)||(bt=[bt,wt,ft,ht,Pt,Lt,jt,mt]);var W=K.apply(null,bt);return j(W.min.x,W.min.y,W.max.x-W.min.x,W.max.y-W.min.y)},z=function(bt,wt,ft,ht,Pt,Lt,jt,mt,W){var rt=1-W,ct=Math.pow(rt,3),At=Math.pow(rt,2),tt=W*W,dt=tt*W,Et=ct*bt+At*3*W*ft+rt*3*W*W*Pt+dt*jt,Ot=ct*wt+At*3*W*ht+rt*3*W*W*Lt+dt*mt,$t=bt+2*W*(ft-bt)+tt*(Pt-2*ft+bt),st=wt+2*W*(ht-wt)+tt*(Lt-2*ht+wt),Qt=ft+2*W*(Pt-ft)+tt*(jt-2*Pt+ft),vt=ht+2*W*(Lt-ht)+tt*(mt-2*Lt+ht),yt=rt*bt+W*ft,zt=rt*wt+W*ht,oe=rt*Pt+W*jt,Ie=rt*Lt+W*mt,Gt=90-Math.atan2($t-Qt,st-vt)*180/Math.PI;return{x:Et,y:Ot,m:{x:$t,y:st},n:{x:Qt,y:vt},start:{x:yt,y:zt},end:{x:oe,y:Ie},alpha:Gt}},b=function(bt,wt,ft){var ht=lt(bt),Pt=lt(wt);if(!Q(ht,Pt))return ft?0:[];for(var Lt=Y.apply(0,bt),jt=Y.apply(0,wt),mt=~~(Lt/8),W=~~(jt/8),rt=[],ct=[],At={},tt=ft?0:[],dt=0;dt<mt+1;dt++){var Et=z.apply(0,bt.concat(dt/mt));rt.push({x:Et.x,y:Et.y,t:dt/mt})}for(var dt=0;dt<W+1;dt++){var Et=z.apply(0,wt.concat(dt/W));ct.push({x:Et.x,y:Et.y,t:dt/W})}for(var dt=0;dt<mt;dt++)for(var Ot=0;Ot<W;Ot++){var $t=rt[dt],st=rt[dt+1],Qt=ct[Ot],vt=ct[Ot+1],yt=Math.abs(st.x-$t.x)<.001?"y":"x",zt=Math.abs(vt.x-Qt.x)<.001?"y":"x",oe=J($t.x,$t.y,st.x,st.y,Qt.x,Qt.y,vt.x,vt.y);if(oe){if(At[oe.x.toFixed(4)]===oe.y.toFixed(4))continue;At[oe.x.toFixed(4)]=oe.y.toFixed(4);var Ie=$t.t+Math.abs((oe[yt]-$t[yt])/(st[yt]-$t[yt]))*(st.t-$t.t),Gt=Qt.t+Math.abs((oe[zt]-Qt[zt])/(vt[zt]-Qt[zt]))*(vt.t-Qt.t);Ie>=0&&Ie<=1&&Gt>=0&&Gt<=1&&(ft?tt+=1:tt.push({x:oe.x,y:oe.y,t1:Ie,t2:Gt}))}}return tt},v=function(bt,wt,ft){bt=B(bt),wt=B(wt);for(var ht,Pt,Lt,jt,mt,W,rt,ct,At,tt,dt=ft?0:[],Et=0,Ot=bt.length;Et<Ot;Et++){var $t=bt[Et];if($t[0]==="M")ht=mt=$t[1],Pt=W=$t[2];else{$t[0]==="C"?(At=[ht,Pt].concat($t.slice(1)),ht=At[6],Pt=At[7]):(At=[ht,Pt,ht,Pt,mt,W,mt,W],ht=mt,Pt=W);for(var st=0,Qt=wt.length;st<Qt;st++){var vt=wt[st];if(vt[0]==="M")Lt=rt=vt[1],jt=ct=vt[2];else{vt[0]==="C"?(tt=[Lt,jt].concat(vt.slice(1)),Lt=tt[6],jt=tt[7]):(tt=[Lt,jt,Lt,jt,rt,ct,rt,ct],Lt=rt,jt=ct);var yt=b(At,tt,ft);if(ft)dt+=yt;else{for(var zt=0,oe=yt.length;zt<oe;zt++)yt[zt].segment1=Et,yt[zt].segment2=st,yt[zt].bez1=At,yt[zt].bez2=tt;dt=dt.concat(yt)}}}}}return dt},$=function(bt,wt){return v(bt,wt)};function et(bt,wt){var ft=[],ht=[];function Pt(Lt,jt){if(Lt.length===1)ft.push(Lt[0]),ht.push(Lt[0]);else{for(var mt=[],W=0;W<Lt.length-1;W++)W===0&&ft.push(Lt[0]),W===Lt.length-2&&ht.push(Lt[W+1]),mt[W]=[(1-jt)*Lt[W][0]+jt*Lt[W+1][0],(1-jt)*Lt[W][1]+jt*Lt[W+1][1]];Pt(mt,jt)}}return bt.length&&Pt(bt,wt),{left:ft,right:ht.reverse()}}function Z(bt,wt,ft){var ht=[[bt[1],bt[2]]];ft=ft||2;var Pt=[];wt[0]==="A"?(ht.push(wt[6]),ht.push(wt[7])):wt[0]==="C"?(ht.push([wt[1],wt[2]]),ht.push([wt[3],wt[4]]),ht.push([wt[5],wt[6]])):wt[0]==="S"||wt[0]==="Q"?(ht.push([wt[1],wt[2]]),ht.push([wt[3],wt[4]])):ht.push([wt[1],wt[2]]);for(var Lt=ht,jt=1/ft,mt=0;mt<ft-1;mt++){var W=jt/(1-jt*mt),rt=et(Lt,W);Pt.push(rt.left),Lt=rt.right}Pt.push(Lt);var ct=Pt.map(function(At){var tt=[];return At.length===4&&(tt.push("C"),tt=tt.concat(At[2])),At.length>=3&&(At.length===3&&tt.push("Q"),tt=tt.concat(At[1])),At.length===2&&tt.push("L"),tt=tt.concat(At[At.length-1]),tt});return ct}var pt=function(bt,wt,ft){if(ft===1)return[[].concat(bt)];var ht=[];if(wt[0]==="L"||wt[0]==="C"||wt[0]==="Q")ht=ht.concat(Z(bt,wt,ft));else{var Pt=[].concat(bt);Pt[0]==="M"&&(Pt[0]="L");for(var Lt=0;Lt<=ft-1;Lt++)ht.push(Pt)}return ht},_t=function(bt,wt){if(bt.length===1)return bt;var ft=bt.length-1,ht=wt.length-1,Pt=ft/ht,Lt=[];if(bt.length===1&&bt[0][0]==="M"){for(var jt=0;jt<ht-ft;jt++)bt.push(bt[0]);return bt}for(var jt=0;jt<ht;jt++){var mt=Math.floor(Pt*jt);Lt[mt]=(Lt[mt]||0)+1}var W=Lt.reduce(function(rt,ct,At){return At===ft?rt.concat(bt[ft]):rt.concat(pt(bt[At],bt[At+1],ct))},[]);return W.unshift(bt[0]),(wt[ht]==="Z"||wt[ht]==="z")&&W.push("Z"),W},It=function(bt,wt){if(bt.length!==wt.length)return!1;var ft=!0;return(0,y.each)(bt,function(ht,Pt){if(ht!==wt[Pt])return ft=!1,!1}),ft};function Rt(bt,wt,ft){var ht=null,Pt=ft;return wt<Pt&&(Pt=wt,ht="add"),bt<Pt&&(Pt=bt,ht="del"),{type:ht,min:Pt}}var H=function(bt,wt){var ft=bt.length,ht=wt.length,Pt,Lt,jt=0;if(ft===0||ht===0)return null;for(var mt=[],W=0;W<=ft;W++)mt[W]=[],mt[W][0]={min:W};for(var rt=0;rt<=ht;rt++)mt[0][rt]={min:rt};for(var W=1;W<=ft;W++){Pt=bt[W-1];for(var rt=1;rt<=ht;rt++){Lt=wt[rt-1],It(Pt,Lt)?jt=0:jt=1;var ct=mt[W-1][rt].min+1,At=mt[W][rt-1].min+1,tt=mt[W-1][rt-1].min+jt;mt[W][rt]=Rt(ct,At,tt)}}return mt},ot=function(bt,wt){var ft=H(bt,wt),ht=bt.length,Pt=wt.length,Lt=[],jt=1,mt=1;if(ft[ht][Pt].min!==ht){for(var W=1;W<=ht;W++){var rt=ft[W][W].min;mt=W;for(var ct=jt;ct<=Pt;ct++)ft[W][ct].min<rt&&(rt=ft[W][ct].min,mt=ct);jt=mt,ft[W][jt].type&&Lt.push({index:W-1,type:ft[W][jt].type})}for(var W=Lt.length-1;W>=0;W--)jt=Lt[W].index,Lt[W].type==="add"?bt.splice(jt,0,[].concat(bt[jt])):bt.splice(jt,1)}ht=bt.length;var At=Pt-ht;if(ht<Pt)for(var W=0;W<At;W++)bt[ht-1][0]==="z"||bt[ht-1][0]==="Z"?bt.splice(ht-2,0,bt[ht-2]):bt.push(bt[ht-1]),ht+=1;return bt};function St(bt,wt,ft){for(var ht=[].concat(bt),Pt,Lt=1/(ft+1),jt=Ut(wt)[0],mt=1;mt<=ft;mt++)Lt*=mt,Pt=Math.floor(bt.length*Lt),Pt===0?ht.unshift([jt[0]*Lt+bt[Pt][0]*(1-Lt),jt[1]*Lt+bt[Pt][1]*(1-Lt)]):ht.splice(Pt,0,[jt[0]*Lt+bt[Pt][0]*(1-Lt),jt[1]*Lt+bt[Pt][1]*(1-Lt)]);return ht}function Ut(bt){var wt=[];switch(bt[0]){case"M":wt.push([bt[1],bt[2]]);break;case"L":wt.push([bt[1],bt[2]]);break;case"A":wt.push([bt[6],bt[7]]);break;case"Q":wt.push([bt[3],bt[4]]),wt.push([bt[1],bt[2]]);break;case"T":wt.push([bt[1],bt[2]]);break;case"C":wt.push([bt[5],bt[6]]),wt.push([bt[1],bt[2]]),wt.push([bt[3],bt[4]]);break;case"S":wt.push([bt[3],bt[4]]),wt.push([bt[1],bt[2]]);break;case"H":wt.push([bt[1],bt[1]]);break;case"V":wt.push([bt[1],bt[1]]);break;default:}return wt}var ae=function(bt,wt){if(bt.length<=1)return bt;for(var ft,ht=0;ht<wt.length;ht++)if(bt[ht][0]!==wt[ht][0])switch(ft=Ut(bt[ht]),wt[ht][0]){case"M":bt[ht]=["M"].concat(ft[0]);break;case"L":bt[ht]=["L"].concat(ft[0]);break;case"A":bt[ht]=[].concat(wt[ht]),bt[ht][6]=ft[0][0],bt[ht][7]=ft[0][1];break;case"Q":if(ft.length<2)if(ht>0)ft=St(ft,bt[ht-1],1);else{bt[ht]=wt[ht];break}bt[ht]=["Q"].concat(ft.reduce(function(Pt,Lt){return Pt.concat(Lt)},[]));break;case"T":bt[ht]=["T"].concat(ft[0]);break;case"C":if(ft.length<3)if(ht>0)ft=St(ft,bt[ht-1],2);else{bt[ht]=wt[ht];break}bt[ht]=["C"].concat(ft.reduce(function(Pt,Lt){return Pt.concat(Lt)},[]));break;case"S":if(ft.length<2)if(ht>0)ft=St(ft,bt[ht-1],1);else{bt[ht]=wt[ht];break}bt[ht]=["S"].concat(ft.reduce(function(Pt,Lt){return Pt.concat(Lt)},[]));break;default:bt[ht]=wt[ht]}return bt}},83421:function(ut,L,x){"use strict";x.d(L,{FE:function(){return N},mY:function(){return E},$O:function(){return A}});var y=x(64753),P=x(38479);function N(O,I,C){var T=1;if((0,y.HD)(O)&&(T=O.split(`
`).length),T>1){var D=w(I,C);return I*T+D*(T-1)}return I}function w(O,I){return I?I-O:O*.14}function E(O,I){var C=(0,P.L)(),T=0;if((0,y.kK)(O)||O==="")return T;if(C.save(),C.font=I,(0,y.HD)(O)&&O.includes(`
`)){var D=O.split(`
`);(0,y.S6)(D,function(B){var G=C.measureText(B).width;T<G&&(T=G)})}else T=C.measureText(O).width;return C.restore(),T}function A(O){var I=O.fontSize,C=O.fontFamily,T=O.fontWeight,D=O.fontStyle,B=O.fontVariant;return[D,B,T,I+"px",C].join(" ").trim()}},64753:function(ut,L,x){"use strict";x.d(L,{As:function(){return P},jU:function(){return N},kK:function(){return y.isNil},mf:function(){return y.isFunction},HD:function(){return y.isString},Kn:function(){return y.isObject},CD:function(){return y.mix},S6:function(){return y.each},jC:function(){return y.upperFirst},UY:function(){return w},pP:function(){return E}});var y=x(6802);function P(A,O){var I=A.indexOf(O);I!==-1&&A.splice(I,1)}var N=typeof window!="undefined"&&typeof window.document!="undefined";function w(A,O){if(A.isCanvas())return!0;for(var I=O.getParent(),C=!1;I;){if(I===A){C=!0;break}I=I.getParent()}return C}function E(A){return A.cfg.visible&&A.cfg.capture}},51824:function(ut,L,x){"use strict";x.d(L,{wN:function(){return Ut},Ll:function(){return b},x1:function(){return T},aH:function(){return Pt},lD:function(){return q},Zr:function(){return y}});var y={};x.r(y),x.d(y,{distance:function(){return w},getBBoxByArray:function(){return A},getBBoxRange:function(){return O},isNumberEqual:function(){return E},piMod:function(){return I}});function P(mt){return Math.min.apply(null,mt)}function N(mt){return Math.max.apply(null,mt)}function w(mt,W,rt,ct){var At=mt-rt,tt=W-ct;return Math.sqrt(At*At+tt*tt)}function E(mt,W){return Math.abs(mt-W)<.001}function A(mt,W){var rt=P(mt),ct=P(W),At=N(mt),tt=N(W);return{x:rt,y:ct,width:At-rt,height:tt-ct}}function O(mt,W,rt,ct){return{minX:P([mt,rt]),maxX:N([mt,rt]),minY:P([W,ct]),maxY:N([W,ct])}}function I(mt){return(mt+Math.PI*2)%(Math.PI*2)}var C=x(10714),T={box:function(mt,W,rt,ct){return A([mt,rt],[W,ct])},length:function(mt,W,rt,ct){return w(mt,W,rt,ct)},pointAt:function(mt,W,rt,ct,At){return{x:(1-At)*mt+At*rt,y:(1-At)*W+At*ct}},pointDistance:function(mt,W,rt,ct,At,tt){var dt=(rt-mt)*(At-mt)+(ct-W)*(tt-W);if(dt<0)return w(mt,W,At,tt);var Et=(rt-mt)*(rt-mt)+(ct-W)*(ct-W);return dt>Et?w(rt,ct,At,tt):this.pointToLine(mt,W,rt,ct,At,tt)},pointToLine:function(mt,W,rt,ct,At,tt){var dt=[rt-mt,ct-W];if(C.I6(dt,[0,0]))return Math.sqrt((At-mt)*(At-mt)+(tt-W)*(tt-W));var Et=[-dt[1],dt[0]];C.Fv(Et,Et);var Ot=[At-mt,tt-W];return Math.abs(C.AK(Ot,Et))},tangentAngle:function(mt,W,rt,ct){return Math.atan2(ct-W,rt-mt)}},D=1e-4;function B(mt,W,rt,ct,At,tt){var dt,Et=Infinity,Ot=[rt,ct],$t=20;tt&&tt>200&&($t=tt/10);for(var st=1/$t,Qt=st/10,vt=0;vt<=$t;vt++){var yt=vt*st,zt=[At.apply(null,mt.concat([yt])),At.apply(null,W.concat([yt]))],oe=w(Ot[0],Ot[1],zt[0],zt[1]);oe<Et&&(dt=yt,Et=oe)}if(dt===0)return{x:mt[0],y:W[0]};if(dt===1){var Ie=mt.length;return{x:mt[Ie-1],y:W[Ie-1]}}Et=Infinity;for(var vt=0;vt<32&&!(Qt<D);vt++){var Gt=dt-Qt,Wt=dt+Qt,zt=[At.apply(null,mt.concat([Gt])),At.apply(null,W.concat([Gt]))],oe=w(Ot[0],Ot[1],zt[0],zt[1]);if(Gt>=0&&oe<Et)dt=Gt,Et=oe;else{var Ht=[At.apply(null,mt.concat([Wt])),At.apply(null,W.concat([Wt]))],de=w(Ot[0],Ot[1],Ht[0],Ht[1]);Wt<=1&&de<Et?(dt=Wt,Et=de):Qt*=.5}}return{x:At.apply(null,mt.concat([dt])),y:At.apply(null,W.concat([dt]))}}function G(mt,W){for(var rt=0,ct=mt.length,At=0;At<ct;At++){var tt=mt[At],dt=W[At],Et=mt[(At+1)%ct],Ot=W[(At+1)%ct];rt+=w(tt,dt,Et,Ot)}return rt/2}function k(mt,W,rt,ct){var At=1-ct;return At*At*mt+2*ct*At*W+ct*ct*rt}function U(mt,W,rt){var ct=mt+rt-2*W;if(E(ct,0))return[.5];var At=(mt-W)/ct;return At<=1&&At>=0?[At]:[]}function Y(mt,W,rt,ct){return 2*(1-ct)*(W-mt)+2*ct*(rt-W)}function K(mt,W,rt,ct,At,tt,dt){var Et=k(mt,rt,At,dt),Ot=k(W,ct,tt,dt),$t=T.pointAt(mt,W,rt,ct,dt),st=T.pointAt(rt,ct,At,tt,dt);return[[mt,W,$t.x,$t.y,Et,Ot],[Et,Ot,st.x,st.y,At,tt]]}function J(mt,W,rt,ct,At,tt,dt){if(dt===0)return(w(mt,W,rt,ct)+w(rt,ct,At,tt)+w(mt,W,At,tt))/2;var Et=K(mt,W,rt,ct,At,tt,.5),Ot=Et[0],$t=Et[1];return Ot.push(dt-1),$t.push(dt-1),J.apply(null,Ot)+J.apply(null,$t)}var q={box:function(mt,W,rt,ct,At,tt){var dt=U(mt,rt,At)[0],Et=U(W,ct,tt)[0],Ot=[mt,At],$t=[W,tt];return dt!==void 0&&Ot.push(k(mt,rt,At,dt)),Et!==void 0&&$t.push(k(W,ct,tt,Et)),A(Ot,$t)},length:function(mt,W,rt,ct,At,tt){return J(mt,W,rt,ct,At,tt,3)},nearestPoint:function(mt,W,rt,ct,At,tt,dt,Et){return B([mt,rt,At],[W,ct,tt],dt,Et,k)},pointDistance:function(mt,W,rt,ct,At,tt,dt,Et){var Ot=this.nearestPoint(mt,W,rt,ct,At,tt,dt,Et);return w(Ot.x,Ot.y,dt,Et)},interpolationAt:k,pointAt:function(mt,W,rt,ct,At,tt,dt){return{x:k(mt,rt,At,dt),y:k(W,ct,tt,dt)}},divide:function(mt,W,rt,ct,At,tt,dt){return K(mt,W,rt,ct,At,tt,dt)},tangentAngle:function(mt,W,rt,ct,At,tt,dt){var Et=Y(mt,rt,At,dt),Ot=Y(W,ct,tt,dt),$t=Math.atan2(Ot,Et);return I($t)}};function X(mt,W,rt,ct,At){var tt=1-At;return tt*tt*tt*mt+3*W*At*tt*tt+3*rt*At*At*tt+ct*At*At*At}function j(mt,W,rt,ct,At){var tt=1-At;return 3*(tt*tt*(W-mt)+2*tt*At*(rt-W)+At*At*(ct-rt))}function Q(mt,W,rt,ct){var At=-3*mt+9*W-9*rt+3*ct,tt=6*mt-12*W+6*rt,dt=3*W-3*mt,Et=[],Ot,$t,st;if(E(At,0))E(tt,0)||(Ot=-dt/tt,Ot>=0&&Ot<=1&&Et.push(Ot));else{var Qt=tt*tt-4*At*dt;E(Qt,0)?Et.push(-tt/(2*At)):Qt>0&&(st=Math.sqrt(Qt),Ot=(-tt+st)/(2*At),$t=(-tt-st)/(2*At),Ot>=0&&Ot<=1&&Et.push(Ot),$t>=0&&$t<=1&&Et.push($t))}return Et}function lt(mt,W,rt,ct,At,tt,dt,Et,Ot){var $t=X(mt,rt,At,dt,Ot),st=X(W,ct,tt,Et,Ot),Qt=T.pointAt(mt,W,rt,ct,Ot),vt=T.pointAt(rt,ct,At,tt,Ot),yt=T.pointAt(At,tt,dt,Et,Ot),zt=T.pointAt(Qt.x,Qt.y,vt.x,vt.y,Ot),oe=T.pointAt(vt.x,vt.y,yt.x,yt.y,Ot);return[[mt,W,Qt.x,Qt.y,zt.x,zt.y,$t,st],[$t,st,oe.x,oe.y,yt.x,yt.y,dt,Et]]}function z(mt,W,rt,ct,At,tt,dt,Et,Ot){if(Ot===0)return G([mt,rt,At,dt],[W,ct,tt,Et]);var $t=lt(mt,W,rt,ct,At,tt,dt,Et,.5),st=$t[0],Qt=$t[1];return st.push(Ot-1),Qt.push(Ot-1),z.apply(null,st)+z.apply(null,Qt)}var b={extrema:Q,box:function(mt,W,rt,ct,At,tt,dt,Et){for(var Ot=[mt,dt],$t=[W,Et],st=Q(mt,rt,At,dt),Qt=Q(W,ct,tt,Et),vt=0;vt<st.length;vt++)Ot.push(X(mt,rt,At,dt,st[vt]));for(var vt=0;vt<Qt.length;vt++)$t.push(X(W,ct,tt,Et,Qt[vt]));return A(Ot,$t)},length:function(mt,W,rt,ct,At,tt,dt,Et){return z(mt,W,rt,ct,At,tt,dt,Et,3)},nearestPoint:function(mt,W,rt,ct,At,tt,dt,Et,Ot,$t,st){return B([mt,rt,At,dt],[W,ct,tt,Et],Ot,$t,X,st)},pointDistance:function(mt,W,rt,ct,At,tt,dt,Et,Ot,$t,st){var Qt=this.nearestPoint(mt,W,rt,ct,At,tt,dt,Et,Ot,$t,st);return w(Qt.x,Qt.y,Ot,$t)},interpolationAt:X,pointAt:function(mt,W,rt,ct,At,tt,dt,Et,Ot){return{x:X(mt,rt,At,dt,Ot),y:X(W,ct,tt,Et,Ot)}},divide:function(mt,W,rt,ct,At,tt,dt,Et,Ot){return lt(mt,W,rt,ct,At,tt,dt,Et,Ot)},tangentAngle:function(mt,W,rt,ct,At,tt,dt,Et,Ot){var $t=j(mt,rt,At,dt,Ot),st=j(W,ct,tt,Et,Ot);return I(Math.atan2(st,$t))}};function v(mt,W){var rt=Math.abs(mt);return W>0?rt:rt*-1}var $={box:function(mt,W,rt,ct){return{x:mt-rt,y:W-ct,width:rt*2,height:ct*2}},length:function(mt,W,rt,ct){return Math.PI*(3*(rt+ct)-Math.sqrt((3*rt+ct)*(rt+3*ct)))},nearestPoint:function(mt,W,rt,ct,At,tt){var dt=rt,Et=ct;if(dt===0||Et===0)return{x:mt,y:W};for(var Ot=At-mt,$t=tt-W,st=Math.abs(Ot),Qt=Math.abs($t),vt=dt*dt,yt=Et*Et,zt=Math.PI/4,oe,Ie,Gt=0;Gt<4;Gt++){oe=dt*Math.cos(zt),Ie=Et*Math.sin(zt);var Wt=(vt-yt)*Math.pow(Math.cos(zt),3)/dt,Ht=(yt-vt)*Math.pow(Math.sin(zt),3)/Et,de=oe-Wt,Ge=Ie-Ht,Re=st-Wt,Ke=Qt-Ht,ze=Math.hypot(Ge,de),Ce=Math.hypot(Ke,Re),dr=ze*Math.asin((de*Ke-Ge*Re)/(ze*Ce)),sr=dr/Math.sqrt(vt+yt-oe*oe-Ie*Ie);zt+=sr,zt=Math.min(Math.PI/2,Math.max(0,zt))}return{x:mt+v(oe,Ot),y:W+v(Ie,$t)}},pointDistance:function(mt,W,rt,ct,At,tt){var dt=this.nearestPoint(mt,W,rt,ct,At,tt);return w(dt.x,dt.y,At,tt)},pointAt:function(mt,W,rt,ct,At){var tt=2*Math.PI*At;return{x:mt+rt*Math.cos(tt),y:W+ct*Math.sin(tt)}},tangentAngle:function(mt,W,rt,ct,At){var tt=2*Math.PI*At,dt=Math.atan2(ct*Math.cos(tt),-rt*Math.sin(tt));return I(dt)}};function et(mt,W,rt,ct,At,tt,dt,Et){return-1*rt*Math.cos(At)*Math.sin(Et)-ct*Math.sin(At)*Math.cos(Et)}function Z(mt,W,rt,ct,At,tt,dt,Et){return-1*rt*Math.sin(At)*Math.sin(Et)+ct*Math.cos(At)*Math.cos(Et)}function pt(mt,W,rt){return Math.atan(-W/mt*Math.tan(rt))}function _t(mt,W,rt){return Math.atan(W/(mt*Math.tan(rt)))}function It(mt,W,rt,ct,At,tt){return rt*Math.cos(At)*Math.cos(tt)-ct*Math.sin(At)*Math.sin(tt)+mt}function Rt(mt,W,rt,ct,At,tt){return rt*Math.sin(At)*Math.cos(tt)+ct*Math.cos(At)*Math.sin(tt)+W}function H(mt,W,rt,ct){var At=Math.atan2(ct*mt,rt*W);return(At+Math.PI*2)%(Math.PI*2)}function ot(mt,W,rt){return{x:mt*Math.cos(rt),y:W*Math.sin(rt)}}function St(mt,W,rt){var ct=Math.cos(rt),At=Math.sin(rt);return[mt*ct-W*At,mt*At+W*ct]}var Ut={box:function(mt,W,rt,ct,At,tt,dt){for(var Et=pt(rt,ct,At),Ot=Infinity,$t=-Infinity,st=[tt,dt],Qt=-Math.PI*2;Qt<=Math.PI*2;Qt+=Math.PI){var vt=Et+Qt;tt<dt?tt<vt&&vt<dt&&st.push(vt):dt<vt&&vt<tt&&st.push(vt)}for(var Qt=0;Qt<st.length;Qt++){var yt=It(mt,W,rt,ct,At,st[Qt]);yt<Ot&&(Ot=yt),yt>$t&&($t=yt)}for(var zt=_t(rt,ct,At),oe=Infinity,Ie=-Infinity,Gt=[tt,dt],Qt=-Math.PI*2;Qt<=Math.PI*2;Qt+=Math.PI){var Wt=zt+Qt;tt<dt?tt<Wt&&Wt<dt&&Gt.push(Wt):dt<Wt&&Wt<tt&&Gt.push(Wt)}for(var Qt=0;Qt<Gt.length;Qt++){var Ht=Rt(mt,W,rt,ct,At,Gt[Qt]);Ht<oe&&(oe=Ht),Ht>Ie&&(Ie=Ht)}return{x:Ot,y:oe,width:$t-Ot,height:Ie-oe}},length:function(mt,W,rt,ct,At,tt,dt){},nearestPoint:function(mt,W,rt,ct,At,tt,dt,Et,Ot){var $t=St(Et-mt,Ot-W,-At),st=$t[0],Qt=$t[1],vt=$.nearestPoint(0,0,rt,ct,st,Qt),yt=H(rt,ct,vt.x,vt.y);yt<tt?vt=ot(rt,ct,tt):yt>dt&&(vt=ot(rt,ct,dt));var zt=St(vt.x,vt.y,At);return{x:zt[0]+mt,y:zt[1]+W}},pointDistance:function(mt,W,rt,ct,At,tt,dt,Et,Ot){var $t=this.nearestPoint(mt,W,rt,ct,Et,Ot);return w($t.x,$t.y,Et,Ot)},pointAt:function(mt,W,rt,ct,At,tt,dt,Et){var Ot=(dt-tt)*Et+tt;return{x:It(mt,W,rt,ct,At,Ot),y:Rt(mt,W,rt,ct,At,Ot)}},tangentAngle:function(mt,W,rt,ct,At,tt,dt,Et){var Ot=(dt-tt)*Et+tt,$t=et(mt,W,rt,ct,At,tt,dt,Ot),st=Z(mt,W,rt,ct,At,tt,dt,Ot);return I(Math.atan2(st,$t))}};function ae(mt){for(var W=0,rt=[],ct=0;ct<mt.length-1;ct++){var At=mt[ct],tt=mt[ct+1],dt=w(At[0],At[1],tt[0],tt[1]),Et={from:At,to:tt,length:dt};rt.push(Et),W+=dt}return{segments:rt,totalLength:W}}function bt(mt){if(mt.length<2)return 0;for(var W=0,rt=0;rt<mt.length-1;rt++){var ct=mt[rt],At=mt[rt+1];W+=w(ct[0],ct[1],At[0],At[1])}return W}function wt(mt,W){if(W>1||W<0||mt.length<2)return null;var rt=ae(mt),ct=rt.segments,At=rt.totalLength;if(At===0)return{x:mt[0][0],y:mt[0][1]};for(var tt=0,dt=null,Et=0;Et<ct.length;Et++){var Ot=ct[Et],$t=Ot.from,st=Ot.to,Qt=Ot.length/At;if(W>=tt&&W<=tt+Qt){var vt=(W-tt)/Qt;dt=T.pointAt($t[0],$t[1],st[0],st[1],vt);break}tt+=Qt}return dt}function ft(mt,W){if(W>1||W<0||mt.length<2)return 0;for(var rt=ae(mt),ct=rt.segments,At=rt.totalLength,tt=0,dt=0,Et=0;Et<ct.length;Et++){var Ot=ct[Et],$t=Ot.from,st=Ot.to,Qt=Ot.length/At;if(W>=tt&&W<=tt+Qt){dt=Math.atan2(st[1]-$t[1],st[0]-$t[0]);break}tt+=Qt}return dt}function ht(mt,W,rt){for(var ct=Infinity,At=0;At<mt.length-1;At++){var tt=mt[At],dt=mt[At+1],Et=T.pointDistance(tt[0],tt[1],dt[0],dt[1],W,rt);Et<ct&&(ct=Et)}return ct}var Pt={box:function(mt){for(var W=[],rt=[],ct=0;ct<mt.length;ct++){var At=mt[ct];W.push(At[0]),rt.push(At[1])}return A(W,rt)},length:function(mt){return bt(mt)},pointAt:function(mt,W){return wt(mt,W)},pointDistance:function(mt,W,rt){return ht(mt,W,rt)},tangentAngle:function(mt,W){return ft(mt,W)}};function Lt(mt){var W=mt.slice(0);return mt.length&&W.push(mt[0]),W}var jt={box:function(mt){return Pt.box(mt)},length:function(mt){return bt(Lt(mt))},pointAt:function(mt,W){return wt(Lt(mt),W)},pointDistance:function(mt,W,rt){return ht(Lt(mt),W,rt)},tangentAngle:function(mt,W){return ft(Lt(mt),W)}}},27294:function(){},89586:function(){},62697:function(){},71894:function(){},71186:function(){},25275:function(){},72862:function(){},49633:function(){},17222:function(){},25965:function(){},32391:function(){},13945:function(){},51036:function(ut){(function(x,y){ut.exports=y()})(typeof self!="undefined"?self:this,function(){return function(L){var x={};function y(P){if(x[P])return x[P].exports;var N=x[P]={i:P,l:!1,exports:{}};return L[P].call(N.exports,N,N.exports,y),N.l=!0,N.exports}return y.m=L,y.c=x,y.d=function(P,N,w){y.o(P,N)||Object.defineProperty(P,N,{configurable:!1,enumerable:!0,get:w})},y.n=function(P){var N=P&&P.__esModule?function(){return P.default}:function(){return P};return y.d(N,"a",N),N},y.o=function(P,N){return Object.prototype.hasOwnProperty.call(P,N)},y.p="",y(y.s=31)}([function(L,x,y){"use strict";var P=y(4);x.a=function(N){return Array.isArray?Array.isArray(N):Object(P.a)(N,"Array")}},function(L,x,y){"use strict";var P=function(N){return N!==null&&typeof N!="function"&&isFinite(N.length)};x.a=P},function(L,x,y){"use strict";var P=y(0),N=y(13);function w(E,A){if(!!E){var O;if(Object(P.a)(E))for(var I=0,C=E.length;I<C&&(O=A(E[I],I),O!==!1);I++);else if(Object(N.a)(E)){for(var T in E)if(E.hasOwnProperty(T)&&(O=A(E[T],T),O===!1))break}}}x.a=w},function(L,x,y){"use strict";var P=y(4);x.a=function(N){return Object(P.a)(N,"Function")}},function(L,x,y){"use strict";var P={}.toString,N=function(w,E){return P.call(w)==="[object "+E+"]"};x.a=N},function(L,x,y){"use strict";var P=y(4),N=function(w){return Object(P.a)(w,"Number")};x.a=N},function(L,x,y){"use strict";var P=function(N){return N==null};x.a=P},function(L,x,y){var P=y(33),N=P.mix;L.exports={assign:N}},function(L,x,y){"use strict";var P=y(4);x.a=function(N){return Object(P.a)(N,"String")}},function(L,x,y){"use strict";var P=y(15),N=y(4),w=function(E){if(!Object(P.a)(E)||!Object(N.a)(E,"Object"))return!1;if(Object.getPrototypeOf(E)===null)return!0;for(var A=E;Object.getPrototypeOf(A)!==null;)A=Object.getPrototypeOf(A);return Object.getPrototypeOf(E)===A};x.a=w},function(L,x,y){"use strict";var P=y(6);x.a=function(N){return Object(P.a)(N)?"":N.toString()}},function(L,x,y){var P=y(18),N=function(){function w(A,O){O===void 0&&(O={});var I=this;I.options=O,I.rootNode=P(A,O)}var E=w.prototype;return E.execute=function(){throw new Error("please override this method")},w}();L.exports=N},function(L,x,y){"use strict";var P=y(1),N=function(w,E){return Object(P.a)(w)?w.indexOf(E)>-1:!1};x.a=N},function(L,x,y){"use strict";x.a=function(P){var N=typeof P;return P!==null&&N==="object"||N==="function"}},function(L,x,y){"use strict";var P=y(2),N=y(1),w=function(E,A){if(!Object(N.a)(E))return E;var O=[];return Object(P.a)(E,function(I,C){A(I,C)&&O.push(I)}),O};x.a=w},function(L,x,y){"use strict";var P=function(N){return typeof N=="object"&&N!==null};x.a=P},function(L,x,y){"use strict";x.a=N;function P(w,E){for(var A in E)E.hasOwnProperty(A)&&A!=="constructor"&&E[A]!==void 0&&(w[A]=E[A])}function N(w,E,A,O){return E&&P(w,E),A&&P(w,A),O&&P(w,O),w}},function(L,x,y){var P=y(30),N=["LR","RL","TB","BT","H","V"],w=["LR","RL","H"],E=function(I){return w.indexOf(I)>-1},A=N[0];L.exports=function(O,I,C){var T=I.direction||A;if(I.isHorizontal=E(T),T&&N.indexOf(T)===-1)throw new TypeError("Invalid direction: "+T);if(T===N[0])C(O,I);else if(T===N[1])C(O,I),O.right2left();else if(T===N[2])C(O,I);else if(T===N[3])C(O,I),O.bottom2top();else if(T===N[4]||T===N[5]){var D=P(O,I),B=D.left,G=D.right;C(B,I),C(G,I),I.isHorizontal?B.right2left():B.bottom2top(),G.translate(B.x-G.x,B.y-G.y),O.x=B.x,O.y=G.y;var k=O.getBoundingBox();I.isHorizontal?k.top<0&&O.translate(0,-k.top):k.left<0&&O.translate(-k.left,0)}var U=I.fixedRoot;return U===void 0&&(U=!0),U&&O.translate(-(O.x+O.width/2+O.hgap),-(O.y+O.height/2+O.vgap)),O}},function(L,x,y){var P=y(7),N=18,w=N*2,E=N,A={getId:function(T){return T.id||T.name},getPreH:function(T){return T.preH||0},getPreV:function(T){return T.preV||0},getHGap:function(T){return T.hgap||E},getVGap:function(T){return T.vgap||E},getChildren:function(T){return T.children},getHeight:function(T){return T.height||w},getWidth:function(T){var D=T.label||" ";return T.width||D.split("").length*N}};function O(C,T){var D=this;if(D.vgap=D.hgap=0,C instanceof O)return C;D.data=C;var B=T.getHGap(C),G=T.getVGap(C);return D.preH=T.getPreH(C),D.preV=T.getPreV(C),D.width=T.getWidth(C),D.height=T.getHeight(C),D.width+=D.preH,D.height+=D.preV,D.id=T.getId(C),D.x=D.y=0,D.depth=0,D.children||(D.children=[]),D.addGap(B,G),D}P.assign(O.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(T,D){var B=this;B.hgap+=T,B.vgap+=D,B.width+=2*T,B.height+=2*D},eachNode:function(T){for(var D=this,B=[D],G;G=B.shift();)T(G),B=G.children.concat(B)},DFTraverse:function(T){this.eachNode(T)},BFTraverse:function(T){for(var D=this,B=[D],G;G=B.shift();)T(G),B=B.concat(G.children)},getBoundingBox:function(){var T={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(D){T.left=Math.min(T.left,D.x),T.top=Math.min(T.top,D.y),T.width=Math.max(T.width,D.x+D.width),T.height=Math.max(T.height,D.y+D.height)}),T},translate:function(T,D){T===void 0&&(T=0),D===void 0&&(D=0),this.eachNode(function(B){B.x+=T,B.y+=D,B.x+=B.preH,B.y+=B.preV})},right2left:function(){var T=this,D=T.getBoundingBox();T.eachNode(function(B){B.x=B.x-(B.x-D.left)*2-B.width}),T.translate(D.width,0)},bottom2top:function(){var T=this,D=T.getBoundingBox();T.eachNode(function(B){B.y=B.y-(B.y-D.top)*2-B.height}),T.translate(0,D.height)}});function I(C,T,D){T===void 0&&(T={}),T=P.assign({},A,T);var B=new O(C,T),G=[B],k;if(!D&&!C.collapsed){for(;k=G.shift();)if(!k.data.collapsed){var U=T.getChildren(k.data),Y=U?U.length:0;if(k.children=new Array(Y),U&&Y)for(var K=0;K<Y;K++){var J=new O(U[K],T);k.children[K]=J,G.push(J),J.parent=k,J.depth=k.depth+1}}}return B}L.exports=I},function(L,x,y){"use strict";var P=y(6),N=y(20);function w(E,A){var O=Object(N.a)(A),I=O.length;if(Object(P.a)(E))return!I;for(var C=0;C<I;C+=1){var T=O[C];if(A[T]!==E[T]||!(T in E))return!1}return!0}x.a=w},function(L,x,y){"use strict";var P=y(2),N=y(3),w=Object.keys?function(E){return Object.keys(E)}:function(E){var A=[];return Object(P.a)(E,function(O,I){Object(N.a)(E)&&I==="prototype"||A.push(I)}),A};x.a=w},function(L,x,y){"use strict";var P=y(1),N=Array.prototype.splice,w=function(A,O){if(!Object(P.a)(A))return[];for(var I=A?O.length:0,C=I-1;I--;){var T=void 0,D=O[I];(I===C||D!==T)&&(T=D,N.call(A,D,1))}return A};x.a=w},function(L,x,y){"use strict";var P=y(12),N=y(2),w=function(E){var A=[];return Object(N.a)(E,function(O){Object(P.a)(A,O)||A.push(O)}),A};x.a=w},function(L,x,y){"use strict";var P=y(0),N=y(3),w=y(24),E=function(A,O){if(!O)return{0:A};if(!Object(N.a)(O)){var I=Object(P.a)(O)?O:O.replace(/\s+/g,"").split("*");O=function(T){for(var D="_",B=0,G=I.length;B<G;B++)D+=T[I[B]]&&T[I[B]].toString();return D}}var C=Object(w.a)(A,O);return C};x.a=E},function(L,x,y){"use strict";var P=y(2),N=y(0),w=y(3),E=Object.prototype.hasOwnProperty;function A(O,I){if(!I||!Object(N.a)(O))return{};var C={},T=Object(w.a)(I)?I:function(B){return B[I]},D;return Object(P.a)(O,function(B){D=T(B),E.call(C,D)?C[D].push(B):C[D]=[B]}),C}x.a=A},function(L,x,y){"use strict";x.a=function(P,N){return P.hasOwnProperty(N)}},function(L,x,y){"use strict";var P=y(2),N=y(3),w=Object.values?function(E){return Object.values(E)}:function(E){var A=[];return Object(P.a)(E,function(O,I){Object(N.a)(E)&&I==="prototype"||A.push(O)}),A};x.a=w},function(L,x,y){"use strict";var P={}.toString,N=function(w){return P.call(w).replace(/^\[object /,"").replace(/]$/,"")};x.a=N},function(L,x,y){"use strict";var P=Object.prototype,N=function(w){var E=w&&w.constructor,A=typeof E=="function"&&E.prototype||P;return w===A};x.a=N},function(L,x,y){"use strict";var P=y(15),N=y(1),w=y(8),E=function(A,O){if(A===O)return!0;if(!A||!O||Object(w.a)(A)||Object(w.a)(O))return!1;if(Object(N.a)(A)||Object(N.a)(O)){if(A.length!==O.length)return!1;for(var I=!0,C=0;C<A.length&&(I=E(A[C],O[C]),!!I);C++);return I}if(Object(P.a)(A)||Object(P.a)(O)){var T=Object.keys(A),D=Object.keys(O);if(T.length!==D.length)return!1;for(var I=!0,C=0;C<T.length&&(I=E(A[T[C]],O[T[C]]),!!I);C++);return I}return!1};x.a=E},function(L,x,y){var P=y(18);L.exports=function(N,w){for(var E=P(N.data,w,!0),A=P(N.data,w,!0),O=N.children.length,I=Math.round(O/2),C=w.getSide||function(G,k){return k<I?"right":"left"},T=0;T<O;T++){var D=N.children[T],B=C(D,T);B==="right"?A.children.push(D):E.children.push(D)}return E.eachNode(function(G){G.isRoot()||(G.side="left")}),A.eachNode(function(G){G.isRoot()||(G.side="right")}),{left:E,right:A}}},function(L,x,y){var P={compactBox:y(32),dendrogram:y(114),indented:y(116),mindmap:y(118)};L.exports=P},function(L,x,y){function P(T,D){T.prototype=Object.create(D.prototype),T.prototype.constructor=T,T.__proto__=D}var N=y(11),w=y(113),E=y(17),A=y(7),O=function(T){P(D,T);function D(){return T.apply(this,arguments)||this}var B=D.prototype;return B.execute=function(){var k=this;return E(k.rootNode,k.options,w)},D}(N),I={};function C(T,D){return D=A.assign({},I,D),new O(T,D).execute()}L.exports=C},function(L,x,y){"use strict";Object.defineProperty(x,"__esModule",{value:!0});var P=y(12);y.d(x,"contains",function(){return P.a}),y.d(x,"includes",function(){return P.a});var N=y(34);y.d(x,"difference",function(){return N.a});var w=y(35);y.d(x,"find",function(){return w.a});var E=y(36);y.d(x,"findIndex",function(){return E.a});var A=y(37);y.d(x,"firstValue",function(){return A.a});var O=y(38);y.d(x,"flatten",function(){return O.a});var I=y(39);y.d(x,"flattenDeep",function(){return I.a});var C=y(40);y.d(x,"getRange",function(){return C.a});var T=y(41);y.d(x,"pull",function(){return T.a});var D=y(21);y.d(x,"pullAt",function(){return D.a});var B=y(42);y.d(x,"reduce",function(){return B.a});var G=y(43);y.d(x,"remove",function(){return G.a});var k=y(44);y.d(x,"sortBy",function(){return k.a});var U=y(45);y.d(x,"union",function(){return U.a});var Y=y(22);y.d(x,"uniq",function(){return Y.a});var K=y(46);y.d(x,"valuesOfKey",function(){return K.a});var J=y(47);y.d(x,"head",function(){return J.a});var q=y(48);y.d(x,"last",function(){return q.a});var X=y(49);y.d(x,"startsWith",function(){return X.a});var j=y(50);y.d(x,"endsWith",function(){return j.a});var Q=y(14);y.d(x,"filter",function(){return Q.a});var lt=y(51);y.d(x,"every",function(){return lt.a});var z=y(52);y.d(x,"some",function(){return z.a});var b=y(53);y.d(x,"group",function(){return b.a});var v=y(24);y.d(x,"groupBy",function(){return v.a});var $=y(23);y.d(x,"groupToMap",function(){return $.a});var et=y(54);y.d(x,"getWrapBehavior",function(){return et.a});var Z=y(55);y.d(x,"wrapBehavior",function(){return Z.a});var pt=y(56);y.d(x,"number2color",function(){return pt.a});var _t=y(57);y.d(x,"parseRadius",function(){return _t.a});var It=y(58);y.d(x,"clamp",function(){return It.a});var Rt=y(59);y.d(x,"fixedBase",function(){return Rt.a});var H=y(60);y.d(x,"isDecimal",function(){return H.a});var ot=y(61);y.d(x,"isEven",function(){return ot.a});var St=y(62);y.d(x,"isInteger",function(){return St.a});var Ut=y(63);y.d(x,"isNegative",function(){return Ut.a});var ae=y(64);y.d(x,"isNumberEqual",function(){return ae.a});var bt=y(65);y.d(x,"isOdd",function(){return bt.a});var wt=y(66);y.d(x,"isPositive",function(){return wt.a});var ft=y(67);y.d(x,"maxBy",function(){return ft.a});var ht=y(68);y.d(x,"minBy",function(){return ht.a});var Pt=y(69);y.d(x,"mod",function(){return Pt.a});var Lt=y(70);y.d(x,"toDegree",function(){return Lt.a});var jt=y(71);y.d(x,"toInteger",function(){return jt.a});var mt=y(72);y.d(x,"toRadian",function(){return mt.a});var W=y(73);y.d(x,"forIn",function(){return W.a});var rt=y(25);y.d(x,"has",function(){return rt.a});var ct=y(74);y.d(x,"hasKey",function(){return ct.a});var At=y(75);y.d(x,"hasValue",function(){return At.a});var tt=y(20);y.d(x,"keys",function(){return tt.a});var dt=y(19);y.d(x,"isMatch",function(){return dt.a});var Et=y(26);y.d(x,"values",function(){return Et.a});var Ot=y(76);y.d(x,"lowerCase",function(){return Ot.a});var $t=y(77);y.d(x,"lowerFirst",function(){return $t.a});var st=y(78);y.d(x,"substitute",function(){return st.a});var Qt=y(79);y.d(x,"upperCase",function(){return Qt.a});var vt=y(80);y.d(x,"upperFirst",function(){return vt.a});var yt=y(27);y.d(x,"getType",function(){return yt.a});var zt=y(81);y.d(x,"isArguments",function(){return zt.a});var oe=y(0);y.d(x,"isArray",function(){return oe.a});var Ie=y(1);y.d(x,"isArrayLike",function(){return Ie.a});var Gt=y(82);y.d(x,"isBoolean",function(){return Gt.a});var Wt=y(83);y.d(x,"isDate",function(){return Wt.a});var Ht=y(84);y.d(x,"isError",function(){return Ht.a});var de=y(3);y.d(x,"isFunction",function(){return de.a});var Ge=y(85);y.d(x,"isFinite",function(){return Ge.a});var Re=y(6);y.d(x,"isNil",function(){return Re.a});var Ke=y(86);y.d(x,"isNull",function(){return Ke.a});var ze=y(5);y.d(x,"isNumber",function(){return ze.a});var Ce=y(13);y.d(x,"isObject",function(){return Ce.a});var dr=y(15);y.d(x,"isObjectLike",function(){return dr.a});var sr=y(9);y.d(x,"isPlainObject",function(){return sr.a});var Tr=y(28);y.d(x,"isPrototype",function(){return Tr.a});var qr=y(87);y.d(x,"isRegExp",function(){return qr.a});var fn=y(8);y.d(x,"isString",function(){return fn.a});var Rn=y(4);y.d(x,"isType",function(){return Rn.a});var Yr=y(88);y.d(x,"isUndefined",function(){return Yr.a});var Nn=y(89);y.d(x,"isElement",function(){return Nn.a});var Vr=y(90);y.d(x,"requestAnimationFrame",function(){return Vr.a});var ki=y(91);y.d(x,"clearAnimationFrame",function(){return ki.a});var vn=y(92);y.d(x,"augment",function(){return vn.a});var $r=y(93);y.d(x,"clone",function(){return $r.a});var En=y(94);y.d(x,"debounce",function(){return En.a});var In=y(95);y.d(x,"memoize",function(){return In.a});var On=y(96);y.d(x,"deepMix",function(){return On.a});var ta=y(2);y.d(x,"each",function(){return ta.a});var Wi=y(97);y.d(x,"extend",function(){return Wi.a});var kn=y(98);y.d(x,"indexOf",function(){return kn.a});var Bi=y(99);y.d(x,"isEmpty",function(){return Bi.a});var gn=y(29);y.d(x,"isEqual",function(){return gn.a});var ci=y(100);y.d(x,"isEqualWith",function(){return ci.a});var fi=y(101);y.d(x,"map",function(){return fi.a});var pi=y(102);y.d(x,"mapValues",function(){return pi.a});var mo=y(16);y.d(x,"mix",function(){return mo.a}),y.d(x,"assign",function(){return mo.a});var ka=y(103);y.d(x,"get",function(){return ka.a});var lo=y(104);y.d(x,"set",function(){return lo.a});var Ca=y(105);y.d(x,"pick",function(){return Ca.a});var Lo=y(106);y.d(x,"throttle",function(){return Lo.a});var $n=y(107);y.d(x,"toArray",function(){return $n.a});var Vi=y(10);y.d(x,"toString",function(){return Vi.a});var Fi=y(108);y.d(x,"uniqueId",function(){return Fi.a});var Xi=y(109);y.d(x,"noop",function(){return Xi.a});var $a=y(110);y.d(x,"identity",function(){return $a.a});var Ss=y(111);y.d(x,"size",function(){return Ss.a});var Es=y(112);y.d(x,"Cache",function(){return Es.a})},function(L,x,y){"use strict";var P=y(14),N=y(12),w=function(E,A){return A===void 0&&(A=[]),Object(P.a)(E,function(O){return!Object(N.a)(A,O)})};x.a=w},function(L,x,y){"use strict";var P=y(3),N=y(19),w=y(0),E=y(9);function A(O,I){if(!Object(w.a)(O))return null;var C;if(Object(P.a)(I)&&(C=I),Object(E.a)(I)&&(C=function(D){return Object(N.a)(D,I)}),C){for(var T=0;T<O.length;T+=1)if(C(O[T]))return O[T]}return null}x.a=A},function(L,x,y){"use strict";function P(N,w,E){E===void 0&&(E=0);for(var A=E;A<N.length;A++)if(w(N[A],A))return A;return-1}x.a=P},function(L,x,y){"use strict";var P=y(6),N=y(0),w=function(E,A){for(var O=null,I=0;I<E.length;I++){var C=E[I],T=C[A];if(!Object(P.a)(T)){Object(N.a)(T)?O=T[0]:O=T;break}}return O};x.a=w},function(L,x,y){"use strict";var P=y(0),N=function(w){if(!Object(P.a)(w))return[];for(var E=[],A=0;A<w.length;A++)E=E.concat(w[A]);return E};x.a=N},function(L,x,y){"use strict";var P=y(0),N=function(w,E){if(E===void 0&&(E=[]),!Object(P.a)(w))E.push(w);else for(var A=0;A<w.length;A+=1)N(w[A],E);return E};x.a=N},function(L,x,y){"use strict";var P=y(0),N=y(14),w=function(E){if(E=Object(N.a)(E,function(T){return!isNaN(T)}),!E.length)return{min:0,max:0};if(Object(P.a)(E[0])){for(var A=[],O=0;O<E.length;O++)A=A.concat(E[O]);E=A}var I=Math.max.apply(null,E),C=Math.min.apply(null,E);return{min:C,max:I}};x.a=w},function(L,x,y){"use strict";var P=Array.prototype,N=P.splice,w=P.indexOf,E=function(A){for(var O=[],I=1;I<arguments.length;I++)O[I-1]=arguments[I];for(var C=0;C<O.length;C++)for(var T=O[C],D=-1;(D=w.call(A,T))>-1;)N.call(A,D,1);return A};x.a=E},function(L,x,y){"use strict";var P=y(2),N=y(0),w=y(9),E=function(A,O,I){if(!Object(N.a)(A)&&!Object(w.a)(A))return A;var C=I;return Object(P.a)(A,function(T,D){C=O(C,T,D)}),C};x.a=E},function(L,x,y){"use strict";var P=y(1),N=y(21),w=function(E,A){var O=[];if(!Object(P.a)(E))return O;for(var I=-1,C=[],T=E.length;++I<T;){var D=E[I];A(D,I,E)&&(O.push(D),C.push(I))}return Object(N.a)(E,C),O};x.a=w},function(L,x,y){"use strict";var P=y(0),N=y(8),w=y(3);function E(A,O){var I;if(Object(w.a)(O))I=function(T,D){return O(T)-O(D)};else{var C=[];Object(N.a)(O)?C.push(O):Object(P.a)(O)&&(C=O),I=function(T,D){for(var B=0;B<C.length;B+=1){var G=C[B];if(T[G]>D[G])return 1;if(T[G]<D[G])return-1}return 0}}return A.sort(I),A}x.a=E},function(L,x,y){"use strict";var P=y(22),N=function(){for(var w=[],E=0;E<arguments.length;E++)w[E]=arguments[E];return Object(P.a)([].concat.apply([],w))};x.a=N},function(L,x,y){"use strict";var P=y(2),N=y(0),w=y(6);x.a=function(E,A){var O=[],I={};return E.forEach(function(C){var T=C[A];Object(w.a)(T)||(Object(N.a)(T)||(T=[T]),Object(P.a)(T,function(D){I[D]||(O.push(D),I[D]=!0)}))}),O}},function(L,x,y){"use strict";x.a=N;var P=y(1);function N(w){if(Object(P.a)(w))return w[0]}},function(L,x,y){"use strict";x.a=N;var P=y(1);function N(w){if(Object(P.a)(w)){var E=w;return E[E.length-1]}}},function(L,x,y){"use strict";var P=y(0),N=y(8);function w(E,A){return Object(P.a)(E)||Object(N.a)(E)?E[0]===A:!1}x.a=w},function(L,x,y){"use strict";var P=y(0),N=y(8);function w(E,A){return Object(P.a)(E)||Object(N.a)(E)?E[E.length-1]===A:!1}x.a=w},function(L,x,y){"use strict";var P=function(N,w){for(var E=0;E<N.length;E++)if(!w(N[E],E))return!1;return!0};x.a=P},function(L,x,y){"use strict";var P=function(N,w){for(var E=0;E<N.length;E++)if(w(N[E],E))return!0;return!1};x.a=P},function(L,x,y){"use strict";var P=y(23);x.a=function(N,w){if(!w)return[N];var E=Object(P.a)(N,w),A=[];for(var O in E)A.push(E[O]);return A}},function(L,x,y){"use strict";function P(N,w){return N["_wrap_"+w]}x.a=P},function(L,x,y){"use strict";function P(N,w){if(N["_wrap_"+w])return N["_wrap_"+w];var E=function(A){N[w](A)};return N["_wrap_"+w]=E,E}x.a=P},function(L,x,y){"use strict";var P={};function N(w){var E=P[w];if(!E){for(var A=w.toString(16),O=A.length;O<6;O++)A="0"+A;E="#"+A,P[w]=E}return E}x.a=N},function(L,x,y){"use strict";var P=y(0);function N(w){var E=0,A=0,O=0,I=0;return Object(P.a)(w)?w.length===1?E=A=O=I=w[0]:w.length===2?(E=O=w[0],A=I=w[1]):w.length===3?(E=w[0],A=I=w[1],O=w[2]):(E=w[0],A=w[1],O=w[2],I=w[3]):E=A=O=I=w,{r1:E,r2:A,r3:O,r4:I}}x.a=N},function(L,x,y){"use strict";var P=function(N,w,E){return N<w?w:N>E?E:N};x.a=P},function(L,x,y){"use strict";var P=function(N,w){var E=w.toString(),A=E.indexOf(".");if(A===-1)return Math.round(N);var O=E.substr(A+1).length;return O>20&&(O=20),parseFloat(N.toFixed(O))};x.a=P},function(L,x,y){"use strict";var P=y(5),N=function(w){return Object(P.a)(w)&&w%1!=0};x.a=N},function(L,x,y){"use strict";var P=y(5),N=function(w){return Object(P.a)(w)&&w%2==0};x.a=N},function(L,x,y){"use strict";var P=y(5),N=Number.isInteger?Number.isInteger:function(w){return Object(P.a)(w)&&w%1==0};x.a=N},function(L,x,y){"use strict";var P=y(5),N=function(w){return Object(P.a)(w)&&w<0};x.a=N},function(L,x,y){"use strict";x.a=N;var P=1e-5;function N(w,E,A){return A===void 0&&(A=P),Math.abs(w-E)<A}},function(L,x,y){"use strict";var P=y(5),N=function(w){return Object(P.a)(w)&&w%2!=0};x.a=N},function(L,x,y){"use strict";var P=y(5),N=function(w){return Object(P.a)(w)&&w>0};x.a=N},function(L,x,y){"use strict";var P=y(2),N=y(0),w=y(3);x.a=function(E,A){if(!!Object(N.a)(E)){var O=E[0],I;Object(w.a)(A)?I=A(E[0]):I=E[0][A];var C;return Object(P.a)(E,function(T){Object(w.a)(A)?C=A(T):C=T[A],C>I&&(O=T,I=C)}),O}}},function(L,x,y){"use strict";var P=y(2),N=y(0),w=y(3);x.a=function(E,A){if(!!Object(N.a)(E)){var O=E[0],I;Object(w.a)(A)?I=A(E[0]):I=E[0][A];var C;return Object(P.a)(E,function(T){Object(w.a)(A)?C=A(T):C=T[A],C<I&&(O=T,I=C)}),O}}},function(L,x,y){"use strict";var P=function(N,w){return(N%w+w)%w};x.a=P},function(L,x,y){"use strict";var P=180/Math.PI,N=function(w){return P*w};x.a=N},function(L,x,y){"use strict";x.a=parseInt},function(L,x,y){"use strict";var P=Math.PI/180,N=function(w){return P*w};x.a=N},function(L,x,y){"use strict";var P=y(2);x.a=P.a},function(L,x,y){"use strict";var P=y(25);x.a=P.a},function(L,x,y){"use strict";var P=y(12),N=y(26);x.a=function(w,E){return Object(P.a)(Object(N.a)(w),E)}},function(L,x,y){"use strict";var P=y(10),N=function(w){return Object(P.a)(w).toLowerCase()};x.a=N},function(L,x,y){"use strict";var P=y(10),N=function(w){var E=Object(P.a)(w);return E.charAt(0).toLowerCase()+E.substring(1)};x.a=N},function(L,x,y){"use strict";function P(N,w){return!N||!w?N:N.replace(/\\?\{([^{}]+)\}/g,function(E,A){return E.charAt(0)==="\\"?E.slice(1):w[A]===void 0?"":w[A]})}x.a=P},function(L,x,y){"use strict";var P=y(10),N=function(w){return Object(P.a)(w).toUpperCase()};x.a=N},function(L,x,y){"use strict";var P=y(10),N=function(w){var E=Object(P.a)(w);return E.charAt(0).toUpperCase()+E.substring(1)};x.a=N},function(L,x,y){"use strict";var P=y(4),N=function(w){return Object(P.a)(w,"Arguments")};x.a=N},function(L,x,y){"use strict";var P=y(4),N=function(w){return Object(P.a)(w,"Boolean")};x.a=N},function(L,x,y){"use strict";var P=y(4),N=function(w){return Object(P.a)(w,"Date")};x.a=N},function(L,x,y){"use strict";var P=y(4),N=function(w){return Object(P.a)(w,"Error")};x.a=N},function(L,x,y){"use strict";var P=y(5);x.a=function(N){return Object(P.a)(N)&&isFinite(N)}},function(L,x,y){"use strict";var P=function(N){return N===null};x.a=P},function(L,x,y){"use strict";var P=y(4),N=function(w){return Object(P.a)(w,"RegExp")};x.a=N},function(L,x,y){"use strict";var P=function(N){return N===void 0};x.a=P},function(L,x,y){"use strict";var P=function(N){return N instanceof Element||N instanceof HTMLDocument};x.a=P},function(L,x,y){"use strict";x.a=P;function P(N){var w=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(E){return setTimeout(E,16)};return w(N)}},function(L,x,y){"use strict";x.a=P;function P(N){var w=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;w(N)}},function(L,x,y){"use strict";var P=y(16),N=y(3),w=function(){for(var E=[],A=0;A<arguments.length;A++)E[A]=arguments[A];for(var O=E[0],I=1;I<E.length;I++){var C=E[I];Object(N.a)(C)&&(C=C.prototype),Object(P.a)(O.prototype,C)}};x.a=w},function(L,x,y){"use strict";var P=y(0),N=function(w){if(typeof w!="object"||w===null)return w;var E;if(Object(P.a)(w)){E=[];for(var A=0,O=w.length;A<O;A++)typeof w[A]=="object"&&w[A]!=null?E[A]=N(w[A]):E[A]=w[A]}else{E={};for(var I in w)typeof w[I]=="object"&&w[I]!=null?E[I]=N(w[I]):E[I]=w[I]}return E};x.a=N},function(L,x,y){"use strict";function P(N,w,E){var A;return function(){var O=this,I=arguments,C=function(){A=null,E||N.apply(O,I)},T=E&&!A;clearTimeout(A),A=setTimeout(C,w),T&&N.apply(O,I)}}x.a=P},function(L,x,y){"use strict";var P=y(3);x.a=function(N,w){if(!Object(P.a)(N))throw new TypeError("Expected a function");var E=function(){for(var A=[],O=0;O<arguments.length;O++)A[O]=arguments[O];var I=w?w.apply(this,A):A[0],C=E.cache;if(C.has(I))return C.get(I);var T=N.apply(this,A);return C.set(I,T),T};return E.cache=new Map,E}},function(L,x,y){"use strict";var P=y(0),N=y(9),w=5;function E(O,I,C,T){C=C||0,T=T||w;for(var D in I)if(I.hasOwnProperty(D)){var B=I[D];B!==null&&Object(N.a)(B)?(Object(N.a)(O[D])||(O[D]={}),C<T?E(O[D],B,C+1,T):O[D]=I[D]):Object(P.a)(B)?(O[D]=[],O[D]=O[D].concat(B)):B!==void 0&&(O[D]=B)}}var A=function(O){for(var I=[],C=1;C<arguments.length;C++)I[C-1]=arguments[C];for(var T=0;T<I.length;T+=1)E(O,I[T]);return O};x.a=A},function(L,x,y){"use strict";var P=y(16),N=y(3),w=function(E,A,O,I){Object(N.a)(A)||(O=A,A=E,E=function(){});var C=Object.create?function(D,B){return Object.create(D,{constructor:{value:B}})}:function(D,B){function G(){}G.prototype=D;var k=new G;return k.constructor=B,k},T=C(A.prototype,E);return E.prototype=Object(P.a)(T,E.prototype),E.superclass=C(A.prototype,A),Object(P.a)(T,O),Object(P.a)(E,I),E};x.a=w},function(L,x,y){"use strict";var P=y(1),N=function(w,E){if(!Object(P.a)(w))return-1;var A=Array.prototype.indexOf;if(A)return A.call(w,E);for(var O=-1,I=0;I<w.length;I++)if(w[I]===E){O=I;break}return O};x.a=N},function(L,x,y){"use strict";var P=y(6),N=y(1),w=y(27),E=y(28),A=Object.prototype.hasOwnProperty;function O(I){if(Object(P.a)(I))return!0;if(Object(N.a)(I))return!I.length;var C=Object(w.a)(I);if(C==="Map"||C==="Set")return!I.size;if(Object(E.a)(I))return!Object.keys(I).length;for(var T in I)if(A.call(I,T))return!1;return!0}x.a=O},function(L,x,y){"use strict";var P=y(3),N=y(29);x.a=function(w,E,A){return Object(P.a)(A)?!!A(w,E):Object(N.a)(w,E)}},function(L,x,y){"use strict";var P=y(2),N=y(1),w=function(E,A){if(!Object(N.a)(E))return E;var O=[];return Object(P.a)(E,function(I,C){O.push(A(I,C))}),O};x.a=w},function(L,x,y){"use strict";var P=y(6),N=y(13),w=function(E){return E};x.a=function(E,A){A===void 0&&(A=w);var O={};return Object(N.a)(E)&&!Object(P.a)(E)&&Object.keys(E).forEach(function(I){O[I]=A(E[I],I)}),O}},function(L,x,y){"use strict";var P=y(8);x.a=function(N,w,E){for(var A=0,O=Object(P.a)(w)?w.split("."):w;N&&A<O.length;)N=N[O[A++]];return N===void 0||A<O.length?E:N}},function(L,x,y){"use strict";var P=y(13),N=y(8),w=y(5);x.a=function(E,A,O){var I=E,C=Object(N.a)(A)?A.split("."):A;return C.forEach(function(T,D){D<C.length-1?(Object(P.a)(I[T])||(I[T]=Object(w.a)(C[D+1])?[]:{}),I=I[T]):I[T]=O}),E}},function(L,x,y){"use strict";var P=y(2),N=y(9),w=Object.prototype.hasOwnProperty;x.a=function(E,A){if(E===null||!Object(N.a)(E))return{};var O={};return Object(P.a)(A,function(I){w.call(E,I)&&(O[I]=E[I])}),O}},function(L,x,y){"use strict";x.a=function(P,N,w){var E,A,O,I,C=0;w||(w={});var T=function(){C=w.leading===!1?0:Date.now(),E=null,I=P.apply(A,O),E||(A=O=null)},D=function(){var B=Date.now();!C&&w.leading===!1&&(C=B);var G=N-(B-C);return A=this,O=arguments,G<=0||G>N?(E&&(clearTimeout(E),E=null),C=B,I=P.apply(A,O),E||(A=O=null)):!E&&w.trailing!==!1&&(E=setTimeout(T,G)),I};return D.cancel=function(){clearTimeout(E),C=0,E=A=O=null},D}},function(L,x,y){"use strict";var P=y(1);x.a=function(N){return Object(P.a)(N)?Array.prototype.slice.call(N):[]}},function(L,x,y){"use strict";var P={};x.a=function(N){return N=N||"g",P[N]?P[N]+=1:P[N]=1,N+P[N]}},function(L,x,y){"use strict";x.a=function(){}},function(L,x,y){"use strict";x.a=function(P){return P}},function(L,x,y){"use strict";x.a=w;var P=y(6),N=y(1);function w(E){return Object(P.a)(E)?0:Object(N.a)(E)?E.length:Object.keys(E).length}},function(L,x,y){"use strict";var P=function(){function N(){this.map={}}return N.prototype.has=function(w){return this.map[w]!==void 0},N.prototype.get=function(w,E){var A=this.map[w];return A===void 0?E:A},N.prototype.set=function(w,E){this.map[w]=E},N.prototype.clear=function(){this.map={}},N.prototype.delete=function(w){delete this.map[w]},N.prototype.size=function(){return Object.keys(this.map).length},N}();x.a=P},function(L,x){function y(O,I,C,T){T===void 0&&(T=[]);var D=this;D.w=O||0,D.h=I||0,D.y=C||0,D.x=0,D.c=T||[],D.cs=T.length,D.prelim=0,D.mod=0,D.shift=0,D.change=0,D.tl=null,D.tr=null,D.el=null,D.er=null,D.msel=0,D.mser=0}y.fromNode=function(O,I){if(!O)return null;var C=[];return O.children.forEach(function(T){C.push(y.fromNode(T,I))}),I?new y(O.height,O.width,O.x,C):new y(O.width,O.height,O.y,C)};function P(O,I,C){C?O.y+=I:O.x+=I,O.children.forEach(function(T){P(T,I,C)})}function N(O,I){var C=I?O.y:O.x;return O.children.forEach(function(T){C=Math.min(N(T,I),C)}),C}function w(O,I){var C=N(O,I);P(O,-C,I)}function E(O,I,C){C?I.y=O.x:I.x=O.x,O.c.forEach(function(T,D){E(T,I.children[D],C)})}function A(O,I,C){C===void 0&&(C=0),I?(O.x=C,C+=O.width):(O.y=C,C+=O.height),O.children.forEach(function(T){A(T,I,C)})}L.exports=function(O,I){I===void 0&&(I={});var C=I.isHorizontal;function T(b){if(b.cs===0){D(b);return}T(b.c[0]);for(var v=lt(Y(b.c[0].el),0,null),$=1;$<b.cs;++$){T(b.c[$]);var et=Y(b.c[$].er);B(b,$,v),v=lt(et,$,v)}q(b),D(b)}function D(b){b.cs===0?(b.el=b,b.er=b,b.msel=b.mser=0):(b.el=b.c[0].el,b.msel=b.c[0].msel,b.er=b.c[b.cs-1].er,b.mser=b.c[b.cs-1].mser)}function B(b,v,$){for(var et=b.c[v-1],Z=et.mod,pt=b.c[v],_t=pt.mod;et!==null&&pt!==null;){Y(et)>$.low&&($=$.nxt);var It=Z+et.prelim+et.w-(_t+pt.prelim);It>0&&(_t+=It,G(b,v,$.index,It));var Rt=Y(et),H=Y(pt);Rt<=H&&(et=U(et),et!==null&&(Z+=et.mod)),Rt>=H&&(pt=k(pt),pt!==null&&(_t+=pt.mod))}!et&&!!pt?K(b,v,pt,_t):!!et&&!pt&&J(b,v,et,Z)}function G(b,v,$,et){b.c[v].mod+=et,b.c[v].msel+=et,b.c[v].mser+=et,j(b,v,$,et)}function k(b){return b.cs===0?b.tl:b.c[0]}function U(b){return b.cs===0?b.tr:b.c[b.cs-1]}function Y(b){return b.y+b.h}function K(b,v,$,et){var Z=b.c[0].el;Z.tl=$;var pt=et-$.mod-b.c[0].msel;Z.mod+=pt,Z.prelim-=pt,b.c[0].el=b.c[v].el,b.c[0].msel=b.c[v].msel}function J(b,v,$,et){var Z=b.c[v].er;Z.tr=$;var pt=et-$.mod-b.c[v].mser;Z.mod+=pt,Z.prelim-=pt,b.c[v].er=b.c[v-1].er,b.c[v].mser=b.c[v-1].mser}function q(b){b.prelim=(b.c[0].prelim+b.c[0].mod+b.c[b.cs-1].mod+b.c[b.cs-1].prelim+b.c[b.cs-1].w)/2-b.w/2}function X(b,v){v+=b.mod,b.x=b.prelim+v,Q(b);for(var $=0;$<b.cs;$++)X(b.c[$],v)}function j(b,v,$,et){if($!==v-1){var Z=v-$;b.c[$+1].shift+=et/Z,b.c[v].shift-=et/Z,b.c[v].change-=et-et/Z}}function Q(b){for(var v=0,$=0,et=0;et<b.cs;et++)v+=b.c[et].shift,$+=v+b.c[et].change,b.c[et].mod+=$}function lt(b,v,$){for(;$!==null&&b>=$.low;)$=$.nxt;return{low:b,index:v,nxt:$}}A(O,C);var z=y.fromNode(O,C);return T(z),X(z,0),E(z,O,C),w(O,C),O}},function(L,x,y){function P(T,D){T.prototype=Object.create(D.prototype),T.prototype.constructor=T,T.__proto__=D}var N=y(11),w=y(115),E=y(17),A=y(7),O=function(T){P(D,T);function D(){return T.apply(this,arguments)||this}var B=D.prototype;return B.execute=function(){var k=this;return k.rootNode.width=0,E(k.rootNode,k.options,w)},D}(N),I={};function C(T,D){return D=A.assign({},I,D),new O(T,D).execute()}L.exports=C},function(L,x,y){var P=y(7);function N(A,O){A===void 0&&(A=0),O===void 0&&(O=[]);var I=this;I.x=I.y=0,I.leftChild=I.rightChild=null,I.height=0,I.children=O}var w={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function E(A,O,I){I?(O.x=A.x,O.y=A.y):(O.x=A.y,O.y=A.x),A.children.forEach(function(C,T){E(C,O.children[T],I)})}L.exports=function(A,O){O===void 0&&(O={}),O=P.assign({},w,O);var I=0;function C(k){if(!k)return null;k.width=0,k.depth&&k.depth>I&&(I=k.depth);var U=k.children,Y=U.length,K=new N(k.height,[]);return U.forEach(function(J,q){var X=C(J);K.children.push(X),q===0&&(K.leftChild=X),q===Y-1&&(K.rightChild=X)}),K.originNode=k,K.isLeaf=k.isLeaf(),K}function T(k){if(k.isLeaf||k.children.length===0)k.drawingDepth=I;else{var U=k.children.map(function(K){return T(K)}),Y=Math.min.apply(null,U);k.drawingDepth=Y-1}return k.drawingDepth}var D;function B(k){k.x=k.drawingDepth*O.rankSep,k.isLeaf?(k.y=0,D&&(k.y=D.y+D.height+O.nodeSep,k.originNode.parent!==D.originNode.parent&&(k.y+=O.subTreeSep)),D=k):(k.children.forEach(function(U){B(U)}),k.y=(k.leftChild.y+k.rightChild.y)/2)}var G=C(A);return T(G),B(G),E(G,A,O.isHorizontal),A}},function(L,x,y){function P(B,G){B.prototype=Object.create(G.prototype),B.prototype.constructor=B,B.__proto__=G}var N=y(11),w=y(117),E=y(30),A=y(7),O=["LR","RL","H"],I=O[0],C=function(B){P(G,B);function G(){return B.apply(this,arguments)||this}var k=G.prototype;return k.execute=function(){var Y=this,K=Y.options,J=Y.rootNode;K.isHorizontal=!0;var q=K.indent,X=q===void 0?20:q,j=K.dropCap,Q=j===void 0?!0:j,lt=K.direction||I;if(lt&&O.indexOf(lt)===-1)throw new TypeError("Invalid direction: "+lt);if(lt===O[0])w(J,X,Q);else if(lt===O[1])w(J,X,Q),J.right2left();else if(lt===O[2]){var z=E(J,K),b=z.left,v=z.right;w(b,X,Q),b.right2left(),w(v,X,Q);var $=b.getBoundingBox();v.translate($.width,0),J.x=v.x-J.width/2}return J},G}(N),T={};function D(B,G){return G=A.assign({},T,G),new C(B,G).execute()}L.exports=D},function(L,x){function y(P,N,w,E){if(!E)try{if(P.id===P.parent.children[0].id){P.x+=w*P.depth,P.y=N?N.y:0;return}}catch(A){}P.x+=w*P.depth,P.y=N?N.y+N.height:0}L.exports=function(P,N,w){var E=null;P.eachNode(function(A){y(A,E,N,w),E=A})}},function(L,x,y){function P(T,D){T.prototype=Object.create(D.prototype),T.prototype.constructor=T,T.__proto__=D}var N=y(11),w=y(119),E=y(17),A=y(7),O=function(T){P(D,T);function D(){return T.apply(this,arguments)||this}var B=D.prototype;return B.execute=function(){var k=this;return E(k.rootNode,k.options,w)},D}(N),I={};function C(T,D){return D=A.assign({},I,D),new O(T,D).execute()}L.exports=C},function(L,x,y){var P=y(7);function N(A,O){var I=0;return A.children.length?A.children.forEach(function(C){I+=N(C,O)}):I=A.height,A._subTreeSep=O.getSubTreeSep(A.data),A.totalHeight=Math.max(A.height,I)+2*A._subTreeSep,A.totalHeight}function w(A){var O=A.children,I=O.length;if(I){O.forEach(function(k){w(k)});var C=O[0],T=O[I-1],D=T.y-C.y+T.height,B=0;if(O.forEach(function(k){B+=k.totalHeight}),D>A.height)A.y=C.y+D/2-A.height/2;else if(O.length!==1||A.height>B){var G=A.y+(A.height-D)/2-C.y;O.forEach(function(k){k.translate(0,G)})}else A.y=(C.y+C.height/2+T.y+T.height/2)/2-A.height/2}}var E={getSubTreeSep:function(){return 0}};L.exports=function(A,O){O===void 0&&(O={}),O=P.assign({},E,O),A.parent={x:0,width:0,height:0,y:0},A.BFTraverse(function(I){I.x=I.parent.x+I.parent.width}),A.parent=null,N(A,O),A.startY=0,A.y=A.totalHeight/2-A.height/2,A.eachNode(function(I){var C=I.children,T=C.length;if(T){var D=C[0];if(D.startY=I.startY+I._subTreeSep,T===1)D.y=I.y+I.height/2-D.height/2;else{D.y=D.startY+D.totalHeight/2-D.height/2;for(var B=1;B<T;B++){var G=C[B];G.startY=C[B-1].startY+C[B-1].totalHeight,G.y=G.startY+G.totalHeight/2-G.height/2}}}}),w(A)}}])})},27881:function(ut,L,x){"use strict";x.d(L,{m$:function(){return N},zu:function(){return w},lh:function(){return E},vs:function(){return O},Dg:function(){return C}});var y=x(31300),P=x(10714);function N(D,B,G){var k=[0,0,0,0,0,0,0,0,0];return y.fromTranslation(k,G),y.multiply(D,k,B)}function w(D,B,G){var k=[0,0,0,0,0,0,0,0,0];return y.fromRotation(k,G),y.multiply(D,k,B)}function E(D,B,G){var k=[0,0,0,0,0,0,0,0,0];return y.fromScaling(k,G),y.multiply(D,k,B)}function A(D,B,G){return y.multiply(D,G,B)}function O(D,B){for(var G=D?[].concat(D):[1,0,0,0,1,0,0,0,1],k=0,U=B.length;k<U;k++){var Y=B[k];switch(Y[0]){case"t":N(G,G,[Y[1],Y[2]]);break;case"s":E(G,G,[Y[1],Y[2]]);break;case"r":w(G,G,Y[1]);break;case"m":A(G,G,Y[1]);break;default:break}}return G}function I(D,B){return D[0]*B[1]-B[0]*D[1]}function C(D,B,G){var k=P.EU(D,B),U=I(D,B)>=0;return G?U?Math.PI*2-k:k:U?k:Math.PI*2-k}function T(D,B,G){return G?(D[0]=B[1],D[1]=-1*B[0]):(D[0]=-1*B[1],D[1]=B[0]),D}},99291:function(ut,L,x){"use strict";x.d(L,{e9:function(){return A},Wq:function(){return At},tr:function(){return G},wb:function(){return Y},zx:function(){return bt}});var y=x(6802),P=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,N=/[^\s\,]+/ig;function w(tt){var dt=tt||[];if((0,y.isArray)(dt))return dt;if((0,y.isString)(dt))return dt=dt.match(P),(0,y.each)(dt,function(Et,Ot){if(Et=Et.match(N),Et[0].length>1){var $t=Et[0].charAt(0);Et.splice(1,0,Et[0].substr(1)),Et[0]=$t}(0,y.each)(Et,function(st,Qt){isNaN(st)||(Et[Qt]=+st)}),dt[Ot]=Et}),dt}var E=w;function A(tt,dt){for(var Et=[],Ot=0,$t=tt.length;$t-2*!dt>Ot;Ot+=2){var st=[{x:+tt[Ot-2],y:+tt[Ot-1]},{x:+tt[Ot],y:+tt[Ot+1]},{x:+tt[Ot+2],y:+tt[Ot+3]},{x:+tt[Ot+4],y:+tt[Ot+5]}];dt?Ot?$t-4===Ot?st[3]={x:+tt[0],y:+tt[1]}:$t-2===Ot&&(st[2]={x:+tt[0],y:+tt[1]},st[3]={x:+tt[2],y:+tt[3]}):st[0]={x:+tt[$t-2],y:+tt[$t-1]}:$t-4===Ot?st[3]=st[2]:Ot||(st[0]={x:+tt[Ot],y:+tt[Ot+1]}),Et.push(["C",(-st[0].x+6*st[1].x+st[2].x)/6,(-st[0].y+6*st[1].y+st[2].y)/6,(st[1].x+6*st[2].x-st[3].x)/6,(st[1].y+6*st[2].y-st[3].y)/6,st[2].x,st[2].y])}return Et}function O(tt,dt,Et){var Ot=null,$t=Et;return dt<$t&&($t=dt,Ot="add"),tt<$t&&($t=tt,Ot="del"),{type:Ot,min:$t}}var I=function(tt,dt){var Et=tt.length,Ot=dt.length,$t,st,Qt=0;if(Et===0||Ot===0)return null;for(var vt=[],yt=0;yt<=Et;yt++)vt[yt]=[],vt[yt][0]={min:yt};for(var zt=0;zt<=Ot;zt++)vt[0][zt]={min:zt};for(var yt=1;yt<=Et;yt++){$t=tt[yt-1];for(var zt=1;zt<=Ot;zt++){st=dt[zt-1],isEqual($t,st)?Qt=0:Qt=1;var oe=vt[yt-1][zt].min+1,Ie=vt[yt][zt-1].min+1,Gt=vt[yt-1][zt-1].min+Qt;vt[yt][zt]=O(oe,Ie,Gt)}}return vt};function C(tt,dt){var Et=I(tt,dt),Ot=tt.length,$t=dt.length,st=[],Qt=1,vt=1;if(Et[Ot][$t]!==Ot){for(var yt=1;yt<=Ot;yt++){var zt=Et[yt][yt].min;vt=yt;for(var oe=Qt;oe<=$t;oe++)Et[yt][oe].min<zt&&(zt=Et[yt][oe].min,vt=oe);Qt=vt,Et[yt][Qt].type&&st.push({index:yt-1,type:Et[yt][Qt].type})}for(var yt=st.length-1;yt>=0;yt--)Qt=st[yt].index,st[yt].type==="add"?tt.splice(Qt,0,[].concat(tt[Qt])):tt.splice(Qt,1)}if(Ot=tt.length,Ot<$t)for(var yt=0;yt<$t-Ot;yt++)tt[Ot-1][0]==="z"||tt[Ot-1][0]==="Z"?tt.splice(Ot-2,0,tt[Ot-2]):tt.push(tt[Ot-1]);return tt}var T=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,D=new RegExp("([a-z])["+T+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+T+"]*,?["+T+"]*)+)","ig"),B=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+T+"]*,?["+T+"]*","ig");function G(tt){if(!tt)return null;if((0,y.isArray)(tt))return tt;var dt={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},Et=[];return String(tt).replace(D,function(Ot,$t,st){var Qt=[],vt=$t.toLowerCase();if(st.replace(B,function(yt,zt){zt&&Qt.push(+zt)}),vt==="m"&&Qt.length>2&&(Et.push([$t].concat(Qt.splice(0,2))),vt="l",$t=$t==="m"?"l":"L"),vt==="o"&&Qt.length===1&&Et.push([$t,Qt[0]]),vt==="r")Et.push([$t].concat(Qt));else for(;Qt.length>=dt[vt]&&(Et.push([$t].concat(Qt.splice(0,dt[vt]))),!!dt[vt]););return""}),Et}var k=/[a-z]/;function U(tt,dt){return[dt[0]+(dt[0]-tt[0]),dt[1]+(dt[1]-tt[1])]}function Y(tt){var dt=G(tt);if(!dt||!dt.length)return[["M",0,0]];for(var Et=!1,Ot=0;Ot<dt.length;Ot++){var $t=dt[Ot][0];if(k.test($t)||["V","H","T","S"].indexOf($t)>=0){Et=!0;break}}if(!Et)return dt;var st=[],Qt=0,vt=0,yt=0,zt=0,oe=0,Ie,Gt,Wt=dt[0];(Wt[0]==="M"||Wt[0]==="m")&&(Qt=+Wt[1],vt=+Wt[2],yt=Qt,zt=vt,oe++,st[0]=["M",Qt,vt]);for(var Ot=oe,Ht=dt.length;Ot<Ht;Ot++){var de=dt[Ot],Ge=st[Ot-1],Re=[],$t=de[0],Ke=$t.toUpperCase();if($t!==Ke)switch(Re[0]=Ke,Ke){case"A":Re[1]=de[1],Re[2]=de[2],Re[3]=de[3],Re[4]=de[4],Re[5]=de[5],Re[6]=+de[6]+Qt,Re[7]=+de[7]+vt;break;case"V":Re[1]=+de[1]+vt;break;case"H":Re[1]=+de[1]+Qt;break;case"M":yt=+de[1]+Qt,zt=+de[2]+vt;break;default:for(var ze=1,Ce=de.length;ze<Ce;ze++)Re[ze]=+de[ze]+(ze%2?Qt:vt)}else Re=dt[Ot];switch(Ke){case"Z":Qt=+yt,vt=+zt;break;case"H":Qt=Re[1],Re=["L",Qt,vt];break;case"V":vt=Re[1],Re=["L",Qt,vt];break;case"T":Qt=Re[1],vt=Re[2];var dr=U([Ge[1],Ge[2]],[Ge[3],Ge[4]]);Re=["Q",dr[0],dr[1],Qt,vt];break;case"S":Qt=Re[Re.length-2],vt=Re[Re.length-1];var sr=Ge.length,Tr=U([Ge[sr-4],Ge[sr-3]],[Ge[sr-2],Ge[sr-1]]);Re=["C",Tr[0],Tr[1],Re[1],Re[2],Qt,vt];break;case"M":yt=Re[Re.length-2],zt=Re[Re.length-1];break;default:Qt=Re[Re.length-2],vt=Re[Re.length-1]}st.push(Re)}return st}var K=function(tt,dt,Et,Ot,$t,st,Qt,vt,yt,zt){Et===Ot&&(Et+=1);var oe=Math.PI*120/180,Ie=Math.PI/180*(+$t||0),Gt=[],Wt,Ht,de,Ge,Re,Ke=function(pi,mo,ka){var lo=pi*Math.cos(ka)-mo*Math.sin(ka),Ca=pi*Math.sin(ka)+mo*Math.cos(ka);return{x:lo,y:Ca}};if(zt)Ht=zt[0],de=zt[1],Ge=zt[2],Re=zt[3];else{Wt=Ke(tt,dt,-Ie),tt=Wt.x,dt=Wt.y,Wt=Ke(vt,yt,-Ie),vt=Wt.x,yt=Wt.y,tt===vt&&dt===yt&&(vt+=1,yt+=1);var ze=(tt-vt)/2,Ce=(dt-yt)/2,dr=ze*ze/(Et*Et)+Ce*Ce/(Ot*Ot);dr>1&&(dr=Math.sqrt(dr),Et=dr*Et,Ot=dr*Ot);var sr=Et*Et,Tr=Ot*Ot,qr=(st===Qt?-1:1)*Math.sqrt(Math.abs((sr*Tr-sr*Ce*Ce-Tr*ze*ze)/(sr*Ce*Ce+Tr*ze*ze)));Ge=qr*Et*Ce/Ot+(tt+vt)/2,Re=qr*-Ot*ze/Et+(dt+yt)/2,Ht=Math.asin(Number(((dt-Re)/Ot).toFixed(9))),de=Math.asin(Number(((yt-Re)/Ot).toFixed(9))),Ht=tt<Ge?Math.PI-Ht:Ht,de=vt<Ge?Math.PI-de:de,Ht<0&&(Ht=Math.PI*2+Ht),de<0&&(de=Math.PI*2+de),Qt&&Ht>de&&(Ht=Ht-Math.PI*2),!Qt&&de>Ht&&(de=de-Math.PI*2)}var fn=de-Ht;if(Math.abs(fn)>oe){var Rn=de,Yr=vt,Nn=yt;de=Ht+oe*(Qt&&de>Ht?1:-1),vt=Ge+Et*Math.cos(de),yt=Re+Ot*Math.sin(de),Gt=K(vt,yt,Et,Ot,$t,0,Qt,Yr,Nn,[de,Rn,Ge,Re])}fn=de-Ht;var Vr=Math.cos(Ht),ki=Math.sin(Ht),vn=Math.cos(de),$r=Math.sin(de),En=Math.tan(fn/4),In=4/3*Et*En,On=4/3*Ot*En,ta=[tt,dt],Wi=[tt+In*ki,dt-On*Vr],kn=[vt+In*$r,yt-On*vn],Bi=[vt,yt];if(Wi[0]=2*ta[0]-Wi[0],Wi[1]=2*ta[1]-Wi[1],zt)return[Wi,kn,Bi].concat(Gt);Gt=[Wi,kn,Bi].concat(Gt).join().split(",");for(var gn=[],ci=0,fi=Gt.length;ci<fi;ci++)gn[ci]=ci%2?Ke(Gt[ci-1],Gt[ci],Ie).y:Ke(Gt[ci],Gt[ci+1],Ie).x;return gn},J=function(tt,dt,Et,Ot){return[tt,dt,Et,Ot,Et,Ot]},q=function(tt,dt,Et,Ot,$t,st){var Qt=1/3,vt=2/3;return[Qt*tt+vt*Et,Qt*dt+vt*Ot,Qt*$t+vt*Et,Qt*st+vt*Ot,$t,st]};function X(tt,dt){var Et=path2Absolute(tt),Ot=dt&&path2Absolute(dt),$t={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},st={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Qt=[],vt=[],yt="",zt="",oe,Ie=function(ze,Ce,dr){var sr,Tr;if(!ze)return["C",Ce.x,Ce.y,Ce.x,Ce.y,Ce.x,Ce.y];switch(!(ze[0]in{T:1,Q:1})&&(Ce.qx=Ce.qy=null),ze[0]){case"M":Ce.X=ze[1],Ce.Y=ze[2];break;case"A":ze=["C"].concat(K.apply(0,[Ce.x,Ce.y].concat(ze.slice(1))));break;case"S":dr==="C"||dr==="S"?(sr=Ce.x*2-Ce.bx,Tr=Ce.y*2-Ce.by):(sr=Ce.x,Tr=Ce.y),ze=["C",sr,Tr].concat(ze.slice(1));break;case"T":dr==="Q"||dr==="T"?(Ce.qx=Ce.x*2-Ce.qx,Ce.qy=Ce.y*2-Ce.qy):(Ce.qx=Ce.x,Ce.qy=Ce.y),ze=["C"].concat(q(Ce.x,Ce.y,Ce.qx,Ce.qy,ze[1],ze[2]));break;case"Q":Ce.qx=ze[1],Ce.qy=ze[2],ze=["C"].concat(q(Ce.x,Ce.y,ze[1],ze[2],ze[3],ze[4]));break;case"L":ze=["C"].concat(J(Ce.x,Ce.y,ze[1],ze[2]));break;case"H":ze=["C"].concat(J(Ce.x,Ce.y,ze[1],Ce.y));break;case"V":ze=["C"].concat(J(Ce.x,Ce.y,Ce.x,ze[1]));break;case"Z":ze=["C"].concat(J(Ce.x,Ce.y,Ce.X,Ce.Y));break;default:break}return ze},Gt=function(ze,Ce){if(ze[Ce].length>7){ze[Ce].shift();for(var dr=ze[Ce];dr.length;)Qt[Ce]="A",Ot&&(vt[Ce]="A"),ze.splice(Ce++,0,["C"].concat(dr.splice(0,6)));ze.splice(Ce,1),oe=Math.max(Et.length,Ot&&Ot.length||0)}},Wt=function(ze,Ce,dr,sr,Tr){ze&&Ce&&ze[Tr][0]==="M"&&Ce[Tr][0]!=="M"&&(Ce.splice(Tr,0,["M",sr.x,sr.y]),dr.bx=0,dr.by=0,dr.x=ze[Tr][1],dr.y=ze[Tr][2],oe=Math.max(Et.length,Ot&&Ot.length||0))};oe=Math.max(Et.length,Ot&&Ot.length||0);for(var Ht=0;Ht<oe;Ht++){Et[Ht]&&(yt=Et[Ht][0]),yt!=="C"&&(Qt[Ht]=yt,Ht&&(zt=Qt[Ht-1])),Et[Ht]=Ie(Et[Ht],$t,zt),Qt[Ht]!=="A"&&yt==="C"&&(Qt[Ht]="C"),Gt(Et,Ht),Ot&&(Ot[Ht]&&(yt=Ot[Ht][0]),yt!=="C"&&(vt[Ht]=yt,Ht&&(zt=vt[Ht-1])),Ot[Ht]=Ie(Ot[Ht],st,zt),vt[Ht]!=="A"&&yt==="C"&&(vt[Ht]="C"),Gt(Ot,Ht)),Wt(Et,Ot,$t,st,Ht),Wt(Ot,Et,st,$t,Ht);var de=Et[Ht],Ge=Ot&&Ot[Ht],Re=de.length,Ke=Ot&&Ge.length;$t.x=de[Re-2],$t.y=de[Re-1],$t.bx=parseFloat(de[Re-4])||$t.x,$t.by=parseFloat(de[Re-3])||$t.y,st.bx=Ot&&(parseFloat(Ge[Ke-4])||st.x),st.by=Ot&&(parseFloat(Ge[Ke-3])||st.y),st.x=Ot&&Ge[Ke-2],st.y=Ot&&Ge[Ke-1]}return Ot?[Et,Ot]:Et}var j=function(tt,dt,Et,Ot,$t){var st=-3*dt+9*Et-9*Ot+3*$t,Qt=tt*st+6*dt-12*Et+6*Ot;return tt*Qt-3*dt+3*Et},Q=function(tt,dt,Et,Ot,$t,st,Qt,vt,yt){yt===null&&(yt=1),yt=yt>1?1:yt<0?0:yt;for(var zt=yt/2,oe=12,Ie=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Gt=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Wt=0,Ht=0;Ht<oe;Ht++){var de=zt*Ie[Ht]+zt,Ge=j(de,tt,Et,$t,Qt),Re=j(de,dt,Ot,st,vt),Ke=Ge*Ge+Re*Re;Wt+=Gt[Ht]*Math.sqrt(Ke)}return zt*Wt},lt=function(tt,dt,Et,Ot,$t,st,Qt,vt){for(var yt=[],zt=[[],[]],oe,Ie,Gt,Wt,Ht=0;Ht<2;++Ht){if(Ht===0?(Ie=6*tt-12*Et+6*$t,oe=-3*tt+9*Et-9*$t+3*Qt,Gt=3*Et-3*tt):(Ie=6*dt-12*Ot+6*st,oe=-3*dt+9*Ot-9*st+3*vt,Gt=3*Ot-3*dt),Math.abs(oe)<1e-12){if(Math.abs(Ie)<1e-12)continue;Wt=-Gt/Ie,Wt>0&&Wt<1&&yt.push(Wt);continue}var de=Ie*Ie-4*Gt*oe,Ge=Math.sqrt(de);if(!(de<0)){var Re=(-Ie+Ge)/(2*oe);Re>0&&Re<1&&yt.push(Re);var Ke=(-Ie-Ge)/(2*oe);Ke>0&&Ke<1&&yt.push(Ke)}}for(var ze=yt.length,Ce=ze,dr;ze--;)Wt=yt[ze],dr=1-Wt,zt[0][ze]=dr*dr*dr*tt+3*dr*dr*Wt*Et+3*dr*Wt*Wt*$t+Wt*Wt*Wt*Qt,zt[1][ze]=dr*dr*dr*dt+3*dr*dr*Wt*Ot+3*dr*Wt*Wt*st+Wt*Wt*Wt*vt;return zt[0][Ce]=tt,zt[1][Ce]=dt,zt[0][Ce+1]=Qt,zt[1][Ce+1]=vt,zt[0].length=zt[1].length=Ce+2,{min:{x:Math.min.apply(0,zt[0]),y:Math.min.apply(0,zt[1])},max:{x:Math.max.apply(0,zt[0]),y:Math.max.apply(0,zt[1])}}},z=function(tt,dt,Et,Ot,$t,st,Qt,vt){if(!(Math.max(tt,Et)<Math.min($t,Qt)||Math.min(tt,Et)>Math.max($t,Qt)||Math.max(dt,Ot)<Math.min(st,vt)||Math.min(dt,Ot)>Math.max(st,vt))){var yt=(tt*Ot-dt*Et)*($t-Qt)-(tt-Et)*($t*vt-st*Qt),zt=(tt*Ot-dt*Et)*(st-vt)-(dt-Ot)*($t*vt-st*Qt),oe=(tt-Et)*(st-vt)-(dt-Ot)*($t-Qt);if(!!oe){var Ie=yt/oe,Gt=zt/oe,Wt=+Ie.toFixed(2),Ht=+Gt.toFixed(2);if(!(Wt<+Math.min(tt,Et).toFixed(2)||Wt>+Math.max(tt,Et).toFixed(2)||Wt<+Math.min($t,Qt).toFixed(2)||Wt>+Math.max($t,Qt).toFixed(2)||Ht<+Math.min(dt,Ot).toFixed(2)||Ht>+Math.max(dt,Ot).toFixed(2)||Ht<+Math.min(st,vt).toFixed(2)||Ht>+Math.max(st,vt).toFixed(2)))return{x:Ie,y:Gt}}}},b=function(tt,dt,Et){return dt>=tt.x&&dt<=tt.x+tt.width&&Et>=tt.y&&Et<=tt.y+tt.height},v=function(tt,dt,Et,Ot){return tt===null&&(tt=dt=Et=Ot=0),dt===null&&(dt=tt.y,Et=tt.width,Ot=tt.height,tt=tt.x),{x:tt,y:dt,width:Et,w:Et,height:Ot,h:Ot,x2:tt+Et,y2:dt+Ot,cx:tt+Et/2,cy:dt+Ot/2,r1:Math.min(Et,Ot)/2,r2:Math.max(Et,Ot)/2,r0:Math.sqrt(Et*Et+Ot*Ot)/2,path:rectPath(tt,dt,Et,Ot),vb:[tt,dt,Et,Ot].join(" ")}},$=function(tt,dt){return tt=v(tt),dt=v(dt),b(dt,tt.x,tt.y)||b(dt,tt.x2,tt.y)||b(dt,tt.x,tt.y2)||b(dt,tt.x2,tt.y2)||b(tt,dt.x,dt.y)||b(tt,dt.x2,dt.y)||b(tt,dt.x,dt.y2)||b(tt,dt.x2,dt.y2)||(tt.x<dt.x2&&tt.x>dt.x||dt.x<tt.x2&&dt.x>tt.x)&&(tt.y<dt.y2&&tt.y>dt.y||dt.y<tt.y2&&dt.y>tt.y)},et=function(tt,dt,Et,Ot,$t,st,Qt,vt){isArray(tt)||(tt=[tt,dt,Et,Ot,$t,st,Qt,vt]);var yt=lt.apply(null,tt);return v(yt.min.x,yt.min.y,yt.max.x-yt.min.x,yt.max.y-yt.min.y)},Z=function(tt,dt,Et,Ot,$t,st,Qt,vt,yt){var zt=1-yt,oe=Math.pow(zt,3),Ie=Math.pow(zt,2),Gt=yt*yt,Wt=Gt*yt,Ht=oe*tt+Ie*3*yt*Et+zt*3*yt*yt*$t+Wt*Qt,de=oe*dt+Ie*3*yt*Ot+zt*3*yt*yt*st+Wt*vt,Ge=tt+2*yt*(Et-tt)+Gt*($t-2*Et+tt),Re=dt+2*yt*(Ot-dt)+Gt*(st-2*Ot+dt),Ke=Et+2*yt*($t-Et)+Gt*(Qt-2*$t+Et),ze=Ot+2*yt*(st-Ot)+Gt*(vt-2*st+Ot),Ce=zt*tt+yt*Et,dr=zt*dt+yt*Ot,sr=zt*$t+yt*Qt,Tr=zt*st+yt*vt,qr=90-Math.atan2(Ge-Ke,Re-ze)*180/Math.PI;return{x:Ht,y:de,m:{x:Ge,y:Re},n:{x:Ke,y:ze},start:{x:Ce,y:dr},end:{x:sr,y:Tr},alpha:qr}},pt=function(tt,dt,Et){var Ot=et(tt),$t=et(dt);if(!$(Ot,$t))return Et?0:[];for(var st=Q.apply(0,tt),Qt=Q.apply(0,dt),vt=~~(st/8),yt=~~(Qt/8),zt=[],oe=[],Ie={},Gt=Et?0:[],Wt=0;Wt<vt+1;Wt++){var Ht=Z.apply(0,tt.concat(Wt/vt));zt.push({x:Ht.x,y:Ht.y,t:Wt/vt})}for(var Wt=0;Wt<yt+1;Wt++){var Ht=Z.apply(0,dt.concat(Wt/yt));oe.push({x:Ht.x,y:Ht.y,t:Wt/yt})}for(var Wt=0;Wt<vt;Wt++)for(var de=0;de<yt;de++){var Ge=zt[Wt],Re=zt[Wt+1],Ke=oe[de],ze=oe[de+1],Ce=Math.abs(Re.x-Ge.x)<.001?"y":"x",dr=Math.abs(ze.x-Ke.x)<.001?"y":"x",sr=z(Ge.x,Ge.y,Re.x,Re.y,Ke.x,Ke.y,ze.x,ze.y);if(sr){if(Ie[sr.x.toFixed(4)]===sr.y.toFixed(4))continue;Ie[sr.x.toFixed(4)]=sr.y.toFixed(4);var Tr=Ge.t+Math.abs((sr[Ce]-Ge[Ce])/(Re[Ce]-Ge[Ce]))*(Re.t-Ge.t),qr=Ke.t+Math.abs((sr[dr]-Ke[dr])/(ze[dr]-Ke[dr]))*(ze.t-Ke.t);Tr>=0&&Tr<=1&&qr>=0&&qr<=1&&(Et?Gt++:Gt.push({x:sr.x,y:sr.y,t1:Tr,t2:qr}))}}return Gt},_t=function(tt,dt,Et){tt=path2Curve(tt),dt=path2Curve(dt);for(var Ot,$t,st,Qt,vt,yt,zt,oe,Ie,Gt,Wt=Et?0:[],Ht=0,de=tt.length;Ht<de;Ht++){var Ge=tt[Ht];if(Ge[0]==="M")Ot=vt=Ge[1],$t=yt=Ge[2];else{Ge[0]==="C"?(Ie=[Ot,$t].concat(Ge.slice(1)),Ot=Ie[6],$t=Ie[7]):(Ie=[Ot,$t,Ot,$t,vt,yt,vt,yt],Ot=vt,$t=yt);for(var Re=0,Ke=dt.length;Re<Ke;Re++){var ze=dt[Re];if(ze[0]==="M")st=zt=ze[1],Qt=oe=ze[2];else{ze[0]==="C"?(Gt=[st,Qt].concat(ze.slice(1)),st=Gt[6],Qt=Gt[7]):(Gt=[st,Qt,st,Qt,zt,oe,zt,oe],st=zt,Qt=oe);var Ce=pt(Ie,Gt,Et);if(Et)Wt+=Ce;else{for(var dr=0,sr=Ce.length;dr<sr;dr++)Ce[dr].segment1=Ht,Ce[dr].segment2=Re,Ce[dr].bez1=Ie,Ce[dr].bez2=Gt;Wt=Wt.concat(Ce)}}}}}return Wt};function It(tt,dt){return _t(tt,dt)}function Rt(tt){return Math.sqrt(tt[0]*tt[0]+tt[1]*tt[1])}function H(tt,dt){return Rt(tt)*Rt(dt)?(tt[0]*dt[0]+tt[1]*dt[1])/(Rt(tt)*Rt(dt)):1}function ot(tt,dt){return(tt[0]*dt[1]<tt[1]*dt[0]?-1:1)*Math.acos(H(tt,dt))}function St(tt,dt){return tt[0]===dt[0]&&tt[1]===dt[1]}function Ut(tt,dt){var Et=dt[1],Ot=dt[2],$t=(0,y.mod)((0,y.toRadian)(dt[3]),Math.PI*2),st=dt[4],Qt=dt[5],vt=tt[0],yt=tt[1],zt=dt[6],oe=dt[7],Ie=Math.cos($t)*(vt-zt)/2+Math.sin($t)*(yt-oe)/2,Gt=-1*Math.sin($t)*(vt-zt)/2+Math.cos($t)*(yt-oe)/2,Wt=Ie*Ie/(Et*Et)+Gt*Gt/(Ot*Ot);Wt>1&&(Et*=Math.sqrt(Wt),Ot*=Math.sqrt(Wt));var Ht=Et*Et*(Gt*Gt)+Ot*Ot*(Ie*Ie),de=Ht?Math.sqrt((Et*Et*(Ot*Ot)-Ht)/Ht):1;st===Qt&&(de*=-1),isNaN(de)&&(de=0);var Ge=Ot?de*Et*Gt/Ot:0,Re=Et?de*-Ot*Ie/Et:0,Ke=(vt+zt)/2+Math.cos($t)*Ge-Math.sin($t)*Re,ze=(yt+oe)/2+Math.sin($t)*Ge+Math.cos($t)*Re,Ce=[(Ie-Ge)/Et,(Gt-Re)/Ot],dr=[(-1*Ie-Ge)/Et,(-1*Gt-Re)/Ot],sr=ot([1,0],Ce),Tr=ot(Ce,dr);return H(Ce,dr)<=-1&&(Tr=Math.PI),H(Ce,dr)>=1&&(Tr=0),Qt===0&&Tr>0&&(Tr=Tr-2*Math.PI),Qt===1&&Tr<0&&(Tr=Tr+2*Math.PI),{cx:Ke,cy:ze,rx:St(tt,[zt,oe])?0:Et,ry:St(tt,[zt,oe])?0:Ot,startAngle:sr,endAngle:sr+Tr,xRotation:$t,arcFlag:st,sweepFlag:Qt}}function ae(tt,dt){return[dt[0]+(dt[0]-tt[0]),dt[1]+(dt[1]-tt[1])]}function bt(tt){tt=E(tt);for(var dt=[],Et=null,Ot=null,$t=null,st=0,Qt=tt.length,vt=0;vt<Qt;vt++){var yt=tt[vt];Ot=tt[vt+1];var zt=yt[0],oe={command:zt,prePoint:Et,params:yt,startTangent:null,endTangent:null};switch(zt){case"M":$t=[yt[1],yt[2]],st=vt;break;case"A":var Ie=Ut(Et,yt);oe.arcParams=Ie;break;default:break}if(zt==="Z")Et=$t,Ot=tt[st+1];else{var Gt=yt.length;Et=[yt[Gt-2],yt[Gt-1]]}Ot&&Ot[0]==="Z"&&(Ot=tt[st],dt[st]&&(dt[st].prePoint=Et)),oe.currentPoint=Et,dt[st]&&St(Et,dt[st].currentPoint)&&(dt[st].prePoint=oe.prePoint);var Wt=Ot?[Ot[Ot.length-2],Ot[Ot.length-1]]:null;oe.nextPoint=Wt;var Ht=oe.prePoint;if(["L","H","V"].includes(zt))oe.startTangent=[Ht[0]-Et[0],Ht[1]-Et[1]],oe.endTangent=[Et[0]-Ht[0],Et[1]-Ht[1]];else if(zt==="Q"){var de=[yt[1],yt[2]];oe.startTangent=[Ht[0]-de[0],Ht[1]-de[1]],oe.endTangent=[Et[0]-de[0],Et[1]-de[1]]}else if(zt==="T"){var Ge=dt[vt-1],de=ae(Ge.currentPoint,Ht);Ge.command==="Q"?(oe.command="Q",oe.startTangent=[Ht[0]-de[0],Ht[1]-de[1]],oe.endTangent=[Et[0]-de[0],Et[1]-de[1]]):(oe.command="TL",oe.startTangent=[Ht[0]-Et[0],Ht[1]-Et[1]],oe.endTangent=[Et[0]-Ht[0],Et[1]-Ht[1]])}else if(zt==="C"){var Re=[yt[1],yt[2]],Ke=[yt[3],yt[4]];oe.startTangent=[Ht[0]-Re[0],Ht[1]-Re[1]],oe.endTangent=[Et[0]-Ke[0],Et[1]-Ke[1]]}else if(zt==="S"){var Ge=dt[vt-1],Re=ae(Ge.currentPoint,Ht),Ke=[yt[1],yt[2]];Ge.command==="C"?(oe.command="C",oe.startTangent=[Ht[0]-Re[0],Ht[1]-Re[1]],oe.endTangent=[Et[0]-Ke[0],Et[1]-Ke[1]]):(oe.command="SQ",oe.startTangent=[Ht[0]-Ke[0],Ht[1]-Ke[1]],oe.endTangent=[Et[0]-Ke[0],Et[1]-Ke[1]])}else if(zt==="A"){var ze=.001,Ce=oe.arcParams||{},dr=Ce.cx,sr=dr===void 0?0:dr,Tr=Ce.cy,qr=Tr===void 0?0:Tr,fn=Ce.rx,Rn=fn===void 0?0:fn,Yr=Ce.ry,Nn=Yr===void 0?0:Yr,Vr=Ce.sweepFlag,ki=Vr===void 0?0:Vr,vn=Ce.startAngle,$r=vn===void 0?0:vn,En=Ce.endAngle,In=En===void 0?0:En;ki===0&&(ze*=-1);var On=Rn*Math.cos($r-ze)+sr,ta=Nn*Math.sin($r-ze)+qr;oe.startTangent=[On-$t[0],ta-$t[1]];var Wi=Rn*Math.cos($r+In+ze)+sr,kn=Nn*Math.sin($r+In-ze)+qr;oe.endTangent=[Ht[0]-Wi,Ht[1]-kn]}dt.push(oe)}return dt}var wt=1e-6;function ft(tt){return Math.abs(tt)<wt?0:tt<0?-1:1}function ht(tt,dt,Et){return(Et[0]-tt[0])*(dt[1]-tt[1])==(dt[0]-tt[0])*(Et[1]-tt[1])&&Math.min(tt[0],dt[0])<=Et[0]&&Et[0]<=Math.max(tt[0],dt[0])&&Math.min(tt[1],dt[1])<=Et[1]&&Et[1]<=Math.max(tt[1],dt[1])}function Pt(tt,dt,Et){var Ot=!1,$t=tt.length;if($t<=2)return!1;for(var st=0;st<$t;st++){var Qt=tt[st],vt=tt[(st+1)%$t];if(ht(Qt,vt,[dt,Et]))return!0;ft(Qt[1]-Et)>0!=ft(vt[1]-Et)>0&&ft(dt-(Et-Qt[1])*(Qt[0]-vt[0])/(Qt[1]-vt[1])-Qt[0])<0&&(Ot=!Ot)}return Ot}var Lt=function(tt,dt,Et){return tt>=dt&&tt<=Et};function jt(tt,dt,Et,Ot){var $t=.001,st={x:Et.x-tt.x,y:Et.y-tt.y},Qt={x:dt.x-tt.x,y:dt.y-tt.y},vt={x:Ot.x-Et.x,y:Ot.y-Et.y},yt=Qt.x*vt.y-Qt.y*vt.x,zt=yt*yt,oe=Qt.x*Qt.x+Qt.y*Qt.y,Ie=vt.x*vt.x+vt.y*vt.y,Gt=null;if(zt>$t*oe*Ie){var Wt=(st.x*vt.y-st.y*vt.x)/yt,Ht=(st.x*Qt.y-st.y*Qt.x)/yt;Lt(Wt,0,1)&&Lt(Ht,0,1)&&(Gt={x:tt.x+Wt*Qt.x,y:tt.y+Wt*Qt.y})}return Gt}function mt(tt){for(var dt=[],Et=tt.length,Ot=0;Ot<Et-1;Ot++){var $t=tt[Ot],st=tt[Ot+1];dt.push({from:{x:$t[0],y:$t[1]},to:{x:st[0],y:st[1]}})}if(dt.length>1){var Qt=tt[0],vt=tt[Et-1];dt.push({from:{x:vt[0],y:vt[1]},to:{x:Qt[0],y:Qt[1]}})}return dt}function W(tt,dt){var Et=!1;return(0,y.each)(tt,function(Ot){if(jt(Ot.from,Ot.to,dt.from,dt.to))return Et=!0,!1}),Et}function rt(tt){var dt=tt.map(function(Ot){return Ot[0]}),Et=tt.map(function(Ot){return Ot[1]});return{minX:Math.min.apply(null,dt),maxX:Math.max.apply(null,dt),minY:Math.min.apply(null,Et),maxY:Math.max.apply(null,Et)}}function ct(tt,dt){return!(dt.minX>tt.maxX||dt.maxX<tt.minX||dt.minY>tt.maxY||dt.maxY<tt.minY)}function At(tt,dt){if(tt.length<2||dt.length<2)return!1;var Et=rt(tt),Ot=rt(dt);if(!ct(Et,Ot))return!1;var $t=!1;if((0,y.each)(dt,function(yt){if(Pt(tt,yt[0],yt[1]))return $t=!0,!1}),$t||((0,y.each)(tt,function(yt){if(Pt(dt,yt[0],yt[1]))return $t=!0,!1}),$t))return!0;var st=mt(tt),Qt=mt(dt),vt=!1;return(0,y.each)(Qt,function(yt){if(W(st,yt))return vt=!0,!1}),vt}},6802:function(ut,L,x){"use strict";x.r(L),x.d(L,{Cache:function(){return gl},assign:function(){return bo},augment:function(){return hl},clamp:function(){return In},clearAnimationFrame:function(){return zd},clone:function(){return Nf},contains:function(){return w},debounce:function(){return kf},deepMix:function(){return Ud},difference:function(){return I},each:function(){return J},endsWith:function(){return Ht},every:function(){return Ge},extend:function(){return Uf},filter:function(){return A},find:function(){return et},findIndex:function(){return pt},firstValue:function(){return It},fixedBase:function(){return ta},flatten:function(){return H},flattenDeep:function(){return St},forIn:function(){return Yl},get:function(){return vl},getRange:function(){return wt},getType:function(){return cl},getWrapBehavior:function(){return fn},group:function(){return Tr},groupBy:function(){return dr},groupToMap:function(){return sr},has:function(){return ec},hasKey:function(){return Pd},hasValue:function(){return Tf},head:function(){return zt},identity:function(){return us},includes:function(){return w},indexOf:function(){return ua},isArguments:function(){return ns},isArray:function(){return U},isArrayLike:function(){return P},isBoolean:function(){return Ro},isDate:function(){return ac},isDecimal:function(){return gn},isElement:function(){return lc},isEmpty:function(){return uo},isEqual:function(){return $l},isEqualWith:function(){return Ja},isError:function(){return fl},isEven:function(){return fi},isFinite:function(){return Pf},isFunction:function(){return B},isInteger:function(){return mo},isMatch:function(){return Q},isNegative:function(){return lo},isNil:function(){return k},isNull:function(){return Lf},isNumber:function(){return kn},isNumberEqual:function(){return Lo},isObject:function(){return Y},isObjectLike:function(){return z},isOdd:function(){return Vi},isPlainObject:function(){return v},isPositive:function(){return Xi},isPrototype:function(){return oc},isRegExp:function(){return Gd},isString:function(){return Et},isType:function(){return D},isUndefined:function(){return as},keys:function(){return X},last:function(){return oe},lowerCase:function(){return ul},lowerFirst:function(){return If},map:function(){return Wd},mapValues:function(){return Xd},max:function(){return Ut},maxBy:function(){return $a},memoize:function(){return Bf},min:function(){return ae},minBy:function(){return Ss},mix:function(){return bo},mod:function(){return sl},noop:function(){return Ql},number2color:function(){return ki},omit:function(){return wn},parseRadius:function(){return $r},pick:function(){return So},pull:function(){return jt},pullAt:function(){return rt},reduce:function(){return At},remove:function(){return dt},requestAnimationFrame:function(){return la},set:function(){return Yd},size:function(){return hc},some:function(){return Ke},sortBy:function(){return $t},startsWith:function(){return Gt},substitute:function(){return Rd},throttle:function(){return cc},toArray:function(){return Wf},toDegree:function(){return ws},toInteger:function(){return Mf},toRadian:function(){return Od},toString:function(){return ll},union:function(){return vt},uniq:function(){return st},uniqueId:function(){return fc},upperCase:function(){return kd},upperFirst:function(){return Qa},values:function(){return xo},valuesOfKey:function(){return yt},wrapBehavior:function(){return Yr}});var y=function(Mt){return Mt!==null&&typeof Mt!="function"&&isFinite(Mt.length)},P=y,N=function(Mt,Xt){return P(Mt)?Mt.indexOf(Xt)>-1:!1},w=N,E=function(Mt,Xt){if(!P(Mt))return Mt;for(var se=[],be=0;be<Mt.length;be++){var Ue=Mt[be];Xt(Ue,be)&&se.push(Ue)}return se},A=E,O=function(Mt,Xt){return Xt===void 0&&(Xt=[]),A(Mt,function(se){return!w(Xt,se)})},I=O,C={}.toString,T=function(Mt,Xt){return C.call(Mt)==="[object "+Xt+"]"},D=T,B=function(Mt){return D(Mt,"Function")},G=function(Mt){return Mt==null},k=G,U=function(Mt){return Array.isArray?Array.isArray(Mt):D(Mt,"Array")},Y=function(Mt){var Xt=typeof Mt;return Mt!==null&&Xt==="object"||Xt==="function"};function K(Mt,Xt){if(!!Mt){var se;if(U(Mt))for(var be=0,Ue=Mt.length;be<Ue&&(se=Xt(Mt[be],be),se!==!1);be++);else if(Y(Mt)){for(var mr in Mt)if(Mt.hasOwnProperty(mr)&&(se=Xt(Mt[mr],mr),se===!1))break}}}var J=K,q=Object.keys?function(Mt){return Object.keys(Mt)}:function(Mt){var Xt=[];return J(Mt,function(se,be){B(Mt)&&be==="prototype"||Xt.push(be)}),Xt},X=q;function j(Mt,Xt){var se=X(Xt),be=se.length;if(k(Mt))return!be;for(var Ue=0;Ue<be;Ue+=1){var mr=se[Ue];if(Xt[mr]!==Mt[mr]||!(mr in Mt))return!1}return!0}var Q=j,lt=function(Mt){return typeof Mt=="object"&&Mt!==null},z=lt,b=function(Mt){if(!z(Mt)||!D(Mt,"Object"))return!1;if(Object.getPrototypeOf(Mt)===null)return!0;for(var Xt=Mt;Object.getPrototypeOf(Xt)!==null;)Xt=Object.getPrototypeOf(Xt);return Object.getPrototypeOf(Mt)===Xt},v=b;function $(Mt,Xt){if(!U(Mt))return null;var se;if(B(Xt)&&(se=Xt),v(Xt)&&(se=function(Ue){return Q(Ue,Xt)}),se){for(var be=0;be<Mt.length;be+=1)if(se(Mt[be]))return Mt[be]}return null}var et=$;function Z(Mt,Xt,se){se===void 0&&(se=0);for(var be=se;be<Mt.length;be++)if(Xt(Mt[be],be))return be;return-1}var pt=Z,_t=function(Mt,Xt){for(var se=null,be=0;be<Mt.length;be++){var Ue=Mt[be],mr=Ue[Xt];if(!k(mr)){U(mr)?se=mr[0]:se=mr;break}}return se},It=_t,Rt=function(Mt){if(!U(Mt))return[];for(var Xt=[],se=0;se<Mt.length;se++)Xt=Xt.concat(Mt[se]);return Xt},H=Rt,ot=function(Mt,Xt){if(Xt===void 0&&(Xt=[]),!U(Mt))Xt.push(Mt);else for(var se=0;se<Mt.length;se+=1)ot(Mt[se],Xt);return Xt},St=ot,Ut=function(Mt){if(!!U(Mt))return Mt.reduce(function(Xt,se){return Math.max(Xt,se)},Mt[0])},ae=function(Mt){if(!!U(Mt))return Mt.reduce(function(Xt,se){return Math.min(Xt,se)},Mt[0])},bt=function(Mt){var Xt=Mt.filter(function(kr){return!isNaN(kr)});if(!Xt.length)return{min:0,max:0};if(U(Mt[0])){for(var se=[],be=0;be<Mt.length;be++)se=se.concat(Mt[be]);Xt=se}var Ue=Ut(Xt),mr=ae(Xt);return{min:mr,max:Ue}},wt=bt,ft=Array.prototype,ht=ft.splice,Pt=ft.indexOf,Lt=function(Mt){for(var Xt=[],se=1;se<arguments.length;se++)Xt[se-1]=arguments[se];for(var be=0;be<Xt.length;be++)for(var Ue=Xt[be],mr=-1;(mr=Pt.call(Mt,Ue))>-1;)ht.call(Mt,mr,1);return Mt},jt=Lt,mt=Array.prototype.splice,W=function(Xt,se){if(!P(Xt))return[];for(var be=Xt?se.length:0,Ue=be-1;be--;){var mr=void 0,kr=se[be];(be===Ue||kr!==mr)&&(mr=kr,mt.call(Xt,kr,1))}return Xt},rt=W,ct=function(Mt,Xt,se){if(!U(Mt)&&!v(Mt))return Mt;var be=se;return J(Mt,function(Ue,mr){be=Xt(be,Ue,mr)}),be},At=ct,tt=function(Mt,Xt){var se=[];if(!P(Mt))return se;for(var be=-1,Ue=[],mr=Mt.length;++be<mr;){var kr=Mt[be];Xt(kr,be,Mt)&&(se.push(kr),Ue.push(be))}return rt(Mt,Ue),se},dt=tt,Et=function(Mt){return D(Mt,"String")};function Ot(Mt,Xt){var se;if(B(Xt))se=function(Ue,mr){return Xt(Ue)-Xt(mr)};else{var be=[];Et(Xt)?be.push(Xt):U(Xt)&&(be=Xt),se=function(Ue,mr){for(var kr=0;kr<be.length;kr+=1){var ri=be[kr];if(Ue[ri]>mr[ri])return 1;if(Ue[ri]<mr[ri])return-1}return 0}}return Mt.sort(se),Mt}var $t=Ot;function st(Mt,Xt){Xt===void 0&&(Xt=new Map);var se=[];if(Array.isArray(Mt))for(var be=0,Ue=Mt.length;be<Ue;be++){var mr=Mt[be];Xt.has(mr)||(se.push(mr),Xt.set(mr,!0))}return se}var Qt=function(){for(var Mt=[],Xt=0;Xt<arguments.length;Xt++)Mt[Xt]=arguments[Xt];return st([].concat.apply([],Mt))},vt=Qt,yt=function(Mt,Xt){for(var se=[],be={},Ue=0;Ue<Mt.length;Ue++){var mr=Mt[Ue],kr=mr[Xt];if(!k(kr)){U(kr)||(kr=[kr]);for(var ri=0;ri<kr.length;ri++){var co=kr[ri];be[co]||(se.push(co),be[co]=!0)}}}return se};function zt(Mt){if(P(Mt))return Mt[0]}function oe(Mt){if(P(Mt)){var Xt=Mt;return Xt[Xt.length-1]}}function Ie(Mt,Xt){return U(Mt)||Et(Mt)?Mt[0]===Xt:!1}var Gt=Ie;function Wt(Mt,Xt){return U(Mt)||Et(Mt)?Mt[Mt.length-1]===Xt:!1}var Ht=Wt,de=function(Mt,Xt){for(var se=0;se<Mt.length;se++)if(!Xt(Mt[se],se))return!1;return!0},Ge=de,Re=function(Mt,Xt){for(var se=0;se<Mt.length;se++)if(Xt(Mt[se],se))return!0;return!1},Ke=Re,ze=Object.prototype.hasOwnProperty;function Ce(Mt,Xt){if(!Xt||!U(Mt))return{};for(var se={},be=B(Xt)?Xt:function(ri){return ri[Xt]},Ue,mr=0;mr<Mt.length;mr++){var kr=Mt[mr];Ue=be(kr),ze.call(se,Ue)?se[Ue].push(kr):se[Ue]=[kr]}return se}var dr=Ce;function sr(Mt,Xt){if(!Xt)return{0:Mt};if(!B(Xt)){var se=U(Xt)?Xt:Xt.replace(/\s+/g,"").split("*");Xt=function(be){for(var Ue="_",mr=0,kr=se.length;mr<kr;mr++)Ue+=be[se[mr]]&&be[se[mr]].toString();return Ue}}return dr(Mt,Xt)}var Tr=function(Mt,Xt){if(!Xt)return[Mt];var se=sr(Mt,Xt),be=[];for(var Ue in se)be.push(se[Ue]);return be};function qr(Mt,Xt){return Mt["_wrap_"+Xt]}var fn=qr;function Rn(Mt,Xt){if(Mt["_wrap_"+Xt])return Mt["_wrap_"+Xt];var se=function(be){Mt[Xt](be)};return Mt["_wrap_"+Xt]=se,se}var Yr=Rn,Nn={};function Vr(Mt){var Xt=Nn[Mt];if(!Xt){for(var se=Mt.toString(16),be=se.length;be<6;be++)se="0"+se;Xt="#"+se,Nn[Mt]=Xt}return Xt}var ki=Vr;function vn(Mt){var Xt=0,se=0,be=0,Ue=0;return U(Mt)?Mt.length===1?Xt=se=be=Ue=Mt[0]:Mt.length===2?(Xt=be=Mt[0],se=Ue=Mt[1]):Mt.length===3?(Xt=Mt[0],se=Ue=Mt[1],be=Mt[2]):(Xt=Mt[0],se=Mt[1],be=Mt[2],Ue=Mt[3]):Xt=se=be=Ue=Mt,{r1:Xt,r2:se,r3:be,r4:Ue}}var $r=vn,En=function(Mt,Xt,se){return Mt<Xt?Xt:Mt>se?se:Mt},In=En,On=function(Mt,Xt){var se=Xt.toString(),be=se.indexOf(".");if(be===-1)return Math.round(Mt);var Ue=se.substr(be+1).length;return Ue>20&&(Ue=20),parseFloat(Mt.toFixed(Ue))},ta=On,Wi=function(Mt){return D(Mt,"Number")},kn=Wi,Bi=function(Mt){return kn(Mt)&&Mt%1!=0},gn=Bi,ci=function(Mt){return kn(Mt)&&Mt%2==0},fi=ci,pi=Number.isInteger?Number.isInteger:function(Mt){return kn(Mt)&&Mt%1==0},mo=pi,ka=function(Mt){return kn(Mt)&&Mt<0},lo=ka,Ca=1e-5;function Lo(Mt,Xt,se){return se===void 0&&(se=Ca),Math.abs(Mt-Xt)<se}var $n=function(Mt){return kn(Mt)&&Mt%2!=0},Vi=$n,Fi=function(Mt){return kn(Mt)&&Mt>0},Xi=Fi,$a=function(Mt,Xt){if(!!U(Mt)){for(var se,be=-Infinity,Ue=0;Ue<Mt.length;Ue++){var mr=Mt[Ue],kr=B(Xt)?Xt(mr):mr[Xt];kr>be&&(se=mr,be=kr)}return se}},Ss=function(Mt,Xt){if(!!U(Mt)){for(var se,be=Infinity,Ue=0;Ue<Mt.length;Ue++){var mr=Mt[Ue],kr=B(Xt)?Xt(mr):mr[Xt];kr<be&&(se=mr,be=kr)}return se}},Es=function(Mt,Xt){return(Mt%Xt+Xt)%Xt},sl=Es,Vl=180/Math.PI,Xl=function(Mt){return Vl*Mt},ws=Xl,Mf=parseInt,Af=Math.PI/180,tc=function(Mt){return Af*Mt},Od=tc,Yl=J,ec=function(Mt,Xt){return Mt.hasOwnProperty(Xt)},Pd=ec,Dd=Object.values?function(Mt){return Object.values(Mt)}:function(Mt){var Xt=[];return J(Mt,function(se,be){B(Mt)&&be==="prototype"||Xt.push(se)}),Xt},xo=Dd,Tf=function(Mt,Xt){return w(xo(Mt),Xt)},ll=function(Mt){return k(Mt)?"":Mt.toString()},Ld=function(Mt){return ll(Mt).toLowerCase()},ul=Ld,rc=function(Mt){var Xt=ll(Mt);return Xt.charAt(0).toLowerCase()+Xt.substring(1)},If=rc;function nc(Mt,Xt){return!Mt||!Xt?Mt:Mt.replace(/\\?\{([^{}]+)\}/g,function(se,be){return se.charAt(0)==="\\"?se.slice(1):Xt[be]===void 0?"":Xt[be]})}var Rd=nc,Nd=function(Mt){return ll(Mt).toUpperCase()},kd=Nd,Of=function(Mt){var Xt=ll(Mt);return Xt.charAt(0).toUpperCase()+Xt.substring(1)},Qa=Of,yi={}.toString,Hl=function(Mt){return yi.call(Mt).replace(/^\[object /,"").replace(/]$/,"")},cl=Hl,Bd=function(Mt){return D(Mt,"Arguments")},ns=Bd,ic=function(Mt){return D(Mt,"Boolean")},Ro=ic,No=function(Mt){return D(Mt,"Date")},ac=No,Fd=function(Mt){return D(Mt,"Error")},fl=Fd;function Pf(Mt){return kn(Mt)&&isFinite(Mt)}var Df=function(Mt){return Mt===null},Lf=Df,ko=Object.prototype,Rf=function(Mt){var Xt=Mt&&Mt.constructor,se=typeof Xt=="function"&&Xt.prototype||ko;return Mt===se},oc=Rf,is=function(Mt){return D(Mt,"RegExp")},Gd=is,sc=function(Mt){return Mt===void 0},as=sc,jl=function(Mt){return Mt instanceof Element||Mt instanceof HTMLDocument},lc=jl;function la(Mt){var Xt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(se){return setTimeout(se,16)};return Xt(Mt)}function zd(Mt){var Xt=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;Xt(Mt)}function Cs(Mt,Xt){for(var se in Xt)Xt.hasOwnProperty(se)&&se!=="constructor"&&Xt[se]!==void 0&&(Mt[se]=Xt[se])}function bo(Mt,Xt,se,be){return Xt&&Cs(Mt,Xt),se&&Cs(Mt,se),be&&Cs(Mt,be),Mt}var _o=function(){for(var Mt=[],Xt=0;Xt<arguments.length;Xt++)Mt[Xt]=arguments[Xt];for(var se=Mt[0],be=1;be<Mt.length;be++){var Ue=Mt[be];B(Ue)&&(Ue=Ue.prototype),bo(se.prototype,Ue)}},hl=_o,dl=function(Mt){if(typeof Mt!="object"||Mt===null)return Mt;var Xt;if(U(Mt)){Xt=[];for(var se=0,be=Mt.length;se<be;se++)typeof Mt[se]=="object"&&Mt[se]!=null?Xt[se]=dl(Mt[se]):Xt[se]=Mt[se]}else{Xt={};for(var Ue in Mt)typeof Mt[Ue]=="object"&&Mt[Ue]!=null?Xt[Ue]=dl(Mt[Ue]):Xt[Ue]=Mt[Ue]}return Xt},Nf=dl;function Zl(Mt,Xt,se){var be;return function(){var Ue=this,mr=arguments,kr=function(){be=null,se||Mt.apply(Ue,mr)},ri=se&&!be;clearTimeout(be),be=setTimeout(kr,Xt),ri&&Mt.apply(Ue,mr)}}var kf=Zl,Bf=function(Mt,Xt){if(!B(Mt))throw new TypeError("Expected a function");var se=function(){for(var be=[],Ue=0;Ue<arguments.length;Ue++)be[Ue]=arguments[Ue];var mr=Xt?Xt.apply(this,be):be[0],kr=se.cache;if(kr.has(mr))return kr.get(mr);var ri=Mt.apply(this,be);return kr.set(mr,ri),ri};return se.cache=new Map,se},Ff=5;function Gf(Mt,Xt,se,be){se=se||0,be=be||Ff;for(var Ue in Xt)if(Xt.hasOwnProperty(Ue)){var mr=Xt[Ue];mr!==null&&v(mr)?(v(Mt[Ue])||(Mt[Ue]={}),se<be?Gf(Mt[Ue],mr,se+1,be):Mt[Ue]=Xt[Ue]):U(mr)?(Mt[Ue]=[],Mt[Ue]=Mt[Ue].concat(mr)):mr!==void 0&&(Mt[Ue]=mr)}}var zf=function(Mt){for(var Xt=[],se=1;se<arguments.length;se++)Xt[se-1]=arguments[se];for(var be=0;be<Xt.length;be+=1)Gf(Mt,Xt[be]);return Mt},Ud=zf,os=function(Mt,Xt,se,be){B(Xt)||(se=Xt,Xt=Mt,Mt=function(){});var Ue=Object.create?function(kr,ri){return Object.create(kr,{constructor:{value:ri}})}:function(kr,ri){function co(){}co.prototype=kr;var Bo=new co;return Bo.constructor=ri,Bo},mr=Ue(Xt.prototype,Mt);return Mt.prototype=bo(mr,Mt.prototype),Mt.superclass=Ue(Xt.prototype,Xt),bo(mr,se),bo(Mt,be),Mt},Uf=os,Kl=function(Mt,Xt){if(!P(Mt))return-1;var se=Array.prototype.indexOf;if(se)return se.call(Mt,Xt);for(var be=-1,Ue=0;Ue<Mt.length;Ue++)if(Mt[Ue]===Xt){be=Ue;break}return be},ua=Kl,ss=Object.prototype.hasOwnProperty;function Ba(Mt){if(k(Mt))return!0;if(P(Mt))return!Mt.length;var Xt=cl(Mt);if(Xt==="Map"||Xt==="Set")return!Mt.size;if(oc(Mt))return!Object.keys(Mt).length;for(var se in Mt)if(ss.call(Mt,se))return!1;return!0}var uo=Ba,Fa=function(Mt,Xt){if(Mt===Xt)return!0;if(!Mt||!Xt||Et(Mt)||Et(Xt))return!1;if(P(Mt)||P(Xt)){if(Mt.length!==Xt.length)return!1;for(var se=!0,be=0;be<Mt.length&&(se=Fa(Mt[be],Xt[be]),!!se);be++);return se}if(z(Mt)||z(Xt)){var Ue=Object.keys(Mt),mr=Object.keys(Xt);if(Ue.length!==mr.length)return!1;for(var se=!0,be=0;be<Ue.length&&(se=Fa(Mt[Ue[be]],Xt[Ue[be]]),!!se);be++);return se}return!1},$l=Fa,Ja=function(Mt,Xt,se){return B(se)?!!se(Mt,Xt):$l(Mt,Xt)},uc=function(Mt,Xt){if(!P(Mt))return Mt;for(var se=[],be=0;be<Mt.length;be++){var Ue=Mt[be];se.push(Xt(Ue,be))}return se},Wd=uc,Vd=function(Mt){return Mt},Xd=function(Mt,Xt){Xt===void 0&&(Xt=Vd);var se={};return Y(Mt)&&!k(Mt)&&Object.keys(Mt).forEach(function(be){se[be]=Xt(Mt[be],be)}),se},vl=function(Mt,Xt,se){for(var be=0,Ue=Et(Xt)?Xt.split("."):Xt;Mt&&be<Ue.length;)Mt=Mt[Ue[be++]];return Mt===void 0||be<Ue.length?se:Mt},Yd=function(Mt,Xt,se){var be=Mt,Ue=Et(Xt)?Xt.split("."):Xt;return Ue.forEach(function(mr,kr){kr<Ue.length-1?(Y(be[mr])||(be[mr]=kn(Ue[kr+1])?[]:{}),be=be[mr]):be[mr]=se}),Mt},ls=Object.prototype.hasOwnProperty,So=function(Mt,Xt){if(Mt===null||!v(Mt))return{};var se={};return J(Xt,function(be){ls.call(Mt,be)&&(se[be]=Mt[be])}),se},wn=function(Mt,Xt){return At(Mt,function(se,be,Ue){return Xt.includes(Ue)||(se[Ue]=be),se},{})},cc=function(Mt,Xt,se){var be,Ue,mr,kr,ri=0;se||(se={});var co=function(){ri=se.leading===!1?0:Date.now(),be=null,kr=Mt.apply(Ue,mr),be||(Ue=mr=null)},Bo=function(){var ql=Date.now();!ri&&se.leading===!1&&(ri=ql);var Ms=Xt-(ql-ri);return Ue=this,mr=arguments,Ms<=0||Ms>Xt?(be&&(clearTimeout(be),be=null),ri=ql,kr=Mt.apply(Ue,mr),be||(Ue=mr=null)):!be&&se.trailing!==!1&&(be=setTimeout(co,Ms)),kr};return Bo.cancel=function(){clearTimeout(be),ri=0,be=Ue=mr=null},Bo},Wf=function(Mt){return P(Mt)?Array.prototype.slice.call(Mt):[]},Ga={},fc=function(Mt){return Mt=Mt||"g",Ga[Mt]?Ga[Mt]+=1:Ga[Mt]=1,Mt+Ga[Mt]},Ql=function(){},us=function(Mt){return Mt};function hc(Mt){return k(Mt)?0:P(Mt)?Mt.length:Object.keys(Mt).length}var Jl=function(){function Mt(){this.map={}}return Mt.prototype.has=function(Xt){return this.map[Xt]!==void 0},Mt.prototype.get=function(Xt,se){var be=this.map[Xt];return be===void 0?se:be},Mt.prototype.set=function(Xt,se){this.map[Xt]=se},Mt.prototype.clear=function(){this.map={}},Mt.prototype.delete=function(Xt){delete this.map[Xt]},Mt.prototype.size=function(){return Object.keys(this.map).length},Mt}(),gl=Jl},98344:function(ut,L){"use strict";var x;x={value:!0};var y;(function(Z){Z.TextureCompressionBC="texture-compression-bc"})(y=L.UX||(L.UX={}));var P;(function(Z){Z.ClampToEdge="clamp-to-edge",Z.Repeat="repeat",Z.MirrorRepeat="mirror-repeat"})(P=L.OB||(L.OB={}));var N;(function(Z){Z.UniformBuffer="uniform-buffer",Z.StorageBuffer="storage-buffer",Z.ReadonlyStorageBuffer="readonly-storage-buffer",Z.Sampler="sampler",Z.ComparisonSampler="comparison-sampler",Z.SampledTexture="sampled-texture",Z.ReadonlyStorageTexture="readonly-storage-texture",Z.WriteonlyStorageTexture="writeonly-storage-texture"})(N=L.$l||(L.$l={}));var w;(function(Z){Z.Zero="zero",Z.One="one",Z.SrcColor="src-color",Z.OneMinusSrcColor="one-minus-src-color",Z.SrcAlpha="src-alpha",Z.OneMinusSrcAlpha="one-minus-src-alpha",Z.DstColor="dst-color",Z.OneMinusDstColor="one-minus-dst-color",Z.DstAlpha="dst-alpha",Z.OneMinusDstAlpha="one-minus-dst-alpha",Z.SrcAlphaSaturated="src-alpha-saturated",Z.BlendColor="blend-color",Z.OneMinusBlendColor="one-minus-blend-color"})(w=L.zi||(L.zi={}));var E;(function(Z){Z.Add="add",Z.Subtract="subtract",Z.ReverseSubtract="reverse-subtract",Z.Min="min",Z.Max="max"})(E=L.db||(L.db={}));var A;(function(Z){Z.Never="never",Z.Less="less",Z.Equal="equal",Z.LessEqual="less-equal",Z.Greater="greater",Z.NotEqual="not-equal",Z.GreaterEqual="greater-equal",Z.Always="always"})(A=L.wb||(L.wb={}));var O;(function(Z){Z.None="none",Z.Front="front",Z.Back="back"})(O=L.Wf||(L.Wf={}));var I;(function(Z){Z.Nearest="nearest",Z.Linear="linear"})(I=L.X9||(L.X9={}));var C;(function(Z){Z.CCW="ccw",Z.CW="cw"})(C=L.zX||(L.zX={}));var T;(function(Z){Z.Uint16="uint16",Z.Uint32="uint32"})(T=L.iD||(L.iD={}));var D;(function(Z){Z.Vertex="vertex",Z.Instance="instance"})(D=L.V||(L.V={}));var B;(function(Z){Z.Load="load"})(B=L.Ws||(L.Ws={}));var G;(function(Z){Z.PointList="point-list",Z.LineList="line-list",Z.LineStrip="line-strip",Z.TriangleList="triangle-list",Z.TriangleStrip="triangle-strip"})(G=L.YV||(L.YV={}));var k;(function(Z){Z.Keep="keep",Z.Zero="zero",Z.Replace="replace",Z.Invert="invert",Z.IncrementClamp="increment-clamp",Z.DecrementClamp="decrement-clamp",Z.IncrementWrap="increment-wrap",Z.DecrementWrap="decrement-wrap"})(k=L.xS||(L.xS={}));var U;(function(Z){Z.Store="store",Z.Clear="clear"})(U=L.EG||(L.EG={}));var Y;(function(Z){Z.E1d="1d",Z.E2d="2d",Z.E3d="3d"})(Y=L.kd||(L.kd={}));var K;(function(Z){Z.R8Unorm="r8unorm",Z.R8Snorm="r8snorm",Z.R8Uint="r8uint",Z.R8Sint="r8sint",Z.R16Uint="r16uint",Z.R16Sint="r16sint",Z.R16Float="r16float",Z.RG8Unorm="rg8unorm",Z.RG8Snorm="rg8snorm",Z.RG8Uint="rg8uint",Z.RG8Sint="rg8sint",Z.R32Uint="r32uint",Z.R32Sint="r32sint",Z.R32Float="r32float",Z.RG16Uint="rg16uint",Z.RG16Sint="rg16sint",Z.RG16Float="rg16float",Z.RGBA8Unorm="rgba8unorm",Z.RGBA8UnormSRGB="rgba8unorm-srgb",Z.RGBA8Snorm="rgba8snorm",Z.RGBA8Uint="rgba8uint",Z.RGBA8Sint="rgba8sint",Z.BGRA8Unorm="bgra8unorm",Z.BGRA8UnormSRGB="bgra8unorm-srgb",Z.RGB10A2Unorm="rgb10a2unorm",Z.RG11B10Float="rg11b10float",Z.RG32Uint="rg32uint",Z.RG32Sint="rg32sint",Z.RG32Float="rg32float",Z.RGBA16Uint="rgba16uint",Z.RGBA16Sint="rgba16sint",Z.RGBA16Float="rgba16float",Z.RGBA32Uint="rgba32uint",Z.RGBA32Sint="rgba32sint",Z.RGBA32Float="rgba32float",Z.Depth32Float="depth32float",Z.Depth24Plus="depth24plus",Z.Depth24PlusStencil8="depth24plus-stencil8"})(K=L.EV||(L.EV={}));var J;(function(Z){Z.Float="float",Z.Sint="sint",Z.Uint="uint"})(J=L.Ek||(L.Ek={}));var q;(function(Z){Z.E1d="1d",Z.E2d="2d",Z.E2dArray="2d-array",Z.Cube="cube",Z.CubeArray="cube-array",Z.E3d="3d"})(q=L.p_||(L.p_={}));var X;(function(Z){Z.Uchar2="uchar2",Z.Uchar4="uchar4",Z.Char2="char2",Z.Char4="char4",Z.Uchar2Norm="uchar2norm",Z.Uchar4Norm="uchar4norm",Z.Char2Norm="char2norm",Z.Char4Norm="char4norm",Z.Ushort2="ushort2",Z.Ushort4="ushort4",Z.Short2="short2",Z.Short4="short4",Z.Ushort2Norm="ushort2norm",Z.Ushort4Norm="ushort4norm",Z.Short2Norm="short2norm",Z.Short4Norm="short4norm",Z.Half2="half2",Z.Half4="half4",Z.Float="float",Z.Float2="float2",Z.Float3="float3",Z.Float4="float4",Z.Uint="uint",Z.Uint2="uint2",Z.Uint3="uint3",Z.Uint4="uint4",Z.Int="int",Z.Int2="int2",Z.Int3="int3",Z.Int4="int4"})(X=L.gB||(L.gB={}));var j;(function(Z){Z.All="all",Z.StencilOnly="stencil-only",Z.DepthOnly="depth-only"})(j=L.H7||(L.H7={}));var Q;(function(Z){Z.Error="error",Z.Warning="warning",Z.Info="info"})(Q=L.mj||(L.mj={}));var lt;(function(Z){Z.Occlusion="occlusion"})(lt=L.xL||(L.xL={}));var z;(function(Z){Z[Z.MapRead=1]="MapRead",Z[Z.MapWrite=2]="MapWrite",Z[Z.CopySrc=4]="CopySrc",Z[Z.CopyDst=8]="CopyDst",Z[Z.Index=16]="Index",Z[Z.Vertex=32]="Vertex",Z[Z.Uniform=64]="Uniform",Z[Z.Storage=128]="Storage",Z[Z.Indirect=256]="Indirect",Z[Z.QueryResolve=512]="QueryResolve"})(z=L.FB||(L.FB={}));var b;(function(Z){Z[Z.Red=1]="Red",Z[Z.Green=2]="Green",Z[Z.Blue=4]="Blue",Z[Z.Alpha=8]="Alpha",Z[Z.All=15]="All"})(b=L.Yw||(L.Yw={}));var v;(function(Z){Z[Z.Vertex=1]="Vertex",Z[Z.Fragment=2]="Fragment",Z[Z.Compute=4]="Compute"})(v=L.$X||(L.$X={}));var $;(function(Z){Z[Z.CopySrc=1]="CopySrc",Z[Z.CopyDst=2]="CopyDst",Z[Z.Sampled=4]="Sampled",Z[Z.Storage=8]="Storage",Z[Z.OutputAttachment=16]="OutputAttachment"})($=L.v2||(L.v2={}));var et;(function(Z){Z[Z.Read=1]="Read",Z[Z.Write=2]="Write"})(et=L.gc||(L.gc={}))},73786:function(ut,L,x){var y=x(99026),P={};for(var N in y)y.hasOwnProperty(N)&&(P[y[N]]=N);var w=ut.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var E in w)if(w.hasOwnProperty(E)){if(!("channels"in w[E]))throw new Error("missing channels property: "+E);if(!("labels"in w[E]))throw new Error("missing channel labels property: "+E);if(w[E].labels.length!==w[E].channels)throw new Error("channel and label counts mismatch: "+E);var A=w[E].channels,O=w[E].labels;delete w[E].channels,delete w[E].labels,Object.defineProperty(w[E],"channels",{value:A}),Object.defineProperty(w[E],"labels",{value:O})}w.rgb.hsl=function(C){var T=C[0]/255,D=C[1]/255,B=C[2]/255,G=Math.min(T,D,B),k=Math.max(T,D,B),U=k-G,Y,K,J;return k===G?Y=0:T===k?Y=(D-B)/U:D===k?Y=2+(B-T)/U:B===k&&(Y=4+(T-D)/U),Y=Math.min(Y*60,360),Y<0&&(Y+=360),J=(G+k)/2,k===G?K=0:J<=.5?K=U/(k+G):K=U/(2-k-G),[Y,K*100,J*100]},w.rgb.hsv=function(C){var T,D,B,G,k,U=C[0]/255,Y=C[1]/255,K=C[2]/255,J=Math.max(U,Y,K),q=J-Math.min(U,Y,K),X=function(j){return(J-j)/6/q+1/2};return q===0?G=k=0:(k=q/J,T=X(U),D=X(Y),B=X(K),U===J?G=B-D:Y===J?G=1/3+T-B:K===J&&(G=2/3+D-T),G<0?G+=1:G>1&&(G-=1)),[G*360,k*100,J*100]},w.rgb.hwb=function(C){var T=C[0],D=C[1],B=C[2],G=w.rgb.hsl(C)[0],k=1/255*Math.min(T,Math.min(D,B));return B=1-1/255*Math.max(T,Math.max(D,B)),[G,k*100,B*100]},w.rgb.cmyk=function(C){var T=C[0]/255,D=C[1]/255,B=C[2]/255,G,k,U,Y;return Y=Math.min(1-T,1-D,1-B),G=(1-T-Y)/(1-Y)||0,k=(1-D-Y)/(1-Y)||0,U=(1-B-Y)/(1-Y)||0,[G*100,k*100,U*100,Y*100]};function I(C,T){return Math.pow(C[0]-T[0],2)+Math.pow(C[1]-T[1],2)+Math.pow(C[2]-T[2],2)}w.rgb.keyword=function(C){var T=P[C];if(T)return T;var D=Infinity,B;for(var G in y)if(y.hasOwnProperty(G)){var k=y[G],U=I(C,k);U<D&&(D=U,B=G)}return B},w.keyword.rgb=function(C){return y[C]},w.rgb.xyz=function(C){var T=C[0]/255,D=C[1]/255,B=C[2]/255;T=T>.04045?Math.pow((T+.055)/1.055,2.4):T/12.92,D=D>.04045?Math.pow((D+.055)/1.055,2.4):D/12.92,B=B>.04045?Math.pow((B+.055)/1.055,2.4):B/12.92;var G=T*.4124+D*.3576+B*.1805,k=T*.2126+D*.7152+B*.0722,U=T*.0193+D*.1192+B*.9505;return[G*100,k*100,U*100]},w.rgb.lab=function(C){var T=w.rgb.xyz(C),D=T[0],B=T[1],G=T[2],k,U,Y;return D/=95.047,B/=100,G/=108.883,D=D>.008856?Math.pow(D,1/3):7.787*D+16/116,B=B>.008856?Math.pow(B,1/3):7.787*B+16/116,G=G>.008856?Math.pow(G,1/3):7.787*G+16/116,k=116*B-16,U=500*(D-B),Y=200*(B-G),[k,U,Y]},w.hsl.rgb=function(C){var T=C[0]/360,D=C[1]/100,B=C[2]/100,G,k,U,Y,K;if(D===0)return K=B*255,[K,K,K];B<.5?k=B*(1+D):k=B+D-B*D,G=2*B-k,Y=[0,0,0];for(var J=0;J<3;J++)U=T+1/3*-(J-1),U<0&&U++,U>1&&U--,6*U<1?K=G+(k-G)*6*U:2*U<1?K=k:3*U<2?K=G+(k-G)*(2/3-U)*6:K=G,Y[J]=K*255;return Y},w.hsl.hsv=function(C){var T=C[0],D=C[1]/100,B=C[2]/100,G=D,k=Math.max(B,.01),U,Y;return B*=2,D*=B<=1?B:2-B,G*=k<=1?k:2-k,Y=(B+D)/2,U=B===0?2*G/(k+G):2*D/(B+D),[T,U*100,Y*100]},w.hsv.rgb=function(C){var T=C[0]/60,D=C[1]/100,B=C[2]/100,G=Math.floor(T)%6,k=T-Math.floor(T),U=255*B*(1-D),Y=255*B*(1-D*k),K=255*B*(1-D*(1-k));switch(B*=255,G){case 0:return[B,K,U];case 1:return[Y,B,U];case 2:return[U,B,K];case 3:return[U,Y,B];case 4:return[K,U,B];case 5:return[B,U,Y]}},w.hsv.hsl=function(C){var T=C[0],D=C[1]/100,B=C[2]/100,G=Math.max(B,.01),k,U,Y;return Y=(2-D)*B,k=(2-D)*G,U=D*G,U/=k<=1?k:2-k,U=U||0,Y/=2,[T,U*100,Y*100]},w.hwb.rgb=function(C){var T=C[0]/360,D=C[1]/100,B=C[2]/100,G=D+B,k,U,Y,K;G>1&&(D/=G,B/=G),k=Math.floor(6*T),U=1-B,Y=6*T-k,(k&1)!=0&&(Y=1-Y),K=D+Y*(U-D);var J,q,X;switch(k){default:case 6:case 0:J=U,q=K,X=D;break;case 1:J=K,q=U,X=D;break;case 2:J=D,q=U,X=K;break;case 3:J=D,q=K,X=U;break;case 4:J=K,q=D,X=U;break;case 5:J=U,q=D,X=K;break}return[J*255,q*255,X*255]},w.cmyk.rgb=function(C){var T=C[0]/100,D=C[1]/100,B=C[2]/100,G=C[3]/100,k,U,Y;return k=1-Math.min(1,T*(1-G)+G),U=1-Math.min(1,D*(1-G)+G),Y=1-Math.min(1,B*(1-G)+G),[k*255,U*255,Y*255]},w.xyz.rgb=function(C){var T=C[0]/100,D=C[1]/100,B=C[2]/100,G,k,U;return G=T*3.2406+D*-1.5372+B*-.4986,k=T*-.9689+D*1.8758+B*.0415,U=T*.0557+D*-.204+B*1.057,G=G>.0031308?1.055*Math.pow(G,1/2.4)-.055:G*12.92,k=k>.0031308?1.055*Math.pow(k,1/2.4)-.055:k*12.92,U=U>.0031308?1.055*Math.pow(U,1/2.4)-.055:U*12.92,G=Math.min(Math.max(0,G),1),k=Math.min(Math.max(0,k),1),U=Math.min(Math.max(0,U),1),[G*255,k*255,U*255]},w.xyz.lab=function(C){var T=C[0],D=C[1],B=C[2],G,k,U;return T/=95.047,D/=100,B/=108.883,T=T>.008856?Math.pow(T,1/3):7.787*T+16/116,D=D>.008856?Math.pow(D,1/3):7.787*D+16/116,B=B>.008856?Math.pow(B,1/3):7.787*B+16/116,G=116*D-16,k=500*(T-D),U=200*(D-B),[G,k,U]},w.lab.xyz=function(C){var T=C[0],D=C[1],B=C[2],G,k,U;k=(T+16)/116,G=D/500+k,U=k-B/200;var Y=Math.pow(k,3),K=Math.pow(G,3),J=Math.pow(U,3);return k=Y>.008856?Y:(k-16/116)/7.787,G=K>.008856?K:(G-16/116)/7.787,U=J>.008856?J:(U-16/116)/7.787,G*=95.047,k*=100,U*=108.883,[G,k,U]},w.lab.lch=function(C){var T=C[0],D=C[1],B=C[2],G,k,U;return G=Math.atan2(B,D),k=G*360/2/Math.PI,k<0&&(k+=360),U=Math.sqrt(D*D+B*B),[T,U,k]},w.lch.lab=function(C){var T=C[0],D=C[1],B=C[2],G,k,U;return U=B/360*2*Math.PI,G=D*Math.cos(U),k=D*Math.sin(U),[T,G,k]},w.rgb.ansi16=function(C){var T=C[0],D=C[1],B=C[2],G=1 in arguments?arguments[1]:w.rgb.hsv(C)[2];if(G=Math.round(G/50),G===0)return 30;var k=30+(Math.round(B/255)<<2|Math.round(D/255)<<1|Math.round(T/255));return G===2&&(k+=60),k},w.hsv.ansi16=function(C){return w.rgb.ansi16(w.hsv.rgb(C),C[2])},w.rgb.ansi256=function(C){var T=C[0],D=C[1],B=C[2];if(T===D&&D===B)return T<8?16:T>248?231:Math.round((T-8)/247*24)+232;var G=16+36*Math.round(T/255*5)+6*Math.round(D/255*5)+Math.round(B/255*5);return G},w.ansi16.rgb=function(C){var T=C%10;if(T===0||T===7)return C>50&&(T+=3.5),T=T/10.5*255,[T,T,T];var D=(~~(C>50)+1)*.5,B=(T&1)*D*255,G=(T>>1&1)*D*255,k=(T>>2&1)*D*255;return[B,G,k]},w.ansi256.rgb=function(C){if(C>=232){var T=(C-232)*10+8;return[T,T,T]}C-=16;var D,B=Math.floor(C/36)/5*255,G=Math.floor((D=C%36)/6)/5*255,k=D%6/5*255;return[B,G,k]},w.rgb.hex=function(C){var T=((Math.round(C[0])&255)<<16)+((Math.round(C[1])&255)<<8)+(Math.round(C[2])&255),D=T.toString(16).toUpperCase();return"000000".substring(D.length)+D},w.hex.rgb=function(C){var T=C.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!T)return[0,0,0];var D=T[0];T[0].length===3&&(D=D.split("").map(function(Y){return Y+Y}).join(""));var B=parseInt(D,16),G=B>>16&255,k=B>>8&255,U=B&255;return[G,k,U]},w.rgb.hcg=function(C){var T=C[0]/255,D=C[1]/255,B=C[2]/255,G=Math.max(Math.max(T,D),B),k=Math.min(Math.min(T,D),B),U=G-k,Y,K;return U<1?Y=k/(1-U):Y=0,U<=0?K=0:G===T?K=(D-B)/U%6:G===D?K=2+(B-T)/U:K=4+(T-D)/U+4,K/=6,K%=1,[K*360,U*100,Y*100]},w.hsl.hcg=function(C){var T=C[1]/100,D=C[2]/100,B=1,G=0;return D<.5?B=2*T*D:B=2*T*(1-D),B<1&&(G=(D-.5*B)/(1-B)),[C[0],B*100,G*100]},w.hsv.hcg=function(C){var T=C[1]/100,D=C[2]/100,B=T*D,G=0;return B<1&&(G=(D-B)/(1-B)),[C[0],B*100,G*100]},w.hcg.rgb=function(C){var T=C[0]/360,D=C[1]/100,B=C[2]/100;if(D===0)return[B*255,B*255,B*255];var G=[0,0,0],k=T%1*6,U=k%1,Y=1-U,K=0;switch(Math.floor(k)){case 0:G[0]=1,G[1]=U,G[2]=0;break;case 1:G[0]=Y,G[1]=1,G[2]=0;break;case 2:G[0]=0,G[1]=1,G[2]=U;break;case 3:G[0]=0,G[1]=Y,G[2]=1;break;case 4:G[0]=U,G[1]=0,G[2]=1;break;default:G[0]=1,G[1]=0,G[2]=Y}return K=(1-D)*B,[(D*G[0]+K)*255,(D*G[1]+K)*255,(D*G[2]+K)*255]},w.hcg.hsv=function(C){var T=C[1]/100,D=C[2]/100,B=T+D*(1-T),G=0;return B>0&&(G=T/B),[C[0],G*100,B*100]},w.hcg.hsl=function(C){var T=C[1]/100,D=C[2]/100,B=D*(1-T)+.5*T,G=0;return B>0&&B<.5?G=T/(2*B):B>=.5&&B<1&&(G=T/(2*(1-B))),[C[0],G*100,B*100]},w.hcg.hwb=function(C){var T=C[1]/100,D=C[2]/100,B=T+D*(1-T);return[C[0],(B-T)*100,(1-B)*100]},w.hwb.hcg=function(C){var T=C[1]/100,D=C[2]/100,B=1-D,G=B-T,k=0;return G<1&&(k=(B-G)/(1-G)),[C[0],G*100,k*100]},w.apple.rgb=function(C){return[C[0]/65535*255,C[1]/65535*255,C[2]/65535*255]},w.rgb.apple=function(C){return[C[0]/255*65535,C[1]/255*65535,C[2]/255*65535]},w.gray.rgb=function(C){return[C[0]/100*255,C[0]/100*255,C[0]/100*255]},w.gray.hsl=w.gray.hsv=function(C){return[0,0,C[0]]},w.gray.hwb=function(C){return[0,100,C[0]]},w.gray.cmyk=function(C){return[0,0,0,C[0]]},w.gray.lab=function(C){return[C[0],0,0]},w.gray.hex=function(C){var T=Math.round(C[0]/100*255)&255,D=(T<<16)+(T<<8)+T,B=D.toString(16).toUpperCase();return"000000".substring(B.length)+B},w.rgb.gray=function(C){var T=(C[0]+C[1]+C[2])/3;return[T/255*100]}},83338:function(ut,L,x){var y=x(73786),P=x(3986),N={},w=Object.keys(y);function E(O){var I=function(C){return C==null?C:(arguments.length>1&&(C=Array.prototype.slice.call(arguments)),O(C))};return"conversion"in O&&(I.conversion=O.conversion),I}function A(O){var I=function(C){if(C==null)return C;arguments.length>1&&(C=Array.prototype.slice.call(arguments));var T=O(C);if(typeof T=="object")for(var D=T.length,B=0;B<D;B++)T[B]=Math.round(T[B]);return T};return"conversion"in O&&(I.conversion=O.conversion),I}w.forEach(function(O){N[O]={},Object.defineProperty(N[O],"channels",{value:y[O].channels}),Object.defineProperty(N[O],"labels",{value:y[O].labels});var I=P(O),C=Object.keys(I);C.forEach(function(T){var D=I[T];N[O][T]=A(D),N[O][T].raw=E(D)})}),ut.exports=N},3986:function(ut,L,x){var y=x(73786);function P(){for(var A={},O=Object.keys(y),I=O.length,C=0;C<I;C++)A[O[C]]={distance:-1,parent:null};return A}function N(A){var O=P(),I=[A];for(O[A].distance=0;I.length;)for(var C=I.pop(),T=Object.keys(y[C]),D=T.length,B=0;B<D;B++){var G=T[B],k=O[G];k.distance===-1&&(k.distance=O[C].distance+1,k.parent=C,I.unshift(G))}return O}function w(A,O){return function(I){return O(A(I))}}function E(A,O){for(var I=[O[A].parent,A],C=y[O[A].parent][A],T=O[A].parent;O[T].parent;)I.unshift(O[T].parent),C=w(y[O[T].parent][T],C),T=O[T].parent;return C.conversion=I,C}ut.exports=function(A){for(var O=N(A),I={},C=Object.keys(O),T=C.length,D=0;D<T;D++){var B=C[D],G=O[B];G.parent!==null&&(I[B]=E(B,O))}return I}},99026:function(ut){"use strict";ut.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},45411:function(ut){"use strict";ut.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},51652:function(ut,L,x){var y=x(45411),P=x(75029),N={};for(var w in y)y.hasOwnProperty(w)&&(N[y[w]]=w);var E=ut.exports={to:{},get:{}};E.get=function(I){var C=I.substring(0,3).toLowerCase(),T,D;switch(C){case"hsl":T=E.get.hsl(I),D="hsl";break;case"hwb":T=E.get.hwb(I),D="hwb";break;default:T=E.get.rgb(I),D="rgb";break}return T?{model:D,value:T}:null},E.get.rgb=function(I){if(!I)return null;var C=/^#([a-f0-9]{3,4})$/i,T=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,D=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,B=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,G=/(\D+)/,k=[0,0,0,1],U,Y,K;if(U=I.match(T)){for(K=U[2],U=U[1],Y=0;Y<3;Y++){var J=Y*2;k[Y]=parseInt(U.slice(J,J+2),16)}K&&(k[3]=parseInt(K,16)/255)}else if(U=I.match(C)){for(U=U[1],K=U[3],Y=0;Y<3;Y++)k[Y]=parseInt(U[Y]+U[Y],16);K&&(k[3]=parseInt(K+K,16)/255)}else if(U=I.match(D)){for(Y=0;Y<3;Y++)k[Y]=parseInt(U[Y+1],0);U[4]&&(k[3]=parseFloat(U[4]))}else if(U=I.match(B)){for(Y=0;Y<3;Y++)k[Y]=Math.round(parseFloat(U[Y+1])*2.55);U[4]&&(k[3]=parseFloat(U[4]))}else return(U=I.match(G))?U[1]==="transparent"?[0,0,0,0]:(k=y[U[1]],k?(k[3]=1,k):null):null;for(Y=0;Y<3;Y++)k[Y]=A(k[Y],0,255);return k[3]=A(k[3],0,1),k},E.get.hsl=function(I){if(!I)return null;var C=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,T=I.match(C);if(T){var D=parseFloat(T[4]),B=(parseFloat(T[1])+360)%360,G=A(parseFloat(T[2]),0,100),k=A(parseFloat(T[3]),0,100),U=A(isNaN(D)?1:D,0,1);return[B,G,k,U]}return null},E.get.hwb=function(I){if(!I)return null;var C=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,T=I.match(C);if(T){var D=parseFloat(T[4]),B=(parseFloat(T[1])%360+360)%360,G=A(parseFloat(T[2]),0,100),k=A(parseFloat(T[3]),0,100),U=A(isNaN(D)?1:D,0,1);return[B,G,k,U]}return null},E.to.hex=function(){var I=P(arguments);return"#"+O(I[0])+O(I[1])+O(I[2])+(I[3]<1?O(Math.round(I[3]*255)):"")},E.to.rgb=function(){var I=P(arguments);return I.length<4||I[3]===1?"rgb("+Math.round(I[0])+", "+Math.round(I[1])+", "+Math.round(I[2])+")":"rgba("+Math.round(I[0])+", "+Math.round(I[1])+", "+Math.round(I[2])+", "+I[3]+")"},E.to.rgb.percent=function(){var I=P(arguments),C=Math.round(I[0]/255*100),T=Math.round(I[1]/255*100),D=Math.round(I[2]/255*100);return I.length<4||I[3]===1?"rgb("+C+"%, "+T+"%, "+D+"%)":"rgba("+C+"%, "+T+"%, "+D+"%, "+I[3]+")"},E.to.hsl=function(){var I=P(arguments);return I.length<4||I[3]===1?"hsl("+I[0]+", "+I[1]+"%, "+I[2]+"%)":"hsla("+I[0]+", "+I[1]+"%, "+I[2]+"%, "+I[3]+")"},E.to.hwb=function(){var I=P(arguments),C="";return I.length>=4&&I[3]!==1&&(C=", "+I[3]),"hwb("+I[0]+", "+I[1]+"%, "+I[2]+"%"+C+")"},E.to.keyword=function(I){return N[I.slice(0,3)]};function A(I,C,T){return Math.min(Math.max(C,I),T)}function O(I){var C=I.toString(16).toUpperCase();return C.length<2?"0"+C:C}},90112:function(ut,L,x){"use strict";var y=x(51652),P=x(83338),N=[].slice,w=["keyword","gray","hex"],E={};Object.keys(P).forEach(function(k){E[N.call(P[k].labels).sort().join("")]=k});var A={};function O(k,U){if(!(this instanceof O))return new O(k,U);if(U&&U in w&&(U=null),U&&!(U in P))throw new Error("Unknown model: "+U);var Y,K;if(k==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(k instanceof O)this.model=k.model,this.color=k.color.slice(),this.valpha=k.valpha;else if(typeof k=="string"){var J=y.get(k);if(J===null)throw new Error("Unable to parse color from string: "+k);this.model=J.model,K=P[this.model].channels,this.color=J.value.slice(0,K),this.valpha=typeof J.value[K]=="number"?J.value[K]:1}else if(k.length){this.model=U||"rgb",K=P[this.model].channels;var q=N.call(k,0,K);this.color=G(q,K),this.valpha=typeof k[K]=="number"?k[K]:1}else if(typeof k=="number")k&=16777215,this.model="rgb",this.color=[k>>16&255,k>>8&255,k&255],this.valpha=1;else{this.valpha=1;var X=Object.keys(k);"alpha"in k&&(X.splice(X.indexOf("alpha"),1),this.valpha=typeof k.alpha=="number"?k.alpha:0);var j=X.sort().join("");if(!(j in E))throw new Error("Unable to parse color from object: "+JSON.stringify(k));this.model=E[j];var Q=P[this.model].labels,lt=[];for(Y=0;Y<Q.length;Y++)lt.push(k[Q[Y]]);this.color=G(lt)}if(A[this.model])for(K=P[this.model].channels,Y=0;Y<K;Y++){var z=A[this.model][Y];z&&(this.color[Y]=z(this.color[Y]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}O.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(k){var U=this.model in y.to?this:this.rgb();U=U.round(typeof k=="number"?k:1);var Y=U.valpha===1?U.color:U.color.concat(this.valpha);return y.to[U.model](Y)},percentString:function(k){var U=this.rgb().round(typeof k=="number"?k:1),Y=U.valpha===1?U.color:U.color.concat(this.valpha);return y.to.rgb.percent(Y)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var k={},U=P[this.model].channels,Y=P[this.model].labels,K=0;K<U;K++)k[Y[K]]=this.color[K];return this.valpha!==1&&(k.alpha=this.valpha),k},unitArray:function(){var k=this.rgb().color;return k[0]/=255,k[1]/=255,k[2]/=255,this.valpha!==1&&k.push(this.valpha),k},unitObject:function(){var k=this.rgb().object();return k.r/=255,k.g/=255,k.b/=255,this.valpha!==1&&(k.alpha=this.valpha),k},round:function(k){return k=Math.max(k||0,0),new O(this.color.map(C(k)).concat(this.valpha),this.model)},alpha:function(k){return arguments.length?new O(this.color.concat(Math.max(0,Math.min(1,k))),this.model):this.valpha},red:T("rgb",0,D(255)),green:T("rgb",1,D(255)),blue:T("rgb",2,D(255)),hue:T(["hsl","hsv","hsl","hwb","hcg"],0,function(k){return(k%360+360)%360}),saturationl:T("hsl",1,D(100)),lightness:T("hsl",2,D(100)),saturationv:T("hsv",1,D(100)),value:T("hsv",2,D(100)),chroma:T("hcg",1,D(100)),gray:T("hcg",2,D(100)),white:T("hwb",1,D(100)),wblack:T("hwb",2,D(100)),cyan:T("cmyk",0,D(100)),magenta:T("cmyk",1,D(100)),yellow:T("cmyk",2,D(100)),black:T("cmyk",3,D(100)),x:T("xyz",0,D(100)),y:T("xyz",1,D(100)),z:T("xyz",2,D(100)),l:T("lab",0,D(100)),a:T("lab",1),b:T("lab",2),keyword:function(k){return arguments.length?new O(k):P[this.model].keyword(this.color)},hex:function(k){return arguments.length?new O(k):y.to.hex(this.rgb().round().color)},rgbNumber:function(){var k=this.rgb().color;return(k[0]&255)<<16|(k[1]&255)<<8|k[2]&255},luminosity:function(){for(var k=this.rgb().color,U=[],Y=0;Y<k.length;Y++){var K=k[Y]/255;U[Y]=K<=.03928?K/12.92:Math.pow((K+.055)/1.055,2.4)}return .2126*U[0]+.7152*U[1]+.0722*U[2]},contrast:function(k){var U=this.luminosity(),Y=k.luminosity();return U>Y?(U+.05)/(Y+.05):(Y+.05)/(U+.05)},level:function(k){var U=this.contrast(k);return U>=7.1?"AAA":U>=4.5?"AA":""},isDark:function(){var k=this.rgb().color,U=(k[0]*299+k[1]*587+k[2]*114)/1e3;return U<128},isLight:function(){return!this.isDark()},negate:function(){for(var k=this.rgb(),U=0;U<3;U++)k.color[U]=255-k.color[U];return k},lighten:function(k){var U=this.hsl();return U.color[2]+=U.color[2]*k,U},darken:function(k){var U=this.hsl();return U.color[2]-=U.color[2]*k,U},saturate:function(k){var U=this.hsl();return U.color[1]+=U.color[1]*k,U},desaturate:function(k){var U=this.hsl();return U.color[1]-=U.color[1]*k,U},whiten:function(k){var U=this.hwb();return U.color[1]+=U.color[1]*k,U},blacken:function(k){var U=this.hwb();return U.color[2]+=U.color[2]*k,U},grayscale:function(){var k=this.rgb().color,U=k[0]*.3+k[1]*.59+k[2]*.11;return O.rgb(U,U,U)},fade:function(k){return this.alpha(this.valpha-this.valpha*k)},opaquer:function(k){return this.alpha(this.valpha+this.valpha*k)},rotate:function(k){var U=this.hsl(),Y=U.color[0];return Y=(Y+k)%360,Y=Y<0?360+Y:Y,U.color[0]=Y,U},mix:function(k,U){if(!k||!k.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof k);var Y=k.rgb(),K=this.rgb(),J=U===void 0?.5:U,q=2*J-1,X=Y.alpha()-K.alpha(),j=((q*X==-1?q:(q+X)/(1+q*X))+1)/2,Q=1-j;return O.rgb(j*Y.red()+Q*K.red(),j*Y.green()+Q*K.green(),j*Y.blue()+Q*K.blue(),Y.alpha()*J+K.alpha()*(1-J))}},Object.keys(P).forEach(function(k){if(w.indexOf(k)===-1){var U=P[k].channels;O.prototype[k]=function(){if(this.model===k)return new O(this);if(arguments.length)return new O(arguments,k);var Y=typeof arguments[U]=="number"?U:this.valpha;return new O(B(P[this.model][k].raw(this.color)).concat(Y),k)},O[k]=function(Y){return typeof Y=="number"&&(Y=G(N.call(arguments),U)),new O(Y,k)}}});function I(k,U){return Number(k.toFixed(U))}function C(k){return function(U){return I(U,k)}}function T(k,U,Y){return k=Array.isArray(k)?k:[k],k.forEach(function(K){(A[K]||(A[K]=[]))[U]=Y}),k=k[0],function(K){var J;return arguments.length?(Y&&(K=Y(K)),J=this[k](),J.color[U]=K,J):(J=this[k]().color[U],Y&&(J=Y(J)),J)}}function D(k){return function(U){return Math.max(0,Math.min(k,U))}}function B(k){return Array.isArray(k)?k:[k]}function G(k,U){for(var Y=0;Y<U;Y++)typeof k[Y]!="number"&&(k[Y]=0);return k}ut.exports=O},65650:function(ut,L,x){"use strict";x.r(L),x.d(L,{easeBack:function(){return wt},easeBackIn:function(){return ae},easeBackInOut:function(){return wt},easeBackOut:function(){return bt},easeBounce:function(){return ot},easeBounceIn:function(){return H},easeBounceInOut:function(){return St},easeBounceOut:function(){return ot},easeCircle:function(){return lt},easeCircleIn:function(){return j},easeCircleInOut:function(){return lt},easeCircleOut:function(){return Q},easeCubic:function(){return O},easeCubicIn:function(){return E},easeCubicInOut:function(){return O},easeCubicOut:function(){return A},easeElastic:function(){return jt},easeElasticIn:function(){return Lt},easeElasticInOut:function(){return mt},easeElasticOut:function(){return jt},easeExp:function(){return X},easeExpIn:function(){return J},easeExpInOut:function(){return X},easeExpOut:function(){return q},easeLinear:function(){return y},easePoly:function(){return D},easePolyIn:function(){return C},easePolyInOut:function(){return D},easePolyOut:function(){return T},easeQuad:function(){return w},easeQuadIn:function(){return P},easeQuadInOut:function(){return w},easeQuadOut:function(){return N},easeSin:function(){return Y},easeSinIn:function(){return k},easeSinInOut:function(){return Y},easeSinOut:function(){return U}});function y(W){return+W}function P(W){return W*W}function N(W){return W*(2-W)}function w(W){return((W*=2)<=1?W*W:--W*(2-W)+1)/2}function E(W){return W*W*W}function A(W){return--W*W*W+1}function O(W){return((W*=2)<=1?W*W*W:(W-=2)*W*W+2)/2}var I=3,C=function W(rt){rt=+rt;function ct(At){return Math.pow(At,rt)}return ct.exponent=W,ct}(I),T=function W(rt){rt=+rt;function ct(At){return 1-Math.pow(1-At,rt)}return ct.exponent=W,ct}(I),D=function W(rt){rt=+rt;function ct(At){return((At*=2)<=1?Math.pow(At,rt):2-Math.pow(2-At,rt))/2}return ct.exponent=W,ct}(I),B=Math.PI,G=B/2;function k(W){return+W==1?1:1-Math.cos(W*G)}function U(W){return Math.sin(W*G)}function Y(W){return(1-Math.cos(B*W))/2}function K(W){return(Math.pow(2,-10*W)-.0009765625)*1.0009775171065494}function J(W){return K(1-+W)}function q(W){return 1-K(W)}function X(W){return((W*=2)<=1?K(1-W):2-K(W-1))/2}function j(W){return 1-Math.sqrt(1-W*W)}function Q(W){return Math.sqrt(1- --W*W)}function lt(W){return((W*=2)<=1?1-Math.sqrt(1-W*W):Math.sqrt(1-(W-=2)*W)+1)/2}var z=4/11,b=6/11,v=8/11,$=3/4,et=9/11,Z=10/11,pt=15/16,_t=21/22,It=63/64,Rt=1/z/z;function H(W){return 1-ot(1-W)}function ot(W){return(W=+W)<z?Rt*W*W:W<v?Rt*(W-=b)*W+$:W<Z?Rt*(W-=et)*W+pt:Rt*(W-=_t)*W+It}function St(W){return((W*=2)<=1?1-ot(1-W):ot(W-1)+1)/2}var Ut=1.70158,ae=function W(rt){rt=+rt;function ct(At){return(At=+At)*At*(rt*(At-1)+At)}return ct.overshoot=W,ct}(Ut),bt=function W(rt){rt=+rt;function ct(At){return--At*At*((At+1)*rt+At)+1}return ct.overshoot=W,ct}(Ut),wt=function W(rt){rt=+rt;function ct(At){return((At*=2)<1?At*At*((rt+1)*At-rt):(At-=2)*At*((rt+1)*At+rt)+2)/2}return ct.overshoot=W,ct}(Ut),ft=2*Math.PI,ht=1,Pt=.3,Lt=function W(rt,ct){var At=Math.asin(1/(rt=Math.max(1,rt)))*(ct/=ft);function tt(dt){return rt*K(- --dt)*Math.sin((At-dt)/ct)}return tt.amplitude=function(dt){return W(dt,ct*ft)},tt.period=function(dt){return W(rt,dt)},tt}(ht,Pt),jt=function W(rt,ct){var At=Math.asin(1/(rt=Math.max(1,rt)))*(ct/=ft);function tt(dt){return 1-rt*K(dt=+dt)*Math.sin((dt+At)/ct)}return tt.amplitude=function(dt){return W(dt,ct*ft)},tt.period=function(dt){return W(rt,dt)},tt}(ht,Pt),mt=function W(rt,ct){var At=Math.asin(1/(rt=Math.max(1,rt)))*(ct/=ft);function tt(dt){return((dt=dt*2-1)<0?rt*K(-dt)*Math.sin((At-dt)/ct):2-rt*K(dt)*Math.sin((At+dt)/ct))/2}return tt.amplitude=function(dt){return W(dt,ct*ft)},tt.period=function(dt){return W(rt,dt)},tt}(ht,Pt)},39751:function(ut,L,x){"use strict";x.d(L,{Z:function(){return N},M:function(){return w}});var y=x(50710),P=x(82265);function N(E,A){return((0,P.v)(A)?P.Z:w)(E,A)}function w(E,A){var O=A?A.length:0,I=E?Math.min(O,E.length):0,C=new Array(I),T=new Array(O),D;for(D=0;D<I;++D)C[D]=(0,y.Z)(E[D],A[D]);for(;D<O;++D)T[D]=A[D];return function(B){for(D=0;D<I;++D)T[D]=C[D](B);return T}}},82265:function(ut,L,x){"use strict";x.d(L,{Z:function(){return y},v:function(){return P}});function y(N,w){w||(w=[]);var E=N?Math.min(w.length,N.length):0,A=w.slice(),O;return function(I){for(O=0;O<E;++O)A[O]=N[O]*(1-I)+w[O]*I;return A}}function P(N){return ArrayBuffer.isView(N)&&!(N instanceof DataView)}},50710:function(ut,L,x){"use strict";x.d(L,{Z:function(){return Qt}});function y(vt,yt,zt){vt.prototype=yt.prototype=zt,zt.constructor=vt}function P(vt,yt){var zt=Object.create(vt.prototype);for(var oe in yt)zt[oe]=yt[oe];return zt}function N(){}var w=.7,E=1/w,A="\\s*([+-]?\\d+)\\s*",O="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",I="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",C=/^#([0-9a-f]{3,8})$/,T=new RegExp("^rgb\\("+[A,A,A]+"\\)$"),D=new RegExp("^rgb\\("+[I,I,I]+"\\)$"),B=new RegExp("^rgba\\("+[A,A,A,O]+"\\)$"),G=new RegExp("^rgba\\("+[I,I,I,O]+"\\)$"),k=new RegExp("^hsl\\("+[O,I,I]+"\\)$"),U=new RegExp("^hsla\\("+[O,I,I,O]+"\\)$"),Y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};y(N,X,{copy:function(vt){return Object.assign(new this.constructor,this,vt)},displayable:function(){return this.rgb().displayable()},hex:K,formatHex:K,formatHsl:J,formatRgb:q,toString:q});function K(){return this.rgb().formatHex()}function J(){return pt(this).formatHsl()}function q(){return this.rgb().formatRgb()}function X(vt){var yt,zt;return vt=(vt+"").trim().toLowerCase(),(yt=C.exec(vt))?(zt=yt[1].length,yt=parseInt(yt[1],16),zt===6?j(yt):zt===3?new b(yt>>8&15|yt>>4&240,yt>>4&15|yt&240,(yt&15)<<4|yt&15,1):zt===8?Q(yt>>24&255,yt>>16&255,yt>>8&255,(yt&255)/255):zt===4?Q(yt>>12&15|yt>>8&240,yt>>8&15|yt>>4&240,yt>>4&15|yt&240,((yt&15)<<4|yt&15)/255):null):(yt=T.exec(vt))?new b(yt[1],yt[2],yt[3],1):(yt=D.exec(vt))?new b(yt[1]*255/100,yt[2]*255/100,yt[3]*255/100,1):(yt=B.exec(vt))?Q(yt[1],yt[2],yt[3],yt[4]):(yt=G.exec(vt))?Q(yt[1]*255/100,yt[2]*255/100,yt[3]*255/100,yt[4]):(yt=k.exec(vt))?Z(yt[1],yt[2]/100,yt[3]/100,1):(yt=U.exec(vt))?Z(yt[1],yt[2]/100,yt[3]/100,yt[4]):Y.hasOwnProperty(vt)?j(Y[vt]):vt==="transparent"?new b(NaN,NaN,NaN,0):null}function j(vt){return new b(vt>>16&255,vt>>8&255,vt&255,1)}function Q(vt,yt,zt,oe){return oe<=0&&(vt=yt=zt=NaN),new b(vt,yt,zt,oe)}function lt(vt){return vt instanceof N||(vt=X(vt)),vt?(vt=vt.rgb(),new b(vt.r,vt.g,vt.b,vt.opacity)):new b}function z(vt,yt,zt,oe){return arguments.length===1?lt(vt):new b(vt,yt,zt,oe==null?1:oe)}function b(vt,yt,zt,oe){this.r=+vt,this.g=+yt,this.b=+zt,this.opacity=+oe}y(b,z,P(N,{brighter:function(vt){return vt=vt==null?E:Math.pow(E,vt),new b(this.r*vt,this.g*vt,this.b*vt,this.opacity)},darker:function(vt){return vt=vt==null?w:Math.pow(w,vt),new b(this.r*vt,this.g*vt,this.b*vt,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:v,formatHex:v,formatRgb:$,toString:$}));function v(){return"#"+et(this.r)+et(this.g)+et(this.b)}function $(){var vt=this.opacity;return vt=isNaN(vt)?1:Math.max(0,Math.min(1,vt)),(vt===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(vt===1?")":", "+vt+")")}function et(vt){return vt=Math.max(0,Math.min(255,Math.round(vt)||0)),(vt<16?"0":"")+vt.toString(16)}function Z(vt,yt,zt,oe){return oe<=0?vt=yt=zt=NaN:zt<=0||zt>=1?vt=yt=NaN:yt<=0&&(vt=NaN),new It(vt,yt,zt,oe)}function pt(vt){if(vt instanceof It)return new It(vt.h,vt.s,vt.l,vt.opacity);if(vt instanceof N||(vt=X(vt)),!vt)return new It;if(vt instanceof It)return vt;vt=vt.rgb();var yt=vt.r/255,zt=vt.g/255,oe=vt.b/255,Ie=Math.min(yt,zt,oe),Gt=Math.max(yt,zt,oe),Wt=NaN,Ht=Gt-Ie,de=(Gt+Ie)/2;return Ht?(yt===Gt?Wt=(zt-oe)/Ht+(zt<oe)*6:zt===Gt?Wt=(oe-yt)/Ht+2:Wt=(yt-zt)/Ht+4,Ht/=de<.5?Gt+Ie:2-Gt-Ie,Wt*=60):Ht=de>0&&de<1?0:Wt,new It(Wt,Ht,de,vt.opacity)}function _t(vt,yt,zt,oe){return arguments.length===1?pt(vt):new It(vt,yt,zt,oe==null?1:oe)}function It(vt,yt,zt,oe){this.h=+vt,this.s=+yt,this.l=+zt,this.opacity=+oe}y(It,_t,P(N,{brighter:function(vt){return vt=vt==null?E:Math.pow(E,vt),new It(this.h,this.s,this.l*vt,this.opacity)},darker:function(vt){return vt=vt==null?w:Math.pow(w,vt),new It(this.h,this.s,this.l*vt,this.opacity)},rgb:function(){var vt=this.h%360+(this.h<0)*360,yt=isNaN(vt)||isNaN(this.s)?0:this.s,zt=this.l,oe=zt+(zt<.5?zt:1-zt)*yt,Ie=2*zt-oe;return new b(Rt(vt>=240?vt-240:vt+120,Ie,oe),Rt(vt,Ie,oe),Rt(vt<120?vt+240:vt-120,Ie,oe),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var vt=this.opacity;return vt=isNaN(vt)?1:Math.max(0,Math.min(1,vt)),(vt===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(vt===1?")":", "+vt+")")}}));function Rt(vt,yt,zt){return(vt<60?yt+(zt-yt)*vt/60:vt<180?zt:vt<240?yt+(zt-yt)*(240-vt)/60:yt)*255}function H(vt,yt,zt,oe,Ie){var Gt=vt*vt,Wt=Gt*vt;return((1-3*vt+3*Gt-Wt)*yt+(4-6*Gt+3*Wt)*zt+(1+3*vt+3*Gt-3*Wt)*oe+Wt*Ie)/6}function ot(vt){var yt=vt.length-1;return function(zt){var oe=zt<=0?zt=0:zt>=1?(zt=1,yt-1):Math.floor(zt*yt),Ie=vt[oe],Gt=vt[oe+1],Wt=oe>0?vt[oe-1]:2*Ie-Gt,Ht=oe<yt-1?vt[oe+2]:2*Gt-Ie;return H((zt-oe/yt)*yt,Wt,Ie,Gt,Ht)}}function St(vt){var yt=vt.length;return function(zt){var oe=Math.floor(((zt%=1)<0?++zt:zt)*yt),Ie=vt[(oe+yt-1)%yt],Gt=vt[oe%yt],Wt=vt[(oe+1)%yt],Ht=vt[(oe+2)%yt];return H((zt-oe/yt)*yt,Ie,Gt,Wt,Ht)}}function Ut(vt){return function(){return vt}}function ae(vt,yt){return function(zt){return vt+zt*yt}}function bt(vt,yt,zt){return vt=Math.pow(vt,zt),yt=Math.pow(yt,zt)-vt,zt=1/zt,function(oe){return Math.pow(vt+oe*yt,zt)}}function wt(vt,yt){var zt=yt-vt;return zt?ae(vt,zt>180||zt<-180?zt-360*Math.round(zt/360):zt):constant(isNaN(vt)?yt:vt)}function ft(vt){return(vt=+vt)==1?ht:function(yt,zt){return zt-yt?bt(yt,zt,vt):Ut(isNaN(yt)?zt:yt)}}function ht(vt,yt){var zt=yt-vt;return zt?ae(vt,zt):Ut(isNaN(vt)?yt:vt)}var Pt=function vt(yt){var zt=ft(yt);function oe(Ie,Gt){var Wt=zt((Ie=z(Ie)).r,(Gt=z(Gt)).r),Ht=zt(Ie.g,Gt.g),de=zt(Ie.b,Gt.b),Ge=ht(Ie.opacity,Gt.opacity);return function(Re){return Ie.r=Wt(Re),Ie.g=Ht(Re),Ie.b=de(Re),Ie.opacity=Ge(Re),Ie+""}}return oe.gamma=vt,oe}(1);function Lt(vt){return function(yt){var zt=yt.length,oe=new Array(zt),Ie=new Array(zt),Gt=new Array(zt),Wt,Ht;for(Wt=0;Wt<zt;++Wt)Ht=z(yt[Wt]),oe[Wt]=Ht.r||0,Ie[Wt]=Ht.g||0,Gt[Wt]=Ht.b||0;return oe=vt(oe),Ie=vt(Ie),Gt=vt(Gt),Ht.opacity=1,function(de){return Ht.r=oe(de),Ht.g=Ie(de),Ht.b=Gt(de),Ht+""}}}var jt=Lt(ot),mt=Lt(St),W=x(39751);function rt(vt,yt){var zt=new Date;return vt=+vt,yt=+yt,function(oe){return zt.setTime(vt*(1-oe)+yt*oe),zt}}function ct(vt,yt){return vt=+vt,yt=+yt,function(zt){return vt*(1-zt)+yt*zt}}function At(vt,yt){var zt={},oe={},Ie;(vt===null||typeof vt!="object")&&(vt={}),(yt===null||typeof yt!="object")&&(yt={});for(Ie in yt)Ie in vt?zt[Ie]=Qt(vt[Ie],yt[Ie]):oe[Ie]=yt[Ie];return function(Gt){for(Ie in zt)oe[Ie]=zt[Ie](Gt);return oe}}var tt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dt=new RegExp(tt.source,"g");function Et(vt){return function(){return vt}}function Ot(vt){return function(yt){return vt(yt)+""}}function $t(vt,yt){var zt=tt.lastIndex=dt.lastIndex=0,oe,Ie,Gt,Wt=-1,Ht=[],de=[];for(vt=vt+"",yt=yt+"";(oe=tt.exec(vt))&&(Ie=dt.exec(yt));)(Gt=Ie.index)>zt&&(Gt=yt.slice(zt,Gt),Ht[Wt]?Ht[Wt]+=Gt:Ht[++Wt]=Gt),(oe=oe[0])===(Ie=Ie[0])?Ht[Wt]?Ht[Wt]+=Ie:Ht[++Wt]=Ie:(Ht[++Wt]=null,de.push({i:Wt,x:ct(oe,Ie)})),zt=dt.lastIndex;return zt<yt.length&&(Gt=yt.slice(zt),Ht[Wt]?Ht[Wt]+=Gt:Ht[++Wt]=Gt),Ht.length<2?de[0]?Ot(de[0].x):Et(yt):(yt=de.length,function(Ge){for(var Re=0,Ke;Re<yt;++Re)Ht[(Ke=de[Re]).i]=Ke.x(Ge);return Ht.join("")})}var st=x(82265);function Qt(vt,yt){var zt=typeof yt,oe;return yt==null||zt==="boolean"?Ut(yt):(zt==="number"?ct:zt==="string"?(oe=X(yt))?(yt=oe,Pt):$t:yt instanceof X?Pt:yt instanceof Date?rt:(0,st.v)(yt)?st.Z:Array.isArray(yt)?W.M:typeof yt.valueOf!="function"&&typeof yt.toString!="function"||isNaN(yt)?At:ct)(vt,yt)}},89831:function(ut,L){(function(x,y){y(L)})(this,function(x){"use strict";function y($,et){return P($)||N($,et)||w()}function P($){if(Array.isArray($))return $}function N($,et){var Z=[],pt=!0,_t=!1,It=void 0;try{for(var Rt=$[Symbol.iterator](),H;!(pt=(H=Rt.next()).done)&&(Z.push(H.value),!(et&&Z.length===et));pt=!0);}catch(ot){_t=!0,It=ot}finally{try{!pt&&Rt.return!=null&&Rt.return()}finally{if(_t)throw It}}return Z}function w(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function E($,et,Z,pt){$=$.filter(function(ft,ht){var Pt=et(ft,ht),Lt=Z(ft,ht);return Pt!=null&&isFinite(Pt)&&Lt!=null&&isFinite(Lt)}),pt&&$.sort(function(ft,ht){return et(ft)-et(ht)});for(var _t=$.length,It=new Float64Array(_t),Rt=new Float64Array(_t),H=0,ot=0,St,Ut,ae,bt=0;bt<_t;)ae=$[bt],It[bt]=St=+et(ae,bt,$),Rt[bt]=Ut=+Z(ae,bt,$),++bt,H+=(St-H)/bt,ot+=(Ut-ot)/bt;for(var wt=0;wt<_t;++wt)It[wt]-=H,Rt[wt]-=ot;return[It,Rt,H,ot]}function A($,et,Z,pt){for(var _t=0,It=0,Rt=$.length;It<Rt;It++){var H=$[It],ot=+et(H,It,$),St=+Z(H,It,$);ot!=null&&isFinite(ot)&&St!=null&&isFinite(St)&&pt(ot,St,_t++)}}function O($,et,Z,pt,_t){var It=0,Rt=0;return A($,et,Z,function(H,ot){var St=ot-_t(H),Ut=ot-pt;It+=St*St,Rt+=Ut*Ut}),1-It/Rt}function I($){return Math.atan2($[1][1]-$[0][1],$[1][0]-$[0][0])*180/Math.PI}function C($){return[($[0][0]+$[1][0])/2,($[0][1]+$[1][1])/2]}function T($,et,Z){for(var pt=Math.log(et-$)*Math.LOG10E+1|0,_t=1*Math.pow(10,-pt/2-1),It=1e4,Rt=[ot($),ot(et)],H=0;St(Rt)&&H<It;);return Rt;function ot(Ut){return[Ut,Z(Ut)]}function St(Ut){H++;for(var ae=Ut.length,bt=!1,wt=0;wt<ae-1;wt++){var ft=Ut[wt],ht=Ut[wt+1],Pt=C([ft,ht]),Lt=ot(Pt[0]),jt=I([ft,Pt]),mt=I([ft,Lt]),W=Math.abs(jt-mt);W>_t&&(Ut.splice(wt+1,0,Lt),bt=!0)}return bt}}function D($,et,Z,pt){var _t=pt-$*$,It=Math.abs(_t)<1e-24?0:(Z-$*et)/_t,Rt=et-It*$;return[Rt,It]}function B(){var $=function(It){return It[0]},et=function(It){return It[1]},Z;function pt(_t){var It=0,Rt=0,H=0,ot=0,St=0,Ut=0,ae=Z?+Z[0]:Infinity,bt=Z?+Z[1]:-Infinity;A(_t,$,et,function(mt,W){var rt=Math.log(W),ct=mt*W;++It,Rt+=(W-Rt)/It,ot+=(ct-ot)/It,Ut+=(mt*ct-Ut)/It,H+=(W*rt-H)/It,St+=(ct*rt-St)/It,Z||(mt<ae&&(ae=mt),mt>bt&&(bt=mt))});var wt=D(ot/Rt,H/Rt,St/Rt,Ut/Rt),ft=y(wt,2),ht=ft[0],Pt=ft[1];ht=Math.exp(ht);var Lt=function(W){return ht*Math.exp(Pt*W)},jt=T(ae,bt,Lt);return jt.a=ht,jt.b=Pt,jt.predict=Lt,jt.rSquared=O(_t,$,et,Rt,Lt),jt}return pt.domain=function(_t){return arguments.length?(Z=_t,pt):Z},pt.x=function(_t){return arguments.length?($=_t,pt):$},pt.y=function(_t){return arguments.length?(et=_t,pt):et},pt}function G(){var $=function(It){return It[0]},et=function(It){return It[1]},Z;function pt(_t){var It=0,Rt=0,H=0,ot=0,St=0,Ut=Z?+Z[0]:Infinity,ae=Z?+Z[1]:-Infinity;A(_t,$,et,function(jt,mt){++It,Rt+=(jt-Rt)/It,H+=(mt-H)/It,ot+=(jt*mt-ot)/It,St+=(jt*jt-St)/It,Z||(jt<Ut&&(Ut=jt),jt>ae&&(ae=jt))});var bt=D(Rt,H,ot,St),wt=y(bt,2),ft=wt[0],ht=wt[1],Pt=function(mt){return ht*mt+ft},Lt=[[Ut,Pt(Ut)],[ae,Pt(ae)]];return Lt.a=ht,Lt.b=ft,Lt.predict=Pt,Lt.rSquared=O(_t,$,et,H,Pt),Lt}return pt.domain=function(_t){return arguments.length?(Z=_t,pt):Z},pt.x=function(_t){return arguments.length?($=_t,pt):$},pt.y=function(_t){return arguments.length?(et=_t,pt):et},pt}function k($){$.sort(function(Z,pt){return Z-pt});var et=$.length/2;return et%1==0?($[et-1]+$[et])/2:$[Math.floor(et)]}var U=2,Y=1e-12;function K(){var $=function(It){return It[0]},et=function(It){return It[1]},Z=.3;function pt(_t){for(var It=E(_t,$,et,!0),Rt=y(It,4),H=Rt[0],ot=Rt[1],St=Rt[2],Ut=Rt[3],ae=H.length,bt=Math.max(2,~~(Z*ae)),wt=new Float64Array(ae),ft=new Float64Array(ae),ht=new Float64Array(ae).fill(1),Pt=-1;++Pt<=U;){for(var Lt=[0,bt-1],jt=0;jt<ae;++jt){for(var mt=H[jt],W=Lt[0],rt=Lt[1],ct=mt-H[W]>H[rt]-mt?W:rt,At=0,tt=0,dt=0,Et=0,Ot=0,$t=1/Math.abs(H[ct]-mt||1),st=W;st<=rt;++st){var Qt=H[st],vt=ot[st],yt=J(Math.abs(mt-Qt)*$t)*ht[st],zt=Qt*yt;At+=yt,tt+=zt,dt+=vt*yt,Et+=vt*zt,Ot+=Qt*zt}var oe=D(tt/At,dt/At,Et/At,Ot/At),Ie=y(oe,2),Gt=Ie[0],Wt=Ie[1];wt[jt]=Gt+Wt*mt,ft[jt]=Math.abs(ot[jt]-wt[jt]),q(H,jt+1,Lt)}if(Pt===U)break;var Ht=k(ft);if(Math.abs(Ht)<Y)break;for(var de=0,Ge,Re;de<ae;++de)Ge=ft[de]/(6*Ht),ht[de]=Ge>=1?Y:(Re=1-Ge*Ge)*Re}return X(H,wt,St,Ut)}return pt.bandwidth=function(_t){return arguments.length?(Z=_t,pt):Z},pt.x=function(_t){return arguments.length?($=_t,pt):$},pt.y=function(_t){return arguments.length?(et=_t,pt):et},pt}function J($){return($=1-$*$*$)*$*$}function q($,et,Z){var pt=$[et],_t=Z[0],It=Z[1]+1;if(!(It>=$.length))for(;et>_t&&$[It]-pt<=pt-$[_t];)Z[0]=++_t,Z[1]=It,++It}function X($,et,Z,pt){for(var _t=$.length,It=[],Rt=0,H=0,ot=[],St;Rt<_t;++Rt)St=$[Rt]+Z,ot[0]===St?ot[1]+=(et[Rt]-ot[1])/++H:(H=0,ot[1]+=pt,ot=[St,et[Rt]],It.push(ot));return ot[1]+=pt,It}function j(){var $=function(Rt){return Rt[0]},et=function(Rt){return Rt[1]},Z=Math.E,pt;function _t(It){var Rt=0,H=0,ot=0,St=0,Ut=0,ae=pt?+pt[0]:Infinity,bt=pt?+pt[1]:-Infinity,wt=Math.log(Z);A(It,$,et,function(W,rt){var ct=Math.log(W)/wt;++Rt,H+=(ct-H)/Rt,ot+=(rt-ot)/Rt,St+=(ct*rt-St)/Rt,Ut+=(ct*ct-Ut)/Rt,pt||(W<ae&&(ae=W),W>bt&&(bt=W))});var ft=D(H,ot,St,Ut),ht=y(ft,2),Pt=ht[0],Lt=ht[1],jt=function(rt){return Lt*Math.log(rt)/wt+Pt},mt=T(ae,bt,jt);return mt.a=Lt,mt.b=Pt,mt.predict=jt,mt.rSquared=O(It,$,et,ot,jt),mt}return _t.domain=function(It){return arguments.length?(pt=It,_t):pt},_t.x=function(It){return arguments.length?($=It,_t):$},_t.y=function(It){return arguments.length?(et=It,_t):et},_t.base=function(It){return arguments.length?(Z=It,_t):Z},_t}function Q(){var $=function(It){return It[0]},et=function(It){return It[1]},Z;function pt(_t){var It=E(_t,$,et),Rt=y(It,4),H=Rt[0],ot=Rt[1],St=Rt[2],Ut=Rt[3],ae=H.length,bt=0,wt=0,ft=0,ht=0,Pt=0,Lt,jt,mt,W;for(Lt=0;Lt<ae;)jt=H[Lt],mt=ot[Lt++],W=jt*jt,bt+=(W-bt)/Lt,wt+=(W*jt-wt)/Lt,ft+=(W*W-ft)/Lt,ht+=(jt*mt-ht)/Lt,Pt+=(W*mt-Pt)/Lt;var rt=0,ct=0,At=Z?+Z[0]:Infinity,tt=Z?+Z[1]:-Infinity;A(_t,$,et,function(yt,zt){ct++,rt+=(zt-rt)/ct,Z||(yt<At&&(At=yt),yt>tt&&(tt=yt))});var dt=ft-bt*bt,Et=bt*dt-wt*wt,Ot=(Pt*bt-ht*wt)/Et,$t=(ht*dt-Pt*wt)/Et,st=-Ot*bt,Qt=function(zt){return zt=zt-St,Ot*zt*zt+$t*zt+st+Ut},vt=T(At,tt,Qt);return vt.a=Ot,vt.b=$t-2*Ot*St,vt.c=st-$t*St+Ot*St*St+Ut,vt.predict=Qt,vt.rSquared=O(_t,$,et,rt,Qt),vt}return pt.domain=function(_t){return arguments.length?(Z=_t,pt):Z},pt.x=function(_t){return arguments.length?($=_t,pt):$},pt.y=function(_t){return arguments.length?(et=_t,pt):et},pt}function lt(){var $=function(Rt){return Rt[0]},et=function(Rt){return Rt[1]},Z=3,pt;function _t(It){if(Z===1){var Rt=G().x($).y(et).domain(pt)(It);return Rt.coefficients=[Rt.b,Rt.a],delete Rt.a,delete Rt.b,Rt}if(Z===2){var H=Q().x($).y(et).domain(pt)(It);return H.coefficients=[H.c,H.b,H.a],delete H.a,delete H.b,delete H.c,H}var ot=E(It,$,et),St=y(ot,4),Ut=St[0],ae=St[1],bt=St[2],wt=St[3],ft=Ut.length,ht=[],Pt=[],Lt=Z+1,jt=0,mt=0,W=pt?+pt[0]:Infinity,rt=pt?+pt[1]:-Infinity;A(It,$,et,function(Qt,vt){++mt,jt+=(vt-jt)/mt,pt||(Qt<W&&(W=Qt),Qt>rt&&(rt=Qt))});var ct,At,tt,dt,Et;for(ct=0;ct<Lt;++ct){for(tt=0,dt=0;tt<ft;++tt)dt+=Math.pow(Ut[tt],ct)*ae[tt];for(ht.push(dt),Et=new Float64Array(Lt),At=0;At<Lt;++At){for(tt=0,dt=0;tt<ft;++tt)dt+=Math.pow(Ut[tt],ct+At);Et[At]=dt}Pt.push(Et)}Pt.push(ht);var Ot=b(Pt),$t=function(vt){vt-=bt;var yt=wt+Ot[0]+Ot[1]*vt+Ot[2]*vt*vt;for(ct=3;ct<Lt;++ct)yt+=Ot[ct]*Math.pow(vt,ct);return yt},st=T(W,rt,$t);return st.coefficients=z(Lt,Ot,-bt,wt),st.predict=$t,st.rSquared=O(It,$,et,jt,$t),st}return _t.domain=function(It){return arguments.length?(pt=It,_t):pt},_t.x=function(It){return arguments.length?($=It,_t):$},_t.y=function(It){return arguments.length?(et=It,_t):et},_t.order=function(It){return arguments.length?(Z=It,_t):Z},_t}function z($,et,Z,pt){var _t=Array($),It,Rt,H,ot;for(It=0;It<$;++It)_t[It]=0;for(It=$-1;It>=0;--It)for(H=et[It],ot=1,_t[It]+=H,Rt=1;Rt<=It;++Rt)ot*=(It+1-Rt)/Rt,_t[It-Rt]+=H*Math.pow(Z,Rt)*ot;return _t[0]+=pt,_t}function b($){var et=$.length-1,Z=[],pt,_t,It,Rt,H;for(pt=0;pt<et;++pt){for(Rt=pt,_t=pt+1;_t<et;++_t)Math.abs($[pt][_t])>Math.abs($[pt][Rt])&&(Rt=_t);for(It=pt;It<et+1;++It)H=$[It][pt],$[It][pt]=$[It][Rt],$[It][Rt]=H;for(_t=pt+1;_t<et;++_t)for(It=et;It>=pt;It--)$[It][_t]-=$[It][pt]*$[pt][_t]/$[pt][pt]}for(_t=et-1;_t>=0;--_t){for(H=0,It=_t+1;It<et;++It)H+=$[It][_t]*Z[It];Z[_t]=($[et][_t]-H)/$[_t][_t]}return Z}function v(){var $=function(It){return It[0]},et=function(It){return It[1]},Z;function pt(_t){var It=0,Rt=0,H=0,ot=0,St=0,Ut=0,ae=Z?+Z[0]:Infinity,bt=Z?+Z[1]:-Infinity;A(_t,$,et,function(mt,W){var rt=Math.log(mt),ct=Math.log(W);++It,Rt+=(rt-Rt)/It,H+=(ct-H)/It,ot+=(rt*ct-ot)/It,St+=(rt*rt-St)/It,Ut+=(W-Ut)/It,Z||(mt<ae&&(ae=mt),mt>bt&&(bt=mt))});var wt=D(Rt,H,ot,St),ft=y(wt,2),ht=ft[0],Pt=ft[1];ht=Math.exp(ht);var Lt=function(W){return ht*Math.pow(W,Pt)},jt=T(ae,bt,Lt);return jt.a=ht,jt.b=Pt,jt.predict=Lt,jt.rSquared=O(_t,$,et,Ut,Lt),jt}return pt.domain=function(_t){return arguments.length?(Z=_t,pt):Z},pt.x=function(_t){return arguments.length?($=_t,pt):$},pt.y=function(_t){return arguments.length?(et=_t,pt):et},pt}x.regressionExp=B,x.regressionLinear=G,x.regressionLoess=K,x.regressionLog=j,x.regressionPoly=lt,x.regressionPow=v,x.regressionQuad=Q,Object.defineProperty(x,"__esModule",{value:!0})})},7802:function(ut,L,x){"use strict";x.d(L,{HT:function(){return U}});var y=0,P=0,N=0,w=1e3,E,A,O=0,I=0,C=0,T=typeof performance=="object"&&performance.now?performance:Date,D=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(j){setTimeout(j,17)};function B(){return I||(D(G),I=T.now()+C)}function G(){I=0}function k(){this._call=this._time=this._next=null}k.prototype=U.prototype={constructor:k,restart:function(j,Q,lt){if(typeof j!="function")throw new TypeError("callback is not a function");lt=(lt==null?B():+lt)+(Q==null?0:+Q),!this._next&&A!==this&&(A?A._next=this:E=this,A=this),this._call=j,this._time=lt,X()},stop:function(){this._call&&(this._call=null,this._time=Infinity,X())}};function U(j,Q,lt){var z=new k;return z.restart(j,Q,lt),z}function Y(){B(),++y;for(var j=E,Q;j;)(Q=I-j._time)>=0&&j._call.call(null,Q),j=j._next;--y}function K(){I=(O=T.now())+C,y=P=0;try{Y()}finally{y=0,q(),I=0}}function J(){var j=T.now(),Q=j-O;Q>w&&(C-=Q,O=j)}function q(){for(var j,Q=E,lt,z=Infinity;Q;)Q._call?(z>Q._time&&(z=Q._time),j=Q,Q=Q._next):(lt=Q._next,Q._next=null,Q=j?j._next=lt:E=lt);A=j,X(z)}function X(j){if(!y){P&&(P=clearTimeout(P));var Q=j-I;Q>24?(j<Infinity&&(P=setTimeout(K,j-T.now()-C)),N&&(N=clearInterval(N))):(N||(O=T.now(),N=setInterval(J,w)),y=1,D(K))}}},92546:function(ut,L,x){ut.exports={graphlib:x(76626),layout:x(47194),debug:x(11303),util:{time:x(53063).time,notime:x(53063).notime},version:x(11897)}},81255:function(ut,L,x){"use strict";var y=x(72361),P=x(39240);ut.exports={run:N,undo:E};function N(A){var O=A.graph().acyclicer==="greedy"?P(A,I(A)):w(A);y.forEach(O,function(C){var T=A.edge(C);A.removeEdge(C),T.forwardName=C.name,T.reversed=!0,A.setEdge(C.w,C.v,T,y.uniqueId("rev"))});function I(C){return function(T){return C.edge(T).weight}}}function w(A){var O=[],I={},C={};function T(D){y.has(C,D)||(C[D]=!0,I[D]=!0,y.forEach(A.outEdges(D),function(B){y.has(I,B.w)?O.push(B):T(B.w)}),delete I[D])}return y.forEach(A.nodes(),T),O}function E(A){y.forEach(A.edges(),function(O){var I=A.edge(O);if(I.reversed){A.removeEdge(O);var C=I.forwardName;delete I.reversed,delete I.forwardName,A.setEdge(O.w,O.v,I,C)}})}},60765:function(ut,L,x){var y=x(72361),P=x(53063);ut.exports=N;function N(E){function A(O){var I=E.children(O),C=E.node(O);if(I.length&&y.forEach(I,A),y.has(C,"minRank")){C.borderLeft=[],C.borderRight=[];for(var T=C.minRank,D=C.maxRank+1;T<D;++T)w(E,"borderLeft","_bl",O,C,T),w(E,"borderRight","_br",O,C,T)}}y.forEach(E.children(),A)}function w(E,A,O,I,C,T){var D={width:0,height:0,rank:T,borderType:A},B=C[A][T-1],G=P.addDummyNode(E,"border",D,O);C[A][T]=G,E.setParent(G,I),B&&E.setEdge(B,G,{weight:1})}},13257:function(ut,L,x){"use strict";var y=x(72361);ut.exports={adjust:P,undo:N};function P(T){var D=T.graph().rankdir.toLowerCase();(D==="lr"||D==="rl")&&w(T)}function N(T){var D=T.graph().rankdir.toLowerCase();(D==="bt"||D==="rl")&&A(T),(D==="lr"||D==="rl")&&(I(T),w(T))}function w(T){y.forEach(T.nodes(),function(D){E(T.node(D))}),y.forEach(T.edges(),function(D){E(T.edge(D))})}function E(T){var D=T.width;T.width=T.height,T.height=D}function A(T){y.forEach(T.nodes(),function(D){O(T.node(D))}),y.forEach(T.edges(),function(D){var B=T.edge(D);y.forEach(B.points,O),y.has(B,"y")&&O(B)})}function O(T){T.y=-T.y}function I(T){y.forEach(T.nodes(),function(D){C(T.node(D))}),y.forEach(T.edges(),function(D){var B=T.edge(D);y.forEach(B.points,C),y.has(B,"x")&&C(B)})}function C(T){var D=T.x;T.x=T.y,T.y=D}},21135:function(ut){ut.exports=L;function L(){var P={};P._next=P._prev=P,this._sentinel=P}L.prototype.dequeue=function(){var P=this._sentinel,N=P._prev;if(N!==P)return x(N),N},L.prototype.enqueue=function(P){var N=this._sentinel;P._prev&&P._next&&x(P),P._next=N._next,N._next._prev=P,N._next=P,P._prev=N},L.prototype.toString=function(){for(var P=[],N=this._sentinel,w=N._prev;w!==N;)P.push(JSON.stringify(w,y)),w=w._prev;return"["+P.join(", ")+"]"};function x(P){P._prev._next=P._next,P._next._prev=P._prev,delete P._next,delete P._prev}function y(P,N){if(P!=="_next"&&P!=="_prev")return N}},11303:function(ut,L,x){var y=x(72361),P=x(53063),N=x(76626).Graph;ut.exports={debugOrdering:w};function w(E){var A=P.buildLayerMatrix(E),O=new N({compound:!0,multigraph:!0}).setGraph({});return y.forEach(E.nodes(),function(I){O.setNode(I,{label:I}),O.setParent(I,"layer"+E.node(I).rank)}),y.forEach(E.edges(),function(I){O.setEdge(I.v,I.w,{},I.name)}),y.forEach(A,function(I,C){var T="layer"+C;O.setNode(T,{rank:"same"}),y.reduce(I,function(D,B){return O.setEdge(D,B,{style:"invis"}),B})}),O}},76626:function(ut,L,x){var y;try{y=x(75172)}catch(P){}y||(y=window.graphlib),ut.exports=y},39240:function(ut,L,x){var y=x(72361),P=x(76626).Graph,N=x(21135);ut.exports=E;var w=y.constant(1);function E(T,D){if(T.nodeCount()<=1)return[];var B=I(T,D||w),G=A(B.graph,B.buckets,B.zeroIdx);return y.flatten(y.map(G,function(k){return T.outEdges(k.v,k.w)}),!0)}function A(T,D,B){for(var G=[],k=D[D.length-1],U=D[0],Y;T.nodeCount();){for(;Y=U.dequeue();)O(T,D,B,Y);for(;Y=k.dequeue();)O(T,D,B,Y);if(T.nodeCount()){for(var K=D.length-2;K>0;--K)if(Y=D[K].dequeue(),Y){G=G.concat(O(T,D,B,Y,!0));break}}}return G}function O(T,D,B,G,k){var U=k?[]:void 0;return y.forEach(T.inEdges(G.v),function(Y){var K=T.edge(Y),J=T.node(Y.v);k&&U.push({v:Y.v,w:Y.w}),J.out-=K,C(D,B,J)}),y.forEach(T.outEdges(G.v),function(Y){var K=T.edge(Y),J=Y.w,q=T.node(J);q.in-=K,C(D,B,q)}),T.removeNode(G.v),U}function I(T,D){var B=new P,G=0,k=0;y.forEach(T.nodes(),function(K){B.setNode(K,{v:K,in:0,out:0})}),y.forEach(T.edges(),function(K){var J=B.edge(K.v,K.w)||0,q=D(K),X=J+q;B.setEdge(K.v,K.w,X),k=Math.max(k,B.node(K.v).out+=q),G=Math.max(G,B.node(K.w).in+=q)});var U=y.range(k+G+3).map(function(){return new N}),Y=G+1;return y.forEach(B.nodes(),function(K){C(U,Y,B.node(K))}),{graph:B,buckets:U,zeroIdx:Y}}function C(T,D,B){B.out?B.in?T[B.out-B.in+D].enqueue(B):T[T.length-1].enqueue(B):T[0].enqueue(B)}},47194:function(ut,L,x){"use strict";var y=x(72361),P=x(81255),N=x(27163),w=x(64505),E=x(53063).normalizeRanks,A=x(71970),O=x(53063).removeEmptyRanks,I=x(31733),C=x(60765),T=x(13257),D=x(62852),B=x(93021),G=x(53063),k=x(76626).Graph;ut.exports=U;function U(ft,ht){var Pt=ht&&ht.debugTiming?G.time:G.notime;Pt("layout",function(){var Lt=Pt("  buildLayoutGraph",function(){return v(ft)});Pt("  runLayout",function(){Y(Lt,Pt)}),Pt("  updateInputGraph",function(){K(ft,Lt)})})}function Y(ft,ht){ht("    makeSpaceForEdgeLabels",function(){$(ft)}),ht("    removeSelfEdges",function(){St(ft)}),ht("    acyclic",function(){P.run(ft)}),ht("    nestingGraph.run",function(){I.run(ft)}),ht("    rank",function(){w(G.asNonCompoundGraph(ft))}),ht("    injectEdgeLabelProxies",function(){et(ft)}),ht("    removeEmptyRanks",function(){O(ft)}),ht("    nestingGraph.cleanup",function(){I.cleanup(ft)}),ht("    normalizeRanks",function(){E(ft)}),ht("    assignRankMinMax",function(){Z(ft)}),ht("    removeEdgeLabelProxies",function(){pt(ft)}),ht("    normalize.run",function(){N.run(ft)}),ht("    parentDummyChains",function(){A(ft)}),ht("    addBorderSegments",function(){C(ft)}),ht("    order",function(){D(ft)}),ht("    insertSelfEdges",function(){Ut(ft)}),ht("    adjustCoordinateSystem",function(){T.adjust(ft)}),ht("    position",function(){B(ft)}),ht("    positionSelfEdges",function(){ae(ft)}),ht("    removeBorderNodes",function(){ot(ft)}),ht("    normalize.undo",function(){N.undo(ft)}),ht("    fixupEdgeLabelCoords",function(){Rt(ft)}),ht("    undoCoordinateSystem",function(){T.undo(ft)}),ht("    translateGraph",function(){_t(ft)}),ht("    assignNodeIntersects",function(){It(ft)}),ht("    reversePoints",function(){H(ft)}),ht("    acyclic.undo",function(){P.undo(ft)})}function K(ft,ht){y.forEach(ft.nodes(),function(Pt){var Lt=ft.node(Pt),jt=ht.node(Pt);Lt&&(Lt.x=jt.x,Lt.y=jt.y,ht.children(Pt).length&&(Lt.width=jt.width,Lt.height=jt.height))}),y.forEach(ft.edges(),function(Pt){var Lt=ft.edge(Pt),jt=ht.edge(Pt);Lt.points=jt.points,y.has(jt,"x")&&(Lt.x=jt.x,Lt.y=jt.y)}),ft.graph().width=ht.graph().width,ft.graph().height=ht.graph().height}var J=["nodesep","edgesep","ranksep","marginx","marginy"],q={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},X=["acyclicer","ranker","rankdir","align"],j=["width","height"],Q={width:0,height:0},lt=["minlen","weight","width","height","labeloffset"],z={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},b=["labelpos"];function v(ft){var ht=new k({multigraph:!0,compound:!0}),Pt=wt(ft.graph());return ht.setGraph(y.merge({},q,bt(Pt,J),y.pick(Pt,X))),y.forEach(ft.nodes(),function(Lt){var jt=wt(ft.node(Lt));ht.setNode(Lt,y.defaults(bt(jt,j),Q)),ht.setParent(Lt,ft.parent(Lt))}),y.forEach(ft.edges(),function(Lt){var jt=wt(ft.edge(Lt));ht.setEdge(Lt,y.merge({},z,bt(jt,lt),y.pick(jt,b)))}),ht}function $(ft){var ht=ft.graph();ht.ranksep/=2,y.forEach(ft.edges(),function(Pt){var Lt=ft.edge(Pt);Lt.minlen*=2,Lt.labelpos.toLowerCase()!=="c"&&(ht.rankdir==="TB"||ht.rankdir==="BT"?Lt.width+=Lt.labeloffset:Lt.height+=Lt.labeloffset)})}function et(ft){y.forEach(ft.edges(),function(ht){var Pt=ft.edge(ht);if(Pt.width&&Pt.height){var Lt=ft.node(ht.v),jt=ft.node(ht.w),mt={rank:(jt.rank-Lt.rank)/2+Lt.rank,e:ht};G.addDummyNode(ft,"edge-proxy",mt,"_ep")}})}function Z(ft){var ht=0;y.forEach(ft.nodes(),function(Pt){var Lt=ft.node(Pt);Lt.borderTop&&(Lt.minRank=ft.node(Lt.borderTop).rank,Lt.maxRank=ft.node(Lt.borderBottom).rank,ht=y.max(ht,Lt.maxRank))}),ft.graph().maxRank=ht}function pt(ft){y.forEach(ft.nodes(),function(ht){var Pt=ft.node(ht);Pt.dummy==="edge-proxy"&&(ft.edge(Pt.e).labelRank=Pt.rank,ft.removeNode(ht))})}function _t(ft){var ht=Number.POSITIVE_INFINITY,Pt=0,Lt=Number.POSITIVE_INFINITY,jt=0,mt=ft.graph(),W=mt.marginx||0,rt=mt.marginy||0;function ct(At){var tt=At.x,dt=At.y,Et=At.width,Ot=At.height;ht=Math.min(ht,tt-Et/2),Pt=Math.max(Pt,tt+Et/2),Lt=Math.min(Lt,dt-Ot/2),jt=Math.max(jt,dt+Ot/2)}y.forEach(ft.nodes(),function(At){ct(ft.node(At))}),y.forEach(ft.edges(),function(At){var tt=ft.edge(At);y.has(tt,"x")&&ct(tt)}),ht-=W,Lt-=rt,y.forEach(ft.nodes(),function(At){var tt=ft.node(At);tt.x-=ht,tt.y-=Lt}),y.forEach(ft.edges(),function(At){var tt=ft.edge(At);y.forEach(tt.points,function(dt){dt.x-=ht,dt.y-=Lt}),y.has(tt,"x")&&(tt.x-=ht),y.has(tt,"y")&&(tt.y-=Lt)}),mt.width=Pt-ht+W,mt.height=jt-Lt+rt}function It(ft){y.forEach(ft.edges(),function(ht){var Pt=ft.edge(ht),Lt=ft.node(ht.v),jt=ft.node(ht.w),mt,W;Pt.points?(mt=Pt.points[0],W=Pt.points[Pt.points.length-1]):(Pt.points=[],mt=jt,W=Lt),Pt.points.unshift(G.intersectRect(Lt,mt)),Pt.points.push(G.intersectRect(jt,W))})}function Rt(ft){y.forEach(ft.edges(),function(ht){var Pt=ft.edge(ht);if(y.has(Pt,"x"))switch((Pt.labelpos==="l"||Pt.labelpos==="r")&&(Pt.width-=Pt.labeloffset),Pt.labelpos){case"l":Pt.x-=Pt.width/2+Pt.labeloffset;break;case"r":Pt.x+=Pt.width/2+Pt.labeloffset;break}})}function H(ft){y.forEach(ft.edges(),function(ht){var Pt=ft.edge(ht);Pt.reversed&&Pt.points.reverse()})}function ot(ft){y.forEach(ft.nodes(),function(ht){if(ft.children(ht).length){var Pt=ft.node(ht),Lt=ft.node(Pt.borderTop),jt=ft.node(Pt.borderBottom),mt=ft.node(y.last(Pt.borderLeft)),W=ft.node(y.last(Pt.borderRight));Pt.width=Math.abs(W.x-mt.x),Pt.height=Math.abs(jt.y-Lt.y),Pt.x=mt.x+Pt.width/2,Pt.y=Lt.y+Pt.height/2}}),y.forEach(ft.nodes(),function(ht){ft.node(ht).dummy==="border"&&ft.removeNode(ht)})}function St(ft){y.forEach(ft.edges(),function(ht){if(ht.v===ht.w){var Pt=ft.node(ht.v);Pt.selfEdges||(Pt.selfEdges=[]),Pt.selfEdges.push({e:ht,label:ft.edge(ht)}),ft.removeEdge(ht)}})}function Ut(ft){var ht=G.buildLayerMatrix(ft);y.forEach(ht,function(Pt){var Lt=0;y.forEach(Pt,function(jt,mt){var W=ft.node(jt);W.order=mt+Lt,y.forEach(W.selfEdges,function(rt){G.addDummyNode(ft,"selfedge",{width:rt.label.width,height:rt.label.height,rank:W.rank,order:mt+ ++Lt,e:rt.e,label:rt.label},"_se")}),delete W.selfEdges})})}function ae(ft){y.forEach(ft.nodes(),function(ht){var Pt=ft.node(ht);if(Pt.dummy==="selfedge"){var Lt=ft.node(Pt.e.v),jt=Lt.x+Lt.width/2,mt=Lt.y,W=Pt.x-jt,rt=Lt.height/2;ft.setEdge(Pt.e,Pt.label),ft.removeNode(ht),Pt.label.points=[{x:jt+2*W/3,y:mt-rt},{x:jt+5*W/6,y:mt-rt},{x:jt+W,y:mt},{x:jt+5*W/6,y:mt+rt},{x:jt+2*W/3,y:mt+rt}],Pt.label.x=Pt.x,Pt.label.y=Pt.y}})}function bt(ft,ht){return y.mapValues(y.pick(ft,ht),Number)}function wt(ft){var ht={};return y.forEach(ft,function(Pt,Lt){ht[Lt.toLowerCase()]=Pt}),ht}},72361:function(ut,L,x){var y;try{y={cloneDeep:x(20250),constant:x(13503),defaults:x(28548),each:x(76934),filter:x(64725),find:x(79785),flatten:x(40151),forEach:x(99204),forIn:x(23190),has:x(99946),isUndefined:x(16513),last:x(10611),map:x(9924),mapValues:x(70642),max:x(95987),merge:x(28440),min:x(73376),minBy:x(83296),now:x(5795),pick:x(89409),range:x(60859),reduce:x(16473),sortBy:x(351),uniqueId:x(95708),values:x(81229),zipObject:x(65441)}}catch(P){}y||(y=window._),ut.exports=y},31733:function(ut,L,x){var y=x(72361),P=x(53063);ut.exports={run:N,cleanup:O};function N(I){var C=P.addDummyNode(I,"root",{},"_root"),T=E(I),D=y.max(y.values(T))-1,B=2*D+1;I.graph().nestingRoot=C,y.forEach(I.edges(),function(k){I.edge(k).minlen*=B});var G=A(I)+1;y.forEach(I.children(),function(k){w(I,C,B,G,D,T,k)}),I.graph().nodeRankFactor=B}function w(I,C,T,D,B,G,k){var U=I.children(k);if(!U.length){k!==C&&I.setEdge(C,k,{weight:0,minlen:T});return}var Y=P.addBorderNode(I,"_bt"),K=P.addBorderNode(I,"_bb"),J=I.node(k);I.setParent(Y,k),J.borderTop=Y,I.setParent(K,k),J.borderBottom=K,y.forEach(U,function(q){w(I,C,T,D,B,G,q);var X=I.node(q),j=X.borderTop?X.borderTop:q,Q=X.borderBottom?X.borderBottom:q,lt=X.borderTop?D:2*D,z=j!==Q?1:B-G[k]+1;I.setEdge(Y,j,{weight:lt,minlen:z,nestingEdge:!0}),I.setEdge(Q,K,{weight:lt,minlen:z,nestingEdge:!0})}),I.parent(k)||I.setEdge(C,Y,{weight:0,minlen:B+G[k]})}function E(I){var C={};function T(D,B){var G=I.children(D);G&&G.length&&y.forEach(G,function(k){T(k,B+1)}),C[D]=B}return y.forEach(I.children(),function(D){T(D,1)}),C}function A(I){return y.reduce(I.edges(),function(C,T){return C+I.edge(T).weight},0)}function O(I){var C=I.graph();I.removeNode(C.nestingRoot),delete C.nestingRoot,y.forEach(I.edges(),function(T){var D=I.edge(T);D.nestingEdge&&I.removeEdge(T)})}},27163:function(ut,L,x){"use strict";var y=x(72361),P=x(53063);ut.exports={run:N,undo:E};function N(A){A.graph().dummyChains=[],y.forEach(A.edges(),function(O){w(A,O)})}function w(A,O){var I=O.v,C=A.node(I).rank,T=O.w,D=A.node(T).rank,B=O.name,G=A.edge(O),k=G.labelRank;if(D!==C+1){A.removeEdge(O);var U,Y,K;for(K=0,++C;C<D;++K,++C)G.points=[],Y={width:0,height:0,edgeLabel:G,edgeObj:O,rank:C},U=P.addDummyNode(A,"edge",Y,"_d"),C===k&&(Y.width=G.width,Y.height=G.height,Y.dummy="edge-label",Y.labelpos=G.labelpos),A.setEdge(I,U,{weight:G.weight},B),K===0&&A.graph().dummyChains.push(U),I=U;A.setEdge(I,T,{weight:G.weight},B)}}function E(A){y.forEach(A.graph().dummyChains,function(O){var I=A.node(O),C=I.edgeLabel,T;for(A.setEdge(I.edgeObj,C);I.dummy;)T=A.successors(O)[0],A.removeNode(O),C.points.push({x:I.x,y:I.y}),I.dummy==="edge-label"&&(C.x=I.x,C.y=I.y,C.width=I.width,C.height=I.height),O=T,I=A.node(O)})}},52205:function(ut,L,x){var y=x(72361);ut.exports=P;function P(N,w,E){var A={},O;y.forEach(E,function(I){for(var C=N.parent(I),T,D;C;){if(T=N.parent(C),T?(D=A[T],A[T]=C):(D=O,O=C),D&&D!==C){w.setEdge(D,C);return}C=T}})}},99506:function(ut,L,x){var y=x(72361);ut.exports=P;function P(N,w){return y.map(w,function(E){var A=N.inEdges(E);if(A.length){var O=y.reduce(A,function(I,C){var T=N.edge(C),D=N.node(C.v);return{sum:I.sum+T.weight*D.order,weight:I.weight+T.weight}},{sum:0,weight:0});return{v:E,barycenter:O.sum/O.weight,weight:O.weight}}else return{v:E}})}},59105:function(ut,L,x){var y=x(72361),P=x(76626).Graph;ut.exports=N;function N(E,A,O){var I=w(E),C=new P({compound:!0}).setGraph({root:I}).setDefaultNodeLabel(function(T){return E.node(T)});return y.forEach(E.nodes(),function(T){var D=E.node(T),B=E.parent(T);(D.rank===A||D.minRank<=A&&A<=D.maxRank)&&(C.setNode(T),C.setParent(T,B||I),y.forEach(E[O](T),function(G){var k=G.v===T?G.w:G.v,U=C.edge(k,T),Y=y.isUndefined(U)?0:U.weight;C.setEdge(k,T,{weight:E.edge(G).weight+Y})}),y.has(D,"minRank")&&C.setNode(T,{borderLeft:D.borderLeft[A],borderRight:D.borderRight[A]}))}),C}function w(E){for(var A;E.hasNode(A=y.uniqueId("_root")););return A}},45456:function(ut,L,x){"use strict";var y=x(72361);ut.exports=P;function P(w,E){for(var A=0,O=1;O<E.length;++O)A+=N(w,E[O-1],E[O]);return A}function N(w,E,A){for(var O=y.zipObject(A,y.map(A,function(G,k){return k})),I=y.flatten(y.map(E,function(G){return y.sortBy(y.map(w.outEdges(G),function(k){return{pos:O[k.w],weight:w.edge(k).weight}}),"pos")}),!0),C=1;C<A.length;)C<<=1;var T=2*C-1;C-=1;var D=y.map(new Array(T),function(){return 0}),B=0;return y.forEach(I.forEach(function(G){var k=G.pos+C;D[k]+=G.weight;for(var U=0;k>0;)k%2&&(U+=D[k+1]),k=k-1>>1,D[k]+=G.weight;B+=G.weight*U})),B}},62852:function(ut,L,x){"use strict";var y=x(72361),P=x(18043),N=x(45456),w=x(86490),E=x(59105),A=x(52205),O=x(76626).Graph,I=x(53063);ut.exports=C;function C(G){var k=I.maxRank(G),U=T(G,y.range(1,k+1),"inEdges"),Y=T(G,y.range(k-1,-1,-1),"outEdges"),K=P(G);B(G,K);for(var J=Number.POSITIVE_INFINITY,q,X=0,j=0;j<4;++X,++j){D(X%2?U:Y,X%4>=2),K=I.buildLayerMatrix(G);var Q=N(G,K);Q<J&&(j=0,q=y.cloneDeep(K),J=Q)}B(G,q)}function T(G,k,U){return y.map(k,function(Y){return E(G,Y,U)})}function D(G,k){var U=new O;y.forEach(G,function(Y){var K=Y.graph().root,J=w(Y,K,U,k);y.forEach(J.vs,function(q,X){Y.node(q).order=X}),A(Y,U,J.vs)})}function B(G,k){y.forEach(k,function(U){y.forEach(U,function(Y,K){G.node(Y).order=K})})}},18043:function(ut,L,x){"use strict";var y=x(72361);ut.exports=P;function P(N){var w={},E=y.filter(N.nodes(),function(T){return!N.children(T).length}),A=y.max(y.map(E,function(T){return N.node(T).rank})),O=y.map(y.range(A+1),function(){return[]});function I(T){if(!y.has(w,T)){w[T]=!0;var D=N.node(T);O[D.rank].push(T),y.forEach(N.successors(T),I)}}var C=y.sortBy(E,function(T){return N.node(T).rank});return y.forEach(C,I),O}},45926:function(ut,L,x){"use strict";var y=x(72361);ut.exports=P;function P(E,A){var O={};y.forEach(E,function(C,T){var D=O[C.v]={indegree:0,in:[],out:[],vs:[C.v],i:T};y.isUndefined(C.barycenter)||(D.barycenter=C.barycenter,D.weight=C.weight)}),y.forEach(A.edges(),function(C){var T=O[C.v],D=O[C.w];!y.isUndefined(T)&&!y.isUndefined(D)&&(D.indegree++,T.out.push(O[C.w]))});var I=y.filter(O,function(C){return!C.indegree});return N(I)}function N(E){var A=[];function O(T){return function(D){D.merged||(y.isUndefined(D.barycenter)||y.isUndefined(T.barycenter)||D.barycenter>=T.barycenter)&&w(T,D)}}function I(T){return function(D){D.in.push(T),--D.indegree==0&&E.push(D)}}for(;E.length;){var C=E.pop();A.push(C),y.forEach(C.in.reverse(),O(C)),y.forEach(C.out,I(C))}return y.map(y.filter(A,function(T){return!T.merged}),function(T){return y.pick(T,["vs","i","barycenter","weight"])})}function w(E,A){var O=0,I=0;E.weight&&(O+=E.barycenter*E.weight,I+=E.weight),A.weight&&(O+=A.barycenter*A.weight,I+=A.weight),E.vs=A.vs.concat(E.vs),E.barycenter=O/I,E.weight=I,E.i=Math.min(A.i,E.i),A.merged=!0}},86490:function(ut,L,x){var y=x(72361),P=x(99506),N=x(45926),w=x(1349);ut.exports=E;function E(I,C,T,D){var B=I.children(C),G=I.node(C),k=G?G.borderLeft:void 0,U=G?G.borderRight:void 0,Y={};k&&(B=y.filter(B,function(Q){return Q!==k&&Q!==U}));var K=P(I,B);y.forEach(K,function(Q){if(I.children(Q.v).length){var lt=E(I,Q.v,T,D);Y[Q.v]=lt,y.has(lt,"barycenter")&&O(Q,lt)}});var J=N(K,T);A(J,Y);var q=w(J,D);if(k&&(q.vs=y.flatten([k,q.vs,U],!0),I.predecessors(k).length)){var X=I.node(I.predecessors(k)[0]),j=I.node(I.predecessors(U)[0]);y.has(q,"barycenter")||(q.barycenter=0,q.weight=0),q.barycenter=(q.barycenter*q.weight+X.order+j.order)/(q.weight+2),q.weight+=2}return q}function A(I,C){y.forEach(I,function(T){T.vs=y.flatten(T.vs.map(function(D){return C[D]?C[D].vs:D}),!0)})}function O(I,C){y.isUndefined(I.barycenter)?(I.barycenter=C.barycenter,I.weight=C.weight):(I.barycenter=(I.barycenter*I.weight+C.barycenter*C.weight)/(I.weight+C.weight),I.weight+=C.weight)}},1349:function(ut,L,x){var y=x(72361),P=x(53063);ut.exports=N;function N(A,O){var I=P.partition(A,function(Y){return y.has(Y,"barycenter")}),C=I.lhs,T=y.sortBy(I.rhs,function(Y){return-Y.i}),D=[],B=0,G=0,k=0;C.sort(E(!!O)),k=w(D,T,k),y.forEach(C,function(Y){k+=Y.vs.length,D.push(Y.vs),B+=Y.barycenter*Y.weight,G+=Y.weight,k=w(D,T,k)});var U={vs:y.flatten(D,!0)};return G&&(U.barycenter=B/G,U.weight=G),U}function w(A,O,I){for(var C;O.length&&(C=y.last(O)).i<=I;)O.pop(),A.push(C.vs),I++;return I}function E(A){return function(O,I){return O.barycenter<I.barycenter?-1:O.barycenter>I.barycenter?1:A?I.i-O.i:O.i-I.i}}},71970:function(ut,L,x){var y=x(72361);ut.exports=P;function P(E){var A=w(E);y.forEach(E.graph().dummyChains,function(O){for(var I=E.node(O),C=I.edgeObj,T=N(E,A,C.v,C.w),D=T.path,B=T.lca,G=0,k=D[G],U=!0;O!==C.w;){if(I=E.node(O),U){for(;(k=D[G])!==B&&E.node(k).maxRank<I.rank;)G++;k===B&&(U=!1)}if(!U){for(;G<D.length-1&&E.node(k=D[G+1]).minRank<=I.rank;)G++;k=D[G]}E.setParent(O,k),O=E.successors(O)[0]}})}function N(E,A,O,I){var C=[],T=[],D=Math.min(A[O].low,A[I].low),B=Math.max(A[O].lim,A[I].lim),G,k;G=O;do G=E.parent(G),C.push(G);while(G&&(A[G].low>D||B>A[G].lim));for(k=G,G=I;(G=E.parent(G))!==k;)T.push(G);return{path:C.concat(T.reverse()),lca:k}}function w(E){var A={},O=0;function I(C){var T=O;y.forEach(E.children(C),I),A[C]={low:T,lim:O++}}return y.forEach(E.children(),I),A}},92080:function(ut,L,x){"use strict";var y=x(72361),P=x(76626).Graph,N=x(53063);ut.exports={positionX:U,findType1Conflicts:w,findType2Conflicts:E,addConflict:O,hasConflict:I,verticalAlignment:C,horizontalCompaction:T,alignCoordinates:G,findSmallestWidthAlignment:B,balance:k};function w(J,q){var X={};function j(Q,lt){var z=0,b=0,v=Q.length,$=y.last(lt);return y.forEach(lt,function(et,Z){var pt=A(J,et),_t=pt?J.node(pt).order:v;(pt||et===$)&&(y.forEach(lt.slice(b,Z+1),function(It){y.forEach(J.predecessors(It),function(Rt){var H=J.node(Rt),ot=H.order;(ot<z||_t<ot)&&!(H.dummy&&J.node(It).dummy)&&O(X,Rt,It)})}),b=Z+1,z=_t)}),lt}return y.reduce(q,j),X}function E(J,q){var X={};function j(lt,z,b,v,$){var et;y.forEach(y.range(z,b),function(Z){et=lt[Z],J.node(et).dummy&&y.forEach(J.predecessors(et),function(pt){var _t=J.node(pt);_t.dummy&&(_t.order<v||_t.order>$)&&O(X,pt,et)})})}function Q(lt,z){var b=-1,v,$=0;return y.forEach(z,function(et,Z){if(J.node(et).dummy==="border"){var pt=J.predecessors(et);pt.length&&(v=J.node(pt[0]).order,j(z,$,Z,b,v),$=Z,b=v)}j(z,$,z.length,v,lt.length)}),z}return y.reduce(q,Q),X}function A(J,q){if(J.node(q).dummy)return y.find(J.predecessors(q),function(X){return J.node(X).dummy})}function O(J,q,X){if(q>X){var j=q;q=X,X=j}var Q=J[q];Q||(J[q]=Q={}),Q[X]=!0}function I(J,q,X){if(q>X){var j=q;q=X,X=j}return y.has(J[q],X)}function C(J,q,X,j){var Q={},lt={},z={};return y.forEach(q,function(b){y.forEach(b,function(v,$){Q[v]=v,lt[v]=v,z[v]=$})}),y.forEach(q,function(b){var v=-1;y.forEach(b,function($){var et=j($);if(et.length){et=y.sortBy(et,function(Rt){return z[Rt]});for(var Z=(et.length-1)/2,pt=Math.floor(Z),_t=Math.ceil(Z);pt<=_t;++pt){var It=et[pt];lt[$]===$&&v<z[It]&&!I(X,$,It)&&(lt[It]=$,lt[$]=Q[$]=Q[It],v=z[It])}}})}),{root:Q,align:lt}}function T(J,q,X,j,Q){var lt={},z=D(J,q,X,Q),b=Q?"borderLeft":"borderRight";function v(Z,pt){for(var _t=z.nodes(),It=_t.pop(),Rt={};It;)Rt[It]?Z(It):(Rt[It]=!0,_t.push(It),_t=_t.concat(pt(It))),It=_t.pop()}function $(Z){lt[Z]=z.inEdges(Z).reduce(function(pt,_t){return Math.max(pt,lt[_t.v]+z.edge(_t))},0)}function et(Z){var pt=z.outEdges(Z).reduce(function(It,Rt){return Math.min(It,lt[Rt.w]-z.edge(Rt))},Number.POSITIVE_INFINITY),_t=J.node(Z);pt!==Number.POSITIVE_INFINITY&&_t.borderType!==b&&(lt[Z]=Math.max(lt[Z],pt))}return v($,z.predecessors.bind(z)),v(et,z.successors.bind(z)),y.forEach(j,function(Z){lt[Z]=lt[X[Z]]}),lt}function D(J,q,X,j){var Q=new P,lt=J.graph(),z=Y(lt.nodesep,lt.edgesep,j);return y.forEach(q,function(b){var v;y.forEach(b,function($){var et=X[$];if(Q.setNode(et),v){var Z=X[v],pt=Q.edge(Z,et);Q.setEdge(Z,et,Math.max(z(J,$,v),pt||0))}v=$})}),Q}function B(J,q){return y.minBy(y.values(q),function(X){var j=Number.NEGATIVE_INFINITY,Q=Number.POSITIVE_INFINITY;return y.forIn(X,function(lt,z){var b=K(J,z)/2;j=Math.max(lt+b,j),Q=Math.min(lt-b,Q)}),j-Q})}function G(J,q){var X=y.values(q),j=y.min(X),Q=y.max(X);y.forEach(["u","d"],function(lt){y.forEach(["l","r"],function(z){var b=lt+z,v=J[b],$;if(v!==q){var et=y.values(v);$=z==="l"?j-y.min(et):Q-y.max(et),$&&(J[b]=y.mapValues(v,function(Z){return Z+$}))}})})}function k(J,q){return y.mapValues(J.ul,function(X,j){if(q)return J[q.toLowerCase()][j];var Q=y.sortBy(y.map(J,j));return(Q[1]+Q[2])/2})}function U(J){var q=N.buildLayerMatrix(J),X=y.merge(w(J,q),E(J,q)),j={},Q;y.forEach(["u","d"],function(z){Q=z==="u"?q:y.values(q).reverse(),y.forEach(["l","r"],function(b){b==="r"&&(Q=y.map(Q,function(Z){return y.values(Z).reverse()}));var v=(z==="u"?J.predecessors:J.successors).bind(J),$=C(J,Q,X,v),et=T(J,Q,$.root,$.align,b==="r");b==="r"&&(et=y.mapValues(et,function(Z){return-Z})),j[z+b]=et})});var lt=B(J,j);return G(j,lt),k(j,J.graph().align)}function Y(J,q,X){return function(j,Q,lt){var z=j.node(Q),b=j.node(lt),v=0,$;if(v+=z.width/2,y.has(z,"labelpos"))switch(z.labelpos.toLowerCase()){case"l":$=-z.width/2;break;case"r":$=z.width/2;break}if($&&(v+=X?$:-$),$=0,v+=(z.dummy?q:J)/2,v+=(b.dummy?q:J)/2,v+=b.width/2,y.has(b,"labelpos"))switch(b.labelpos.toLowerCase()){case"l":$=b.width/2;break;case"r":$=-b.width/2;break}return $&&(v+=X?$:-$),$=0,v}}function K(J,q){return J.node(q).width}},93021:function(ut,L,x){"use strict";var y=x(72361),P=x(53063),N=x(92080).positionX;ut.exports=w;function w(A){A=P.asNonCompoundGraph(A),E(A),y.forEach(N(A),function(O,I){A.node(I).x=O})}function E(A){var O=P.buildLayerMatrix(A),I=A.graph().ranksep,C=0;y.forEach(O,function(T){var D=y.max(y.map(T,function(B){return A.node(B).height}));y.forEach(T,function(B){A.node(B).y=C+D/2}),C+=D+I})}},61031:function(ut,L,x){"use strict";var y=x(72361),P=x(76626).Graph,N=x(2416).slack;ut.exports=w;function w(I){var C=new P({directed:!1}),T=I.nodes()[0],D=I.nodeCount();C.setNode(T,{});for(var B,G;E(C,I)<D;)B=A(C,I),G=C.hasNode(B.v)?N(I,B):-N(I,B),O(C,I,G);return C}function E(I,C){function T(D){y.forEach(C.nodeEdges(D),function(B){var G=B.v,k=D===G?B.w:G;!I.hasNode(k)&&!N(C,B)&&(I.setNode(k,{}),I.setEdge(D,k,{}),T(k))})}return y.forEach(I.nodes(),T),I.nodeCount()}function A(I,C){return y.minBy(C.edges(),function(T){if(I.hasNode(T.v)!==I.hasNode(T.w))return N(C,T)})}function O(I,C,T){y.forEach(I.nodes(),function(D){C.node(D).rank+=T})}},64505:function(ut,L,x){"use strict";var y=x(2416),P=y.longestPath,N=x(61031),w=x(77076);ut.exports=E;function E(C){switch(C.graph().ranker){case"network-simplex":I(C);break;case"tight-tree":O(C);break;case"longest-path":A(C);break;default:I(C)}}var A=P;function O(C){P(C),N(C)}function I(C){w(C)}},77076:function(ut,L,x){"use strict";var y=x(72361),P=x(61031),N=x(2416).slack,w=x(2416).longestPath,E=x(76626).alg.preorder,A=x(76626).alg.postorder,O=x(53063).simplify;ut.exports=I,I.initLowLimValues=B,I.initCutValues=C,I.calcCutValue=D,I.leaveEdge=k,I.enterEdge=U,I.exchangeEdges=Y;function I(X){X=O(X),w(X);var j=P(X);B(j),C(j,X);for(var Q,lt;Q=k(j);)lt=U(j,X,Q),Y(j,X,Q,lt)}function C(X,j){var Q=A(X,X.nodes());Q=Q.slice(0,Q.length-1),y.forEach(Q,function(lt){T(X,j,lt)})}function T(X,j,Q){var lt=X.node(Q),z=lt.parent;X.edge(Q,z).cutvalue=D(X,j,Q)}function D(X,j,Q){var lt=X.node(Q),z=lt.parent,b=!0,v=j.edge(Q,z),$=0;return v||(b=!1,v=j.edge(z,Q)),$=v.weight,y.forEach(j.nodeEdges(Q),function(et){var Z=et.v===Q,pt=Z?et.w:et.v;if(pt!==z){var _t=Z===b,It=j.edge(et).weight;if($+=_t?It:-It,J(X,Q,pt)){var Rt=X.edge(Q,pt).cutvalue;$+=_t?-Rt:Rt}}}),$}function B(X,j){arguments.length<2&&(j=X.nodes()[0]),G(X,{},1,j)}function G(X,j,Q,lt,z){var b=Q,v=X.node(lt);return j[lt]=!0,y.forEach(X.neighbors(lt),function($){y.has(j,$)||(Q=G(X,j,Q,$,lt))}),v.low=b,v.lim=Q++,z?v.parent=z:delete v.parent,Q}function k(X){return y.find(X.edges(),function(j){return X.edge(j).cutvalue<0})}function U(X,j,Q){var lt=Q.v,z=Q.w;j.hasEdge(lt,z)||(lt=Q.w,z=Q.v);var b=X.node(lt),v=X.node(z),$=b,et=!1;b.lim>v.lim&&($=v,et=!0);var Z=y.filter(j.edges(),function(pt){return et===q(X,X.node(pt.v),$)&&et!==q(X,X.node(pt.w),$)});return y.minBy(Z,function(pt){return N(j,pt)})}function Y(X,j,Q,lt){var z=Q.v,b=Q.w;X.removeEdge(z,b),X.setEdge(lt.v,lt.w,{}),B(X),C(X,j),K(X,j)}function K(X,j){var Q=y.find(X.nodes(),function(z){return!j.node(z).parent}),lt=E(X,Q);lt=lt.slice(1),y.forEach(lt,function(z){var b=X.node(z).parent,v=j.edge(z,b),$=!1;v||(v=j.edge(b,z),$=!0),j.node(z).rank=j.node(b).rank+($?v.minlen:-v.minlen)})}function J(X,j,Q){return X.hasEdge(j,Q)}function q(X,j,Q){return Q.low<=j.lim&&j.lim<=Q.lim}},2416:function(ut,L,x){"use strict";var y=x(72361);ut.exports={longestPath:P,slack:N};function P(w){var E={};function A(O){var I=w.node(O);if(y.has(E,O))return I.rank;E[O]=!0;var C=y.min(y.map(w.outEdges(O),function(T){return A(T.w)-w.edge(T).minlen}));return(C===Number.POSITIVE_INFINITY||C===void 0||C===null)&&(C=0),I.rank=C}y.forEach(w.sources(),A)}function N(w,E){return w.node(E.w).rank-w.node(E.v).rank-w.edge(E).minlen}},53063:function(ut,L,x){"use strict";var y=x(72361),P=x(76626).Graph;ut.exports={addDummyNode:N,simplify:w,asNonCompoundGraph:E,successorWeights:A,predecessorWeights:O,intersectRect:I,buildLayerMatrix:C,normalizeRanks:T,removeEmptyRanks:D,addBorderNode:B,maxRank:G,partition:k,time:U,notime:Y};function N(K,J,q,X){var j;do j=y.uniqueId(X);while(K.hasNode(j));return q.dummy=J,K.setNode(j,q),j}function w(K){var J=new P().setGraph(K.graph());return y.forEach(K.nodes(),function(q){J.setNode(q,K.node(q))}),y.forEach(K.edges(),function(q){var X=J.edge(q.v,q.w)||{weight:0,minlen:1},j=K.edge(q);J.setEdge(q.v,q.w,{weight:X.weight+j.weight,minlen:Math.max(X.minlen,j.minlen)})}),J}function E(K){var J=new P({multigraph:K.isMultigraph()}).setGraph(K.graph());return y.forEach(K.nodes(),function(q){K.children(q).length||J.setNode(q,K.node(q))}),y.forEach(K.edges(),function(q){J.setEdge(q,K.edge(q))}),J}function A(K){var J=y.map(K.nodes(),function(q){var X={};return y.forEach(K.outEdges(q),function(j){X[j.w]=(X[j.w]||0)+K.edge(j).weight}),X});return y.zipObject(K.nodes(),J)}function O(K){var J=y.map(K.nodes(),function(q){var X={};return y.forEach(K.inEdges(q),function(j){X[j.v]=(X[j.v]||0)+K.edge(j).weight}),X});return y.zipObject(K.nodes(),J)}function I(K,J){var q=K.x,X=K.y,j=J.x-q,Q=J.y-X,lt=K.width/2,z=K.height/2;if(!j&&!Q)throw new Error("Not possible to find intersection inside of the rectangle");var b,v;return Math.abs(Q)*lt>Math.abs(j)*z?(Q<0&&(z=-z),b=z*j/Q,v=z):(j<0&&(lt=-lt),b=lt,v=lt*Q/j),{x:q+b,y:X+v}}function C(K){var J=y.map(y.range(G(K)+1),function(){return[]});return y.forEach(K.nodes(),function(q){var X=K.node(q),j=X.rank;y.isUndefined(j)||(J[j][X.order]=q)}),J}function T(K){var J=y.min(y.map(K.nodes(),function(q){return K.node(q).rank}));y.forEach(K.nodes(),function(q){var X=K.node(q);y.has(X,"rank")&&(X.rank-=J)})}function D(K){var J=y.min(y.map(K.nodes(),function(Q){return K.node(Q).rank})),q=[];y.forEach(K.nodes(),function(Q){var lt=K.node(Q).rank-J;q[lt]||(q[lt]=[]),q[lt].push(Q)});var X=0,j=K.graph().nodeRankFactor;y.forEach(q,function(Q,lt){y.isUndefined(Q)&&lt%j!=0?--X:X&&y.forEach(Q,function(z){K.node(z).rank+=X})})}function B(K,J,q,X){var j={width:0,height:0};return arguments.length>=4&&(j.rank=q,j.order=X),N(K,"border",j,J)}function G(K){return y.max(y.map(K.nodes(),function(J){var q=K.node(J).rank;if(!y.isUndefined(q))return q}))}function k(K,J){var q={lhs:[],rhs:[]};return y.forEach(K,function(X){J(X)?q.lhs.push(X):q.rhs.push(X)}),q}function U(K,J){var q=y.now();try{return J()}finally{console.log(K+" time: "+(y.now()-q)+"ms")}}function Y(K,J){return J()}},11897:function(ut){ut.exports="0.8.5"},23752:function(ut,L,x){"use strict";x.d(L,{qY:function(){return G}});var y=x(97671),P=function(){for(var X=0,j=0,Q=arguments.length;j<Q;j++)X+=arguments[j].length;for(var lt=Array(X),z=0,j=0;j<Q;j++)for(var b=arguments[j],v=0,$=b.length;v<$;v++,z++)lt[z]=b[v];return lt},N=function(){function X(j,Q,lt){this.name=j,this.version=Q,this.os=lt,this.type="browser"}return X}(),w=function(){function X(j){this.version=j,this.type="node",this.name="node",this.os=y.platform}return X}(),E=function(){function X(j,Q,lt,z){this.name=j,this.version=Q,this.os=lt,this.bot=z,this.type="bot-device"}return X}(),A=function(){function X(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return X}(),O=function(){function X(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return X}(),I=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,C=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,T=3,D=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",I]],B=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function G(X){return X?Y(X):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new O:typeof navigator!="undefined"?Y(navigator.userAgent):J()}function k(X){return X!==""&&D.reduce(function(j,Q){var lt=Q[0],z=Q[1];if(j)return j;var b=z.exec(X);return!!b&&[lt,b]},!1)}function U(X){var j=k(X);return j?j[0]:null}function Y(X){var j=k(X);if(!j)return null;var Q=j[0],lt=j[1];if(Q==="searchbot")return new A;var z=lt[1]&&lt[1].split(/[._]/).slice(0,3);z?z.length<T&&(z=P(z,q(T-z.length))):z=[];var b=z.join("."),v=K(X),$=C.exec(X);return $&&$[1]?new E(Q,b,v,$[1]):new N(Q,b,v)}function K(X){for(var j=0,Q=B.length;j<Q;j++){var lt=B[j],z=lt[0],b=lt[1],v=b.exec(X);if(v)return z}return null}function J(){var X=typeof y!="undefined"&&y.version;return X?new w(y.version.slice(1)):null}function q(X){for(var j=[],Q=0;Q<X;Q++)j.push("0");return j}},32933:function(ut,L,x){"use strict";x.d(L,{Ib:function(){return y},WT:function(){return P}});var y=1e-6,P=typeof Float32Array!="undefined"?Float32Array:Array,N=Math.random;function w(I){P=I}var E=Math.PI/180;function A(I){return I*E}function O(I,C){return Math.abs(I-C)<=y*Math.max(1,Math.abs(I),Math.abs(C))}Math.hypot||(Math.hypot=function(){for(var I=0,C=arguments.length;C--;)I+=arguments[C]*arguments[C];return Math.sqrt(I)})},31300:function(ut,L,x){"use strict";x.r(L),x.d(L,{create:function(){return P},fromMat4:function(){return N},clone:function(){return w},copy:function(){return E},fromValues:function(){return A},set:function(){return O},identity:function(){return I},transpose:function(){return C},invert:function(){return T},adjoint:function(){return D},determinant:function(){return B},multiply:function(){return G},translate:function(){return k},rotate:function(){return U},scale:function(){return Y},fromTranslation:function(){return K},fromRotation:function(){return J},fromScaling:function(){return q},fromMat2d:function(){return X},fromQuat:function(){return j},normalFromMat4:function(){return Q},projection:function(){return lt},str:function(){return z},frob:function(){return b},add:function(){return v},subtract:function(){return $},multiplyScalar:function(){return et},multiplyScalarAndAdd:function(){return Z},exactEquals:function(){return pt},equals:function(){return _t},mul:function(){return It},sub:function(){return Rt}});var y=x(32933);function P(){var H=new y.WT(9);return y.WT!=Float32Array&&(H[1]=0,H[2]=0,H[3]=0,H[5]=0,H[6]=0,H[7]=0),H[0]=1,H[4]=1,H[8]=1,H}function N(H,ot){return H[0]=ot[0],H[1]=ot[1],H[2]=ot[2],H[3]=ot[4],H[4]=ot[5],H[5]=ot[6],H[6]=ot[8],H[7]=ot[9],H[8]=ot[10],H}function w(H){var ot=new y.WT(9);return ot[0]=H[0],ot[1]=H[1],ot[2]=H[2],ot[3]=H[3],ot[4]=H[4],ot[5]=H[5],ot[6]=H[6],ot[7]=H[7],ot[8]=H[8],ot}function E(H,ot){return H[0]=ot[0],H[1]=ot[1],H[2]=ot[2],H[3]=ot[3],H[4]=ot[4],H[5]=ot[5],H[6]=ot[6],H[7]=ot[7],H[8]=ot[8],H}function A(H,ot,St,Ut,ae,bt,wt,ft,ht){var Pt=new y.WT(9);return Pt[0]=H,Pt[1]=ot,Pt[2]=St,Pt[3]=Ut,Pt[4]=ae,Pt[5]=bt,Pt[6]=wt,Pt[7]=ft,Pt[8]=ht,Pt}function O(H,ot,St,Ut,ae,bt,wt,ft,ht,Pt){return H[0]=ot,H[1]=St,H[2]=Ut,H[3]=ae,H[4]=bt,H[5]=wt,H[6]=ft,H[7]=ht,H[8]=Pt,H}function I(H){return H[0]=1,H[1]=0,H[2]=0,H[3]=0,H[4]=1,H[5]=0,H[6]=0,H[7]=0,H[8]=1,H}function C(H,ot){if(H===ot){var St=ot[1],Ut=ot[2],ae=ot[5];H[1]=ot[3],H[2]=ot[6],H[3]=St,H[5]=ot[7],H[6]=Ut,H[7]=ae}else H[0]=ot[0],H[1]=ot[3],H[2]=ot[6],H[3]=ot[1],H[4]=ot[4],H[5]=ot[7],H[6]=ot[2],H[7]=ot[5],H[8]=ot[8];return H}function T(H,ot){var St=ot[0],Ut=ot[1],ae=ot[2],bt=ot[3],wt=ot[4],ft=ot[5],ht=ot[6],Pt=ot[7],Lt=ot[8],jt=Lt*wt-ft*Pt,mt=-Lt*bt+ft*ht,W=Pt*bt-wt*ht,rt=St*jt+Ut*mt+ae*W;return rt?(rt=1/rt,H[0]=jt*rt,H[1]=(-Lt*Ut+ae*Pt)*rt,H[2]=(ft*Ut-ae*wt)*rt,H[3]=mt*rt,H[4]=(Lt*St-ae*ht)*rt,H[5]=(-ft*St+ae*bt)*rt,H[6]=W*rt,H[7]=(-Pt*St+Ut*ht)*rt,H[8]=(wt*St-Ut*bt)*rt,H):null}function D(H,ot){var St=ot[0],Ut=ot[1],ae=ot[2],bt=ot[3],wt=ot[4],ft=ot[5],ht=ot[6],Pt=ot[7],Lt=ot[8];return H[0]=wt*Lt-ft*Pt,H[1]=ae*Pt-Ut*Lt,H[2]=Ut*ft-ae*wt,H[3]=ft*ht-bt*Lt,H[4]=St*Lt-ae*ht,H[5]=ae*bt-St*ft,H[6]=bt*Pt-wt*ht,H[7]=Ut*ht-St*Pt,H[8]=St*wt-Ut*bt,H}function B(H){var ot=H[0],St=H[1],Ut=H[2],ae=H[3],bt=H[4],wt=H[5],ft=H[6],ht=H[7],Pt=H[8];return ot*(Pt*bt-wt*ht)+St*(-Pt*ae+wt*ft)+Ut*(ht*ae-bt*ft)}function G(H,ot,St){var Ut=ot[0],ae=ot[1],bt=ot[2],wt=ot[3],ft=ot[4],ht=ot[5],Pt=ot[6],Lt=ot[7],jt=ot[8],mt=St[0],W=St[1],rt=St[2],ct=St[3],At=St[4],tt=St[5],dt=St[6],Et=St[7],Ot=St[8];return H[0]=mt*Ut+W*wt+rt*Pt,H[1]=mt*ae+W*ft+rt*Lt,H[2]=mt*bt+W*ht+rt*jt,H[3]=ct*Ut+At*wt+tt*Pt,H[4]=ct*ae+At*ft+tt*Lt,H[5]=ct*bt+At*ht+tt*jt,H[6]=dt*Ut+Et*wt+Ot*Pt,H[7]=dt*ae+Et*ft+Ot*Lt,H[8]=dt*bt+Et*ht+Ot*jt,H}function k(H,ot,St){var Ut=ot[0],ae=ot[1],bt=ot[2],wt=ot[3],ft=ot[4],ht=ot[5],Pt=ot[6],Lt=ot[7],jt=ot[8],mt=St[0],W=St[1];return H[0]=Ut,H[1]=ae,H[2]=bt,H[3]=wt,H[4]=ft,H[5]=ht,H[6]=mt*Ut+W*wt+Pt,H[7]=mt*ae+W*ft+Lt,H[8]=mt*bt+W*ht+jt,H}function U(H,ot,St){var Ut=ot[0],ae=ot[1],bt=ot[2],wt=ot[3],ft=ot[4],ht=ot[5],Pt=ot[6],Lt=ot[7],jt=ot[8],mt=Math.sin(St),W=Math.cos(St);return H[0]=W*Ut+mt*wt,H[1]=W*ae+mt*ft,H[2]=W*bt+mt*ht,H[3]=W*wt-mt*Ut,H[4]=W*ft-mt*ae,H[5]=W*ht-mt*bt,H[6]=Pt,H[7]=Lt,H[8]=jt,H}function Y(H,ot,St){var Ut=St[0],ae=St[1];return H[0]=Ut*ot[0],H[1]=Ut*ot[1],H[2]=Ut*ot[2],H[3]=ae*ot[3],H[4]=ae*ot[4],H[5]=ae*ot[5],H[6]=ot[6],H[7]=ot[7],H[8]=ot[8],H}function K(H,ot){return H[0]=1,H[1]=0,H[2]=0,H[3]=0,H[4]=1,H[5]=0,H[6]=ot[0],H[7]=ot[1],H[8]=1,H}function J(H,ot){var St=Math.sin(ot),Ut=Math.cos(ot);return H[0]=Ut,H[1]=St,H[2]=0,H[3]=-St,H[4]=Ut,H[5]=0,H[6]=0,H[7]=0,H[8]=1,H}function q(H,ot){return H[0]=ot[0],H[1]=0,H[2]=0,H[3]=0,H[4]=ot[1],H[5]=0,H[6]=0,H[7]=0,H[8]=1,H}function X(H,ot){return H[0]=ot[0],H[1]=ot[1],H[2]=0,H[3]=ot[2],H[4]=ot[3],H[5]=0,H[6]=ot[4],H[7]=ot[5],H[8]=1,H}function j(H,ot){var St=ot[0],Ut=ot[1],ae=ot[2],bt=ot[3],wt=St+St,ft=Ut+Ut,ht=ae+ae,Pt=St*wt,Lt=Ut*wt,jt=Ut*ft,mt=ae*wt,W=ae*ft,rt=ae*ht,ct=bt*wt,At=bt*ft,tt=bt*ht;return H[0]=1-jt-rt,H[3]=Lt-tt,H[6]=mt+At,H[1]=Lt+tt,H[4]=1-Pt-rt,H[7]=W-ct,H[2]=mt-At,H[5]=W+ct,H[8]=1-Pt-jt,H}function Q(H,ot){var St=ot[0],Ut=ot[1],ae=ot[2],bt=ot[3],wt=ot[4],ft=ot[5],ht=ot[6],Pt=ot[7],Lt=ot[8],jt=ot[9],mt=ot[10],W=ot[11],rt=ot[12],ct=ot[13],At=ot[14],tt=ot[15],dt=St*ft-Ut*wt,Et=St*ht-ae*wt,Ot=St*Pt-bt*wt,$t=Ut*ht-ae*ft,st=Ut*Pt-bt*ft,Qt=ae*Pt-bt*ht,vt=Lt*ct-jt*rt,yt=Lt*At-mt*rt,zt=Lt*tt-W*rt,oe=jt*At-mt*ct,Ie=jt*tt-W*ct,Gt=mt*tt-W*At,Wt=dt*Gt-Et*Ie+Ot*oe+$t*zt-st*yt+Qt*vt;return Wt?(Wt=1/Wt,H[0]=(ft*Gt-ht*Ie+Pt*oe)*Wt,H[1]=(ht*zt-wt*Gt-Pt*yt)*Wt,H[2]=(wt*Ie-ft*zt+Pt*vt)*Wt,H[3]=(ae*Ie-Ut*Gt-bt*oe)*Wt,H[4]=(St*Gt-ae*zt+bt*yt)*Wt,H[5]=(Ut*zt-St*Ie-bt*vt)*Wt,H[6]=(ct*Qt-At*st+tt*$t)*Wt,H[7]=(At*Ot-rt*Qt-tt*Et)*Wt,H[8]=(rt*st-ct*Ot+tt*dt)*Wt,H):null}function lt(H,ot,St){return H[0]=2/ot,H[1]=0,H[2]=0,H[3]=0,H[4]=-2/St,H[5]=0,H[6]=-1,H[7]=1,H[8]=1,H}function z(H){return"mat3("+H[0]+", "+H[1]+", "+H[2]+", "+H[3]+", "+H[4]+", "+H[5]+", "+H[6]+", "+H[7]+", "+H[8]+")"}function b(H){return Math.hypot(H[0],H[1],H[2],H[3],H[4],H[5],H[6],H[7],H[8])}function v(H,ot,St){return H[0]=ot[0]+St[0],H[1]=ot[1]+St[1],H[2]=ot[2]+St[2],H[3]=ot[3]+St[3],H[4]=ot[4]+St[4],H[5]=ot[5]+St[5],H[6]=ot[6]+St[6],H[7]=ot[7]+St[7],H[8]=ot[8]+St[8],H}function $(H,ot,St){return H[0]=ot[0]-St[0],H[1]=ot[1]-St[1],H[2]=ot[2]-St[2],H[3]=ot[3]-St[3],H[4]=ot[4]-St[4],H[5]=ot[5]-St[5],H[6]=ot[6]-St[6],H[7]=ot[7]-St[7],H[8]=ot[8]-St[8],H}function et(H,ot,St){return H[0]=ot[0]*St,H[1]=ot[1]*St,H[2]=ot[2]*St,H[3]=ot[3]*St,H[4]=ot[4]*St,H[5]=ot[5]*St,H[6]=ot[6]*St,H[7]=ot[7]*St,H[8]=ot[8]*St,H}function Z(H,ot,St,Ut){return H[0]=ot[0]+St[0]*Ut,H[1]=ot[1]+St[1]*Ut,H[2]=ot[2]+St[2]*Ut,H[3]=ot[3]+St[3]*Ut,H[4]=ot[4]+St[4]*Ut,H[5]=ot[5]+St[5]*Ut,H[6]=ot[6]+St[6]*Ut,H[7]=ot[7]+St[7]*Ut,H[8]=ot[8]+St[8]*Ut,H}function pt(H,ot){return H[0]===ot[0]&&H[1]===ot[1]&&H[2]===ot[2]&&H[3]===ot[3]&&H[4]===ot[4]&&H[5]===ot[5]&&H[6]===ot[6]&&H[7]===ot[7]&&H[8]===ot[8]}function _t(H,ot){var St=H[0],Ut=H[1],ae=H[2],bt=H[3],wt=H[4],ft=H[5],ht=H[6],Pt=H[7],Lt=H[8],jt=ot[0],mt=ot[1],W=ot[2],rt=ot[3],ct=ot[4],At=ot[5],tt=ot[6],dt=ot[7],Et=ot[8];return Math.abs(St-jt)<=y.Ib*Math.max(1,Math.abs(St),Math.abs(jt))&&Math.abs(Ut-mt)<=y.Ib*Math.max(1,Math.abs(Ut),Math.abs(mt))&&Math.abs(ae-W)<=y.Ib*Math.max(1,Math.abs(ae),Math.abs(W))&&Math.abs(bt-rt)<=y.Ib*Math.max(1,Math.abs(bt),Math.abs(rt))&&Math.abs(wt-ct)<=y.Ib*Math.max(1,Math.abs(wt),Math.abs(ct))&&Math.abs(ft-At)<=y.Ib*Math.max(1,Math.abs(ft),Math.abs(At))&&Math.abs(ht-tt)<=y.Ib*Math.max(1,Math.abs(ht),Math.abs(tt))&&Math.abs(Pt-dt)<=y.Ib*Math.max(1,Math.abs(Pt),Math.abs(dt))&&Math.abs(Lt-Et)<=y.Ib*Math.max(1,Math.abs(Lt),Math.abs(Et))}var It=G,Rt=$},10714:function(ut,L,x){"use strict";x.d(L,{IH:function(){return O},$X:function(){return I},VV:function(){return G},Fp:function(){return k},bA:function(){return Y},TE:function(){return J},kE:function(){return X},Fv:function(){return z},AK:function(){return b},kK:function(){return _t},EU:function(){return H},I6:function(){return Ut},lu:function(){return wt}});var y=x(32933);function P(){var W=new y.WT(2);return y.WT!=Float32Array&&(W[0]=0,W[1]=0),W}function N(W){var rt=new glMatrix.ARRAY_TYPE(2);return rt[0]=W[0],rt[1]=W[1],rt}function w(W,rt){var ct=new glMatrix.ARRAY_TYPE(2);return ct[0]=W,ct[1]=rt,ct}function E(W,rt){return W[0]=rt[0],W[1]=rt[1],W}function A(W,rt,ct){return W[0]=rt,W[1]=ct,W}function O(W,rt,ct){return W[0]=rt[0]+ct[0],W[1]=rt[1]+ct[1],W}function I(W,rt,ct){return W[0]=rt[0]-ct[0],W[1]=rt[1]-ct[1],W}function C(W,rt,ct){return W[0]=rt[0]*ct[0],W[1]=rt[1]*ct[1],W}function T(W,rt,ct){return W[0]=rt[0]/ct[0],W[1]=rt[1]/ct[1],W}function D(W,rt){return W[0]=Math.ceil(rt[0]),W[1]=Math.ceil(rt[1]),W}function B(W,rt){return W[0]=Math.floor(rt[0]),W[1]=Math.floor(rt[1]),W}function G(W,rt,ct){return W[0]=Math.min(rt[0],ct[0]),W[1]=Math.min(rt[1],ct[1]),W}function k(W,rt,ct){return W[0]=Math.max(rt[0],ct[0]),W[1]=Math.max(rt[1],ct[1]),W}function U(W,rt){return W[0]=Math.round(rt[0]),W[1]=Math.round(rt[1]),W}function Y(W,rt,ct){return W[0]=rt[0]*ct,W[1]=rt[1]*ct,W}function K(W,rt,ct,At){return W[0]=rt[0]+ct[0]*At,W[1]=rt[1]+ct[1]*At,W}function J(W,rt){var ct=rt[0]-W[0],At=rt[1]-W[1];return Math.hypot(ct,At)}function q(W,rt){var ct=rt[0]-W[0],At=rt[1]-W[1];return ct*ct+At*At}function X(W){var rt=W[0],ct=W[1];return Math.hypot(rt,ct)}function j(W){var rt=W[0],ct=W[1];return rt*rt+ct*ct}function Q(W,rt){return W[0]=-rt[0],W[1]=-rt[1],W}function lt(W,rt){return W[0]=1/rt[0],W[1]=1/rt[1],W}function z(W,rt){var ct=rt[0],At=rt[1],tt=ct*ct+At*At;return tt>0&&(tt=1/Math.sqrt(tt)),W[0]=rt[0]*tt,W[1]=rt[1]*tt,W}function b(W,rt){return W[0]*rt[0]+W[1]*rt[1]}function v(W,rt,ct){var At=rt[0]*ct[1]-rt[1]*ct[0];return W[0]=W[1]=0,W[2]=At,W}function $(W,rt,ct,At){var tt=rt[0],dt=rt[1];return W[0]=tt+At*(ct[0]-tt),W[1]=dt+At*(ct[1]-dt),W}function et(W,rt){rt=rt||1;var ct=glMatrix.RANDOM()*2*Math.PI;return W[0]=Math.cos(ct)*rt,W[1]=Math.sin(ct)*rt,W}function Z(W,rt,ct){var At=rt[0],tt=rt[1];return W[0]=ct[0]*At+ct[2]*tt,W[1]=ct[1]*At+ct[3]*tt,W}function pt(W,rt,ct){var At=rt[0],tt=rt[1];return W[0]=ct[0]*At+ct[2]*tt+ct[4],W[1]=ct[1]*At+ct[3]*tt+ct[5],W}function _t(W,rt,ct){var At=rt[0],tt=rt[1];return W[0]=ct[0]*At+ct[3]*tt+ct[6],W[1]=ct[1]*At+ct[4]*tt+ct[7],W}function It(W,rt,ct){var At=rt[0],tt=rt[1];return W[0]=ct[0]*At+ct[4]*tt+ct[12],W[1]=ct[1]*At+ct[5]*tt+ct[13],W}function Rt(W,rt,ct,At){var tt=rt[0]-ct[0],dt=rt[1]-ct[1],Et=Math.sin(At),Ot=Math.cos(At);return W[0]=tt*Ot-dt*Et+ct[0],W[1]=tt*Et+dt*Ot+ct[1],W}function H(W,rt){var ct=W[0],At=W[1],tt=rt[0],dt=rt[1],Et=Math.sqrt(ct*ct+At*At)*Math.sqrt(tt*tt+dt*dt),Ot=Et&&(ct*tt+At*dt)/Et;return Math.acos(Math.min(Math.max(Ot,-1),1))}function ot(W){return W[0]=0,W[1]=0,W}function St(W){return"vec2("+W[0]+", "+W[1]+")"}function Ut(W,rt){return W[0]===rt[0]&&W[1]===rt[1]}function ae(W,rt){var ct=W[0],At=W[1],tt=rt[0],dt=rt[1];return Math.abs(ct-tt)<=glMatrix.EPSILON*Math.max(1,Math.abs(ct),Math.abs(tt))&&Math.abs(At-dt)<=glMatrix.EPSILON*Math.max(1,Math.abs(At),Math.abs(dt))}var bt=null,wt=I,ft=null,ht=null,Pt=null,Lt=null,jt=null,mt=function(){var W=P();return function(rt,ct,At,tt,dt,Et){var Ot,$t;for(ct||(ct=2),At||(At=0),tt?$t=Math.min(tt*ct+At,rt.length):$t=rt.length,Ot=At;Ot<$t;Ot+=ct)W[0]=rt[Ot],W[1]=rt[Ot+1],dt(W,W,Et),rt[Ot]=W[0],rt[Ot+1]=W[1];return rt}}()},45229:function(ut){ut.exports=L;function L(x,y,P){return x[0]=y[0]+P[0],x[1]=y[1]+P[1],x}},8356:function(ut){ut.exports=L;function L(x,y){return x[0]=Math.ceil(y[0]),x[1]=Math.ceil(y[1]),x}},65375:function(ut){ut.exports=L;function L(x){var y=new Float32Array(2);return y[0]=x[0],y[1]=x[1],y}},63422:function(ut){ut.exports=L;function L(x,y){return x[0]=y[0],x[1]=y[1],x}},25128:function(ut){ut.exports=L;function L(){var x=new Float32Array(2);return x[0]=0,x[1]=0,x}},80134:function(ut){ut.exports=L;function L(x,y,P){var N=y[0]*P[1]-y[1]*P[0];return x[0]=x[1]=0,x[2]=N,x}},87878:function(ut,L,x){ut.exports=x(42274)},42274:function(ut){ut.exports=L;function L(x,y){var P=y[0]-x[0],N=y[1]-x[1];return Math.sqrt(P*P+N*N)}},26770:function(ut,L,x){ut.exports=x(87622)},87622:function(ut){ut.exports=L;function L(x,y,P){return x[0]=y[0]/P[0],x[1]=y[1]/P[1],x}},6064:function(ut){ut.exports=L;function L(x,y){return x[0]*y[0]+x[1]*y[1]}},2157:function(ut){ut.exports=1e-6},6922:function(ut,L,x){ut.exports=P;var y=x(2157);function P(N,w){var E=N[0],A=N[1],O=w[0],I=w[1];return Math.abs(E-O)<=y*Math.max(1,Math.abs(E),Math.abs(O))&&Math.abs(A-I)<=y*Math.max(1,Math.abs(A),Math.abs(I))}},26066:function(ut){ut.exports=L;function L(x,y){return x[0]===y[0]&&x[1]===y[1]}},74860:function(ut){ut.exports=L;function L(x,y){return x[0]=Math.floor(y[0]),x[1]=Math.floor(y[1]),x}},88926:function(ut,L,x){ut.exports=P;var y=x(25128)();function P(N,w,E,A,O,I){var C,T;for(w||(w=2),E||(E=0),A?T=Math.min(A*w+E,N.length):T=N.length,C=E;C<T;C+=w)y[0]=N[C],y[1]=N[C+1],O(y,y,I),N[C]=y[0],N[C+1]=y[1];return N}},24697:function(ut){ut.exports=L;function L(x,y){var P=new Float32Array(2);return P[0]=x,P[1]=y,P}},81602:function(ut,L,x){ut.exports={EPSILON:x(2157),create:x(25128),clone:x(65375),fromValues:x(24697),copy:x(63422),set:x(96765),equals:x(6922),exactEquals:x(26066),add:x(45229),subtract:x(24186),sub:x(5302),multiply:x(79290),mul:x(31665),divide:x(87622),div:x(26770),inverse:x(81873),min:x(37724),max:x(39564),rotate:x(68615),floor:x(74860),ceil:x(8356),round:x(87313),scale:x(91838),scaleAndAdd:x(77781),distance:x(42274),dist:x(87878),squaredDistance:x(76534),sqrDist:x(34969),length:x(80360),len:x(92256),squaredLength:x(95476),sqrLen:x(15375),negate:x(80388),normalize:x(95927),dot:x(6064),cross:x(80134),lerp:x(91099),random:x(60679),transformMat2:x(30367),transformMat2d:x(50655),transformMat3:x(32730),transformMat4:x(54020),forEach:x(88926),limit:x(48709)}},81873:function(ut){ut.exports=L;function L(x,y){return x[0]=1/y[0],x[1]=1/y[1],x}},92256:function(ut,L,x){ut.exports=x(80360)},80360:function(ut){ut.exports=L;function L(x){var y=x[0],P=x[1];return Math.sqrt(y*y+P*P)}},91099:function(ut){ut.exports=L;function L(x,y,P,N){var w=y[0],E=y[1];return x[0]=w+N*(P[0]-w),x[1]=E+N*(P[1]-E),x}},48709:function(ut){ut.exports=L;function L(x,y,P){var N=y[0]*y[0]+y[1]*y[1];if(N>P*P){var w=Math.sqrt(N);x[0]=y[0]/w*P,x[1]=y[1]/w*P}else x[0]=y[0],x[1]=y[1];return x}},39564:function(ut){ut.exports=L;function L(x,y,P){return x[0]=Math.max(y[0],P[0]),x[1]=Math.max(y[1],P[1]),x}},37724:function(ut){ut.exports=L;function L(x,y,P){return x[0]=Math.min(y[0],P[0]),x[1]=Math.min(y[1],P[1]),x}},31665:function(ut,L,x){ut.exports=x(79290)},79290:function(ut){ut.exports=L;function L(x,y,P){return x[0]=y[0]*P[0],x[1]=y[1]*P[1],x}},80388:function(ut){ut.exports=L;function L(x,y){return x[0]=-y[0],x[1]=-y[1],x}},95927:function(ut){ut.exports=L;function L(x,y){var P=y[0],N=y[1],w=P*P+N*N;return w>0&&(w=1/Math.sqrt(w),x[0]=y[0]*w,x[1]=y[1]*w),x}},60679:function(ut){ut.exports=L;function L(x,y){y=y||1;var P=Math.random()*2*Math.PI;return x[0]=Math.cos(P)*y,x[1]=Math.sin(P)*y,x}},68615:function(ut){ut.exports=L;function L(x,y,P){var N=Math.cos(P),w=Math.sin(P),E=y[0],A=y[1];return x[0]=E*N-A*w,x[1]=E*w+A*N,x}},87313:function(ut){ut.exports=L;function L(x,y){return x[0]=Math.round(y[0]),x[1]=Math.round(y[1]),x}},91838:function(ut){ut.exports=L;function L(x,y,P){return x[0]=y[0]*P,x[1]=y[1]*P,x}},77781:function(ut){ut.exports=L;function L(x,y,P,N){return x[0]=y[0]+P[0]*N,x[1]=y[1]+P[1]*N,x}},96765:function(ut){ut.exports=L;function L(x,y,P){return x[0]=y,x[1]=P,x}},34969:function(ut,L,x){ut.exports=x(76534)},15375:function(ut,L,x){ut.exports=x(95476)},76534:function(ut){ut.exports=L;function L(x,y){var P=y[0]-x[0],N=y[1]-x[1];return P*P+N*N}},95476:function(ut){ut.exports=L;function L(x){var y=x[0],P=x[1];return y*y+P*P}},5302:function(ut,L,x){ut.exports=x(24186)},24186:function(ut){ut.exports=L;function L(x,y,P){return x[0]=y[0]-P[0],x[1]=y[1]-P[1],x}},30367:function(ut){ut.exports=L;function L(x,y,P){var N=y[0],w=y[1];return x[0]=P[0]*N+P[2]*w,x[1]=P[1]*N+P[3]*w,x}},50655:function(ut){ut.exports=L;function L(x,y,P){var N=y[0],w=y[1];return x[0]=P[0]*N+P[2]*w+P[4],x[1]=P[1]*N+P[3]*w+P[5],x}},32730:function(ut){ut.exports=L;function L(x,y,P){var N=y[0],w=y[1];return x[0]=P[0]*N+P[3]*w+P[6],x[1]=P[1]*N+P[4]*w+P[7],x}},54020:function(ut){ut.exports=L;function L(x,y,P){var N=y[0],w=y[1];return x[0]=P[0]*N+P[4]*w+P[12],x[1]=P[1]*N+P[5]*w+P[13],x}},75172:function(ut,L,x){var y=x(89224);ut.exports={Graph:y.Graph,json:x(17401),alg:x(54613),version:y.version}},91606:function(ut,L,x){var y=x(95329);ut.exports=P;function P(N){var w={},E=[],A;function O(I){y.has(w,I)||(w[I]=!0,A.push(I),y.each(N.successors(I),O),y.each(N.predecessors(I),O))}return y.each(N.nodes(),function(I){A=[],O(I),A.length&&E.push(A)}),E}},21482:function(ut,L,x){var y=x(95329);ut.exports=P;function P(w,E,A){y.isArray(E)||(E=[E]);var O=(w.isDirected()?w.successors:w.neighbors).bind(w),I=[],C={};return y.each(E,function(T){if(!w.hasNode(T))throw new Error("Graph does not have node: "+T);N(w,T,A==="post",C,O,I)}),I}function N(w,E,A,O,I,C){y.has(O,E)||(O[E]=!0,A||C.push(E),y.each(I(E),function(T){N(w,T,A,O,I,C)}),A&&C.push(E))}},40845:function(ut,L,x){var y=x(13746),P=x(95329);ut.exports=N;function N(w,E,A){return P.transform(w.nodes(),function(O,I){O[I]=y(w,I,E,A)},{})}},13746:function(ut,L,x){var y=x(95329),P=x(36614);ut.exports=w;var N=y.constant(1);function w(A,O,I,C){return E(A,String(O),I||N,C||function(T){return A.outEdges(T)})}function E(A,O,I,C){var T={},D=new P,B,G,k=function(U){var Y=U.v!==B?U.v:U.w,K=T[Y],J=I(U),q=G.distance+J;if(J<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+U+" Weight: "+J);q<K.distance&&(K.distance=q,K.predecessor=B,D.decrease(Y,q))};for(A.nodes().forEach(function(U){var Y=U===O?0:Number.POSITIVE_INFINITY;T[U]={distance:Y},D.add(U,Y)});D.size()>0&&(B=D.removeMin(),G=T[B],G.distance!==Number.POSITIVE_INFINITY);)C(B).forEach(k);return T}},59324:function(ut,L,x){var y=x(95329),P=x(94558);ut.exports=N;function N(w){return y.filter(P(w),function(E){return E.length>1||E.length===1&&w.hasEdge(E[0],E[0])})}},22893:function(ut,L,x){var y=x(95329);ut.exports=N;var P=y.constant(1);function N(E,A,O){return w(E,A||P,O||function(I){return E.outEdges(I)})}function w(E,A,O){var I={},C=E.nodes();return C.forEach(function(T){I[T]={},I[T][T]={distance:0},C.forEach(function(D){T!==D&&(I[T][D]={distance:Number.POSITIVE_INFINITY})}),O(T).forEach(function(D){var B=D.v===T?D.w:D.v,G=A(D);I[T][B]={distance:G,predecessor:T}})}),C.forEach(function(T){var D=I[T];C.forEach(function(B){var G=I[B];C.forEach(function(k){var U=G[T],Y=D[k],K=G[k],J=U.distance+Y.distance;J<K.distance&&(K.distance=J,K.predecessor=Y.predecessor)})})}),I}},54613:function(ut,L,x){ut.exports={components:x(91606),dijkstra:x(13746),dijkstraAll:x(40845),findCycles:x(59324),floydWarshall:x(22893),isAcyclic:x(588),postorder:x(98049),preorder:x(67158),prim:x(66058),tarjan:x(94558),topsort:x(7793)}},588:function(ut,L,x){var y=x(7793);ut.exports=P;function P(N){try{y(N)}catch(w){if(w instanceof y.CycleException)return!1;throw w}return!0}},98049:function(ut,L,x){var y=x(21482);ut.exports=P;function P(N,w){return y(N,w,"post")}},67158:function(ut,L,x){var y=x(21482);ut.exports=P;function P(N,w){return y(N,w,"pre")}},66058:function(ut,L,x){var y=x(95329),P=x(6349),N=x(36614);ut.exports=w;function w(E,A){var O=new P,I={},C=new N,T;function D(G){var k=G.v===T?G.w:G.v,U=C.priority(k);if(U!==void 0){var Y=A(G);Y<U&&(I[k]=T,C.decrease(k,Y))}}if(E.nodeCount()===0)return O;y.each(E.nodes(),function(G){C.add(G,Number.POSITIVE_INFINITY),O.setNode(G)}),C.decrease(E.nodes()[0],0);for(var B=!1;C.size()>0;){if(T=C.removeMin(),y.has(I,T))O.setEdge(T,I[T]);else{if(B)throw new Error("Input graph is not connected: "+E);B=!0}E.nodeEdges(T).forEach(D)}return O}},94558:function(ut,L,x){var y=x(95329);ut.exports=P;function P(N){var w=0,E=[],A={},O=[];function I(C){var T=A[C]={onStack:!0,lowlink:w,index:w++};if(E.push(C),N.successors(C).forEach(function(G){y.has(A,G)?A[G].onStack&&(T.lowlink=Math.min(T.lowlink,A[G].index)):(I(G),T.lowlink=Math.min(T.lowlink,A[G].lowlink))}),T.lowlink===T.index){var D=[],B;do B=E.pop(),A[B].onStack=!1,D.push(B);while(C!==B);O.push(D)}}return N.nodes().forEach(function(C){y.has(A,C)||I(C)}),O}},7793:function(ut,L,x){var y=x(95329);ut.exports=P,P.CycleException=N;function P(w){var E={},A={},O=[];function I(C){if(y.has(A,C))throw new N;y.has(E,C)||(A[C]=!0,E[C]=!0,y.each(w.predecessors(C),I),delete A[C],O.push(C))}if(y.each(w.sinks(),I),y.size(E)!==w.nodeCount())throw new N;return O}function N(){}N.prototype=new Error},36614:function(ut,L,x){var y=x(95329);ut.exports=P;function P(){this._arr=[],this._keyIndices={}}P.prototype.size=function(){return this._arr.length},P.prototype.keys=function(){return this._arr.map(function(N){return N.key})},P.prototype.has=function(N){return y.has(this._keyIndices,N)},P.prototype.priority=function(N){var w=this._keyIndices[N];if(w!==void 0)return this._arr[w].priority},P.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},P.prototype.add=function(N,w){var E=this._keyIndices;if(N=String(N),!y.has(E,N)){var A=this._arr,O=A.length;return E[N]=O,A.push({key:N,priority:w}),this._decrease(O),!0}return!1},P.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var N=this._arr.pop();return delete this._keyIndices[N.key],this._heapify(0),N.key},P.prototype.decrease=function(N,w){var E=this._keyIndices[N];if(w>this._arr[E].priority)throw new Error("New priority is greater than current priority. Key: "+N+" Old: "+this._arr[E].priority+" New: "+w);this._arr[E].priority=w,this._decrease(E)},P.prototype._heapify=function(N){var w=this._arr,E=2*N,A=E+1,O=N;E<w.length&&(O=w[E].priority<w[O].priority?E:O,A<w.length&&(O=w[A].priority<w[O].priority?A:O),O!==N&&(this._swap(N,O),this._heapify(O)))},P.prototype._decrease=function(N){for(var w=this._arr,E=w[N].priority,A;N!==0&&(A=N>>1,!(w[A].priority<E));)this._swap(N,A),N=A},P.prototype._swap=function(N,w){var E=this._arr,A=this._keyIndices,O=E[N],I=E[w];E[N]=I,E[w]=O,A[I.key]=N,A[O.key]=w}},6349:function(ut,L,x){"use strict";var y=x(95329);ut.exports=E;var P="\0",N="\0",w="";function E(D){this._isDirected=y.has(D,"directed")?D.directed:!0,this._isMultigraph=y.has(D,"multigraph")?D.multigraph:!1,this._isCompound=y.has(D,"compound")?D.compound:!1,this._label=void 0,this._defaultNodeLabelFn=y.constant(void 0),this._defaultEdgeLabelFn=y.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[N]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}E.prototype._nodeCount=0,E.prototype._edgeCount=0,E.prototype.isDirected=function(){return this._isDirected},E.prototype.isMultigraph=function(){return this._isMultigraph},E.prototype.isCompound=function(){return this._isCompound},E.prototype.setGraph=function(D){return this._label=D,this},E.prototype.graph=function(){return this._label},E.prototype.setDefaultNodeLabel=function(D){return y.isFunction(D)||(D=y.constant(D)),this._defaultNodeLabelFn=D,this},E.prototype.nodeCount=function(){return this._nodeCount},E.prototype.nodes=function(){return y.keys(this._nodes)},E.prototype.sources=function(){var D=this;return y.filter(this.nodes(),function(B){return y.isEmpty(D._in[B])})},E.prototype.sinks=function(){var D=this;return y.filter(this.nodes(),function(B){return y.isEmpty(D._out[B])})},E.prototype.setNodes=function(D,B){var G=arguments,k=this;return y.each(D,function(U){G.length>1?k.setNode(U,B):k.setNode(U)}),this},E.prototype.setNode=function(D,B){return y.has(this._nodes,D)?(arguments.length>1&&(this._nodes[D]=B),this):(this._nodes[D]=arguments.length>1?B:this._defaultNodeLabelFn(D),this._isCompound&&(this._parent[D]=N,this._children[D]={},this._children[N][D]=!0),this._in[D]={},this._preds[D]={},this._out[D]={},this._sucs[D]={},++this._nodeCount,this)},E.prototype.node=function(D){return this._nodes[D]},E.prototype.hasNode=function(D){return y.has(this._nodes,D)},E.prototype.removeNode=function(D){var B=this;if(y.has(this._nodes,D)){var G=function(k){B.removeEdge(B._edgeObjs[k])};delete this._nodes[D],this._isCompound&&(this._removeFromParentsChildList(D),delete this._parent[D],y.each(this.children(D),function(k){B.setParent(k)}),delete this._children[D]),y.each(y.keys(this._in[D]),G),delete this._in[D],delete this._preds[D],y.each(y.keys(this._out[D]),G),delete this._out[D],delete this._sucs[D],--this._nodeCount}return this},E.prototype.setParent=function(D,B){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(y.isUndefined(B))B=N;else{B+="";for(var G=B;!y.isUndefined(G);G=this.parent(G))if(G===D)throw new Error("Setting "+B+" as parent of "+D+" would create a cycle");this.setNode(B)}return this.setNode(D),this._removeFromParentsChildList(D),this._parent[D]=B,this._children[B][D]=!0,this},E.prototype._removeFromParentsChildList=function(D){delete this._children[this._parent[D]][D]},E.prototype.parent=function(D){if(this._isCompound){var B=this._parent[D];if(B!==N)return B}},E.prototype.children=function(D){if(y.isUndefined(D)&&(D=N),this._isCompound){var B=this._children[D];if(B)return y.keys(B)}else{if(D===N)return this.nodes();if(this.hasNode(D))return[]}},E.prototype.predecessors=function(D){var B=this._preds[D];if(B)return y.keys(B)},E.prototype.successors=function(D){var B=this._sucs[D];if(B)return y.keys(B)},E.prototype.neighbors=function(D){var B=this.predecessors(D);if(B)return y.union(B,this.successors(D))},E.prototype.isLeaf=function(D){var B;return this.isDirected()?B=this.successors(D):B=this.neighbors(D),B.length===0},E.prototype.filterNodes=function(D){var B=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});B.setGraph(this.graph());var G=this;y.each(this._nodes,function(Y,K){D(K)&&B.setNode(K,Y)}),y.each(this._edgeObjs,function(Y){B.hasNode(Y.v)&&B.hasNode(Y.w)&&B.setEdge(Y,G.edge(Y))});var k={};function U(Y){var K=G.parent(Y);return K===void 0||B.hasNode(K)?(k[Y]=K,K):K in k?k[K]:U(K)}return this._isCompound&&y.each(B.nodes(),function(Y){B.setParent(Y,U(Y))}),B},E.prototype.setDefaultEdgeLabel=function(D){return y.isFunction(D)||(D=y.constant(D)),this._defaultEdgeLabelFn=D,this},E.prototype.edgeCount=function(){return this._edgeCount},E.prototype.edges=function(){return y.values(this._edgeObjs)},E.prototype.setPath=function(D,B){var G=this,k=arguments;return y.reduce(D,function(U,Y){return k.length>1?G.setEdge(U,Y,B):G.setEdge(U,Y),Y}),this},E.prototype.setEdge=function(){var D,B,G,k,U=!1,Y=arguments[0];typeof Y=="object"&&Y!==null&&"v"in Y?(D=Y.v,B=Y.w,G=Y.name,arguments.length===2&&(k=arguments[1],U=!0)):(D=Y,B=arguments[1],G=arguments[3],arguments.length>2&&(k=arguments[2],U=!0)),D=""+D,B=""+B,y.isUndefined(G)||(G=""+G);var K=I(this._isDirected,D,B,G);if(y.has(this._edgeLabels,K))return U&&(this._edgeLabels[K]=k),this;if(!y.isUndefined(G)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(D),this.setNode(B),this._edgeLabels[K]=U?k:this._defaultEdgeLabelFn(D,B,G);var J=C(this._isDirected,D,B,G);return D=J.v,B=J.w,Object.freeze(J),this._edgeObjs[K]=J,A(this._preds[B],D),A(this._sucs[D],B),this._in[B][K]=J,this._out[D][K]=J,this._edgeCount++,this},E.prototype.edge=function(D,B,G){var k=arguments.length===1?T(this._isDirected,arguments[0]):I(this._isDirected,D,B,G);return this._edgeLabels[k]},E.prototype.hasEdge=function(D,B,G){var k=arguments.length===1?T(this._isDirected,arguments[0]):I(this._isDirected,D,B,G);return y.has(this._edgeLabels,k)},E.prototype.removeEdge=function(D,B,G){var k=arguments.length===1?T(this._isDirected,arguments[0]):I(this._isDirected,D,B,G),U=this._edgeObjs[k];return U&&(D=U.v,B=U.w,delete this._edgeLabels[k],delete this._edgeObjs[k],O(this._preds[B],D),O(this._sucs[D],B),delete this._in[B][k],delete this._out[D][k],this._edgeCount--),this},E.prototype.inEdges=function(D,B){var G=this._in[D];if(G){var k=y.values(G);return B?y.filter(k,function(U){return U.v===B}):k}},E.prototype.outEdges=function(D,B){var G=this._out[D];if(G){var k=y.values(G);return B?y.filter(k,function(U){return U.w===B}):k}},E.prototype.nodeEdges=function(D,B){var G=this.inEdges(D,B);if(G)return G.concat(this.outEdges(D,B))};function A(D,B){D[B]?D[B]++:D[B]=1}function O(D,B){--D[B]||delete D[B]}function I(D,B,G,k){var U=""+B,Y=""+G;if(!D&&U>Y){var K=U;U=Y,Y=K}return U+w+Y+w+(y.isUndefined(k)?P:k)}function C(D,B,G,k){var U=""+B,Y=""+G;if(!D&&U>Y){var K=U;U=Y,Y=K}var J={v:U,w:Y};return k&&(J.name=k),J}function T(D,B){return I(D,B.v,B.w,B.name)}},89224:function(ut,L,x){ut.exports={Graph:x(6349),version:x(16544)}},17401:function(ut,L,x){var y=x(95329),P=x(6349);ut.exports={write:N,read:A};function N(O){var I={options:{directed:O.isDirected(),multigraph:O.isMultigraph(),compound:O.isCompound()},nodes:w(O),edges:E(O)};return y.isUndefined(O.graph())||(I.value=y.clone(O.graph())),I}function w(O){return y.map(O.nodes(),function(I){var C=O.node(I),T=O.parent(I),D={v:I};return y.isUndefined(C)||(D.value=C),y.isUndefined(T)||(D.parent=T),D})}function E(O){return y.map(O.edges(),function(I){var C=O.edge(I),T={v:I.v,w:I.w};return y.isUndefined(I.name)||(T.name=I.name),y.isUndefined(C)||(T.value=C),T})}function A(O){var I=new P(O.options).setGraph(O.value);return y.each(O.nodes,function(C){I.setNode(C.v,C.value),C.parent&&I.setParent(C.v,C.parent)}),y.each(O.edges,function(C){I.setEdge({v:C.v,w:C.w,name:C.name},C.value)}),I}},95329:function(ut,L,x){var y;try{y={clone:x(76833),constant:x(13503),each:x(76934),filter:x(64725),has:x(99946),isArray:x(80744),isEmpty:x(61627),isFunction:x(9363),isUndefined:x(16513),keys:x(55451),map:x(9924),reduce:x(16473),size:x(40617),transform:x(91116),union:x(44065),values:x(81229)}}catch(P){}y||(y=window._),ut.exports=y},16544:function(ut){ut.exports="2.1.8"},34508:function(ut){var L=[],x=[],y="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function P(w,E){if(E=E||{},w===void 0)throw new Error(y);var A=E.prepend===!0?"prepend":"append",O=E.container!==void 0?E.container:document.querySelector("head"),I=L.indexOf(O);I===-1&&(I=L.push(O)-1,x[I]={});var C;return x[I]!==void 0&&x[I][A]!==void 0?C=x[I][A]:(C=x[I][A]=N(),A==="prepend"?O.insertBefore(C,O.childNodes[0]):O.appendChild(C)),w.charCodeAt(0)===65279&&(w=w.substr(1,w.length)),C.styleSheet?C.styleSheet.cssText+=w:C.textContent+=w,C}function N(){var w=document.createElement("style");return w.setAttribute("type","text/css"),w}ut.exports=P,ut.exports.insertCss=P},3039:function(ut,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var x=Symbol.for("INJECTION");function y(A,O,I,C){function T(){return C&&!Reflect.hasMetadata(x,this,O)&&Reflect.defineMetadata(x,I(),this,O),Reflect.hasMetadata(x,this,O)?Reflect.getMetadata(x,this,O):I()}function D(B){Reflect.defineMetadata(x,B,this,O)}Object.defineProperty(A,O,{configurable:!0,enumerable:!0,get:T,set:D})}function P(A,O){return function(I){return function(C,T){var D=function(){return A.get(I)};y(C,T,D,O)}}}L.makePropertyInjectDecorator=P;function N(A,O){return function(I,C){return function(T,D){var B=function(){return A.getNamed(I,C)};y(T,D,B,O)}}}L.makePropertyInjectNamedDecorator=N;function w(A,O){return function(I,C,T){return function(D,B){var G=function(){return A.getTagged(I,C,T)};y(D,B,G,O)}}}L.makePropertyInjectTaggedDecorator=w;function E(A,O){return function(I){return function(C,T){var D=function(){return A.getAll(I)};y(C,T,D,O)}}}L.makePropertyMultiInjectDecorator=E},11922:function(ut,L,x){"use strict";var y;y={value:!0};var P=x(3039);function N(w,E){E===void 0&&(E=!0);var A=P.makePropertyInjectDecorator(w,E),O=P.makePropertyInjectNamedDecorator(w,E),I=P.makePropertyInjectTaggedDecorator(w,E),C=P.makePropertyMultiInjectDecorator(w,E);return{lazyInject:A,lazyInjectNamed:O,lazyInjectTagged:I,lazyMultiInject:C}}L.Z=N},80626:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.tagProperty=L.tagParameter=L.decorate=void 0;var y=x(36078),P=x(50295);function N(C,T,D,B){var G=P.TAGGED;E(G,C,T,B,D)}L.tagParameter=N;function w(C,T,D){var B=P.TAGGED_PROP;E(B,C.constructor,T,D)}L.tagProperty=w;function E(C,T,D,B,G){var k={},U=typeof G=="number",Y=G!==void 0&&U?G.toString():D;if(U&&D!==void 0)throw new Error(y.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(C,T)&&(k=Reflect.getMetadata(C,T));var K=k[Y];if(!Array.isArray(K))K=[];else for(var J=0,q=K;J<q.length;J++){var X=q[J];if(X.key===B.key)throw new Error(y.DUPLICATED_METADATA+" "+X.key.toString())}K.push(B),k[Y]=K,Reflect.defineMetadata(C,k,T)}function A(C,T){Reflect.decorate(C,T)}function O(C,T){return function(D,B){T(D,B,C)}}function I(C,T,D){typeof D=="number"?A([O(D,C)],T):typeof D=="string"?Reflect.decorate([C],T,D):A([C],T)}L.decorate=I},76213:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.inject=L.LazyServiceIdentifer=void 0;var y=x(36078),P=x(50295),N=x(25092),w=x(80626),E=function(){function O(I){this._cb=I}return O.prototype.unwrap=function(){return this._cb()},O}();L.LazyServiceIdentifer=E;function A(O){return function(I,C,T){if(O===void 0)throw new Error(y.UNDEFINED_INJECT_ANNOTATION(I.name));var D=new N.Metadata(P.INJECT_TAG,O);typeof T=="number"?w.tagParameter(I,C,T,D):w.tagProperty(I,C,D)}}L.inject=A},91773:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.injectable=void 0;var y=x(36078),P=x(50295);function N(){return function(w){if(Reflect.hasOwnMetadata(P.PARAM_TYPES,w))throw new Error(y.DUPLICATED_INJECTABLE_DECORATOR);var E=Reflect.getMetadata(P.DESIGN_PARAM_TYPES,w)||[];return Reflect.defineMetadata(P.PARAM_TYPES,E,w),w}}L.injectable=N},41528:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.multiInject=void 0;var y=x(50295),P=x(25092),N=x(80626);function w(E){return function(A,O,I){var C=new P.Metadata(y.MULTI_INJECT_TAG,E);typeof I=="number"?N.tagParameter(A,O,I,C):N.tagProperty(A,O,C)}}L.multiInject=w},79817:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.named=void 0;var y=x(50295),P=x(25092),N=x(80626);function w(E){return function(A,O,I){var C=new P.Metadata(y.NAMED_TAG,E);typeof I=="number"?N.tagParameter(A,O,I,C):N.tagProperty(A,O,C)}}L.named=w},71316:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.optional=void 0;var y=x(50295),P=x(25092),N=x(80626);function w(){return function(E,A,O){var I=new P.Metadata(y.OPTIONAL_TAG,!0);typeof O=="number"?N.tagParameter(E,A,O,I):N.tagProperty(E,A,I)}}L.optional=w},71971:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.postConstruct=void 0;var y=x(36078),P=x(50295),N=x(25092);function w(){return function(E,A,O){var I=new N.Metadata(P.POST_CONSTRUCT,A);if(Reflect.hasOwnMetadata(P.POST_CONSTRUCT,E.constructor))throw new Error(y.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(P.POST_CONSTRUCT,I,E.constructor)}}L.postConstruct=w},79189:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.tagged=void 0;var y=x(25092),P=x(80626);function N(w,E){return function(A,O,I){var C=new y.Metadata(w,E);typeof I=="number"?P.tagParameter(A,O,I,C):P.tagProperty(A,O,C)}}L.tagged=N},8245:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.targetName=void 0;var y=x(50295),P=x(25092),N=x(80626);function w(E){return function(A,O,I){var C=new P.Metadata(y.NAME_TAG,E);N.tagParameter(A,O,I,C)}}L.targetName=w},19235:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.unmanaged=void 0;var y=x(50295),P=x(25092),N=x(80626);function w(){return function(E,A,O){var I=new P.Metadata(y.UNMANAGED_TAG,!0);N.tagParameter(E,A,O,I)}}L.unmanaged=w},30683:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Binding=void 0;var y=x(77690),P=x(70023),N=function(){function w(E,A){this.id=P.id(),this.activated=!1,this.serviceIdentifier=E,this.scope=A,this.type=y.BindingTypeEnum.Invalid,this.constraint=function(O){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return w.prototype.clone=function(){var E=new w(this.serviceIdentifier,this.scope);return E.activated=E.scope===y.BindingScopeEnum.Singleton?this.activated:!1,E.implementationType=this.implementationType,E.dynamicValue=this.dynamicValue,E.scope=this.scope,E.type=this.type,E.factory=this.factory,E.provider=this.provider,E.constraint=this.constraint,E.onActivation=this.onActivation,E.cache=this.cache,E},w}();L.Binding=N},13497:function(ut,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BindingCount=void 0;var x={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};L.BindingCount=x},36078:function(ut,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.STACK_OVERFLOW=L.CIRCULAR_DEPENDENCY_IN_FACTORY=L.POST_CONSTRUCT_ERROR=L.MULTIPLE_POST_CONSTRUCT_METHODS=L.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=L.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=L.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=L.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=L.ARGUMENTS_LENGTH_MISMATCH=L.INVALID_DECORATOR_OPERATION=L.INVALID_TO_SELF_VALUE=L.INVALID_FUNCTION_BINDING=L.INVALID_MIDDLEWARE_RETURN=L.NO_MORE_SNAPSHOTS_AVAILABLE=L.INVALID_BINDING_TYPE=L.NOT_IMPLEMENTED=L.CIRCULAR_DEPENDENCY=L.UNDEFINED_INJECT_ANNOTATION=L.MISSING_INJECT_ANNOTATION=L.MISSING_INJECTABLE_ANNOTATION=L.NOT_REGISTERED=L.CANNOT_UNBIND=L.AMBIGUOUS_MATCH=L.KEY_NOT_FOUND=L.NULL_ARGUMENT=L.DUPLICATED_METADATA=L.DUPLICATED_INJECTABLE_DECORATOR=void 0,L.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",L.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",L.NULL_ARGUMENT="NULL argument",L.KEY_NOT_FOUND="Key Not Found",L.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",L.CANNOT_UNBIND="Could not unbind serviceIdentifier:",L.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",L.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",L.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var x=function(w){return"@inject called with undefined this could mean that the class "+w+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};L.UNDEFINED_INJECT_ANNOTATION=x,L.CIRCULAR_DEPENDENCY="Circular dependency found:",L.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",L.INVALID_BINDING_TYPE="Invalid binding type:",L.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",L.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",L.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",L.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",L.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var y=function(){for(var w=[],E=0;E<arguments.length;E++)w[E]=arguments[E];return"The number of constructor arguments in the derived class "+(w[0]+" must be >= than the number of constructor arguments of its base class.")};L.ARGUMENTS_LENGTH_MISMATCH=y,L.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",L.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",L.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",L.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",L.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var P=function(){for(var w=[],E=0;E<arguments.length;E++)w[E]=arguments[E];return"@postConstruct error in class "+w[0]+": "+w[1]};L.POST_CONSTRUCT_ERROR=P;var N=function(){for(var w=[],E=0;E<arguments.length;E++)w[E]=arguments[E];return"It looks like there is a circular dependency "+("in one of the '"+w[0]+"' bindings. Please investigate bindings with")+("service identifier '"+w[1]+"'.")};L.CIRCULAR_DEPENDENCY_IN_FACTORY=N,L.STACK_OVERFLOW="Maximum call stack size exceeded"},77690:function(ut,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.TargetTypeEnum=L.BindingTypeEnum=L.BindingScopeEnum=void 0;var x={Request:"Request",Singleton:"Singleton",Transient:"Transient"};L.BindingScopeEnum=x;var y={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};L.BindingTypeEnum=y;var P={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};L.TargetTypeEnum=P},50295:function(ut,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.NON_CUSTOM_TAG_KEYS=L.POST_CONSTRUCT=L.DESIGN_PARAM_TYPES=L.PARAM_TYPES=L.TAGGED_PROP=L.TAGGED=L.MULTI_INJECT_TAG=L.INJECT_TAG=L.OPTIONAL_TAG=L.UNMANAGED_TAG=L.NAME_TAG=L.NAMED_TAG=void 0,L.NAMED_TAG="named",L.NAME_TAG="name",L.UNMANAGED_TAG="unmanaged",L.OPTIONAL_TAG="optional",L.INJECT_TAG="inject",L.MULTI_INJECT_TAG="multi_inject",L.TAGGED="inversify:tagged",L.TAGGED_PROP="inversify:tagged_props",L.PARAM_TYPES="inversify:paramtypes",L.DESIGN_PARAM_TYPES="design:paramtypes",L.POST_CONSTRUCT="post_construct";function x(){return[L.INJECT_TAG,L.MULTI_INJECT_TAG,L.NAME_TAG,L.UNMANAGED_TAG,L.NAMED_TAG,L.OPTIONAL_TAG]}L.NON_CUSTOM_TAG_KEYS=x()},70596:function(ut,L,x){"use strict";var y=this&&this.__awaiter||function(K,J,q,X){function j(Q){return Q instanceof q?Q:new q(function(lt){lt(Q)})}return new(q||(q=Promise))(function(Q,lt){function z($){try{v(X.next($))}catch(et){lt(et)}}function b($){try{v(X.throw($))}catch(et){lt(et)}}function v($){$.done?Q($.value):j($.value).then(z,b)}v((X=X.apply(K,J||[])).next())})},P=this&&this.__generator||function(K,J){var q={label:0,sent:function(){if(Q[0]&1)throw Q[1];return Q[1]},trys:[],ops:[]},X,j,Q,lt;return lt={next:z(0),throw:z(1),return:z(2)},typeof Symbol=="function"&&(lt[Symbol.iterator]=function(){return this}),lt;function z(v){return function($){return b([v,$])}}function b(v){if(X)throw new TypeError("Generator is already executing.");for(;q;)try{if(X=1,j&&(Q=v[0]&2?j.return:v[0]?j.throw||((Q=j.return)&&Q.call(j),0):j.next)&&!(Q=Q.call(j,v[1])).done)return Q;switch(j=0,Q&&(v=[v[0]&2,Q.value]),v[0]){case 0:case 1:Q=v;break;case 4:return q.label++,{value:v[1],done:!1};case 5:q.label++,j=v[1],v=[0];continue;case 7:v=q.ops.pop(),q.trys.pop();continue;default:if(Q=q.trys,!(Q=Q.length>0&&Q[Q.length-1])&&(v[0]===6||v[0]===2)){q=0;continue}if(v[0]===3&&(!Q||v[1]>Q[0]&&v[1]<Q[3])){q.label=v[1];break}if(v[0]===6&&q.label<Q[1]){q.label=Q[1],Q=v;break}if(Q&&q.label<Q[2]){q.label=Q[2],q.ops.push(v);break}Q[2]&&q.ops.pop(),q.trys.pop();continue}v=J.call(K,q)}catch($){v=[6,$],j=0}finally{X=Q=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},N=this&&this.__spreadArray||function(K,J){for(var q=0,X=J.length,j=K.length;q<X;q++,j++)K[j]=J[q];return K};Object.defineProperty(L,"__esModule",{value:!0}),L.Container=void 0;var w=x(30683),E=x(36078),A=x(77690),O=x(50295),I=x(43870),C=x(54142),T=x(9386),D=x(43313),B=x(70023),G=x(29552),k=x(71878),U=x(82543),Y=function(){function K(J){this._appliedMiddleware=[];var q=J||{};if(typeof q!="object")throw new Error(""+E.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(q.defaultScope===void 0)q.defaultScope=A.BindingScopeEnum.Transient;else if(q.defaultScope!==A.BindingScopeEnum.Singleton&&q.defaultScope!==A.BindingScopeEnum.Transient&&q.defaultScope!==A.BindingScopeEnum.Request)throw new Error(""+E.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(q.autoBindInjectable===void 0)q.autoBindInjectable=!1;else if(typeof q.autoBindInjectable!="boolean")throw new Error(""+E.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(q.skipBaseClassChecks===void 0)q.skipBaseClassChecks=!1;else if(typeof q.skipBaseClassChecks!="boolean")throw new Error(""+E.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:q.autoBindInjectable,defaultScope:q.defaultScope,skipBaseClassChecks:q.skipBaseClassChecks},this.id=B.id(),this._bindingDictionary=new U.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new I.MetadataReader}return K.merge=function(J,q){for(var X=[],j=2;j<arguments.length;j++)X[j-2]=arguments[j];var Q=new K,lt=N([J,q],X).map(function(v){return C.getBindingDictionary(v)}),z=C.getBindingDictionary(Q);function b(v,$){v.traverse(function(et,Z){Z.forEach(function(pt){$.add(pt.serviceIdentifier,pt.clone())})})}return lt.forEach(function(v){b(v,z)}),Q},K.prototype.load=function(){for(var J=[],q=0;q<arguments.length;q++)J[q]=arguments[q];for(var X=this._getContainerModuleHelpersFactory(),j=0,Q=J;j<Q.length;j++){var lt=Q[j],z=X(lt.id);lt.registry(z.bindFunction,z.unbindFunction,z.isboundFunction,z.rebindFunction)}},K.prototype.loadAsync=function(){for(var J=[],q=0;q<arguments.length;q++)J[q]=arguments[q];return y(this,void 0,void 0,function(){var X,j,Q,lt,z;return P(this,function(b){switch(b.label){case 0:X=this._getContainerModuleHelpersFactory(),j=0,Q=J,b.label=1;case 1:return j<Q.length?(lt=Q[j],z=X(lt.id),[4,lt.registry(z.bindFunction,z.unbindFunction,z.isboundFunction,z.rebindFunction)]):[3,4];case 2:b.sent(),b.label=3;case 3:return j++,[3,1];case 4:return[2]}})})},K.prototype.unload=function(){for(var J=this,q=[],X=0;X<arguments.length;X++)q[X]=arguments[X];var j=function(Q){return function(lt){return lt.moduleId===Q}};q.forEach(function(Q){var lt=j(Q.id);J._bindingDictionary.removeByCondition(lt)})},K.prototype.bind=function(J){var q=this.options.defaultScope||A.BindingScopeEnum.Transient,X=new w.Binding(J,q);return this._bindingDictionary.add(J,X),new D.BindingToSyntax(X)},K.prototype.rebind=function(J){return this.unbind(J),this.bind(J)},K.prototype.unbind=function(J){try{this._bindingDictionary.remove(J)}catch(q){throw new Error(E.CANNOT_UNBIND+" "+G.getServiceIdentifierAsString(J))}},K.prototype.unbindAll=function(){this._bindingDictionary=new U.Lookup},K.prototype.isBound=function(J){var q=this._bindingDictionary.hasKey(J);return!q&&this.parent&&(q=this.parent.isBound(J)),q},K.prototype.isBoundNamed=function(J,q){return this.isBoundTagged(J,O.NAMED_TAG,q)},K.prototype.isBoundTagged=function(J,q,X){var j=!1;if(this._bindingDictionary.hasKey(J)){var Q=this._bindingDictionary.get(J),lt=C.createMockRequest(this,J,q,X);j=Q.some(function(z){return z.constraint(lt)})}return!j&&this.parent&&(j=this.parent.isBoundTagged(J,q,X)),j},K.prototype.snapshot=function(){this._snapshots.push(k.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},K.prototype.restore=function(){var J=this._snapshots.pop();if(J===void 0)throw new Error(E.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=J.bindings,this._middleware=J.middleware},K.prototype.createChild=function(J){var q=new K(J||this.options);return q.parent=this,q},K.prototype.applyMiddleware=function(){for(var J=[],q=0;q<arguments.length;q++)J[q]=arguments[q];this._appliedMiddleware=this._appliedMiddleware.concat(J);var X=this._middleware?this._middleware:this._planAndResolve();this._middleware=J.reduce(function(j,Q){return Q(j)},X)},K.prototype.applyCustomMetadataReader=function(J){this._metadataReader=J},K.prototype.get=function(J){return this._get(!1,!1,A.TargetTypeEnum.Variable,J)},K.prototype.getTagged=function(J,q,X){return this._get(!1,!1,A.TargetTypeEnum.Variable,J,q,X)},K.prototype.getNamed=function(J,q){return this.getTagged(J,O.NAMED_TAG,q)},K.prototype.getAll=function(J){return this._get(!0,!0,A.TargetTypeEnum.Variable,J)},K.prototype.getAllTagged=function(J,q,X){return this._get(!1,!0,A.TargetTypeEnum.Variable,J,q,X)},K.prototype.getAllNamed=function(J,q){return this.getAllTagged(J,O.NAMED_TAG,q)},K.prototype.resolve=function(J){var q=this.createChild();return q.bind(J).toSelf(),this._appliedMiddleware.forEach(function(X){q.applyMiddleware(X)}),q.get(J)},K.prototype._getContainerModuleHelpersFactory=function(){var J=this,q=function(z,b){z._binding.moduleId=b},X=function(z){return function(b){var v=J.bind.bind(J),$=v(b);return q($,z),$}},j=function(z){return function(b){var v=J.unbind.bind(J);v(b)}},Q=function(z){return function(b){var v=J.isBound.bind(J);return v(b)}},lt=function(z){return function(b){var v=J.rebind.bind(J),$=v(b);return q($,z),$}};return function(z){return{bindFunction:X(z),isboundFunction:Q(z),rebindFunction:lt(z),unbindFunction:j(z)}}},K.prototype._get=function(J,q,X,j,Q,lt){var z=null,b={avoidConstraints:J,contextInterceptor:function(v){return v},isMultiInject:q,key:Q,serviceIdentifier:j,targetType:X,value:lt};if(this._middleware){if(z=this._middleware(b),z==null)throw new Error(E.INVALID_MIDDLEWARE_RETURN)}else z=this._planAndResolve()(b);return z},K.prototype._planAndResolve=function(){var J=this;return function(q){var X=C.plan(J._metadataReader,J,q.isMultiInject,q.targetType,q.serviceIdentifier,q.key,q.value,q.avoidConstraints);X=q.contextInterceptor(X);var j=T.resolve(X);return j}},K}();L.Container=Y},42913:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.AsyncContainerModule=L.ContainerModule=void 0;var y=x(70023),P=function(){function w(E){this.id=y.id(),this.registry=E}return w}();L.ContainerModule=P;var N=function(){function w(E){this.id=y.id(),this.registry=E}return w}();L.AsyncContainerModule=N},71878:function(ut,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.ContainerSnapshot=void 0;var x=function(){function y(){}return y.of=function(P,N){var w=new y;return w.bindings=P,w.middleware=N,w},y}();L.ContainerSnapshot=x},82543:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Lookup=void 0;var y=x(36078),P=function(){function N(){this._map=new Map}return N.prototype.getMap=function(){return this._map},N.prototype.add=function(w,E){if(w==null)throw new Error(y.NULL_ARGUMENT);if(E==null)throw new Error(y.NULL_ARGUMENT);var A=this._map.get(w);A!==void 0?(A.push(E),this._map.set(w,A)):this._map.set(w,[E])},N.prototype.get=function(w){if(w==null)throw new Error(y.NULL_ARGUMENT);var E=this._map.get(w);if(E!==void 0)return E;throw new Error(y.KEY_NOT_FOUND)},N.prototype.remove=function(w){if(w==null)throw new Error(y.NULL_ARGUMENT);if(!this._map.delete(w))throw new Error(y.KEY_NOT_FOUND)},N.prototype.removeByCondition=function(w){var E=this;this._map.forEach(function(A,O){var I=A.filter(function(C){return!w(C)});I.length>0?E._map.set(O,I):E._map.delete(O)})},N.prototype.hasKey=function(w){if(w==null)throw new Error(y.NULL_ARGUMENT);return this._map.has(w)},N.prototype.clone=function(){var w=new N;return this._map.forEach(function(E,A){E.forEach(function(O){return w.add(A,O.clone())})}),w},N.prototype.traverse=function(w){this._map.forEach(function(E,A){w(A,E)})},N}();L.Lookup=P},99311:function(ut,L,x){"use strict";var y;y={value:!0},y=y=y=y=y=y=y=y=y=y=y=y=y=y=y=L.f3=L.t6=y=L.b2=y=y=y=y=y=L.W2=y=void 0;var P=x(50295);y=P;var N=x(70596);Object.defineProperty(L,"W2",{enumerable:!0,get:function(){return N.Container}});var w=x(77690);y={enumerable:!0,get:function(){return w.BindingScopeEnum}},y={enumerable:!0,get:function(){return w.BindingTypeEnum}},y={enumerable:!0,get:function(){return w.TargetTypeEnum}};var E=x(42913);y={enumerable:!0,get:function(){return E.AsyncContainerModule}},y={enumerable:!0,get:function(){return E.ContainerModule}};var A=x(91773);Object.defineProperty(L,"b2",{enumerable:!0,get:function(){return A.injectable}});var O=x(79189);y={enumerable:!0,get:function(){return O.tagged}};var I=x(79817);Object.defineProperty(L,"t6",{enumerable:!0,get:function(){return I.named}});var C=x(76213);Object.defineProperty(L,"f3",{enumerable:!0,get:function(){return C.inject}}),y={enumerable:!0,get:function(){return C.LazyServiceIdentifer}};var T=x(71316);y={enumerable:!0,get:function(){return T.optional}};var D=x(19235);y={enumerable:!0,get:function(){return D.unmanaged}};var B=x(41528);y={enumerable:!0,get:function(){return B.multiInject}};var G=x(8245);y={enumerable:!0,get:function(){return G.targetName}};var k=x(71971);y={enumerable:!0,get:function(){return k.postConstruct}};var U=x(43870);y={enumerable:!0,get:function(){return U.MetadataReader}};var Y=x(70023);y={enumerable:!0,get:function(){return Y.id}};var K=x(80626);y={enumerable:!0,get:function(){return K.decorate}};var J=x(83140);y={enumerable:!0,get:function(){return J.traverseAncerstors}},y={enumerable:!0,get:function(){return J.taggedConstraint}},y={enumerable:!0,get:function(){return J.namedConstraint}},y={enumerable:!0,get:function(){return J.typeConstraint}};var q=x(29552);y={enumerable:!0,get:function(){return q.getServiceIdentifierAsString}};var X=x(34384);y={enumerable:!0,get:function(){return X.multiBindToService}}},91519:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Context=void 0;var y=x(70023),P=function(){function N(w){this.id=y.id(),this.container=w}return N.prototype.addPlan=function(w){this.plan=w},N.prototype.setCurrentRequest=function(w){this.currentRequest=w},N}();L.Context=P},25092:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Metadata=void 0;var y=x(50295),P=function(){function N(w,E){this.key=w,this.value=E}return N.prototype.toString=function(){return this.key===y.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},N}();L.Metadata=P},43870:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.MetadataReader=void 0;var y=x(50295),P=function(){function N(){}return N.prototype.getConstructorMetadata=function(w){var E=Reflect.getMetadata(y.PARAM_TYPES,w),A=Reflect.getMetadata(y.TAGGED,w);return{compilerGeneratedMetadata:E,userGeneratedMetadata:A||{}}},N.prototype.getPropertiesMetadata=function(w){var E=Reflect.getMetadata(y.TAGGED_PROP,w)||[];return E},N}();L.MetadataReader=P},6335:function(ut,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Plan=void 0;var x=function(){function y(P,N){this.parentContext=P,this.rootRequest=N}return y}();L.Plan=x},54142:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.getBindingDictionary=L.createMockRequest=L.plan=void 0;var y=x(13497),P=x(36078),N=x(77690),w=x(50295),E=x(92542),A=x(29552),O=x(91519),I=x(25092),C=x(6335),T=x(16664),D=x(14810),B=x(69660);function G(j){return j._bindingDictionary}L.getBindingDictionary=G;function k(j,Q,lt,z,b,v){var $=j?w.MULTI_INJECT_TAG:w.INJECT_TAG,et=new I.Metadata($,lt),Z=new B.Target(Q,z,lt,et);if(b!==void 0){var pt=new I.Metadata(b,v);Z.metadata.push(pt)}return Z}function U(j,Q,lt,z,b){var v=J(lt.container,b.serviceIdentifier),$=[];return v.length===y.BindingCount.NoBindingsAvailable&&lt.container.options.autoBindInjectable&&typeof b.serviceIdentifier=="function"&&j.getConstructorMetadata(b.serviceIdentifier).compilerGeneratedMetadata&&(lt.container.bind(b.serviceIdentifier).toSelf(),v=J(lt.container,b.serviceIdentifier)),Q?$=v:$=v.filter(function(et){var Z=new D.Request(et.serviceIdentifier,lt,z,et,b);return et.constraint(Z)}),Y(b.serviceIdentifier,$,b,lt.container),$}function Y(j,Q,lt,z){switch(Q.length){case y.BindingCount.NoBindingsAvailable:if(lt.isOptional())return Q;var b=A.getServiceIdentifierAsString(j),v=P.NOT_REGISTERED;throw v+=A.listMetadataForTarget(b,lt),v+=A.listRegisteredBindingsForServiceIdentifier(z,b,J),new Error(v);case y.BindingCount.OnlyOneBindingAvailable:if(!lt.isArray())return Q;case y.BindingCount.MultipleBindingsAvailable:default:if(lt.isArray())return Q;var b=A.getServiceIdentifierAsString(j),v=P.AMBIGUOUS_MATCH+" "+b;throw v+=A.listRegisteredBindingsForServiceIdentifier(z,b,J),new Error(v)}}function K(j,Q,lt,z,b,v){var $,et;if(b===null){$=U(j,Q,z,null,v),et=new D.Request(lt,z,null,$,v);var Z=new C.Plan(z,et);z.addPlan(Z)}else $=U(j,Q,z,b,v),et=b.addChildRequest(v.serviceIdentifier,$,v);$.forEach(function(pt){var _t=null;if(v.isArray())_t=et.addChildRequest(pt.serviceIdentifier,pt,v);else{if(pt.cache)return;_t=et}if(pt.type===N.BindingTypeEnum.Instance&&pt.implementationType!==null){var It=T.getDependencies(j,pt.implementationType);if(!z.container.options.skipBaseClassChecks){var Rt=T.getBaseClassDependencyCount(j,pt.implementationType);if(It.length<Rt){var H=P.ARGUMENTS_LENGTH_MISMATCH(T.getFunctionName(pt.implementationType));throw new Error(H)}}It.forEach(function(ot){K(j,!1,ot.serviceIdentifier,z,_t,ot)})}})}function J(j,Q){var lt=[],z=G(j);return z.hasKey(Q)?lt=z.get(Q):j.parent!==null&&(lt=J(j.parent,Q)),lt}function q(j,Q,lt,z,b,v,$,et){et===void 0&&(et=!1);var Z=new O.Context(Q),pt=k(lt,z,b,"",v,$);try{return K(j,et,b,Z,null,pt),Z}catch(_t){throw E.isStackOverflowExeption(_t)&&Z.plan&&A.circularDependencyToException(Z.plan.rootRequest),_t}}L.plan=q;function X(j,Q,lt,z){var b=new B.Target(N.TargetTypeEnum.Variable,"",Q,new I.Metadata(lt,z)),v=new O.Context(j),$=new D.Request(Q,v,null,[],b);return $}L.createMockRequest=X},68634:function(ut,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.QueryableString=void 0;var x=function(){function y(P){this.str=P}return y.prototype.startsWith=function(P){return this.str.indexOf(P)===0},y.prototype.endsWith=function(P){var N="",w=P.split("").reverse().join("");return N=this.str.split("").reverse().join(""),this.startsWith.call({str:N},w)},y.prototype.contains=function(P){return this.str.indexOf(P)!==-1},y.prototype.equals=function(P){return this.str===P},y.prototype.value=function(){return this.str},y}();L.QueryableString=x},16664:function(ut,L,x){"use strict";var y=this&&this.__spreadArray||function(U,Y){for(var K=0,J=Y.length,q=U.length;K<J;K++,q++)U[q]=Y[K];return U};Object.defineProperty(L,"__esModule",{value:!0}),L.getFunctionName=L.getBaseClassDependencyCount=L.getDependencies=void 0;var P=x(76213),N=x(36078),w=x(77690),E=x(50295),A=x(29552);Object.defineProperty(L,"getFunctionName",{enumerable:!0,get:function(){return A.getFunctionName}});var O=x(69660);function I(U,Y){var K=A.getFunctionName(Y),J=C(U,K,Y,!1);return J}L.getDependencies=I;function C(U,Y,K,J){var q=U.getConstructorMetadata(K),X=q.compilerGeneratedMetadata;if(X===void 0){var j=N.MISSING_INJECTABLE_ANNOTATION+" "+Y+".";throw new Error(j)}var Q=q.userGeneratedMetadata,lt=Object.keys(Q),z=K.length===0&&lt.length>0,b=lt.length>K.length,v=z||b?lt.length:K.length,$=D(J,Y,X,Q,v),et=B(U,K),Z=y(y([],$),et);return Z}function T(U,Y,K,J,q){var X=q[U.toString()]||[],j=k(X),Q=j.unmanaged!==!0,lt=J[U],z=j.inject||j.multiInject;if(lt=z||lt,lt instanceof P.LazyServiceIdentifer&&(lt=lt.unwrap()),Q){var b=lt===Object,v=lt===Function,$=lt===void 0,et=b||v||$;if(!Y&&et){var Z=N.MISSING_INJECT_ANNOTATION+" argument "+U+" in class "+K+".";throw new Error(Z)}var pt=new O.Target(w.TargetTypeEnum.ConstructorArgument,j.targetName,lt);return pt.metadata=X,pt}return null}function D(U,Y,K,J,q){for(var X=[],j=0;j<q;j++){var Q=j,lt=T(Q,U,Y,K,J);lt!==null&&X.push(lt)}return X}function B(U,Y){for(var K=U.getPropertiesMetadata(Y),J=[],q=Object.keys(K),X=0,j=q;X<j.length;X++){var Q=j[X],lt=K[Q],z=k(K[Q]),b=z.targetName||Q,v=z.inject||z.multiInject,$=new O.Target(w.TargetTypeEnum.ClassProperty,b,v);$.metadata=lt,J.push($)}var et=Object.getPrototypeOf(Y.prototype).constructor;if(et!==Object){var Z=B(U,et);J=y(y([],J),Z)}return J}function G(U,Y){var K=Object.getPrototypeOf(Y.prototype).constructor;if(K!==Object){var J=A.getFunctionName(K),q=C(U,J,K,!0),X=q.map(function(lt){return lt.metadata.filter(function(z){return z.key===E.UNMANAGED_TAG})}),j=[].concat.apply([],X).length,Q=q.length-j;return Q>0?Q:G(U,K)}else return 0}L.getBaseClassDependencyCount=G;function k(U){var Y={};return U.forEach(function(K){Y[K.key.toString()]=K.value}),{inject:Y[E.INJECT_TAG],multiInject:Y[E.MULTI_INJECT_TAG],targetName:Y[E.NAME_TAG],unmanaged:Y[E.UNMANAGED_TAG]}}},14810:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Request=void 0;var y=x(70023),P=function(){function N(w,E,A,O,I){this.id=y.id(),this.serviceIdentifier=w,this.parentContext=E,this.parentRequest=A,this.target=I,this.childRequests=[],this.bindings=Array.isArray(O)?O:[O],this.requestScope=A===null?new Map:null}return N.prototype.addChildRequest=function(w,E,A){var O=new N(w,this.parentContext,this,E,A);return this.childRequests.push(O),O},N}();L.Request=P},69660:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Target=void 0;var y=x(50295),P=x(70023),N=x(25092),w=x(68634),E=function(){function A(O,I,C,T){this.id=P.id(),this.type=O,this.serviceIdentifier=C,this.name=new w.QueryableString(I||""),this.metadata=new Array;var D=null;typeof T=="string"?D=new N.Metadata(y.NAMED_TAG,T):T instanceof N.Metadata&&(D=T),D!==null&&this.metadata.push(D)}return A.prototype.hasTag=function(O){for(var I=0,C=this.metadata;I<C.length;I++){var T=C[I];if(T.key===O)return!0}return!1},A.prototype.isArray=function(){return this.hasTag(y.MULTI_INJECT_TAG)},A.prototype.matchesArray=function(O){return this.matchesTag(y.MULTI_INJECT_TAG)(O)},A.prototype.isNamed=function(){return this.hasTag(y.NAMED_TAG)},A.prototype.isTagged=function(){return this.metadata.some(function(O){return y.NON_CUSTOM_TAG_KEYS.every(function(I){return O.key!==I})})},A.prototype.isOptional=function(){return this.matchesTag(y.OPTIONAL_TAG)(!0)},A.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(O){return O.key===y.NAMED_TAG})[0]:null},A.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(O){return y.NON_CUSTOM_TAG_KEYS.every(function(I){return O.key!==I})}):null},A.prototype.matchesNamedTag=function(O){return this.matchesTag(y.NAMED_TAG)(O)},A.prototype.matchesTag=function(O){var I=this;return function(C){for(var T=0,D=I.metadata;T<D.length;T++){var B=D[T];if(B.key===O&&B.value===C)return!0}return!1}},A}();L.Target=E},74962:function(ut,L,x){"use strict";var y=this&&this.__spreadArray||function(C,T){for(var D=0,B=T.length,G=C.length;D<B;D++,G++)C[G]=T[D];return C};Object.defineProperty(L,"__esModule",{value:!0}),L.resolveInstance=void 0;var P=x(36078),N=x(77690),w=x(50295);function E(C,T,D){var B=T.filter(function(k){return k.target!==null&&k.target.type===N.TargetTypeEnum.ClassProperty}),G=B.map(D);return B.forEach(function(k,U){var Y="";Y=k.target.name.value();var K=G[U];C[Y]=K}),C}function A(C,T){return new(C.bind.apply(C,y([void 0],T)))}function O(C,T){if(Reflect.hasMetadata(w.POST_CONSTRUCT,C)){var D=Reflect.getMetadata(w.POST_CONSTRUCT,C);try{T[D.value]()}catch(B){throw new Error(P.POST_CONSTRUCT_ERROR(C.name,B.message))}}}function I(C,T,D){var B=null;if(T.length>0){var G=T.filter(function(U){return U.target!==null&&U.target.type===N.TargetTypeEnum.ConstructorArgument}),k=G.map(D);B=A(C,k),B=E(B,T,D)}else B=new C;return O(C,B),B}L.resolveInstance=I},9386:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.resolve=void 0;var y=x(36078),P=x(77690),N=x(92542),w=x(29552),E=x(74962),A=function(C,T,D){try{return D()}catch(B){throw N.isStackOverflowExeption(B)?new Error(y.CIRCULAR_DEPENDENCY_IN_FACTORY(C,T.toString())):B}},O=function(C){return function(T){T.parentContext.setCurrentRequest(T);var D=T.bindings,B=T.childRequests,G=T.target&&T.target.isArray(),k=!T.parentRequest||!T.parentRequest.target||!T.target||!T.parentRequest.target.matchesArray(T.target.serviceIdentifier);if(G&&k)return B.map(function(X){var j=O(C);return j(X)});var U=null;if(T.target.isOptional()&&D.length===0)return;var Y=D[0],K=Y.scope===P.BindingScopeEnum.Singleton,J=Y.scope===P.BindingScopeEnum.Request;if(K&&Y.activated)return Y.cache;if(J&&C!==null&&C.has(Y.id))return C.get(Y.id);if(Y.type===P.BindingTypeEnum.ConstantValue)U=Y.cache,Y.activated=!0;else if(Y.type===P.BindingTypeEnum.Function)U=Y.cache,Y.activated=!0;else if(Y.type===P.BindingTypeEnum.Constructor)U=Y.implementationType;else if(Y.type===P.BindingTypeEnum.DynamicValue&&Y.dynamicValue!==null)U=A("toDynamicValue",Y.serviceIdentifier,function(){return Y.dynamicValue(T.parentContext)});else if(Y.type===P.BindingTypeEnum.Factory&&Y.factory!==null)U=A("toFactory",Y.serviceIdentifier,function(){return Y.factory(T.parentContext)});else if(Y.type===P.BindingTypeEnum.Provider&&Y.provider!==null)U=A("toProvider",Y.serviceIdentifier,function(){return Y.provider(T.parentContext)});else if(Y.type===P.BindingTypeEnum.Instance&&Y.implementationType!==null)U=E.resolveInstance(Y.implementationType,B,O(C));else{var q=w.getServiceIdentifierAsString(T.serviceIdentifier);throw new Error(y.INVALID_BINDING_TYPE+" "+q)}return typeof Y.onActivation=="function"&&(U=Y.onActivation(T.parentContext,U)),K&&(Y.cache=U,Y.activated=!0),J&&C!==null&&!C.has(Y.id)&&C.set(Y.id,U),U}};function I(C){var T=O(C.plan.rootRequest.requestScope);return T(C.plan.rootRequest)}L.resolve=I},91640:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BindingInSyntax=void 0;var y=x(77690),P=x(46890),N=function(){function w(E){this._binding=E}return w.prototype.inRequestScope=function(){return this._binding.scope=y.BindingScopeEnum.Request,new P.BindingWhenOnSyntax(this._binding)},w.prototype.inSingletonScope=function(){return this._binding.scope=y.BindingScopeEnum.Singleton,new P.BindingWhenOnSyntax(this._binding)},w.prototype.inTransientScope=function(){return this._binding.scope=y.BindingScopeEnum.Transient,new P.BindingWhenOnSyntax(this._binding)},w}();L.BindingInSyntax=N},82386:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BindingInWhenOnSyntax=void 0;var y=x(91640),P=x(8926),N=x(36890),w=function(){function E(A){this._binding=A,this._bindingWhenSyntax=new N.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new P.BindingOnSyntax(this._binding),this._bindingInSyntax=new y.BindingInSyntax(A)}return E.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},E.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},E.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},E.prototype.when=function(A){return this._bindingWhenSyntax.when(A)},E.prototype.whenTargetNamed=function(A){return this._bindingWhenSyntax.whenTargetNamed(A)},E.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},E.prototype.whenTargetTagged=function(A,O){return this._bindingWhenSyntax.whenTargetTagged(A,O)},E.prototype.whenInjectedInto=function(A){return this._bindingWhenSyntax.whenInjectedInto(A)},E.prototype.whenParentNamed=function(A){return this._bindingWhenSyntax.whenParentNamed(A)},E.prototype.whenParentTagged=function(A,O){return this._bindingWhenSyntax.whenParentTagged(A,O)},E.prototype.whenAnyAncestorIs=function(A){return this._bindingWhenSyntax.whenAnyAncestorIs(A)},E.prototype.whenNoAncestorIs=function(A){return this._bindingWhenSyntax.whenNoAncestorIs(A)},E.prototype.whenAnyAncestorNamed=function(A){return this._bindingWhenSyntax.whenAnyAncestorNamed(A)},E.prototype.whenAnyAncestorTagged=function(A,O){return this._bindingWhenSyntax.whenAnyAncestorTagged(A,O)},E.prototype.whenNoAncestorNamed=function(A){return this._bindingWhenSyntax.whenNoAncestorNamed(A)},E.prototype.whenNoAncestorTagged=function(A,O){return this._bindingWhenSyntax.whenNoAncestorTagged(A,O)},E.prototype.whenAnyAncestorMatches=function(A){return this._bindingWhenSyntax.whenAnyAncestorMatches(A)},E.prototype.whenNoAncestorMatches=function(A){return this._bindingWhenSyntax.whenNoAncestorMatches(A)},E.prototype.onActivation=function(A){return this._bindingOnSyntax.onActivation(A)},E}();L.BindingInWhenOnSyntax=w},8926:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BindingOnSyntax=void 0;var y=x(36890),P=function(){function N(w){this._binding=w}return N.prototype.onActivation=function(w){return this._binding.onActivation=w,new y.BindingWhenSyntax(this._binding)},N}();L.BindingOnSyntax=P},43313:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BindingToSyntax=void 0;var y=x(36078),P=x(77690),N=x(82386),w=x(46890),E=function(){function A(O){this._binding=O}return A.prototype.to=function(O){return this._binding.type=P.BindingTypeEnum.Instance,this._binding.implementationType=O,new N.BindingInWhenOnSyntax(this._binding)},A.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+y.INVALID_TO_SELF_VALUE);var O=this._binding.serviceIdentifier;return this.to(O)},A.prototype.toConstantValue=function(O){return this._binding.type=P.BindingTypeEnum.ConstantValue,this._binding.cache=O,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=P.BindingScopeEnum.Singleton,new w.BindingWhenOnSyntax(this._binding)},A.prototype.toDynamicValue=function(O){return this._binding.type=P.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=O,this._binding.implementationType=null,new N.BindingInWhenOnSyntax(this._binding)},A.prototype.toConstructor=function(O){return this._binding.type=P.BindingTypeEnum.Constructor,this._binding.implementationType=O,this._binding.scope=P.BindingScopeEnum.Singleton,new w.BindingWhenOnSyntax(this._binding)},A.prototype.toFactory=function(O){return this._binding.type=P.BindingTypeEnum.Factory,this._binding.factory=O,this._binding.scope=P.BindingScopeEnum.Singleton,new w.BindingWhenOnSyntax(this._binding)},A.prototype.toFunction=function(O){if(typeof O!="function")throw new Error(y.INVALID_FUNCTION_BINDING);var I=this.toConstantValue(O);return this._binding.type=P.BindingTypeEnum.Function,this._binding.scope=P.BindingScopeEnum.Singleton,I},A.prototype.toAutoFactory=function(O){return this._binding.type=P.BindingTypeEnum.Factory,this._binding.factory=function(I){var C=function(){return I.container.get(O)};return C},this._binding.scope=P.BindingScopeEnum.Singleton,new w.BindingWhenOnSyntax(this._binding)},A.prototype.toProvider=function(O){return this._binding.type=P.BindingTypeEnum.Provider,this._binding.provider=O,this._binding.scope=P.BindingScopeEnum.Singleton,new w.BindingWhenOnSyntax(this._binding)},A.prototype.toService=function(O){this.toDynamicValue(function(I){return I.container.get(O)})},A}();L.BindingToSyntax=E},46890:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BindingWhenOnSyntax=void 0;var y=x(8926),P=x(36890),N=function(){function w(E){this._binding=E,this._bindingWhenSyntax=new P.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new y.BindingOnSyntax(this._binding)}return w.prototype.when=function(E){return this._bindingWhenSyntax.when(E)},w.prototype.whenTargetNamed=function(E){return this._bindingWhenSyntax.whenTargetNamed(E)},w.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},w.prototype.whenTargetTagged=function(E,A){return this._bindingWhenSyntax.whenTargetTagged(E,A)},w.prototype.whenInjectedInto=function(E){return this._bindingWhenSyntax.whenInjectedInto(E)},w.prototype.whenParentNamed=function(E){return this._bindingWhenSyntax.whenParentNamed(E)},w.prototype.whenParentTagged=function(E,A){return this._bindingWhenSyntax.whenParentTagged(E,A)},w.prototype.whenAnyAncestorIs=function(E){return this._bindingWhenSyntax.whenAnyAncestorIs(E)},w.prototype.whenNoAncestorIs=function(E){return this._bindingWhenSyntax.whenNoAncestorIs(E)},w.prototype.whenAnyAncestorNamed=function(E){return this._bindingWhenSyntax.whenAnyAncestorNamed(E)},w.prototype.whenAnyAncestorTagged=function(E,A){return this._bindingWhenSyntax.whenAnyAncestorTagged(E,A)},w.prototype.whenNoAncestorNamed=function(E){return this._bindingWhenSyntax.whenNoAncestorNamed(E)},w.prototype.whenNoAncestorTagged=function(E,A){return this._bindingWhenSyntax.whenNoAncestorTagged(E,A)},w.prototype.whenAnyAncestorMatches=function(E){return this._bindingWhenSyntax.whenAnyAncestorMatches(E)},w.prototype.whenNoAncestorMatches=function(E){return this._bindingWhenSyntax.whenNoAncestorMatches(E)},w.prototype.onActivation=function(E){return this._bindingOnSyntax.onActivation(E)},w}();L.BindingWhenOnSyntax=N},36890:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BindingWhenSyntax=void 0;var y=x(8926),P=x(83140),N=function(){function w(E){this._binding=E}return w.prototype.when=function(E){return this._binding.constraint=E,new y.BindingOnSyntax(this._binding)},w.prototype.whenTargetNamed=function(E){return this._binding.constraint=P.namedConstraint(E),new y.BindingOnSyntax(this._binding)},w.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(E){var A=E.target!==null&&!E.target.isNamed()&&!E.target.isTagged();return A},new y.BindingOnSyntax(this._binding)},w.prototype.whenTargetTagged=function(E,A){return this._binding.constraint=P.taggedConstraint(E)(A),new y.BindingOnSyntax(this._binding)},w.prototype.whenInjectedInto=function(E){return this._binding.constraint=function(A){return P.typeConstraint(E)(A.parentRequest)},new y.BindingOnSyntax(this._binding)},w.prototype.whenParentNamed=function(E){return this._binding.constraint=function(A){return P.namedConstraint(E)(A.parentRequest)},new y.BindingOnSyntax(this._binding)},w.prototype.whenParentTagged=function(E,A){return this._binding.constraint=function(O){return P.taggedConstraint(E)(A)(O.parentRequest)},new y.BindingOnSyntax(this._binding)},w.prototype.whenAnyAncestorIs=function(E){return this._binding.constraint=function(A){return P.traverseAncerstors(A,P.typeConstraint(E))},new y.BindingOnSyntax(this._binding)},w.prototype.whenNoAncestorIs=function(E){return this._binding.constraint=function(A){return!P.traverseAncerstors(A,P.typeConstraint(E))},new y.BindingOnSyntax(this._binding)},w.prototype.whenAnyAncestorNamed=function(E){return this._binding.constraint=function(A){return P.traverseAncerstors(A,P.namedConstraint(E))},new y.BindingOnSyntax(this._binding)},w.prototype.whenNoAncestorNamed=function(E){return this._binding.constraint=function(A){return!P.traverseAncerstors(A,P.namedConstraint(E))},new y.BindingOnSyntax(this._binding)},w.prototype.whenAnyAncestorTagged=function(E,A){return this._binding.constraint=function(O){return P.traverseAncerstors(O,P.taggedConstraint(E)(A))},new y.BindingOnSyntax(this._binding)},w.prototype.whenNoAncestorTagged=function(E,A){return this._binding.constraint=function(O){return!P.traverseAncerstors(O,P.taggedConstraint(E)(A))},new y.BindingOnSyntax(this._binding)},w.prototype.whenAnyAncestorMatches=function(E){return this._binding.constraint=function(A){return P.traverseAncerstors(A,E)},new y.BindingOnSyntax(this._binding)},w.prototype.whenNoAncestorMatches=function(E){return this._binding.constraint=function(A){return!P.traverseAncerstors(A,E)},new y.BindingOnSyntax(this._binding)},w}();L.BindingWhenSyntax=N},83140:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.typeConstraint=L.namedConstraint=L.taggedConstraint=L.traverseAncerstors=void 0;var y=x(50295),P=x(25092),N=function(O,I){var C=O.parentRequest;return C!==null?I(C)?!0:N(C,I):!1};L.traverseAncerstors=N;var w=function(O){return function(I){var C=function(T){return T!==null&&T.target!==null&&T.target.matchesTag(O)(I)};return C.metaData=new P.Metadata(O,I),C}};L.taggedConstraint=w;var E=w(y.NAMED_TAG);L.namedConstraint=E;var A=function(O){return function(I){var C=null;if(I!==null)if(C=I.bindings[0],typeof O=="string"){var T=C.serviceIdentifier;return T===O}else{var D=I.bindings[0].implementationType;return O===D}return!1}};L.typeConstraint=A},34384:function(ut,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.multiBindToService=void 0;var x=function(y){return function(P){return function(){for(var N=[],w=0;w<arguments.length;w++)N[w]=arguments[w];return N.forEach(function(E){return y.bind(E).toService(P)})}}};L.multiBindToService=x},92542:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.isStackOverflowExeption=void 0;var y=x(36078);function P(N){return N instanceof RangeError||N.message===y.STACK_OVERFLOW}L.isStackOverflowExeption=P},70023:function(ut,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.id=void 0;var x=0;function y(){return x++}L.id=y},29552:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.circularDependencyToException=L.listMetadataForTarget=L.listRegisteredBindingsForServiceIdentifier=L.getServiceIdentifierAsString=L.getFunctionName=void 0;var y=x(36078);function P(C){if(typeof C=="function"){var T=C;return T.name}else{if(typeof C=="symbol")return C.toString();var T=C;return T}}L.getServiceIdentifierAsString=P;function N(C,T,D){var B="",G=D(C,T);return G.length!==0&&(B=`
Registered bindings:`,G.forEach(function(k){var U="Object";k.implementationType!==null&&(U=I(k.implementationType)),B=B+`
 `+U,k.constraint.metaData&&(B=B+" - "+k.constraint.metaData)})),B}L.listRegisteredBindingsForServiceIdentifier=N;function w(C,T){return C.parentRequest===null?!1:C.parentRequest.serviceIdentifier===T?!0:w(C.parentRequest,T)}function E(C){function T(B,G){G===void 0&&(G=[]);var k=P(B.serviceIdentifier);return G.push(k),B.parentRequest!==null?T(B.parentRequest,G):G}var D=T(C);return D.reverse().join(" --> ")}function A(C){C.childRequests.forEach(function(T){if(w(T,T.serviceIdentifier)){var D=E(T);throw new Error(y.CIRCULAR_DEPENDENCY+" "+D)}else A(T)})}L.circularDependencyToException=A;function O(C,T){if(T.isTagged()||T.isNamed()){var D="",B=T.getNamedTag(),G=T.getCustomTags();return B!==null&&(D+=B.toString()+`
`),G!==null&&G.forEach(function(k){D+=k.toString()+`
`})," "+C+`
 `+C+" - "+D}else return" "+C}L.listMetadataForTarget=O;function I(C){if(C.name)return C.name;var T=C.toString(),D=T.match(/^function\s*([^\s(]+)/);return D?D[1]:"Anonymous function: "+T}L.getFunctionName=I},22948:function(ut){ut.exports=function(x){return!x||typeof x=="string"?!1:x instanceof Array||Array.isArray(x)||x.length>=0&&(x.splice instanceof Function||Object.getOwnPropertyDescriptor(x,x.length-1)&&x.constructor.name!=="String")}},79628:function(ut){function L(x,y,P){switch(P.length){case 0:return x.call(y);case 1:return x.call(y,P[0]);case 2:return x.call(y,P[0],P[1]);case 3:return x.call(y,P[0],P[1],P[2])}return x.apply(y,P)}ut.exports=L},84271:function(ut,L,x){var y=x(17424);function P(N,w){var E=N==null?0:N.length;return!!E&&y(N,w,0)>-1}ut.exports=P},94874:function(ut){function L(x,y,P){for(var N=-1,w=x==null?0:x.length;++N<w;)if(P(y,x[N]))return!0;return!1}ut.exports=L},99861:function(ut){function L(x,y,P,N){var w=-1,E=x==null?0:x.length;for(N&&E&&(P=x[++w]);++w<E;)P=y(P,x[w],w,x);return P}ut.exports=L},26539:function(ut,L,x){var y=x(22310),P=y("length");ut.exports=P},89135:function(ut,L,x){var y=x(42813),P=x(43607);function N(w,E,A){(A!==void 0&&!P(w[E],A)||A===void 0&&!(E in w))&&y(w,E,A)}ut.exports=N},2659:function(ut,L,x){var y=x(45029);function P(N,w,E){for(var A=-1,O=N.length;++A<O;){var I=N[A],C=w(I);if(C!=null&&(T===void 0?C===C&&!y(C):E(C,T)))var T=C,D=I}return D}ut.exports=P},32872:function(ut,L,x){var y=x(44107);function P(N,w){var E=[];return y(N,function(A,O,I){w(A,O,I)&&E.push(A)}),E}ut.exports=P},51533:function(ut){function L(x,y,P,N){for(var w=x.length,E=P+(N?1:-1);N?E--:++E<w;)if(y(x[E],E,x))return E;return-1}ut.exports=L},9256:function(ut,L,x){var y=x(57095),P=x(88133);function N(w,E,A,O,I){var C=-1,T=w.length;for(A||(A=P),I||(I=[]);++C<T;){var D=w[C];E>0&&A(D)?E>1?N(D,E-1,A,O,I):y(I,D):O||(I[I.length]=D)}return I}ut.exports=N},40302:function(ut){function L(x,y){return x>y}ut.exports=L},3251:function(ut){var L=Object.prototype,x=L.hasOwnProperty;function y(P,N){return P!=null&&x.call(P,N)}ut.exports=y},17424:function(ut,L,x){var y=x(51533),P=x(8373),N=x(49237);function w(E,A,O){return A===A?N(E,A,O):y(E,P,O)}ut.exports=w},8373:function(ut){function L(x){return x!==x}ut.exports=L},93757:function(ut){function L(x,y){return x<y}ut.exports=L},50097:function(ut,L,x){var y=x(91866),P=x(89135),N=x(14018),w=x(23585),E=x(20816),A=x(56730),O=x(47052);function I(C,T,D,B,G){C!==T&&N(T,function(k,U){if(G||(G=new y),E(k))w(C,T,U,D,I,B,G);else{var Y=B?B(O(C,U),k,U+"",C,T,G):void 0;Y===void 0&&(Y=k),P(C,U,Y)}},A)}ut.exports=I},23585:function(ut,L,x){var y=x(89135),P=x(32315),N=x(78358),w=x(47760),E=x(4084),A=x(13053),O=x(80744),I=x(41590),C=x(57835),T=x(9363),D=x(20816),B=x(19308),G=x(18397),k=x(47052),U=x(20480);function Y(K,J,q,X,j,Q,lt){var z=k(K,q),b=k(J,q),v=lt.get(b);if(v){y(K,q,v);return}var $=Q?Q(z,b,q+"",K,J,lt):void 0,et=$===void 0;if(et){var Z=O(b),pt=!Z&&C(b),_t=!Z&&!pt&&G(b);$=b,Z||pt||_t?O(z)?$=z:I(z)?$=w(z):pt?(et=!1,$=P(b,!0)):_t?(et=!1,$=N(b,!0)):$=[]:B(b)||A(b)?($=z,A(z)?$=U(z):(!D(z)||T(z))&&($=E(b))):et=!1}et&&(lt.set(b,$),j($,b,X,Q,lt),lt.delete(b)),y(K,q,$)}ut.exports=Y},58506:function(ut,L,x){var y=x(75010),P=x(89147),N=x(95979),w=x(65487),E=x(33065),A=x(38342),O=x(11249),I=x(46962),C=x(80744);function T(D,B,G){B.length?B=y(B,function(Y){return C(Y)?function(K){return P(K,Y.length===1?Y[0]:Y)}:Y}):B=[I];var k=-1;B=y(B,A(N));var U=w(D,function(Y,K,J){var q=y(B,function(X){return X(Y)});return{criteria:q,index:++k,value:Y}});return E(U,function(Y,K){return O(Y,K,G)})}ut.exports=T},88832:function(ut,L,x){var y=x(10867),P=x(37879);function N(w,E){return y(w,E,function(A,O){return P(w,O)})}ut.exports=N},10867:function(ut,L,x){var y=x(89147),P=x(36897),N=x(1186);function w(E,A,O){for(var I=-1,C=A.length,T={};++I<C;){var D=A[I],B=y(E,D);O(B,D)&&P(T,N(D,E),B)}return T}ut.exports=w},36121:function(ut){var L=Math.ceil,x=Math.max;function y(P,N,w,E){for(var A=-1,O=x(L((N-P)/(w||1)),0),I=Array(O);O--;)I[E?O:++A]=P,P+=w;return I}ut.exports=y},30739:function(ut){function L(x,y,P,N,w){return w(x,function(E,A,O){P=N?(N=!1,E):y(P,E,A,O)}),P}ut.exports=L},92918:function(ut,L,x){var y=x(46962),P=x(19652),N=x(71152);function w(E,A){return N(P(E,A,y),E+"")}ut.exports=w},36897:function(ut,L,x){var y=x(60348),P=x(1186),N=x(70213),w=x(20816),E=x(9171);function A(O,I,C,T){if(!w(O))return O;I=P(I,O);for(var D=-1,B=I.length,G=B-1,k=O;k!=null&&++D<B;){var U=E(I[D]),Y=C;if(U==="__proto__"||U==="constructor"||U==="prototype")return O;if(D!=G){var K=k[U];Y=T?T(K,U,k):void 0,Y===void 0&&(Y=w(K)?K:N(I[D+1])?[]:{})}y(k,U,Y),k=k[U]}return O}ut.exports=A},63989:function(ut,L,x){var y=x(13503),P=x(35234),N=x(46962),w=P?function(E,A){return P(E,"toString",{configurable:!0,enumerable:!1,value:y(A),writable:!0})}:N;ut.exports=w},33065:function(ut){function L(x,y){var P=x.length;for(x.sort(y);P--;)x[P]=x[P].value;return x}ut.exports=L},29098:function(ut,L,x){var y=x(98924),P=x(84271),N=x(94874),w=x(1931),E=x(47506),A=x(79679),O=200;function I(C,T,D){var B=-1,G=P,k=C.length,U=!0,Y=[],K=Y;if(D)U=!1,G=N;else if(k>=O){var J=T?null:E(C);if(J)return A(J);U=!1,G=w,K=new y}else K=T?[]:Y;t:for(;++B<k;){var q=C[B],X=T?T(q):q;if(q=D||q!==0?q:0,U&&X===X){for(var j=K.length;j--;)if(K[j]===X)continue t;T&&K.push(X),Y.push(q)}else G(K,X,D)||(K!==Y&&K.push(X),Y.push(q))}return Y}ut.exports=I},20720:function(ut,L,x){var y=x(75010);function P(N,w){return y(w,function(E){return N[E]})}ut.exports=P},94484:function(ut){function L(x,y,P){for(var N=-1,w=x.length,E=y.length,A={};++N<w;){var O=N<E?y[N]:void 0;P(A,x[N],O)}return A}ut.exports=L},83018:function(ut,L,x){var y=x(45029);function P(N,w){if(N!==w){var E=N!==void 0,A=N===null,O=N===N,I=y(N),C=w!==void 0,T=w===null,D=w===w,B=y(w);if(!T&&!B&&!I&&N>w||I&&C&&D&&!T&&!B||A&&C&&D||!E&&D||!O)return 1;if(!A&&!I&&!B&&N<w||B&&E&&O&&!A&&!I||T&&E&&O||!C&&O||!D)return-1}return 0}ut.exports=P},11249:function(ut,L,x){var y=x(83018);function P(N,w,E){for(var A=-1,O=N.criteria,I=w.criteria,C=O.length,T=E.length;++A<C;){var D=y(O[A],I[A]);if(D){if(A>=T)return D;var B=E[A];return D*(B=="desc"?-1:1)}}return N.index-w.index}ut.exports=P},63323:function(ut,L,x){var y=x(92918),P=x(8138);function N(w){return y(function(E,A){var O=-1,I=A.length,C=I>1?A[I-1]:void 0,T=I>2?A[2]:void 0;for(C=w.length>3&&typeof C=="function"?(I--,C):void 0,T&&P(A[0],A[1],T)&&(C=I<3?void 0:C,I=1),E=Object(E);++O<I;){var D=A[O];D&&w(E,D,O,C)}return E})}ut.exports=N},19554:function(ut,L,x){var y=x(95979),P=x(24665),N=x(55451);function w(E){return function(A,O,I){var C=Object(A);if(!P(A)){var T=y(O,3);A=N(A),O=function(B){return T(C[B],B,C)}}var D=E(A,O,I);return D>-1?C[T?A[D]:D]:void 0}}ut.exports=w},76106:function(ut,L,x){var y=x(36121),P=x(8138),N=x(97341);function w(E){return function(A,O,I){return I&&typeof I!="number"&&P(A,O,I)&&(O=I=void 0),A=N(A),O===void 0?(O=A,A=0):O=N(O),I=I===void 0?A<O?1:-1:N(I),y(A,O,I,E)}}ut.exports=w},47506:function(ut,L,x){var y=x(23599),P=x(9958),N=x(79679),w=1/0,E=y&&1/N(new y([,-0]))[1]==w?function(A){return new y(A)}:P;ut.exports=E},522:function(ut,L,x){var y=x(40151),P=x(19652),N=x(71152);function w(E){return N(P(E,void 0,y),E+"")}ut.exports=w},55015:function(ut){var L="\\ud800-\\udfff",x="\\u0300-\\u036f",y="\\ufe20-\\ufe2f",P="\\u20d0-\\u20ff",N=x+y+P,w="\\ufe0e\\ufe0f",E="\\u200d",A=RegExp("["+E+L+N+w+"]");function O(I){return A.test(I)}ut.exports=O},88133:function(ut,L,x){var y=x(91869),P=x(13053),N=x(80744),w=y?y.isConcatSpreadable:void 0;function E(A){return N(A)||P(A)||!!(w&&A&&A[w])}ut.exports=E},8138:function(ut,L,x){var y=x(43607),P=x(24665),N=x(70213),w=x(20816);function E(A,O,I){if(!w(I))return!1;var C=typeof O;return(C=="number"?P(I)&&N(O,I.length):C=="string"&&O in I)?y(I[O],A):!1}ut.exports=E},19652:function(ut,L,x){var y=x(79628),P=Math.max;function N(w,E,A){return E=P(E===void 0?w.length-1:E,0),function(){for(var O=arguments,I=-1,C=P(O.length-E,0),T=Array(C);++I<C;)T[I]=O[E+I];I=-1;for(var D=Array(E+1);++I<E;)D[I]=O[I];return D[E]=A(T),y(w,this,D)}}ut.exports=N},47052:function(ut){function L(x,y){if(!(y==="constructor"&&typeof x[y]=="function")&&y!="__proto__")return x[y]}ut.exports=L},71152:function(ut,L,x){var y=x(63989),P=x(78437),N=P(y);ut.exports=N},78437:function(ut){var L=800,x=16,y=Date.now;function P(N){var w=0,E=0;return function(){var A=y(),O=x-(A-E);if(E=A,O>0){if(++w>=L)return arguments[0]}else w=0;return N.apply(void 0,arguments)}}ut.exports=P},49237:function(ut){function L(x,y,P){for(var N=P-1,w=x.length;++N<w;)if(x[N]===y)return N;return-1}ut.exports=L},29405:function(ut,L,x){var y=x(26539),P=x(55015),N=x(60844);function w(E){return P(E)?N(E):y(E)}ut.exports=w},60844:function(ut){var L="\\ud800-\\udfff",x="\\u0300-\\u036f",y="\\ufe20-\\ufe2f",P="\\u20d0-\\u20ff",N=x+y+P,w="\\ufe0e\\ufe0f",E="["+L+"]",A="["+N+"]",O="\\ud83c[\\udffb-\\udfff]",I="(?:"+A+"|"+O+")",C="[^"+L+"]",T="(?:\\ud83c[\\udde6-\\uddff]){2}",D="[\\ud800-\\udbff][\\udc00-\\udfff]",B="\\u200d",G=I+"?",k="["+w+"]?",U="(?:"+B+"(?:"+[C,T,D].join("|")+")"+k+G+")*",Y=k+G+U,K="(?:"+[C+A+"?",A,T,D,E].join("|")+")",J=RegExp(O+"(?="+O+")|"+K+Y,"g");function q(X){for(var j=J.lastIndex=0;J.test(X);)++j;return j}ut.exports=q},76833:function(ut,L,x){var y=x(99045),P=4;function N(w){return y(w,P)}ut.exports=N},13503:function(ut){function L(x){return function(){return x}}ut.exports=L},28548:function(ut,L,x){var y=x(92918),P=x(43607),N=x(8138),w=x(56730),E=Object.prototype,A=E.hasOwnProperty,O=y(function(I,C){I=Object(I);var T=-1,D=C.length,B=D>2?C[2]:void 0;for(B&&N(C[0],C[1],B)&&(D=1);++T<D;)for(var G=C[T],k=w(G),U=-1,Y=k.length;++U<Y;){var K=k[U],J=I[K];(J===void 0||P(J,E[K])&&!A.call(I,K))&&(I[K]=G[K])}return I});ut.exports=O},76934:function(ut,L,x){ut.exports=x(99204)},64725:function(ut,L,x){var y=x(86952),P=x(32872),N=x(95979),w=x(80744);function E(A,O){var I=w(A)?y:P;return I(A,N(O,3))}ut.exports=E},79785:function(ut,L,x){var y=x(19554),P=x(9991),N=y(P);ut.exports=N},9991:function(ut,L,x){var y=x(51533),P=x(95979),N=x(12824),w=Math.max;function E(A,O,I){var C=A==null?0:A.length;if(!C)return-1;var T=I==null?0:N(I);return T<0&&(T=w(C+T,0)),y(A,P(O,3),T)}ut.exports=E},40151:function(ut,L,x){var y=x(9256);function P(N){var w=N==null?0:N.length;return w?y(N,1):[]}ut.exports=P},99204:function(ut,L,x){var y=x(74809),P=x(44107),N=x(11756),w=x(80744);function E(A,O){var I=w(A)?y:P;return I(A,N(O))}ut.exports=E},23190:function(ut,L,x){var y=x(14018),P=x(11756),N=x(56730);function w(E,A){return E==null?E:y(E,P(A),N)}ut.exports=w},99946:function(ut,L,x){var y=x(3251),P=x(63100);function N(w,E){return w!=null&&P(w,E,y)}ut.exports=N},41590:function(ut,L,x){var y=x(24665),P=x(93913);function N(w){return P(w)&&y(w)}ut.exports=N},61627:function(ut,L,x){var y=x(6019),P=x(66139),N=x(13053),w=x(80744),E=x(24665),A=x(57835),O=x(7975),I=x(18397),C="[object Map]",T="[object Set]",D=Object.prototype,B=D.hasOwnProperty;function G(k){if(k==null)return!0;if(E(k)&&(w(k)||typeof k=="string"||typeof k.splice=="function"||A(k)||I(k)||N(k)))return!k.length;var U=P(k);if(U==C||U==T)return!k.size;if(O(k))return!y(k).length;for(var Y in k)if(B.call(k,Y))return!1;return!0}ut.exports=G},16513:function(ut){function L(x){return x===void 0}ut.exports=L},10611:function(ut){function L(x){var y=x==null?0:x.length;return y?x[y-1]:void 0}ut.exports=L},70642:function(ut,L,x){var y=x(42813),P=x(1585),N=x(95979);function w(E,A){var O={};return A=N(A,3),P(E,function(I,C,T){y(O,C,A(I,C,T))}),O}ut.exports=w},95987:function(ut,L,x){var y=x(2659),P=x(40302),N=x(46962);function w(E){return E&&E.length?y(E,N,P):void 0}ut.exports=w},28440:function(ut,L,x){var y=x(50097),P=x(63323),N=P(function(w,E,A){y(w,E,A)});ut.exports=N},73376:function(ut,L,x){var y=x(2659),P=x(93757),N=x(46962);function w(E){return E&&E.length?y(E,N,P):void 0}ut.exports=w},83296:function(ut,L,x){var y=x(2659),P=x(95979),N=x(93757);function w(E,A){return E&&E.length?y(E,P(A,2),N):void 0}ut.exports=w},9958:function(ut){function L(){}ut.exports=L},89409:function(ut,L,x){var y=x(88832),P=x(522),N=P(function(w,E){return w==null?{}:y(w,E)});ut.exports=N},60859:function(ut,L,x){var y=x(76106),P=y();ut.exports=P},16473:function(ut,L,x){var y=x(99861),P=x(44107),N=x(95979),w=x(30739),E=x(80744);function A(O,I,C){var T=E(O)?y:w,D=arguments.length<3;return T(O,N(I,4),C,D,P)}ut.exports=A},40617:function(ut,L,x){var y=x(6019),P=x(66139),N=x(24665),w=x(7941),E=x(29405),A="[object Map]",O="[object Set]";function I(C){if(C==null)return 0;if(N(C))return w(C)?E(C):C.length;var T=P(C);return T==A||T==O?C.size:y(C).length}ut.exports=I},351:function(ut,L,x){var y=x(9256),P=x(58506),N=x(92918),w=x(8138),E=N(function(A,O){if(A==null)return[];var I=O.length;return I>1&&w(A,O[0],O[1])?O=[]:I>2&&w(O[0],O[1],O[2])&&(O=[O[0]]),P(A,y(O,1),[])});ut.exports=E},97341:function(ut,L,x){var y=x(20168),P=1/0,N=17976931348623157e292;function w(E){if(!E)return E===0?E:0;if(E=y(E),E===P||E===-P){var A=E<0?-1:1;return A*N}return E===E?E:0}ut.exports=w},12824:function(ut,L,x){var y=x(97341);function P(N){var w=y(N),E=w%1;return w===w?E?w-E:w:0}ut.exports=P},20480:function(ut,L,x){var y=x(95378),P=x(56730);function N(w){return y(w,P(w))}ut.exports=N},91116:function(ut,L,x){var y=x(74809),P=x(35024),N=x(1585),w=x(95979),E=x(49217),A=x(80744),O=x(57835),I=x(9363),C=x(20816),T=x(18397);function D(B,G,k){var U=A(B),Y=U||O(B)||T(B);if(G=w(G,4),k==null){var K=B&&B.constructor;Y?k=U?new K:[]:C(B)?k=I(K)?P(E(B)):{}:k={}}return(Y?y:N)(B,function(J,q,X){return G(k,J,q,X)}),k}ut.exports=D},44065:function(ut,L,x){var y=x(9256),P=x(92918),N=x(29098),w=x(41590),E=P(function(A){return N(y(A,1,w,!0))});ut.exports=E},95708:function(ut,L,x){var y=x(44140),P=0;function N(w){var E=++P;return y(w)+E}ut.exports=N},81229:function(ut,L,x){var y=x(20720),P=x(55451);function N(w){return w==null?[]:y(w,P(w))}ut.exports=N},65441:function(ut,L,x){var y=x(60348),P=x(94484);function N(w,E){return P(w||[],E||[],y)}ut.exports=N},15820:function(ut){"use strict";var L=ut.exports;ut.exports.isNumber=function(x){return typeof x=="number"},ut.exports.findMin=function(x){if(x.length===0)return Infinity;for(var y=x[0],P=1;P<x.length;P++)y=Math.min(y,x[P]);return y},ut.exports.findMax=function(x){if(x.length===0)return-Infinity;for(var y=x[0],P=1;P<x.length;P++)y=Math.max(y,x[P]);return y},ut.exports.findMinMulti=function(x){for(var y=L.findMin(x[0]),P=1;P<x.length;P++)y=Math.min(y,L.findMin(x[P]));return y},ut.exports.findMaxMulti=function(x){for(var y=L.findMax(x[0]),P=1;P<x.length;P++)y=Math.max(y,L.findMax(x[P]));return y},ut.exports.inside=function(x,y,P){return x<=P&&P<=y}},89081:function(ut,L,x){"use strict";var y=50,P=2,N=Math.log(2),w=ut.exports,E=x(15820);function A(I){return 1-Math.abs(I)}ut.exports.getUnifiedMinMax=function(I,C){return w.getUnifiedMinMaxMulti([I],C)},ut.exports.getUnifiedMinMaxMulti=function(I,C){C=C||{};var T=!1,D=!1,B=E.isNumber(C.width)?C.width:P,G=E.isNumber(C.size)?C.size:y,k=E.isNumber(C.min)?C.min:(T=!0,E.findMinMulti(I)),U=E.isNumber(C.max)?C.max:(D=!0,E.findMaxMulti(I)),Y=U-k,K=Y/(G-1);return T&&(k=k-2*B*K),D&&(U=U+2*B*K),{min:k,max:U}},ut.exports.create=function(I,C){if(C=C||{},!I||I.length===0)return[];var T=E.isNumber(C.size)?C.size:y,D=E.isNumber(C.width)?C.width:P,B=w.getUnifiedMinMax(I,{size:T,width:D,min:C.min,max:C.max}),G=B.min,k=B.max,U=k-G,Y=U/(T-1);if(U===0)return[{x:G,y:1}];for(var K=[],J=0;J<T;J++)K.push({x:G+J*Y,y:0});var q=function($){return Math.floor(($-G)/Y)},X=O(A,D),j=X[D],Q=X[D-1]-X[D-2],lt=0;I.forEach(function($){var et=q($);if(!(et+D<0||et-D>=K.length)){var Z=Math.max(et-D,0),pt=et,_t=Math.min(et+D,K.length-1),It=Z-(et-D),Rt=et+D-_t,H=X[-D-1+It]||0,ot=X[-D-1+Rt]||0,St=j/(j-H-ot);It>0&&(lt+=St*(It-1)*Q);var Ut=Math.max(0,et-D+1);E.inside(0,K.length-1,Ut)&&(K[Ut].y+=St*1*Q),E.inside(0,K.length-1,pt+1)&&(K[pt+1].y-=St*2*Q),E.inside(0,K.length-1,_t+1)&&(K[_t+1].y+=St*1*Q)}});var z=lt,b=0,v=0;return K.forEach(function($){b+=$.y,z+=b,$.y=z,v+=z}),v>0&&K.forEach(function($){$.y/=v}),K};function O(I,C){for(var T={},D=0,B=-C;B<=C;B++)D+=I(B/C),T[B]=D;return T}ut.exports.getExpectedValueFromPdf=function(I){if(!(!I||I.length===0)){var C=0;return I.forEach(function(T){C+=T.x*T.y}),C}},ut.exports.getXWithLeftTailArea=function(I,C){if(!(!I||I.length===0)){for(var T=0,D=0,B=0;B<I.length&&(D=B,T+=I[B].y,!(T>=C));B++);return I[D].x}},ut.exports.getPerplexity=function(I){if(!(!I||I.length===0)){var C=0;return I.forEach(function(T){var D=Math.log(T.y);isFinite(D)&&(C+=T.y*D)}),C=-C/N,Math.pow(2,C)}}},91739:function(ut,L,x){var y=x(45229),P=x(96765),N=x(95927),w=x(24186),E=x(6064),A=[0,0];ut.exports.x7=function(I,C,T,D,B){return y(I,T,D),N(I,I),P(C,-I[1],I[0]),P(A,-T[1],T[0]),B/E(C,A)},ut.exports.mJ=function(I,C){return P(I,-C[1],C[0]),I},ut.exports.o7=function(I,C,T){return w(I,C,T),N(I,I),I}},78892:function(ut,L,x){var y=x(97671);/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var P;(function(N){(function(w){var E=typeof x.g=="object"?x.g:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),A=O(N);typeof E.Reflect=="undefined"?E.Reflect=N:A=O(E.Reflect,A),w(A);function O(I,C){return function(T,D){typeof I[T]!="function"&&Object.defineProperty(I,T,{configurable:!0,writable:!0,value:D}),C&&C(T,D)}}})(function(w){var E=Object.prototype.hasOwnProperty,A=typeof Symbol=="function",O=A&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",I=A&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",C=typeof Object.create=="function",T={__proto__:[]}instanceof Array,D=!C&&!T,B={create:C?function(){return Ie(Object.create(null))}:T?function(){return Ie({__proto__:null})}:function(){return Ie({})},has:D?function(Gt,Wt){return E.call(Gt,Wt)}:function(Gt,Wt){return Wt in Gt},get:D?function(Gt,Wt){return E.call(Gt,Wt)?Gt[Wt]:void 0}:function(Gt,Wt){return Gt[Wt]}},G=Object.getPrototypeOf(Function),k=typeof y=="object"&&{NODE_ENV:"production"}&&{NODE_ENV:"production"}.REFLECT_METADATA_USE_MAP_POLYFILL==="true",U=!k&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:yt(),Y=!k&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:zt(),K=!k&&typeof WeakMap=="function"?WeakMap:oe(),J=new K;function q(Gt,Wt,Ht,de){if(wt(Ht)){if(!ct(Gt))throw new TypeError;if(!tt(Wt))throw new TypeError;return Z(Gt,Wt)}else{if(!ct(Gt))throw new TypeError;if(!Pt(Wt))throw new TypeError;if(!Pt(de)&&!wt(de)&&!ft(de))throw new TypeError;return ft(de)&&(de=void 0),Ht=rt(Ht),pt(Gt,Wt,Ht,de)}}w("decorate",q);function X(Gt,Wt){function Ht(de,Ge){if(!Pt(de))throw new TypeError;if(!wt(Ge)&&!dt(Ge))throw new TypeError;St(Gt,Wt,de,Ge)}return Ht}w("metadata",X);function j(Gt,Wt,Ht,de){if(!Pt(Ht))throw new TypeError;return wt(de)||(de=rt(de)),St(Gt,Wt,Ht,de)}w("defineMetadata",j);function Q(Gt,Wt,Ht){if(!Pt(Wt))throw new TypeError;return wt(Ht)||(Ht=rt(Ht)),It(Gt,Wt,Ht)}w("hasMetadata",Q);function lt(Gt,Wt,Ht){if(!Pt(Wt))throw new TypeError;return wt(Ht)||(Ht=rt(Ht)),Rt(Gt,Wt,Ht)}w("hasOwnMetadata",lt);function z(Gt,Wt,Ht){if(!Pt(Wt))throw new TypeError;return wt(Ht)||(Ht=rt(Ht)),H(Gt,Wt,Ht)}w("getMetadata",z);function b(Gt,Wt,Ht){if(!Pt(Wt))throw new TypeError;return wt(Ht)||(Ht=rt(Ht)),ot(Gt,Wt,Ht)}w("getOwnMetadata",b);function v(Gt,Wt){if(!Pt(Gt))throw new TypeError;return wt(Wt)||(Wt=rt(Wt)),Ut(Gt,Wt)}w("getMetadataKeys",v);function $(Gt,Wt){if(!Pt(Gt))throw new TypeError;return wt(Wt)||(Wt=rt(Wt)),ae(Gt,Wt)}w("getOwnMetadataKeys",$);function et(Gt,Wt,Ht){if(!Pt(Wt))throw new TypeError;wt(Ht)||(Ht=rt(Ht));var de=_t(Wt,Ht,!1);if(wt(de)||!de.delete(Gt))return!1;if(de.size>0)return!0;var Ge=J.get(Wt);return Ge.delete(Ht),Ge.size>0||J.delete(Wt),!0}w("deleteMetadata",et);function Z(Gt,Wt){for(var Ht=Gt.length-1;Ht>=0;--Ht){var de=Gt[Ht],Ge=de(Wt);if(!wt(Ge)&&!ft(Ge)){if(!tt(Ge))throw new TypeError;Wt=Ge}}return Wt}function pt(Gt,Wt,Ht,de){for(var Ge=Gt.length-1;Ge>=0;--Ge){var Re=Gt[Ge],Ke=Re(Wt,Ht,de);if(!wt(Ke)&&!ft(Ke)){if(!Pt(Ke))throw new TypeError;de=Ke}}return de}function _t(Gt,Wt,Ht){var de=J.get(Gt);if(wt(de)){if(!Ht)return;de=new U,J.set(Gt,de)}var Ge=de.get(Wt);if(wt(Ge)){if(!Ht)return;Ge=new U,de.set(Wt,Ge)}return Ge}function It(Gt,Wt,Ht){var de=Rt(Gt,Wt,Ht);if(de)return!0;var Ge=vt(Wt);return ft(Ge)?!1:It(Gt,Ge,Ht)}function Rt(Gt,Wt,Ht){var de=_t(Wt,Ht,!1);return wt(de)?!1:mt(de.has(Gt))}function H(Gt,Wt,Ht){var de=Rt(Gt,Wt,Ht);if(de)return ot(Gt,Wt,Ht);var Ge=vt(Wt);if(!ft(Ge))return H(Gt,Ge,Ht)}function ot(Gt,Wt,Ht){var de=_t(Wt,Ht,!1);if(!wt(de))return de.get(Gt)}function St(Gt,Wt,Ht,de){var Ge=_t(Ht,de,!0);Ge.set(Gt,Wt)}function Ut(Gt,Wt){var Ht=ae(Gt,Wt),de=vt(Gt);if(de===null)return Ht;var Ge=Ut(de,Wt);if(Ge.length<=0)return Ht;if(Ht.length<=0)return Ge;for(var Re=new Y,Ke=[],ze=0,Ce=Ht;ze<Ce.length;ze++){var dr=Ce[ze],sr=Re.has(dr);sr||(Re.add(dr),Ke.push(dr))}for(var Tr=0,qr=Ge;Tr<qr.length;Tr++){var dr=qr[Tr],sr=Re.has(dr);sr||(Re.add(dr),Ke.push(dr))}return Ke}function ae(Gt,Wt){var Ht=[],de=_t(Gt,Wt,!1);if(wt(de))return Ht;for(var Ge=de.keys(),Re=Ot(Ge),Ke=0;;){var ze=st(Re);if(!ze)return Ht.length=Ke,Ht;var Ce=$t(ze);try{Ht[Ke]=Ce}catch(dr){try{Qt(Re)}finally{throw dr}}Ke++}}function bt(Gt){if(Gt===null)return 1;switch(typeof Gt){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Gt===null?1:6;default:return 6}}function wt(Gt){return Gt===void 0}function ft(Gt){return Gt===null}function ht(Gt){return typeof Gt=="symbol"}function Pt(Gt){return typeof Gt=="object"?Gt!==null:typeof Gt=="function"}function Lt(Gt,Wt){switch(bt(Gt)){case 0:return Gt;case 1:return Gt;case 2:return Gt;case 3:return Gt;case 4:return Gt;case 5:return Gt}var Ht=Wt===3?"string":Wt===5?"number":"default",de=Et(Gt,O);if(de!==void 0){var Ge=de.call(Gt,Ht);if(Pt(Ge))throw new TypeError;return Ge}return jt(Gt,Ht==="default"?"number":Ht)}function jt(Gt,Wt){if(Wt==="string"){var Ht=Gt.toString;if(At(Ht)){var de=Ht.call(Gt);if(!Pt(de))return de}var Ge=Gt.valueOf;if(At(Ge)){var de=Ge.call(Gt);if(!Pt(de))return de}}else{var Ge=Gt.valueOf;if(At(Ge)){var de=Ge.call(Gt);if(!Pt(de))return de}var Re=Gt.toString;if(At(Re)){var de=Re.call(Gt);if(!Pt(de))return de}}throw new TypeError}function mt(Gt){return!!Gt}function W(Gt){return""+Gt}function rt(Gt){var Wt=Lt(Gt,3);return ht(Wt)?Wt:W(Wt)}function ct(Gt){return Array.isArray?Array.isArray(Gt):Gt instanceof Object?Gt instanceof Array:Object.prototype.toString.call(Gt)==="[object Array]"}function At(Gt){return typeof Gt=="function"}function tt(Gt){return typeof Gt=="function"}function dt(Gt){switch(bt(Gt)){case 3:return!0;case 4:return!0;default:return!1}}function Et(Gt,Wt){var Ht=Gt[Wt];if(Ht!=null){if(!At(Ht))throw new TypeError;return Ht}}function Ot(Gt){var Wt=Et(Gt,I);if(!At(Wt))throw new TypeError;var Ht=Wt.call(Gt);if(!Pt(Ht))throw new TypeError;return Ht}function $t(Gt){return Gt.value}function st(Gt){var Wt=Gt.next();return Wt.done?!1:Wt}function Qt(Gt){var Wt=Gt.return;Wt&&Wt.call(Gt)}function vt(Gt){var Wt=Object.getPrototypeOf(Gt);if(typeof Gt!="function"||Gt===G||Wt!==G)return Wt;var Ht=Gt.prototype,de=Ht&&Object.getPrototypeOf(Ht);if(de==null||de===Object.prototype)return Wt;var Ge=de.constructor;return typeof Ge!="function"||Ge===Gt?Wt:Ge}function yt(){var Gt={},Wt=[],Ht=function(){function Ke(ze,Ce,dr){this._index=0,this._keys=ze,this._values=Ce,this._selector=dr}return Ke.prototype["@@iterator"]=function(){return this},Ke.prototype[I]=function(){return this},Ke.prototype.next=function(){var ze=this._index;if(ze>=0&&ze<this._keys.length){var Ce=this._selector(this._keys[ze],this._values[ze]);return ze+1>=this._keys.length?(this._index=-1,this._keys=Wt,this._values=Wt):this._index++,{value:Ce,done:!1}}return{value:void 0,done:!0}},Ke.prototype.throw=function(ze){throw this._index>=0&&(this._index=-1,this._keys=Wt,this._values=Wt),ze},Ke.prototype.return=function(ze){return this._index>=0&&(this._index=-1,this._keys=Wt,this._values=Wt),{value:ze,done:!0}},Ke}();return function(){function Ke(){this._keys=[],this._values=[],this._cacheKey=Gt,this._cacheIndex=-2}return Object.defineProperty(Ke.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Ke.prototype.has=function(ze){return this._find(ze,!1)>=0},Ke.prototype.get=function(ze){var Ce=this._find(ze,!1);return Ce>=0?this._values[Ce]:void 0},Ke.prototype.set=function(ze,Ce){var dr=this._find(ze,!0);return this._values[dr]=Ce,this},Ke.prototype.delete=function(ze){var Ce=this._find(ze,!1);if(Ce>=0){for(var dr=this._keys.length,sr=Ce+1;sr<dr;sr++)this._keys[sr-1]=this._keys[sr],this._values[sr-1]=this._values[sr];return this._keys.length--,this._values.length--,ze===this._cacheKey&&(this._cacheKey=Gt,this._cacheIndex=-2),!0}return!1},Ke.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Gt,this._cacheIndex=-2},Ke.prototype.keys=function(){return new Ht(this._keys,this._values,de)},Ke.prototype.values=function(){return new Ht(this._keys,this._values,Ge)},Ke.prototype.entries=function(){return new Ht(this._keys,this._values,Re)},Ke.prototype["@@iterator"]=function(){return this.entries()},Ke.prototype[I]=function(){return this.entries()},Ke.prototype._find=function(ze,Ce){return this._cacheKey!==ze&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=ze)),this._cacheIndex<0&&Ce&&(this._cacheIndex=this._keys.length,this._keys.push(ze),this._values.push(void 0)),this._cacheIndex},Ke}();function de(Ke,ze){return Ke}function Ge(Ke,ze){return ze}function Re(Ke,ze){return[Ke,ze]}}function zt(){return function(){function Gt(){this._map=new U}return Object.defineProperty(Gt.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Gt.prototype.has=function(Wt){return this._map.has(Wt)},Gt.prototype.add=function(Wt){return this._map.set(Wt,Wt),this},Gt.prototype.delete=function(Wt){return this._map.delete(Wt)},Gt.prototype.clear=function(){this._map.clear()},Gt.prototype.keys=function(){return this._map.keys()},Gt.prototype.values=function(){return this._map.values()},Gt.prototype.entries=function(){return this._map.entries()},Gt.prototype["@@iterator"]=function(){return this.keys()},Gt.prototype[I]=function(){return this.keys()},Gt}()}function oe(){var Gt=16,Wt=B.create(),Ht=de();return function(){function Ce(){this._key=de()}return Ce.prototype.has=function(dr){var sr=Ge(dr,!1);return sr!==void 0?B.has(sr,this._key):!1},Ce.prototype.get=function(dr){var sr=Ge(dr,!1);return sr!==void 0?B.get(sr,this._key):void 0},Ce.prototype.set=function(dr,sr){var Tr=Ge(dr,!0);return Tr[this._key]=sr,this},Ce.prototype.delete=function(dr){var sr=Ge(dr,!1);return sr!==void 0?delete sr[this._key]:!1},Ce.prototype.clear=function(){this._key=de()},Ce}();function de(){var Ce;do Ce="@@WeakMap@@"+ze();while(B.has(Wt,Ce));return Wt[Ce]=!0,Ce}function Ge(Ce,dr){if(!E.call(Ce,Ht)){if(!dr)return;Object.defineProperty(Ce,Ht,{value:B.create()})}return Ce[Ht]}function Re(Ce,dr){for(var sr=0;sr<dr;++sr)Ce[sr]=Math.random()*255|0;return Ce}function Ke(Ce){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(Ce)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(Ce)):Re(new Uint8Array(Ce),Ce):Re(new Array(Ce),Ce)}function ze(){var Ce=Ke(Gt);Ce[6]=Ce[6]&79|64,Ce[8]=Ce[8]&191|128;for(var dr="",sr=0;sr<Gt;++sr){var Tr=Ce[sr];(sr===4||sr===6||sr===8)&&(dr+="-"),Tr<16&&(dr+="0"),dr+=Tr.toString(16).toLowerCase()}return dr}}function Ie(Gt){return Gt.__=void 0,delete Gt.__,Gt}})})(P||(P={}))},96377:function(ut){(function(L,x){ut.exports=x()})(this,function(){"use strict";var L=function(it){return it instanceof Uint8Array||it instanceof Uint16Array||it instanceof Uint32Array||it instanceof Int8Array||it instanceof Int16Array||it instanceof Int32Array||it instanceof Float32Array||it instanceof Float64Array||it instanceof Uint8ClampedArray},x=function(it,Nt){for(var Yt=Object.keys(Nt),Me=0;Me<Yt.length;++Me)it[Yt[Me]]=Nt[Yt[Me]];return it},y=`
`;function P(it){return typeof atob!="undefined"?atob(it):"base64:"+it}function N(it){var Nt=new Error("(regl) "+it);throw console.error(Nt),Nt}function w(it,Nt){it||N(Nt)}function E(it){return it?": "+it:""}function A(it,Nt,Yt){it in Nt||N("unknown parameter ("+it+")"+E(Yt)+". possible values: "+Object.keys(Nt).join())}function O(it,Nt){L(it)||N("invalid parameter type"+E(Nt)+". must be a typed array")}function I(it,Nt){switch(Nt){case"number":return typeof it=="number";case"object":return typeof it=="object";case"string":return typeof it=="string";case"boolean":return typeof it=="boolean";case"function":return typeof it=="function";case"undefined":return typeof it=="undefined";case"symbol":return typeof it=="symbol"}}function C(it,Nt,Yt){I(it,Nt)||N("invalid parameter type"+E(Yt)+". expected "+Nt+", got "+typeof it)}function T(it,Nt){it>=0&&(it|0)===it||N("invalid parameter type, ("+it+")"+E(Nt)+". must be a nonnegative integer")}function D(it,Nt,Yt){Nt.indexOf(it)<0&&N("invalid value"+E(Yt)+". must be one of: "+Nt)}var B=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function G(it){Object.keys(it).forEach(function(Nt){B.indexOf(Nt)<0&&N('invalid regl constructor argument "'+Nt+'". must be one of '+B)})}function k(it,Nt){for(it=it+"";it.length<Nt;)it=" "+it;return it}function U(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function Y(it,Nt){this.number=it,this.line=Nt,this.errors=[]}function K(it,Nt,Yt){this.file=it,this.line=Nt,this.message=Yt}function J(){var it=new Error,Nt=(it.stack||it).toString(),Yt=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Nt);if(Yt)return Yt[1];var Me=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Nt);return Me?Me[1]:"unknown"}function q(){var it=new Error,Nt=(it.stack||it).toString(),Yt=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Nt);if(Yt)return Yt[1];var Me=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Nt);return Me?Me[1]:"unknown"}function X(it,Nt){var Yt=it.split(`
`),Me=1,Ne=0,Se={unknown:new U,0:new U};Se.unknown.name=Se[0].name=Nt||J(),Se.unknown.lines.push(new Y(0,""));for(var ce=0;ce<Yt.length;++ce){var $e=Yt[ce],qe=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec($e);if(qe)switch(qe[1]){case"line":var nr=/(\d+)(\s+\d+)?/.exec(qe[2]);nr&&(Me=nr[1]|0,nr[2]&&(Ne=nr[2]|0,Ne in Se||(Se[Ne]=new U)));break;case"define":var tr=/SHADER_NAME(_B64)?\s+(.*)$/.exec(qe[2]);tr&&(Se[Ne].name=tr[1]?P(tr[2]):tr[2]);break}Se[Ne].lines.push(new Y(Me++,$e))}return Object.keys(Se).forEach(function(or){var vr=Se[or];vr.lines.forEach(function(Qe){vr.index[Qe.number]=Qe})}),Se}function j(it){var Nt=[];return it.split(`
`).forEach(function(Yt){if(!(Yt.length<5)){var Me=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Yt);Me?Nt.push(new K(Me[1]|0,Me[2]|0,Me[3].trim())):Yt.length>0&&Nt.push(new K("unknown",0,Yt))}}),Nt}function Q(it,Nt){Nt.forEach(function(Yt){var Me=it[Yt.file];if(Me){var Ne=Me.index[Yt.line];if(Ne){Ne.errors.push(Yt),Me.hasErrors=!0;return}}it.unknown.hasErrors=!0,it.unknown.lines[0].errors.push(Yt)})}function lt(it,Nt,Yt,Me,Ne){if(!it.getShaderParameter(Nt,it.COMPILE_STATUS)){var Se=it.getShaderInfoLog(Nt),ce=Me===it.FRAGMENT_SHADER?"fragment":"vertex";pt(Yt,"string",ce+" shader source must be a string",Ne);var $e=X(Yt,Ne),qe=j(Se);Q($e,qe),Object.keys($e).forEach(function(nr){var tr=$e[nr];if(!tr.hasErrors)return;var or=[""],vr=[""];function Qe(lr,ge){or.push(lr),vr.push(ge||"")}Qe("file number "+nr+": "+tr.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),tr.lines.forEach(function(lr){if(lr.errors.length>0){Qe(k(lr.number,4)+"|  ","background-color:yellow; font-weight:bold"),Qe(lr.line+y,"color:red; background-color:yellow; font-weight:bold");var ge=0;lr.errors.forEach(function(Oe){var rr=Oe.message,yr=/^\s*'(.*)'\s*:\s*(.*)$/.exec(rr);if(yr){var Xe=yr[1];switch(rr=yr[2],Xe){case"assign":Xe="=";break}ge=Math.max(lr.line.indexOf(Xe,ge),0)}else ge=0;Qe(k("| ",6)),Qe(k("^^^",ge+3)+y,"font-weight:bold"),Qe(k("| ",6)),Qe(rr+y,"font-weight:bold")}),Qe(k("| ",6)+y)}else Qe(k(lr.number,4)+"|  "),Qe(lr.line+y,"color:red")}),typeof document!="undefined"&&!window.chrome?(vr[0]=or.join("%c"),console.log.apply(console,vr)):console.log(or.join(""))}),w.raise("Error compiling "+ce+" shader, "+$e[0].name)}}function z(it,Nt,Yt,Me,Ne){if(!it.getProgramParameter(Nt,it.LINK_STATUS)){var Se=it.getProgramInfoLog(Nt),ce=X(Yt,Ne),$e=X(Me,Ne),qe='Error linking program with vertex shader, "'+$e[0].name+'", and fragment shader "'+ce[0].name+'"';typeof document!="undefined"?console.log("%c"+qe+y+"%c"+Se,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(qe+y+Se),w.raise(qe)}}function b(it){it._commandRef=J()}function v(it,Nt,Yt,Me){b(it);function Ne(qe){return qe?Me.id(qe):0}it._fragId=Ne(it.static.frag),it._vertId=Ne(it.static.vert);function Se(qe,nr){Object.keys(nr).forEach(function(tr){qe[Me.id(tr)]=!0})}var ce=it._uniformSet={};Se(ce,Nt.static),Se(ce,Nt.dynamic);var $e=it._attributeSet={};Se($e,Yt.static),Se($e,Yt.dynamic),it._hasCount="count"in it.static||"count"in it.dynamic||"elements"in it.static||"elements"in it.dynamic}function $(it,Nt){var Yt=q();N(it+" in command "+(Nt||J())+(Yt==="unknown"?"":" called from "+Yt))}function et(it,Nt,Yt){it||$(Nt,Yt||J())}function Z(it,Nt,Yt,Me){it in Nt||$("unknown parameter ("+it+")"+E(Yt)+". possible values: "+Object.keys(Nt).join(),Me||J())}function pt(it,Nt,Yt,Me){I(it,Nt)||$("invalid parameter type"+E(Yt)+". expected "+Nt+", got "+typeof it,Me||J())}function _t(it){it()}function It(it,Nt,Yt){it.texture?D(it.texture._texture.internalformat,Nt,"unsupported texture format for attachment"):D(it.renderbuffer._renderbuffer.format,Yt,"unsupported renderbuffer format for attachment")}var Rt=33071,H=9728,ot=9984,St=9985,Ut=9986,ae=9987,bt=5120,wt=5121,ft=5122,ht=5123,Pt=5124,Lt=5125,jt=5126,mt=32819,W=32820,rt=33635,ct=34042,At=36193,tt={};tt[bt]=tt[wt]=1,tt[ft]=tt[ht]=tt[At]=tt[rt]=tt[mt]=tt[W]=2,tt[Pt]=tt[Lt]=tt[jt]=tt[ct]=4;function dt(it,Nt){return it===W||it===mt||it===rt?2:it===ct?4:tt[it]*Nt}function Et(it){return!(it&it-1)&&!!it}function Ot(it,Nt,Yt){var Me,Ne=Nt.width,Se=Nt.height,ce=Nt.channels;w(Ne>0&&Ne<=Yt.maxTextureSize&&Se>0&&Se<=Yt.maxTextureSize,"invalid texture shape"),(it.wrapS!==Rt||it.wrapT!==Rt)&&w(Et(Ne)&&Et(Se),"incompatible wrap mode for texture, both width and height must be power of 2"),Nt.mipmask===1?Ne!==1&&Se!==1&&w(it.minFilter!==ot&&it.minFilter!==Ut&&it.minFilter!==St&&it.minFilter!==ae,"min filter requires mipmap"):(w(Et(Ne)&&Et(Se),"texture must be a square power of 2 to support mipmapping"),w(Nt.mipmask===(Ne<<1)-1,"missing or incomplete mipmap data")),Nt.type===jt&&(Yt.extensions.indexOf("oes_texture_float_linear")<0&&w(it.minFilter===H&&it.magFilter===H,"filter not supported, must enable oes_texture_float_linear"),w(!it.genMipmaps,"mipmap generation not supported with float textures"));var $e=Nt.images;for(Me=0;Me<16;++Me)if($e[Me]){var qe=Ne>>Me,nr=Se>>Me;w(Nt.mipmask&1<<Me,"missing mipmap data");var tr=$e[Me];if(w(tr.width===qe&&tr.height===nr,"invalid shape for mip images"),w(tr.format===Nt.format&&tr.internalformat===Nt.internalformat&&tr.type===Nt.type,"incompatible type for mip image"),!tr.compressed)if(tr.data){var or=Math.ceil(dt(tr.type,ce)*qe/tr.unpackAlignment)*tr.unpackAlignment;w(tr.data.byteLength===or*nr,"invalid data for image, buffer size is inconsistent with image format")}else tr.element||tr.copy}else it.genMipmaps||w((Nt.mipmask&1<<Me)==0,"extra mipmap data");Nt.compressed&&w(!it.genMipmaps,"mipmap generation for compressed images not supported")}function $t(it,Nt,Yt,Me){var Ne=it.width,Se=it.height,ce=it.channels;w(Ne>0&&Ne<=Me.maxTextureSize&&Se>0&&Se<=Me.maxTextureSize,"invalid texture shape"),w(Ne===Se,"cube map must be square"),w(Nt.wrapS===Rt&&Nt.wrapT===Rt,"wrap mode not supported by cube map");for(var $e=0;$e<Yt.length;++$e){var qe=Yt[$e];w(qe.width===Ne&&qe.height===Se,"inconsistent cube map face shape"),Nt.genMipmaps&&(w(!qe.compressed,"can not generate mipmap for compressed textures"),w(qe.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var nr=qe.images,tr=0;tr<16;++tr){var or=nr[tr];if(or){var vr=Ne>>tr,Qe=Se>>tr;w(qe.mipmask&1<<tr,"missing mipmap data"),w(or.width===vr&&or.height===Qe,"invalid shape for mip images"),w(or.format===it.format&&or.internalformat===it.internalformat&&or.type===it.type,"incompatible type for mip image"),or.compressed||(or.data?w(or.data.byteLength===vr*Qe*Math.max(dt(or.type,ce),or.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):or.element||or.copy)}}}}var st=x(w,{optional:_t,raise:N,commandRaise:$,command:et,parameter:A,commandParameter:Z,constructor:G,type:C,commandType:pt,isTypedArray:O,nni:T,oneOf:D,shaderError:lt,linkError:z,callSite:q,saveCommandRef:b,saveDrawInfo:v,framebufferFormat:It,guessCommand:J,texture2D:Ot,textureCube:$t}),Qt=0,vt=0,yt=5,zt=6;function oe(it,Nt){this.id=Qt++,this.type=it,this.data=Nt}function Ie(it){return it.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Gt(it){if(it.length===0)return[];var Nt=it.charAt(0),Yt=it.charAt(it.length-1);if(it.length>1&&Nt===Yt&&(Nt==='"'||Nt==="'"))return['"'+Ie(it.substr(1,it.length-2))+'"'];var Me=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(it);if(Me)return Gt(it.substr(0,Me.index)).concat(Gt(Me[1])).concat(Gt(it.substr(Me.index+Me[0].length)));var Ne=it.split(".");if(Ne.length===1)return['"'+Ie(it)+'"'];for(var Se=[],ce=0;ce<Ne.length;++ce)Se=Se.concat(Gt(Ne[ce]));return Se}function Wt(it){return"["+Gt(it).join("][")+"]"}function Ht(it,Nt){return new oe(it,Wt(Nt+""))}function de(it){return typeof it=="function"&&!it._reglType||it instanceof oe}function Ge(it,Nt){if(typeof it=="function")return new oe(vt,it);if(typeof it=="number"||typeof it=="boolean")return new oe(yt,it);if(Array.isArray(it))return new oe(zt,it.map((Yt,Me)=>Ge(Yt,Nt+"["+Me+"]")));if(it instanceof oe)return it;st(!1,"invalid option type in uniform "+Nt)}var Re={DynamicVariable:oe,define:Ht,isDynamic:de,unbox:Ge,accessor:Wt},Ke={next:typeof requestAnimationFrame=="function"?function(it){return requestAnimationFrame(it)}:function(it){return setTimeout(it,16)},cancel:typeof cancelAnimationFrame=="function"?function(it){return cancelAnimationFrame(it)}:clearTimeout},ze=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Ce(){var it={"":0},Nt=[""];return{id:function(Yt){var Me=it[Yt];return Me||(Me=it[Yt]=Nt.length,Nt.push(Yt),Me)},str:function(Yt){return Nt[Yt]}}}function dr(it,Nt,Yt){var Me=document.createElement("canvas");x(Me.style,{border:0,margin:0,padding:0,top:0,left:0}),it.appendChild(Me),it===document.body&&(Me.style.position="absolute",x(it.style,{margin:0,padding:0}));function Ne(){var $e=window.innerWidth,qe=window.innerHeight;if(it!==document.body){var nr=it.getBoundingClientRect();$e=nr.right-nr.left,qe=nr.bottom-nr.top}Me.width=Yt*$e,Me.height=Yt*qe,x(Me.style,{width:$e+"px",height:qe+"px"})}var Se;it!==document.body&&typeof ResizeObserver=="function"?(Se=new ResizeObserver(function(){setTimeout(Ne)}),Se.observe(it)):window.addEventListener("resize",Ne,!1);function ce(){Se?Se.disconnect():window.removeEventListener("resize",Ne),it.removeChild(Me)}return Ne(),{canvas:Me,onDestroy:ce}}function sr(it,Nt){function Yt(Me){try{return it.getContext(Me,Nt)}catch(Ne){return null}}return Yt("webgl")||Yt("experimental-webgl")||Yt("webgl-experimental")}function Tr(it){return typeof it.nodeName=="string"&&typeof it.appendChild=="function"&&typeof it.getBoundingClientRect=="function"}function qr(it){return typeof it.drawArrays=="function"||typeof it.drawElements=="function"}function fn(it){return typeof it=="string"?it.split():(st(Array.isArray(it),"invalid extension array"),it)}function Rn(it){return typeof it=="string"?(st(typeof document!="undefined","not supported outside of DOM"),document.querySelector(it)):it}function Yr(it){var Nt=it||{},Yt,Me,Ne,Se,ce={},$e=[],qe=[],nr=typeof window=="undefined"?1:window.devicePixelRatio,tr=!1,or=function(lr){lr&&st.raise(lr)},vr=function(){};if(typeof Nt=="string"?(st(typeof document!="undefined","selector queries only supported in DOM enviroments"),Yt=document.querySelector(Nt),st(Yt,"invalid query string for element")):typeof Nt=="object"?Tr(Nt)?Yt=Nt:qr(Nt)?(Se=Nt,Ne=Se.canvas):(st.constructor(Nt),"gl"in Nt?Se=Nt.gl:"canvas"in Nt?Ne=Rn(Nt.canvas):"container"in Nt&&(Me=Rn(Nt.container)),"attributes"in Nt&&(ce=Nt.attributes,st.type(ce,"object","invalid context attributes")),"extensions"in Nt&&($e=fn(Nt.extensions)),"optionalExtensions"in Nt&&(qe=fn(Nt.optionalExtensions)),"onDone"in Nt&&(st.type(Nt.onDone,"function","invalid or missing onDone callback"),or=Nt.onDone),"profile"in Nt&&(tr=!!Nt.profile),"pixelRatio"in Nt&&(nr=+Nt.pixelRatio,st(nr>0,"invalid pixel ratio"))):st.raise("invalid arguments to regl"),Yt&&(Yt.nodeName.toLowerCase()==="canvas"?Ne=Yt:Me=Yt),!Se){if(!Ne){st(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var Qe=dr(Me||document.body,or,nr);if(!Qe)return null;Ne=Qe.canvas,vr=Qe.onDestroy}ce.premultipliedAlpha===void 0&&(ce.premultipliedAlpha=!0),Se=sr(Ne,ce)}return Se?{gl:Se,canvas:Ne,container:Me,extensions:$e,optionalExtensions:qe,pixelRatio:nr,profile:tr,onDone:or,onDestroy:vr}:(vr(),or("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Nn(it,Nt){var Yt={};function Me(ce){st.type(ce,"string","extension name must be string");var $e=ce.toLowerCase(),qe;try{qe=Yt[$e]=it.getExtension($e)}catch(nr){}return!!qe}for(var Ne=0;Ne<Nt.extensions.length;++Ne){var Se=Nt.extensions[Ne];if(!Me(Se))return Nt.onDestroy(),Nt.onDone('"'+Se+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Nt.optionalExtensions.forEach(Me),{extensions:Yt,restore:function(){Object.keys(Yt).forEach(function(ce){if(Yt[ce]&&!Me(ce))throw new Error("(regl): error restoring extension "+ce)})}}}function Vr(it,Nt){for(var Yt=Array(it),Me=0;Me<it;++Me)Yt[Me]=Nt(Me);return Yt}var ki=5120,vn=5121,$r=5122,En=5123,In=5124,On=5125,ta=5126;function Wi(it){for(var Nt=16;Nt<=1<<28;Nt*=16)if(it<=Nt)return Nt;return 0}function kn(it){var Nt,Yt;return Nt=(it>65535)<<4,it>>>=Nt,Yt=(it>255)<<3,it>>>=Yt,Nt|=Yt,Yt=(it>15)<<2,it>>>=Yt,Nt|=Yt,Yt=(it>3)<<1,it>>>=Yt,Nt|=Yt,Nt|it>>1}function Bi(){var it=Vr(8,function(){return[]});function Nt(Se){var ce=Wi(Se),$e=it[kn(ce)>>2];return $e.length>0?$e.pop():new ArrayBuffer(ce)}function Yt(Se){it[kn(Se.byteLength)>>2].push(Se)}function Me(Se,ce){var $e=null;switch(Se){case ki:$e=new Int8Array(Nt(ce),0,ce);break;case vn:$e=new Uint8Array(Nt(ce),0,ce);break;case $r:$e=new Int16Array(Nt(2*ce),0,ce);break;case En:$e=new Uint16Array(Nt(2*ce),0,ce);break;case In:$e=new Int32Array(Nt(4*ce),0,ce);break;case On:$e=new Uint32Array(Nt(4*ce),0,ce);break;case ta:$e=new Float32Array(Nt(4*ce),0,ce);break;default:return null}return $e.length!==ce?$e.subarray(0,ce):$e}function Ne(Se){Yt(Se.buffer)}return{alloc:Nt,free:Yt,allocType:Me,freeType:Ne}}var gn=Bi();gn.zero=Bi();var ci=3408,fi=3410,pi=3411,mo=3412,ka=3413,lo=3414,Ca=3415,Lo=33901,$n=33902,Vi=3379,Fi=3386,Xi=34921,$a=36347,Ss=36348,Es=35661,sl=35660,Vl=34930,Xl=36349,ws=34076,Mf=34024,Af=7936,tc=7937,Od=7938,Yl=35724,ec=34047,Pd=36063,Dd=34852,xo=3553,Tf=34067,ll=34069,Ld=33984,ul=6408,rc=5126,If=5121,nc=36160,Rd=36053,Nd=36064,kd=16384,Of=function(it,Nt){var Yt=1;Nt.ext_texture_filter_anisotropic&&(Yt=it.getParameter(ec));var Me=1,Ne=1;Nt.webgl_draw_buffers&&(Me=it.getParameter(Dd),Ne=it.getParameter(Pd));var Se=!!Nt.oes_texture_float;if(Se){var ce=it.createTexture();it.bindTexture(xo,ce),it.texImage2D(xo,0,ul,1,1,0,ul,rc,null);var $e=it.createFramebuffer();if(it.bindFramebuffer(nc,$e),it.framebufferTexture2D(nc,Nd,xo,ce,0),it.bindTexture(xo,null),it.checkFramebufferStatus(nc)!==Rd)Se=!1;else{it.viewport(0,0,1,1),it.clearColor(1,0,0,1),it.clear(kd);var qe=gn.allocType(rc,4);it.readPixels(0,0,1,1,ul,rc,qe),it.getError()?Se=!1:(it.deleteFramebuffer($e),it.deleteTexture(ce),Se=qe[0]===1),gn.freeType(qe)}}var nr=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),tr=!0;if(!nr){var or=it.createTexture(),vr=gn.allocType(If,36);it.activeTexture(Ld),it.bindTexture(Tf,or),it.texImage2D(ll,0,ul,3,3,0,ul,If,vr),gn.freeType(vr),it.bindTexture(Tf,null),it.deleteTexture(or),tr=!it.getError()}return{colorBits:[it.getParameter(fi),it.getParameter(pi),it.getParameter(mo),it.getParameter(ka)],depthBits:it.getParameter(lo),stencilBits:it.getParameter(Ca),subpixelBits:it.getParameter(ci),extensions:Object.keys(Nt).filter(function(Qe){return!!Nt[Qe]}),maxAnisotropic:Yt,maxDrawbuffers:Me,maxColorAttachments:Ne,pointSizeDims:it.getParameter(Lo),lineWidthDims:it.getParameter($n),maxViewportDims:it.getParameter(Fi),maxCombinedTextureUnits:it.getParameter(Es),maxCubeMapSize:it.getParameter(ws),maxRenderbufferSize:it.getParameter(Mf),maxTextureUnits:it.getParameter(Vl),maxTextureSize:it.getParameter(Vi),maxAttributes:it.getParameter(Xi),maxVertexUniforms:it.getParameter($a),maxVertexTextureUnits:it.getParameter(sl),maxVaryingVectors:it.getParameter(Ss),maxFragmentUniforms:it.getParameter(Xl),glsl:it.getParameter(Yl),renderer:it.getParameter(tc),vendor:it.getParameter(Af),version:it.getParameter(Od),readFloat:Se,npotTextureCube:tr}};function Qa(it){return!!it&&typeof it=="object"&&Array.isArray(it.shape)&&Array.isArray(it.stride)&&typeof it.offset=="number"&&it.shape.length===it.stride.length&&(Array.isArray(it.data)||L(it.data))}var yi=function(it){return Object.keys(it).map(function(Nt){return it[Nt]})},Hl={shape:No,flatten:Ro};function cl(it,Nt,Yt){for(var Me=0;Me<Nt;++Me)Yt[Me]=it[Me]}function Bd(it,Nt,Yt,Me){for(var Ne=0,Se=0;Se<Nt;++Se)for(var ce=it[Se],$e=0;$e<Yt;++$e)Me[Ne++]=ce[$e]}function ns(it,Nt,Yt,Me,Ne,Se){for(var ce=Se,$e=0;$e<Nt;++$e)for(var qe=it[$e],nr=0;nr<Yt;++nr)for(var tr=qe[nr],or=0;or<Me;++or)Ne[ce++]=tr[or]}function ic(it,Nt,Yt,Me,Ne){for(var Se=1,ce=Yt+1;ce<Nt.length;++ce)Se*=Nt[ce];var $e=Nt[Yt];if(Nt.length-Yt==4){var qe=Nt[Yt+1],nr=Nt[Yt+2],tr=Nt[Yt+3];for(ce=0;ce<$e;++ce)ns(it[ce],qe,nr,tr,Me,Ne),Ne+=Se}else for(ce=0;ce<$e;++ce)ic(it[ce],Nt,Yt+1,Me,Ne),Ne+=Se}function Ro(it,Nt,Yt,Me){var Ne=1;if(Nt.length)for(var Se=0;Se<Nt.length;++Se)Ne*=Nt[Se];else Ne=0;var ce=Me||gn.allocType(Yt,Ne);switch(Nt.length){case 0:break;case 1:cl(it,Nt[0],ce);break;case 2:Bd(it,Nt[0],Nt[1],ce);break;case 3:ns(it,Nt[0],Nt[1],Nt[2],ce,0);break;default:ic(it,Nt,0,ce,0)}return ce}function No(it){for(var Nt=[],Yt=it;Yt.length;Yt=Yt[0])Nt.push(Yt.length);return Nt}var ac={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Fd=5120,fl=5122,Pf=5124,Df=5121,Lf=5123,ko=5125,Rf=5126,oc=5126,is={int8:Fd,int16:fl,int32:Pf,uint8:Df,uint16:Lf,uint32:ko,float:Rf,float32:oc},Gd=35048,sc=35040,as={dynamic:Gd,stream:sc,static:35044},jl=Hl.flatten,lc=Hl.shape,la=35044,zd=35040,Cs=5121,bo=5126,_o=[];_o[5120]=1,_o[5122]=2,_o[5124]=4,_o[5121]=1,_o[5123]=2,_o[5125]=4,_o[5126]=4;function hl(it){return ac[Object.prototype.toString.call(it)]|0}function dl(it,Nt){for(var Yt=0;Yt<Nt.length;++Yt)it[Yt]=Nt[Yt]}function Nf(it,Nt,Yt,Me,Ne,Se,ce){for(var $e=0,qe=0;qe<Yt;++qe)for(var nr=0;nr<Me;++nr)it[$e++]=Nt[Ne*qe+Se*nr+ce]}function Zl(it,Nt,Yt,Me){var Ne=0,Se={};function ce(ge){this.id=Ne++,this.buffer=it.createBuffer(),this.type=ge,this.usage=la,this.byteLength=0,this.dimension=1,this.dtype=Cs,this.persistentData=null,Yt.profile&&(this.stats={size:0})}ce.prototype.bind=function(){it.bindBuffer(this.type,this.buffer)},ce.prototype.destroy=function(){vr(this)};var $e=[];function qe(ge,Oe){var rr=$e.pop();return rr||(rr=new ce(ge)),rr.bind(),or(rr,Oe,zd,0,1,!1),rr}function nr(ge){$e.push(ge)}function tr(ge,Oe,rr){ge.byteLength=Oe.byteLength,it.bufferData(ge.type,Oe,rr)}function or(ge,Oe,rr,yr,Xe,xr){var He;if(ge.usage=rr,Array.isArray(Oe)){if(ge.dtype=yr||bo,Oe.length>0){var fr;if(Array.isArray(Oe[0])){He=lc(Oe);for(var Ye=1,hr=1;hr<He.length;++hr)Ye*=He[hr];ge.dimension=Ye,fr=jl(Oe,He,ge.dtype),tr(ge,fr,rr),xr?ge.persistentData=fr:gn.freeType(fr)}else if(typeof Oe[0]=="number"){ge.dimension=Xe;var _r=gn.allocType(ge.dtype,Oe.length);dl(_r,Oe),tr(ge,_r,rr),xr?ge.persistentData=_r:gn.freeType(_r)}else L(Oe[0])?(ge.dimension=Oe[0].length,ge.dtype=yr||hl(Oe[0])||bo,fr=jl(Oe,[Oe.length,Oe[0].length],ge.dtype),tr(ge,fr,rr),xr?ge.persistentData=fr:gn.freeType(fr)):st.raise("invalid buffer data")}}else if(L(Oe))ge.dtype=yr||hl(Oe),ge.dimension=Xe,tr(ge,Oe,rr),xr&&(ge.persistentData=new Uint8Array(new Uint8Array(Oe.buffer)));else if(Qa(Oe)){He=Oe.shape;var Hr=Oe.stride,gr=Oe.offset,ir=0,We=0,Br=0,Zr=0;He.length===1?(ir=He[0],We=1,Br=Hr[0],Zr=0):He.length===2?(ir=He[0],We=He[1],Br=Hr[0],Zr=Hr[1]):st.raise("invalid shape"),ge.dtype=yr||hl(Oe.data)||bo,ge.dimension=We;var Er=gn.allocType(ge.dtype,ir*We);Nf(Er,Oe.data,ir,We,Br,Zr,gr),tr(ge,Er,rr),xr?ge.persistentData=Er:gn.freeType(Er)}else Oe instanceof ArrayBuffer?(ge.dtype=Cs,ge.dimension=Xe,tr(ge,Oe,rr),xr&&(ge.persistentData=new Uint8Array(new Uint8Array(Oe)))):st.raise("invalid buffer data")}function vr(ge){Nt.bufferCount--,Me(ge);var Oe=ge.buffer;st(Oe,"buffer must not be deleted already"),it.deleteBuffer(Oe),ge.buffer=null,delete Se[ge.id]}function Qe(ge,Oe,rr,yr){Nt.bufferCount++;var Xe=new ce(Oe);Se[Xe.id]=Xe;function xr(Ye){var hr=la,_r=null,Hr=0,gr=0,ir=1;return Array.isArray(Ye)||L(Ye)||Qa(Ye)||Ye instanceof ArrayBuffer?_r=Ye:typeof Ye=="number"?Hr=Ye|0:Ye&&(st.type(Ye,"object","buffer arguments must be an object, a number or an array"),"data"in Ye&&(st(_r===null||Array.isArray(_r)||L(_r)||Qa(_r),"invalid data for buffer"),_r=Ye.data),"usage"in Ye&&(st.parameter(Ye.usage,as,"invalid buffer usage"),hr=as[Ye.usage]),"type"in Ye&&(st.parameter(Ye.type,is,"invalid buffer type"),gr=is[Ye.type]),"dimension"in Ye&&(st.type(Ye.dimension,"number","invalid dimension"),ir=Ye.dimension|0),"length"in Ye&&(st.nni(Hr,"buffer length must be a nonnegative integer"),Hr=Ye.length|0)),Xe.bind(),_r?or(Xe,_r,hr,gr,ir,yr):(Hr&&it.bufferData(Xe.type,Hr,hr),Xe.dtype=gr||Cs,Xe.usage=hr,Xe.dimension=ir,Xe.byteLength=Hr),Yt.profile&&(Xe.stats.size=Xe.byteLength*_o[Xe.dtype]),xr}function He(Ye,hr){st(hr+Ye.byteLength<=Xe.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Ye.byteLength+" starting from offset "+hr+" to a buffer of size "+Xe.byteLength),it.bufferSubData(Xe.type,hr,Ye)}function fr(Ye,hr){var _r=(hr||0)|0,Hr;if(Xe.bind(),L(Ye)||Ye instanceof ArrayBuffer)He(Ye,_r);else if(Array.isArray(Ye)){if(Ye.length>0)if(typeof Ye[0]=="number"){var gr=gn.allocType(Xe.dtype,Ye.length);dl(gr,Ye),He(gr,_r),gn.freeType(gr)}else if(Array.isArray(Ye[0])||L(Ye[0])){Hr=lc(Ye);var ir=jl(Ye,Hr,Xe.dtype);He(ir,_r),gn.freeType(ir)}else st.raise("invalid buffer data")}else if(Qa(Ye)){Hr=Ye.shape;var We=Ye.stride,Br=0,Zr=0,Er=0,an=0;Hr.length===1?(Br=Hr[0],Zr=1,Er=We[0],an=0):Hr.length===2?(Br=Hr[0],Zr=Hr[1],Er=We[0],an=We[1]):st.raise("invalid shape");var Ur=Array.isArray(Ye.data)?Xe.dtype:hl(Ye.data),en=gn.allocType(Ur,Br*Zr);Nf(en,Ye.data,Br,Zr,Er,an,Ye.offset),He(en,_r),gn.freeType(en)}else st.raise("invalid data for buffer subdata");return xr}return rr||xr(ge),xr._reglType="buffer",xr._buffer=Xe,xr.subdata=fr,Yt.profile&&(xr.stats=Xe.stats),xr.destroy=function(){vr(Xe)},xr}function lr(){yi(Se).forEach(function(ge){ge.buffer=it.createBuffer(),it.bindBuffer(ge.type,ge.buffer),it.bufferData(ge.type,ge.persistentData||ge.byteLength,ge.usage)})}return Yt.profile&&(Nt.getTotalBufferSize=function(){var ge=0;return Object.keys(Se).forEach(function(Oe){ge+=Se[Oe].stats.size}),ge}),{create:Qe,createStream:qe,destroyStream:nr,clear:function(){yi(Se).forEach(vr),$e.forEach(vr)},getBuffer:function(ge){return ge&&ge._buffer instanceof ce?ge._buffer:null},restore:lr,_initBuffer:or}}var kf=0,Bf=0,Ff=1,Gf=1,zf=4,Ud=4,os={points:kf,point:Bf,lines:Ff,line:Gf,triangles:zf,triangle:Ud,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Uf=0,Kl=1,ua=4,ss=5120,Ba=5121,uo=5122,Fa=5123,$l=5124,Ja=5125,uc=34963,Wd=35040,Vd=35044;function Xd(it,Nt,Yt,Me){var Ne={},Se=0,ce={uint8:Ba,uint16:Fa};Nt.oes_element_index_uint&&(ce.uint32=Ja);function $e(lr){this.id=Se++,Ne[this.id]=this,this.buffer=lr,this.primType=ua,this.vertCount=0,this.type=0}$e.prototype.bind=function(){this.buffer.bind()};var qe=[];function nr(lr){var ge=qe.pop();return ge||(ge=new $e(Yt.create(null,uc,!0,!1)._buffer)),or(ge,lr,Wd,-1,-1,0,0),ge}function tr(lr){qe.push(lr)}function or(lr,ge,Oe,rr,yr,Xe,xr){lr.buffer.bind();var He;if(ge){var fr=xr;!xr&&(!L(ge)||Qa(ge)&&!L(ge.data))&&(fr=Nt.oes_element_index_uint?Ja:Fa),Yt._initBuffer(lr.buffer,ge,Oe,fr,3)}else it.bufferData(uc,Xe,Oe),lr.buffer.dtype=He||Ba,lr.buffer.usage=Oe,lr.buffer.dimension=3,lr.buffer.byteLength=Xe;if(He=xr,!xr){switch(lr.buffer.dtype){case Ba:case ss:He=Ba;break;case Fa:case uo:He=Fa;break;case Ja:case $l:He=Ja;break;default:st.raise("unsupported type for element array")}lr.buffer.dtype=He}lr.type=He,st(He!==Ja||!!Nt.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Ye=yr;Ye<0&&(Ye=lr.buffer.byteLength,He===Fa?Ye>>=1:He===Ja&&(Ye>>=2)),lr.vertCount=Ye;var hr=rr;if(rr<0){hr=ua;var _r=lr.buffer.dimension;_r===1&&(hr=Uf),_r===2&&(hr=Kl),_r===3&&(hr=ua)}lr.primType=hr}function vr(lr){Me.elementsCount--,st(lr.buffer!==null,"must not double destroy elements"),delete Ne[lr.id],lr.buffer.destroy(),lr.buffer=null}function Qe(lr,ge){var Oe=Yt.create(null,uc,!0),rr=new $e(Oe._buffer);Me.elementsCount++;function yr(Xe){if(!Xe)Oe(),rr.primType=ua,rr.vertCount=0,rr.type=Ba;else if(typeof Xe=="number")Oe(Xe),rr.primType=ua,rr.vertCount=Xe|0,rr.type=Ba;else{var xr=null,He=Vd,fr=-1,Ye=-1,hr=0,_r=0;Array.isArray(Xe)||L(Xe)||Qa(Xe)?xr=Xe:(st.type(Xe,"object","invalid arguments for elements"),"data"in Xe&&(xr=Xe.data,st(Array.isArray(xr)||L(xr)||Qa(xr),"invalid data for element buffer")),"usage"in Xe&&(st.parameter(Xe.usage,as,"invalid element buffer usage"),He=as[Xe.usage]),"primitive"in Xe&&(st.parameter(Xe.primitive,os,"invalid element buffer primitive"),fr=os[Xe.primitive]),"count"in Xe&&(st(typeof Xe.count=="number"&&Xe.count>=0,"invalid vertex count for elements"),Ye=Xe.count|0),"type"in Xe&&(st.parameter(Xe.type,ce,"invalid buffer type"),_r=ce[Xe.type]),"length"in Xe?hr=Xe.length|0:(hr=Ye,_r===Fa||_r===uo?hr*=2:(_r===Ja||_r===$l)&&(hr*=4))),or(rr,xr,He,fr,Ye,hr,_r)}return yr}return yr(lr),yr._reglType="elements",yr._elements=rr,yr.subdata=function(Xe,xr){return Oe.subdata(Xe,xr),yr},yr.destroy=function(){vr(rr)},yr}return{create:Qe,createStream:nr,destroyStream:tr,getElements:function(lr){return typeof lr=="function"&&lr._elements instanceof $e?lr._elements:null},clear:function(){yi(Ne).forEach(vr)}}}var vl=new Float32Array(1),Yd=new Uint32Array(vl.buffer),ls=5123;function So(it){for(var Nt=gn.allocType(ls,it.length),Yt=0;Yt<it.length;++Yt)if(isNaN(it[Yt]))Nt[Yt]=65535;else if(it[Yt]===Infinity)Nt[Yt]=31744;else if(it[Yt]===-Infinity)Nt[Yt]=64512;else{vl[0]=it[Yt];var Me=Yd[0],Ne=Me>>>31<<15,Se=(Me<<1>>>24)-127,ce=Me>>13&(1<<10)-1;if(Se<-24)Nt[Yt]=Ne;else if(Se<-14){var $e=-14-Se;Nt[Yt]=Ne+(ce+(1<<10)>>$e)}else Se>15?Nt[Yt]=Ne+31744:Nt[Yt]=Ne+(Se+15<<10)+ce}return Nt}function wn(it){return Array.isArray(it)||L(it)}var cc=function(it){return!(it&it-1)&&!!it},Wf=34467,Ga=3553,fc=34067,Ql=34069,us=6408,hc=6406,Jl=6407,gl=6409,Mt=6410,Xt=32854,se=32855,be=36194,Ue=32819,mr=32820,kr=33635,ri=34042,co=6402,Bo=34041,ql=35904,Ms=35906,tu=36193,Hd=33776,jd=33777,Zd=33778,Kd=33779,dp=35986,vp=35987,gp=34798,pp=35840,$d=35841,Qd=35842,yp=35843,Vf=36196,pl=5121,Xf=5123,Yf=5125,dc=5126,Gm=10242,Hf=10243,mp=10497,vc=33071,Jd=33648,zm=10240,Um=10241,qd=9728,Wm=9729,jf=9984,xp=9985,bp=9986,tv=9987,Vm=33170,Zf=4352,Xm=4353,Kf=4354,Ym=34046,ev=3317,Hm=37440,jm=37441,Zm=37443,_p=37444,gc=33984,Km=[jf,bp,xp,tv],pc=[0,gl,Mt,Jl,us],qa={};qa[gl]=qa[hc]=qa[co]=1,qa[Bo]=qa[Mt]=2,qa[Jl]=qa[ql]=3,qa[us]=qa[Ms]=4;function Fo(it){return"[object "+it+"]"}var Ei=Fo("HTMLCanvasElement"),zn=Fo("OffscreenCanvas"),Go=Fo("CanvasRenderingContext2D"),yc=Fo("ImageBitmap"),nn=Fo("HTMLImageElement"),ea=Fo("HTMLVideoElement"),eu=Object.keys(ac).concat([Ei,zn,Go,yc,nn,ea]),za=[];za[pl]=1,za[dc]=4,za[tu]=2,za[Xf]=2,za[Yf]=4;var Yi=[];Yi[Xt]=2,Yi[se]=2,Yi[be]=2,Yi[Bo]=4,Yi[Hd]=.5,Yi[jd]=.5,Yi[Zd]=1,Yi[Kd]=1,Yi[dp]=.5,Yi[vp]=1,Yi[gp]=1,Yi[pp]=.5,Yi[$d]=.25,Yi[Qd]=.5,Yi[yp]=.25,Yi[Vf]=.5;function Sp(it){return Array.isArray(it)&&(it.length===0||typeof it[0]=="number")}function $m(it){if(!Array.isArray(it))return!1;var Nt=it.length;return!(Nt===0||!wn(it[0]))}function ru(it){return Object.prototype.toString.call(it)}function Qm(it){return ru(it)===Ei}function Jm(it){return ru(it)===zn}function cS(it){return ru(it)===Go}function fS(it){return ru(it)===yc}function mc(it){return ru(it)===nn}function hS(it){return ru(it)===ea}function rv(it){if(!it)return!1;var Nt=ru(it);return eu.indexOf(Nt)>=0?!0:Sp(it)||$m(it)||Qa(it)}function qm(it){return ac[Object.prototype.toString.call(it)]|0}function dS(it,Nt){var Yt=Nt.length;switch(it.type){case pl:case Xf:case Yf:case dc:var Me=gn.allocType(it.type,Yt);Me.set(Nt),it.data=Me;break;case tu:it.data=So(Nt);break;default:st.raise("unsupported texture type, must specify a typed array")}}function tx(it,Nt){return gn.allocType(it.type===tu?dc:it.type,Nt)}function ex(it,Nt){it.type===tu?(it.data=So(Nt),gn.freeType(Nt)):it.data=Nt}function xc(it,Nt,Yt,Me,Ne,Se){for(var ce=it.width,$e=it.height,qe=it.channels,nr=ce*$e*qe,tr=tx(it,nr),or=0,vr=0;vr<$e;++vr)for(var Qe=0;Qe<ce;++Qe)for(var lr=0;lr<qe;++lr)tr[or++]=Nt[Yt*Qe+Me*vr+Ne*lr+Se];ex(it,tr)}function As(it,Nt,Yt,Me,Ne,Se){var ce;if(typeof Yi[it]!="undefined"?ce=Yi[it]:ce=qa[it]*za[Nt],Se&&(ce*=6),Ne){for(var $e=0,qe=Yt;qe>=1;)$e+=ce*qe*qe,qe/=2;return $e}else return ce*Yt*Me}function nv(it,Nt,Yt,Me,Ne,Se,ce){var $e={"don't care":Zf,"dont care":Zf,nice:Kf,fast:Xm},qe={repeat:mp,clamp:vc,mirror:Jd},nr={nearest:qd,linear:Wm},tr=x({mipmap:tv,"nearest mipmap nearest":jf,"linear mipmap nearest":xp,"nearest mipmap linear":bp,"linear mipmap linear":tv},nr),or={none:0,browser:_p},vr={uint8:pl,rgba4:Ue,rgb565:kr,"rgb5 a1":mr},Qe={alpha:hc,luminance:gl,"luminance alpha":Mt,rgb:Jl,rgba:us,rgba4:Xt,"rgb5 a1":se,rgb565:be},lr={};Nt.ext_srgb&&(Qe.srgb=ql,Qe.srgba=Ms),Nt.oes_texture_float&&(vr.float32=vr.float=dc),Nt.oes_texture_half_float&&(vr.float16=vr["half float"]=tu),Nt.webgl_depth_texture&&(x(Qe,{depth:co,"depth stencil":Bo}),x(vr,{uint16:Xf,uint32:Yf,"depth stencil":ri})),Nt.webgl_compressed_texture_s3tc&&x(lr,{"rgb s3tc dxt1":Hd,"rgba s3tc dxt1":jd,"rgba s3tc dxt3":Zd,"rgba s3tc dxt5":Kd}),Nt.webgl_compressed_texture_atc&&x(lr,{"rgb atc":dp,"rgba atc explicit alpha":vp,"rgba atc interpolated alpha":gp}),Nt.webgl_compressed_texture_pvrtc&&x(lr,{"rgb pvrtc 4bppv1":pp,"rgb pvrtc 2bppv1":$d,"rgba pvrtc 4bppv1":Qd,"rgba pvrtc 2bppv1":yp}),Nt.webgl_compressed_texture_etc1&&(lr["rgb etc1"]=Vf);var ge=Array.prototype.slice.call(it.getParameter(Wf));Object.keys(lr).forEach(function(Vt){var Ae=lr[Vt];ge.indexOf(Ae)>=0&&(Qe[Vt]=Ae)});var Oe=Object.keys(Qe);Yt.textureFormats=Oe;var rr=[];Object.keys(Qe).forEach(function(Vt){var Ae=Qe[Vt];rr[Ae]=Vt});var yr=[];Object.keys(vr).forEach(function(Vt){var Ae=vr[Vt];yr[Ae]=Vt});var Xe=[];Object.keys(nr).forEach(function(Vt){var Ae=nr[Vt];Xe[Ae]=Vt});var xr=[];Object.keys(tr).forEach(function(Vt){var Ae=tr[Vt];xr[Ae]=Vt});var He=[];Object.keys(qe).forEach(function(Vt){var Ae=qe[Vt];He[Ae]=Vt});var fr=Oe.reduce(function(Vt,Ae){var _e=Qe[Ae];return _e===gl||_e===hc||_e===gl||_e===Mt||_e===co||_e===Bo||Nt.ext_srgb&&(_e===ql||_e===Ms)?Vt[_e]=_e:_e===se||Ae.indexOf("rgba")>=0?Vt[_e]=us:Vt[_e]=Jl,Vt},{});function Ye(){this.internalformat=us,this.format=us,this.type=pl,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=_p,this.width=0,this.height=0,this.channels=0}function hr(Vt,Ae){Vt.internalformat=Ae.internalformat,Vt.format=Ae.format,Vt.type=Ae.type,Vt.compressed=Ae.compressed,Vt.premultiplyAlpha=Ae.premultiplyAlpha,Vt.flipY=Ae.flipY,Vt.unpackAlignment=Ae.unpackAlignment,Vt.colorSpace=Ae.colorSpace,Vt.width=Ae.width,Vt.height=Ae.height,Vt.channels=Ae.channels}function _r(Vt,Ae){if(!(typeof Ae!="object"||!Ae)){if("premultiplyAlpha"in Ae&&(st.type(Ae.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),Vt.premultiplyAlpha=Ae.premultiplyAlpha),"flipY"in Ae&&(st.type(Ae.flipY,"boolean","invalid texture flip"),Vt.flipY=Ae.flipY),"alignment"in Ae&&(st.oneOf(Ae.alignment,[1,2,4,8],"invalid texture unpack alignment"),Vt.unpackAlignment=Ae.alignment),"colorSpace"in Ae&&(st.parameter(Ae.colorSpace,or,"invalid colorSpace"),Vt.colorSpace=or[Ae.colorSpace]),"type"in Ae){var _e=Ae.type;st(Nt.oes_texture_float||!(_e==="float"||_e==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),st(Nt.oes_texture_half_float||!(_e==="half float"||_e==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),st(Nt.webgl_depth_texture||!(_e==="uint16"||_e==="uint32"||_e==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),st.parameter(_e,vr,"invalid texture type"),Vt.type=vr[_e]}var br=Vt.width,on=Vt.height,Ft=Vt.channels,Dt=!1;"shape"in Ae?(st(Array.isArray(Ae.shape)&&Ae.shape.length>=2,"shape must be an array"),br=Ae.shape[0],on=Ae.shape[1],Ae.shape.length===3&&(Ft=Ae.shape[2],st(Ft>0&&Ft<=4,"invalid number of channels"),Dt=!0),st(br>=0&&br<=Yt.maxTextureSize,"invalid width"),st(on>=0&&on<=Yt.maxTextureSize,"invalid height")):("radius"in Ae&&(br=on=Ae.radius,st(br>=0&&br<=Yt.maxTextureSize,"invalid radius")),"width"in Ae&&(br=Ae.width,st(br>=0&&br<=Yt.maxTextureSize,"invalid width")),"height"in Ae&&(on=Ae.height,st(on>=0&&on<=Yt.maxTextureSize,"invalid height")),"channels"in Ae&&(Ft=Ae.channels,st(Ft>0&&Ft<=4,"invalid number of channels"),Dt=!0)),Vt.width=br|0,Vt.height=on|0,Vt.channels=Ft|0;var qt=!1;if("format"in Ae){var fe=Ae.format;st(Nt.webgl_depth_texture||!(fe==="depth"||fe==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),st.parameter(fe,Qe,"invalid texture format");var pe=Vt.internalformat=Qe[fe];Vt.format=fr[pe],fe in vr&&("type"in Ae||(Vt.type=vr[fe])),fe in lr&&(Vt.compressed=!0),qt=!0}!Dt&&qt?Vt.channels=qa[Vt.format]:Dt&&!qt?Vt.channels!==pc[Vt.format]&&(Vt.format=Vt.internalformat=pc[Vt.channels]):qt&&Dt&&st(Vt.channels===qa[Vt.format],"number of channels inconsistent with specified format")}}function Hr(Vt){it.pixelStorei(Hm,Vt.flipY),it.pixelStorei(jm,Vt.premultiplyAlpha),it.pixelStorei(Zm,Vt.colorSpace),it.pixelStorei(ev,Vt.unpackAlignment)}function gr(){Ye.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function ir(Vt,Ae){var _e=null;if(rv(Ae)?_e=Ae:Ae&&(st.type(Ae,"object","invalid pixel data type"),_r(Vt,Ae),"x"in Ae&&(Vt.xOffset=Ae.x|0),"y"in Ae&&(Vt.yOffset=Ae.y|0),rv(Ae.data)&&(_e=Ae.data)),st(!Vt.compressed||_e instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Ae.copy){st(!_e,"can not specify copy and data field for the same texture");var br=Ne.viewportWidth,on=Ne.viewportHeight;Vt.width=Vt.width||br-Vt.xOffset,Vt.height=Vt.height||on-Vt.yOffset,Vt.needsCopy=!0,st(Vt.xOffset>=0&&Vt.xOffset<br&&Vt.yOffset>=0&&Vt.yOffset<on&&Vt.width>0&&Vt.width<=br&&Vt.height>0&&Vt.height<=on,"copy texture read out of bounds")}else if(!_e)Vt.width=Vt.width||1,Vt.height=Vt.height||1,Vt.channels=Vt.channels||4;else if(L(_e))Vt.channels=Vt.channels||4,Vt.data=_e,!("type"in Ae)&&Vt.type===pl&&(Vt.type=qm(_e));else if(Sp(_e))Vt.channels=Vt.channels||4,dS(Vt,_e),Vt.alignment=1,Vt.needsFree=!0;else if(Qa(_e)){var Ft=_e.data;!Array.isArray(Ft)&&Vt.type===pl&&(Vt.type=qm(Ft));var Dt=_e.shape,qt=_e.stride,fe,pe,re,Jt,le,Bt;Dt.length===3?(re=Dt[2],Bt=qt[2]):(st(Dt.length===2,"invalid ndarray pixel data, must be 2 or 3D"),re=1,Bt=1),fe=Dt[0],pe=Dt[1],Jt=qt[0],le=qt[1],Vt.alignment=1,Vt.width=fe,Vt.height=pe,Vt.channels=re,Vt.format=Vt.internalformat=pc[re],Vt.needsFree=!0,xc(Vt,Ft,Jt,le,Bt,_e.offset)}else if(Qm(_e)||Jm(_e)||cS(_e))Qm(_e)||Jm(_e)?Vt.element=_e:Vt.element=_e.canvas,Vt.width=Vt.element.width,Vt.height=Vt.element.height,Vt.channels=4;else if(fS(_e))Vt.element=_e,Vt.width=_e.width,Vt.height=_e.height,Vt.channels=4;else if(mc(_e))Vt.element=_e,Vt.width=_e.naturalWidth,Vt.height=_e.naturalHeight,Vt.channels=4;else if(hS(_e))Vt.element=_e,Vt.width=_e.videoWidth,Vt.height=_e.videoHeight,Vt.channels=4;else if($m(_e)){var Zt=Vt.width||_e[0].length,kt=Vt.height||_e.length,ue=Vt.channels;wn(_e[0][0])?ue=ue||_e[0][0].length:ue=ue||1;for(var xe=Hl.shape(_e),ke=1,Be=0;Be<xe.length;++Be)ke*=xe[Be];var De=tx(Vt,ke);Hl.flatten(_e,xe,"",De),ex(Vt,De),Vt.alignment=1,Vt.width=Zt,Vt.height=kt,Vt.channels=ue,Vt.format=Vt.internalformat=pc[ue],Vt.needsFree=!0}Vt.type===dc?st(Yt.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):Vt.type===tu&&st(Yt.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function We(Vt,Ae,_e){var br=Vt.element,on=Vt.data,Ft=Vt.internalformat,Dt=Vt.format,qt=Vt.type,fe=Vt.width,pe=Vt.height;Hr(Vt),br?it.texImage2D(Ae,_e,Dt,Dt,qt,br):Vt.compressed?it.compressedTexImage2D(Ae,_e,Ft,fe,pe,0,on):Vt.needsCopy?(Me(),it.copyTexImage2D(Ae,_e,Dt,Vt.xOffset,Vt.yOffset,fe,pe,0)):it.texImage2D(Ae,_e,Dt,fe,pe,0,Dt,qt,on||null)}function Br(Vt,Ae,_e,br,on){var Ft=Vt.element,Dt=Vt.data,qt=Vt.internalformat,fe=Vt.format,pe=Vt.type,re=Vt.width,Jt=Vt.height;Hr(Vt),Ft?it.texSubImage2D(Ae,on,_e,br,fe,pe,Ft):Vt.compressed?it.compressedTexSubImage2D(Ae,on,_e,br,qt,re,Jt,Dt):Vt.needsCopy?(Me(),it.copyTexSubImage2D(Ae,on,_e,br,Vt.xOffset,Vt.yOffset,re,Jt)):it.texSubImage2D(Ae,on,_e,br,re,Jt,fe,pe,Dt)}var Zr=[];function Er(){return Zr.pop()||new gr}function an(Vt){Vt.needsFree&&gn.freeType(Vt.data),gr.call(Vt),Zr.push(Vt)}function Ur(){Ye.call(this),this.genMipmaps=!1,this.mipmapHint=Zf,this.mipmask=0,this.images=Array(16)}function en(Vt,Ae,_e){var br=Vt.images[0]=Er();Vt.mipmask=1,br.width=Vt.width=Ae,br.height=Vt.height=_e,br.channels=Vt.channels=4}function mn(Vt,Ae){var _e=null;if(rv(Ae))_e=Vt.images[0]=Er(),hr(_e,Vt),ir(_e,Ae),Vt.mipmask=1;else if(_r(Vt,Ae),Array.isArray(Ae.mipmap))for(var br=Ae.mipmap,on=0;on<br.length;++on)_e=Vt.images[on]=Er(),hr(_e,Vt),_e.width>>=on,_e.height>>=on,ir(_e,br[on]),Vt.mipmask|=1<<on;else _e=Vt.images[0]=Er(),hr(_e,Vt),ir(_e,Ae),Vt.mipmask=1;hr(Vt,Vt.images[0]),Vt.compressed&&(Vt.internalformat===Hd||Vt.internalformat===jd||Vt.internalformat===Zd||Vt.internalformat===Kd)&&st(Vt.width%4==0&&Vt.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function xi(Vt,Ae){for(var _e=Vt.images,br=0;br<_e.length;++br){if(!_e[br])return;We(_e[br],Ae,br)}}var Hi=[];function hn(){var Vt=Hi.pop()||new Ur;Ye.call(Vt),Vt.mipmask=0;for(var Ae=0;Ae<16;++Ae)Vt.images[Ae]=null;return Vt}function Pi(Vt){for(var Ae=Vt.images,_e=0;_e<Ae.length;++_e)Ae[_e]&&an(Ae[_e]),Ae[_e]=null;Hi.push(Vt)}function ni(){this.minFilter=qd,this.magFilter=qd,this.wrapS=vc,this.wrapT=vc,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Zf}function Di(Vt,Ae){if("min"in Ae){var _e=Ae.min;st.parameter(_e,tr),Vt.minFilter=tr[_e],Km.indexOf(Vt.minFilter)>=0&&!("faces"in Ae)&&(Vt.genMipmaps=!0)}if("mag"in Ae){var br=Ae.mag;st.parameter(br,nr),Vt.magFilter=nr[br]}var on=Vt.wrapS,Ft=Vt.wrapT;if("wrap"in Ae){var Dt=Ae.wrap;typeof Dt=="string"?(st.parameter(Dt,qe),on=Ft=qe[Dt]):Array.isArray(Dt)&&(st.parameter(Dt[0],qe),st.parameter(Dt[1],qe),on=qe[Dt[0]],Ft=qe[Dt[1]])}else{if("wrapS"in Ae){var qt=Ae.wrapS;st.parameter(qt,qe),on=qe[qt]}if("wrapT"in Ae){var fe=Ae.wrapT;st.parameter(fe,qe),Ft=qe[fe]}}if(Vt.wrapS=on,Vt.wrapT=Ft,"anisotropic"in Ae){var pe=Ae.anisotropic;st(typeof pe=="number"&&pe>=1&&pe<=Yt.maxAnisotropic,"aniso samples must be between 1 and "),Vt.anisotropic=Ae.anisotropic}if("mipmap"in Ae){var re=!1;switch(typeof Ae.mipmap){case"string":st.parameter(Ae.mipmap,$e,"invalid mipmap hint"),Vt.mipmapHint=$e[Ae.mipmap],Vt.genMipmaps=!0,re=!0;break;case"boolean":re=Vt.genMipmaps=Ae.mipmap;break;case"object":st(Array.isArray(Ae.mipmap),"invalid mipmap type"),Vt.genMipmaps=!1,re=!0;break;default:st.raise("invalid mipmap type")}re&&!("min"in Ae)&&(Vt.minFilter=jf)}}function Li(Vt,Ae){it.texParameteri(Ae,Um,Vt.minFilter),it.texParameteri(Ae,zm,Vt.magFilter),it.texParameteri(Ae,Gm,Vt.wrapS),it.texParameteri(Ae,Hf,Vt.wrapT),Nt.ext_texture_filter_anisotropic&&it.texParameteri(Ae,Ym,Vt.anisotropic),Vt.genMipmaps&&(it.hint(Vm,Vt.mipmapHint),it.generateMipmap(Ae))}var wi=0,Ci={},Qi=Yt.maxTextureUnits,Mi=Array(Qi).map(function(){return null});function Qr(Vt){Ye.call(this),this.mipmask=0,this.internalformat=us,this.id=wi++,this.refCount=1,this.target=Vt,this.texture=it.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new ni,ce.profile&&(this.stats={size:0})}function ia(Vt){it.activeTexture(gc),it.bindTexture(Vt.target,Vt.texture)}function Mn(){var Vt=Mi[0];Vt?it.bindTexture(Vt.target,Vt.texture):it.bindTexture(Ga,null)}function Lr(Vt){var Ae=Vt.texture;st(Ae,"must not double destroy texture");var _e=Vt.unit,br=Vt.target;_e>=0&&(it.activeTexture(gc+_e),it.bindTexture(br,null),Mi[_e]=null),it.deleteTexture(Ae),Vt.texture=null,Vt.params=null,Vt.pixels=null,Vt.refCount=0,delete Ci[Vt.id],Se.textureCount--}x(Qr.prototype,{bind:function(){var Vt=this;Vt.bindCount+=1;var Ae=Vt.unit;if(Ae<0){for(var _e=0;_e<Qi;++_e){var br=Mi[_e];if(br){if(br.bindCount>0)continue;br.unit=-1}Mi[_e]=Vt,Ae=_e;break}Ae>=Qi&&st.raise("insufficient number of texture units"),ce.profile&&Se.maxTextureUnits<Ae+1&&(Se.maxTextureUnits=Ae+1),Vt.unit=Ae,it.activeTexture(gc+Ae),it.bindTexture(Vt.target,Vt.texture)}return Ae},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Lr(this)}});function un(Vt,Ae){var _e=new Qr(Ga);Ci[_e.id]=_e,Se.textureCount++;function br(Dt,qt){var fe=_e.texInfo;ni.call(fe);var pe=hn();return typeof Dt=="number"?typeof qt=="number"?en(pe,Dt|0,qt|0):en(pe,Dt|0,Dt|0):Dt?(st.type(Dt,"object","invalid arguments to regl.texture"),Di(fe,Dt),mn(pe,Dt)):en(pe,1,1),fe.genMipmaps&&(pe.mipmask=(pe.width<<1)-1),_e.mipmask=pe.mipmask,hr(_e,pe),st.texture2D(fe,pe,Yt),_e.internalformat=pe.internalformat,br.width=pe.width,br.height=pe.height,ia(_e),xi(pe,Ga),Li(fe,Ga),Mn(),Pi(pe),ce.profile&&(_e.stats.size=As(_e.internalformat,_e.type,pe.width,pe.height,fe.genMipmaps,!1)),br.format=rr[_e.internalformat],br.type=yr[_e.type],br.mag=Xe[fe.magFilter],br.min=xr[fe.minFilter],br.wrapS=He[fe.wrapS],br.wrapT=He[fe.wrapT],br}function on(Dt,qt,fe,pe){st(!!Dt,"must specify image data");var re=qt|0,Jt=fe|0,le=pe|0,Bt=Er();return hr(Bt,_e),Bt.width=0,Bt.height=0,ir(Bt,Dt),Bt.width=Bt.width||(_e.width>>le)-re,Bt.height=Bt.height||(_e.height>>le)-Jt,st(_e.type===Bt.type&&_e.format===Bt.format&&_e.internalformat===Bt.internalformat,"incompatible format for texture.subimage"),st(re>=0&&Jt>=0&&re+Bt.width<=_e.width&&Jt+Bt.height<=_e.height,"texture.subimage write out of bounds"),st(_e.mipmask&1<<le,"missing mipmap data"),st(Bt.data||Bt.element||Bt.needsCopy,"missing image data"),ia(_e),Br(Bt,Ga,re,Jt,le),Mn(),an(Bt),br}function Ft(Dt,qt){var fe=Dt|0,pe=qt|0||fe;if(fe===_e.width&&pe===_e.height)return br;br.width=_e.width=fe,br.height=_e.height=pe,ia(_e);for(var re=0;_e.mipmask>>re;++re){var Jt=fe>>re,le=pe>>re;if(!Jt||!le)break;it.texImage2D(Ga,re,_e.format,Jt,le,0,_e.format,_e.type,null)}return Mn(),ce.profile&&(_e.stats.size=As(_e.internalformat,_e.type,fe,pe,!1,!1)),br}return br(Vt,Ae),br.subimage=on,br.resize=Ft,br._reglType="texture2d",br._texture=_e,ce.profile&&(br.stats=_e.stats),br.destroy=function(){_e.decRef()},br}function pn(Vt,Ae,_e,br,on,Ft){var Dt=new Qr(fc);Ci[Dt.id]=Dt,Se.cubeCount++;var qt=new Array(6);function fe(Jt,le,Bt,Zt,kt,ue){var xe,ke=Dt.texInfo;for(ni.call(ke),xe=0;xe<6;++xe)qt[xe]=hn();if(typeof Jt=="number"||!Jt){var Be=Jt|0||1;for(xe=0;xe<6;++xe)en(qt[xe],Be,Be)}else if(typeof Jt=="object")if(le)mn(qt[0],Jt),mn(qt[1],le),mn(qt[2],Bt),mn(qt[3],Zt),mn(qt[4],kt),mn(qt[5],ue);else if(Di(ke,Jt),_r(Dt,Jt),"faces"in Jt){var De=Jt.faces;for(st(Array.isArray(De)&&De.length===6,"cube faces must be a length 6 array"),xe=0;xe<6;++xe)st(typeof De[xe]=="object"&&!!De[xe],"invalid input for cube map face"),hr(qt[xe],Dt),mn(qt[xe],De[xe])}else for(xe=0;xe<6;++xe)mn(qt[xe],Jt);else st.raise("invalid arguments to cube map");for(hr(Dt,qt[0]),Yt.npotTextureCube||st(cc(Dt.width)&&cc(Dt.height),"your browser does not support non power or two texture dimensions"),ke.genMipmaps?Dt.mipmask=(qt[0].width<<1)-1:Dt.mipmask=qt[0].mipmask,st.textureCube(Dt,ke,qt,Yt),Dt.internalformat=qt[0].internalformat,fe.width=qt[0].width,fe.height=qt[0].height,ia(Dt),xe=0;xe<6;++xe)xi(qt[xe],Ql+xe);for(Li(ke,fc),Mn(),ce.profile&&(Dt.stats.size=As(Dt.internalformat,Dt.type,fe.width,fe.height,ke.genMipmaps,!0)),fe.format=rr[Dt.internalformat],fe.type=yr[Dt.type],fe.mag=Xe[ke.magFilter],fe.min=xr[ke.minFilter],fe.wrapS=He[ke.wrapS],fe.wrapT=He[ke.wrapT],xe=0;xe<6;++xe)Pi(qt[xe]);return fe}function pe(Jt,le,Bt,Zt,kt){st(!!le,"must specify image data"),st(typeof Jt=="number"&&Jt===(Jt|0)&&Jt>=0&&Jt<6,"invalid face");var ue=Bt|0,xe=Zt|0,ke=kt|0,Be=Er();return hr(Be,Dt),Be.width=0,Be.height=0,ir(Be,le),Be.width=Be.width||(Dt.width>>ke)-ue,Be.height=Be.height||(Dt.height>>ke)-xe,st(Dt.type===Be.type&&Dt.format===Be.format&&Dt.internalformat===Be.internalformat,"incompatible format for texture.subimage"),st(ue>=0&&xe>=0&&ue+Be.width<=Dt.width&&xe+Be.height<=Dt.height,"texture.subimage write out of bounds"),st(Dt.mipmask&1<<ke,"missing mipmap data"),st(Be.data||Be.element||Be.needsCopy,"missing image data"),ia(Dt),Br(Be,Ql+Jt,ue,xe,ke),Mn(),an(Be),fe}function re(Jt){var le=Jt|0;if(le!==Dt.width){fe.width=Dt.width=le,fe.height=Dt.height=le,ia(Dt);for(var Bt=0;Bt<6;++Bt)for(var Zt=0;Dt.mipmask>>Zt;++Zt)it.texImage2D(Ql+Bt,Zt,Dt.format,le>>Zt,le>>Zt,0,Dt.format,Dt.type,null);return Mn(),ce.profile&&(Dt.stats.size=As(Dt.internalformat,Dt.type,fe.width,fe.height,!1,!0)),fe}}return fe(Vt,Ae,_e,br,on,Ft),fe.subimage=pe,fe.resize=re,fe._reglType="textureCube",fe._texture=Dt,ce.profile&&(fe.stats=Dt.stats),fe.destroy=function(){Dt.decRef()},fe}function bi(){for(var Vt=0;Vt<Qi;++Vt)it.activeTexture(gc+Vt),it.bindTexture(Ga,null),Mi[Vt]=null;yi(Ci).forEach(Lr),Se.cubeCount=0,Se.textureCount=0}ce.profile&&(Se.getTotalTextureSize=function(){var Vt=0;return Object.keys(Ci).forEach(function(Ae){Vt+=Ci[Ae].stats.size}),Vt});function Vo(){for(var Vt=0;Vt<Qi;++Vt){var Ae=Mi[Vt];Ae&&(Ae.bindCount=0,Ae.unit=-1,Mi[Vt]=null)}yi(Ci).forEach(function(_e){_e.texture=it.createTexture(),it.bindTexture(_e.target,_e.texture);for(var br=0;br<32;++br)if((_e.mipmask&1<<br)!=0)if(_e.target===Ga)it.texImage2D(Ga,br,_e.internalformat,_e.width>>br,_e.height>>br,0,_e.internalformat,_e.type,null);else for(var on=0;on<6;++on)it.texImage2D(Ql+on,br,_e.internalformat,_e.width>>br,_e.height>>br,0,_e.internalformat,_e.type,null);Li(_e.texInfo,_e.target)})}function Fs(){for(var Vt=0;Vt<Qi;++Vt){var Ae=Mi[Vt];Ae&&(Ae.bindCount=0,Ae.unit=-1,Mi[Vt]=null),it.activeTexture(gc+Vt),it.bindTexture(Ga,null),it.bindTexture(fc,null)}}return{create2D:un,createCube:pn,clear:bi,getTexture:function(Vt){return null},restore:Vo,refresh:Fs}}var Ua=36161,iv=32854,rx=32855,nx=36194,$f=33189,Eo=36168,Ep=34041,ix=35907,ax=34836,ox=34842,sx=34843,zo=[];zo[iv]=2,zo[rx]=2,zo[nx]=2,zo[$f]=2,zo[Eo]=1,zo[Ep]=4,zo[ix]=4,zo[ax]=16,zo[ox]=8,zo[sx]=6;function lx(it,Nt,Yt){return zo[it]*Nt*Yt}var vS=function(it,Nt,Yt,Me,Ne){var Se={rgba4:iv,rgb565:nx,"rgb5 a1":rx,depth:$f,stencil:Eo,"depth stencil":Ep};Nt.ext_srgb&&(Se.srgba=ix),Nt.ext_color_buffer_half_float&&(Se.rgba16f=ox,Se.rgb16f=sx),Nt.webgl_color_buffer_float&&(Se.rgba32f=ax);var ce=[];Object.keys(Se).forEach(function(Qe){var lr=Se[Qe];ce[lr]=Qe});var $e=0,qe={};function nr(Qe){this.id=$e++,this.refCount=1,this.renderbuffer=Qe,this.format=iv,this.width=0,this.height=0,Ne.profile&&(this.stats={size:0})}nr.prototype.decRef=function(){--this.refCount<=0&&tr(this)};function tr(Qe){var lr=Qe.renderbuffer;st(lr,"must not double destroy renderbuffer"),it.bindRenderbuffer(Ua,null),it.deleteRenderbuffer(lr),Qe.renderbuffer=null,Qe.refCount=0,delete qe[Qe.id],Me.renderbufferCount--}function or(Qe,lr){var ge=new nr(it.createRenderbuffer());qe[ge.id]=ge,Me.renderbufferCount++;function Oe(yr,Xe){var xr=0,He=0,fr=iv;if(typeof yr=="object"&&yr){var Ye=yr;if("shape"in Ye){var hr=Ye.shape;st(Array.isArray(hr)&&hr.length>=2,"invalid renderbuffer shape"),xr=hr[0]|0,He=hr[1]|0}else"radius"in Ye&&(xr=He=Ye.radius|0),"width"in Ye&&(xr=Ye.width|0),"height"in Ye&&(He=Ye.height|0);"format"in Ye&&(st.parameter(Ye.format,Se,"invalid renderbuffer format"),fr=Se[Ye.format])}else typeof yr=="number"?(xr=yr|0,typeof Xe=="number"?He=Xe|0:He=xr):yr?st.raise("invalid arguments to renderbuffer constructor"):xr=He=1;if(st(xr>0&&He>0&&xr<=Yt.maxRenderbufferSize&&He<=Yt.maxRenderbufferSize,"invalid renderbuffer size"),!(xr===ge.width&&He===ge.height&&fr===ge.format))return Oe.width=ge.width=xr,Oe.height=ge.height=He,ge.format=fr,it.bindRenderbuffer(Ua,ge.renderbuffer),it.renderbufferStorage(Ua,fr,xr,He),st(it.getError()===0,"invalid render buffer format"),Ne.profile&&(ge.stats.size=lx(ge.format,ge.width,ge.height)),Oe.format=ce[ge.format],Oe}function rr(yr,Xe){var xr=yr|0,He=Xe|0||xr;return xr===ge.width&&He===ge.height||(st(xr>0&&He>0&&xr<=Yt.maxRenderbufferSize&&He<=Yt.maxRenderbufferSize,"invalid renderbuffer size"),Oe.width=ge.width=xr,Oe.height=ge.height=He,it.bindRenderbuffer(Ua,ge.renderbuffer),it.renderbufferStorage(Ua,ge.format,xr,He),st(it.getError()===0,"invalid render buffer format"),Ne.profile&&(ge.stats.size=lx(ge.format,ge.width,ge.height))),Oe}return Oe(Qe,lr),Oe.resize=rr,Oe._reglType="renderbuffer",Oe._renderbuffer=ge,Ne.profile&&(Oe.stats=ge.stats),Oe.destroy=function(){ge.decRef()},Oe}Ne.profile&&(Me.getTotalRenderbufferSize=function(){var Qe=0;return Object.keys(qe).forEach(function(lr){Qe+=qe[lr].stats.size}),Qe});function vr(){yi(qe).forEach(function(Qe){Qe.renderbuffer=it.createRenderbuffer(),it.bindRenderbuffer(Ua,Qe.renderbuffer),it.renderbufferStorage(Ua,Qe.format,Qe.width,Qe.height)}),it.bindRenderbuffer(Ua,null)}return{create:or,clear:function(){yi(qe).forEach(tr)},restore:vr}},Ts=36160,bc=36161,nu=3553,av=34069,ov=36064,ux=36096,sv=36128,cx=33306,fx=36053,ra=36054,Cn=36055,hx=36057,Qf=36061,dx=36193,wp=5121,Ar=5126,Cp=6407,Mp=6408,vx=6402,gx=[Cp,Mp],Jf=[];Jf[Mp]=4,Jf[Cp]=3;var qf=[];qf[wp]=1,qf[Ar]=4,qf[dx]=2;var th=32854,_c=32855,px=36194,yx=33189,Sc=36168,lv=34041,eh=35907,Ap=34836,rh=34842,Tp=34843,Ip=[th,_c,px,eh,rh,Tp,Ap],yl={};yl[fx]="complete",yl[ra]="incomplete attachment",yl[hx]="incomplete dimensions",yl[Cn]="incomplete, missing attachment",yl[Qf]="unsupported";function mx(it,Nt,Yt,Me,Ne,Se){var ce={cur:null,next:null,dirty:!1,setFBO:null},$e=["rgba"],qe=["rgba4","rgb565","rgb5 a1"];Nt.ext_srgb&&qe.push("srgba"),Nt.ext_color_buffer_half_float&&qe.push("rgba16f","rgb16f"),Nt.webgl_color_buffer_float&&qe.push("rgba32f");var nr=["uint8"];Nt.oes_texture_half_float&&nr.push("half float","float16"),Nt.oes_texture_float&&nr.push("float","float32");function tr(gr,ir,We){this.target=gr,this.texture=ir,this.renderbuffer=We;var Br=0,Zr=0;ir?(Br=ir.width,Zr=ir.height):We&&(Br=We.width,Zr=We.height),this.width=Br,this.height=Zr}function or(gr){gr&&(gr.texture&&gr.texture._texture.decRef(),gr.renderbuffer&&gr.renderbuffer._renderbuffer.decRef())}function vr(gr,ir,We){if(!!gr)if(gr.texture){var Br=gr.texture._texture,Zr=Math.max(1,Br.width),Er=Math.max(1,Br.height);st(Zr===ir&&Er===We,"inconsistent width/height for supplied texture"),Br.refCount+=1}else{var an=gr.renderbuffer._renderbuffer;st(an.width===ir&&an.height===We,"inconsistent width/height for renderbuffer"),an.refCount+=1}}function Qe(gr,ir){ir&&(ir.texture?it.framebufferTexture2D(Ts,gr,ir.target,ir.texture._texture.texture,0):it.framebufferRenderbuffer(Ts,gr,bc,ir.renderbuffer._renderbuffer.renderbuffer))}function lr(gr){var ir=nu,We=null,Br=null,Zr=gr;typeof gr=="object"&&(Zr=gr.data,"target"in gr&&(ir=gr.target|0)),st.type(Zr,"function","invalid attachment data");var Er=Zr._reglType;return Er==="texture2d"?(We=Zr,st(ir===nu)):Er==="textureCube"?(We=Zr,st(ir>=av&&ir<av+6,"invalid cube map target")):Er==="renderbuffer"?(Br=Zr,ir=bc):st.raise("invalid regl object for attachment"),new tr(ir,We,Br)}function ge(gr,ir,We,Br,Zr){if(We){var Er=Me.create2D({width:gr,height:ir,format:Br,type:Zr});return Er._texture.refCount=0,new tr(nu,Er,null)}else{var an=Ne.create({width:gr,height:ir,format:Br});return an._renderbuffer.refCount=0,new tr(bc,null,an)}}function Oe(gr){return gr&&(gr.texture||gr.renderbuffer)}function rr(gr,ir,We){gr&&(gr.texture?gr.texture.resize(ir,We):gr.renderbuffer&&gr.renderbuffer.resize(ir,We),gr.width=ir,gr.height=We)}var yr=0,Xe={};function xr(){this.id=yr++,Xe[this.id]=this,this.framebuffer=it.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function He(gr){gr.colorAttachments.forEach(or),or(gr.depthAttachment),or(gr.stencilAttachment),or(gr.depthStencilAttachment)}function fr(gr){var ir=gr.framebuffer;st(ir,"must not double destroy framebuffer"),it.deleteFramebuffer(ir),gr.framebuffer=null,Se.framebufferCount--,delete Xe[gr.id]}function Ye(gr){var ir;it.bindFramebuffer(Ts,gr.framebuffer);var We=gr.colorAttachments;for(ir=0;ir<We.length;++ir)Qe(ov+ir,We[ir]);for(ir=We.length;ir<Yt.maxColorAttachments;++ir)it.framebufferTexture2D(Ts,ov+ir,nu,null,0);it.framebufferTexture2D(Ts,cx,nu,null,0),it.framebufferTexture2D(Ts,ux,nu,null,0),it.framebufferTexture2D(Ts,sv,nu,null,0),Qe(ux,gr.depthAttachment),Qe(sv,gr.stencilAttachment),Qe(cx,gr.depthStencilAttachment);var Br=it.checkFramebufferStatus(Ts);!it.isContextLost()&&Br!==fx&&st.raise("framebuffer configuration not supported, status = "+yl[Br]),it.bindFramebuffer(Ts,ce.next?ce.next.framebuffer:null),ce.cur=ce.next,it.getError()}function hr(gr,ir){var We=new xr;Se.framebufferCount++;function Br(Er,an){var Ur;st(ce.next!==We,"can not update framebuffer which is currently in use");var en=0,mn=0,xi=!0,Hi=!0,hn=null,Pi=!0,ni="rgba",Di="uint8",Li=1,wi=null,Ci=null,Qi=null,Mi=!1;if(typeof Er=="number")en=Er|0,mn=an|0||en;else if(!Er)en=mn=1;else{st.type(Er,"object","invalid arguments for framebuffer");var Qr=Er;if("shape"in Qr){var ia=Qr.shape;st(Array.isArray(ia)&&ia.length>=2,"invalid shape for framebuffer"),en=ia[0],mn=ia[1]}else"radius"in Qr&&(en=mn=Qr.radius),"width"in Qr&&(en=Qr.width),"height"in Qr&&(mn=Qr.height);("color"in Qr||"colors"in Qr)&&(hn=Qr.color||Qr.colors,Array.isArray(hn)&&st(hn.length===1||Nt.webgl_draw_buffers,"multiple render targets not supported")),hn||("colorCount"in Qr&&(Li=Qr.colorCount|0,st(Li>0,"invalid color buffer count")),"colorTexture"in Qr&&(Pi=!!Qr.colorTexture,ni="rgba4"),"colorType"in Qr&&(Di=Qr.colorType,Pi?(st(Nt.oes_texture_float||!(Di==="float"||Di==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),st(Nt.oes_texture_half_float||!(Di==="half float"||Di==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Di==="half float"||Di==="float16"?(st(Nt.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),ni="rgba16f"):(Di==="float"||Di==="float32")&&(st(Nt.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),ni="rgba32f"),st.oneOf(Di,nr,"invalid color type")),"colorFormat"in Qr&&(ni=Qr.colorFormat,$e.indexOf(ni)>=0?Pi=!0:qe.indexOf(ni)>=0?Pi=!1:Pi?st.oneOf(Qr.colorFormat,$e,"invalid color format for texture"):st.oneOf(Qr.colorFormat,qe,"invalid color format for renderbuffer"))),("depthTexture"in Qr||"depthStencilTexture"in Qr)&&(Mi=!!(Qr.depthTexture||Qr.depthStencilTexture),st(!Mi||Nt.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Qr&&(typeof Qr.depth=="boolean"?xi=Qr.depth:(wi=Qr.depth,Hi=!1)),"stencil"in Qr&&(typeof Qr.stencil=="boolean"?Hi=Qr.stencil:(Ci=Qr.stencil,xi=!1)),"depthStencil"in Qr&&(typeof Qr.depthStencil=="boolean"?xi=Hi=Qr.depthStencil:(Qi=Qr.depthStencil,xi=!1,Hi=!1))}var Mn=null,Lr=null,un=null,pn=null;if(Array.isArray(hn))Mn=hn.map(lr);else if(hn)Mn=[lr(hn)];else for(Mn=new Array(Li),Ur=0;Ur<Li;++Ur)Mn[Ur]=ge(en,mn,Pi,ni,Di);st(Nt.webgl_draw_buffers||Mn.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),st(Mn.length<=Yt.maxColorAttachments,"too many color attachments, not supported"),en=en||Mn[0].width,mn=mn||Mn[0].height,wi?Lr=lr(wi):xi&&!Hi&&(Lr=ge(en,mn,Mi,"depth","uint32")),Ci?un=lr(Ci):Hi&&!xi&&(un=ge(en,mn,!1,"stencil","uint8")),Qi?pn=lr(Qi):!wi&&!Ci&&Hi&&xi&&(pn=ge(en,mn,Mi,"depth stencil","depth stencil")),st(!!wi+!!Ci+!!Qi<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var bi=null;for(Ur=0;Ur<Mn.length;++Ur)if(vr(Mn[Ur],en,mn),st(!Mn[Ur]||Mn[Ur].texture&&gx.indexOf(Mn[Ur].texture._texture.format)>=0||Mn[Ur].renderbuffer&&Ip.indexOf(Mn[Ur].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Ur+" is invalid"),Mn[Ur]&&Mn[Ur].texture){var Vo=Jf[Mn[Ur].texture._texture.format]*qf[Mn[Ur].texture._texture.type];bi===null?bi=Vo:st(bi===Vo,"all color attachments much have the same number of bits per pixel.")}return vr(Lr,en,mn),st(!Lr||Lr.texture&&Lr.texture._texture.format===vx||Lr.renderbuffer&&Lr.renderbuffer._renderbuffer.format===yx,"invalid depth attachment for framebuffer object"),vr(un,en,mn),st(!un||un.renderbuffer&&un.renderbuffer._renderbuffer.format===Sc,"invalid stencil attachment for framebuffer object"),vr(pn,en,mn),st(!pn||pn.texture&&pn.texture._texture.format===lv||pn.renderbuffer&&pn.renderbuffer._renderbuffer.format===lv,"invalid depth-stencil attachment for framebuffer object"),He(We),We.width=en,We.height=mn,We.colorAttachments=Mn,We.depthAttachment=Lr,We.stencilAttachment=un,We.depthStencilAttachment=pn,Br.color=Mn.map(Oe),Br.depth=Oe(Lr),Br.stencil=Oe(un),Br.depthStencil=Oe(pn),Br.width=We.width,Br.height=We.height,Ye(We),Br}function Zr(Er,an){st(ce.next!==We,"can not resize a framebuffer which is currently in use");var Ur=Math.max(Er|0,1),en=Math.max(an|0||Ur,1);if(Ur===We.width&&en===We.height)return Br;for(var mn=We.colorAttachments,xi=0;xi<mn.length;++xi)rr(mn[xi],Ur,en);return rr(We.depthAttachment,Ur,en),rr(We.stencilAttachment,Ur,en),rr(We.depthStencilAttachment,Ur,en),We.width=Br.width=Ur,We.height=Br.height=en,Ye(We),Br}return Br(gr,ir),x(Br,{resize:Zr,_reglType:"framebuffer",_framebuffer:We,destroy:function(){fr(We),He(We)},use:function(Er){ce.setFBO({framebuffer:Br},Er)}})}function _r(gr){var ir=Array(6);function We(Zr){var Er;st(ir.indexOf(ce.next)<0,"can not update framebuffer which is currently in use");var an={color:null},Ur=0,en=null,mn="rgba",xi="uint8",Hi=1;if(typeof Zr=="number")Ur=Zr|0;else if(!Zr)Ur=1;else{st.type(Zr,"object","invalid arguments for framebuffer");var hn=Zr;if("shape"in hn){var Pi=hn.shape;st(Array.isArray(Pi)&&Pi.length>=2,"invalid shape for framebuffer"),st(Pi[0]===Pi[1],"cube framebuffer must be square"),Ur=Pi[0]}else"radius"in hn&&(Ur=hn.radius|0),"width"in hn?(Ur=hn.width|0,"height"in hn&&st(hn.height===Ur,"must be square")):"height"in hn&&(Ur=hn.height|0);("color"in hn||"colors"in hn)&&(en=hn.color||hn.colors,Array.isArray(en)&&st(en.length===1||Nt.webgl_draw_buffers,"multiple render targets not supported")),en||("colorCount"in hn&&(Hi=hn.colorCount|0,st(Hi>0,"invalid color buffer count")),"colorType"in hn&&(st.oneOf(hn.colorType,nr,"invalid color type"),xi=hn.colorType),"colorFormat"in hn&&(mn=hn.colorFormat,st.oneOf(hn.colorFormat,$e,"invalid color format for texture"))),"depth"in hn&&(an.depth=hn.depth),"stencil"in hn&&(an.stencil=hn.stencil),"depthStencil"in hn&&(an.depthStencil=hn.depthStencil)}var ni;if(en)if(Array.isArray(en))for(ni=[],Er=0;Er<en.length;++Er)ni[Er]=en[Er];else ni=[en];else{ni=Array(Hi);var Di={radius:Ur,format:mn,type:xi};for(Er=0;Er<Hi;++Er)ni[Er]=Me.createCube(Di)}for(an.color=Array(ni.length),Er=0;Er<ni.length;++Er){var Li=ni[Er];st(typeof Li=="function"&&Li._reglType==="textureCube","invalid cube map"),Ur=Ur||Li.width,st(Li.width===Ur&&Li.height===Ur,"invalid cube map shape"),an.color[Er]={target:av,data:ni[Er]}}for(Er=0;Er<6;++Er){for(var wi=0;wi<ni.length;++wi)an.color[wi].target=av+Er;Er>0&&(an.depth=ir[0].depth,an.stencil=ir[0].stencil,an.depthStencil=ir[0].depthStencil),ir[Er]?ir[Er](an):ir[Er]=hr(an)}return x(We,{width:Ur,height:Ur,color:ni})}function Br(Zr){var Er,an=Zr|0;if(st(an>0&&an<=Yt.maxCubeMapSize,"invalid radius for cube fbo"),an===We.width)return We;var Ur=We.color;for(Er=0;Er<Ur.length;++Er)Ur[Er].resize(an);for(Er=0;Er<6;++Er)ir[Er].resize(an);return We.width=We.height=an,We}return We(gr),x(We,{faces:ir,resize:Br,_reglType:"framebufferCube",destroy:function(){ir.forEach(function(Zr){Zr.destroy()})}})}function Hr(){ce.cur=null,ce.next=null,ce.dirty=!0,yi(Xe).forEach(function(gr){gr.framebuffer=it.createFramebuffer(),Ye(gr)})}return x(ce,{getFramebuffer:function(gr){if(typeof gr=="function"&&gr._reglType==="framebuffer"){var ir=gr._framebuffer;if(ir instanceof xr)return ir}return null},create:hr,createCube:_r,clear:function(){yi(Xe).forEach(fr)},restore:Hr})}var xx=5126,uv=34962;function nh(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=xx,this.offset=0,this.stride=0,this.divisor=0}function bx(it,Nt,Yt,Me,Ne){for(var Se=Yt.maxAttributes,ce=new Array(Se),$e=0;$e<Se;++$e)ce[$e]=new nh;var qe=0,nr={},tr={Record:nh,scope:{},state:ce,currentVAO:null,targetVAO:null,restore:vr()?Xe:function(){},createVAO:xr,getVAO:lr,destroyBuffer:or,setVAO:vr()?ge:Oe,clear:vr()?rr:function(){}};function or(He){for(var fr=0;fr<ce.length;++fr){var Ye=ce[fr];Ye.buffer===He&&(it.disableVertexAttribArray(fr),Ye.buffer=null)}}function vr(){return Nt.oes_vertex_array_object}function Qe(){return Nt.angle_instanced_arrays}function lr(He){return typeof He=="function"&&He._vao?He._vao:null}function ge(He){if(He!==tr.currentVAO){var fr=vr();He?fr.bindVertexArrayOES(He.vao):fr.bindVertexArrayOES(null),tr.currentVAO=He}}function Oe(He){if(He!==tr.currentVAO){if(He)He.bindAttrs();else for(var fr=Qe(),Ye=0;Ye<ce.length;++Ye){var hr=ce[Ye];hr.buffer?(it.enableVertexAttribArray(Ye),it.vertexAttribPointer(Ye,hr.size,hr.type,hr.normalized,hr.stride,hr.offfset),fr&&hr.divisor&&fr.vertexAttribDivisorANGLE(Ye,hr.divisor)):(it.disableVertexAttribArray(Ye),it.vertexAttrib4f(Ye,hr.x,hr.y,hr.z,hr.w))}tr.currentVAO=He}}function rr(){yi(nr).forEach(function(He){He.destroy()})}function yr(){this.id=++qe,this.attributes=[];var He=vr();He?this.vao=He.createVertexArrayOES():this.vao=null,nr[this.id]=this,this.buffers=[]}yr.prototype.bindAttrs=function(){for(var He=Qe(),fr=this.attributes,Ye=0;Ye<fr.length;++Ye){var hr=fr[Ye];hr.buffer?(it.enableVertexAttribArray(Ye),it.bindBuffer(uv,hr.buffer.buffer),it.vertexAttribPointer(Ye,hr.size,hr.type,hr.normalized,hr.stride,hr.offset),He&&hr.divisor&&He.vertexAttribDivisorANGLE(Ye,hr.divisor)):(it.disableVertexAttribArray(Ye),it.vertexAttrib4f(Ye,hr.x,hr.y,hr.z,hr.w))}for(var _r=fr.length;_r<Se;++_r)it.disableVertexAttribArray(_r)},yr.prototype.refresh=function(){var He=vr();He&&(He.bindVertexArrayOES(this.vao),this.bindAttrs(),tr.currentVAO=this)},yr.prototype.destroy=function(){if(this.vao){var He=vr();this===tr.currentVAO&&(tr.currentVAO=null,He.bindVertexArrayOES(null)),He.deleteVertexArrayOES(this.vao),this.vao=null}nr[this.id]&&(delete nr[this.id],Me.vaoCount-=1)};function Xe(){var He=vr();He&&yi(nr).forEach(function(fr){fr.refresh()})}function xr(He){var fr=new yr;Me.vaoCount+=1;function Ye(hr){st(Array.isArray(hr),"arguments to vertex array constructor must be an array"),st(hr.length<Se,"too many attributes"),st(hr.length>0,"must specify at least one attribute");var _r={},Hr=fr.attributes;Hr.length=hr.length;for(var gr=0;gr<hr.length;++gr){var ir=hr[gr],We=Hr[gr]=new nh,Br=ir.data||ir;if(Array.isArray(Br)||L(Br)||Qa(Br)){var Zr;fr.buffers[gr]&&(Zr=fr.buffers[gr],L(Br)&&Zr._buffer.byteLength>=Br.byteLength?Zr.subdata(Br):(Zr.destroy(),fr.buffers[gr]=null)),fr.buffers[gr]||(Zr=fr.buffers[gr]=Ne.create(ir,uv,!1,!0)),We.buffer=Ne.getBuffer(Zr),We.size=We.buffer.dimension|0,We.normalized=!1,We.type=We.buffer.dtype,We.offset=0,We.stride=0,We.divisor=0,We.state=1,_r[gr]=1}else Ne.getBuffer(ir)?(We.buffer=Ne.getBuffer(ir),We.size=We.buffer.dimension|0,We.normalized=!1,We.type=We.buffer.dtype,We.offset=0,We.stride=0,We.divisor=0,We.state=1):Ne.getBuffer(ir.buffer)?(We.buffer=Ne.getBuffer(ir.buffer),We.size=(+ir.size||We.buffer.dimension)|0,We.normalized=!!ir.normalized||!1,"type"in ir?(st.parameter(ir.type,is,"invalid buffer type"),We.type=is[ir.type]):We.type=We.buffer.dtype,We.offset=(ir.offset||0)|0,We.stride=(ir.stride||0)|0,We.divisor=(ir.divisor||0)|0,We.state=1,st(We.size>=1&&We.size<=4,"size must be between 1 and 4"),st(We.offset>=0,"invalid offset"),st(We.stride>=0&&We.stride<=255,"stride must be between 0 and 255"),st(We.divisor>=0,"divisor must be positive"),st(!We.divisor||!!Nt.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in ir?(st(gr>0,"first attribute must not be a constant"),We.x=+ir.x||0,We.y=+ir.y||0,We.z=+ir.z||0,We.w=+ir.w||0,We.state=2):st(!1,"invalid attribute spec for location "+gr)}for(var Er=0;Er<fr.buffers.length;++Er)!_r[Er]&&fr.buffers[Er]&&(fr.buffers[Er].destroy(),fr.buffers[Er]=null);return fr.refresh(),Ye}return Ye.destroy=function(){for(var hr=0;hr<fr.buffers.length;++hr)fr.buffers[hr]&&fr.buffers[hr].destroy();fr.buffers.length=0,fr.destroy()},Ye._vao=fr,Ye._reglType="vao",Ye(He)}return tr}var Op=35632,Is=35633,_x=35718,cv=35721;function Sx(it,Nt,Yt,Me){var Ne={},Se={};function ce(ge,Oe,rr,yr){this.name=ge,this.id=Oe,this.location=rr,this.info=yr}function $e(ge,Oe){for(var rr=0;rr<ge.length;++rr)if(ge[rr].id===Oe.id){ge[rr].location=Oe.location;return}ge.push(Oe)}function qe(ge,Oe,rr){var yr=ge===Op?Ne:Se,Xe=yr[Oe];if(!Xe){var xr=Nt.str(Oe);Xe=it.createShader(ge),it.shaderSource(Xe,xr),it.compileShader(Xe),st.shaderError(it,Xe,xr,ge,rr),yr[Oe]=Xe}return Xe}var nr={},tr=[],or=0;function vr(ge,Oe){this.id=or++,this.fragId=ge,this.vertId=Oe,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Me.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Qe(ge,Oe,rr){var yr,Xe,xr=qe(Op,ge.fragId),He=qe(Is,ge.vertId),fr=ge.program=it.createProgram();if(it.attachShader(fr,xr),it.attachShader(fr,He),rr)for(yr=0;yr<rr.length;++yr){var Ye=rr[yr];it.bindAttribLocation(fr,Ye[0],Ye[1])}it.linkProgram(fr),st.linkError(it,fr,Nt.str(ge.fragId),Nt.str(ge.vertId),Oe);var hr=it.getProgramParameter(fr,_x);Me.profile&&(ge.stats.uniformsCount=hr);var _r=ge.uniforms;for(yr=0;yr<hr;++yr)if(Xe=it.getActiveUniform(fr,yr),Xe)if(Xe.size>1)for(var Hr=0;Hr<Xe.size;++Hr){var gr=Xe.name.replace("[0]","["+Hr+"]");$e(_r,new ce(gr,Nt.id(gr),it.getUniformLocation(fr,gr),Xe))}else $e(_r,new ce(Xe.name,Nt.id(Xe.name),it.getUniformLocation(fr,Xe.name),Xe));var ir=it.getProgramParameter(fr,cv);Me.profile&&(ge.stats.attributesCount=ir);var We=ge.attributes;for(yr=0;yr<ir;++yr)Xe=it.getActiveAttrib(fr,yr),Xe&&$e(We,new ce(Xe.name,Nt.id(Xe.name),it.getAttribLocation(fr,Xe.name),Xe))}Me.profile&&(Yt.getMaxUniformsCount=function(){var ge=0;return tr.forEach(function(Oe){Oe.stats.uniformsCount>ge&&(ge=Oe.stats.uniformsCount)}),ge},Yt.getMaxAttributesCount=function(){var ge=0;return tr.forEach(function(Oe){Oe.stats.attributesCount>ge&&(ge=Oe.stats.attributesCount)}),ge});function lr(){Ne={},Se={};for(var ge=0;ge<tr.length;++ge)Qe(tr[ge],null,tr[ge].attributes.map(function(Oe){return[Oe.location,Oe.name]}))}return{clear:function(){var ge=it.deleteShader.bind(it);yi(Ne).forEach(ge),Ne={},yi(Se).forEach(ge),Se={},tr.forEach(function(Oe){it.deleteProgram(Oe.program)}),tr.length=0,nr={},Yt.shaderCount=0},program:function(ge,Oe,rr,yr){st.command(ge>=0,"missing vertex shader",rr),st.command(Oe>=0,"missing fragment shader",rr);var Xe=nr[Oe];Xe||(Xe=nr[Oe]={});var xr=Xe[ge];if(xr&&(xr.refCount++,!yr))return xr;var He=new vr(Oe,ge);return Yt.shaderCount++,Qe(He,rr,yr),xr||(Xe[ge]=He),tr.push(He),x(He,{destroy:function(){if(He.refCount--,He.refCount<=0){it.deleteProgram(He.program);var fr=tr.indexOf(He);tr.splice(fr,1),Yt.shaderCount--}Xe[He.vertId].refCount<=0&&(it.deleteShader(Se[He.vertId]),delete Se[He.vertId],delete nr[He.fragId][He.vertId]),Object.keys(nr[He.fragId]).length||(it.deleteShader(Ne[He.fragId]),delete Ne[He.fragId],delete nr[He.fragId])}})},restore:lr,shader:qe,frag:-1,vert:-1}}var Pp=6408,iu=5121,Ex=3333,ih=5126;function gS(it,Nt,Yt,Me,Ne,Se,ce){function $e(tr){var or;Nt.next===null?(st(Ne.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),or=iu):(st(Nt.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),or=Nt.next.colorAttachments[0].texture._texture.type,Se.oes_texture_float?(st(or===iu||or===ih,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),or===ih&&st(ce.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):st(or===iu,"Reading from a framebuffer is only allowed for the type 'uint8'"));var vr=0,Qe=0,lr=Me.framebufferWidth,ge=Me.framebufferHeight,Oe=null;L(tr)?Oe=tr:tr&&(st.type(tr,"object","invalid arguments to regl.read()"),vr=tr.x|0,Qe=tr.y|0,st(vr>=0&&vr<Me.framebufferWidth,"invalid x offset for regl.read"),st(Qe>=0&&Qe<Me.framebufferHeight,"invalid y offset for regl.read"),lr=(tr.width||Me.framebufferWidth-vr)|0,ge=(tr.height||Me.framebufferHeight-Qe)|0,Oe=tr.data||null),Oe&&(or===iu?st(Oe instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):or===ih&&st(Oe instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),st(lr>0&&lr+vr<=Me.framebufferWidth,"invalid width for read pixels"),st(ge>0&&ge+Qe<=Me.framebufferHeight,"invalid height for read pixels"),Yt();var rr=lr*ge*4;return Oe||(or===iu?Oe=new Uint8Array(rr):or===ih&&(Oe=Oe||new Float32Array(rr))),st.isTypedArray(Oe,"data buffer for regl.read() must be a typedarray"),st(Oe.byteLength>=rr,"data buffer for regl.read() too small"),it.pixelStorei(Ex,4),it.readPixels(vr,Qe,lr,ge,Pp,or,Oe),Oe}function qe(tr){var or;return Nt.setFBO({framebuffer:tr.framebuffer},function(){or=$e(tr)}),or}function nr(tr){return!tr||!("framebuffer"in tr)?$e(tr):qe(tr)}return nr}function au(it){return Array.prototype.slice.call(it)}function ou(it){return au(it).join("")}function wx(){var it=0,Nt=[],Yt=[];function Me(or){for(var vr=0;vr<Yt.length;++vr)if(Yt[vr]===or)return Nt[vr];var Qe="g"+it++;return Nt.push(Qe),Yt.push(or),Qe}function Ne(){var or=[];function vr(){or.push.apply(or,au(arguments))}var Qe=[];function lr(){var ge="v"+it++;return Qe.push(ge),arguments.length>0&&(or.push(ge,"="),or.push.apply(or,au(arguments)),or.push(";")),ge}return x(vr,{def:lr,toString:function(){return ou([Qe.length>0?"var "+Qe.join(",")+";":"",ou(or)])}})}function Se(){var or=Ne(),vr=Ne(),Qe=or.toString,lr=vr.toString;function ge(Oe,rr){vr(Oe,rr,"=",or.def(Oe,rr),";")}return x(function(){or.apply(or,au(arguments))},{def:or.def,entry:or,exit:vr,save:ge,set:function(Oe,rr,yr){ge(Oe,rr),or(Oe,rr,"=",yr,";")},toString:function(){return Qe()+lr()}})}function ce(){var or=ou(arguments),vr=Se(),Qe=Se(),lr=vr.toString,ge=Qe.toString;return x(vr,{then:function(){return vr.apply(vr,au(arguments)),this},else:function(){return Qe.apply(Qe,au(arguments)),this},toString:function(){var Oe=ge();return Oe&&(Oe="else{"+Oe+"}"),ou(["if(",or,"){",lr(),"}",Oe])}})}var $e=Ne(),qe={};function nr(or,vr){var Qe=[];function lr(){var Xe="a"+Qe.length;return Qe.push(Xe),Xe}vr=vr||0;for(var ge=0;ge<vr;++ge)lr();var Oe=Se(),rr=Oe.toString,yr=qe[or]=x(Oe,{arg:lr,toString:function(){return ou(["function(",Qe.join(),"){",rr(),"}"])}});return yr}function tr(){var or=['"use strict";',$e,"return {"];Object.keys(qe).forEach(function(lr){or.push('"',lr,'":',qe[lr].toString(),",")}),or.push("}");var vr=ou(or).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Qe=Function.apply(null,Nt.concat(vr));return Qe.apply(null,Yt)}return{global:$e,link:Me,block:Ne,proc:nr,scope:Se,cond:ce,compile:tr}}var Ec="xyzw".split(""),Dp=5121,su=1,fv=2,hv=0,wc=1,ah=2,oh=3,sh=4,dv=5,vv=6,gv="dither",pv="blend.enable",yv="blend.color",mv="blend.equation",lh="blend.func",xv="depth.enable",bv="depth.func",ml="depth.range",Lp="depth.mask",xl="colorMask",uh="cull.enable",Rp="cull.face",_v="frontFace",Sv="lineWidth",Np="polygonOffset.enable",Ev="polygonOffset.offset",kp="sample.alpha",Bp="sample.enable",wv="sample.coverage",Fp="stencil.enable",Cv="stencil.mask",ch="stencil.func",Cc="stencil.opFront",lu="stencil.opBack",Mv="scissor.enable",Av="scissor.box",cs="viewport",Mc="profile",bl="framebuffer",uu="vert",Ac="frag",Os="elements",Ps="primitive",_l="count",fh="offset",hh="instances",cu="vao",Tv="Width",Iv="Height",fu=bl+Tv,hu=bl+Iv,Cx=cs+Tv,Gp=cs+Iv,zp="drawingBuffer",Ov=zp+Tv,Mx=zp+Iv,Up=[lh,mv,ch,Cc,lu,wv,cs,Av,Ev],du=34962,Ax=34963,Tx=35632,Wp=35633,Pv=3553,Ix=34067,pS=2884,yS=3042,mS=3024,xS=2960,bS=2929,_S=3089,Vp=32823,Uo=32926,SS=32928,dh=5126,Tc=35664,mi=35665,Ic=35666,Oc=5124,vh=35667,gh=35668,vu=35669,Dv=35670,ph=35671,yh=35672,mh=35673,Pc=35674,Dc=35675,Ma=35676,Lc=35678,Ds=35680,Xp=4,Rc=1028,Sl=1029,Ox=2304,xh=2305,Yp=32775,gu=32776,Lv=519,Ls=7680,Nc=0,Hp=1,Rv=32774,kc=513,Bc=36160,Nv=36064,Wo={"0":0,"1":1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},pu=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],yu={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},fo={"0":0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Rs={frag:Tx,vert:Wp},Ns={cw:Ox,ccw:xh};function bh(it){return Array.isArray(it)||L(it)||Qa(it)}function Px(it){return it.sort(function(Nt,Yt){return Nt===cs?-1:Yt===cs?1:Nt<Yt?-1:1})}function na(it,Nt,Yt,Me){this.thisDep=it,this.contextDep=Nt,this.propDep=Yt,this.append=Me}function ks(it){return it&&!(it.thisDep||it.contextDep||it.propDep)}function Gi(it){return new na(!1,!1,!1,it)}function Aa(it,Nt){var Yt=it.type;if(Yt===hv){var Me=it.data.length;return new na(!0,Me>=1,Me>=2,Nt)}else if(Yt===sh){var Ne=it.data;return new na(Ne.thisDep,Ne.contextDep,Ne.propDep,Nt)}else{if(Yt===dv)return new na(!1,!1,!1,Nt);if(Yt===vv){for(var Se=!1,ce=!1,$e=!1,qe=0;qe<it.data.length;++qe){var nr=it.data[qe];if(nr.type===wc)$e=!0;else if(nr.type===ah)ce=!0;else if(nr.type===oh)Se=!0;else if(nr.type===hv){Se=!0;var tr=nr.data;tr>=1&&(ce=!0),tr>=2&&($e=!0)}else nr.type===sh&&(Se=Se||nr.data.thisDep,ce=ce||nr.data.contextDep,$e=$e||nr.data.propDep)}return new na(Se,ce,$e,Nt)}else return new na(Yt===oh,Yt===ah,Yt===wc,Nt)}}var jp=new na(!1,!1,!1,function(){});function Wa(it,Nt,Yt,Me,Ne,Se,ce,$e,qe,nr,tr,or,vr,Qe,lr){var ge=nr.Record,Oe={add:32774,subtract:32778,"reverse subtract":32779};Yt.ext_blend_minmax&&(Oe.min=Yp,Oe.max=gu);var rr=Yt.angle_instanced_arrays,yr=Yt.webgl_draw_buffers,Xe={dirty:!0,profile:lr.profile},xr={},He=[],fr={},Ye={};function hr(Ft){return Ft.replace(".","_")}function _r(Ft,Dt,qt){var fe=hr(Ft);He.push(Ft),xr[fe]=Xe[fe]=!!qt,fr[fe]=Dt}function Hr(Ft,Dt,qt){var fe=hr(Ft);He.push(Ft),Array.isArray(qt)?(Xe[fe]=qt.slice(),xr[fe]=qt.slice()):Xe[fe]=xr[fe]=qt,Ye[fe]=Dt}_r(gv,mS),_r(pv,yS),Hr(yv,"blendColor",[0,0,0,0]),Hr(mv,"blendEquationSeparate",[Rv,Rv]),Hr(lh,"blendFuncSeparate",[Hp,Nc,Hp,Nc]),_r(xv,bS,!0),Hr(bv,"depthFunc",kc),Hr(ml,"depthRange",[0,1]),Hr(Lp,"depthMask",!0),Hr(xl,xl,[!0,!0,!0,!0]),_r(uh,pS),Hr(Rp,"cullFace",Sl),Hr(_v,_v,xh),Hr(Sv,Sv,1),_r(Np,Vp),Hr(Ev,"polygonOffset",[0,0]),_r(kp,Uo),_r(Bp,SS),Hr(wv,"sampleCoverage",[1,!1]),_r(Fp,xS),Hr(Cv,"stencilMask",-1),Hr(ch,"stencilFunc",[Lv,0,-1]),Hr(Cc,"stencilOpSeparate",[Rc,Ls,Ls,Ls]),Hr(lu,"stencilOpSeparate",[Sl,Ls,Ls,Ls]),_r(Mv,_S),Hr(Av,"scissor",[0,0,it.drawingBufferWidth,it.drawingBufferHeight]),Hr(cs,cs,[0,0,it.drawingBufferWidth,it.drawingBufferHeight]);var gr={gl:it,context:vr,strings:Nt,next:xr,current:Xe,draw:or,elements:Se,buffer:Ne,shader:tr,attributes:nr.state,vao:nr,uniforms:qe,framebuffer:$e,extensions:Yt,timer:Qe,isBufferArgs:bh},ir={primTypes:os,compareFuncs:yu,blendFuncs:Wo,blendEquations:Oe,stencilOps:fo,glTypes:is,orientationType:Ns};st.optional(function(){gr.isArrayLike=wn}),yr&&(ir.backBuffer=[Sl],ir.drawBuffer=Vr(Me.maxDrawbuffers,function(Ft){return Ft===0?[0]:Vr(Ft,function(Dt){return Nv+Dt})}));var We=0;function Br(){var Ft=wx(),Dt=Ft.link,qt=Ft.global;Ft.id=We++,Ft.batchId="0";var fe=Dt(gr),pe=Ft.shared={props:"a0"};Object.keys(gr).forEach(function(Zt){pe[Zt]=qt.def(fe,".",Zt)}),st.optional(function(){Ft.CHECK=Dt(st),Ft.commandStr=st.guessCommand(),Ft.command=Dt(Ft.commandStr),Ft.assert=function(Zt,kt,ue){Zt("if(!(",kt,"))",this.CHECK,".commandRaise(",Dt(ue),",",this.command,");")},ir.invalidBlendCombinations=pu});var re=Ft.next={},Jt=Ft.current={};Object.keys(Ye).forEach(function(Zt){Array.isArray(Xe[Zt])&&(re[Zt]=qt.def(pe.next,".",Zt),Jt[Zt]=qt.def(pe.current,".",Zt))});var le=Ft.constants={};Object.keys(ir).forEach(function(Zt){le[Zt]=qt.def(JSON.stringify(ir[Zt]))}),Ft.invoke=function(Zt,kt){switch(kt.type){case hv:var ue=["this",pe.context,pe.props,Ft.batchId];return Zt.def(Dt(kt.data),".call(",ue.slice(0,Math.max(kt.data.length+1,4)),")");case wc:return Zt.def(pe.props,kt.data);case ah:return Zt.def(pe.context,kt.data);case oh:return Zt.def("this",kt.data);case sh:return kt.data.append(Ft,Zt),kt.data.ref;case dv:return kt.data.toString();case vv:return kt.data.map(function(xe){return Ft.invoke(Zt,xe)})}},Ft.attribCache={};var Bt={};return Ft.scopeAttrib=function(Zt){var kt=Nt.id(Zt);if(kt in Bt)return Bt[kt];var ue=nr.scope[kt];ue||(ue=nr.scope[kt]=new ge);var xe=Bt[kt]=Dt(ue);return xe},Ft}function Zr(Ft){var Dt=Ft.static,qt=Ft.dynamic,fe;if(Mc in Dt){var pe=!!Dt[Mc];fe=Gi(function(Jt,le){return pe}),fe.enable=pe}else if(Mc in qt){var re=qt[Mc];fe=Aa(re,function(Jt,le){return Jt.invoke(le,re)})}return fe}function Er(Ft,Dt){var qt=Ft.static,fe=Ft.dynamic;if(bl in qt){var pe=qt[bl];return pe?(pe=$e.getFramebuffer(pe),st.command(pe,"invalid framebuffer object"),Gi(function(Jt,le){var Bt=Jt.link(pe),Zt=Jt.shared;le.set(Zt.framebuffer,".next",Bt);var kt=Zt.context;return le.set(kt,"."+fu,Bt+".width"),le.set(kt,"."+hu,Bt+".height"),Bt})):Gi(function(Jt,le){var Bt=Jt.shared;le.set(Bt.framebuffer,".next","null");var Zt=Bt.context;return le.set(Zt,"."+fu,Zt+"."+Ov),le.set(Zt,"."+hu,Zt+"."+Mx),"null"})}else if(bl in fe){var re=fe[bl];return Aa(re,function(Jt,le){var Bt=Jt.invoke(le,re),Zt=Jt.shared,kt=Zt.framebuffer,ue=le.def(kt,".getFramebuffer(",Bt,")");st.optional(function(){Jt.assert(le,"!"+Bt+"||"+ue,"invalid framebuffer object")}),le.set(kt,".next",ue);var xe=Zt.context;return le.set(xe,"."+fu,ue+"?"+ue+".width:"+xe+"."+Ov),le.set(xe,"."+hu,ue+"?"+ue+".height:"+xe+"."+Mx),ue})}else return null}function an(Ft,Dt,qt){var fe=Ft.static,pe=Ft.dynamic;function re(Bt){if(Bt in fe){var Zt=fe[Bt];st.commandType(Zt,"object","invalid "+Bt,qt.commandStr);var kt=!0,ue=Zt.x|0,xe=Zt.y|0,ke,Be;return"width"in Zt?(ke=Zt.width|0,st.command(ke>=0,"invalid "+Bt,qt.commandStr)):kt=!1,"height"in Zt?(Be=Zt.height|0,st.command(Be>=0,"invalid "+Bt,qt.commandStr)):kt=!1,new na(!kt&&Dt&&Dt.thisDep,!kt&&Dt&&Dt.contextDep,!kt&&Dt&&Dt.propDep,function(Or,Jr){var wr=Or.shared.context,Nr=ke;"width"in Zt||(Nr=Jr.def(wr,".",fu,"-",ue));var jr=Be;return"height"in Zt||(jr=Jr.def(wr,".",hu,"-",xe)),[ue,xe,Nr,jr]})}else if(Bt in pe){var De=pe[Bt],er=Aa(De,function(Or,Jr){var wr=Or.invoke(Jr,De);st.optional(function(){Or.assert(Jr,wr+"&&typeof "+wr+'==="object"',"invalid "+Bt)});var Nr=Or.shared.context,jr=Jr.def(wr,".x|0"),yn=Jr.def(wr,".y|0"),_i=Jr.def('"width" in ',wr,"?",wr,".width|0:","(",Nr,".",fu,"-",jr,")"),Ta=Jr.def('"height" in ',wr,"?",wr,".height|0:","(",Nr,".",hu,"-",yn,")");return st.optional(function(){Or.assert(Jr,_i+">=0&&"+Ta+">=0","invalid "+Bt)}),[jr,yn,_i,Ta]});return Dt&&(er.thisDep=er.thisDep||Dt.thisDep,er.contextDep=er.contextDep||Dt.contextDep,er.propDep=er.propDep||Dt.propDep),er}else return Dt?new na(Dt.thisDep,Dt.contextDep,Dt.propDep,function(Or,Jr){var wr=Or.shared.context;return[0,0,Jr.def(wr,".",fu),Jr.def(wr,".",hu)]}):null}var Jt=re(cs);if(Jt){var le=Jt;Jt=new na(Jt.thisDep,Jt.contextDep,Jt.propDep,function(Bt,Zt){var kt=le.append(Bt,Zt),ue=Bt.shared.context;return Zt.set(ue,"."+Cx,kt[2]),Zt.set(ue,"."+Gp,kt[3]),kt})}return{viewport:Jt,scissor_box:re(Av)}}function Ur(Ft,Dt){var qt=Ft.static,fe=typeof qt[Ac]=="string"&&typeof qt[uu]=="string";if(fe){if(Object.keys(Dt.dynamic).length>0)return null;var pe=Dt.static,re=Object.keys(pe);if(re.length>0&&typeof pe[re[0]]=="number"){for(var Jt=[],le=0;le<re.length;++le)st(typeof pe[re[le]]=="number","must specify all vertex attribute locations when using vaos"),Jt.push([pe[re[le]]|0,re[le]]);return Jt}}return null}function en(Ft,Dt,qt){var fe=Ft.static,pe=Ft.dynamic;function re(kt){if(kt in fe){var ue=Nt.id(fe[kt]);st.optional(function(){tr.shader(Rs[kt],ue,st.guessCommand())});var xe=Gi(function(){return ue});return xe.id=ue,xe}else if(kt in pe){var ke=pe[kt];return Aa(ke,function(Be,De){var er=Be.invoke(De,ke),Or=De.def(Be.shared.strings,".id(",er,")");return st.optional(function(){De(Be.shared.shader,".shader(",Rs[kt],",",Or,",",Be.command,");")}),Or})}return null}var Jt=re(Ac),le=re(uu),Bt=null,Zt;return ks(Jt)&&ks(le)?(Bt=tr.program(le.id,Jt.id,null,qt),Zt=Gi(function(kt,ue){return kt.link(Bt)})):Zt=new na(Jt&&Jt.thisDep||le&&le.thisDep,Jt&&Jt.contextDep||le&&le.contextDep,Jt&&Jt.propDep||le&&le.propDep,function(kt,ue){var xe=kt.shared.shader,ke;Jt?ke=Jt.append(kt,ue):ke=ue.def(xe,".",Ac);var Be;le?Be=le.append(kt,ue):Be=ue.def(xe,".",uu);var De=xe+".program("+Be+","+ke;return st.optional(function(){De+=","+kt.command}),ue.def(De+")")}),{frag:Jt,vert:le,progVar:Zt,program:Bt}}function mn(Ft,Dt){var qt=Ft.static,fe=Ft.dynamic;function pe(){if(Os in qt){var kt=qt[Os];bh(kt)?kt=Se.getElements(Se.create(kt,!0)):kt&&(kt=Se.getElements(kt),st.command(kt,"invalid elements",Dt.commandStr));var ue=Gi(function(ke,Be){if(kt){var De=ke.link(kt);return ke.ELEMENTS=De,De}return ke.ELEMENTS=null,null});return ue.value=kt,ue}else if(Os in fe){var xe=fe[Os];return Aa(xe,function(ke,Be){var De=ke.shared,er=De.isBufferArgs,Or=De.elements,Jr=ke.invoke(Be,xe),wr=Be.def("null"),Nr=Be.def(er,"(",Jr,")"),jr=ke.cond(Nr).then(wr,"=",Or,".createStream(",Jr,");").else(wr,"=",Or,".getElements(",Jr,");");return st.optional(function(){ke.assert(jr.else,"!"+Jr+"||"+wr,"invalid elements")}),Be.entry(jr),Be.exit(ke.cond(Nr).then(Or,".destroyStream(",wr,");")),ke.ELEMENTS=wr,wr})}return null}var re=pe();function Jt(){if(Ps in qt){var kt=qt[Ps];return st.commandParameter(kt,os,"invalid primitve",Dt.commandStr),Gi(function(xe,ke){return os[kt]})}else if(Ps in fe){var ue=fe[Ps];return Aa(ue,function(xe,ke){var Be=xe.constants.primTypes,De=xe.invoke(ke,ue);return st.optional(function(){xe.assert(ke,De+" in "+Be,"invalid primitive, must be one of "+Object.keys(os))}),ke.def(Be,"[",De,"]")})}else if(re)return ks(re)?re.value?Gi(function(xe,ke){return ke.def(xe.ELEMENTS,".primType")}):Gi(function(){return Xp}):new na(re.thisDep,re.contextDep,re.propDep,function(xe,ke){var Be=xe.ELEMENTS;return ke.def(Be,"?",Be,".primType:",Xp)});return null}function le(kt,ue){if(kt in qt){var xe=qt[kt]|0;return st.command(!ue||xe>=0,"invalid "+kt,Dt.commandStr),Gi(function(Be,De){return ue&&(Be.OFFSET=xe),xe})}else if(kt in fe){var ke=fe[kt];return Aa(ke,function(Be,De){var er=Be.invoke(De,ke);return ue&&(Be.OFFSET=er,st.optional(function(){Be.assert(De,er+">=0","invalid "+kt)})),er})}else if(ue&&re)return Gi(function(Be,De){return Be.OFFSET="0",0});return null}var Bt=le(fh,!0);function Zt(){if(_l in qt){var kt=qt[_l]|0;return st.command(typeof kt=="number"&&kt>=0,"invalid vertex count",Dt.commandStr),Gi(function(){return kt})}else if(_l in fe){var ue=fe[_l];return Aa(ue,function(Be,De){var er=Be.invoke(De,ue);return st.optional(function(){Be.assert(De,"typeof "+er+'==="number"&&'+er+">=0&&"+er+"===("+er+"|0)","invalid vertex count")}),er})}else if(re)if(ks(re)){if(re)return Bt?new na(Bt.thisDep,Bt.contextDep,Bt.propDep,function(Be,De){var er=De.def(Be.ELEMENTS,".vertCount-",Be.OFFSET);return st.optional(function(){Be.assert(De,er+">=0","invalid vertex offset/element buffer too small")}),er}):Gi(function(Be,De){return De.def(Be.ELEMENTS,".vertCount")});var xe=Gi(function(){return-1});return st.optional(function(){xe.MISSING=!0}),xe}else{var ke=new na(re.thisDep||Bt.thisDep,re.contextDep||Bt.contextDep,re.propDep||Bt.propDep,function(Be,De){var er=Be.ELEMENTS;return Be.OFFSET?De.def(er,"?",er,".vertCount-",Be.OFFSET,":-1"):De.def(er,"?",er,".vertCount:-1")});return st.optional(function(){ke.DYNAMIC=!0}),ke}return null}return{elements:re,primitive:Jt(),count:Zt(),instances:le(hh,!1),offset:Bt}}function xi(Ft,Dt){var qt=Ft.static,fe=Ft.dynamic,pe={};return He.forEach(function(re){var Jt=hr(re);function le(Bt,Zt){if(re in qt){var kt=Bt(qt[re]);pe[Jt]=Gi(function(){return kt})}else if(re in fe){var ue=fe[re];pe[Jt]=Aa(ue,function(xe,ke){return Zt(xe,ke,xe.invoke(ke,ue))})}}switch(re){case uh:case pv:case gv:case Fp:case xv:case Mv:case Np:case kp:case Bp:case Lp:return le(function(Bt){return st.commandType(Bt,"boolean",re,Dt.commandStr),Bt},function(Bt,Zt,kt){return st.optional(function(){Bt.assert(Zt,"typeof "+kt+'==="boolean"',"invalid flag "+re,Bt.commandStr)}),kt});case bv:return le(function(Bt){return st.commandParameter(Bt,yu,"invalid "+re,Dt.commandStr),yu[Bt]},function(Bt,Zt,kt){var ue=Bt.constants.compareFuncs;return st.optional(function(){Bt.assert(Zt,kt+" in "+ue,"invalid "+re+", must be one of "+Object.keys(yu))}),Zt.def(ue,"[",kt,"]")});case ml:return le(function(Bt){return st.command(wn(Bt)&&Bt.length===2&&typeof Bt[0]=="number"&&typeof Bt[1]=="number"&&Bt[0]<=Bt[1],"depth range is 2d array",Dt.commandStr),Bt},function(Bt,Zt,kt){st.optional(function(){Bt.assert(Zt,Bt.shared.isArrayLike+"("+kt+")&&"+kt+".length===2&&typeof "+kt+'[0]==="number"&&typeof '+kt+'[1]==="number"&&'+kt+"[0]<="+kt+"[1]","depth range must be a 2d array")});var ue=Zt.def("+",kt,"[0]"),xe=Zt.def("+",kt,"[1]");return[ue,xe]});case lh:return le(function(Bt){st.commandType(Bt,"object","blend.func",Dt.commandStr);var Zt="srcRGB"in Bt?Bt.srcRGB:Bt.src,kt="srcAlpha"in Bt?Bt.srcAlpha:Bt.src,ue="dstRGB"in Bt?Bt.dstRGB:Bt.dst,xe="dstAlpha"in Bt?Bt.dstAlpha:Bt.dst;return st.commandParameter(Zt,Wo,Jt+".srcRGB",Dt.commandStr),st.commandParameter(kt,Wo,Jt+".srcAlpha",Dt.commandStr),st.commandParameter(ue,Wo,Jt+".dstRGB",Dt.commandStr),st.commandParameter(xe,Wo,Jt+".dstAlpha",Dt.commandStr),st.command(pu.indexOf(Zt+", "+ue)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Zt+", "+ue+")",Dt.commandStr),[Wo[Zt],Wo[ue],Wo[kt],Wo[xe]]},function(Bt,Zt,kt){var ue=Bt.constants.blendFuncs;st.optional(function(){Bt.assert(Zt,kt+"&&typeof "+kt+'==="object"',"invalid blend func, must be an object")});function xe(wr,Nr){var jr=Zt.def('"',wr,Nr,'" in ',kt,"?",kt,".",wr,Nr,":",kt,".",wr);return st.optional(function(){Bt.assert(Zt,jr+" in "+ue,"invalid "+re+"."+wr+Nr+", must be one of "+Object.keys(Wo))}),jr}var ke=xe("src","RGB"),Be=xe("dst","RGB");st.optional(function(){var wr=Bt.constants.invalidBlendCombinations;Bt.assert(Zt,wr+".indexOf("+ke+'+", "+'+Be+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var De=Zt.def(ue,"[",ke,"]"),er=Zt.def(ue,"[",xe("src","Alpha"),"]"),Or=Zt.def(ue,"[",Be,"]"),Jr=Zt.def(ue,"[",xe("dst","Alpha"),"]");return[De,Or,er,Jr]});case mv:return le(function(Bt){if(typeof Bt=="string")return st.commandParameter(Bt,Oe,"invalid "+re,Dt.commandStr),[Oe[Bt],Oe[Bt]];if(typeof Bt=="object")return st.commandParameter(Bt.rgb,Oe,re+".rgb",Dt.commandStr),st.commandParameter(Bt.alpha,Oe,re+".alpha",Dt.commandStr),[Oe[Bt.rgb],Oe[Bt.alpha]];st.commandRaise("invalid blend.equation",Dt.commandStr)},function(Bt,Zt,kt){var ue=Bt.constants.blendEquations,xe=Zt.def(),ke=Zt.def(),Be=Bt.cond("typeof ",kt,'==="string"');return st.optional(function(){function De(er,Or,Jr){Bt.assert(er,Jr+" in "+ue,"invalid "+Or+", must be one of "+Object.keys(Oe))}De(Be.then,re,kt),Bt.assert(Be.else,kt+"&&typeof "+kt+'==="object"',"invalid "+re),De(Be.else,re+".rgb",kt+".rgb"),De(Be.else,re+".alpha",kt+".alpha")}),Be.then(xe,"=",ke,"=",ue,"[",kt,"];"),Be.else(xe,"=",ue,"[",kt,".rgb];",ke,"=",ue,"[",kt,".alpha];"),Zt(Be),[xe,ke]});case yv:return le(function(Bt){return st.command(wn(Bt)&&Bt.length===4,"blend.color must be a 4d array",Dt.commandStr),Vr(4,function(Zt){return+Bt[Zt]})},function(Bt,Zt,kt){return st.optional(function(){Bt.assert(Zt,Bt.shared.isArrayLike+"("+kt+")&&"+kt+".length===4","blend.color must be a 4d array")}),Vr(4,function(ue){return Zt.def("+",kt,"[",ue,"]")})});case Cv:return le(function(Bt){return st.commandType(Bt,"number",Jt,Dt.commandStr),Bt|0},function(Bt,Zt,kt){return st.optional(function(){Bt.assert(Zt,"typeof "+kt+'==="number"',"invalid stencil.mask")}),Zt.def(kt,"|0")});case ch:return le(function(Bt){st.commandType(Bt,"object",Jt,Dt.commandStr);var Zt=Bt.cmp||"keep",kt=Bt.ref||0,ue="mask"in Bt?Bt.mask:-1;return st.commandParameter(Zt,yu,re+".cmp",Dt.commandStr),st.commandType(kt,"number",re+".ref",Dt.commandStr),st.commandType(ue,"number",re+".mask",Dt.commandStr),[yu[Zt],kt,ue]},function(Bt,Zt,kt){var ue=Bt.constants.compareFuncs;st.optional(function(){function De(){Bt.assert(Zt,Array.prototype.join.call(arguments,""),"invalid stencil.func")}De(kt+"&&typeof ",kt,'==="object"'),De('!("cmp" in ',kt,")||(",kt,".cmp in ",ue,")")});var xe=Zt.def('"cmp" in ',kt,"?",ue,"[",kt,".cmp]",":",Ls),ke=Zt.def(kt,".ref|0"),Be=Zt.def('"mask" in ',kt,"?",kt,".mask|0:-1");return[xe,ke,Be]});case Cc:case lu:return le(function(Bt){st.commandType(Bt,"object",Jt,Dt.commandStr);var Zt=Bt.fail||"keep",kt=Bt.zfail||"keep",ue=Bt.zpass||"keep";return st.commandParameter(Zt,fo,re+".fail",Dt.commandStr),st.commandParameter(kt,fo,re+".zfail",Dt.commandStr),st.commandParameter(ue,fo,re+".zpass",Dt.commandStr),[re===lu?Sl:Rc,fo[Zt],fo[kt],fo[ue]]},function(Bt,Zt,kt){var ue=Bt.constants.stencilOps;st.optional(function(){Bt.assert(Zt,kt+"&&typeof "+kt+'==="object"',"invalid "+re)});function xe(ke){return st.optional(function(){Bt.assert(Zt,'!("'+ke+'" in '+kt+")||("+kt+"."+ke+" in "+ue+")","invalid "+re+"."+ke+", must be one of "+Object.keys(fo))}),Zt.def('"',ke,'" in ',kt,"?",ue,"[",kt,".",ke,"]:",Ls)}return[re===lu?Sl:Rc,xe("fail"),xe("zfail"),xe("zpass")]});case Ev:return le(function(Bt){st.commandType(Bt,"object",Jt,Dt.commandStr);var Zt=Bt.factor|0,kt=Bt.units|0;return st.commandType(Zt,"number",Jt+".factor",Dt.commandStr),st.commandType(kt,"number",Jt+".units",Dt.commandStr),[Zt,kt]},function(Bt,Zt,kt){st.optional(function(){Bt.assert(Zt,kt+"&&typeof "+kt+'==="object"',"invalid "+re)});var ue=Zt.def(kt,".factor|0"),xe=Zt.def(kt,".units|0");return[ue,xe]});case Rp:return le(function(Bt){var Zt=0;return Bt==="front"?Zt=Rc:Bt==="back"&&(Zt=Sl),st.command(!!Zt,Jt,Dt.commandStr),Zt},function(Bt,Zt,kt){return st.optional(function(){Bt.assert(Zt,kt+'==="front"||'+kt+'==="back"',"invalid cull.face")}),Zt.def(kt,'==="front"?',Rc,":",Sl)});case Sv:return le(function(Bt){return st.command(typeof Bt=="number"&&Bt>=Me.lineWidthDims[0]&&Bt<=Me.lineWidthDims[1],"invalid line width, must be a positive number between "+Me.lineWidthDims[0]+" and "+Me.lineWidthDims[1],Dt.commandStr),Bt},function(Bt,Zt,kt){return st.optional(function(){Bt.assert(Zt,"typeof "+kt+'==="number"&&'+kt+">="+Me.lineWidthDims[0]+"&&"+kt+"<="+Me.lineWidthDims[1],"invalid line width")}),kt});case _v:return le(function(Bt){return st.commandParameter(Bt,Ns,Jt,Dt.commandStr),Ns[Bt]},function(Bt,Zt,kt){return st.optional(function(){Bt.assert(Zt,kt+'==="cw"||'+kt+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Zt.def(kt+'==="cw"?'+Ox+":"+xh)});case xl:return le(function(Bt){return st.command(wn(Bt)&&Bt.length===4,"color.mask must be length 4 array",Dt.commandStr),Bt.map(function(Zt){return!!Zt})},function(Bt,Zt,kt){return st.optional(function(){Bt.assert(Zt,Bt.shared.isArrayLike+"("+kt+")&&"+kt+".length===4","invalid color.mask")}),Vr(4,function(ue){return"!!"+kt+"["+ue+"]"})});case wv:return le(function(Bt){st.command(typeof Bt=="object"&&Bt,Jt,Dt.commandStr);var Zt="value"in Bt?Bt.value:1,kt=!!Bt.invert;return st.command(typeof Zt=="number"&&Zt>=0&&Zt<=1,"sample.coverage.value must be a number between 0 and 1",Dt.commandStr),[Zt,kt]},function(Bt,Zt,kt){st.optional(function(){Bt.assert(Zt,kt+"&&typeof "+kt+'==="object"',"invalid sample.coverage")});var ue=Zt.def('"value" in ',kt,"?+",kt,".value:1"),xe=Zt.def("!!",kt,".invert");return[ue,xe]})}}),pe}function Hi(Ft,Dt){var qt=Ft.static,fe=Ft.dynamic,pe={};return Object.keys(qt).forEach(function(re){var Jt=qt[re],le;if(typeof Jt=="number"||typeof Jt=="boolean")le=Gi(function(){return Jt});else if(typeof Jt=="function"){var Bt=Jt._reglType;Bt==="texture2d"||Bt==="textureCube"?le=Gi(function(Zt){return Zt.link(Jt)}):Bt==="framebuffer"||Bt==="framebufferCube"?(st.command(Jt.color.length>0,'missing color attachment for framebuffer sent to uniform "'+re+'"',Dt.commandStr),le=Gi(function(Zt){return Zt.link(Jt.color[0])})):st.commandRaise('invalid data for uniform "'+re+'"',Dt.commandStr)}else wn(Jt)?le=Gi(function(Zt){var kt=Zt.global.def("[",Vr(Jt.length,function(ue){return st.command(typeof Jt[ue]=="number"||typeof Jt[ue]=="boolean","invalid uniform "+re,Zt.commandStr),Jt[ue]}),"]");return kt}):st.commandRaise('invalid or missing data for uniform "'+re+'"',Dt.commandStr);le.value=Jt,pe[re]=le}),Object.keys(fe).forEach(function(re){var Jt=fe[re];pe[re]=Aa(Jt,function(le,Bt){return le.invoke(Bt,Jt)})}),pe}function hn(Ft,Dt){var qt=Ft.static,fe=Ft.dynamic,pe={};return Object.keys(qt).forEach(function(re){var Jt=qt[re],le=Nt.id(re),Bt=new ge;if(bh(Jt))Bt.state=su,Bt.buffer=Ne.getBuffer(Ne.create(Jt,du,!1,!0)),Bt.type=0;else{var Zt=Ne.getBuffer(Jt);if(Zt)Bt.state=su,Bt.buffer=Zt,Bt.type=0;else if(st.command(typeof Jt=="object"&&Jt,"invalid data for attribute "+re,Dt.commandStr),"constant"in Jt){var kt=Jt.constant;Bt.buffer="null",Bt.state=fv,typeof kt=="number"?Bt.x=kt:(st.command(wn(kt)&&kt.length>0&&kt.length<=4,"invalid constant for attribute "+re,Dt.commandStr),Ec.forEach(function(Or,Jr){Jr<kt.length&&(Bt[Or]=kt[Jr])}))}else{bh(Jt.buffer)?Zt=Ne.getBuffer(Ne.create(Jt.buffer,du,!1,!0)):Zt=Ne.getBuffer(Jt.buffer),st.command(!!Zt,'missing buffer for attribute "'+re+'"',Dt.commandStr);var ue=Jt.offset|0;st.command(ue>=0,'invalid offset for attribute "'+re+'"',Dt.commandStr);var xe=Jt.stride|0;st.command(xe>=0&&xe<256,'invalid stride for attribute "'+re+'", must be integer betweeen [0, 255]',Dt.commandStr);var ke=Jt.size|0;st.command(!("size"in Jt)||ke>0&&ke<=4,'invalid size for attribute "'+re+'", must be 1,2,3,4',Dt.commandStr);var Be=!!Jt.normalized,De=0;"type"in Jt&&(st.commandParameter(Jt.type,is,"invalid type for attribute "+re,Dt.commandStr),De=is[Jt.type]);var er=Jt.divisor|0;"divisor"in Jt&&(st.command(er===0||rr,'cannot specify divisor for attribute "'+re+'", instancing not supported',Dt.commandStr),st.command(er>=0,'invalid divisor for attribute "'+re+'"',Dt.commandStr)),st.optional(function(){var Or=Dt.commandStr,Jr=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Jt).forEach(function(wr){st.command(Jr.indexOf(wr)>=0,'unknown parameter "'+wr+'" for attribute pointer "'+re+'" (valid parameters are '+Jr+")",Or)})}),Bt.buffer=Zt,Bt.state=su,Bt.size=ke,Bt.normalized=Be,Bt.type=De||Zt.dtype,Bt.offset=ue,Bt.stride=xe,Bt.divisor=er}}pe[re]=Gi(function(Or,Jr){var wr=Or.attribCache;if(le in wr)return wr[le];var Nr={isStream:!1};return Object.keys(Bt).forEach(function(jr){Nr[jr]=Bt[jr]}),Bt.buffer&&(Nr.buffer=Or.link(Bt.buffer),Nr.type=Nr.type||Nr.buffer+".dtype"),wr[le]=Nr,Nr})}),Object.keys(fe).forEach(function(re){var Jt=fe[re];function le(Bt,Zt){var kt=Bt.invoke(Zt,Jt),ue=Bt.shared,xe=Bt.constants,ke=ue.isBufferArgs,Be=ue.buffer;st.optional(function(){Bt.assert(Zt,kt+"&&(typeof "+kt+'==="object"||typeof '+kt+'==="function")&&('+ke+"("+kt+")||"+Be+".getBuffer("+kt+")||"+Be+".getBuffer("+kt+".buffer)||"+ke+"("+kt+'.buffer)||("constant" in '+kt+"&&(typeof "+kt+'.constant==="number"||'+ue.isArrayLike+"("+kt+".constant))))",'invalid dynamic attribute "'+re+'"')});var De={isStream:Zt.def(!1)},er=new ge;er.state=su,Object.keys(er).forEach(function(Nr){De[Nr]=Zt.def(""+er[Nr])});var Or=De.buffer,Jr=De.type;Zt("if(",ke,"(",kt,")){",De.isStream,"=true;",Or,"=",Be,".createStream(",du,",",kt,");",Jr,"=",Or,".dtype;","}else{",Or,"=",Be,".getBuffer(",kt,");","if(",Or,"){",Jr,"=",Or,".dtype;",'}else if("constant" in ',kt,"){",De.state,"=",fv,";","if(typeof "+kt+'.constant === "number"){',De[Ec[0]],"=",kt,".constant;",Ec.slice(1).map(function(Nr){return De[Nr]}).join("="),"=0;","}else{",Ec.map(function(Nr,jr){return De[Nr]+"="+kt+".constant.length>"+jr+"?"+kt+".constant["+jr+"]:0;"}).join(""),"}}else{","if(",ke,"(",kt,".buffer)){",Or,"=",Be,".createStream(",du,",",kt,".buffer);","}else{",Or,"=",Be,".getBuffer(",kt,".buffer);","}",Jr,'="type" in ',kt,"?",xe.glTypes,"[",kt,".type]:",Or,".dtype;",De.normalized,"=!!",kt,".normalized;");function wr(Nr){Zt(De[Nr],"=",kt,".",Nr,"|0;")}return wr("size"),wr("offset"),wr("stride"),wr("divisor"),Zt("}}"),Zt.exit("if(",De.isStream,"){",Be,".destroyStream(",Or,");","}"),De}pe[re]=Aa(Jt,le)}),pe}function Pi(Ft,Dt){var qt=Ft.static,fe=Ft.dynamic;if(cu in qt){var pe=qt[cu];return pe!==null&&nr.getVAO(pe)===null&&(pe=nr.createVAO(pe)),Gi(function(Jt){return Jt.link(nr.getVAO(pe))})}else if(cu in fe){var re=fe[cu];return Aa(re,function(Jt,le){var Bt=Jt.invoke(le,re);return le.def(Jt.shared.vao+".getVAO("+Bt+")")})}return null}function ni(Ft){var Dt=Ft.static,qt=Ft.dynamic,fe={};return Object.keys(Dt).forEach(function(pe){var re=Dt[pe];fe[pe]=Gi(function(Jt,le){return typeof re=="number"||typeof re=="boolean"?""+re:Jt.link(re)})}),Object.keys(qt).forEach(function(pe){var re=qt[pe];fe[pe]=Aa(re,function(Jt,le){return Jt.invoke(le,re)})}),fe}function Di(Ft,Dt,qt,fe,pe){var re=Ft.static,Jt=Ft.dynamic;st.optional(function(){var wr=[bl,uu,Ac,Os,Ps,fh,_l,hh,Mc,cu].concat(He);function Nr(jr){Object.keys(jr).forEach(function(yn){st.command(wr.indexOf(yn)>=0,'unknown parameter "'+yn+'"',pe.commandStr)})}Nr(re),Nr(Jt)});var le=Ur(Ft,Dt),Bt=Er(Ft,pe),Zt=an(Ft,Bt,pe),kt=mn(Ft,pe),ue=xi(Ft,pe),xe=en(Ft,pe,le);function ke(wr){var Nr=Zt[wr];Nr&&(ue[wr]=Nr)}ke(cs),ke(hr(Av));var Be=Object.keys(ue).length>0,De={framebuffer:Bt,draw:kt,shader:xe,state:ue,dirty:Be,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(De.profile=Zr(Ft,pe),De.uniforms=Hi(qt,pe),De.drawVAO=De.scopeVAO=Pi(Ft,pe),!De.drawVAO&&xe.program&&!le&&Yt.angle_instanced_arrays){var er=!0,Or=xe.program.attributes.map(function(wr){var Nr=Dt.static[wr];return er=er&&!!Nr,Nr});if(er&&Or.length>0){var Jr=nr.getVAO(nr.createVAO(Or));De.drawVAO=new na(null,null,null,function(wr,Nr){return wr.link(Jr)}),De.useVAO=!0}}return le?De.useVAO=!0:De.attributes=hn(Dt,pe),De.context=ni(fe,pe),De}function Li(Ft,Dt,qt){var fe=Ft.shared,pe=fe.context,re=Ft.scope();Object.keys(qt).forEach(function(Jt){Dt.save(pe,"."+Jt);var le=qt[Jt],Bt=le.append(Ft,Dt);Array.isArray(Bt)?re(pe,".",Jt,"=[",Bt.join(),"];"):re(pe,".",Jt,"=",Bt,";")}),Dt(re)}function wi(Ft,Dt,qt,fe){var pe=Ft.shared,re=pe.gl,Jt=pe.framebuffer,le;yr&&(le=Dt.def(pe.extensions,".webgl_draw_buffers"));var Bt=Ft.constants,Zt=Bt.drawBuffer,kt=Bt.backBuffer,ue;qt?ue=qt.append(Ft,Dt):ue=Dt.def(Jt,".next"),fe||Dt("if(",ue,"!==",Jt,".cur){"),Dt("if(",ue,"){",re,".bindFramebuffer(",Bc,",",ue,".framebuffer);"),yr&&Dt(le,".drawBuffersWEBGL(",Zt,"[",ue,".colorAttachments.length]);"),Dt("}else{",re,".bindFramebuffer(",Bc,",null);"),yr&&Dt(le,".drawBuffersWEBGL(",kt,");"),Dt("}",Jt,".cur=",ue,";"),fe||Dt("}")}function Ci(Ft,Dt,qt){var fe=Ft.shared,pe=fe.gl,re=Ft.current,Jt=Ft.next,le=fe.current,Bt=fe.next,Zt=Ft.cond(le,".dirty");He.forEach(function(kt){var ue=hr(kt);if(!(ue in qt.state)){var xe,ke;if(ue in Jt){xe=Jt[ue],ke=re[ue];var Be=Vr(Xe[ue].length,function(er){return Zt.def(xe,"[",er,"]")});Zt(Ft.cond(Be.map(function(er,Or){return er+"!=="+ke+"["+Or+"]"}).join("||")).then(pe,".",Ye[ue],"(",Be,");",Be.map(function(er,Or){return ke+"["+Or+"]="+er}).join(";"),";"))}else{xe=Zt.def(Bt,".",ue);var De=Ft.cond(xe,"!==",le,".",ue);Zt(De),ue in fr?De(Ft.cond(xe).then(pe,".enable(",fr[ue],");").else(pe,".disable(",fr[ue],");"),le,".",ue,"=",xe,";"):De(pe,".",Ye[ue],"(",xe,");",le,".",ue,"=",xe,";")}}}),Object.keys(qt.state).length===0&&Zt(le,".dirty=false;"),Dt(Zt)}function Qi(Ft,Dt,qt,fe){var pe=Ft.shared,re=Ft.current,Jt=pe.current,le=pe.gl;Px(Object.keys(qt)).forEach(function(Bt){var Zt=qt[Bt];if(!(fe&&!fe(Zt))){var kt=Zt.append(Ft,Dt);if(fr[Bt]){var ue=fr[Bt];ks(Zt)?kt?Dt(le,".enable(",ue,");"):Dt(le,".disable(",ue,");"):Dt(Ft.cond(kt).then(le,".enable(",ue,");").else(le,".disable(",ue,");")),Dt(Jt,".",Bt,"=",kt,";")}else if(wn(kt)){var xe=re[Bt];Dt(le,".",Ye[Bt],"(",kt,");",kt.map(function(ke,Be){return xe+"["+Be+"]="+ke}).join(";"),";")}else Dt(le,".",Ye[Bt],"(",kt,");",Jt,".",Bt,"=",kt,";")}})}function Mi(Ft,Dt){rr&&(Ft.instancing=Dt.def(Ft.shared.extensions,".angle_instanced_arrays"))}function Qr(Ft,Dt,qt,fe,pe){var re=Ft.shared,Jt=Ft.stats,le=re.current,Bt=re.timer,Zt=qt.profile;function kt(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var ue,xe;function ke(wr){ue=Dt.def(),wr(ue,"=",kt(),";"),typeof pe=="string"?wr(Jt,".count+=",pe,";"):wr(Jt,".count++;"),Qe&&(fe?(xe=Dt.def(),wr(xe,"=",Bt,".getNumPendingQueries();")):wr(Bt,".beginQuery(",Jt,");"))}function Be(wr){wr(Jt,".cpuTime+=",kt(),"-",ue,";"),Qe&&(fe?wr(Bt,".pushScopeStats(",xe,",",Bt,".getNumPendingQueries(),",Jt,");"):wr(Bt,".endQuery();"))}function De(wr){var Nr=Dt.def(le,".profile");Dt(le,".profile=",wr,";"),Dt.exit(le,".profile=",Nr,";")}var er;if(Zt){if(ks(Zt)){Zt.enable?(ke(Dt),Be(Dt.exit),De("true")):De("false");return}er=Zt.append(Ft,Dt),De(er)}else er=Dt.def(le,".profile");var Or=Ft.block();ke(Or),Dt("if(",er,"){",Or,"}");var Jr=Ft.block();Be(Jr),Dt.exit("if(",er,"){",Jr,"}")}function ia(Ft,Dt,qt,fe,pe){var re=Ft.shared;function Jt(Bt){switch(Bt){case Tc:case vh:case ph:return 2;case mi:case gh:case yh:return 3;case Ic:case vu:case mh:return 4;default:return 1}}function le(Bt,Zt,kt){var ue=re.gl,xe=Dt.def(Bt,".location"),ke=Dt.def(re.attributes,"[",xe,"]"),Be=kt.state,De=kt.buffer,er=[kt.x,kt.y,kt.z,kt.w],Or=["buffer","normalized","offset","stride"];function Jr(){Dt("if(!",ke,".buffer){",ue,".enableVertexAttribArray(",xe,");}");var Nr=kt.type,jr;if(kt.size?jr=Dt.def(kt.size,"||",Zt):jr=Zt,Dt("if(",ke,".type!==",Nr,"||",ke,".size!==",jr,"||",Or.map(function(_i){return ke+"."+_i+"!=="+kt[_i]}).join("||"),"){",ue,".bindBuffer(",du,",",De,".buffer);",ue,".vertexAttribPointer(",[xe,jr,Nr,kt.normalized,kt.stride,kt.offset],");",ke,".type=",Nr,";",ke,".size=",jr,";",Or.map(function(_i){return ke+"."+_i+"="+kt[_i]+";"}).join(""),"}"),rr){var yn=kt.divisor;Dt("if(",ke,".divisor!==",yn,"){",Ft.instancing,".vertexAttribDivisorANGLE(",[xe,yn],");",ke,".divisor=",yn,";}")}}function wr(){Dt("if(",ke,".buffer){",ue,".disableVertexAttribArray(",xe,");",ke,".buffer=null;","}if(",Ec.map(function(Nr,jr){return ke+"."+Nr+"!=="+er[jr]}).join("||"),"){",ue,".vertexAttrib4f(",xe,",",er,");",Ec.map(function(Nr,jr){return ke+"."+Nr+"="+er[jr]+";"}).join(""),"}")}Be===su?Jr():Be===fv?wr():(Dt("if(",Be,"===",su,"){"),Jr(),Dt("}else{"),wr(),Dt("}"))}fe.forEach(function(Bt){var Zt=Bt.name,kt=qt.attributes[Zt],ue;if(kt){if(!pe(kt))return;ue=kt.append(Ft,Dt)}else{if(!pe(jp))return;var xe=Ft.scopeAttrib(Zt);st.optional(function(){Ft.assert(Dt,xe+".state","missing attribute "+Zt)}),ue={},Object.keys(new ge).forEach(function(ke){ue[ke]=Dt.def(xe,".",ke)})}le(Ft.link(Bt),Jt(Bt.info.type),ue)})}function Mn(Ft,Dt,qt,fe,pe){for(var re=Ft.shared,Jt=re.gl,le,Bt=0;Bt<fe.length;++Bt){var Zt=fe[Bt],kt=Zt.name,ue=Zt.info.type,xe=qt.uniforms[kt],ke=Ft.link(Zt),Be=ke+".location",De;if(xe){if(!pe(xe))continue;if(ks(xe)){var er=xe.value;if(st.command(er!==null&&typeof er!="undefined",'missing uniform "'+kt+'"',Ft.commandStr),ue===Lc||ue===Ds){st.command(typeof er=="function"&&(ue===Lc&&(er._reglType==="texture2d"||er._reglType==="framebuffer")||ue===Ds&&(er._reglType==="textureCube"||er._reglType==="framebufferCube")),"invalid texture for uniform "+kt,Ft.commandStr);var Or=Ft.link(er._texture||er.color[0]._texture);Dt(Jt,".uniform1i(",Be,",",Or+".bind());"),Dt.exit(Or,".unbind();")}else if(ue===Pc||ue===Dc||ue===Ma){st.optional(function(){st.command(wn(er),"invalid matrix for uniform "+kt,Ft.commandStr),st.command(ue===Pc&&er.length===4||ue===Dc&&er.length===9||ue===Ma&&er.length===16,"invalid length for matrix uniform "+kt,Ft.commandStr)});var Jr=Ft.global.def("new Float32Array(["+Array.prototype.slice.call(er)+"])"),wr=2;ue===Dc?wr=3:ue===Ma&&(wr=4),Dt(Jt,".uniformMatrix",wr,"fv(",Be,",false,",Jr,");")}else{switch(ue){case dh:st.commandType(er,"number","uniform "+kt,Ft.commandStr),le="1f";break;case Tc:st.command(wn(er)&&er.length===2,"uniform "+kt,Ft.commandStr),le="2f";break;case mi:st.command(wn(er)&&er.length===3,"uniform "+kt,Ft.commandStr),le="3f";break;case Ic:st.command(wn(er)&&er.length===4,"uniform "+kt,Ft.commandStr),le="4f";break;case Dv:st.commandType(er,"boolean","uniform "+kt,Ft.commandStr),le="1i";break;case Oc:st.commandType(er,"number","uniform "+kt,Ft.commandStr),le="1i";break;case ph:st.command(wn(er)&&er.length===2,"uniform "+kt,Ft.commandStr),le="2i";break;case vh:st.command(wn(er)&&er.length===2,"uniform "+kt,Ft.commandStr),le="2i";break;case yh:st.command(wn(er)&&er.length===3,"uniform "+kt,Ft.commandStr),le="3i";break;case gh:st.command(wn(er)&&er.length===3,"uniform "+kt,Ft.commandStr),le="3i";break;case mh:st.command(wn(er)&&er.length===4,"uniform "+kt,Ft.commandStr),le="4i";break;case vu:st.command(wn(er)&&er.length===4,"uniform "+kt,Ft.commandStr),le="4i";break}Dt(Jt,".uniform",le,"(",Be,",",wn(er)?Array.prototype.slice.call(er):er,");")}continue}else De=xe.append(Ft,Dt)}else{if(!pe(jp))continue;De=Dt.def(re.uniforms,"[",Nt.id(kt),"]")}ue===Lc?(st(!Array.isArray(De),"must specify a scalar prop for textures"),Dt("if(",De,"&&",De,'._reglType==="framebuffer"){',De,"=",De,".color[0];","}")):ue===Ds&&(st(!Array.isArray(De),"must specify a scalar prop for cube maps"),Dt("if(",De,"&&",De,'._reglType==="framebufferCube"){',De,"=",De,".color[0];","}")),st.optional(function(){function Ta(wo,wl){Ft.assert(Dt,wo,'bad data or missing for uniform "'+kt+'".  '+wl)}function Bv(wo){st(!Array.isArray(De),"must not specify an array type for uniform"),Ta("typeof "+De+'==="'+wo+'"',"invalid type, expected "+wo)}function to(wo,wl){Array.isArray(De)?st(De.length===wo,"must have length "+wo):Ta(re.isArrayLike+"("+De+")&&"+De+".length==="+wo,"invalid vector, should have length "+wo,Ft.commandStr)}function Qp(wo){st(!Array.isArray(De),"must not specify a value type"),Ta("typeof "+De+'==="function"&&'+De+'._reglType==="texture'+(wo===Pv?"2d":"Cube")+'"',"invalid texture type",Ft.commandStr)}switch(ue){case Oc:Bv("number");break;case vh:to(2,"number");break;case gh:to(3,"number");break;case vu:to(4,"number");break;case dh:Bv("number");break;case Tc:to(2,"number");break;case mi:to(3,"number");break;case Ic:to(4,"number");break;case Dv:Bv("boolean");break;case ph:to(2,"boolean");break;case yh:to(3,"boolean");break;case mh:to(4,"boolean");break;case Pc:to(4,"number");break;case Dc:to(9,"number");break;case Ma:to(16,"number");break;case Lc:Qp(Pv);break;case Ds:Qp(Ix);break}});var Nr=1;switch(ue){case Lc:case Ds:var jr=Dt.def(De,"._texture");Dt(Jt,".uniform1i(",Be,",",jr,".bind());"),Dt.exit(jr,".unbind();");continue;case Oc:case Dv:le="1i";break;case vh:case ph:le="2i",Nr=2;break;case gh:case yh:le="3i",Nr=3;break;case vu:case mh:le="4i",Nr=4;break;case dh:le="1f";break;case Tc:le="2f",Nr=2;break;case mi:le="3f",Nr=3;break;case Ic:le="4f",Nr=4;break;case Pc:le="Matrix2fv";break;case Dc:le="Matrix3fv";break;case Ma:le="Matrix4fv";break}if(Dt(Jt,".uniform",le,"(",Be,","),le.charAt(0)==="M"){var yn=Math.pow(ue-Pc+2,2),_i=Ft.global.def("new Float32Array(",yn,")");Array.isArray(De)?Dt("false,(",Vr(yn,function(Ta){return _i+"["+Ta+"]="+De[Ta]}),",",_i,")"):Dt("false,(Array.isArray(",De,")||",De," instanceof Float32Array)?",De,":(",Vr(yn,function(Ta){return _i+"["+Ta+"]="+De+"["+Ta+"]"}),",",_i,")")}else Nr>1?Dt(Vr(Nr,function(Ta){return Array.isArray(De)?De[Ta]:De+"["+Ta+"]"})):(st(!Array.isArray(De),"uniform value must not be an array"),Dt(De));Dt(");")}}function Lr(Ft,Dt,qt,fe){var pe=Ft.shared,re=pe.gl,Jt=pe.draw,le=fe.draw;function Bt(){var jr=le.elements,yn,_i=Dt;return jr?((jr.contextDep&&fe.contextDynamic||jr.propDep)&&(_i=qt),yn=jr.append(Ft,_i)):yn=_i.def(Jt,".",Os),yn&&_i("if("+yn+")"+re+".bindBuffer("+Ax+","+yn+".buffer.buffer);"),yn}function Zt(){var jr=le.count,yn,_i=Dt;return jr?((jr.contextDep&&fe.contextDynamic||jr.propDep)&&(_i=qt),yn=jr.append(Ft,_i),st.optional(function(){jr.MISSING&&Ft.assert(Dt,"false","missing vertex count"),jr.DYNAMIC&&Ft.assert(_i,yn+">=0","missing vertex count")})):(yn=_i.def(Jt,".",_l),st.optional(function(){Ft.assert(_i,yn+">=0","missing vertex count")})),yn}var kt=Bt();function ue(jr){var yn=le[jr];return yn?yn.contextDep&&fe.contextDynamic||yn.propDep?yn.append(Ft,qt):yn.append(Ft,Dt):Dt.def(Jt,".",jr)}var xe=ue(Ps),ke=ue(fh),Be=Zt();if(typeof Be=="number"){if(Be===0)return}else qt("if(",Be,"){"),qt.exit("}");var De,er;rr&&(De=ue(hh),er=Ft.instancing);var Or=kt+".type",Jr=le.elements&&ks(le.elements);function wr(){function jr(){qt(er,".drawElementsInstancedANGLE(",[xe,Be,Or,ke+"<<(("+Or+"-"+Dp+")>>1)",De],");")}function yn(){qt(er,".drawArraysInstancedANGLE(",[xe,ke,Be,De],");")}kt?Jr?jr():(qt("if(",kt,"){"),jr(),qt("}else{"),yn(),qt("}")):yn()}function Nr(){function jr(){qt(re+".drawElements("+[xe,Be,Or,ke+"<<(("+Or+"-"+Dp+")>>1)"]+");")}function yn(){qt(re+".drawArrays("+[xe,ke,Be]+");")}kt?Jr?jr():(qt("if(",kt,"){"),jr(),qt("}else{"),yn(),qt("}")):yn()}rr&&(typeof De!="number"||De>=0)?typeof De=="string"?(qt("if(",De,">0){"),wr(),qt("}else if(",De,"<0){"),Nr(),qt("}")):wr():Nr()}function un(Ft,Dt,qt,fe,pe){var re=Br(),Jt=re.proc("body",pe);return st.optional(function(){re.commandStr=Dt.commandStr,re.command=re.link(Dt.commandStr)}),rr&&(re.instancing=Jt.def(re.shared.extensions,".angle_instanced_arrays")),Ft(re,Jt,qt,fe),re.compile().body}function pn(Ft,Dt,qt,fe){Mi(Ft,Dt),qt.useVAO?qt.drawVAO?Dt(Ft.shared.vao,".setVAO(",qt.drawVAO.append(Ft,Dt),");"):Dt(Ft.shared.vao,".setVAO(",Ft.shared.vao,".targetVAO);"):(Dt(Ft.shared.vao,".setVAO(null);"),ia(Ft,Dt,qt,fe.attributes,function(){return!0})),Mn(Ft,Dt,qt,fe.uniforms,function(){return!0}),Lr(Ft,Dt,Dt,qt)}function bi(Ft,Dt){var qt=Ft.proc("draw",1);Mi(Ft,qt),Li(Ft,qt,Dt.context),wi(Ft,qt,Dt.framebuffer),Ci(Ft,qt,Dt),Qi(Ft,qt,Dt.state),Qr(Ft,qt,Dt,!1,!0);var fe=Dt.shader.progVar.append(Ft,qt);if(qt(Ft.shared.gl,".useProgram(",fe,".program);"),Dt.shader.program)pn(Ft,qt,Dt,Dt.shader.program);else{qt(Ft.shared.vao,".setVAO(null);");var pe=Ft.global.def("{}"),re=qt.def(fe,".id"),Jt=qt.def(pe,"[",re,"]");qt(Ft.cond(Jt).then(Jt,".call(this,a0);").else(Jt,"=",pe,"[",re,"]=",Ft.link(function(le){return un(pn,Ft,Dt,le,1)}),"(",fe,");",Jt,".call(this,a0);"))}Object.keys(Dt.state).length>0&&qt(Ft.shared.current,".dirty=true;")}function Vo(Ft,Dt,qt,fe){Ft.batchId="a1",Mi(Ft,Dt);function pe(){return!0}ia(Ft,Dt,qt,fe.attributes,pe),Mn(Ft,Dt,qt,fe.uniforms,pe),Lr(Ft,Dt,Dt,qt)}function Fs(Ft,Dt,qt,fe){Mi(Ft,Dt);var pe=qt.contextDep,re=Dt.def(),Jt="a0",le="a1",Bt=Dt.def();Ft.shared.props=Bt,Ft.batchId=re;var Zt=Ft.scope(),kt=Ft.scope();Dt(Zt.entry,"for(",re,"=0;",re,"<",le,";++",re,"){",Bt,"=",Jt,"[",re,"];",kt,"}",Zt.exit);function ue(Or){return Or.contextDep&&pe||Or.propDep}function xe(Or){return!ue(Or)}if(qt.needsContext&&Li(Ft,kt,qt.context),qt.needsFramebuffer&&wi(Ft,kt,qt.framebuffer),Qi(Ft,kt,qt.state,ue),qt.profile&&ue(qt.profile)&&Qr(Ft,kt,qt,!1,!0),fe)qt.useVAO?qt.drawVAO?ue(qt.drawVAO)?kt(Ft.shared.vao,".setVAO(",qt.drawVAO.append(Ft,kt),");"):Zt(Ft.shared.vao,".setVAO(",qt.drawVAO.append(Ft,Zt),");"):Zt(Ft.shared.vao,".setVAO(",Ft.shared.vao,".targetVAO);"):(Zt(Ft.shared.vao,".setVAO(null);"),ia(Ft,Zt,qt,fe.attributes,xe),ia(Ft,kt,qt,fe.attributes,ue)),Mn(Ft,Zt,qt,fe.uniforms,xe),Mn(Ft,kt,qt,fe.uniforms,ue),Lr(Ft,Zt,kt,qt);else{var ke=Ft.global.def("{}"),Be=qt.shader.progVar.append(Ft,kt),De=kt.def(Be,".id"),er=kt.def(ke,"[",De,"]");kt(Ft.shared.gl,".useProgram(",Be,".program);","if(!",er,"){",er,"=",ke,"[",De,"]=",Ft.link(function(Or){return un(Vo,Ft,qt,Or,2)}),"(",Be,");}",er,".call(this,a0[",re,"],",re,");")}}function Vt(Ft,Dt){var qt=Ft.proc("batch",2);Ft.batchId="0",Mi(Ft,qt);var fe=!1,pe=!0;Object.keys(Dt.context).forEach(function(ke){fe=fe||Dt.context[ke].propDep}),fe||(Li(Ft,qt,Dt.context),pe=!1);var re=Dt.framebuffer,Jt=!1;re?(re.propDep?fe=Jt=!0:re.contextDep&&fe&&(Jt=!0),Jt||wi(Ft,qt,re)):wi(Ft,qt,null),Dt.state.viewport&&Dt.state.viewport.propDep&&(fe=!0);function le(ke){return ke.contextDep&&fe||ke.propDep}Ci(Ft,qt,Dt),Qi(Ft,qt,Dt.state,function(ke){return!le(ke)}),(!Dt.profile||!le(Dt.profile))&&Qr(Ft,qt,Dt,!1,"a1"),Dt.contextDep=fe,Dt.needsContext=pe,Dt.needsFramebuffer=Jt;var Bt=Dt.shader.progVar;if(Bt.contextDep&&fe||Bt.propDep)Fs(Ft,qt,Dt,null);else{var Zt=Bt.append(Ft,qt);if(qt(Ft.shared.gl,".useProgram(",Zt,".program);"),Dt.shader.program)Fs(Ft,qt,Dt,Dt.shader.program);else{qt(Ft.shared.vao,".setVAO(null);");var kt=Ft.global.def("{}"),ue=qt.def(Zt,".id"),xe=qt.def(kt,"[",ue,"]");qt(Ft.cond(xe).then(xe,".call(this,a0,a1);").else(xe,"=",kt,"[",ue,"]=",Ft.link(function(ke){return un(Fs,Ft,Dt,ke,2)}),"(",Zt,");",xe,".call(this,a0,a1);"))}}Object.keys(Dt.state).length>0&&qt(Ft.shared.current,".dirty=true;")}function Ae(Ft,Dt){var qt=Ft.proc("scope",3);Ft.batchId="a2";var fe=Ft.shared,pe=fe.current;Li(Ft,qt,Dt.context),Dt.framebuffer&&Dt.framebuffer.append(Ft,qt),Px(Object.keys(Dt.state)).forEach(function(Jt){var le=Dt.state[Jt],Bt=le.append(Ft,qt);wn(Bt)?Bt.forEach(function(Zt,kt){qt.set(Ft.next[Jt],"["+kt+"]",Zt)}):qt.set(fe.next,"."+Jt,Bt)}),Qr(Ft,qt,Dt,!0,!0),[Os,fh,_l,hh,Ps].forEach(function(Jt){var le=Dt.draw[Jt];!le||qt.set(fe.draw,"."+Jt,""+le.append(Ft,qt))}),Object.keys(Dt.uniforms).forEach(function(Jt){var le=Dt.uniforms[Jt].append(Ft,qt);Array.isArray(le)&&(le="["+le.join()+"]"),qt.set(fe.uniforms,"["+Nt.id(Jt)+"]",le)}),Object.keys(Dt.attributes).forEach(function(Jt){var le=Dt.attributes[Jt].append(Ft,qt),Bt=Ft.scopeAttrib(Jt);Object.keys(new ge).forEach(function(Zt){qt.set(Bt,"."+Zt,le[Zt])})}),Dt.scopeVAO&&qt.set(fe.vao,".targetVAO",Dt.scopeVAO.append(Ft,qt));function re(Jt){var le=Dt.shader[Jt];le&&qt.set(fe.shader,"."+Jt,le.append(Ft,qt))}re(uu),re(Ac),Object.keys(Dt.state).length>0&&(qt(pe,".dirty=true;"),qt.exit(pe,".dirty=true;")),qt("a1(",Ft.shared.context,",a0,",Ft.batchId,");")}function _e(Ft){if(!(typeof Ft!="object"||wn(Ft))){for(var Dt=Object.keys(Ft),qt=0;qt<Dt.length;++qt)if(Re.isDynamic(Ft[Dt[qt]]))return!0;return!1}}function br(Ft,Dt,qt){var fe=Dt.static[qt];if(!fe||!_e(fe))return;var pe=Ft.global,re=Object.keys(fe),Jt=!1,le=!1,Bt=!1,Zt=Ft.global.def("{}");re.forEach(function(ue){var xe=fe[ue];if(Re.isDynamic(xe)){typeof xe=="function"&&(xe=fe[ue]=Re.unbox(xe));var ke=Aa(xe,null);Jt=Jt||ke.thisDep,Bt=Bt||ke.propDep,le=le||ke.contextDep}else{switch(pe(Zt,".",ue,"="),typeof xe){case"number":pe(xe);break;case"string":pe('"',xe,'"');break;case"object":Array.isArray(xe)&&pe("[",xe.join(),"]");break;default:pe(Ft.link(xe));break}pe(";")}});function kt(ue,xe){re.forEach(function(ke){var Be=fe[ke];if(!!Re.isDynamic(Be)){var De=ue.invoke(xe,Be);xe(Zt,".",ke,"=",De,";")}})}Dt.dynamic[qt]=new Re.DynamicVariable(sh,{thisDep:Jt,contextDep:le,propDep:Bt,ref:Zt,append:kt}),delete Dt.static[qt]}function on(Ft,Dt,qt,fe,pe){var re=Br();re.stats=re.link(pe),Object.keys(Dt.static).forEach(function(le){br(re,Dt,le)}),Up.forEach(function(le){br(re,Ft,le)});var Jt=Di(Ft,Dt,qt,fe,re);return bi(re,Jt),Ae(re,Jt),Vt(re,Jt),x(re.compile(),{destroy:function(){Jt.shader.program.destroy()}})}return{next:xr,current:Xe,procs:function(){var Ft=Br(),Dt=Ft.proc("poll"),qt=Ft.proc("refresh"),fe=Ft.block();Dt(fe),qt(fe);var pe=Ft.shared,re=pe.gl,Jt=pe.next,le=pe.current;fe(le,".dirty=false;"),wi(Ft,Dt),wi(Ft,qt,null,!0);var Bt;rr&&(Bt=Ft.link(rr)),Yt.oes_vertex_array_object&&qt(Ft.link(Yt.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Zt=0;Zt<Me.maxAttributes;++Zt){var kt=qt.def(pe.attributes,"[",Zt,"]"),ue=Ft.cond(kt,".buffer");ue.then(re,".enableVertexAttribArray(",Zt,");",re,".bindBuffer(",du,",",kt,".buffer.buffer);",re,".vertexAttribPointer(",Zt,",",kt,".size,",kt,".type,",kt,".normalized,",kt,".stride,",kt,".offset);").else(re,".disableVertexAttribArray(",Zt,");",re,".vertexAttrib4f(",Zt,",",kt,".x,",kt,".y,",kt,".z,",kt,".w);",kt,".buffer=null;"),qt(ue),rr&&qt(Bt,".vertexAttribDivisorANGLE(",Zt,",",kt,".divisor);")}return qt(Ft.shared.vao,".currentVAO=null;",Ft.shared.vao,".setVAO(",Ft.shared.vao,".targetVAO);"),Object.keys(fr).forEach(function(xe){var ke=fr[xe],Be=fe.def(Jt,".",xe),De=Ft.block();De("if(",Be,"){",re,".enable(",ke,")}else{",re,".disable(",ke,")}",le,".",xe,"=",Be,";"),qt(De),Dt("if(",Be,"!==",le,".",xe,"){",De,"}")}),Object.keys(Ye).forEach(function(xe){var ke=Ye[xe],Be=Xe[xe],De,er,Or=Ft.block();if(Or(re,".",ke,"("),wn(Be)){var Jr=Be.length;De=Ft.global.def(Jt,".",xe),er=Ft.global.def(le,".",xe),Or(Vr(Jr,function(wr){return De+"["+wr+"]"}),");",Vr(Jr,function(wr){return er+"["+wr+"]="+De+"["+wr+"];"}).join("")),Dt("if(",Vr(Jr,function(wr){return De+"["+wr+"]!=="+er+"["+wr+"]"}).join("||"),"){",Or,"}")}else De=fe.def(Jt,".",xe),er=fe.def(le,".",xe),Or(De,");",le,".",xe,"=",De,";"),Dt("if(",De,"!==",er,"){",Or,"}");qt(Or)}),Ft.compile()}(),compile:on}}function Zp(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Dx=34918,Lx=34919,kv=35007,El=function(it,Nt){if(!Nt.ext_disjoint_timer_query)return null;var Yt=[];function Me(){return Yt.pop()||Nt.ext_disjoint_timer_query.createQueryEXT()}function Ne(rr){Yt.push(rr)}var Se=[];function ce(rr){var yr=Me();Nt.ext_disjoint_timer_query.beginQueryEXT(kv,yr),Se.push(yr),Qe(Se.length-1,Se.length,rr)}function $e(){Nt.ext_disjoint_timer_query.endQueryEXT(kv)}function qe(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var nr=[];function tr(){return nr.pop()||new qe}function or(rr){nr.push(rr)}var vr=[];function Qe(rr,yr,Xe){var xr=tr();xr.startQueryIndex=rr,xr.endQueryIndex=yr,xr.sum=0,xr.stats=Xe,vr.push(xr)}var lr=[],ge=[];function Oe(){var rr,yr,Xe=Se.length;if(Xe!==0){ge.length=Math.max(ge.length,Xe+1),lr.length=Math.max(lr.length,Xe+1),lr[0]=0,ge[0]=0;var xr=0;for(rr=0,yr=0;yr<Se.length;++yr){var He=Se[yr];Nt.ext_disjoint_timer_query.getQueryObjectEXT(He,Lx)?(xr+=Nt.ext_disjoint_timer_query.getQueryObjectEXT(He,Dx),Ne(He)):Se[rr++]=He,lr[yr+1]=xr,ge[yr+1]=rr}for(Se.length=rr,rr=0,yr=0;yr<vr.length;++yr){var fr=vr[yr],Ye=fr.startQueryIndex,hr=fr.endQueryIndex;fr.sum+=lr[hr]-lr[Ye];var _r=ge[Ye],Hr=ge[hr];Hr===_r?(fr.stats.gpuTime+=fr.sum/1e6,or(fr)):(fr.startQueryIndex=_r,fr.endQueryIndex=Hr,vr[rr++]=fr)}vr.length=rr}}return{beginQuery:ce,endQuery:$e,pushScopeStats:Qe,update:Oe,getNumPendingQueries:function(){return Se.length},clear:function(){Yt.push.apply(Yt,Se);for(var rr=0;rr<Yt.length;rr++)Nt.ext_disjoint_timer_query.deleteQueryEXT(Yt[rr]);Se.length=0,Yt.length=0},restore:function(){Se.length=0,Yt.length=0}}},Rx=16384,Nx=256,kx=1024,ca=34962,_h="webglcontextlost",Kp="webglcontextrestored",Bs=1,Bx=2,Fx=3;function $p(it,Nt){for(var Yt=0;Yt<it.length;++Yt)if(it[Yt]===Nt)return Yt;return-1}function Gx(it){var Nt=Yr(it);if(!Nt)return null;var Yt=Nt.gl,Me=Yt.getContextAttributes(),Ne=Yt.isContextLost(),Se=Nn(Yt,Nt);if(!Se)return null;var ce=Ce(),$e=Zp(),qe=Se.extensions,nr=El(Yt,qe),tr=ze(),or=Yt.drawingBufferWidth,vr=Yt.drawingBufferHeight,Qe={tick:0,time:0,viewportWidth:or,viewportHeight:vr,framebufferWidth:or,framebufferHeight:vr,drawingBufferWidth:or,drawingBufferHeight:vr,pixelRatio:Nt.pixelRatio},lr={},ge={elements:null,primitive:4,count:-1,offset:0,instances:-1},Oe=Of(Yt,qe),rr=Zl(Yt,$e,Nt,Xe),yr=bx(Yt,qe,Oe,$e,rr);function Xe(Lr){return yr.destroyBuffer(Lr)}var xr=Xd(Yt,qe,rr,$e),He=Sx(Yt,ce,$e,Nt),fr=nv(Yt,qe,Oe,function(){_r.procs.poll()},Qe,$e,Nt),Ye=vS(Yt,qe,Oe,$e,Nt),hr=mx(Yt,qe,Oe,fr,Ye,$e),_r=Wa(Yt,ce,qe,Oe,rr,xr,fr,hr,lr,yr,He,ge,Qe,nr,Nt),Hr=gS(Yt,hr,_r.procs.poll,Qe,Me,qe,Oe),gr=_r.next,ir=Yt.canvas,We=[],Br=[],Zr=[],Er=[Nt.onDestroy],an=null;function Ur(){if(We.length===0){nr&&nr.update(),an=null;return}an=Ke.next(Ur),Qi();for(var Lr=We.length-1;Lr>=0;--Lr){var un=We[Lr];un&&un(Qe,null,0)}Yt.flush(),nr&&nr.update()}function en(){!an&&We.length>0&&(an=Ke.next(Ur))}function mn(){an&&(Ke.cancel(Ur),an=null)}function xi(Lr){Lr.preventDefault(),Ne=!0,mn(),Br.forEach(function(un){un()})}function Hi(Lr){Yt.getError(),Ne=!1,Se.restore(),He.restore(),rr.restore(),fr.restore(),Ye.restore(),hr.restore(),yr.restore(),nr&&nr.restore(),_r.procs.refresh(),en(),Zr.forEach(function(un){un()})}ir&&(ir.addEventListener(_h,xi,!1),ir.addEventListener(Kp,Hi,!1));function hn(){We.length=0,mn(),ir&&(ir.removeEventListener(_h,xi),ir.removeEventListener(Kp,Hi)),He.clear(),hr.clear(),Ye.clear(),fr.clear(),xr.clear(),rr.clear(),yr.clear(),nr&&nr.clear(),Er.forEach(function(Lr){Lr()})}function Pi(Lr){st(!!Lr,"invalid args to regl({...})"),st.type(Lr,"object","invalid args to regl({...})");function un(pe){var re=x({},pe);delete re.uniforms,delete re.attributes,delete re.context,delete re.vao,"stencil"in re&&re.stencil.op&&(re.stencil.opBack=re.stencil.opFront=re.stencil.op,delete re.stencil.op);function Jt(le){if(le in re){var Bt=re[le];delete re[le],Object.keys(Bt).forEach(function(Zt){re[le+"."+Zt]=Bt[Zt]})}}return Jt("blend"),Jt("depth"),Jt("cull"),Jt("stencil"),Jt("polygonOffset"),Jt("scissor"),Jt("sample"),"vao"in pe&&(re.vao=pe.vao),re}function pn(pe,re){var Jt={},le={};return Object.keys(pe).forEach(function(Bt){var Zt=pe[Bt];if(Re.isDynamic(Zt)){le[Bt]=Re.unbox(Zt,Bt);return}else if(re&&Array.isArray(Zt)){for(var kt=0;kt<Zt.length;++kt)if(Re.isDynamic(Zt[kt])){le[Bt]=Re.unbox(Zt,Bt);return}}Jt[Bt]=Zt}),{dynamic:le,static:Jt}}var bi=pn(Lr.context||{},!0),Vo=pn(Lr.uniforms||{},!0),Fs=pn(Lr.attributes||{},!1),Vt=pn(un(Lr),!1),Ae={gpuTime:0,cpuTime:0,count:0},_e=_r.compile(Vt,Fs,Vo,bi,Ae),br=_e.draw,on=_e.batch,Ft=_e.scope,Dt=[];function qt(pe){for(;Dt.length<pe;)Dt.push(null);return Dt}function fe(pe,re){var Jt;if(Ne&&st.raise("context lost"),typeof pe=="function")return Ft.call(this,null,pe,0);if(typeof re=="function")if(typeof pe=="number")for(Jt=0;Jt<pe;++Jt)Ft.call(this,null,re,Jt);else if(Array.isArray(pe))for(Jt=0;Jt<pe.length;++Jt)Ft.call(this,pe[Jt],re,Jt);else return Ft.call(this,pe,re,0);else if(typeof pe=="number"){if(pe>0)return on.call(this,qt(pe|0),pe|0)}else if(Array.isArray(pe)){if(pe.length)return on.call(this,pe,pe.length)}else return br.call(this,pe)}return x(fe,{stats:Ae,destroy:function(){_e.destroy()}})}var ni=hr.setFBO=Pi({framebuffer:Re.define.call(null,Bs,"framebuffer")});function Di(Lr,un){var pn=0;_r.procs.poll();var bi=un.color;bi&&(Yt.clearColor(+bi[0]||0,+bi[1]||0,+bi[2]||0,+bi[3]||0),pn|=Rx),"depth"in un&&(Yt.clearDepth(+un.depth),pn|=Nx),"stencil"in un&&(Yt.clearStencil(un.stencil|0),pn|=kx),st(!!pn,"called regl.clear with no buffer specified"),Yt.clear(pn)}function Li(Lr){if(st(typeof Lr=="object"&&Lr,"regl.clear() takes an object as input"),"framebuffer"in Lr)if(Lr.framebuffer&&Lr.framebuffer_reglType==="framebufferCube")for(var un=0;un<6;++un)ni(x({framebuffer:Lr.framebuffer.faces[un]},Lr),Di);else ni(Lr,Di);else Di(null,Lr)}function wi(Lr){st.type(Lr,"function","regl.frame() callback must be a function"),We.push(Lr);function un(){var pn=$p(We,Lr);st(pn>=0,"cannot cancel a frame twice");function bi(){var Vo=$p(We,bi);We[Vo]=We[We.length-1],We.length-=1,We.length<=0&&mn()}We[pn]=bi}return en(),{cancel:un}}function Ci(){var Lr=gr.viewport,un=gr.scissor_box;Lr[0]=Lr[1]=un[0]=un[1]=0,Qe.viewportWidth=Qe.framebufferWidth=Qe.drawingBufferWidth=Lr[2]=un[2]=Yt.drawingBufferWidth,Qe.viewportHeight=Qe.framebufferHeight=Qe.drawingBufferHeight=Lr[3]=un[3]=Yt.drawingBufferHeight}function Qi(){Qe.tick+=1,Qe.time=Qr(),Ci(),_r.procs.poll()}function Mi(){fr.refresh(),Ci(),_r.procs.refresh(),nr&&nr.update()}function Qr(){return(ze()-tr)/1e3}Mi();function ia(Lr,un){st.type(un,"function","listener callback must be a function");var pn;switch(Lr){case"frame":return wi(un);case"lost":pn=Br;break;case"restore":pn=Zr;break;case"destroy":pn=Er;break;default:st.raise("invalid event, must be one of frame,lost,restore,destroy")}return pn.push(un),{cancel:function(){for(var bi=0;bi<pn.length;++bi)if(pn[bi]===un){pn[bi]=pn[pn.length-1],pn.pop();return}}}}var Mn=x(Pi,{clear:Li,prop:Re.define.bind(null,Bs),context:Re.define.bind(null,Bx),this:Re.define.bind(null,Fx),draw:Pi({}),buffer:function(Lr){return rr.create(Lr,ca,!1,!1)},elements:function(Lr){return xr.create(Lr,!1)},texture:fr.create2D,cube:fr.createCube,renderbuffer:Ye.create,framebuffer:hr.create,framebufferCube:hr.createCube,vao:yr.createVAO,attributes:Me,frame:wi,on:ia,limits:Oe,hasExtension:function(Lr){return Oe.extensions.indexOf(Lr.toLowerCase())>=0},read:Hr,destroy:hn,_gl:Yt,_refresh:Mi,poll:function(){Qi(),nr&&nr.update()},now:Qr,stats:$e});return Nt.onDone(null,Mn),Mn}return Gx})},75029:function(ut,L,x){"use strict";var y=x(22948),P=Array.prototype.concat,N=Array.prototype.slice,w=ut.exports=function(A){for(var O=[],I=0,C=A.length;I<C;I++){var T=A[I];y(T)?O=P.call(O,N.call(T)):O.push(T)}return O};w.wrap=function(E){return function(){return E(w(arguments))}}},7221:function(ut,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.SensorTabIndex=L.SensorClassName=L.SizeSensorId=void 0;var x="size-sensor-id";L.SizeSensorId=x;var y="size-sensor-object";L.SensorClassName=y;var P="-1";L.SensorTabIndex=P},81536:function(ut,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var x=function(P){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,w=null;return function(){for(var E=this,A=arguments.length,O=new Array(A),I=0;I<A;I++)O[I]=arguments[I];clearTimeout(w),w=setTimeout(function(){P.apply(E,O)},N)}};L.default=x},15310:function(ut,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var x=1,y=function(){return"".concat(x++)};L.default=y},57872:function(ut,L,x){"use strict";var y;y={value:!0},y=y=L.ak=void 0;var P=x(81443),N=function(O,I){var C=(0,P.getSensor)(O);return C.bind(I),function(){C.unbind(I)}};L.ak=N;var w=function(O){var I=(0,P.getSensor)(O);(0,P.removeSensor)(I)};y=w;var E="1.0.1";y=E},81443:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.removeSensor=L.getSensor=void 0;var y=w(x(15310)),P=x(48581),N=x(7221);function w(I){return I&&I.__esModule?I:{default:I}}var E={},A=function(C){var T=C.getAttribute(N.SizeSensorId);if(T&&E[T])return E[T];var D=(0,y.default)();C.setAttribute(N.SizeSensorId,D);var B=(0,P.createSensor)(C);return E[D]=B,B};L.getSensor=A;var O=function(C){var T=C.element.getAttribute(N.SizeSensorId);C.element.removeAttribute(N.SizeSensorId),C.destroy(),T&&E[T]&&delete E[T]};L.removeSensor=O},48581:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.createSensor=void 0;var y=x(68300),P=x(69217),N=typeof ResizeObserver!="undefined"?P.createSensor:y.createSensor;L.createSensor=N},68300:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.createSensor=void 0;var y=N(x(81536)),P=x(7221);function N(E){return E&&E.__esModule?E:{default:E}}var w=function(A){var O=void 0,I=[],C=function(){getComputedStyle(A).position==="static"&&(A.style.position="relative");var U=document.createElement("object");return U.onload=function(){U.contentDocument.defaultView.addEventListener("resize",T),T()},U.style.display="block",U.style.position="absolute",U.style.top="0",U.style.left="0",U.style.height="100%",U.style.width="100%",U.style.overflow="hidden",U.style.pointerEvents="none",U.style.zIndex="-1",U.style.opacity="0",U.setAttribute("class",P.SensorClassName),U.setAttribute("tabindex",P.SensorTabIndex),U.type="text/html",A.appendChild(U),U.data="about:blank",U},T=(0,y.default)(function(){I.forEach(function(k){k(A)})}),D=function(U){O||(O=C()),I.indexOf(U)===-1&&I.push(U)},B=function(){O&&O.parentNode&&(O.contentDocument&&O.contentDocument.defaultView.removeEventListener("resize",T),O.parentNode.removeChild(O),O=void 0,I=[])},G=function(U){var Y=I.indexOf(U);Y!==-1&&I.splice(Y,1),I.length===0&&O&&B()};return{element:A,bind:D,destroy:B,unbind:G}};L.createSensor=w},69217:function(ut,L,x){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.createSensor=void 0;var y=P(x(81536));function P(w){return w&&w.__esModule?w:{default:w}}var N=function(E){var A=void 0,O=[],I=(0,y.default)(function(){O.forEach(function(G){G(E)})}),C=function(){var k=new ResizeObserver(I);return k.observe(E),I(),k},T=function(k){A||(A=C()),O.indexOf(k)===-1&&O.push(k)},D=function(){A.disconnect(),O=[],A=void 0},B=function(k){var U=O.indexOf(k);U!==-1&&O.splice(U,1),O.length===0&&A&&D()};return{element:E,bind:T,destroy:D,unbind:B}};L.createSensor=N},50029:function(ut,L,x){"use strict";x.r(L),x.d(L,{__extends:function(){return P},__assign:function(){return N},__rest:function(){return w},__decorate:function(){return E},__param:function(){return A},__metadata:function(){return O},__awaiter:function(){return I},__generator:function(){return C},__createBinding:function(){return T},__exportStar:function(){return D},__values:function(){return B},__read:function(){return G},__spread:function(){return k},__spreadArrays:function(){return U},__spreadArray:function(){return Y},__await:function(){return K},__asyncGenerator:function(){return J},__asyncDelegator:function(){return q},__asyncValues:function(){return X},__makeTemplateObject:function(){return j},__importStar:function(){return lt},__importDefault:function(){return z},__classPrivateFieldGet:function(){return b},__classPrivateFieldSet:function(){return v}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var y=function($,et){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,pt){Z.__proto__=pt}||function(Z,pt){for(var _t in pt)Object.prototype.hasOwnProperty.call(pt,_t)&&(Z[_t]=pt[_t])},y($,et)};function P($,et){if(typeof et!="function"&&et!==null)throw new TypeError("Class extends value "+String(et)+" is not a constructor or null");y($,et);function Z(){this.constructor=$}$.prototype=et===null?Object.create(et):(Z.prototype=et.prototype,new Z)}var N=function(){return N=Object.assign||function(et){for(var Z,pt=1,_t=arguments.length;pt<_t;pt++){Z=arguments[pt];for(var It in Z)Object.prototype.hasOwnProperty.call(Z,It)&&(et[It]=Z[It])}return et},N.apply(this,arguments)};function w($,et){var Z={};for(var pt in $)Object.prototype.hasOwnProperty.call($,pt)&&et.indexOf(pt)<0&&(Z[pt]=$[pt]);if($!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _t=0,pt=Object.getOwnPropertySymbols($);_t<pt.length;_t++)et.indexOf(pt[_t])<0&&Object.prototype.propertyIsEnumerable.call($,pt[_t])&&(Z[pt[_t]]=$[pt[_t]]);return Z}function E($,et,Z,pt){var _t=arguments.length,It=_t<3?et:pt===null?pt=Object.getOwnPropertyDescriptor(et,Z):pt,Rt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")It=Reflect.decorate($,et,Z,pt);else for(var H=$.length-1;H>=0;H--)(Rt=$[H])&&(It=(_t<3?Rt(It):_t>3?Rt(et,Z,It):Rt(et,Z))||It);return _t>3&&It&&Object.defineProperty(et,Z,It),It}function A($,et){return function(Z,pt){et(Z,pt,$)}}function O($,et){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata($,et)}function I($,et,Z,pt){function _t(It){return It instanceof Z?It:new Z(function(Rt){Rt(It)})}return new(Z||(Z=Promise))(function(It,Rt){function H(Ut){try{St(pt.next(Ut))}catch(ae){Rt(ae)}}function ot(Ut){try{St(pt.throw(Ut))}catch(ae){Rt(ae)}}function St(Ut){Ut.done?It(Ut.value):_t(Ut.value).then(H,ot)}St((pt=pt.apply($,et||[])).next())})}function C($,et){var Z={label:0,sent:function(){if(It[0]&1)throw It[1];return It[1]},trys:[],ops:[]},pt,_t,It,Rt;return Rt={next:H(0),throw:H(1),return:H(2)},typeof Symbol=="function"&&(Rt[Symbol.iterator]=function(){return this}),Rt;function H(St){return function(Ut){return ot([St,Ut])}}function ot(St){if(pt)throw new TypeError("Generator is already executing.");for(;Z;)try{if(pt=1,_t&&(It=St[0]&2?_t.return:St[0]?_t.throw||((It=_t.return)&&It.call(_t),0):_t.next)&&!(It=It.call(_t,St[1])).done)return It;switch(_t=0,It&&(St=[St[0]&2,It.value]),St[0]){case 0:case 1:It=St;break;case 4:return Z.label++,{value:St[1],done:!1};case 5:Z.label++,_t=St[1],St=[0];continue;case 7:St=Z.ops.pop(),Z.trys.pop();continue;default:if(It=Z.trys,!(It=It.length>0&&It[It.length-1])&&(St[0]===6||St[0]===2)){Z=0;continue}if(St[0]===3&&(!It||St[1]>It[0]&&St[1]<It[3])){Z.label=St[1];break}if(St[0]===6&&Z.label<It[1]){Z.label=It[1],It=St;break}if(It&&Z.label<It[2]){Z.label=It[2],Z.ops.push(St);break}It[2]&&Z.ops.pop(),Z.trys.pop();continue}St=et.call($,Z)}catch(Ut){St=[6,Ut],_t=0}finally{pt=It=0}if(St[0]&5)throw St[1];return{value:St[0]?St[1]:void 0,done:!0}}}var T=Object.create?function($,et,Z,pt){pt===void 0&&(pt=Z),Object.defineProperty($,pt,{enumerable:!0,get:function(){return et[Z]}})}:function($,et,Z,pt){pt===void 0&&(pt=Z),$[pt]=et[Z]};function D($,et){for(var Z in $)Z!=="default"&&!Object.prototype.hasOwnProperty.call(et,Z)&&T(et,$,Z)}function B($){var et=typeof Symbol=="function"&&Symbol.iterator,Z=et&&$[et],pt=0;if(Z)return Z.call($);if($&&typeof $.length=="number")return{next:function(){return $&&pt>=$.length&&($=void 0),{value:$&&$[pt++],done:!$}}};throw new TypeError(et?"Object is not iterable.":"Symbol.iterator is not defined.")}function G($,et){var Z=typeof Symbol=="function"&&$[Symbol.iterator];if(!Z)return $;var pt=Z.call($),_t,It=[],Rt;try{for(;(et===void 0||et-- >0)&&!(_t=pt.next()).done;)It.push(_t.value)}catch(H){Rt={error:H}}finally{try{_t&&!_t.done&&(Z=pt.return)&&Z.call(pt)}finally{if(Rt)throw Rt.error}}return It}function k(){for(var $=[],et=0;et<arguments.length;et++)$=$.concat(G(arguments[et]));return $}function U(){for(var $=0,et=0,Z=arguments.length;et<Z;et++)$+=arguments[et].length;for(var pt=Array($),_t=0,et=0;et<Z;et++)for(var It=arguments[et],Rt=0,H=It.length;Rt<H;Rt++,_t++)pt[_t]=It[Rt];return pt}function Y($,et,Z){if(Z||arguments.length===2)for(var pt=0,_t=et.length,It;pt<_t;pt++)(It||!(pt in et))&&(It||(It=Array.prototype.slice.call(et,0,pt)),It[pt]=et[pt]);return $.concat(It||et)}function K($){return this instanceof K?(this.v=$,this):new K($)}function J($,et,Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pt=Z.apply($,et||[]),_t,It=[];return _t={},Rt("next"),Rt("throw"),Rt("return"),_t[Symbol.asyncIterator]=function(){return this},_t;function Rt(bt){pt[bt]&&(_t[bt]=function(wt){return new Promise(function(ft,ht){It.push([bt,wt,ft,ht])>1||H(bt,wt)})})}function H(bt,wt){try{ot(pt[bt](wt))}catch(ft){ae(It[0][3],ft)}}function ot(bt){bt.value instanceof K?Promise.resolve(bt.value.v).then(St,Ut):ae(It[0][2],bt)}function St(bt){H("next",bt)}function Ut(bt){H("throw",bt)}function ae(bt,wt){bt(wt),It.shift(),It.length&&H(It[0][0],It[0][1])}}function q($){var et,Z;return et={},pt("next"),pt("throw",function(_t){throw _t}),pt("return"),et[Symbol.iterator]=function(){return this},et;function pt(_t,It){et[_t]=$[_t]?function(Rt){return(Z=!Z)?{value:K($[_t](Rt)),done:_t==="return"}:It?It(Rt):Rt}:It}}function X($){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var et=$[Symbol.asyncIterator],Z;return et?et.call($):($=typeof B=="function"?B($):$[Symbol.iterator](),Z={},pt("next"),pt("throw"),pt("return"),Z[Symbol.asyncIterator]=function(){return this},Z);function pt(It){Z[It]=$[It]&&function(Rt){return new Promise(function(H,ot){Rt=$[It](Rt),_t(H,ot,Rt.done,Rt.value)})}}function _t(It,Rt,H,ot){Promise.resolve(ot).then(function(St){It({value:St,done:H})},Rt)}}function j($,et){return Object.defineProperty?Object.defineProperty($,"raw",{value:et}):$.raw=et,$}var Q=Object.create?function($,et){Object.defineProperty($,"default",{enumerable:!0,value:et})}:function($,et){$.default=et};function lt($){if($&&$.__esModule)return $;var et={};if($!=null)for(var Z in $)Z!=="default"&&Object.prototype.hasOwnProperty.call($,Z)&&T(et,$,Z);return Q(et,$),et}function z($){return $&&$.__esModule?$:{default:$}}function b($,et,Z,pt){if(Z==="a"&&!pt)throw new TypeError("Private accessor was defined without a getter");if(typeof et=="function"?$!==et||!pt:!et.has($))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Z==="m"?pt:Z==="a"?pt.call($):pt?pt.value:et.get($)}function v($,et,Z,pt,_t){if(pt==="m")throw new TypeError("Private method is not writable");if(pt==="a"&&!_t)throw new TypeError("Private accessor was defined without a setter");if(typeof et=="function"?$!==et||!_t:!et.has($))throw new TypeError("Cannot write private member to an object whose class did not declare it");return pt==="a"?_t.call($,Z):_t?_t.value=Z:et.set($,Z),Z}}}]);
